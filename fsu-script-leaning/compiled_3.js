var PIXI = function(ne) {
    "use strict";
    var t = setTimeout;
    function isArray(e) {
        return Boolean(e && void 0 !== e.length)
    }
    function noop() {}
    function Promise$1(e) {
        if (!(this instanceof Promise$1))
            throw new TypeError("Promises must be constructed via new");
        if ("function" != typeof e)
            throw new TypeError("not a function");
        this._state = 0,
        this._handled = !1,
        this._value = void 0,
        this._deferreds = [],
        doResolve(e, this)
    }
    function handle(i, o) {
        for (; 3 === i._state; )
            i = i._value;
        0 !== i._state ? (i._handled = !0,
        Promise$1._immediateFn(function() {
            var e = 1 === i._state ? o.onFulfilled : o.onRejected;
            if (null !== e) {
                var t;
                try {
                    t = e(i._value)
                } catch (e) {
                    return void reject(o.promise, e)
                }
                resolve$1(o.promise, t)
            } else
                (1 === i._state ? resolve$1 : reject)(o.promise, i._value)
        })) : i._deferreds.push(o)
    }
    function resolve$1(t, e) {
        try {
            if (e === t)
                throw new TypeError("A promise cannot be resolved with itself.");
            if (e && ("object" == typeof e || "function" == typeof e)) {
                var i = e.then;
                if (e instanceof Promise$1)
                    return t._state = 3,
                    t._value = e,
                    void finale(t);
                if ("function" == typeof i)
                    return void doResolve(function bind(e, t) {
                        return function() {
                            e.apply(t, arguments)
                        }
                    }(i, e), t)
            }
            t._state = 1,
            t._value = e,
            finale(t)
        } catch (e) {
            reject(t, e)
        }
    }
    function reject(e, t) {
        e._state = 2,
        e._value = t,
        finale(e)
    }
    function finale(e) {
        2 === e._state && 0 === e._deferreds.length && Promise$1._immediateFn(function() {
            e._handled || Promise$1._unhandledRejectionFn(e._value)
        });
        for (var t = 0, i = e._deferreds.length; t < i; t++)
            handle(e, e._deferreds[t]);
        e._deferreds = null
    }
    function Handler(e, t, i) {
        this.onFulfilled = "function" == typeof e ? e : null,
        this.onRejected = "function" == typeof t ? t : null,
        this.promise = i
    }
    function doResolve(e, t) {
        var i = !1;
        try {
            e(function(e) {
                i || (i = !0,
                resolve$1(t, e))
            }, function(e) {
                i || (i = !0,
                reject(t, e))
            })
        } catch (e) {
            if (i)
                return;
            i = !0,
            reject(t, e)
        }
    }
    Promise$1.prototype.catch = function(e) {
        return this.then(null, e)
    }
    ,
    Promise$1.prototype.then = function(e, t) {
        var i = new this.constructor(noop);
        return handle(this, new Handler(e,t,i)),
        i
    }
    ,
    Promise$1.prototype.finally = function finallyConstructor(t) {
        var i = this.constructor;
        return this.then(function(e) {
            return i.resolve(t()).then(function() {
                return e
            })
        }, function(e) {
            return i.resolve(t()).then(function() {
                return i.reject(e)
            })
        })
    }
    ,
    Promise$1.all = function(t) {
        return new Promise$1(function(o, n) {
            if (!isArray(t))
                return n(new TypeError("Promise.all accepts an array"));
            var r = Array.prototype.slice.call(t);
            if (0 === r.length)
                return o([]);
            var s = r.length;
            function res(t, e) {
                try {
                    if (e && ("object" == typeof e || "function" == typeof e)) {
                        var i = e.then;
                        if ("function" == typeof i)
                            return void i.call(e, function(e) {
                                res(t, e)
                            }, n)
                    }
                    r[t] = e,
                    0 == --s && o(r)
                } catch (e) {
                    n(e)
                }
            }
            for (var e = 0; e < r.length; e++)
                res(e, r[e])
        }
        )
    }
    ,
    Promise$1.allSettled = function allSettled(i) {
        return new this(function(o, e) {
            if (!i || void 0 === i.length)
                return e(new TypeError(typeof i + " " + i + " is not iterable(cannot read property Symbol(Symbol.iterator))"));
            var n = Array.prototype.slice.call(i);
            if (0 === n.length)
                return o([]);
            var r = n.length;
            function res(t, e) {
                if (e && ("object" == typeof e || "function" == typeof e)) {
                    var i = e.then;
                    if ("function" == typeof i)
                        return void i.call(e, function(e) {
                            res(t, e)
                        }, function(e) {
                            n[t] = {
                                status: "rejected",
                                reason: e
                            },
                            0 == --r && o(n)
                        })
                }
                n[t] = {
                    status: "fulfilled",
                    value: e
                },
                0 == --r && o(n)
            }
            for (var t = 0; t < n.length; t++)
                res(t, n[t])
        }
        )
    }
    ,
    Promise$1.resolve = function(t) {
        return t && "object" == typeof t && t.constructor === Promise$1 ? t : new Promise$1(function(e) {
            e(t)
        }
        )
    }
    ,
    Promise$1.reject = function(i) {
        return new Promise$1(function(e, t) {
            t(i)
        }
        )
    }
    ,
    Promise$1.race = function(n) {
        return new Promise$1(function(e, t) {
            if (!isArray(n))
                return t(new TypeError("Promise.race accepts an array"));
            for (var i = 0, o = n.length; i < o; i++)
                Promise$1.resolve(n[i]).then(e, t)
        }
        )
    }
    ,
    Promise$1._immediateFn = "function" == typeof setImmediate && function(e) {
        setImmediate(e)
    }
    || function(e) {
        t(e, 0)
    }
    ,
    Promise$1._unhandledRejectionFn = function _unhandledRejectionFn(e) {
        "undefined" != typeof console && console && console.warn("Possible Unhandled Promise Rejection:", e)
    }
    ;
    var c = Object.getOwnPropertySymbols
      , u = Object.prototype.hasOwnProperty
      , d = Object.prototype.propertyIsEnumerable;
    var e = function shouldUseNative() {
        try {
            if (!Object.assign)
                return !1;
            var e = new String("abc");
            if (e[5] = "de",
            "5" === Object.getOwnPropertyNames(e)[0])
                return !1;
            for (var t = {}, i = 0; i < 10; i++)
                t["_" + String.fromCharCode(i)] = i;
            if ("0123456789" !== Object.getOwnPropertyNames(t).map(function(e) {
                return t[e]
            }).join(""))
                return !1;
            var o = {};
            return "abcdefghijklmnopqrst".split("").forEach(function(e) {
                o[e] = e
            }),
            "abcdefghijklmnopqrst" === Object.keys(Object.assign({}, o)).join("")
        } catch (e) {
            return !1
        }
    }() ? Object.assign : function(e, t) {
        for (var i, o, n = arguments, r = function toObject(e) {
            if (null == e)
                throw new TypeError("Object.assign cannot be called with null or undefined");
            return Object(e)
        }(e), s = 1; s < arguments.length; s++) {
            for (var a in i = Object(n[s]))
                u.call(i, a) && (r[a] = i[a]);
            if (c) {
                o = c(i);
                for (var l = 0; l < o.length; l++)
                    d.call(i, o[l]) && (r[o[l]] = i[o[l]])
            }
        }
        return r
    }
    ;
    "undefined" == typeof globalThis && ("undefined" != typeof self ? self.globalThis = self : "undefined" != typeof global && (global.globalThis = global)),
    globalThis.Promise || (globalThis.Promise = Promise$1),
    Object.assign || (Object.assign = e);
    if (Date.now && Date.prototype.getTime || (Date.now = function now() {
        return (new Date).getTime()
    }
    ),
    !globalThis.performance || !globalThis.performance.now) {
        var i = Date.now();
        globalThis.performance || (globalThis.performance = {}),
        globalThis.performance.now = function() {
            return Date.now() - i
        }
    }
    for (var o, n, r, s, a, l, h, p, _, f, m, T, v, y, g, w, E, b, V, U, I = Date.now(), A = ["ms", "moz", "webkit", "o"], R = 0; R < A.length && !globalThis.requestAnimationFrame; ++R) {
        var P = A[R];
        globalThis.requestAnimationFrame = globalThis[P + "RequestAnimationFrame"],
        globalThis.cancelAnimationFrame = globalThis[P + "CancelAnimationFrame"] || globalThis[P + "CancelRequestAnimationFrame"]
    }
    globalThis.requestAnimationFrame || (globalThis.requestAnimationFrame = function(e) {
        if ("function" != typeof e)
            throw new TypeError(e + "is not a function");
        var t = Date.now()
          , i = 16 + I - t;
        return i < 0 && (i = 0),
        I = t,
        globalThis.self.setTimeout(function() {
            I = Date.now(),
            e(performance.now())
        }, i)
    }
    ),
    globalThis.cancelAnimationFrame || (globalThis.cancelAnimationFrame = function(e) {
        return clearTimeout(e)
    }
    ),
    Math.sign || (Math.sign = function mathSign(e) {
        return 0 === (e = Number(e)) || isNaN(e) ? e : 0 < e ? 1 : -1
    }
    ),
    Number.isInteger || (Number.isInteger = function numberIsInteger(e) {
        return "number" == typeof e && isFinite(e) && Math.floor(e) === e
    }
    ),
    globalThis.ArrayBuffer || (globalThis.ArrayBuffer = Array),
    globalThis.Float32Array || (globalThis.Float32Array = Array),
    globalThis.Uint32Array || (globalThis.Uint32Array = Array),
    globalThis.Uint16Array || (globalThis.Uint16Array = Array),
    globalThis.Uint8Array || (globalThis.Uint8Array = Array),
    globalThis.Int32Array || (globalThis.Int32Array = Array),
    ne.ENV = void 0,
    (o = ne.ENV || (ne.ENV = {}))[o.WEBGL_LEGACY = 0] = "WEBGL_LEGACY",
    o[o.WEBGL = 1] = "WEBGL",
    o[o.WEBGL2 = 2] = "WEBGL2",
    ne.RENDERER_TYPE = void 0,
    (n = ne.RENDERER_TYPE || (ne.RENDERER_TYPE = {}))[n.UNKNOWN = 0] = "UNKNOWN",
    n[n.WEBGL = 1] = "WEBGL",
    n[n.CANVAS = 2] = "CANVAS",
    ne.BUFFER_BITS = void 0,
    (r = ne.BUFFER_BITS || (ne.BUFFER_BITS = {}))[r.COLOR = 16384] = "COLOR",
    r[r.DEPTH = 256] = "DEPTH",
    r[r.STENCIL = 1024] = "STENCIL",
    ne.BLEND_MODES = void 0,
    (s = ne.BLEND_MODES || (ne.BLEND_MODES = {}))[s.NORMAL = 0] = "NORMAL",
    s[s.ADD = 1] = "ADD",
    s[s.MULTIPLY = 2] = "MULTIPLY",
    s[s.SCREEN = 3] = "SCREEN",
    s[s.OVERLAY = 4] = "OVERLAY",
    s[s.DARKEN = 5] = "DARKEN",
    s[s.LIGHTEN = 6] = "LIGHTEN",
    s[s.COLOR_DODGE = 7] = "COLOR_DODGE",
    s[s.COLOR_BURN = 8] = "COLOR_BURN",
    s[s.HARD_LIGHT = 9] = "HARD_LIGHT",
    s[s.SOFT_LIGHT = 10] = "SOFT_LIGHT",
    s[s.DIFFERENCE = 11] = "DIFFERENCE",
    s[s.EXCLUSION = 12] = "EXCLUSION",
    s[s.HUE = 13] = "HUE",
    s[s.SATURATION = 14] = "SATURATION",
    s[s.COLOR = 15] = "COLOR",
    s[s.LUMINOSITY = 16] = "LUMINOSITY",
    s[s.NORMAL_NPM = 17] = "NORMAL_NPM",
    s[s.ADD_NPM = 18] = "ADD_NPM",
    s[s.SCREEN_NPM = 19] = "SCREEN_NPM",
    s[s.NONE = 20] = "NONE",
    s[s.SRC_OVER = 0] = "SRC_OVER",
    s[s.SRC_IN = 21] = "SRC_IN",
    s[s.SRC_OUT = 22] = "SRC_OUT",
    s[s.SRC_ATOP = 23] = "SRC_ATOP",
    s[s.DST_OVER = 24] = "DST_OVER",
    s[s.DST_IN = 25] = "DST_IN",
    s[s.DST_OUT = 26] = "DST_OUT",
    s[s.DST_ATOP = 27] = "DST_ATOP",
    s[s.ERASE = 26] = "ERASE",
    s[s.SUBTRACT = 28] = "SUBTRACT",
    s[s.XOR = 29] = "XOR",
    ne.DRAW_MODES = void 0,
    (a = ne.DRAW_MODES || (ne.DRAW_MODES = {}))[a.POINTS = 0] = "POINTS",
    a[a.LINES = 1] = "LINES",
    a[a.LINE_LOOP = 2] = "LINE_LOOP",
    a[a.LINE_STRIP = 3] = "LINE_STRIP",
    a[a.TRIANGLES = 4] = "TRIANGLES",
    a[a.TRIANGLE_STRIP = 5] = "TRIANGLE_STRIP",
    a[a.TRIANGLE_FAN = 6] = "TRIANGLE_FAN",
    ne.FORMATS = void 0,
    (l = ne.FORMATS || (ne.FORMATS = {}))[l.RGBA = 6408] = "RGBA",
    l[l.RGB = 6407] = "RGB",
    l[l.RG = 33319] = "RG",
    l[l.RED = 6403] = "RED",
    l[l.RGBA_INTEGER = 36249] = "RGBA_INTEGER",
    l[l.RGB_INTEGER = 36248] = "RGB_INTEGER",
    l[l.RG_INTEGER = 33320] = "RG_INTEGER",
    l[l.RED_INTEGER = 36244] = "RED_INTEGER",
    l[l.ALPHA = 6406] = "ALPHA",
    l[l.LUMINANCE = 6409] = "LUMINANCE",
    l[l.LUMINANCE_ALPHA = 6410] = "LUMINANCE_ALPHA",
    l[l.DEPTH_COMPONENT = 6402] = "DEPTH_COMPONENT",
    l[l.DEPTH_STENCIL = 34041] = "DEPTH_STENCIL",
    ne.TARGETS = void 0,
    (h = ne.TARGETS || (ne.TARGETS = {}))[h.TEXTURE_2D = 3553] = "TEXTURE_2D",
    h[h.TEXTURE_CUBE_MAP = 34067] = "TEXTURE_CUBE_MAP",
    h[h.TEXTURE_2D_ARRAY = 35866] = "TEXTURE_2D_ARRAY",
    h[h.TEXTURE_CUBE_MAP_POSITIVE_X = 34069] = "TEXTURE_CUBE_MAP_POSITIVE_X",
    h[h.TEXTURE_CUBE_MAP_NEGATIVE_X = 34070] = "TEXTURE_CUBE_MAP_NEGATIVE_X",
    h[h.TEXTURE_CUBE_MAP_POSITIVE_Y = 34071] = "TEXTURE_CUBE_MAP_POSITIVE_Y",
    h[h.TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072] = "TEXTURE_CUBE_MAP_NEGATIVE_Y",
    h[h.TEXTURE_CUBE_MAP_POSITIVE_Z = 34073] = "TEXTURE_CUBE_MAP_POSITIVE_Z",
    h[h.TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074] = "TEXTURE_CUBE_MAP_NEGATIVE_Z",
    ne.TYPES = void 0,
    (p = ne.TYPES || (ne.TYPES = {}))[p.UNSIGNED_BYTE = 5121] = "UNSIGNED_BYTE",
    p[p.UNSIGNED_SHORT = 5123] = "UNSIGNED_SHORT",
    p[p.UNSIGNED_SHORT_5_6_5 = 33635] = "UNSIGNED_SHORT_5_6_5",
    p[p.UNSIGNED_SHORT_4_4_4_4 = 32819] = "UNSIGNED_SHORT_4_4_4_4",
    p[p.UNSIGNED_SHORT_5_5_5_1 = 32820] = "UNSIGNED_SHORT_5_5_5_1",
    p[p.UNSIGNED_INT = 5125] = "UNSIGNED_INT",
    p[p.UNSIGNED_INT_10F_11F_11F_REV = 35899] = "UNSIGNED_INT_10F_11F_11F_REV",
    p[p.UNSIGNED_INT_2_10_10_10_REV = 33640] = "UNSIGNED_INT_2_10_10_10_REV",
    p[p.UNSIGNED_INT_24_8 = 34042] = "UNSIGNED_INT_24_8",
    p[p.UNSIGNED_INT_5_9_9_9_REV = 35902] = "UNSIGNED_INT_5_9_9_9_REV",
    p[p.BYTE = 5120] = "BYTE",
    p[p.SHORT = 5122] = "SHORT",
    p[p.INT = 5124] = "INT",
    p[p.FLOAT = 5126] = "FLOAT",
    p[p.FLOAT_32_UNSIGNED_INT_24_8_REV = 36269] = "FLOAT_32_UNSIGNED_INT_24_8_REV",
    p[p.HALF_FLOAT = 36193] = "HALF_FLOAT",
    ne.SAMPLER_TYPES = void 0,
    (_ = ne.SAMPLER_TYPES || (ne.SAMPLER_TYPES = {}))[_.FLOAT = 0] = "FLOAT",
    _[_.INT = 1] = "INT",
    _[_.UINT = 2] = "UINT",
    ne.SCALE_MODES = void 0,
    (f = ne.SCALE_MODES || (ne.SCALE_MODES = {}))[f.NEAREST = 0] = "NEAREST",
    f[f.LINEAR = 1] = "LINEAR",
    ne.WRAP_MODES = void 0,
    (m = ne.WRAP_MODES || (ne.WRAP_MODES = {}))[m.CLAMP = 33071] = "CLAMP",
    m[m.REPEAT = 10497] = "REPEAT",
    m[m.MIRRORED_REPEAT = 33648] = "MIRRORED_REPEAT",
    ne.MIPMAP_MODES = void 0,
    (T = ne.MIPMAP_MODES || (ne.MIPMAP_MODES = {}))[T.OFF = 0] = "OFF",
    T[T.POW2 = 1] = "POW2",
    T[T.ON = 2] = "ON",
    T[T.ON_MANUAL = 3] = "ON_MANUAL",
    ne.ALPHA_MODES = void 0,
    (v = ne.ALPHA_MODES || (ne.ALPHA_MODES = {}))[v.NPM = 0] = "NPM",
    v[v.UNPACK = 1] = "UNPACK",
    v[v.PMA = 2] = "PMA",
    v[v.NO_PREMULTIPLIED_ALPHA = 0] = "NO_PREMULTIPLIED_ALPHA",
    v[v.PREMULTIPLY_ON_UPLOAD = 1] = "PREMULTIPLY_ON_UPLOAD",
    v[v.PREMULTIPLY_ALPHA = 2] = "PREMULTIPLY_ALPHA",
    v[v.PREMULTIPLIED_ALPHA = 2] = "PREMULTIPLIED_ALPHA",
    ne.CLEAR_MODES = void 0,
    (y = ne.CLEAR_MODES || (ne.CLEAR_MODES = {}))[y.NO = 0] = "NO",
    y[y.YES = 1] = "YES",
    y[y.AUTO = 2] = "AUTO",
    y[y.BLEND = 0] = "BLEND",
    y[y.CLEAR = 1] = "CLEAR",
    y[y.BLIT = 2] = "BLIT",
    ne.GC_MODES = void 0,
    (g = ne.GC_MODES || (ne.GC_MODES = {}))[g.AUTO = 0] = "AUTO",
    g[g.MANUAL = 1] = "MANUAL",
    ne.PRECISION = void 0,
    (w = ne.PRECISION || (ne.PRECISION = {})).LOW = "lowp",
    w.MEDIUM = "mediump",
    w.HIGH = "highp",
    ne.MASK_TYPES = void 0,
    (E = ne.MASK_TYPES || (ne.MASK_TYPES = {}))[E.NONE = 0] = "NONE",
    E[E.SCISSOR = 1] = "SCISSOR",
    E[E.STENCIL = 2] = "STENCIL",
    E[E.SPRITE = 3] = "SPRITE",
    E[E.COLOR = 4] = "COLOR",
    ne.COLOR_MASK_BITS = void 0,
    (b = ne.COLOR_MASK_BITS || (ne.COLOR_MASK_BITS = {}))[b.RED = 1] = "RED",
    b[b.GREEN = 2] = "GREEN",
    b[b.BLUE = 4] = "BLUE",
    b[b.ALPHA = 8] = "ALPHA",
    ne.MSAA_QUALITY = void 0,
    (V = ne.MSAA_QUALITY || (ne.MSAA_QUALITY = {}))[V.NONE = 0] = "NONE",
    V[V.LOW = 2] = "LOW",
    V[V.MEDIUM = 4] = "MEDIUM",
    V[V.HIGH = 8] = "HIGH",
    ne.BUFFER_TYPE = void 0,
    (U = ne.BUFFER_TYPE || (ne.BUFFER_TYPE = {}))[U.ELEMENT_ARRAY_BUFFER = 34963] = "ELEMENT_ARRAY_BUFFER",
    U[U.ARRAY_BUFFER = 34962] = "ARRAY_BUFFER",
    U[U.UNIFORM_BUFFER = 35345] = "UNIFORM_BUFFER";
    function C(e) {
        return void 0 !== e && "MacIntel" === e.platform && "number" == typeof e.maxTouchPoints && 1 < e.maxTouchPoints && "undefined" == typeof MSStream
    }
    var O = {
        createCanvas: function(e, t) {
            var i = document.createElement("canvas");
            return i.width = e,
            i.height = t,
            i
        },
        getWebGLRenderingContext: function() {
            return WebGLRenderingContext
        },
        getNavigator: function() {
            return navigator
        },
        getBaseUrl: function() {
            var e;
            return null !== (e = document.baseURI) && void 0 !== e ? e : window.location.href
        },
        fetch: function(e, t) {
            return fetch(e, t)
        }
    }
      , D = /iPhone/i
      , x = /iPod/i
      , B = /iPad/i
      , F = /\biOS-universal(?:.+)Mac\b/i
      , k = /\bAndroid(?:.+)Mobile\b/i
      , G = /Android/i
      , j = /(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i
      , q = /Silk/i
      , z = /Windows Phone/i
      , H = /\bWindows(?:.+)ARM\b/i
      , Y = /BlackBerry/i
      , X = /BB10/i
      , W = /Opera Mini/i
      , K = /\b(CriOS|Chrome)(?:.+)Mobile/i
      , J = /Mobile(?:.+)Firefox\b/i;
    var $ = function isMobile$1(e) {
        var t = {
            userAgent: "",
            platform: "",
            maxTouchPoints: 0
        };
        e || "undefined" == typeof navigator ? "string" == typeof e ? t.userAgent = e : e && e.userAgent && (t = {
            userAgent: e.userAgent,
            platform: e.platform,
            maxTouchPoints: e.maxTouchPoints || 0
        }) : t = {
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            maxTouchPoints: navigator.maxTouchPoints || 0
        };
        var i = t.userAgent
          , o = i.split("[FBAN");
        void 0 !== o[1] && (i = o[0]),
        void 0 !== (o = i.split("Twitter"))[1] && (i = o[0]);
        var n = function createMatch(t) {
            return function(e) {
                return e.test(t)
            }
        }(i)
          , r = {
            apple: {
                phone: n(D) && !n(z),
                ipod: n(x),
                tablet: !n(D) && (n(B) || C(t)) && !n(z),
                universal: n(F),
                device: (n(D) || n(x) || n(B) || n(F) || C(t)) && !n(z)
            },
            amazon: {
                phone: n(j),
                tablet: !n(j) && n(q),
                device: n(j) || n(q)
            },
            android: {
                phone: !n(z) && n(j) || !n(z) && n(k),
                tablet: !n(z) && !n(j) && !n(k) && (n(q) || n(G)),
                device: !n(z) && (n(j) || n(q) || n(k) || n(G)) || n(/\bokhttp\b/i)
            },
            windows: {
                phone: n(z),
                tablet: n(H),
                device: n(z) || n(H)
            },
            other: {
                blackberry: n(Y),
                blackberry10: n(X),
                opera: n(W),
                firefox: n(J),
                chrome: n(K),
                device: n(Y) || n(X) || n(W) || n(J) || n(K)
            },
            any: !1,
            phone: !1,
            tablet: !1
        };
        return r.any = r.apple.device || r.android.device || r.windows.device || r.other.device,
        r.phone = r.apple.phone || r.android.phone || r.windows.phone,
        r.tablet = r.apple.tablet || r.android.tablet || r.windows.tablet,
        r
    }(globalThis.navigator);
    var Z = {
        ADAPTER: O,
        MIPMAP_TEXTURES: ne.MIPMAP_MODES.POW2,
        ANISOTROPIC_LEVEL: 0,
        RESOLUTION: 1,
        FILTER_RESOLUTION: 1,
        FILTER_MULTISAMPLE: ne.MSAA_QUALITY.NONE,
        SPRITE_MAX_TEXTURES: function maxRecommendedTextures(e) {
            var t = !0;
            if ($.tablet || $.phone) {
                var i;
                if ($.apple.device)
                    if (i = navigator.userAgent.match(/OS (\d+)_(\d+)?/))
                        parseInt(i[1], 10) < 11 && (t = !1);
                if ($.android.device)
                    if (i = navigator.userAgent.match(/Android\s([0-9.]*)/))
                        parseInt(i[1], 10) < 7 && (t = !1)
            }
            return t ? e : 4
        }(32),
        SPRITE_BATCH_SIZE: 4096,
        RENDER_OPTIONS: {
            view: null,
            antialias: !1,
            autoDensity: !1,
            backgroundColor: 0,
            backgroundAlpha: 1,
            useContextAlpha: !0,
            clearBeforeRender: !0,
            preserveDrawingBuffer: !1,
            width: 800,
            height: 600,
            legacy: !1
        },
        GC_MODE: ne.GC_MODES.AUTO,
        GC_MAX_IDLE: 3600,
        GC_MAX_CHECK_COUNT: 600,
        WRAP_MODE: ne.WRAP_MODES.CLAMP,
        SCALE_MODE: ne.SCALE_MODES.LINEAR,
        PRECISION_VERTEX: ne.PRECISION.HIGH,
        PRECISION_FRAGMENT: $.apple.device ? ne.PRECISION.HIGH : ne.PRECISION.MEDIUM,
        CAN_UPLOAD_SAME_BUFFER: function canUploadSameBuffer() {
            return !$.apple.device
        }(),
        CREATE_IMAGE_BITMAP: !1,
        ROUND_PIXELS: !1
    }
      , ee = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
    function createCommonjsModule(e, t, i) {
        return e(i = {
            path: t,
            exports: {},
            require: function(e, t) {
                return function commonjsRequire() {
                    throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")
                }(null == t && i.path)
            }
        }, i.exports),
        i.exports
    }
    var te = createCommonjsModule(function(e) {
        var o = Object.prototype.hasOwnProperty
          , _ = "~";
        function Events() {}
        function EE(e, t, i) {
            this.fn = e,
            this.context = t,
            this.once = i || !1
        }
        function addListener(e, t, i, o, n) {
            if ("function" != typeof i)
                throw new TypeError("The listener must be a function");
            var r = new EE(i,o || e,n)
              , s = _ ? _ + t : t;
            return e._events[s] ? e._events[s].fn ? e._events[s] = [e._events[s], r] : e._events[s].push(r) : (e._events[s] = r,
            e._eventsCount++),
            e
        }
        function clearEvent(e, t) {
            0 == --e._eventsCount ? e._events = new Events : delete e._events[t]
        }
        function EventEmitter() {
            this._events = new Events,
            this._eventsCount = 0
        }
        Object.create && (Events.prototype = Object.create(null),
        (new Events).__proto__ || (_ = !1)),
        EventEmitter.prototype.eventNames = function eventNames() {
            var e, t, i = [];
            if (0 === this._eventsCount)
                return i;
            for (t in e = this._events)
                o.call(e, t) && i.push(_ ? t.slice(1) : t);
            return Object.getOwnPropertySymbols ? i.concat(Object.getOwnPropertySymbols(e)) : i
        }
        ,
        EventEmitter.prototype.listeners = function listeners(e) {
            var t = _ ? _ + e : e
              , i = this._events[t];
            if (!i)
                return [];
            if (i.fn)
                return [i.fn];
            for (var o = 0, n = i.length, r = new Array(n); o < n; o++)
                r[o] = i[o].fn;
            return r
        }
        ,
        EventEmitter.prototype.listenerCount = function listenerCount(e) {
            var t = _ ? _ + e : e
              , i = this._events[t];
            return i ? i.fn ? 1 : i.length : 0
        }
        ,
        EventEmitter.prototype.emit = function emit(e, t, i, o, n, r) {
            var s = arguments
              , a = _ ? _ + e : e;
            if (!this._events[a])
                return !1;
            var l, c, u = this._events[a], d = arguments.length;
            if (u.fn) {
                switch (u.once && this.removeListener(e, u.fn, void 0, !0),
                d) {
                case 1:
                    return u.fn.call(u.context),
                    !0;
                case 2:
                    return u.fn.call(u.context, t),
                    !0;
                case 3:
                    return u.fn.call(u.context, t, i),
                    !0;
                case 4:
                    return u.fn.call(u.context, t, i, o),
                    !0;
                case 5:
                    return u.fn.call(u.context, t, i, o, n),
                    !0;
                case 6:
                    return u.fn.call(u.context, t, i, o, n, r),
                    !0
                }
                for (c = 1,
                l = new Array(d - 1); c < d; c++)
                    l[c - 1] = s[c];
                u.fn.apply(u.context, l)
            } else {
                var h, p = u.length;
                for (c = 0; c < p; c++)
                    switch (u[c].once && this.removeListener(e, u[c].fn, void 0, !0),
                    d) {
                    case 1:
                        u[c].fn.call(u[c].context);
                        break;
                    case 2:
                        u[c].fn.call(u[c].context, t);
                        break;
                    case 3:
                        u[c].fn.call(u[c].context, t, i);
                        break;
                    case 4:
                        u[c].fn.call(u[c].context, t, i, o);
                        break;
                    default:
                        if (!l)
                            for (h = 1,
                            l = new Array(d - 1); h < d; h++)
                                l[h - 1] = s[h];
                        u[c].fn.apply(u[c].context, l)
                    }
            }
            return !0
        }
        ,
        EventEmitter.prototype.on = function on(e, t, i) {
            return addListener(this, e, t, i, !1)
        }
        ,
        EventEmitter.prototype.once = function once(e, t, i) {
            return addListener(this, e, t, i, !0)
        }
        ,
        EventEmitter.prototype.removeListener = function removeListener(e, t, i, o) {
            var n = _ ? _ + e : e;
            if (!this._events[n])
                return this;
            if (!t)
                return clearEvent(this, n),
                this;
            var r = this._events[n];
            if (r.fn)
                r.fn !== t || o && !r.once || i && r.context !== i || clearEvent(this, n);
            else {
                for (var s = 0, a = [], l = r.length; s < l; s++)
                    (r[s].fn !== t || o && !r[s].once || i && r[s].context !== i) && a.push(r[s]);
                a.length ? this._events[n] = 1 === a.length ? a[0] : a : clearEvent(this, n)
            }
            return this
        }
        ,
        EventEmitter.prototype.removeAllListeners = function removeAllListeners(e) {
            var t;
            return e ? (t = _ ? _ + e : e,
            this._events[t] && clearEvent(this, t)) : (this._events = new Events,
            this._eventsCount = 0),
            this
        }
        ,
        EventEmitter.prototype.off = EventEmitter.prototype.removeListener,
        EventEmitter.prototype.addListener = EventEmitter.prototype.on,
        EventEmitter.prefixed = _,
        EventEmitter.EventEmitter = EventEmitter,
        e.exports = EventEmitter
    })
      , ie = earcut
      , oe = earcut;
    function earcut(e, t, i) {
        i = i || 2;
        var o, n, r, s, a, l, c, u = t && t.length, d = u ? t[0] * i : e.length, h = linkedList(e, 0, d, i, !0), p = [];
        if (!h || h.next === h.prev)
            return p;
        if (u && (h = function eliminateHoles(e, t, i, o) {
            var n, r, s, a, l, c = [];
            for (n = 0,
            r = t.length; n < r; n++)
                s = t[n] * o,
                a = n < r - 1 ? t[n + 1] * o : e.length,
                (l = linkedList(e, s, a, o, !1)) === l.next && (l.steiner = !0),
                c.push(getLeftmost(l));
            for (c.sort(compareX),
            n = 0; n < c.length; n++)
                i = eliminateHole(c[n], i);
            return i
        }(e, t, h, i)),
        e.length > 80 * i) {
            o = r = e[0],
            n = s = e[1];
            for (var _ = i; _ < d; _ += i)
                (a = e[_]) < o && (o = a),
                (l = e[_ + 1]) < n && (n = l),
                r < a && (r = a),
                s < l && (s = l);
            c = 0 !== (c = Math.max(r - o, s - n)) ? 32767 / c : 0
        }
        return earcutLinked(h, p, i, o, n, c, 0),
        p
    }
    function linkedList(e, t, i, o, n) {
        var r, s;
        if (n === 0 < signedArea(e, t, i, o))
            for (r = t; r < i; r += o)
                s = insertNode(r, e[r], e[r + 1], s);
        else
            for (r = i - o; t <= r; r -= o)
                s = insertNode(r, e[r], e[r + 1], s);
        return s && equals(s, s.next) && (removeNode(s),
        s = s.next),
        s
    }
    function filterPoints(e, t) {
        if (!e)
            return e;
        t = t || e;
        var i, o = e;
        do {
            if (i = !1,
            o.steiner || !equals(o, o.next) && 0 !== area(o.prev, o, o.next))
                o = o.next;
            else {
                if (removeNode(o),
                (o = t = o.prev) === o.next)
                    break;
                i = !0
            }
        } while (i || o !== t);
        return t
    }
    function earcutLinked(e, t, i, o, n, r, s) {
        if (e) {
            !s && r && !function indexCurve(e, t, i, o) {
                var n = e;
                for (; 0 === n.z && (n.z = zOrder(n.x, n.y, t, i, o)),
                n.prevZ = n.prev,
                n.nextZ = n.next,
                n = n.next,
                n !== e; )
                    ;
                n.prevZ.nextZ = null,
                n.prevZ = null,
                function sortLinked(e) {
                    var t, i, o, n, r, s, a, l, c = 1;
                    do {
                        for (i = e,
                        r = e = null,
                        s = 0; i; ) {
                            for (s++,
                            o = i,
                            t = a = 0; t < c && (a++,
                            o = o.nextZ); t++)
                                ;
                            for (l = c; 0 < a || 0 < l && o; )
                                0 !== a && (0 === l || !o || i.z <= o.z) ? (i = (n = i).nextZ,
                                a--) : (o = (n = o).nextZ,
                                l--),
                                r ? r.nextZ = n : e = n,
                                n.prevZ = r,
                                r = n;
                            i = o
                        }
                        r.nextZ = null,
                        c *= 2
                    } while (1 < s);
                    return e
                }(n)
            }(e, o, n, r);
            for (var a, l, c = e; e.prev !== e.next; )
                if (a = e.prev,
                l = e.next,
                r ? isEarHashed(e, o, n, r) : isEar(e))
                    t.push(a.i / i | 0),
                    t.push(e.i / i | 0),
                    t.push(l.i / i | 0),
                    removeNode(e),
                    e = l.next,
                    c = l.next;
                else if ((e = l) === c) {
                    s ? 1 === s ? earcutLinked(e = cureLocalIntersections(filterPoints(e), t, i), t, i, o, n, r, 2) : 2 === s && splitEarcut(e, t, i, o, n, r) : earcutLinked(filterPoints(e), t, i, o, n, r, 1);
                    break
                }
        }
    }
    function isEar(e) {
        var t = e.prev
          , i = e
          , o = e.next;
        if (0 <= area(t, i, o))
            return !1;
        for (var n = t.x, r = i.x, s = o.x, a = t.y, l = i.y, c = o.y, u = n < r ? n < s ? n : s : r < s ? r : s, d = a < l ? a < c ? a : c : l < c ? l : c, h = r < n ? s < n ? n : s : s < r ? r : s, p = l < a ? c < a ? a : c : c < l ? l : c, _ = o.next; _ !== t; ) {
            if (_.x >= u && _.x <= h && _.y >= d && _.y <= p && pointInTriangle(n, a, r, l, s, c, _.x, _.y) && 0 <= area(_.prev, _, _.next))
                return !1;
            _ = _.next
        }
        return !0
    }
    function isEarHashed(e, t, i, o) {
        var n = e.prev
          , r = e
          , s = e.next;
        if (0 <= area(n, r, s))
            return !1;
        for (var a = n.x, l = r.x, c = s.x, u = n.y, d = r.y, h = s.y, p = a < l ? a < c ? a : c : l < c ? l : c, _ = u < d ? u < h ? u : h : d < h ? d : h, f = l < a ? c < a ? a : c : c < l ? l : c, m = d < u ? h < u ? u : h : h < d ? d : h, T = zOrder(p, _, t, i, o), v = zOrder(f, m, t, i, o), y = e.prevZ, g = e.nextZ; y && y.z >= T && g && g.z <= v; ) {
            if (y.x >= p && y.x <= f && y.y >= _ && y.y <= m && y !== n && y !== s && pointInTriangle(a, u, l, d, c, h, y.x, y.y) && 0 <= area(y.prev, y, y.next))
                return !1;
            if (y = y.prevZ,
            g.x >= p && g.x <= f && g.y >= _ && g.y <= m && g !== n && g !== s && pointInTriangle(a, u, l, d, c, h, g.x, g.y) && 0 <= area(g.prev, g, g.next))
                return !1;
            g = g.nextZ
        }
        for (; y && y.z >= T; ) {
            if (y.x >= p && y.x <= f && y.y >= _ && y.y <= m && y !== n && y !== s && pointInTriangle(a, u, l, d, c, h, y.x, y.y) && 0 <= area(y.prev, y, y.next))
                return !1;
            y = y.prevZ
        }
        for (; g && g.z <= v; ) {
            if (g.x >= p && g.x <= f && g.y >= _ && g.y <= m && g !== n && g !== s && pointInTriangle(a, u, l, d, c, h, g.x, g.y) && 0 <= area(g.prev, g, g.next))
                return !1;
            g = g.nextZ
        }
        return !0
    }
    function cureLocalIntersections(e, t, i) {
        var o = e;
        do {
            var n = o.prev
              , r = o.next.next;
            !equals(n, r) && intersects(n, o, o.next, r) && locallyInside(n, r) && locallyInside(r, n) && (t.push(n.i / i | 0),
            t.push(o.i / i | 0),
            t.push(r.i / i | 0),
            removeNode(o),
            removeNode(o.next),
            o = e = r),
            o = o.next
        } while (o !== e);
        return filterPoints(o)
    }
    function splitEarcut(e, t, i, o, n, r) {
        var s, a, l = e;
        do {
            for (var c = l.next.next; c !== l.prev; ) {
                if (l.i !== c.i && (a = c,
                (s = l).next.i !== a.i && s.prev.i !== a.i && !function intersectsPolygon(e, t) {
                    var i = e;
                    do {
                        if (i.i !== e.i && i.next.i !== e.i && i.i !== t.i && i.next.i !== t.i && intersects(i, i.next, e, t))
                            return !0;
                        i = i.next
                    } while (i !== e);
                    return !1
                }(s, a) && (locallyInside(s, a) && locallyInside(a, s) && function middleInside(e, t) {
                    var i = e
                      , o = !1
                      , n = (e.x + t.x) / 2
                      , r = (e.y + t.y) / 2;
                    for (; i.y > r != i.next.y > r && i.next.y !== i.y && n < (i.next.x - i.x) * (r - i.y) / (i.next.y - i.y) + i.x && (o = !o),
                    i = i.next,
                    i !== e; )
                        ;
                    return o
                }(s, a) && (area(s.prev, s, a.prev) || area(s, a.prev, a)) || equals(s, a) && 0 < area(s.prev, s, s.next) && 0 < area(a.prev, a, a.next)))) {
                    var u = splitPolygon(l, c);
                    return l = filterPoints(l, l.next),
                    u = filterPoints(u, u.next),
                    earcutLinked(l, t, i, o, n, r, 0),
                    void earcutLinked(u, t, i, o, n, r, 0)
                }
                c = c.next
            }
            l = l.next
        } while (l !== e)
    }
    function compareX(e, t) {
        return e.x - t.x
    }
    function eliminateHole(e, t) {
        var i = function findHoleBridge(e, t) {
            var i, o = t, n = e.x, r = e.y, s = -1 / 0;
            do {
                if (r <= o.y && r >= o.next.y && o.next.y !== o.y) {
                    var a = o.x + (r - o.y) * (o.next.x - o.x) / (o.next.y - o.y);
                    if (a <= n && s < a && (s = a,
                    i = o.x < o.next.x ? o : o.next,
                    a === n))
                        return i
                }
                o = o.next
            } while (o !== t);
            if (!i)
                return null;
            var l, c = i, u = i.x, d = i.y, h = 1 / 0;
            o = i;
            for (; n >= o.x && o.x >= u && n !== o.x && pointInTriangle(r < d ? n : s, r, u, d, r < d ? s : n, r, o.x, o.y) && (l = Math.abs(r - o.y) / (n - o.x),
            locallyInside(o, e) && (l < h || l === h && (o.x > i.x || o.x === i.x && (_ = o,
            area((p = i).prev, p, _.prev) < 0 && area(_.next, p, p.next) < 0))) && (i = o,
            h = l)),
            o = o.next,
            o !== c; )
                ;
            var p, _;
            return i
        }(e, t);
        if (!i)
            return t;
        var o = splitPolygon(i, e);
        return filterPoints(o, o.next),
        filterPoints(i, i.next)
    }
    function zOrder(e, t, i, o, n) {
        return (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = (e - i) * n | 0) | e << 8)) | e << 4)) | e << 2)) | e << 1)) | (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = (t - o) * n | 0) | t << 8)) | t << 4)) | t << 2)) | t << 1)) << 1
    }
    function getLeftmost(e) {
        for (var t = e, i = e; (t.x < i.x || t.x === i.x && t.y < i.y) && (i = t),
        (t = t.next) !== e; )
            ;
        return i
    }
    function pointInTriangle(e, t, i, o, n, r, s, a) {
        return (e - s) * (r - a) <= (n - s) * (t - a) && (i - s) * (t - a) <= (e - s) * (o - a) && (n - s) * (o - a) <= (i - s) * (r - a)
    }
    function area(e, t, i) {
        return (t.y - e.y) * (i.x - t.x) - (t.x - e.x) * (i.y - t.y)
    }
    function equals(e, t) {
        return e.x === t.x && e.y === t.y
    }
    function intersects(e, t, i, o) {
        var n = sign$1(area(e, t, i))
          , r = sign$1(area(e, t, o))
          , s = sign$1(area(i, o, e))
          , a = sign$1(area(i, o, t));
        return n !== r && s !== a || (!(0 !== n || !onSegment(e, i, t)) || (!(0 !== r || !onSegment(e, o, t)) || (!(0 !== s || !onSegment(i, e, o)) || !(0 !== a || !onSegment(i, t, o)))))
    }
    function onSegment(e, t, i) {
        return t.x <= Math.max(e.x, i.x) && t.x >= Math.min(e.x, i.x) && t.y <= Math.max(e.y, i.y) && t.y >= Math.min(e.y, i.y)
    }
    function sign$1(e) {
        return 0 < e ? 1 : e < 0 ? -1 : 0
    }
    function locallyInside(e, t) {
        return area(e.prev, e, e.next) < 0 ? 0 <= area(e, t, e.next) && 0 <= area(e, e.prev, t) : area(e, t, e.prev) < 0 || area(e, e.next, t) < 0
    }
    function splitPolygon(e, t) {
        var i = new Node(e.i,e.x,e.y)
          , o = new Node(t.i,t.x,t.y)
          , n = e.next
          , r = t.prev;
        return (e.next = t).prev = e,
        (i.next = n).prev = i,
        (o.next = i).prev = o,
        (r.next = o).prev = r,
        o
    }
    function insertNode(e, t, i, o) {
        var n = new Node(e,t,i);
        return o ? (n.next = o.next,
        (n.prev = o).next.prev = n,
        o.next = n) : (n.prev = n).next = n,
        n
    }
    function removeNode(e) {
        e.next.prev = e.prev,
        e.prev.next = e.next,
        e.prevZ && (e.prevZ.nextZ = e.nextZ),
        e.nextZ && (e.nextZ.prevZ = e.prevZ)
    }
    function Node(e, t, i) {
        this.i = e,
        this.x = t,
        this.y = i,
        this.prev = null,
        this.next = null,
        this.z = 0,
        this.prevZ = null,
        this.nextZ = null,
        this.steiner = !1
    }
    function signedArea(e, t, i, o) {
        for (var n = 0, r = t, s = i - o; r < i; r += o)
            n += (e[s] - e[r]) * (e[r + 1] + e[s + 1]),
            s = r;
        return n
    }
    earcut.deviation = function(e, t, i, o) {
        var n = t && t.length
          , r = n ? t[0] * i : e.length
          , s = Math.abs(signedArea(e, 0, r, i));
        if (n)
            for (var a = 0, l = t.length; a < l; a++) {
                var c = t[a] * i
                  , u = a < l - 1 ? t[a + 1] * i : e.length;
                s -= Math.abs(signedArea(e, c, u, i))
            }
        var d = 0;
        for (a = 0; a < o.length; a += 3) {
            var h = o[a] * i
              , p = o[a + 1] * i
              , _ = o[a + 2] * i;
            d += Math.abs((e[h] - e[_]) * (e[1 + p] - e[1 + h]) - (e[h] - e[p]) * (e[1 + _] - e[1 + h]))
        }
        return 0 === s && 0 === d ? 0 : Math.abs((d - s) / s)
    }
    ,
    earcut.flatten = function(e) {
        for (var t = e[0][0].length, i = {
            vertices: [],
            holes: [],
            dimensions: t
        }, o = 0, n = 0; n < e.length; n++) {
            for (var r = 0; r < e[n].length; r++)
                for (var s = 0; s < t; s++)
                    i.vertices.push(e[n][r][s]);
            0 < n && (o += e[n - 1].length,
            i.holes.push(o))
        }
        return i
    }
    ,
    ie.default = oe;
    var re = createCommonjsModule(function(p, _) {
        !function(e) {
            var t = _ && !_.nodeType && _
              , i = p && !p.nodeType && p
              , o = "object" == typeof ee && ee;
            o.global !== o && o.window !== o && o.self !== o || (e = o);
            var n, r, T = 2147483647, v = 36, y = 1, g = 26, s = 38, a = 700, w = 72, C = 128, S = "-", l = /^xn--/, c = /[^\x20-\x7E]/, u = /[\x2E\u3002\uFF0E\uFF61]/g, d = {
                overflow: "Overflow: input needs wider integers to process",
                "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                "invalid-input": "Invalid input"
            }, h = v - y, E = Math.floor, b = String.fromCharCode;
            function error(e) {
                throw RangeError(d[e])
            }
            function map(e, t) {
                for (var i = e.length, o = []; i--; )
                    o[i] = t(e[i]);
                return o
            }
            function mapDomain(e, t) {
                var i = e.split("@")
                  , o = "";
                return 1 < i.length && (o = i[0] + "@",
                e = i[1]),
                o + map((e = e.replace(u, ".")).split("."), t).join(".")
            }
            function ucs2decode(e) {
                for (var t, i, o = [], n = 0, r = e.length; n < r; )
                    55296 <= (t = e.charCodeAt(n++)) && t <= 56319 && n < r ? 56320 == (64512 & (i = e.charCodeAt(n++))) ? o.push(((1023 & t) << 10) + (1023 & i) + 65536) : (o.push(t),
                    n--) : o.push(t);
                return o
            }
            function ucs2encode(e) {
                return map(e, function(e) {
                    var t = "";
                    return 65535 < e && (t += b((e -= 65536) >>> 10 & 1023 | 55296),
                    e = 56320 | 1023 & e),
                    t += b(e)
                }).join("")
            }
            function digitToBasic(e, t) {
                return e + 22 + 75 * (e < 26) - ((0 != t) << 5)
            }
            function adapt(e, t, i) {
                var o = 0;
                for (e = i ? E(e / a) : e >> 1,
                e += E(e / t); h * g >> 1 < e; o += v)
                    e = E(e / h);
                return E(o + (h + 1) * e / (e + s))
            }
            function decode(e) {
                var t, i, o, n, r, s, a, l, c, u, d, h = [], p = e.length, _ = 0, f = C, m = w;
                for ((i = e.lastIndexOf(S)) < 0 && (i = 0),
                o = 0; o < i; ++o)
                    128 <= e.charCodeAt(o) && error("not-basic"),
                    h.push(e.charCodeAt(o));
                for (n = 0 < i ? i + 1 : 0; n < p; ) {
                    for (r = _,
                    s = 1,
                    a = v; p <= n && error("invalid-input"),
                    d = e.charCodeAt(n++),
                    (v <= (l = d - 48 < 10 ? d - 22 : d - 65 < 26 ? d - 65 : d - 97 < 26 ? d - 97 : v) || l > E((T - _) / s)) && error("overflow"),
                    _ += l * s,
                    !(l < (c = a <= m ? y : m + g <= a ? g : a - m)); a += v)
                        s > E(T / (u = v - c)) && error("overflow"),
                        s *= u;
                    m = adapt(_ - r, t = h.length + 1, 0 == r),
                    E(_ / t) > T - f && error("overflow"),
                    f += E(_ / t),
                    _ %= t,
                    h.splice(_++, 0, f)
                }
                return ucs2encode(h)
            }
            function encode(e) {
                var t, i, o, n, r, s, a, l, c, u, d, h, p, _, f, m = [];
                for (h = (e = ucs2decode(e)).length,
                t = C,
                r = w,
                s = i = 0; s < h; ++s)
                    (d = e[s]) < 128 && m.push(b(d));
                for (o = n = m.length,
                n && m.push(S); o < h; ) {
                    for (a = T,
                    s = 0; s < h; ++s)
                        t <= (d = e[s]) && d < a && (a = d);
                    for (a - t > E((T - i) / (p = o + 1)) && error("overflow"),
                    i += (a - t) * p,
                    t = a,
                    s = 0; s < h; ++s)
                        if ((d = e[s]) < t && ++i > T && error("overflow"),
                        d == t) {
                            for (l = i,
                            c = v; !(l < (u = c <= r ? y : r + g <= c ? g : c - r)); c += v)
                                f = l - u,
                                _ = v - u,
                                m.push(b(digitToBasic(u + f % _, 0))),
                                l = E(f / _);
                            m.push(b(digitToBasic(l, 0))),
                            r = adapt(i, p, o == n),
                            i = 0,
                            ++o
                        }
                    ++i,
                    ++t
                }
                return m.join("")
            }
            if (n = {
                version: "1.3.2",
                ucs2: {
                    decode: ucs2decode,
                    encode: ucs2encode
                },
                decode: decode,
                encode: encode,
                toASCII: function toASCII(e) {
                    return mapDomain(e, function(e) {
                        return c.test(e) ? "xn--" + encode(e) : e
                    })
                },
                toUnicode: function toUnicode(e) {
                    return mapDomain(e, function(e) {
                        return l.test(e) ? decode(e.slice(4).toLowerCase()) : e
                    })
                }
            },
            0,
            t && i)
                if (p.exports == t)
                    i.exports = n;
                else
                    for (r in n)
                        n.hasOwnProperty(r) && (t[r] = n[r]);
            else
                e.punycode = n
        }(ee)
    })
      , se = {
        isString: function(e) {
            return "string" == typeof e
        },
        isObject: function(e) {
            return "object" == typeof e && null !== e
        },
        isNull: function(e) {
            return null === e
        },
        isNullOrUndefined: function(e) {
            return null == e
        }
    };
    function L(e, t, i, o) {
        t = t || "&",
        i = i || "=";
        var n = {};
        if ("string" != typeof e || 0 === e.length)
            return n;
        var r = /\+/g;
        e = e.split(t);
        var s = 1e3;
        o && "number" == typeof o.maxKeys && (s = o.maxKeys);
        var a, l, c = e.length;
        0 < s && s < c && (c = s);
        for (var u = 0; u < c; ++u) {
            var d, h, p, _, f = e[u].replace(r, "%20"), m = f.indexOf(i);
            h = 0 <= m ? (d = f.substr(0, m),
            f.substr(m + 1)) : (d = f,
            ""),
            p = decodeURIComponent(d),
            _ = decodeURIComponent(h),
            a = n,
            l = p,
            Object.prototype.hasOwnProperty.call(a, l) ? Array.isArray(n[p]) ? n[p].push(_) : n[p] = [n[p], _] : n[p] = _
        }
        return n
    }
    function M(e) {
        switch (typeof e) {
        case "string":
            return e;
        case "boolean":
            return e ? "true" : "false";
        case "number":
            return isFinite(e) ? e : "";
        default:
            return ""
        }
    }
    function N(i, o, n, e) {
        return o = o || "&",
        n = n || "=",
        null === i && (i = void 0),
        "object" == typeof i ? Object.keys(i).map(function(e) {
            var t = encodeURIComponent(M(e)) + n;
            return Array.isArray(i[e]) ? i[e].map(function(e) {
                return t + encodeURIComponent(M(e))
            }).join(o) : t + encodeURIComponent(M(i[e]))
        }).join(o) : e ? encodeURIComponent(M(e)) + n + encodeURIComponent(M(i)) : ""
    }
    function Q(e, t) {
        return urlParse(e, !1, !0).resolve(t)
    }
    function S(e) {
        return se.isString(e) && (e = urlParse(e)),
        e instanceof Url ? e.format() : Url.prototype.format.call(e)
    }
    var ae = createCommonjsModule(function(e, t) {
        t.decode = t.parse = L,
        t.encode = t.stringify = N
    })
      , le = urlParse;
    function Url() {
        this.protocol = null,
        this.slashes = null,
        this.auth = null,
        this.host = null,
        this.port = null,
        this.hostname = null,
        this.hash = null,
        this.search = null,
        this.query = null,
        this.pathname = null,
        this.path = null,
        this.href = null
    }
    var ce = /^([a-z0-9.+-]+:)/i
      , ue = /:[0-9]*$/
      , de = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/
      , he = ["{", "}", "|", "\\", "^", "`"].concat(["<", ">", '"', "`", " ", "\r", "\n", "\t"])
      , pe = ["'"].concat(he)
      , _e = ["%", "/", "?", ";", "#"].concat(pe)
      , fe = ["/", "?", "#"]
      , me = /^[+a-z0-9A-Z_-]{0,63}$/
      , Te = /^([+a-z0-9A-Z_-]{0,63})(.*)$/
      , ve = {
        javascript: !0,
        "javascript:": !0
    }
      , ye = {
        javascript: !0,
        "javascript:": !0
    }
      , ge = {
        http: !0,
        https: !0,
        ftp: !0,
        gopher: !0,
        file: !0,
        "http:": !0,
        "https:": !0,
        "ftp:": !0,
        "gopher:": !0,
        "file:": !0
    };
    function urlParse(e, t, i) {
        if (e && se.isObject(e) && e instanceof Url)
            return e;
        var o = new Url;
        return o.parse(e, t, i),
        o
    }
    Url.prototype.parse = function(e, t, i) {
        if (!se.isString(e))
            throw new TypeError("Parameter 'url' must be a string, not " + typeof e);
        var o = e.indexOf("?")
          , n = -1 !== o && o < e.indexOf("#") ? "?" : "#"
          , r = e.split(n);
        r[0] = r[0].replace(/\\/g, "/");
        var s = e = r.join(n);
        if (s = s.trim(),
        !i && 1 === e.split("#").length) {
            var a = de.exec(s);
            if (a)
                return this.path = s,
                this.href = s,
                this.pathname = a[1],
                a[2] ? (this.search = a[2],
                this.query = t ? ae.parse(this.search.substr(1)) : this.search.substr(1)) : t && (this.search = "",
                this.query = {}),
                this
        }
        var l = ce.exec(s);
        if (l) {
            var c = (l = l[0]).toLowerCase();
            this.protocol = c,
            s = s.substr(l.length)
        }
        if (i || l || s.match(/^\/\/[^@\/]+@[^@\/]+/)) {
            var u = "//" === s.substr(0, 2);
            !u || l && ye[l] || (s = s.substr(2),
            this.slashes = !0)
        }
        if (!ye[l] && (u || l && !ge[l])) {
            for (var d, h, p = -1, _ = 0; _ < fe.length; _++) {
                -1 !== (f = s.indexOf(fe[_])) && (-1 === p || f < p) && (p = f)
            }
            -1 !== (h = -1 === p ? s.lastIndexOf("@") : s.lastIndexOf("@", p)) && (d = s.slice(0, h),
            s = s.slice(h + 1),
            this.auth = decodeURIComponent(d)),
            p = -1;
            for (_ = 0; _ < _e.length; _++) {
                var f;
                -1 !== (f = s.indexOf(_e[_])) && (-1 === p || f < p) && (p = f)
            }
            -1 === p && (p = s.length),
            this.host = s.slice(0, p),
            s = s.slice(p),
            this.parseHost(),
            this.hostname = this.hostname || "";
            var m = "[" === this.hostname[0] && "]" === this.hostname[this.hostname.length - 1];
            if (!m)
                for (var T = this.hostname.split(/\./), v = (_ = 0,
                T.length); _ < v; _++) {
                    var y = T[_];
                    if (y && !y.match(me)) {
                        for (var g = "", w = 0, C = y.length; w < C; w++)
                            127 < y.charCodeAt(w) ? g += "x" : g += y[w];
                        if (!g.match(me)) {
                            var S = T.slice(0, _)
                              , E = T.slice(_ + 1)
                              , b = y.match(Te);
                            b && (S.push(b[1]),
                            E.unshift(b[2])),
                            E.length && (s = "/" + E.join(".") + s),
                            this.hostname = S.join(".");
                            break
                        }
                    }
                }
            255 < this.hostname.length ? this.hostname = "" : this.hostname = this.hostname.toLowerCase(),
            m || (this.hostname = re.toASCII(this.hostname));
            var V = this.port ? ":" + this.port : ""
              , U = this.hostname || "";
            this.host = U + V,
            this.href += this.host,
            m && (this.hostname = this.hostname.substr(1, this.hostname.length - 2),
            "/" !== s[0] && (s = "/" + s))
        }
        if (!ve[c])
            for (_ = 0,
            v = pe.length; _ < v; _++) {
                var I = pe[_];
                if (-1 !== s.indexOf(I)) {
                    var A = encodeURIComponent(I);
                    A === I && (A = escape(I)),
                    s = s.split(I).join(A)
                }
            }
        var R = s.indexOf("#");
        -1 !== R && (this.hash = s.substr(R),
        s = s.slice(0, R));
        var P = s.indexOf("?");
        if (-1 !== P ? (this.search = s.substr(P),
        this.query = s.substr(P + 1),
        t && (this.query = ae.parse(this.query)),
        s = s.slice(0, P)) : t && (this.search = "",
        this.query = {}),
        s && (this.pathname = s),
        ge[c] && this.hostname && !this.pathname && (this.pathname = "/"),
        this.pathname || this.search) {
            V = this.pathname || "";
            var O = this.search || "";
            this.path = V + O
        }
        return this.href = this.format(),
        this
    }
    ,
    Url.prototype.format = function() {
        var e = this.auth || "";
        e && (e = (e = encodeURIComponent(e)).replace(/%3A/i, ":"),
        e += "@");
        var t = this.protocol || ""
          , i = this.pathname || ""
          , o = this.hash || ""
          , n = !1
          , r = "";
        this.host ? n = e + this.host : this.hostname && (n = e + (-1 === this.hostname.indexOf(":") ? this.hostname : "[" + this.hostname + "]"),
        this.port && (n += ":" + this.port)),
        this.query && se.isObject(this.query) && Object.keys(this.query).length && (r = ae.stringify(this.query));
        var s = this.search || r && "?" + r || "";
        return t && ":" !== t.substr(-1) && (t += ":"),
        this.slashes || (!t || ge[t]) && !1 !== n ? (n = "//" + (n || ""),
        i && "/" !== i.charAt(0) && (i = "/" + i)) : n = n || "",
        o && "#" !== o.charAt(0) && (o = "#" + o),
        s && "?" !== s.charAt(0) && (s = "?" + s),
        t + n + (i = i.replace(/[?#]/g, function(e) {
            return encodeURIComponent(e)
        })) + (s = s.replace("#", "%23")) + o
    }
    ,
    Url.prototype.resolve = function(e) {
        return this.resolveObject(urlParse(e, !1, !0)).format()
    }
    ,
    Url.prototype.resolveObject = function(e) {
        if (se.isString(e)) {
            var t = new Url;
            t.parse(e, !1, !0),
            e = t
        }
        for (var i = new Url, o = Object.keys(this), n = 0; n < o.length; n++) {
            var r = o[n];
            i[r] = this[r]
        }
        if (i.hash = e.hash,
        "" === e.href)
            return i.href = i.format(),
            i;
        if (e.slashes && !e.protocol) {
            for (var s = Object.keys(e), a = 0; a < s.length; a++) {
                var l = s[a];
                "protocol" !== l && (i[l] = e[l])
            }
            return ge[i.protocol] && i.hostname && !i.pathname && (i.path = i.pathname = "/"),
            i.href = i.format(),
            i
        }
        if (e.protocol && e.protocol !== i.protocol) {
            if (!ge[e.protocol]) {
                for (var c = Object.keys(e), u = 0; u < c.length; u++) {
                    var d = c[u];
                    i[d] = e[d]
                }
                return i.href = i.format(),
                i
            }
            if (i.protocol = e.protocol,
            e.host || ye[e.protocol])
                i.pathname = e.pathname;
            else {
                for (var h = (e.pathname || "").split("/"); h.length && !(e.host = h.shift()); )
                    ;
                e.host || (e.host = ""),
                e.hostname || (e.hostname = ""),
                "" !== h[0] && h.unshift(""),
                h.length < 2 && h.unshift(""),
                i.pathname = h.join("/")
            }
            if (i.search = e.search,
            i.query = e.query,
            i.host = e.host || "",
            i.auth = e.auth,
            i.hostname = e.hostname || e.host,
            i.port = e.port,
            i.pathname || i.search) {
                var p = i.pathname || ""
                  , _ = i.search || "";
                i.path = p + _
            }
            return i.slashes = i.slashes || e.slashes,
            i.href = i.format(),
            i
        }
        var f = i.pathname && "/" === i.pathname.charAt(0)
          , m = e.host || e.pathname && "/" === e.pathname.charAt(0)
          , T = m || f || i.host && e.pathname
          , v = T
          , y = i.pathname && i.pathname.split("/") || []
          , g = (h = e.pathname && e.pathname.split("/") || [],
        i.protocol && !ge[i.protocol]);
        if (g && (i.hostname = "",
        i.port = null,
        i.host && ("" === y[0] ? y[0] = i.host : y.unshift(i.host)),
        i.host = "",
        e.protocol && (e.hostname = null,
        e.port = null,
        e.host && ("" === h[0] ? h[0] = e.host : h.unshift(e.host)),
        e.host = null),
        T = T && ("" === h[0] || "" === y[0])),
        m)
            i.host = e.host || "" === e.host ? e.host : i.host,
            i.hostname = e.hostname || "" === e.hostname ? e.hostname : i.hostname,
            i.search = e.search,
            i.query = e.query,
            y = h;
        else if (h.length)
            (y = y || []).pop(),
            y = y.concat(h),
            i.search = e.search,
            i.query = e.query;
        else if (!se.isNullOrUndefined(e.search)) {
            if (g)
                i.hostname = i.host = y.shift(),
                (b = !!(i.host && 0 < i.host.indexOf("@")) && i.host.split("@")) && (i.auth = b.shift(),
                i.host = i.hostname = b.shift());
            return i.search = e.search,
            i.query = e.query,
            se.isNull(i.pathname) && se.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")),
            i.href = i.format(),
            i
        }
        if (!y.length)
            return i.pathname = null,
            i.search ? i.path = "/" + i.search : i.path = null,
            i.href = i.format(),
            i;
        for (var w = y.slice(-1)[0], C = (i.host || e.host || 1 < y.length) && ("." === w || ".." === w) || "" === w, S = 0, E = y.length; 0 <= E; E--)
            "." === (w = y[E]) ? y.splice(E, 1) : ".." === w ? (y.splice(E, 1),
            S++) : S && (y.splice(E, 1),
            S--);
        if (!T && !v)
            for (; S--; )
                y.unshift("..");
        !T || "" === y[0] || y[0] && "/" === y[0].charAt(0) || y.unshift(""),
        C && "/" !== y.join("/").substr(-1) && y.push("");
        var b, V = "" === y[0] || y[0] && "/" === y[0].charAt(0);
        g && (i.hostname = i.host = V ? "" : y.length ? y.shift() : "",
        (b = !!(i.host && 0 < i.host.indexOf("@")) && i.host.split("@")) && (i.auth = b.shift(),
        i.host = i.hostname = b.shift()));
        return (T = T || i.host && y.length) && !V && y.unshift(""),
        y.length ? i.pathname = y.join("/") : (i.pathname = null,
        i.path = null),
        se.isNull(i.pathname) && se.isNull(i.search) || (i.path = (i.pathname ? i.pathname : "") + (i.search ? i.search : "")),
        i.auth = e.auth || i.auth,
        i.slashes = i.slashes || e.slashes,
        i.href = i.format(),
        i
    }
    ,
    Url.prototype.parseHost = function() {
        var e = this.host
          , t = ue.exec(e);
        t && (":" !== (t = t[0]) && (this.port = t.substr(1)),
        e = e.substr(0, e.length - t.length)),
        e && (this.hostname = e)
    }
    ;
    var we = {
        parse: le,
        format: S,
        resolve: Q
    };
    function assertPath(e) {
        if ("string" != typeof e)
            throw new TypeError("Path must be a string. Received " + JSON.stringify(e))
    }
    function removeUrlParams(e) {
        return e.split("?")[0].split("#")[0]
    }
    function replaceAll(e, t, i) {
        return e.replace(new RegExp(function escapeRegExp(e) {
            return e.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")
        }(t),"g"), i)
    }
    var Ce = {
        toPosix: function(e) {
            return replaceAll(e, "\\", "/")
        },
        isUrl: function(e) {
            return /^https?:/.test(this.toPosix(e))
        },
        isDataUrl: function(e) {
            return /^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)
        },
        hasProtocol: function(e) {
            return /^[^/:]+:\//.test(this.toPosix(e))
        },
        getProtocol: function(e) {
            assertPath(e),
            e = this.toPosix(e);
            var t = ""
              , i = /^file:\/\/\//.exec(e)
              , o = /^[^/:]+:\/\//.exec(e)
              , n = /^[^/:]+:\//.exec(e);
            if (i || o || n) {
                var r = (null == i ? void 0 : i[0]) || (null == o ? void 0 : o[0]) || (null == n ? void 0 : n[0]);
                t = r,
                e = e.slice(r.length)
            }
            return t
        },
        toAbsolute: function(e, t, i) {
            if (this.isDataUrl(e))
                return e;
            var o = removeUrlParams(this.toPosix(null != t ? t : Z.ADAPTER.getBaseUrl()))
              , n = removeUrlParams(this.toPosix(null != i ? i : this.rootname(o)));
            return assertPath(e),
            (e = this.toPosix(e)).startsWith("/") ? Ce.join(n, e.slice(1)) : this.isAbsolute(e) ? e : this.join(o, e)
        },
        normalize: function(e) {
            if (assertPath(e = this.toPosix(e)),
            0 === e.length)
                return ".";
            var t = ""
              , i = e.startsWith("/");
            this.hasProtocol(e) && (t = this.rootname(e),
            e = e.slice(t.length));
            var o = e.endsWith("/");
            return 0 < (e = function normalizeStringPosix(e, t) {
                for (var i, o = "", n = 0, r = -1, s = 0, a = 0; a <= e.length; ++a) {
                    if (a < e.length)
                        i = e.charCodeAt(a);
                    else {
                        if (47 === i)
                            break;
                        i = 47
                    }
                    if (47 === i) {
                        if (r === a - 1 || 1 === s)
                            ;
                        else if (r !== a - 1 && 2 === s) {
                            if (o.length < 2 || 2 !== n || 46 !== o.charCodeAt(o.length - 1) || 46 !== o.charCodeAt(o.length - 2))
                                if (2 < o.length) {
                                    var l = o.lastIndexOf("/");
                                    if (l !== o.length - 1) {
                                        n = -1 === l ? (o = "",
                                        0) : (o = o.slice(0, l)).length - 1 - o.lastIndexOf("/"),
                                        r = a,
                                        s = 0;
                                        continue
                                    }
                                } else if (2 === o.length || 1 === o.length) {
                                    o = "",
                                    r = a,
                                    s = n = 0;
                                    continue
                                }
                            t && (0 < o.length ? o += "/.." : o = "..",
                            n = 2)
                        } else
                            0 < o.length ? o += "/" + e.slice(r + 1, a) : o = e.slice(r + 1, a),
                            n = a - r - 1;
                        r = a,
                        s = 0
                    } else
                        46 === i && -1 !== s ? ++s : s = -1
                }
                return o
            }(e, !1)).length && o && (e += "/"),
            i ? "/" + e : t + e
        },
        isAbsolute: function(e) {
            return assertPath(e),
            e = this.toPosix(e),
            !!this.hasProtocol(e) || e.startsWith("/")
        },
        join: function() {
            for (var e, t, i = arguments, o = [], n = 0; n < arguments.length; n++)
                o[n] = i[n];
            if (0 === o.length)
                return ".";
            for (var r = 0; r < o.length; ++r) {
                var s = o[r];
                if (assertPath(s),
                0 < s.length)
                    if (void 0 === t)
                        t = s;
                    else {
                        var a = null !== (e = o[r - 1]) && void 0 !== e ? e : "";
                        this.extname(a) ? t += "/../" + s : t += "/" + s
                    }
            }
            return void 0 === t ? "." : this.normalize(t)
        },
        dirname: function(e) {
            if (assertPath(e),
            0 === e.length)
                return ".";
            for (var t = (e = this.toPosix(e)).charCodeAt(0), i = 47 === t, o = -1, n = !0, r = this.getProtocol(e), s = e, a = (e = e.slice(r.length)).length - 1; 1 <= a; --a)
                if (47 === (t = e.charCodeAt(a))) {
                    if (!n) {
                        o = a;
                        break
                    }
                } else
                    n = !1;
            return -1 === o ? i ? "/" : this.isUrl(s) ? r + e : r : i && 1 === o ? "//" : r + e.slice(0, o)
        },
        rootname: function(e) {
            assertPath(e);
            var t = "";
            if (t = (e = this.toPosix(e)).startsWith("/") ? "/" : this.getProtocol(e),
            this.isUrl(e)) {
                var i = e.indexOf("/", t.length);
                (t = -1 !== i ? e.slice(0, i) : e).endsWith("/") || (t += "/")
            }
            return t
        },
        basename: function(e, t) {
            assertPath(e),
            t && assertPath(t),
            e = this.toPosix(e);
            var i, o = 0, n = -1, r = !0;
            if (void 0 !== t && 0 < t.length && t.length <= e.length) {
                if (t.length === e.length && t === e)
                    return "";
                var s = t.length - 1
                  , a = -1;
                for (i = e.length - 1; 0 <= i; --i) {
                    var l = e.charCodeAt(i);
                    if (47 === l) {
                        if (!r) {
                            o = i + 1;
                            break
                        }
                    } else
                        -1 === a && (r = !1,
                        a = i + 1),
                        0 <= s && (l === t.charCodeAt(s) ? -1 == --s && (n = i) : (s = -1,
                        n = a))
                }
                return o === n ? n = a : -1 === n && (n = e.length),
                e.slice(o, n)
            }
            for (i = e.length - 1; 0 <= i; --i)
                if (47 === e.charCodeAt(i)) {
                    if (!r) {
                        o = i + 1;
                        break
                    }
                } else
                    -1 === n && (r = !1,
                    n = i + 1);
            return -1 === n ? "" : e.slice(o, n)
        },
        extname: function(e) {
            assertPath(e);
            for (var t = -1, i = 0, o = -1, n = !0, r = 0, s = (e = this.toPosix(e)).length - 1; 0 <= s; --s) {
                var a = e.charCodeAt(s);
                if (47 === a) {
                    if (n)
                        continue;
                    i = s + 1;
                    break
                }
                -1 === o && (n = !1,
                o = s + 1),
                46 === a ? -1 === t ? t = s : 1 !== r && (r = 1) : -1 !== t && (r = -1)
            }
            return -1 === t || -1 === o || 0 === r || 1 === r && t === o - 1 && t === i + 1 ? "" : e.slice(t, o)
        },
        parse: function(e) {
            assertPath(e);
            var t = {
                root: "",
                dir: "",
                base: "",
                ext: "",
                name: ""
            };
            if (0 === e.length)
                return t;
            var i, o = (e = this.toPosix(e)).charCodeAt(0), n = this.isAbsolute(e);
            t.root = this.rootname(e),
            i = n || this.hasProtocol(e) ? 1 : 0;
            for (var r = -1, s = 0, a = -1, l = !0, c = e.length - 1, u = 0; i <= c; --c) {
                if (47 === (o = e.charCodeAt(c))) {
                    if (l)
                        continue;
                    s = c + 1;
                    break
                }
                -1 === a && (l = !1,
                a = c + 1),
                46 === o ? -1 === r ? r = c : 1 !== u && (u = 1) : -1 !== r && (u = -1)
            }
            return -1 === r || -1 === a || 0 === u || 1 === u && r === a - 1 && r === s + 1 ? -1 !== a && (t.base = t.name = 0 === s && n ? e.slice(1, a) : e.slice(s, a)) : (0 === s && n ? (t.name = e.slice(1, r),
            t.base = e.slice(1, a)) : (t.name = e.slice(s, r),
            t.base = e.slice(s, a)),
            t.ext = e.slice(r, a)),
            t.dir = this.dirname(e),
            t
        },
        sep: "/",
        delimiter: ":"
    };
    Z.RETINA_PREFIX = /@([0-9\.]+)x/;
    var Se, Ee = Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = !1, be = "6.5.9";
    function sayHello(e) {
        var t;
        if (!Ee) {
            if (-1 < Z.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")) {
                var i = ["\n %c %c %c PixiJS " + be + " - ✰ " + e + " ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n", "background: #ff66a5; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff66a5; background: #030307; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "background: #ffc3dc; padding:5px 0;", "background: #ff66a5; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;", "color: #ff2424; background: #fff; padding:5px 0;"];
                (t = globalThis.console).log.apply(t, i)
            } else
                globalThis.console && globalThis.console.log("PixiJS " + be + " - " + e + " - http://www.pixijs.com/");
            Ee = !0
        }
    }
    function isWebGLSupported() {
        return void 0 === Se && (Se = function supported() {
            var e = {
                stencil: !0,
                failIfMajorPerformanceCaveat: Z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT
            };
            try {
                if (!Z.ADAPTER.getWebGLRenderingContext())
                    return !1;
                var t = Z.ADAPTER.createCanvas()
                  , i = t.getContext("webgl", e) || t.getContext("experimental-webgl", e)
                  , o = !(!i || !i.getContextAttributes().stencil);
                if (i) {
                    var n = i.getExtension("WEBGL_lose_context");
                    n && n.loseContext()
                }
                return i = null,
                o
            } catch (e) {
                return !1
            }
        }()),
        Se
    }
    var Ve = {
        aliceblue: "#f0f8ff",
        antiquewhite: "#faebd7",
        aqua: "#00ffff",
        aquamarine: "#7fffd4",
        azure: "#f0ffff",
        beige: "#f5f5dc",
        bisque: "#ffe4c4",
        black: "#000000",
        blanchedalmond: "#ffebcd",
        blue: "#0000ff",
        blueviolet: "#8a2be2",
        brown: "#a52a2a",
        burlywood: "#deb887",
        cadetblue: "#5f9ea0",
        chartreuse: "#7fff00",
        chocolate: "#d2691e",
        coral: "#ff7f50",
        cornflowerblue: "#6495ed",
        cornsilk: "#fff8dc",
        crimson: "#dc143c",
        cyan: "#00ffff",
        darkblue: "#00008b",
        darkcyan: "#008b8b",
        darkgoldenrod: "#b8860b",
        darkgray: "#a9a9a9",
        darkgreen: "#006400",
        darkgrey: "#a9a9a9",
        darkkhaki: "#bdb76b",
        darkmagenta: "#8b008b",
        darkolivegreen: "#556b2f",
        darkorange: "#ff8c00",
        darkorchid: "#9932cc",
        darkred: "#8b0000",
        darksalmon: "#e9967a",
        darkseagreen: "#8fbc8f",
        darkslateblue: "#483d8b",
        darkslategray: "#2f4f4f",
        darkslategrey: "#2f4f4f",
        darkturquoise: "#00ced1",
        darkviolet: "#9400d3",
        deeppink: "#ff1493",
        deepskyblue: "#00bfff",
        dimgray: "#696969",
        dimgrey: "#696969",
        dodgerblue: "#1e90ff",
        firebrick: "#b22222",
        floralwhite: "#fffaf0",
        forestgreen: "#228b22",
        fuchsia: "#ff00ff",
        gainsboro: "#dcdcdc",
        ghostwhite: "#f8f8ff",
        goldenrod: "#daa520",
        gold: "#ffd700",
        gray: "#808080",
        green: "#008000",
        greenyellow: "#adff2f",
        grey: "#808080",
        honeydew: "#f0fff0",
        hotpink: "#ff69b4",
        indianred: "#cd5c5c",
        indigo: "#4b0082",
        ivory: "#fffff0",
        khaki: "#f0e68c",
        lavenderblush: "#fff0f5",
        lavender: "#e6e6fa",
        lawngreen: "#7cfc00",
        lemonchiffon: "#fffacd",
        lightblue: "#add8e6",
        lightcoral: "#f08080",
        lightcyan: "#e0ffff",
        lightgoldenrodyellow: "#fafad2",
        lightgray: "#d3d3d3",
        lightgreen: "#90ee90",
        lightgrey: "#d3d3d3",
        lightpink: "#ffb6c1",
        lightsalmon: "#ffa07a",
        lightseagreen: "#20b2aa",
        lightskyblue: "#87cefa",
        lightslategray: "#778899",
        lightslategrey: "#778899",
        lightsteelblue: "#b0c4de",
        lightyellow: "#ffffe0",
        lime: "#00ff00",
        limegreen: "#32cd32",
        linen: "#faf0e6",
        magenta: "#ff00ff",
        maroon: "#800000",
        mediumaquamarine: "#66cdaa",
        mediumblue: "#0000cd",
        mediumorchid: "#ba55d3",
        mediumpurple: "#9370db",
        mediumseagreen: "#3cb371",
        mediumslateblue: "#7b68ee",
        mediumspringgreen: "#00fa9a",
        mediumturquoise: "#48d1cc",
        mediumvioletred: "#c71585",
        midnightblue: "#191970",
        mintcream: "#f5fffa",
        mistyrose: "#ffe4e1",
        moccasin: "#ffe4b5",
        navajowhite: "#ffdead",
        navy: "#000080",
        oldlace: "#fdf5e6",
        olive: "#808000",
        olivedrab: "#6b8e23",
        orange: "#ffa500",
        orangered: "#ff4500",
        orchid: "#da70d6",
        palegoldenrod: "#eee8aa",
        palegreen: "#98fb98",
        paleturquoise: "#afeeee",
        palevioletred: "#db7093",
        papayawhip: "#ffefd5",
        peachpuff: "#ffdab9",
        peru: "#cd853f",
        pink: "#ffc0cb",
        plum: "#dda0dd",
        powderblue: "#b0e0e6",
        purple: "#800080",
        rebeccapurple: "#663399",
        red: "#ff0000",
        rosybrown: "#bc8f8f",
        royalblue: "#4169e1",
        saddlebrown: "#8b4513",
        salmon: "#fa8072",
        sandybrown: "#f4a460",
        seagreen: "#2e8b57",
        seashell: "#fff5ee",
        sienna: "#a0522d",
        silver: "#c0c0c0",
        skyblue: "#87ceeb",
        slateblue: "#6a5acd",
        slategray: "#708090",
        slategrey: "#708090",
        snow: "#fffafa",
        springgreen: "#00ff7f",
        steelblue: "#4682b4",
        tan: "#d2b48c",
        teal: "#008080",
        thistle: "#d8bfd8",
        tomato: "#ff6347",
        turquoise: "#40e0d0",
        violet: "#ee82ee",
        wheat: "#f5deb3",
        white: "#ffffff",
        whitesmoke: "#f5f5f5",
        yellow: "#ffff00",
        yellowgreen: "#9acd32"
    };
    function hex2rgb(e, t) {
        return void 0 === t && (t = []),
        t[0] = (e >> 16 & 255) / 255,
        t[1] = (e >> 8 & 255) / 255,
        t[2] = (255 & e) / 255,
        t
    }
    function hex2string(e) {
        var t = e.toString(16);
        return "#" + (t = "000000".substring(0, 6 - t.length) + t)
    }
    function string2hex(e) {
        return "string" == typeof e && "#" === (e = Ve[e.toLowerCase()] || e)[0] && (e = e.slice(1)),
        parseInt(e, 16)
    }
    var Ue = function mapPremultipliedBlendModes() {
        for (var e = [], t = [], i = 0; i < 32; i++)
            t[e[i] = i] = i;
        e[ne.BLEND_MODES.NORMAL_NPM] = ne.BLEND_MODES.NORMAL,
        e[ne.BLEND_MODES.ADD_NPM] = ne.BLEND_MODES.ADD,
        e[ne.BLEND_MODES.SCREEN_NPM] = ne.BLEND_MODES.SCREEN,
        t[ne.BLEND_MODES.NORMAL] = ne.BLEND_MODES.NORMAL_NPM,
        t[ne.BLEND_MODES.ADD] = ne.BLEND_MODES.ADD_NPM,
        t[ne.BLEND_MODES.SCREEN] = ne.BLEND_MODES.SCREEN_NPM;
        var o = [];
        return o.push(t),
        o.push(e),
        o
    }();
    function correctBlendMode(e, t) {
        return Ue[t ? 1 : 0][e]
    }
    function premultiplyRgba(e, t, i, o) {
        return i = i || new Float32Array(4),
        o || void 0 === o ? (i[0] = e[0] * t,
        i[1] = e[1] * t,
        i[2] = e[2] * t) : (i[0] = e[0],
        i[1] = e[1],
        i[2] = e[2]),
        i[3] = t,
        i
    }
    function premultiplyTint(e, t) {
        if (1 === t)
            return (255 * t << 24) + e;
        if (0 === t)
            return 0;
        var i = e >> 16 & 255
          , o = e >> 8 & 255
          , n = 255 & e;
        return (255 * t << 24) + ((i = i * t + .5 | 0) << 16) + ((o = o * t + .5 | 0) << 8) + (n = n * t + .5 | 0)
    }
    function premultiplyTintToRgba(e, t, i, o) {
        return (i = i || new Float32Array(4))[0] = (e >> 16 & 255) / 255,
        i[1] = (e >> 8 & 255) / 255,
        i[2] = (255 & e) / 255,
        !o && void 0 !== o || (i[0] *= t,
        i[1] *= t,
        i[2] *= t),
        i[3] = t,
        i
    }
    function createIndicesForQuads(e, t) {
        void 0 === t && (t = null);
        var i = 6 * e;
        if ((t = t || new Uint16Array(i)).length !== i)
            throw new Error("Out buffer length is incorrect, got " + t.length + " and expected " + i);
        for (var o = 0, n = 0; o < i; o += 6,
        n += 4)
            t[o + 0] = n + 0,
            t[o + 1] = n + 1,
            t[o + 2] = n + 2,
            t[o + 3] = n + 0,
            t[o + 4] = n + 2,
            t[o + 5] = n + 3;
        return t
    }
    function getBufferType(e) {
        if (4 === e.BYTES_PER_ELEMENT)
            return e instanceof Float32Array ? "Float32Array" : e instanceof Uint32Array ? "Uint32Array" : "Int32Array";
        if (2 === e.BYTES_PER_ELEMENT) {
            if (e instanceof Uint16Array)
                return "Uint16Array"
        } else if (1 === e.BYTES_PER_ELEMENT && e instanceof Uint8Array)
            return "Uint8Array";
        return null
    }
    var Ie = {
        Float32Array: Float32Array,
        Uint32Array: Uint32Array,
        Int32Array: Int32Array,
        Uint8Array: Uint8Array
    };
    function nextPow2(e) {
        return e += 0 === e ? 1 : 0,
        --e,
        e |= e >>> 1,
        e |= e >>> 2,
        e |= e >>> 4,
        e |= e >>> 8,
        (e |= e >>> 16) + 1
    }
    function isPow2(e) {
        return !(e & e - 1 || !e)
    }
    function log2(e) {
        var t = (65535 < e ? 1 : 0) << 4
          , i = (255 < (e >>>= t) ? 1 : 0) << 3;
        return t |= i,
        t |= i = (15 < (e >>>= i) ? 1 : 0) << 2,
        (t |= i = (3 < (e >>>= i) ? 1 : 0) << 1) | (e >>>= i) >> 1
    }
    function removeItems(e, t, i) {
        var o, n = e.length;
        if (!(n <= t || 0 === i)) {
            var r = n - (i = n < t + i ? n - t : i);
            for (o = t; o < r; ++o)
                e[o] = e[o + i];
            e.length = r
        }
    }
    function sign(e) {
        return 0 === e ? 0 : e < 0 ? -1 : 1
    }
    var Ae = 0;
    function uid() {
        return ++Ae
    }
    var Re = {};
    function deprecation(e, t, i) {
        if (void 0 === i && (i = 3),
        !Re[t]) {
            var o = (new Error).stack;
            void 0 === o ? console.warn("PixiJS Deprecation Warning: ", t + "\nDeprecated since v" + e) : (o = o.split("\n").splice(i).join("\n"),
            console.groupCollapsed ? (console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s", "color:#614108;background:#fffbe6", "font-weight:normal;color:#614108;background:#fffbe6", t + "\nDeprecated since v" + e),
            console.warn(o),
            console.groupEnd()) : (console.warn("PixiJS Deprecation Warning: ", t + "\nDeprecated since v" + e),
            console.warn(o))),
            Re[t] = !0
        }
    }
    var Pe = {}
      , Oe = Object.create(null)
      , De = Object.create(null);
    var Le = (CanvasRenderTarget.prototype.clear = function() {
        this.context.setTransform(1, 0, 0, 1, 0, 0),
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)
    }
    ,
    CanvasRenderTarget.prototype.resize = function(e, t) {
        this.canvas.width = Math.round(e * this.resolution),
        this.canvas.height = Math.round(t * this.resolution)
    }
    ,
    CanvasRenderTarget.prototype.destroy = function() {
        this.context = null,
        this.canvas = null
    }
    ,
    Object.defineProperty(CanvasRenderTarget.prototype, "width", {
        get: function() {
            return this.canvas.width
        },
        set: function(e) {
            this.canvas.width = Math.round(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(CanvasRenderTarget.prototype, "height", {
        get: function() {
            return this.canvas.height
        },
        set: function(e) {
            this.canvas.height = Math.round(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    CanvasRenderTarget);
    function CanvasRenderTarget(e, t, i) {
        this.canvas = Z.ADAPTER.createCanvas(),
        this.context = this.canvas.getContext("2d"),
        this.resolution = i || Z.RESOLUTION,
        this.resize(e, t)
    }
    function trimCanvas(e) {
        var t, i, o, n = e.width, r = e.height, s = e.getContext("2d", {
            willReadFrequently: !0
        }), a = s.getImageData(0, 0, n, r).data, l = a.length, c = {
            top: null,
            left: null,
            right: null,
            bottom: null
        }, u = null;
        for (t = 0; t < l; t += 4)
            0 !== a[t + 3] && (i = t / 4 % n,
            o = ~~(t / 4 / n),
            null === c.top && (c.top = o),
            null === c.left ? c.left = i : i < c.left && (c.left = i),
            null === c.right ? c.right = 1 + i : c.right < i && (c.right = 1 + i),
            null === c.bottom ? c.bottom = o : c.bottom < o && (c.bottom = o));
        return null !== c.top && (n = c.right - c.left,
        r = c.bottom - c.top + 1,
        u = s.getImageData(c.left, c.top, n, r)),
        {
            height: r,
            width: n,
            data: u
        }
    }
    var Me, xe = /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;
    function determineCrossOrigin(e, t) {
        if (void 0 === t && (t = globalThis.location),
        0 === e.indexOf("data:"))
            return "";
        t = t || globalThis.location,
        (Me = Me || document.createElement("a")).href = e;
        var i = we.parse(Me.href)
          , o = !i.port && "" === t.port || i.port === t.port;
        return i.hostname === t.hostname && o && i.protocol === t.protocol ? "" : "anonymous"
    }
    function getResolutionOfUrl(e, t) {
        var i = Z.RETINA_PREFIX.exec(e);
        return i ? parseFloat(i[1]) : void 0 !== t ? t : 1
    }
    var Be, Ne = {
        __proto__: null,
        BaseTextureCache: De,
        CanvasRenderTarget: Le,
        DATA_URI: xe,
        ProgramCache: Pe,
        TextureCache: Oe,
        clearTextureCache: function clearTextureCache() {
            var e;
            for (e in Oe)
                delete Oe[e];
            for (e in De)
                delete De[e]
        },
        correctBlendMode: correctBlendMode,
        createIndicesForQuads: createIndicesForQuads,
        decomposeDataUri: function decomposeDataUri(e) {
            var t = xe.exec(e);
            if (t)
                return {
                    mediaType: t[1] ? t[1].toLowerCase() : void 0,
                    subType: t[2] ? t[2].toLowerCase() : void 0,
                    charset: t[3] ? t[3].toLowerCase() : void 0,
                    encoding: t[4] ? t[4].toLowerCase() : void 0,
                    data: t[5]
                }
        },
        deprecation: deprecation,
        destroyTextureCache: function destroyTextureCache() {
            var e;
            for (e in Oe)
                Oe[e].destroy();
            for (e in De)
                De[e].destroy()
        },
        determineCrossOrigin: determineCrossOrigin,
        getBufferType: getBufferType,
        getResolutionOfUrl: getResolutionOfUrl,
        hex2rgb: hex2rgb,
        hex2string: hex2string,
        interleaveTypedArrays: function interleaveTypedArrays$1(e, t) {
            for (var i = 0, o = 0, n = {}, r = 0; r < e.length; r++)
                o += t[r],
                i += e[r].length;
            var s = new ArrayBuffer(4 * i)
              , a = null
              , l = 0;
            for (r = 0; r < e.length; r++) {
                var c = t[r]
                  , u = e[r]
                  , d = getBufferType(u);
                n[d] || (n[d] = new Ie[d](s)),
                a = n[d];
                for (var h = 0; h < u.length; h++) {
                    a[(h / c | 0) * o + l + h % c] = u[h]
                }
                l += c
            }
            return new Float32Array(s)
        },
        isPow2: isPow2,
        isWebGLSupported: isWebGLSupported,
        log2: log2,
        nextPow2: nextPow2,
        path: Ce,
        premultiplyBlendMode: Ue,
        premultiplyRgba: premultiplyRgba,
        premultiplyTint: premultiplyTint,
        premultiplyTintToRgba: premultiplyTintToRgba,
        removeItems: removeItems,
        rgb2hex: function rgb2hex(e) {
            return (255 * e[0] << 16) + (255 * e[1] << 8) + (255 * e[2] | 0)
        },
        sayHello: sayHello,
        sign: sign,
        skipHello: function skipHello() {
            Ee = !0
        },
        string2hex: string2hex,
        trimCanvas: trimCanvas,
        uid: uid,
        url: we,
        isMobile: $,
        EventEmitter: te,
        earcut: ie
    }, Fe = 2 * Math.PI, ke = 180 / Math.PI, Ge = Math.PI / 180;
    ne.SHAPES = void 0,
    (Be = ne.SHAPES || (ne.SHAPES = {}))[Be.POLY = 0] = "POLY",
    Be[Be.RECT = 1] = "RECT",
    Be[Be.CIRC = 2] = "CIRC",
    Be[Be.ELIP = 3] = "ELIP",
    Be[Be.RREC = 4] = "RREC";
    var je = (Point.prototype.clone = function() {
        return new Point(this.x,this.y)
    }
    ,
    Point.prototype.copyFrom = function(e) {
        return this.set(e.x, e.y),
        this
    }
    ,
    Point.prototype.copyTo = function(e) {
        return e.set(this.x, this.y),
        e
    }
    ,
    Point.prototype.equals = function(e) {
        return e.x === this.x && e.y === this.y
    }
    ,
    Point.prototype.set = function(e, t) {
        return void 0 === e && (e = 0),
        void 0 === t && (t = e),
        this.x = e,
        this.y = t,
        this
    }
    ,
    Point.prototype.toString = function() {
        return "[@pixi/math:Point x=" + this.x + " y=" + this.y + "]"
    }
    ,
    Point);
    function Point(e, t) {
        void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        this.x = 0,
        this.y = 0,
        this.x = e,
        this.y = t
    }
    var qe = [new je, new je, new je, new je]
      , ze = (Object.defineProperty(Rectangle.prototype, "left", {
        get: function() {
            return this.x
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle.prototype, "right", {
        get: function() {
            return this.x + this.width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle.prototype, "top", {
        get: function() {
            return this.y
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle.prototype, "bottom", {
        get: function() {
            return this.y + this.height
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Rectangle, "EMPTY", {
        get: function() {
            return new Rectangle(0,0,0,0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Rectangle.prototype.clone = function() {
        return new Rectangle(this.x,this.y,this.width,this.height)
    }
    ,
    Rectangle.prototype.copyFrom = function(e) {
        return this.x = e.x,
        this.y = e.y,
        this.width = e.width,
        this.height = e.height,
        this
    }
    ,
    Rectangle.prototype.copyTo = function(e) {
        return e.x = this.x,
        e.y = this.y,
        e.width = this.width,
        e.height = this.height,
        e
    }
    ,
    Rectangle.prototype.contains = function(e, t) {
        return !(this.width <= 0 || this.height <= 0) && e >= this.x && e < this.x + this.width && t >= this.y && t < this.y + this.height
    }
    ,
    Rectangle.prototype.intersects = function(e, t) {
        if (!t) {
            var i = this.x < e.x ? e.x : this.x;
            return !((this.right > e.right ? e.right : this.right) <= i) && (this.y < e.y ? e.y : this.y) < (this.bottom > e.bottom ? e.bottom : this.bottom)
        }
        var o = this.left
          , n = this.right
          , r = this.top
          , s = this.bottom;
        if (n <= o || s <= r)
            return !1;
        var a = qe[0].set(e.left, e.top)
          , l = qe[1].set(e.left, e.bottom)
          , c = qe[2].set(e.right, e.top)
          , u = qe[3].set(e.right, e.bottom);
        if (c.x <= a.x || l.y <= a.y)
            return !1;
        var d = Math.sign(t.a * t.d - t.b * t.c);
        if (0 === d)
            return !1;
        if (t.apply(a, a),
        t.apply(l, l),
        t.apply(c, c),
        t.apply(u, u),
        Math.max(a.x, l.x, c.x, u.x) <= o || Math.min(a.x, l.x, c.x, u.x) >= n || Math.max(a.y, l.y, c.y, u.y) <= r || Math.min(a.y, l.y, c.y, u.y) >= s)
            return !1;
        var h = d * (l.y - a.y)
          , p = d * (a.x - l.x)
          , _ = h * o + p * r
          , f = h * n + p * r
          , m = h * o + p * s
          , T = h * n + p * s;
        if (Math.max(_, f, m, T) <= h * a.x + p * a.y || Math.min(_, f, m, T) >= h * u.x + p * u.y)
            return !1;
        var v = d * (a.y - c.y)
          , y = d * (c.x - a.x)
          , g = v * o + y * r
          , w = v * n + y * r
          , C = v * o + y * s
          , S = v * n + y * s;
        return !(Math.max(g, w, C, S) <= v * a.x + y * a.y || Math.min(g, w, C, S) >= v * u.x + y * u.y)
    }
    ,
    Rectangle.prototype.pad = function(e, t) {
        return void 0 === e && (e = 0),
        void 0 === t && (t = e),
        this.x -= e,
        this.y -= t,
        this.width += 2 * e,
        this.height += 2 * t,
        this
    }
    ,
    Rectangle.prototype.fit = function(e) {
        var t = Math.max(this.x, e.x)
          , i = Math.min(this.x + this.width, e.x + e.width)
          , o = Math.max(this.y, e.y)
          , n = Math.min(this.y + this.height, e.y + e.height);
        return this.x = t,
        this.width = Math.max(i - t, 0),
        this.y = o,
        this.height = Math.max(n - o, 0),
        this
    }
    ,
    Rectangle.prototype.ceil = function(e, t) {
        void 0 === e && (e = 1),
        void 0 === t && (t = .001);
        var i = Math.ceil((this.x + this.width - t) * e) / e
          , o = Math.ceil((this.y + this.height - t) * e) / e;
        return this.x = Math.floor((this.x + t) * e) / e,
        this.y = Math.floor((this.y + t) * e) / e,
        this.width = i - this.x,
        this.height = o - this.y,
        this
    }
    ,
    Rectangle.prototype.enlarge = function(e) {
        var t = Math.min(this.x, e.x)
          , i = Math.max(this.x + this.width, e.x + e.width)
          , o = Math.min(this.y, e.y)
          , n = Math.max(this.y + this.height, e.y + e.height);
        return this.x = t,
        this.width = i - t,
        this.y = o,
        this.height = n - o,
        this
    }
    ,
    Rectangle.prototype.toString = function() {
        return "[@pixi/math:Rectangle x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]"
    }
    ,
    Rectangle);
    function Rectangle(e, t, i, o) {
        void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        void 0 === i && (i = 0),
        void 0 === o && (o = 0),
        this.x = Number(e),
        this.y = Number(t),
        this.width = Number(i),
        this.height = Number(o),
        this.type = ne.SHAPES.RECT
    }
    var He = (Circle.prototype.clone = function() {
        return new Circle(this.x,this.y,this.radius)
    }
    ,
    Circle.prototype.contains = function(e, t) {
        if (this.radius <= 0)
            return !1;
        var i = this.radius * this.radius
          , o = this.x - e
          , n = this.y - t;
        return (o *= o) + (n *= n) <= i
    }
    ,
    Circle.prototype.getBounds = function() {
        return new ze(this.x - this.radius,this.y - this.radius,2 * this.radius,2 * this.radius)
    }
    ,
    Circle.prototype.toString = function() {
        return "[@pixi/math:Circle x=" + this.x + " y=" + this.y + " radius=" + this.radius + "]"
    }
    ,
    Circle);
    function Circle(e, t, i) {
        void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        void 0 === i && (i = 0),
        this.x = e,
        this.y = t,
        this.radius = i,
        this.type = ne.SHAPES.CIRC
    }
    var Ye = (Ellipse.prototype.clone = function() {
        return new Ellipse(this.x,this.y,this.width,this.height)
    }
    ,
    Ellipse.prototype.contains = function(e, t) {
        if (this.width <= 0 || this.height <= 0)
            return !1;
        var i = (e - this.x) / this.width
          , o = (t - this.y) / this.height;
        return (i *= i) + (o *= o) <= 1
    }
    ,
    Ellipse.prototype.getBounds = function() {
        return new ze(this.x - this.width,this.y - this.height,this.width,this.height)
    }
    ,
    Ellipse.prototype.toString = function() {
        return "[@pixi/math:Ellipse x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + "]"
    }
    ,
    Ellipse);
    function Ellipse(e, t, i, o) {
        void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        void 0 === i && (i = 0),
        void 0 === o && (o = 0),
        this.x = e,
        this.y = t,
        this.width = i,
        this.height = o,
        this.type = ne.SHAPES.ELIP
    }
    var Xe = (Polygon.prototype.clone = function() {
        var e = new Polygon(this.points.slice());
        return e.closeStroke = this.closeStroke,
        e
    }
    ,
    Polygon.prototype.contains = function(e, t) {
        for (var i = !1, o = this.points.length / 2, n = 0, r = o - 1; n < o; r = n++) {
            var s = this.points[2 * n]
              , a = this.points[2 * n + 1]
              , l = this.points[2 * r]
              , c = this.points[2 * r + 1];
            t < a != t < c && e < (t - a) / (c - a) * (l - s) + s && (i = !i)
        }
        return i
    }
    ,
    Polygon.prototype.toString = function() {
        return "[@pixi/math:PolygoncloseStroke=" + this.closeStroke + "points=" + this.points.reduce(function(e, t) {
            return e + ", " + t
        }, "") + "]"
    }
    ,
    Polygon);
    function Polygon() {
        for (var e = arguments, t = [], i = 0; i < arguments.length; i++)
            t[i] = e[i];
        var o = Array.isArray(t[0]) ? t[0] : t;
        if ("number" != typeof o[0]) {
            for (var n = [], r = 0, s = o.length; r < s; r++)
                n.push(o[r].x, o[r].y);
            o = n
        }
        this.points = o,
        this.type = ne.SHAPES.POLY,
        this.closeStroke = !0
    }
    var We = (RoundedRectangle.prototype.clone = function() {
        return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)
    }
    ,
    RoundedRectangle.prototype.contains = function(e, t) {
        if (this.width <= 0 || this.height <= 0)
            return !1;
        if (e >= this.x && e <= this.x + this.width && t >= this.y && t <= this.y + this.height) {
            var i = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));
            if (t >= this.y + i && t <= this.y + this.height - i || e >= this.x + i && e <= this.x + this.width - i)
                return !0;
            var o = e - (this.x + i)
              , n = t - (this.y + i)
              , r = i * i;
            if (o * o + n * n <= r)
                return !0;
            if ((o = e - (this.x + this.width - i)) * o + n * n <= r)
                return !0;
            if (o * o + (n = t - (this.y + this.height - i)) * n <= r)
                return !0;
            if ((o = e - (this.x + i)) * o + n * n <= r)
                return !0
        }
        return !1
    }
    ,
    RoundedRectangle.prototype.toString = function() {
        return "[@pixi/math:RoundedRectangle x=" + this.x + " y=" + this.y + "width=" + this.width + " height=" + this.height + " radius=" + this.radius + "]"
    }
    ,
    RoundedRectangle);
    function RoundedRectangle(e, t, i, o, n) {
        void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        void 0 === i && (i = 0),
        void 0 === o && (o = 0),
        void 0 === n && (n = 20),
        this.x = e,
        this.y = t,
        this.width = i,
        this.height = o,
        this.radius = n,
        this.type = ne.SHAPES.RREC
    }
    var Ke = (ObservablePoint.prototype.clone = function(e, t) {
        return void 0 === e && (e = this.cb),
        void 0 === t && (t = this.scope),
        new ObservablePoint(e,t,this._x,this._y)
    }
    ,
    ObservablePoint.prototype.set = function(e, t) {
        return void 0 === e && (e = 0),
        void 0 === t && (t = e),
        this._x === e && this._y === t || (this._x = e,
        this._y = t,
        this.cb.call(this.scope)),
        this
    }
    ,
    ObservablePoint.prototype.copyFrom = function(e) {
        return this._x === e.x && this._y === e.y || (this._x = e.x,
        this._y = e.y,
        this.cb.call(this.scope)),
        this
    }
    ,
    ObservablePoint.prototype.copyTo = function(e) {
        return e.set(this._x, this._y),
        e
    }
    ,
    ObservablePoint.prototype.equals = function(e) {
        return e.x === this._x && e.y === this._y
    }
    ,
    ObservablePoint.prototype.toString = function() {
        return "[@pixi/math:ObservablePoint x=0 y=0 scope=" + this.scope + "]"
    }
    ,
    Object.defineProperty(ObservablePoint.prototype, "x", {
        get: function() {
            return this._x
        },
        set: function(e) {
            this._x !== e && (this._x = e,
            this.cb.call(this.scope))
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ObservablePoint.prototype, "y", {
        get: function() {
            return this._y
        },
        set: function(e) {
            this._y !== e && (this._y = e,
            this.cb.call(this.scope))
        },
        enumerable: !1,
        configurable: !0
    }),
    ObservablePoint);
    function ObservablePoint(e, t, i, o) {
        void 0 === i && (i = 0),
        void 0 === o && (o = 0),
        this._x = i,
        this._y = o,
        this.cb = e,
        this.scope = t
    }
    var Je = (Matrix.prototype.fromArray = function(e) {
        this.a = e[0],
        this.b = e[1],
        this.c = e[3],
        this.d = e[4],
        this.tx = e[2],
        this.ty = e[5]
    }
    ,
    Matrix.prototype.set = function(e, t, i, o, n, r) {
        return this.a = e,
        this.b = t,
        this.c = i,
        this.d = o,
        this.tx = n,
        this.ty = r,
        this
    }
    ,
    Matrix.prototype.toArray = function(e, t) {
        this.array || (this.array = new Float32Array(9));
        var i = t || this.array;
        return e ? (i[0] = this.a,
        i[1] = this.b,
        i[2] = 0,
        i[3] = this.c,
        i[4] = this.d,
        i[5] = 0,
        i[6] = this.tx,
        i[7] = this.ty) : (i[0] = this.a,
        i[1] = this.c,
        i[2] = this.tx,
        i[3] = this.b,
        i[4] = this.d,
        i[5] = this.ty,
        i[6] = 0,
        i[7] = 0),
        i[8] = 1,
        i
    }
    ,
    Matrix.prototype.apply = function(e, t) {
        t = t || new je;
        var i = e.x
          , o = e.y;
        return t.x = this.a * i + this.c * o + this.tx,
        t.y = this.b * i + this.d * o + this.ty,
        t
    }
    ,
    Matrix.prototype.applyInverse = function(e, t) {
        t = t || new je;
        var i = 1 / (this.a * this.d + this.c * -this.b)
          , o = e.x
          , n = e.y;
        return t.x = this.d * i * o + -this.c * i * n + (this.ty * this.c - this.tx * this.d) * i,
        t.y = this.a * i * n + -this.b * i * o + (-this.ty * this.a + this.tx * this.b) * i,
        t
    }
    ,
    Matrix.prototype.translate = function(e, t) {
        return this.tx += e,
        this.ty += t,
        this
    }
    ,
    Matrix.prototype.scale = function(e, t) {
        return this.a *= e,
        this.d *= t,
        this.c *= e,
        this.b *= t,
        this.tx *= e,
        this.ty *= t,
        this
    }
    ,
    Matrix.prototype.rotate = function(e) {
        var t = Math.cos(e)
          , i = Math.sin(e)
          , o = this.a
          , n = this.c
          , r = this.tx;
        return this.a = o * t - this.b * i,
        this.b = o * i + this.b * t,
        this.c = n * t - this.d * i,
        this.d = n * i + this.d * t,
        this.tx = r * t - this.ty * i,
        this.ty = r * i + this.ty * t,
        this
    }
    ,
    Matrix.prototype.append = function(e) {
        var t = this.a
          , i = this.b
          , o = this.c
          , n = this.d;
        return this.a = e.a * t + e.b * o,
        this.b = e.a * i + e.b * n,
        this.c = e.c * t + e.d * o,
        this.d = e.c * i + e.d * n,
        this.tx = e.tx * t + e.ty * o + this.tx,
        this.ty = e.tx * i + e.ty * n + this.ty,
        this
    }
    ,
    Matrix.prototype.setTransform = function(e, t, i, o, n, r, s, a, l) {
        return this.a = Math.cos(s + l) * n,
        this.b = Math.sin(s + l) * n,
        this.c = -Math.sin(s - a) * r,
        this.d = Math.cos(s - a) * r,
        this.tx = e - (i * this.a + o * this.c),
        this.ty = t - (i * this.b + o * this.d),
        this
    }
    ,
    Matrix.prototype.prepend = function(e) {
        var t = this.tx;
        if (1 !== e.a || 0 !== e.b || 0 !== e.c || 1 !== e.d) {
            var i = this.a
              , o = this.c;
            this.a = i * e.a + this.b * e.c,
            this.b = i * e.b + this.b * e.d,
            this.c = o * e.a + this.d * e.c,
            this.d = o * e.b + this.d * e.d
        }
        return this.tx = t * e.a + this.ty * e.c + e.tx,
        this.ty = t * e.b + this.ty * e.d + e.ty,
        this
    }
    ,
    Matrix.prototype.decompose = function(e) {
        var t = this.a
          , i = this.b
          , o = this.c
          , n = this.d
          , r = e.pivot
          , s = -Math.atan2(-o, n)
          , a = Math.atan2(i, t)
          , l = Math.abs(s + a);
        return l < 1e-5 || Math.abs(Fe - l) < 1e-5 ? (e.rotation = a,
        e.skew.x = e.skew.y = 0) : (e.rotation = 0,
        e.skew.x = s,
        e.skew.y = a),
        e.scale.x = Math.sqrt(t * t + i * i),
        e.scale.y = Math.sqrt(o * o + n * n),
        e.position.x = this.tx + (r.x * t + r.y * o),
        e.position.y = this.ty + (r.x * i + r.y * n),
        e
    }
    ,
    Matrix.prototype.invert = function() {
        var e = this.a
          , t = this.b
          , i = this.c
          , o = this.d
          , n = this.tx
          , r = e * o - t * i;
        return this.a = o / r,
        this.b = -t / r,
        this.c = -i / r,
        this.d = e / r,
        this.tx = (i * this.ty - o * n) / r,
        this.ty = -(e * this.ty - t * n) / r,
        this
    }
    ,
    Matrix.prototype.identity = function() {
        return this.a = 1,
        this.b = 0,
        this.c = 0,
        this.d = 1,
        this.tx = 0,
        this.ty = 0,
        this
    }
    ,
    Matrix.prototype.clone = function() {
        var e = new Matrix;
        return e.a = this.a,
        e.b = this.b,
        e.c = this.c,
        e.d = this.d,
        e.tx = this.tx,
        e.ty = this.ty,
        e
    }
    ,
    Matrix.prototype.copyTo = function(e) {
        return e.a = this.a,
        e.b = this.b,
        e.c = this.c,
        e.d = this.d,
        e.tx = this.tx,
        e.ty = this.ty,
        e
    }
    ,
    Matrix.prototype.copyFrom = function(e) {
        return this.a = e.a,
        this.b = e.b,
        this.c = e.c,
        this.d = e.d,
        this.tx = e.tx,
        this.ty = e.ty,
        this
    }
    ,
    Matrix.prototype.toString = function() {
        return "[@pixi/math:Matrix a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + "]"
    }
    ,
    Object.defineProperty(Matrix, "IDENTITY", {
        get: function() {
            return new Matrix
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Matrix, "TEMP_MATRIX", {
        get: function() {
            return new Matrix
        },
        enumerable: !1,
        configurable: !0
    }),
    Matrix);
    function Matrix(e, t, i, o, n, r) {
        void 0 === e && (e = 1),
        void 0 === t && (t = 0),
        void 0 === i && (i = 0),
        void 0 === o && (o = 1),
        void 0 === n && (n = 0),
        void 0 === r && (r = 0),
        this.array = null,
        this.a = e,
        this.b = t,
        this.c = i,
        this.d = o,
        this.tx = n,
        this.ty = r
    }
    var Qe = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1]
      , $e = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1]
      , Ze = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1]
      , et = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1]
      , tt = []
      , it = []
      , ot = Math.sign;
    !function init() {
        for (var e = 0; e < 16; e++) {
            var t = [];
            tt.push(t);
            for (var i = 0; i < 16; i++)
                for (var o = ot(Qe[e] * Qe[i] + Ze[e] * $e[i]), n = ot($e[e] * Qe[i] + et[e] * $e[i]), r = ot(Qe[e] * Ze[i] + Ze[e] * et[i]), s = ot($e[e] * Ze[i] + et[e] * et[i]), a = 0; a < 16; a++)
                    if (Qe[a] === o && $e[a] === n && Ze[a] === r && et[a] === s) {
                        t.push(a);
                        break
                    }
        }
        for (e = 0; e < 16; e++) {
            var l = new Je;
            l.set(Qe[e], $e[e], Ze[e], et[e], 0, 0),
            it.push(l)
        }
    }();
    var nt = {
        E: 0,
        SE: 1,
        S: 2,
        SW: 3,
        W: 4,
        NW: 5,
        N: 6,
        NE: 7,
        MIRROR_VERTICAL: 8,
        MAIN_DIAGONAL: 10,
        MIRROR_HORIZONTAL: 12,
        REVERSE_DIAGONAL: 14,
        uX: function(e) {
            return Qe[e]
        },
        uY: function(e) {
            return $e[e]
        },
        vX: function(e) {
            return Ze[e]
        },
        vY: function(e) {
            return et[e]
        },
        inv: function(e) {
            return 8 & e ? 15 & e : 7 & -e
        },
        add: function(e, t) {
            return tt[e][t]
        },
        sub: function(e, t) {
            return tt[e][nt.inv(t)]
        },
        rotate180: function(e) {
            return 4 ^ e
        },
        isVertical: function(e) {
            return 2 == (3 & e)
        },
        byDirection: function(e, t) {
            return 2 * Math.abs(e) <= Math.abs(t) ? 0 <= t ? nt.S : nt.N : 2 * Math.abs(t) <= Math.abs(e) ? 0 < e ? nt.E : nt.W : 0 < t ? 0 < e ? nt.SE : nt.SW : 0 < e ? nt.NE : nt.NW
        },
        matrixAppendRotationInv: function(e, t, i, o) {
            void 0 === i && (i = 0),
            void 0 === o && (o = 0);
            var n = it[nt.inv(t)];
            n.tx = i,
            n.ty = o,
            e.append(n)
        }
    }
      , rt = (Transform.prototype.onChange = function() {
        this._localID++
    }
    ,
    Transform.prototype.updateSkew = function() {
        this._cx = Math.cos(this._rotation + this.skew.y),
        this._sx = Math.sin(this._rotation + this.skew.y),
        this._cy = -Math.sin(this._rotation - this.skew.x),
        this._sy = Math.cos(this._rotation - this.skew.x),
        this._localID++
    }
    ,
    Transform.prototype.toString = function() {
        return "[@pixi/math:Transform position=(" + this.position.x + ", " + this.position.y + ") rotation=" + this.rotation + " scale=(" + this.scale.x + ", " + this.scale.y + ") skew=(" + this.skew.x + ", " + this.skew.y + ") ]"
    }
    ,
    Transform.prototype.updateLocalTransform = function() {
        var e = this.localTransform;
        this._localID !== this._currentLocalID && (e.a = this._cx * this.scale.x,
        e.b = this._sx * this.scale.x,
        e.c = this._cy * this.scale.y,
        e.d = this._sy * this.scale.y,
        e.tx = this.position.x - (this.pivot.x * e.a + this.pivot.y * e.c),
        e.ty = this.position.y - (this.pivot.x * e.b + this.pivot.y * e.d),
        this._currentLocalID = this._localID,
        this._parentID = -1)
    }
    ,
    Transform.prototype.updateTransform = function(e) {
        var t = this.localTransform;
        if (this._localID !== this._currentLocalID && (t.a = this._cx * this.scale.x,
        t.b = this._sx * this.scale.x,
        t.c = this._cy * this.scale.y,
        t.d = this._sy * this.scale.y,
        t.tx = this.position.x - (this.pivot.x * t.a + this.pivot.y * t.c),
        t.ty = this.position.y - (this.pivot.x * t.b + this.pivot.y * t.d),
        this._currentLocalID = this._localID,
        this._parentID = -1),
        this._parentID !== e._worldID) {
            var i = e.worldTransform
              , o = this.worldTransform;
            o.a = t.a * i.a + t.b * i.c,
            o.b = t.a * i.b + t.b * i.d,
            o.c = t.c * i.a + t.d * i.c,
            o.d = t.c * i.b + t.d * i.d,
            o.tx = t.tx * i.a + t.ty * i.c + i.tx,
            o.ty = t.tx * i.b + t.ty * i.d + i.ty,
            this._parentID = e._worldID,
            this._worldID++
        }
    }
    ,
    Transform.prototype.setFromMatrix = function(e) {
        e.decompose(this),
        this._localID++
    }
    ,
    Object.defineProperty(Transform.prototype, "rotation", {
        get: function() {
            return this._rotation
        },
        set: function(e) {
            this._rotation !== e && (this._rotation = e,
            this.updateSkew())
        },
        enumerable: !1,
        configurable: !0
    }),
    Transform.IDENTITY = new Transform,
    Transform);
    function Transform() {
        this.worldTransform = new Je,
        this.localTransform = new Je,
        this.position = new Ke(this.onChange,this,0,0),
        this.scale = new Ke(this.onChange,this,1,1),
        this.pivot = new Ke(this.onChange,this,0,0),
        this.skew = new Ke(this.updateSkew,this,0,0),
        this._rotation = 0,
        this._cx = 1,
        this._sx = 0,
        this._cy = 0,
        this._sy = 1,
        this._localID = 0,
        this._currentLocalID = 0,
        this._worldID = 0,
        this._parentID = 0
    }
    Z.SORTABLE_CHILDREN = !1;
    var st = (Bounds.prototype.isEmpty = function() {
        return this.minX > this.maxX || this.minY > this.maxY
    }
    ,
    Bounds.prototype.clear = function() {
        this.minX = 1 / 0,
        this.minY = 1 / 0,
        this.maxX = -1 / 0,
        this.maxY = -1 / 0
    }
    ,
    Bounds.prototype.getRectangle = function(e) {
        return this.minX > this.maxX || this.minY > this.maxY ? ze.EMPTY : ((e = e || new ze(0,0,1,1)).x = this.minX,
        e.y = this.minY,
        e.width = this.maxX - this.minX,
        e.height = this.maxY - this.minY,
        e)
    }
    ,
    Bounds.prototype.addPoint = function(e) {
        this.minX = Math.min(this.minX, e.x),
        this.maxX = Math.max(this.maxX, e.x),
        this.minY = Math.min(this.minY, e.y),
        this.maxY = Math.max(this.maxY, e.y)
    }
    ,
    Bounds.prototype.addPointMatrix = function(e, t) {
        var i = e.a
          , o = e.b
          , n = e.c
          , r = e.d
          , s = e.tx
          , a = e.ty
          , l = i * t.x + n * t.y + s
          , c = o * t.x + r * t.y + a;
        this.minX = Math.min(this.minX, l),
        this.maxX = Math.max(this.maxX, l),
        this.minY = Math.min(this.minY, c),
        this.maxY = Math.max(this.maxY, c)
    }
    ,
    Bounds.prototype.addQuad = function(e) {
        var t = this.minX
          , i = this.minY
          , o = this.maxX
          , n = this.maxY
          , r = e[0]
          , s = e[1];
        t = r < t ? r : t,
        i = s < i ? s : i,
        o = o < r ? r : o,
        n = n < s ? s : n,
        t = (r = e[2]) < t ? r : t,
        i = (s = e[3]) < i ? s : i,
        o = o < r ? r : o,
        n = n < s ? s : n,
        t = (r = e[4]) < t ? r : t,
        i = (s = e[5]) < i ? s : i,
        o = o < r ? r : o,
        n = n < s ? s : n,
        t = (r = e[6]) < t ? r : t,
        i = (s = e[7]) < i ? s : i,
        o = o < r ? r : o,
        n = n < s ? s : n,
        this.minX = t,
        this.minY = i,
        this.maxX = o,
        this.maxY = n
    }
    ,
    Bounds.prototype.addFrame = function(e, t, i, o, n) {
        this.addFrameMatrix(e.worldTransform, t, i, o, n)
    }
    ,
    Bounds.prototype.addFrameMatrix = function(e, t, i, o, n) {
        var r = e.a
          , s = e.b
          , a = e.c
          , l = e.d
          , c = e.tx
          , u = e.ty
          , d = this.minX
          , h = this.minY
          , p = this.maxX
          , _ = this.maxY
          , f = r * t + a * i + c
          , m = s * t + l * i + u;
        d = f < d ? f : d,
        h = m < h ? m : h,
        p = p < f ? f : p,
        _ = _ < m ? m : _,
        d = (f = r * o + a * i + c) < d ? f : d,
        h = (m = s * o + l * i + u) < h ? m : h,
        p = p < f ? f : p,
        _ = _ < m ? m : _,
        d = (f = r * t + a * n + c) < d ? f : d,
        h = (m = s * t + l * n + u) < h ? m : h,
        p = p < f ? f : p,
        _ = _ < m ? m : _,
        d = (f = r * o + a * n + c) < d ? f : d,
        h = (m = s * o + l * n + u) < h ? m : h,
        p = p < f ? f : p,
        _ = _ < m ? m : _,
        this.minX = d,
        this.minY = h,
        this.maxX = p,
        this.maxY = _
    }
    ,
    Bounds.prototype.addVertexData = function(e, t, i) {
        for (var o = this.minX, n = this.minY, r = this.maxX, s = this.maxY, a = t; a < i; a += 2) {
            var l = e[a]
              , c = e[a + 1];
            o = l < o ? l : o,
            n = c < n ? c : n,
            r = r < l ? l : r,
            s = s < c ? c : s
        }
        this.minX = o,
        this.minY = n,
        this.maxX = r,
        this.maxY = s
    }
    ,
    Bounds.prototype.addVertices = function(e, t, i, o) {
        this.addVerticesMatrix(e.worldTransform, t, i, o)
    }
    ,
    Bounds.prototype.addVerticesMatrix = function(e, t, i, o, n, r) {
        void 0 === n && (n = 0),
        void 0 === r && (r = n);
        for (var s = e.a, a = e.b, l = e.c, c = e.d, u = e.tx, d = e.ty, h = this.minX, p = this.minY, _ = this.maxX, f = this.maxY, m = i; m < o; m += 2) {
            var T = t[m]
              , v = t[m + 1]
              , y = s * T + l * v + u
              , g = c * v + a * T + d;
            h = Math.min(h, y - n),
            _ = Math.max(_, y + n),
            p = Math.min(p, g - r),
            f = Math.max(f, g + r)
        }
        this.minX = h,
        this.minY = p,
        this.maxX = _,
        this.maxY = f
    }
    ,
    Bounds.prototype.addBounds = function(e) {
        var t = this.minX
          , i = this.minY
          , o = this.maxX
          , n = this.maxY;
        this.minX = e.minX < t ? e.minX : t,
        this.minY = e.minY < i ? e.minY : i,
        this.maxX = e.maxX > o ? e.maxX : o,
        this.maxY = e.maxY > n ? e.maxY : n
    }
    ,
    Bounds.prototype.addBoundsMask = function(e, t) {
        var i = e.minX > t.minX ? e.minX : t.minX
          , o = e.minY > t.minY ? e.minY : t.minY
          , n = e.maxX < t.maxX ? e.maxX : t.maxX
          , r = e.maxY < t.maxY ? e.maxY : t.maxY;
        if (i <= n && o <= r) {
            var s = this.minX
              , a = this.minY
              , l = this.maxX
              , c = this.maxY;
            this.minX = i < s ? i : s,
            this.minY = o < a ? o : a,
            this.maxX = l < n ? n : l,
            this.maxY = c < r ? r : c
        }
    }
    ,
    Bounds.prototype.addBoundsMatrix = function(e, t) {
        this.addFrameMatrix(t, e.minX, e.minY, e.maxX, e.maxY)
    }
    ,
    Bounds.prototype.addBoundsArea = function(e, t) {
        var i = e.minX > t.x ? e.minX : t.x
          , o = e.minY > t.y ? e.minY : t.y
          , n = e.maxX < t.x + t.width ? e.maxX : t.x + t.width
          , r = e.maxY < t.y + t.height ? e.maxY : t.y + t.height;
        if (i <= n && o <= r) {
            var s = this.minX
              , a = this.minY
              , l = this.maxX
              , c = this.maxY;
            this.minX = i < s ? i : s,
            this.minY = o < a ? o : a,
            this.maxX = l < n ? n : l,
            this.maxY = c < r ? r : c
        }
    }
    ,
    Bounds.prototype.pad = function(e, t) {
        void 0 === e && (e = 0),
        void 0 === t && (t = e),
        this.isEmpty() || (this.minX -= e,
        this.maxX += e,
        this.minY -= t,
        this.maxY += t)
    }
    ,
    Bounds.prototype.addFramePad = function(e, t, i, o, n, r) {
        e -= n,
        t -= r,
        i += n,
        o += r,
        this.minX = this.minX < e ? this.minX : e,
        this.maxX = this.maxX > i ? this.maxX : i,
        this.minY = this.minY < t ? this.minY : t,
        this.maxY = this.maxY > o ? this.maxY : o
    }
    ,
    Bounds);
    function Bounds() {
        this.minX = 1 / 0,
        this.minY = 1 / 0,
        this.maxX = -1 / 0,
        this.maxY = -1 / 0,
        this.rect = null,
        this.updateID = -1
    }
    var at = function(e, t) {
        return (at = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$j(e, t) {
        function __() {
            this.constructor = e
        }
        at(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    var lt, ct = (__extends$j(DisplayObject, lt = te),
    DisplayObject.mixin = function(e) {
        for (var t = Object.keys(e), i = 0; i < t.length; ++i) {
            var o = t[i];
            Object.defineProperty(DisplayObject.prototype, o, Object.getOwnPropertyDescriptor(e, o))
        }
    }
    ,
    Object.defineProperty(DisplayObject.prototype, "destroyed", {
        get: function() {
            return this._destroyed
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplayObject.prototype._recursivePostUpdateTransform = function() {
        this.parent ? (this.parent._recursivePostUpdateTransform(),
        this.transform.updateTransform(this.parent.transform)) : this.transform.updateTransform(this._tempDisplayObjectParent.transform)
    }
    ,
    DisplayObject.prototype.updateTransform = function() {
        this._boundsID++,
        this.transform.updateTransform(this.parent.transform),
        this.worldAlpha = this.alpha * this.parent.worldAlpha
    }
    ,
    DisplayObject.prototype.getBounds = function(e, t) {
        return e || (this.parent ? (this._recursivePostUpdateTransform(),
        this.updateTransform()) : (this.parent = this._tempDisplayObjectParent,
        this.updateTransform(),
        this.parent = null)),
        this._bounds.updateID !== this._boundsID && (this.calculateBounds(),
        this._bounds.updateID = this._boundsID),
        t || (this._boundsRect || (this._boundsRect = new ze),
        t = this._boundsRect),
        this._bounds.getRectangle(t)
    }
    ,
    DisplayObject.prototype.getLocalBounds = function(e) {
        e || (this._localBoundsRect || (this._localBoundsRect = new ze),
        e = this._localBoundsRect),
        this._localBounds || (this._localBounds = new st);
        var t = this.transform
          , i = this.parent;
        this.parent = null,
        this.transform = this._tempDisplayObjectParent.transform;
        var o = this._bounds
          , n = this._boundsID;
        this._bounds = this._localBounds;
        var r = this.getBounds(!1, e);
        return this.parent = i,
        this.transform = t,
        this._bounds = o,
        this._bounds.updateID += this._boundsID - n,
        r
    }
    ,
    DisplayObject.prototype.toGlobal = function(e, t, i) {
        return void 0 === i && (i = !1),
        i || (this._recursivePostUpdateTransform(),
        this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent,
        this.displayObjectUpdateTransform(),
        this.parent = null)),
        this.worldTransform.apply(e, t)
    }
    ,
    DisplayObject.prototype.toLocal = function(e, t, i, o) {
        return t && (e = t.toGlobal(e, i, o)),
        o || (this._recursivePostUpdateTransform(),
        this.parent ? this.displayObjectUpdateTransform() : (this.parent = this._tempDisplayObjectParent,
        this.displayObjectUpdateTransform(),
        this.parent = null)),
        this.worldTransform.applyInverse(e, i)
    }
    ,
    DisplayObject.prototype.setParent = function(e) {
        if (!e || !e.addChild)
            throw new Error("setParent: Argument must be a Container");
        return e.addChild(this),
        e
    }
    ,
    DisplayObject.prototype.setTransform = function(e, t, i, o, n, r, s, a, l) {
        return void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        void 0 === i && (i = 1),
        void 0 === o && (o = 1),
        void 0 === n && (n = 0),
        void 0 === r && (r = 0),
        void 0 === s && (s = 0),
        void 0 === a && (a = 0),
        void 0 === l && (l = 0),
        this.position.x = e,
        this.position.y = t,
        this.scale.x = i || 1,
        this.scale.y = o || 1,
        this.rotation = n,
        this.skew.x = r,
        this.skew.y = s,
        this.pivot.x = a,
        this.pivot.y = l,
        this
    }
    ,
    DisplayObject.prototype.destroy = function(e) {
        this.parent && this.parent.removeChild(this),
        this._destroyed = !0,
        this.transform = null,
        this.parent = null,
        this._bounds = null,
        this.mask = null,
        this.cullArea = null,
        this.filters = null,
        this.filterArea = null,
        this.hitArea = null,
        this.interactive = !1,
        this.interactiveChildren = !1,
        this.emit("destroyed"),
        this.removeAllListeners()
    }
    ,
    Object.defineProperty(DisplayObject.prototype, "_tempDisplayObjectParent", {
        get: function() {
            return null === this.tempDisplayObjectParent && (this.tempDisplayObjectParent = new dt),
            this.tempDisplayObjectParent
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplayObject.prototype.enableTempParent = function() {
        var e = this.parent;
        return this.parent = this._tempDisplayObjectParent,
        e
    }
    ,
    DisplayObject.prototype.disableTempParent = function(e) {
        this.parent = e
    }
    ,
    Object.defineProperty(DisplayObject.prototype, "x", {
        get: function() {
            return this.position.x
        },
        set: function(e) {
            this.transform.position.x = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "y", {
        get: function() {
            return this.position.y
        },
        set: function(e) {
            this.transform.position.y = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "worldTransform", {
        get: function() {
            return this.transform.worldTransform
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "localTransform", {
        get: function() {
            return this.transform.localTransform
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "position", {
        get: function() {
            return this.transform.position
        },
        set: function(e) {
            this.transform.position.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "scale", {
        get: function() {
            return this.transform.scale
        },
        set: function(e) {
            this.transform.scale.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "pivot", {
        get: function() {
            return this.transform.pivot
        },
        set: function(e) {
            this.transform.pivot.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "skew", {
        get: function() {
            return this.transform.skew
        },
        set: function(e) {
            this.transform.skew.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "rotation", {
        get: function() {
            return this.transform.rotation
        },
        set: function(e) {
            this.transform.rotation = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "angle", {
        get: function() {
            return this.transform.rotation * ke
        },
        set: function(e) {
            this.transform.rotation = e * Ge
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "zIndex", {
        get: function() {
            return this._zIndex
        },
        set: function(e) {
            this._zIndex = e,
            this.parent && (this.parent.sortDirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "worldVisible", {
        get: function() {
            var e = this;
            do {
                if (!e.visible)
                    return !1;
                e = e.parent
            } while (e);
            return !0
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(DisplayObject.prototype, "mask", {
        get: function() {
            return this._mask
        },
        set: function(e) {
            var t;
            this._mask !== e && (this._mask && (t = this._mask.isMaskData ? this._mask.maskObject : this._mask) && (t._maskRefCount--,
            0 === t._maskRefCount && (t.renderable = !0,
            t.isMask = !1)),
            this._mask = e,
            !this._mask || (t = this._mask.isMaskData ? this._mask.maskObject : this._mask) && (0 === t._maskRefCount && (t.renderable = !1,
            t.isMask = !0),
            t._maskRefCount++))
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplayObject);
    function DisplayObject() {
        var e = lt.call(this) || this;
        return e.tempDisplayObjectParent = null,
        e.transform = new rt,
        e.alpha = 1,
        e.visible = !0,
        e.renderable = !0,
        e.cullable = !1,
        e.cullArea = null,
        e.parent = null,
        e.worldAlpha = 1,
        e._lastSortedIndex = 0,
        e._zIndex = 0,
        e.filterArea = null,
        e.filters = null,
        e._enabledFilters = null,
        e._bounds = new st,
        e._localBounds = null,
        e._boundsID = 0,
        e._boundsRect = null,
        e._localBoundsRect = null,
        e._mask = null,
        e._maskRefCount = 0,
        e._destroyed = !1,
        e.isSprite = !1,
        e.isMask = !1,
        e
    }
    var ut, dt = (__extends$j(TemporaryDisplayObject, ut = ct),
    TemporaryDisplayObject);
    function TemporaryDisplayObject() {
        var e = null !== ut && ut.apply(this, arguments) || this;
        return e.sortDirty = null,
        e
    }
    function sortChildren(e, t) {
        return e.zIndex === t.zIndex ? e._lastSortedIndex - t._lastSortedIndex : e.zIndex - t.zIndex
    }
    ct.prototype.displayObjectUpdateTransform = ct.prototype.updateTransform;
    var ht, pt = (__extends$j(Container, ht = ct),
    Container.prototype.onChildrenChange = function(e) {}
    ,
    Container.prototype.addChild = function() {
        for (var e = arguments, t = [], i = 0; i < arguments.length; i++)
            t[i] = e[i];
        if (1 < t.length)
            for (var o = 0; o < t.length; o++)
                this.addChild(t[o]);
        else {
            var n = t[0];
            n.parent && n.parent.removeChild(n),
            (n.parent = this).sortDirty = !0,
            n.transform._parentID = -1,
            this.children.push(n),
            this._boundsID++,
            this.onChildrenChange(this.children.length - 1),
            this.emit("childAdded", n, this, this.children.length - 1),
            n.emit("added", this)
        }
        return t[0]
    }
    ,
    Container.prototype.addChildAt = function(e, t) {
        if (t < 0 || t > this.children.length)
            throw new Error(e + "addChildAt: The index " + t + " supplied is out of bounds " + this.children.length);
        return e.parent && e.parent.removeChild(e),
        (e.parent = this).sortDirty = !0,
        e.transform._parentID = -1,
        this.children.splice(t, 0, e),
        this._boundsID++,
        this.onChildrenChange(t),
        e.emit("added", this),
        this.emit("childAdded", e, this, t),
        e
    }
    ,
    Container.prototype.swapChildren = function(e, t) {
        if (e !== t) {
            var i = this.getChildIndex(e)
              , o = this.getChildIndex(t);
            this.children[i] = t,
            this.children[o] = e,
            this.onChildrenChange(i < o ? i : o)
        }
    }
    ,
    Container.prototype.getChildIndex = function(e) {
        var t = this.children.indexOf(e);
        if (-1 === t)
            throw new Error("The supplied DisplayObject must be a child of the caller");
        return t
    }
    ,
    Container.prototype.setChildIndex = function(e, t) {
        if (t < 0 || t >= this.children.length)
            throw new Error("The index " + t + " supplied is out of bounds " + this.children.length);
        var i = this.getChildIndex(e);
        removeItems(this.children, i, 1),
        this.children.splice(t, 0, e),
        this.onChildrenChange(t)
    }
    ,
    Container.prototype.getChildAt = function(e) {
        if (e < 0 || e >= this.children.length)
            throw new Error("getChildAt: Index (" + e + ") does not exist.");
        return this.children[e]
    }
    ,
    Container.prototype.removeChild = function() {
        for (var e = arguments, t = [], i = 0; i < arguments.length; i++)
            t[i] = e[i];
        if (1 < t.length)
            for (var o = 0; o < t.length; o++)
                this.removeChild(t[o]);
        else {
            var n = t[0]
              , r = this.children.indexOf(n);
            if (-1 === r)
                return null;
            n.parent = null,
            n.transform._parentID = -1,
            removeItems(this.children, r, 1),
            this._boundsID++,
            this.onChildrenChange(r),
            n.emit("removed", this),
            this.emit("childRemoved", n, this, r)
        }
        return t[0]
    }
    ,
    Container.prototype.removeChildAt = function(e) {
        var t = this.getChildAt(e);
        return t.parent = null,
        t.transform._parentID = -1,
        removeItems(this.children, e, 1),
        this._boundsID++,
        this.onChildrenChange(e),
        t.emit("removed", this),
        this.emit("childRemoved", t, this, e),
        t
    }
    ,
    Container.prototype.removeChildren = function(e, t) {
        void 0 === e && (e = 0),
        void 0 === t && (t = this.children.length);
        var i, o = e, n = t - o;
        if (0 < n && n <= t) {
            i = this.children.splice(o, n);
            for (var r = 0; r < i.length; ++r)
                i[r].parent = null,
                i[r].transform && (i[r].transform._parentID = -1);
            for (this._boundsID++,
            this.onChildrenChange(e),
            r = 0; r < i.length; ++r)
                i[r].emit("removed", this),
                this.emit("childRemoved", i[r], this, r);
            return i
        }
        if (0 == n && 0 === this.children.length)
            return [];
        throw new RangeError("removeChildren: numeric values are outside the acceptable range.")
    }
    ,
    Container.prototype.sortChildren = function() {
        for (var e = !1, t = 0, i = this.children.length; t < i; ++t) {
            var o = this.children[t];
            o._lastSortedIndex = t,
            e || 0 === o.zIndex || (e = !0)
        }
        e && 1 < this.children.length && this.children.sort(sortChildren),
        this.sortDirty = !1
    }
    ,
    Container.prototype.updateTransform = function() {
        this.sortableChildren && this.sortDirty && this.sortChildren(),
        this._boundsID++,
        this.transform.updateTransform(this.parent.transform),
        this.worldAlpha = this.alpha * this.parent.worldAlpha;
        for (var e = 0, t = this.children.length; e < t; ++e) {
            var i = this.children[e];
            i.visible && i.updateTransform()
        }
    }
    ,
    Container.prototype.calculateBounds = function() {
        this._bounds.clear(),
        this._calculateBounds();
        for (var e = 0; e < this.children.length; e++) {
            var t = this.children[e];
            if (t.visible && t.renderable)
                if (t.calculateBounds(),
                t._mask) {
                    var i = t._mask.isMaskData ? t._mask.maskObject : t._mask;
                    i ? (i.calculateBounds(),
                    this._bounds.addBoundsMask(t._bounds, i._bounds)) : this._bounds.addBounds(t._bounds)
                } else
                    t.filterArea ? this._bounds.addBoundsArea(t._bounds, t.filterArea) : this._bounds.addBounds(t._bounds)
        }
        this._bounds.updateID = this._boundsID
    }
    ,
    Container.prototype.getLocalBounds = function(e, t) {
        void 0 === t && (t = !1);
        var i = ht.prototype.getLocalBounds.call(this, e);
        if (!t)
            for (var o = 0, n = this.children.length; o < n; ++o) {
                var r = this.children[o];
                r.visible && r.updateTransform()
            }
        return i
    }
    ,
    Container.prototype._calculateBounds = function() {}
    ,
    Container.prototype._renderWithCulling = function(e) {
        var t = e.renderTexture.sourceFrame;
        if (0 < t.width && 0 < t.height) {
            var i, o;
            if (this.cullArea ? (i = this.cullArea,
            o = this.worldTransform) : this._render !== Container.prototype._render && (i = this.getBounds(!0)),
            i && t.intersects(i, o))
                this._render(e);
            else if (this.cullArea)
                return;
            for (var n = 0, r = this.children.length; n < r; ++n) {
                var s = this.children[n]
                  , a = s.cullable;
                s.cullable = a || !this.cullArea,
                s.render(e),
                s.cullable = a
            }
        }
    }
    ,
    Container.prototype.render = function(e) {
        if (this.visible && !(this.worldAlpha <= 0) && this.renderable)
            if (this._mask || this.filters && this.filters.length)
                this.renderAdvanced(e);
            else if (this.cullable)
                this._renderWithCulling(e);
            else {
                this._render(e);
                for (var t = 0, i = this.children.length; t < i; ++t)
                    this.children[t].render(e)
            }
    }
    ,
    Container.prototype.renderAdvanced = function(e) {
        var t = this.filters
          , i = this._mask;
        if (t) {
            this._enabledFilters || (this._enabledFilters = []);
            for (var o = this._enabledFilters.length = 0; o < t.length; o++)
                t[o].enabled && this._enabledFilters.push(t[o])
        }
        var n = t && this._enabledFilters && this._enabledFilters.length || i && (!i.isMaskData || i.enabled && (i.autoDetect || i.type !== ne.MASK_TYPES.NONE));
        if (n && e.batch.flush(),
        t && this._enabledFilters && this._enabledFilters.length && e.filter.push(this, this._enabledFilters),
        i && e.mask.push(this, this._mask),
        this.cullable)
            this._renderWithCulling(e);
        else {
            this._render(e),
            o = 0;
            for (var r = this.children.length; o < r; ++o)
                this.children[o].render(e)
        }
        n && e.batch.flush(),
        i && e.mask.pop(this),
        t && this._enabledFilters && this._enabledFilters.length && e.filter.pop()
    }
    ,
    Container.prototype._render = function(e) {}
    ,
    Container.prototype.destroy = function(e) {
        ht.prototype.destroy.call(this),
        this.sortDirty = !1;
        var t = "boolean" == typeof e ? e : e && e.children
          , i = this.removeChildren(0, this.children.length);
        if (t)
            for (var o = 0; o < i.length; ++o)
                i[o].destroy(e)
    }
    ,
    Object.defineProperty(Container.prototype, "width", {
        get: function() {
            return this.scale.x * this.getLocalBounds().width
        },
        set: function(e) {
            var t = this.getLocalBounds().width;
            this.scale.x = 0 !== t ? e / t : 1,
            this._width = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Container.prototype, "height", {
        get: function() {
            return this.scale.y * this.getLocalBounds().height
        },
        set: function(e) {
            var t = this.getLocalBounds().height;
            this.scale.y = 0 !== t ? e / t : 1,
            this._height = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Container);
    function Container() {
        var e = ht.call(this) || this;
        return e.children = [],
        e.sortableChildren = Z.SORTABLE_CHILDREN,
        e.sortDirty = !1,
        e
    }
    pt.prototype.containerUpdateTransform = pt.prototype.updateTransform;
    var _t, ft = function() {
        return (ft = Object.assign || function __assign(e) {
            for (var t, i = arguments, o = 1, n = arguments.length; o < n; o++)
                for (var r in t = i[o])
                    Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
            return e
        }
        ).apply(this, arguments)
    };
    ne.ExtensionType = void 0,
    (_t = ne.ExtensionType || (ne.ExtensionType = {})).Application = "application",
    _t.RendererPlugin = "renderer-webgl-plugin",
    _t.CanvasRendererPlugin = "renderer-canvas-plugin",
    _t.Loader = "loader",
    _t.LoadParser = "load-parser",
    _t.ResolveParser = "resolve-parser",
    _t.CacheParser = "cache-parser",
    _t.DetectionParser = "detection-parser";
    function Md(e) {
        if ("function" == typeof e || "object" == typeof e && e.extension) {
            if (!e.extension)
                throw new Error("Extension class must have an extension object");
            var t = "object" != typeof e.extension ? {
                type: e.extension
            } : e.extension;
            e = ft(ft({}, t), {
                ref: e
            })
        }
        if ("object" != typeof e)
            throw new Error("Invalid extension type");
        return "string" == typeof (e = ft({}, e)).type && (e.type = [e.type]),
        e
    }
    var mt, Tt = {
        _addHandlers: null,
        _removeHandlers: null,
        _queue: {},
        remove: function() {
            for (var e = arguments, n = this, t = [], i = 0; i < arguments.length; i++)
                t[i] = e[i];
            return t.map(Md).forEach(function(o) {
                o.type.forEach(function(e) {
                    var t, i;
                    return null === (i = (t = n._removeHandlers)[e]) || void 0 === i ? void 0 : i.call(t, o)
                })
            }),
            this
        },
        add: function() {
            for (var e = arguments, n = this, t = [], i = 0; i < arguments.length; i++)
                t[i] = e[i];
            return t.map(Md).forEach(function(o) {
                o.type.forEach(function(e) {
                    var t = n._addHandlers
                      , i = n._queue;
                    t[e] ? t[e](o) : (i[e] = i[e] || [],
                    i[e].push(o))
                })
            }),
            this
        },
        handle: function(e, t, i) {
            var o = this._addHandlers = this._addHandlers || {}
              , n = this._removeHandlers = this._removeHandlers || {};
            if (o[e] || n[e])
                throw new Error("Extension type " + e + " already has a handler");
            o[e] = t,
            n[e] = i;
            var r = this._queue;
            return r[e] && (r[e].forEach(function(e) {
                return t(e)
            }),
            delete r[e]),
            this
        },
        handleByMap: function(e, t) {
            return this.handle(e, function(e) {
                t[e.name] = e.ref
            }, function(e) {
                delete t[e.name]
            })
        },
        handleByList: function(o, n) {
            return this.handle(o, function(e) {
                var t, i;
                n.includes(e.ref) || (n.push(e.ref),
                o === ne.ExtensionType.Loader && (null === (i = (t = e.ref).add) || void 0 === i || i.call(t)))
            }, function(e) {
                var t = n.indexOf(e.ref);
                -1 !== t && n.splice(t, 1)
            })
        }
    }, vt = (Runner.prototype.emit = function(e, t, i, o, n, r, s, a) {
        if (8 < arguments.length)
            throw new Error("max arguments reached");
        var l = this.name
          , c = this.items;
        this._aliasCount++;
        for (var u = 0, d = c.length; u < d; u++)
            c[u][l](e, t, i, o, n, r, s, a);
        return c === this.items && this._aliasCount--,
        this
    }
    ,
    Runner.prototype.ensureNonAliasedItems = function() {
        0 < this._aliasCount && 1 < this.items.length && (this._aliasCount = 0,
        this.items = this.items.slice(0))
    }
    ,
    Runner.prototype.add = function(e) {
        return e[this._name] && (this.ensureNonAliasedItems(),
        this.remove(e),
        this.items.push(e)),
        this
    }
    ,
    Runner.prototype.remove = function(e) {
        var t = this.items.indexOf(e);
        return -1 !== t && (this.ensureNonAliasedItems(),
        this.items.splice(t, 1)),
        this
    }
    ,
    Runner.prototype.contains = function(e) {
        return -1 !== this.items.indexOf(e)
    }
    ,
    Runner.prototype.removeAll = function() {
        return this.ensureNonAliasedItems(),
        this.items.length = 0,
        this
    }
    ,
    Runner.prototype.destroy = function() {
        this.removeAll(),
        this.items = null,
        this._name = null
    }
    ,
    Object.defineProperty(Runner.prototype, "empty", {
        get: function() {
            return 0 === this.items.length
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Runner.prototype, "name", {
        get: function() {
            return this._name
        },
        enumerable: !1,
        configurable: !0
    }),
    Runner);
    function Runner(e) {
        this.items = [],
        this._name = e,
        this._aliasCount = 0
    }
    Object.defineProperties(vt.prototype, {
        dispatch: {
            value: vt.prototype.emit
        },
        run: {
            value: vt.prototype.emit
        }
    }),
    Z.TARGET_FPMS = .06,
    ne.UPDATE_PRIORITY = void 0,
    (mt = ne.UPDATE_PRIORITY || (ne.UPDATE_PRIORITY = {}))[mt.INTERACTION = 50] = "INTERACTION",
    mt[mt.HIGH = 25] = "HIGH",
    mt[mt.NORMAL = 0] = "NORMAL",
    mt[mt.LOW = -25] = "LOW",
    mt[mt.UTILITY = -50] = "UTILITY";
    var yt = (TickerListener.prototype.match = function(e, t) {
        return void 0 === t && (t = null),
        this.fn === e && this.context === t
    }
    ,
    TickerListener.prototype.emit = function(e) {
        this.fn && (this.context ? this.fn.call(this.context, e) : this.fn(e));
        var t = this.next;
        return this.once && this.destroy(!0),
        this._destroyed && (this.next = null),
        t
    }
    ,
    TickerListener.prototype.connect = function(e) {
        (this.previous = e).next && (e.next.previous = this),
        this.next = e.next,
        e.next = this
    }
    ,
    TickerListener.prototype.destroy = function(e) {
        void 0 === e && (e = !1),
        this._destroyed = !0,
        this.fn = null,
        this.context = null,
        this.previous && (this.previous.next = this.next),
        this.next && (this.next.previous = this.previous);
        var t = this.next;
        return this.next = e ? null : t,
        this.previous = null,
        t
    }
    ,
    TickerListener);
    function TickerListener(e, t, i, o) {
        void 0 === t && (t = null),
        void 0 === i && (i = 0),
        void 0 === o && (o = !1),
        this.next = null,
        this.previous = null,
        this._destroyed = !1,
        this.fn = e,
        this.context = t,
        this.priority = i,
        this.once = o
    }
    var gt = (Ticker.prototype._requestIfNeeded = function() {
        null === this._requestId && this._head.next && (this.lastTime = performance.now(),
        this._lastFrame = this.lastTime,
        this._requestId = requestAnimationFrame(this._tick))
    }
    ,
    Ticker.prototype._cancelIfNeeded = function() {
        null !== this._requestId && (cancelAnimationFrame(this._requestId),
        this._requestId = null)
    }
    ,
    Ticker.prototype._startIfPossible = function() {
        this.started ? this._requestIfNeeded() : this.autoStart && this.start()
    }
    ,
    Ticker.prototype.add = function(e, t, i) {
        return void 0 === i && (i = ne.UPDATE_PRIORITY.NORMAL),
        this._addListener(new yt(e,t,i))
    }
    ,
    Ticker.prototype.addOnce = function(e, t, i) {
        return void 0 === i && (i = ne.UPDATE_PRIORITY.NORMAL),
        this._addListener(new yt(e,t,i,!0))
    }
    ,
    Ticker.prototype._addListener = function(e) {
        var t = this._head.next
          , i = this._head;
        if (t) {
            for (; t; ) {
                if (e.priority > t.priority) {
                    e.connect(i);
                    break
                }
                t = (i = t).next
            }
            e.previous || e.connect(i)
        } else
            e.connect(i);
        return this._startIfPossible(),
        this
    }
    ,
    Ticker.prototype.remove = function(e, t) {
        for (var i = this._head.next; i; )
            i = i.match(e, t) ? i.destroy() : i.next;
        return this._head.next || this._cancelIfNeeded(),
        this
    }
    ,
    Object.defineProperty(Ticker.prototype, "count", {
        get: function() {
            if (!this._head)
                return 0;
            for (var e = 0, t = this._head; t = t.next; )
                e++;
            return e
        },
        enumerable: !1,
        configurable: !0
    }),
    Ticker.prototype.start = function() {
        this.started || (this.started = !0,
        this._requestIfNeeded())
    }
    ,
    Ticker.prototype.stop = function() {
        this.started && (this.started = !1,
        this._cancelIfNeeded())
    }
    ,
    Ticker.prototype.destroy = function() {
        if (!this._protected) {
            this.stop();
            for (var e = this._head.next; e; )
                e = e.destroy(!0);
            this._head.destroy(),
            this._head = null
        }
    }
    ,
    Ticker.prototype.update = function(e) {
        var t;
        if (void 0 === e && (e = performance.now()),
        e > this.lastTime) {
            if ((t = this.elapsedMS = e - this.lastTime) > this._maxElapsedMS && (t = this._maxElapsedMS),
            t *= this.speed,
            this._minElapsedMS) {
                var i = e - this._lastFrame | 0;
                if (i < this._minElapsedMS)
                    return;
                this._lastFrame = e - i % this._minElapsedMS
            }
            this.deltaMS = t,
            this.deltaTime = this.deltaMS * Z.TARGET_FPMS;
            for (var o = this._head, n = o.next; n; )
                n = n.emit(this.deltaTime);
            o.next || this._cancelIfNeeded()
        } else
            this.deltaTime = this.deltaMS = this.elapsedMS = 0;
        this.lastTime = e
    }
    ,
    Object.defineProperty(Ticker.prototype, "FPS", {
        get: function() {
            return 1e3 / this.elapsedMS
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker.prototype, "minFPS", {
        get: function() {
            return 1e3 / this._maxElapsedMS
        },
        set: function(e) {
            var t = Math.min(this.maxFPS, e)
              , i = Math.min(Math.max(0, t) / 1e3, Z.TARGET_FPMS);
            this._maxElapsedMS = 1 / i
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker.prototype, "maxFPS", {
        get: function() {
            return this._minElapsedMS ? Math.round(1e3 / this._minElapsedMS) : 0
        },
        set: function(e) {
            if (0 === e)
                this._minElapsedMS = 0;
            else {
                var t = Math.max(this.minFPS, e);
                this._minElapsedMS = 1 / (t / 1e3)
            }
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker, "shared", {
        get: function() {
            if (!Ticker._shared) {
                var e = Ticker._shared = new Ticker;
                e.autoStart = !0,
                e._protected = !0
            }
            return Ticker._shared
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Ticker, "system", {
        get: function() {
            if (!Ticker._system) {
                var e = Ticker._system = new Ticker;
                e.autoStart = !0,
                e._protected = !0
            }
            return Ticker._system
        },
        enumerable: !1,
        configurable: !0
    }),
    Ticker);
    function Ticker() {
        var t = this;
        this.autoStart = !1,
        this.deltaTime = 1,
        this.lastTime = -1,
        this.speed = 1,
        this.started = !1,
        this._requestId = null,
        this._maxElapsedMS = 100,
        this._minElapsedMS = 0,
        this._protected = !1,
        this._lastFrame = -1,
        this._head = new yt(null,null,1 / 0),
        this.deltaMS = 1 / Z.TARGET_FPMS,
        this.elapsedMS = 1 / Z.TARGET_FPMS,
        this._tick = function(e) {
            t._requestId = null,
            t.started && (t.update(e),
            t.started && null === t._requestId && t._head.next && (t._requestId = requestAnimationFrame(t._tick)))
        }
    }
    var wt = (TickerPlugin.init = function(e) {
        var t = this;
        e = Object.assign({
            autoStart: !0,
            sharedTicker: !1
        }, e),
        Object.defineProperty(this, "ticker", {
            set: function(e) {
                this._ticker && this._ticker.remove(this.render, this),
                (this._ticker = e) && e.add(this.render, this, ne.UPDATE_PRIORITY.LOW)
            },
            get: function() {
                return this._ticker
            }
        }),
        this.stop = function() {
            t._ticker.stop()
        }
        ,
        this.start = function() {
            t._ticker.start()
        }
        ,
        this._ticker = null,
        this.ticker = e.sharedTicker ? gt.shared : new gt,
        e.autoStart && this.start()
    }
    ,
    TickerPlugin.destroy = function() {
        if (this._ticker) {
            var e = this._ticker;
            this.ticker = null,
            e.destroy()
        }
    }
    ,
    TickerPlugin.extension = ne.ExtensionType.Application,
    TickerPlugin);
    function TickerPlugin() {}
    Z.PREFER_ENV = $.any ? ne.ENV.WEBGL : ne.ENV.WEBGL2,
    Z.STRICT_TEXTURE_CACHE = !1;
    var Ct = [];
    function autoDetectResource(e, t) {
        if (!e)
            return null;
        var i = "";
        if ("string" == typeof e) {
            var o = /\.(\w{3,4})(?:$|\?|#)/i.exec(e);
            o && (i = o[1].toLowerCase())
        }
        for (var n = Ct.length - 1; 0 <= n; --n) {
            var r = Ct[n];
            if (r.test && r.test(e, i))
                return new r(e,t)
        }
        throw new Error("Unrecognized source type to auto-detect Resource")
    }
    var St = function(e, t) {
        return (St = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$i(e, t) {
        function __() {
            this.constructor = e
        }
        St(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    var Et = function() {
        return (Et = Object.assign || function __assign(e) {
            for (var t, i = arguments, o = 1, n = arguments.length; o < n; o++)
                for (var r in t = i[o])
                    Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]);
            return e
        }
        ).apply(this, arguments)
    };
    var bt = (Resource.prototype.bind = function(e) {
        this.onResize.add(e),
        this.onUpdate.add(e),
        this.onError.add(e),
        (this._width || this._height) && this.onResize.emit(this._width, this._height)
    }
    ,
    Resource.prototype.unbind = function(e) {
        this.onResize.remove(e),
        this.onUpdate.remove(e),
        this.onError.remove(e)
    }
    ,
    Resource.prototype.resize = function(e, t) {
        e === this._width && t === this._height || (this._width = e,
        this._height = t,
        this.onResize.emit(e, t))
    }
    ,
    Object.defineProperty(Resource.prototype, "valid", {
        get: function() {
            return !!this._width && !!this._height
        },
        enumerable: !1,
        configurable: !0
    }),
    Resource.prototype.update = function() {
        this.destroyed || this.onUpdate.emit()
    }
    ,
    Resource.prototype.load = function() {
        return Promise.resolve(this)
    }
    ,
    Object.defineProperty(Resource.prototype, "width", {
        get: function() {
            return this._width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Resource.prototype, "height", {
        get: function() {
            return this._height
        },
        enumerable: !1,
        configurable: !0
    }),
    Resource.prototype.style = function(e, t, i) {
        return !1
    }
    ,
    Resource.prototype.dispose = function() {}
    ,
    Resource.prototype.destroy = function() {
        this.destroyed || (this.destroyed = !0,
        this.dispose(),
        this.onError.removeAll(),
        this.onError = null,
        this.onResize.removeAll(),
        this.onResize = null,
        this.onUpdate.removeAll(),
        this.onUpdate = null)
    }
    ,
    Resource.test = function(e, t) {
        return !1
    }
    ,
    Resource);
    function Resource(e, t) {
        void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        this._width = e,
        this._height = t,
        this.destroyed = !1,
        this.internal = !1,
        this.onResize = new vt("setRealSize"),
        this.onUpdate = new vt("update"),
        this.onError = new vt("onError")
    }
    var Vt, Ut = (__extends$i(BufferResource, Vt = bt),
    BufferResource.prototype.upload = function(e, t, i) {
        var o = e.gl;
        o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.alphaMode === ne.ALPHA_MODES.UNPACK);
        var n = t.realWidth
          , r = t.realHeight;
        return i.width === n && i.height === r ? o.texSubImage2D(t.target, 0, 0, 0, n, r, t.format, i.type, this.data) : (i.width = n,
        i.height = r,
        o.texImage2D(t.target, 0, i.internalFormat, n, r, 0, t.format, i.type, this.data)),
        !0
    }
    ,
    BufferResource.prototype.dispose = function() {
        this.data = null
    }
    ,
    BufferResource.test = function(e) {
        return e instanceof Float32Array || e instanceof Uint8Array || e instanceof Uint32Array
    }
    ,
    BufferResource);
    function BufferResource(e, t) {
        var i = this
          , o = t || {}
          , n = o.width
          , r = o.height;
        if (!n || !r)
            throw new Error("BufferResource width or height invalid");
        return (i = Vt.call(this, n, r) || this).data = e,
        i
    }
    var It, At = {
        scaleMode: ne.SCALE_MODES.NEAREST,
        format: ne.FORMATS.RGBA,
        alphaMode: ne.ALPHA_MODES.NPM
    }, Rt = (__extends$i(BaseTexture, It = te),
    Object.defineProperty(BaseTexture.prototype, "realWidth", {
        get: function() {
            return Math.round(this.width * this.resolution)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "realHeight", {
        get: function() {
            return Math.round(this.height * this.resolution)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "mipmap", {
        get: function() {
            return this._mipmap
        },
        set: function(e) {
            this._mipmap !== e && (this._mipmap = e,
            this.dirtyStyleId++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "scaleMode", {
        get: function() {
            return this._scaleMode
        },
        set: function(e) {
            this._scaleMode !== e && (this._scaleMode = e,
            this.dirtyStyleId++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BaseTexture.prototype, "wrapMode", {
        get: function() {
            return this._wrapMode
        },
        set: function(e) {
            this._wrapMode !== e && (this._wrapMode = e,
            this.dirtyStyleId++)
        },
        enumerable: !1,
        configurable: !0
    }),
    BaseTexture.prototype.setStyle = function(e, t) {
        var i;
        return void 0 !== e && e !== this.scaleMode && (this.scaleMode = e,
        i = !0),
        void 0 !== t && t !== this.mipmap && (this.mipmap = t,
        i = !0),
        i && this.dirtyStyleId++,
        this
    }
    ,
    BaseTexture.prototype.setSize = function(e, t, i) {
        return i = i || this.resolution,
        this.setRealSize(e * i, t * i, i)
    }
    ,
    BaseTexture.prototype.setRealSize = function(e, t, i) {
        return this.resolution = i || this.resolution,
        this.width = Math.round(e) / this.resolution,
        this.height = Math.round(t) / this.resolution,
        this._refreshPOT(),
        this.update(),
        this
    }
    ,
    BaseTexture.prototype._refreshPOT = function() {
        this.isPowerOfTwo = isPow2(this.realWidth) && isPow2(this.realHeight)
    }
    ,
    BaseTexture.prototype.setResolution = function(e) {
        var t = this.resolution;
        return t === e || (this.resolution = e,
        this.valid && (this.width = Math.round(this.width * t) / e,
        this.height = Math.round(this.height * t) / e,
        this.emit("update", this)),
        this._refreshPOT()),
        this
    }
    ,
    BaseTexture.prototype.setResource = function(e) {
        if (this.resource === e)
            return this;
        if (this.resource)
            throw new Error("Resource can be set only once");
        return e.bind(this),
        this.resource = e,
        this
    }
    ,
    BaseTexture.prototype.update = function() {
        this.valid ? (this.dirtyId++,
        this.dirtyStyleId++,
        this.emit("update", this)) : 0 < this.width && 0 < this.height && (this.valid = !0,
        this.emit("loaded", this),
        this.emit("update", this))
    }
    ,
    BaseTexture.prototype.onError = function(e) {
        this.emit("error", this, e)
    }
    ,
    BaseTexture.prototype.destroy = function() {
        this.resource && (this.resource.unbind(this),
        this.resource.internal && this.resource.destroy(),
        this.resource = null),
        this.cacheId && (delete De[this.cacheId],
        delete Oe[this.cacheId],
        this.cacheId = null),
        this.dispose(),
        BaseTexture.removeFromCache(this),
        this.textureCacheIds = null,
        this.destroyed = !0
    }
    ,
    BaseTexture.prototype.dispose = function() {
        this.emit("dispose", this)
    }
    ,
    BaseTexture.prototype.castToBaseTexture = function() {
        return this
    }
    ,
    BaseTexture.from = function(e, t, i) {
        void 0 === i && (i = Z.STRICT_TEXTURE_CACHE);
        var o = "string" == typeof e
          , n = null;
        if (o)
            n = e;
        else {
            if (!e._pixiId) {
                var r = t && t.pixiIdPrefix || "pixiid";
                e._pixiId = r + "_" + uid()
            }
            n = e._pixiId
        }
        var s = De[n];
        if (o && i && !s)
            throw new Error('The cacheId "' + n + '" does not exist in BaseTextureCache.');
        return s || ((s = new BaseTexture(e,t)).cacheId = n,
        BaseTexture.addToCache(s, n)),
        s
    }
    ,
    BaseTexture.fromBuffer = function(e, t, i, o) {
        e = e || new Float32Array(t * i * 4);
        var n = new Ut(e,{
            width: t,
            height: i
        })
          , r = e instanceof Float32Array ? ne.TYPES.FLOAT : ne.TYPES.UNSIGNED_BYTE;
        return new BaseTexture(n,Object.assign({}, At, o || {
            width: t,
            height: i,
            type: r
        }))
    }
    ,
    BaseTexture.addToCache = function(e, t) {
        t && (-1 === e.textureCacheIds.indexOf(t) && e.textureCacheIds.push(t),
        De[t] && console.warn("BaseTexture added to the cache with an id [" + t + "] that already had an entry"),
        De[t] = e)
    }
    ,
    BaseTexture.removeFromCache = function(e) {
        if ("string" == typeof e) {
            var t = De[e];
            if (t) {
                var i = t.textureCacheIds.indexOf(e);
                return -1 < i && t.textureCacheIds.splice(i, 1),
                delete De[e],
                t
            }
        } else if (e && e.textureCacheIds) {
            for (var o = 0; o < e.textureCacheIds.length; ++o)
                delete De[e.textureCacheIds[o]];
            return e.textureCacheIds.length = 0,
            e
        }
        return null
    }
    ,
    BaseTexture._globalBatch = 0,
    BaseTexture);
    function BaseTexture(e, t) {
        void 0 === e && (e = null),
        void 0 === t && (t = null);
        var i = It.call(this) || this
          , o = (t = t || {}).alphaMode
          , n = t.mipmap
          , r = t.anisotropicLevel
          , s = t.scaleMode
          , a = t.width
          , l = t.height
          , c = t.wrapMode
          , u = t.format
          , d = t.type
          , h = t.target
          , p = t.resolution
          , _ = t.resourceOptions;
        return !e || e instanceof bt || ((e = autoDetectResource(e, _)).internal = !0),
        i.resolution = p || Z.RESOLUTION,
        i.width = Math.round((a || 0) * i.resolution) / i.resolution,
        i.height = Math.round((l || 0) * i.resolution) / i.resolution,
        i._mipmap = void 0 !== n ? n : Z.MIPMAP_TEXTURES,
        i.anisotropicLevel = void 0 !== r ? r : Z.ANISOTROPIC_LEVEL,
        i._wrapMode = c || Z.WRAP_MODE,
        i._scaleMode = void 0 !== s ? s : Z.SCALE_MODE,
        i.format = u || ne.FORMATS.RGBA,
        i.type = d || ne.TYPES.UNSIGNED_BYTE,
        i.target = h || ne.TARGETS.TEXTURE_2D,
        i.alphaMode = void 0 !== o ? o : ne.ALPHA_MODES.UNPACK,
        i.uid = uid(),
        i.touched = 0,
        i.isPowerOfTwo = !1,
        i._refreshPOT(),
        i._glTextures = {},
        i.dirtyId = 0,
        i.dirtyStyleId = 0,
        i.cacheId = null,
        i.valid = 0 < a && 0 < l,
        i.textureCacheIds = [],
        i.destroyed = !1,
        i.resource = null,
        i._batchEnabled = 0,
        i._batchLocation = 0,
        i.parentTextureArray = null,
        i.setResource(e),
        i
    }
    var Pt, Ot = (__extends$i(AbstractMultiResource, Pt = bt),
    AbstractMultiResource.prototype.initFromArray = function(e, t) {
        for (var i = 0; i < this.length; i++)
            e[i] && (e[i].castToBaseTexture ? this.addBaseTextureAt(e[i].castToBaseTexture(), i) : e[i]instanceof bt ? this.addResourceAt(e[i], i) : this.addResourceAt(autoDetectResource(e[i], t), i))
    }
    ,
    AbstractMultiResource.prototype.dispose = function() {
        for (var e = 0, t = this.length; e < t; e++)
            this.items[e].destroy();
        this.items = null,
        this.itemDirtyIds = null,
        this._load = null
    }
    ,
    AbstractMultiResource.prototype.addResourceAt = function(e, t) {
        if (!this.items[t])
            throw new Error("Index " + t + " is out of bounds");
        return e.valid && !this.valid && this.resize(e.width, e.height),
        this.items[t].setResource(e),
        this
    }
    ,
    AbstractMultiResource.prototype.bind = function(e) {
        if (null !== this.baseTexture)
            throw new Error("Only one base texture per TextureArray is allowed");
        Pt.prototype.bind.call(this, e);
        for (var t = 0; t < this.length; t++)
            this.items[t].parentTextureArray = e,
            this.items[t].on("update", e.update, e)
    }
    ,
    AbstractMultiResource.prototype.unbind = function(e) {
        Pt.prototype.unbind.call(this, e);
        for (var t = 0; t < this.length; t++)
            this.items[t].parentTextureArray = null,
            this.items[t].off("update", e.update, e)
    }
    ,
    AbstractMultiResource.prototype.load = function() {
        var o = this;
        if (this._load)
            return this._load;
        var e = this.items.map(function(e) {
            return e.resource
        }).filter(function(e) {
            return e
        }).map(function(e) {
            return e.load()
        });
        return this._load = Promise.all(e).then(function() {
            var e = o.items[0]
              , t = e.realWidth
              , i = e.realHeight;
            return o.resize(t, i),
            Promise.resolve(o)
        }),
        this._load
    }
    ,
    AbstractMultiResource);
    function AbstractMultiResource(e, t) {
        var i = this
          , o = t || {}
          , n = o.width
          , r = o.height;
        (i = Pt.call(this, n, r) || this).items = [],
        i.itemDirtyIds = [];
        for (var s = 0; s < e; s++) {
            var a = new Rt;
            i.items.push(a),
            i.itemDirtyIds.push(-2)
        }
        return i.length = e,
        i._load = null,
        i.baseTexture = null,
        i
    }
    var Dt, Lt = (__extends$i(ArrayResource, Dt = Ot),
    ArrayResource.prototype.addBaseTextureAt = function(e, t) {
        if (!e.resource)
            throw new Error("ArrayResource does not support RenderTexture");
        return this.addResourceAt(e.resource, t),
        this
    }
    ,
    ArrayResource.prototype.bind = function(e) {
        Dt.prototype.bind.call(this, e),
        e.target = ne.TARGETS.TEXTURE_2D_ARRAY
    }
    ,
    ArrayResource.prototype.upload = function(e, t, i) {
        var o = this.length
          , n = this.itemDirtyIds
          , r = this.items
          , s = e.gl;
        i.dirtyId < 0 && s.texImage3D(s.TEXTURE_2D_ARRAY, 0, i.internalFormat, this._width, this._height, o, 0, t.format, i.type, null);
        for (var a = 0; a < o; a++) {
            var l = r[a];
            n[a] < l.dirtyId && (n[a] = l.dirtyId,
            l.valid && s.texSubImage3D(s.TEXTURE_2D_ARRAY, 0, 0, 0, a, l.resource.width, l.resource.height, 1, t.format, i.type, l.resource.source))
        }
        return !0
    }
    ,
    ArrayResource);
    function ArrayResource(e, t) {
        var i, o, n = this, r = t || {}, s = r.width, a = r.height;
        return o = Array.isArray(e) ? (i = e).length : e,
        n = Dt.call(this, o, {
            width: s,
            height: a
        }) || this,
        i && n.initFromArray(i, t),
        n
    }
    var Mt, xt = (__extends$i(BaseImageResource, Mt = bt),
    BaseImageResource.crossOrigin = function(e, t, i) {
        void 0 === i && 0 !== t.indexOf("data:") ? e.crossOrigin = determineCrossOrigin(t) : !1 !== i && (e.crossOrigin = "string" == typeof i ? i : "anonymous")
    }
    ,
    BaseImageResource.prototype.upload = function(e, t, i, o) {
        var n = e.gl
          , r = t.realWidth
          , s = t.realHeight;
        if ((o = o || this.source)instanceof HTMLImageElement) {
            if (!o.complete || 0 === o.naturalWidth)
                return !1
        } else if (o instanceof HTMLVideoElement && o.readyState <= 1)
            return !1;
        return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.alphaMode === ne.ALPHA_MODES.UNPACK),
        this.noSubImage || t.target !== n.TEXTURE_2D || i.width !== r || i.height !== s ? (i.width = r,
        i.height = s,
        n.texImage2D(t.target, 0, i.internalFormat, t.format, i.type, o)) : n.texSubImage2D(n.TEXTURE_2D, 0, 0, 0, t.format, i.type, o),
        !0
    }
    ,
    BaseImageResource.prototype.update = function() {
        if (!this.destroyed) {
            var e = this.source
              , t = e.naturalWidth || e.videoWidth || e.width
              , i = e.naturalHeight || e.videoHeight || e.height;
            this.resize(t, i),
            Mt.prototype.update.call(this)
        }
    }
    ,
    BaseImageResource.prototype.dispose = function() {
        this.source = null
    }
    ,
    BaseImageResource);
    function BaseImageResource(e) {
        var t = this
          , i = e
          , o = i.naturalWidth || i.videoWidth || i.width
          , n = i.naturalHeight || i.videoHeight || i.height;
        return (t = Mt.call(this, o, n) || this).source = e,
        t.noSubImage = !1,
        t
    }
    var Bt, Nt = (__extends$i(CanvasResource, Bt = xt),
    CanvasResource.test = function(e) {
        var t = globalThis.OffscreenCanvas;
        return !!(t && e instanceof t) || globalThis.HTMLCanvasElement && e instanceof HTMLCanvasElement
    }
    ,
    CanvasResource);
    function CanvasResource(e) {
        return Bt.call(this, e) || this
    }
    var Ft, kt = (__extends$i(CubeResource, Ft = Ot),
    CubeResource.prototype.bind = function(e) {
        Ft.prototype.bind.call(this, e),
        e.target = ne.TARGETS.TEXTURE_CUBE_MAP
    }
    ,
    CubeResource.prototype.addBaseTextureAt = function(e, t, i) {
        if (!this.items[t])
            throw new Error("Index " + t + " is out of bounds");
        if (!this.linkBaseTexture || e.parentTextureArray || 0 < Object.keys(e._glTextures).length) {
            if (!e.resource)
                throw new Error("CubeResource does not support copying of renderTexture.");
            this.addResourceAt(e.resource, t)
        } else
            e.target = ne.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + t,
            e.parentTextureArray = this.baseTexture,
            this.items[t] = e;
        return e.valid && !this.valid && this.resize(e.realWidth, e.realHeight),
        this.items[t] = e,
        this
    }
    ,
    CubeResource.prototype.upload = function(e, t, i) {
        for (var o = this.itemDirtyIds, n = 0; n < CubeResource.SIDES; n++) {
            var r = this.items[n];
            (o[n] < r.dirtyId || i.dirtyId < t.dirtyId) && (r.valid && r.resource ? (r.resource.upload(e, r, i),
            o[n] = r.dirtyId) : o[n] < -1 && (e.gl.texImage2D(r.target, 0, i.internalFormat, t.realWidth, t.realHeight, 0, t.format, i.type, null),
            o[n] = -1))
        }
        return !0
    }
    ,
    CubeResource.test = function(e) {
        return Array.isArray(e) && e.length === CubeResource.SIDES
    }
    ,
    CubeResource.SIDES = 6,
    CubeResource);
    function CubeResource(e, t) {
        var i = this
          , o = t || {}
          , n = o.width
          , r = o.height
          , s = o.autoLoad
          , a = o.linkBaseTexture;
        if (e && e.length !== CubeResource.SIDES)
            throw new Error("Invalid length. Got " + e.length + ", expected 6");
        i = Ft.call(this, 6, {
            width: n,
            height: r
        }) || this;
        for (var l = 0; l < CubeResource.SIDES; l++)
            i.items[l].target = ne.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X + l;
        return i.linkBaseTexture = !1 !== a,
        e && i.initFromArray(e, t),
        !1 !== s && i.load(),
        i
    }
    var Gt, jt = (__extends$i(ImageResource, Gt = xt),
    ImageResource.prototype.load = function(e) {
        var o = this;
        return this._load || (void 0 !== e && (this.createBitmap = e),
        this._load = new Promise(function(e, t) {
            var i = o.source;
            function RN() {
                o.destroyed || (i.onload = null,
                i.onerror = null,
                o.resize(i.width, i.height),
                o._load = null,
                o.createBitmap ? e(o.process()) : e(o))
            }
            o.url = i.src,
            i.complete && i.src ? RN() : (i.onload = RN,
            i.onerror = function(e) {
                t(e),
                o.onError.emit(e)
            }
            )
        }
        )),
        this._load
    }
    ,
    ImageResource.prototype.process = function() {
        var t = this
          , i = this.source;
        if (null !== this._process)
            return this._process;
        if (null !== this.bitmap || !globalThis.createImageBitmap)
            return Promise.resolve(this);
        var o = globalThis.createImageBitmap
          , e = !i.crossOrigin || "anonymous" === i.crossOrigin;
        return this._process = fetch(i.src, {
            mode: e ? "cors" : "no-cors"
        }).then(function(e) {
            return e.blob()
        }).then(function(e) {
            return o(e, 0, 0, i.width, i.height, {
                premultiplyAlpha: null === t.alphaMode || t.alphaMode === ne.ALPHA_MODES.UNPACK ? "premultiply" : "none"
            })
        }).then(function(e) {
            return t.destroyed ? Promise.reject() : (t.bitmap = e,
            t.update(),
            t._process = null,
            Promise.resolve(t))
        }),
        this._process
    }
    ,
    ImageResource.prototype.upload = function(e, t, i) {
        if ("number" == typeof this.alphaMode && (t.alphaMode = this.alphaMode),
        !this.createBitmap)
            return Gt.prototype.upload.call(this, e, t, i);
        if (!this.bitmap && (this.process(),
        !this.bitmap))
            return !1;
        if (Gt.prototype.upload.call(this, e, t, i, this.bitmap),
        !this.preserveBitmap) {
            var o = !0
              , n = t._glTextures;
            for (var r in n) {
                var s = n[r];
                if (s !== i && s.dirtyId !== t.dirtyId) {
                    o = !1;
                    break
                }
            }
            o && (this.bitmap.close && this.bitmap.close(),
            this.bitmap = null)
        }
        return !0
    }
    ,
    ImageResource.prototype.dispose = function() {
        this.source.onload = null,
        this.source.onerror = null,
        Gt.prototype.dispose.call(this),
        this.bitmap && (this.bitmap.close(),
        this.bitmap = null),
        this._process = null,
        this._load = null
    }
    ,
    ImageResource.test = function(e) {
        return "string" == typeof e || e instanceof HTMLImageElement
    }
    ,
    ImageResource);
    function ImageResource(e, t) {
        var i = this;
        if (t = t || {},
        !(e instanceof HTMLImageElement)) {
            var o = new Image;
            xt.crossOrigin(o, e, t.crossorigin),
            o.src = e,
            e = o
        }
        return i = Gt.call(this, e) || this,
        !e.complete && i._width && i._height && (i._width = 0,
        i._height = 0),
        i.url = e.src,
        i._process = null,
        i.preserveBitmap = !1,
        i.createBitmap = (void 0 !== t.createBitmap ? t.createBitmap : Z.CREATE_IMAGE_BITMAP) && !!globalThis.createImageBitmap,
        i.alphaMode = "number" == typeof t.alphaMode ? t.alphaMode : null,
        i.bitmap = null,
        i._load = null,
        !1 !== t.autoLoad && i.load(),
        i
    }
    var qt, zt = (__extends$i(SVGResource, qt = xt),
    SVGResource.prototype.load = function() {
        var t = this;
        return this._load || (this._load = new Promise(function(e) {
            if (t._resolve = function() {
                t.resize(t.source.width, t.source.height),
                e(t)
            }
            ,
            SVGResource.SVG_XML.test(t.svg.trim())) {
                if (!btoa)
                    throw new Error("Your browser doesn't support base64 conversions.");
                t.svg = "data:image/svg+xml;base64," + btoa(unescape(encodeURIComponent(t.svg)))
            }
            t._loadSvg()
        }
        )),
        this._load
    }
    ,
    SVGResource.prototype._loadSvg = function() {
        var r = this
          , s = new Image;
        xt.crossOrigin(s, this.svg, this._crossorigin),
        s.src = this.svg,
        s.onerror = function(e) {
            r._resolve && (s.onerror = null,
            r.onError.emit(e))
        }
        ,
        s.onload = function() {
            if (r._resolve) {
                var e = s.width
                  , t = s.height;
                if (!e || !t)
                    throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");
                var i = e * r.scale
                  , o = t * r.scale;
                (r._overrideWidth || r._overrideHeight) && (i = r._overrideWidth || r._overrideHeight / t * e,
                o = r._overrideHeight || r._overrideWidth / e * t),
                i = Math.round(i),
                o = Math.round(o);
                var n = r.source;
                n.width = i,
                n.height = o,
                n._pixiId = "canvas_" + uid(),
                n.getContext("2d").drawImage(s, 0, 0, e, t, 0, 0, i, o),
                r._resolve(),
                r._resolve = null
            }
        }
    }
    ,
    SVGResource.getSize = function(e) {
        var t = SVGResource.SVG_SIZE.exec(e)
          , i = {};
        return t && (i[t[1]] = Math.round(parseFloat(t[3])),
        i[t[5]] = Math.round(parseFloat(t[7]))),
        i
    }
    ,
    SVGResource.prototype.dispose = function() {
        qt.prototype.dispose.call(this),
        this._resolve = null,
        this._crossorigin = null
    }
    ,
    SVGResource.test = function(e, t) {
        return "svg" === t || "string" == typeof e && e.startsWith("data:image/svg+xml") || "string" == typeof e && SVGResource.SVG_XML.test(e)
    }
    ,
    SVGResource.SVG_XML = /^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,
    SVGResource.SVG_SIZE = /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,
    SVGResource);
    function SVGResource(e, t) {
        var i = this;
        return t = t || {},
        (i = qt.call(this, Z.ADAPTER.createCanvas()) || this)._width = 0,
        i._height = 0,
        i.svg = e,
        i.scale = t.scale || 1,
        i._overrideWidth = t.width,
        i._overrideHeight = t.height,
        i._resolve = null,
        i._crossorigin = t.crossorigin,
        i._load = null,
        !1 !== t.autoLoad && i.load(),
        i
    }
    var Ht, Yt = (__extends$i(VideoResource, Ht = xt),
    VideoResource.prototype.update = function(e) {
        if (!this.destroyed) {
            var t = gt.shared.elapsedMS * this.source.playbackRate;
            this._msToNextUpdate = Math.floor(this._msToNextUpdate - t),
            (!this._updateFPS || this._msToNextUpdate <= 0) && (Ht.prototype.update.call(this),
            this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0)
        }
    }
    ,
    VideoResource.prototype.load = function() {
        var t = this;
        if (this._load)
            return this._load;
        var i = this.source;
        return (i.readyState === i.HAVE_ENOUGH_DATA || i.readyState === i.HAVE_FUTURE_DATA) && i.width && i.height && (i.complete = !0),
        i.addEventListener("play", this._onPlayStart.bind(this)),
        i.addEventListener("pause", this._onPlayStop.bind(this)),
        this._isSourceReady() ? this._onCanPlay() : (i.addEventListener("canplay", this._onCanPlay),
        i.addEventListener("canplaythrough", this._onCanPlay),
        i.addEventListener("error", this._onError, !0)),
        this._load = new Promise(function(e) {
            t.valid ? e(t) : (t._resolve = e,
            i.load())
        }
        ),
        this._load
    }
    ,
    VideoResource.prototype._onError = function(e) {
        this.source.removeEventListener("error", this._onError, !0),
        this.onError.emit(e)
    }
    ,
    VideoResource.prototype._isSourcePlaying = function() {
        var e = this.source;
        return !e.paused && !e.ended && this._isSourceReady()
    }
    ,
    VideoResource.prototype._isSourceReady = function() {
        return 2 < this.source.readyState
    }
    ,
    VideoResource.prototype._onPlayStart = function() {
        this.valid || this._onCanPlay(),
        this.autoUpdate && !this._isConnectedToTicker && (gt.shared.add(this.update, this),
        this._isConnectedToTicker = !0)
    }
    ,
    VideoResource.prototype._onPlayStop = function() {
        this._isConnectedToTicker && (gt.shared.remove(this.update, this),
        this._isConnectedToTicker = !1)
    }
    ,
    VideoResource.prototype._onCanPlay = function() {
        var e = this.source;
        e.removeEventListener("canplay", this._onCanPlay),
        e.removeEventListener("canplaythrough", this._onCanPlay);
        var t = this.valid;
        this.resize(e.videoWidth, e.videoHeight),
        !t && this._resolve && (this._resolve(this),
        this._resolve = null),
        this._isSourcePlaying() ? this._onPlayStart() : this.autoPlay && e.play()
    }
    ,
    VideoResource.prototype.dispose = function() {
        this._isConnectedToTicker && (gt.shared.remove(this.update, this),
        this._isConnectedToTicker = !1);
        var e = this.source;
        e && (e.removeEventListener("error", this._onError, !0),
        e.pause(),
        e.src = "",
        e.load()),
        Ht.prototype.dispose.call(this)
    }
    ,
    Object.defineProperty(VideoResource.prototype, "autoUpdate", {
        get: function() {
            return this._autoUpdate
        },
        set: function(e) {
            e !== this._autoUpdate && (this._autoUpdate = e,
            !this._autoUpdate && this._isConnectedToTicker ? (gt.shared.remove(this.update, this),
            this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._isSourcePlaying() && (gt.shared.add(this.update, this),
            this._isConnectedToTicker = !0))
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(VideoResource.prototype, "updateFPS", {
        get: function() {
            return this._updateFPS
        },
        set: function(e) {
            e !== this._updateFPS && (this._updateFPS = e)
        },
        enumerable: !1,
        configurable: !0
    }),
    VideoResource.test = function(e, t) {
        return globalThis.HTMLVideoElement && e instanceof HTMLVideoElement || -1 < VideoResource.TYPES.indexOf(t)
    }
    ,
    VideoResource.TYPES = ["mp4", "m4v", "webm", "ogg", "ogv", "h264", "avi", "mov"],
    VideoResource.MIME_TYPES = {
        ogv: "video/ogg",
        mov: "video/quicktime",
        m4v: "video/mp4"
    },
    VideoResource);
    function VideoResource(e, t) {
        var i = this;
        if (t = t || {},
        !(e instanceof HTMLVideoElement)) {
            var o = document.createElement("video");
            o.setAttribute("preload", "auto"),
            o.setAttribute("webkit-playsinline", ""),
            o.setAttribute("playsinline", ""),
            "string" == typeof e && (e = [e]);
            var n = e[0].src || e[0];
            xt.crossOrigin(o, n, t.crossorigin);
            for (var r = 0; r < e.length; ++r) {
                var s = document.createElement("source")
                  , a = e[r]
                  , l = a.src
                  , c = a.mime
                  , u = (l = l || e[r]).split("?").shift().toLowerCase()
                  , d = u.slice(u.lastIndexOf(".") + 1);
                c = c || VideoResource.MIME_TYPES[d] || "video/" + d,
                s.src = l,
                s.type = c,
                o.appendChild(s)
            }
            e = o
        }
        return (i = Ht.call(this, e) || this).noSubImage = !0,
        i._autoUpdate = !0,
        i._isConnectedToTicker = !1,
        i._updateFPS = t.updateFPS || 0,
        i._msToNextUpdate = 0,
        i.autoPlay = !1 !== t.autoPlay,
        i._load = null,
        i._resolve = null,
        i._onCanPlay = i._onCanPlay.bind(i),
        i._onError = i._onError.bind(i),
        !1 !== t.autoLoad && i.load(),
        i
    }
    var Xt, Wt = (__extends$i(ImageBitmapResource, Xt = xt),
    ImageBitmapResource.test = function(e) {
        return !!globalThis.createImageBitmap && "undefined" != typeof ImageBitmap && e instanceof ImageBitmap
    }
    ,
    ImageBitmapResource);
    function ImageBitmapResource(e) {
        return Xt.call(this, e) || this
    }
    Ct.push(jt, Wt, Nt, Yt, zt, Ut, kt, Lt);
    var Kt, Jt = {
        __proto__: null,
        Resource: bt,
        BaseImageResource: xt,
        INSTALLED: Ct,
        autoDetectResource: autoDetectResource,
        AbstractMultiResource: Ot,
        ArrayResource: Lt,
        BufferResource: Ut,
        CanvasResource: Nt,
        CubeResource: kt,
        ImageResource: jt,
        SVGResource: zt,
        VideoResource: Yt,
        ImageBitmapResource: Wt
    }, Qt = (__extends$i(DepthResource, Kt = Ut),
    DepthResource.prototype.upload = function(e, t, i) {
        var o = e.gl;
        o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL, t.alphaMode === ne.ALPHA_MODES.UNPACK);
        var n = t.realWidth
          , r = t.realHeight;
        return i.width === n && i.height === r ? o.texSubImage2D(t.target, 0, 0, 0, n, r, t.format, i.type, this.data) : (i.width = n,
        i.height = r,
        o.texImage2D(t.target, 0, i.internalFormat, n, r, 0, t.format, i.type, this.data)),
        !0
    }
    ,
    DepthResource);
    function DepthResource() {
        return null !== Kt && Kt.apply(this, arguments) || this
    }
    var $t = (Object.defineProperty(Framebuffer.prototype, "colorTexture", {
        get: function() {
            return this.colorTextures[0]
        },
        enumerable: !1,
        configurable: !0
    }),
    Framebuffer.prototype.addColorTexture = function(e, t) {
        return void 0 === e && (e = 0),
        this.colorTextures[e] = t || new Rt(null,{
            scaleMode: ne.SCALE_MODES.NEAREST,
            resolution: 1,
            mipmap: ne.MIPMAP_MODES.OFF,
            width: this.width,
            height: this.height
        }),
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.addDepthTexture = function(e) {
        return this.depthTexture = e || new Rt(new Qt(null,{
            width: this.width,
            height: this.height
        }),{
            scaleMode: ne.SCALE_MODES.NEAREST,
            resolution: 1,
            width: this.width,
            height: this.height,
            mipmap: ne.MIPMAP_MODES.OFF,
            format: ne.FORMATS.DEPTH_COMPONENT,
            type: ne.TYPES.UNSIGNED_SHORT
        }),
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.enableDepth = function() {
        return this.depth = !0,
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.enableStencil = function() {
        return this.stencil = !0,
        this.dirtyId++,
        this.dirtyFormat++,
        this
    }
    ,
    Framebuffer.prototype.resize = function(e, t) {
        if (e = Math.round(e),
        t = Math.round(t),
        e !== this.width || t !== this.height) {
            this.width = e,
            this.height = t,
            this.dirtyId++,
            this.dirtySize++;
            for (var i = 0; i < this.colorTextures.length; i++) {
                var o = this.colorTextures[i]
                  , n = o.resolution;
                o.setSize(e / n, t / n)
            }
            this.depthTexture && (n = this.depthTexture.resolution,
            this.depthTexture.setSize(e / n, t / n))
        }
    }
    ,
    Framebuffer.prototype.dispose = function() {
        this.disposeRunner.emit(this, !1)
    }
    ,
    Framebuffer.prototype.destroyDepthTexture = function() {
        this.depthTexture && (this.depthTexture.destroy(),
        this.depthTexture = null,
        ++this.dirtyId,
        ++this.dirtyFormat)
    }
    ,
    Framebuffer);
    function Framebuffer(e, t) {
        this.width = Math.round(e || 100),
        this.height = Math.round(t || 100),
        this.stencil = !1,
        this.depth = !1,
        this.dirtyId = 0,
        this.dirtyFormat = 0,
        this.dirtySize = 0,
        this.depthTexture = null,
        this.colorTextures = [],
        this.glFramebuffers = {},
        this.disposeRunner = new vt("disposeFramebuffer"),
        this.multisample = ne.MSAA_QUALITY.NONE
    }
    var Zt, ei = (__extends$i(BaseRenderTexture, Zt = Rt),
    BaseRenderTexture.prototype.resize = function(e, t) {
        this.framebuffer.resize(e * this.resolution, t * this.resolution),
        this.setRealSize(this.framebuffer.width, this.framebuffer.height)
    }
    ,
    BaseRenderTexture.prototype.dispose = function() {
        this.framebuffer.dispose(),
        Zt.prototype.dispose.call(this)
    }
    ,
    BaseRenderTexture.prototype.destroy = function() {
        Zt.prototype.destroy.call(this),
        this.framebuffer.destroyDepthTexture(),
        this.framebuffer = null
    }
    ,
    BaseRenderTexture);
    function BaseRenderTexture(e) {
        void 0 === e && (e = {});
        var t = this;
        "number" == typeof e && (e = {
            width: arguments[0],
            height: arguments[1],
            scaleMode: arguments[2],
            resolution: arguments[3]
        });
        return e.width = e.width || 100,
        e.height = e.height || 100,
        e.multisample = void 0 !== e.multisample ? e.multisample : ne.MSAA_QUALITY.NONE,
        (t = Zt.call(this, null, e) || this).mipmap = ne.MIPMAP_MODES.OFF,
        t.valid = !0,
        t.clearColor = [0, 0, 0, 0],
        t.framebuffer = new $t(t.realWidth,t.realHeight).addColorTexture(0, t),
        t.framebuffer.multisample = e.multisample,
        t.maskStack = [],
        t.filterStack = [{}],
        t
    }
    var ti = (TextureUvs.prototype.set = function(e, t, i) {
        var o = t.width
          , n = t.height;
        if (i) {
            var r = e.width / 2 / o
              , s = e.height / 2 / n
              , a = e.x / o + r
              , l = e.y / n + s;
            i = nt.add(i, nt.NW),
            this.x0 = a + r * nt.uX(i),
            this.y0 = l + s * nt.uY(i),
            i = nt.add(i, 2),
            this.x1 = a + r * nt.uX(i),
            this.y1 = l + s * nt.uY(i),
            i = nt.add(i, 2),
            this.x2 = a + r * nt.uX(i),
            this.y2 = l + s * nt.uY(i),
            i = nt.add(i, 2),
            this.x3 = a + r * nt.uX(i),
            this.y3 = l + s * nt.uY(i)
        } else
            this.x0 = e.x / o,
            this.y0 = e.y / n,
            this.x1 = (e.x + e.width) / o,
            this.y1 = e.y / n,
            this.x2 = (e.x + e.width) / o,
            this.y2 = (e.y + e.height) / n,
            this.x3 = e.x / o,
            this.y3 = (e.y + e.height) / n;
        this.uvsFloat32[0] = this.x0,
        this.uvsFloat32[1] = this.y0,
        this.uvsFloat32[2] = this.x1,
        this.uvsFloat32[3] = this.y1,
        this.uvsFloat32[4] = this.x2,
        this.uvsFloat32[5] = this.y2,
        this.uvsFloat32[6] = this.x3,
        this.uvsFloat32[7] = this.y3
    }
    ,
    TextureUvs.prototype.toString = function() {
        return "[@pixi/core:TextureUvs x0=" + this.x0 + " y0=" + this.y0 + " x1=" + this.x1 + " y1=" + this.y1 + " x2=" + this.x2 + " y2=" + this.y2 + " x3=" + this.x3 + " y3=" + this.y3 + "]"
    }
    ,
    TextureUvs);
    function TextureUvs() {
        this.x0 = 0,
        this.y0 = 0,
        this.x1 = 1,
        this.y1 = 0,
        this.x2 = 1,
        this.y2 = 1,
        this.x3 = 0,
        this.y3 = 1,
        this.uvsFloat32 = new Float32Array(8)
    }
    var ii = new ti;
    function removeAllHandlers(e) {
        e.destroy = function _emptyDestroy() {}
        ,
        e.on = function _emptyOn() {}
        ,
        e.once = function _emptyOnce() {}
        ,
        e.emit = function _emptyEmit() {}
    }
    var oi, ni = (__extends$i(Texture, oi = te),
    Texture.prototype.update = function() {
        this.baseTexture.resource && this.baseTexture.resource.update()
    }
    ,
    Texture.prototype.onBaseTextureUpdated = function(e) {
        if (this.noFrame) {
            if (!this.baseTexture.valid)
                return;
            this._frame.width = e.width,
            this._frame.height = e.height,
            this.valid = !0,
            this.updateUvs()
        } else
            this.frame = this._frame;
        this.emit("update", this)
    }
    ,
    Texture.prototype.destroy = function(e) {
        if (this.baseTexture) {
            if (e) {
                var t = this.baseTexture.resource;
                t && t.url && Oe[t.url] && Texture.removeFromCache(t.url),
                this.baseTexture.destroy()
            }
            this.baseTexture.off("loaded", this.onBaseTextureUpdated, this),
            this.baseTexture.off("update", this.onBaseTextureUpdated, this),
            this.baseTexture = null
        }
        this._frame = null,
        this._uvs = null,
        this.trim = null,
        this.orig = null,
        this.valid = !1,
        Texture.removeFromCache(this),
        this.textureCacheIds = null
    }
    ,
    Texture.prototype.clone = function() {
        var e = this._frame.clone()
          , t = this._frame === this.orig ? e : this.orig.clone()
          , i = new Texture(this.baseTexture,!this.noFrame && e,t,this.trim && this.trim.clone(),this.rotate,this.defaultAnchor);
        return this.noFrame && (i._frame = e),
        i
    }
    ,
    Texture.prototype.updateUvs = function() {
        this._uvs === ii && (this._uvs = new ti),
        this._uvs.set(this._frame, this.baseTexture, this.rotate),
        this._updateID++
    }
    ,
    Texture.from = function(e, t, i) {
        void 0 === t && (t = {}),
        void 0 === i && (i = Z.STRICT_TEXTURE_CACHE);
        var o = "string" == typeof e
          , n = null;
        if (o)
            n = e;
        else if (e instanceof Rt) {
            if (!e.cacheId) {
                var r = t && t.pixiIdPrefix || "pixiid";
                e.cacheId = r + "-" + uid(),
                Rt.addToCache(e, e.cacheId)
            }
            n = e.cacheId
        } else
            e._pixiId || (r = t && t.pixiIdPrefix || "pixiid",
            e._pixiId = r + "_" + uid()),
            n = e._pixiId;
        var s = Oe[n];
        if (o && i && !s)
            throw new Error('The cacheId "' + n + '" does not exist in TextureCache.');
        return s || e instanceof Rt ? !s && e instanceof Rt && (s = new Texture(e),
        Texture.addToCache(s, n)) : (t.resolution || (t.resolution = getResolutionOfUrl(e)),
        (s = new Texture(new Rt(e,t))).baseTexture.cacheId = n,
        Rt.addToCache(s.baseTexture, n),
        Texture.addToCache(s, n)),
        s
    }
    ,
    Texture.fromURL = function(e, t) {
        var i = Object.assign({
            autoLoad: !1
        }, null == t ? void 0 : t.resourceOptions)
          , o = Texture.from(e, Object.assign({
            resourceOptions: i
        }, t), !1)
          , n = o.baseTexture.resource;
        return o.baseTexture.valid ? Promise.resolve(o) : n.load().then(function() {
            return Promise.resolve(o)
        })
    }
    ,
    Texture.fromBuffer = function(e, t, i, o) {
        return new Texture(Rt.fromBuffer(e, t, i, o))
    }
    ,
    Texture.fromLoader = function(e, t, i, o) {
        var n = new Rt(e,Object.assign({
            scaleMode: Z.SCALE_MODE,
            resolution: getResolutionOfUrl(t)
        }, o))
          , r = n.resource;
        r instanceof jt && (r.url = t);
        var s = new Texture(n);
        return i = i || t,
        Rt.addToCache(s.baseTexture, i),
        Texture.addToCache(s, i),
        i !== t && (Rt.addToCache(s.baseTexture, t),
        Texture.addToCache(s, t)),
        s.baseTexture.valid ? Promise.resolve(s) : new Promise(function(e) {
            s.baseTexture.once("loaded", function() {
                return e(s)
            })
        }
        )
    }
    ,
    Texture.addToCache = function(e, t) {
        t && (-1 === e.textureCacheIds.indexOf(t) && e.textureCacheIds.push(t),
        Oe[t] && console.warn("Texture added to the cache with an id [" + t + "] that already had an entry"),
        Oe[t] = e)
    }
    ,
    Texture.removeFromCache = function(e) {
        if ("string" == typeof e) {
            var t = Oe[e];
            if (t) {
                var i = t.textureCacheIds.indexOf(e);
                return -1 < i && t.textureCacheIds.splice(i, 1),
                delete Oe[e],
                t
            }
        } else if (e && e.textureCacheIds) {
            for (var o = 0; o < e.textureCacheIds.length; ++o)
                Oe[e.textureCacheIds[o]] === e && delete Oe[e.textureCacheIds[o]];
            return e.textureCacheIds.length = 0,
            e
        }
        return null
    }
    ,
    Object.defineProperty(Texture.prototype, "resolution", {
        get: function() {
            return this.baseTexture.resolution
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "frame", {
        get: function() {
            return this._frame
        },
        set: function(e) {
            this._frame = e,
            this.noFrame = !1;
            var t = e.x
              , i = e.y
              , o = e.width
              , n = e.height
              , r = t + o > this.baseTexture.width
              , s = i + n > this.baseTexture.height;
            if (r || s) {
                var a = r && s ? "and" : "or"
                  , l = "X: " + t + " + " + o + " = " + (t + o) + " > " + this.baseTexture.width
                  , c = "Y: " + i + " + " + n + " = " + (i + n) + " > " + this.baseTexture.height;
                throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: " + l + " " + a + " " + c)
            }
            this.valid = o && n && this.baseTexture.valid,
            this.trim || this.rotate || (this.orig = e),
            this.valid && this.updateUvs()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "rotate", {
        get: function() {
            return this._rotate
        },
        set: function(e) {
            this._rotate = e,
            this.valid && this.updateUvs()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "width", {
        get: function() {
            return this.orig.width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture.prototype, "height", {
        get: function() {
            return this.orig.height
        },
        enumerable: !1,
        configurable: !0
    }),
    Texture.prototype.castToBaseTexture = function() {
        return this.baseTexture
    }
    ,
    Object.defineProperty(Texture, "EMPTY", {
        get: function() {
            return Texture._EMPTY || (removeAllHandlers(Texture._EMPTY = new Texture(new Rt)),
            removeAllHandlers(Texture._EMPTY.baseTexture)),
            Texture._EMPTY
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Texture, "WHITE", {
        get: function() {
            if (!Texture._WHITE) {
                var e = Z.ADAPTER.createCanvas(16, 16)
                  , t = e.getContext("2d");
                e.width = 16,
                e.height = 16,
                t.fillStyle = "white",
                t.fillRect(0, 0, 16, 16),
                removeAllHandlers(Texture._WHITE = new Texture(Rt.from(e))),
                removeAllHandlers(Texture._WHITE.baseTexture)
            }
            return Texture._WHITE
        },
        enumerable: !1,
        configurable: !0
    }),
    Texture);
    function Texture(e, t, i, o, n, r) {
        var s = oi.call(this) || this;
        if (s.noFrame = !1,
        t || (s.noFrame = !0,
        t = new ze(0,0,1,1)),
        e instanceof Texture && (e = e.baseTexture),
        s.baseTexture = e,
        s._frame = t,
        s.trim = o,
        s.valid = !1,
        s._uvs = ii,
        s.uvMatrix = null,
        s.orig = i || t,
        s._rotate = Number(n || 0),
        !0 === n)
            s._rotate = 2;
        else if (s._rotate % 2 != 0)
            throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");
        return s.defaultAnchor = r ? new je(r.x,r.y) : new je(0,0),
        s._updateID = 0,
        s.textureCacheIds = [],
        e.valid ? s.noFrame ? e.valid && s.onBaseTextureUpdated(e) : s.frame = t : e.once("loaded", s.onBaseTextureUpdated, s),
        s.noFrame && e.on("update", s.onBaseTextureUpdated, s),
        s
    }
    var ri, si = (__extends$i(RenderTexture, ri = ni),
    Object.defineProperty(RenderTexture.prototype, "framebuffer", {
        get: function() {
            return this.baseTexture.framebuffer
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(RenderTexture.prototype, "multisample", {
        get: function() {
            return this.framebuffer.multisample
        },
        set: function(e) {
            this.framebuffer.multisample = e
        },
        enumerable: !1,
        configurable: !0
    }),
    RenderTexture.prototype.resize = function(e, t, i) {
        void 0 === i && (i = !0);
        var o = this.baseTexture.resolution
          , n = Math.round(e * o) / o
          , r = Math.round(t * o) / o;
        this.valid = 0 < n && 0 < r,
        this._frame.width = this.orig.width = n,
        this._frame.height = this.orig.height = r,
        i && this.baseTexture.resize(n, r),
        this.updateUvs()
    }
    ,
    RenderTexture.prototype.setResolution = function(e) {
        var t = this.baseTexture;
        t.resolution !== e && (t.setResolution(e),
        this.resize(t.width, t.height, !1))
    }
    ,
    RenderTexture.create = function(e) {
        for (var t = arguments, i = [], o = 1; o < arguments.length; o++)
            i[o - 1] = t[o];
        return "number" == typeof e && (deprecation("6.0.0", "Arguments (width, height, scaleMode, resolution) have been deprecated."),
        e = {
            width: e,
            height: i[0],
            scaleMode: i[1],
            resolution: i[2]
        }),
        new RenderTexture(new ei(e))
    }
    ,
    RenderTexture);
    function RenderTexture(e, t) {
        var i = ri.call(this, e, t) || this;
        return i.valid = !0,
        i.filterFrame = null,
        i.filterPoolKey = null,
        i.updateUvs(),
        i
    }
    var ai = (RenderTexturePool.prototype.createTexture = function(e, t, i) {
        void 0 === i && (i = ne.MSAA_QUALITY.NONE);
        var o = new ei(Object.assign({
            width: e,
            height: t,
            resolution: 1,
            multisample: i
        }, this.textureOptions));
        return new si(o)
    }
    ,
    RenderTexturePool.prototype.getOptimalTexture = function(e, t, i, o) {
        var n;
        void 0 === i && (i = 1),
        void 0 === o && (o = ne.MSAA_QUALITY.NONE),
        e = Math.ceil(e * i - 1e-6),
        t = Math.ceil(t * i - 1e-6),
        this.enableFullScreen && e === this._pixelsWidth && t === this._pixelsHeight ? n = 1 < o ? -o : -1 : (n = ((65535 & (e = nextPow2(e))) << 16 | 65535 & (t = nextPow2(t))) >>> 0,
        1 < o && (n += 4294967296 * o)),
        this.texturePool[n] || (this.texturePool[n] = []);
        var r = this.texturePool[n].pop();
        return (r = r || this.createTexture(e, t, o)).filterPoolKey = n,
        r.setResolution(i),
        r
    }
    ,
    RenderTexturePool.prototype.getFilterTexture = function(e, t, i) {
        var o = this.getOptimalTexture(e.width, e.height, t || e.resolution, i || ne.MSAA_QUALITY.NONE);
        return o.filterFrame = e.filterFrame,
        o
    }
    ,
    RenderTexturePool.prototype.returnTexture = function(e) {
        var t = e.filterPoolKey;
        e.filterFrame = null,
        this.texturePool[t].push(e)
    }
    ,
    RenderTexturePool.prototype.returnFilterTexture = function(e) {
        this.returnTexture(e)
    }
    ,
    RenderTexturePool.prototype.clear = function(e) {
        if (e = !1 !== e)
            for (var t in this.texturePool) {
                var i = this.texturePool[t];
                if (i)
                    for (var o = 0; o < i.length; o++)
                        i[o].destroy(!0)
            }
        this.texturePool = {}
    }
    ,
    RenderTexturePool.prototype.setScreenSize = function(e) {
        if (e.width !== this._pixelsWidth || e.height !== this._pixelsHeight) {
            for (var t in this.enableFullScreen = 0 < e.width && 0 < e.height,
            this.texturePool)
                if (Number(t) < 0) {
                    var i = this.texturePool[t];
                    if (i)
                        for (var o = 0; o < i.length; o++)
                            i[o].destroy(!0);
                    this.texturePool[t] = []
                }
            this._pixelsWidth = e.width,
            this._pixelsHeight = e.height
        }
    }
    ,
    RenderTexturePool.SCREEN_KEY = -1,
    RenderTexturePool);
    function RenderTexturePool(e) {
        this.texturePool = {},
        this.textureOptions = e || {},
        this.enableFullScreen = !1,
        this._pixelsWidth = 0,
        this._pixelsHeight = 0
    }
    var li = (Attribute.prototype.destroy = function() {
        this.buffer = null
    }
    ,
    Attribute.from = function(e, t, i, o, n) {
        return new Attribute(e,t,i,o,n)
    }
    ,
    Attribute);
    function Attribute(e, t, i, o, n, r, s) {
        void 0 === t && (t = 0),
        void 0 === i && (i = !1),
        void 0 === o && (o = ne.TYPES.FLOAT),
        this.buffer = e,
        this.size = t,
        this.normalized = i,
        this.type = o,
        this.stride = n,
        this.start = r,
        this.instance = s
    }
    var ci = 0
      , ui = (Buffer.prototype.update = function(e) {
        e instanceof Array && (e = new Float32Array(e)),
        this.data = e || this.data,
        this._updateID++
    }
    ,
    Buffer.prototype.dispose = function() {
        this.disposeRunner.emit(this, !1)
    }
    ,
    Buffer.prototype.destroy = function() {
        this.dispose(),
        this.data = null
    }
    ,
    Object.defineProperty(Buffer.prototype, "index", {
        get: function() {
            return this.type === ne.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER
        },
        set: function(e) {
            this.type = e ? ne.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER : ne.BUFFER_TYPE.ARRAY_BUFFER
        },
        enumerable: !1,
        configurable: !0
    }),
    Buffer.from = function(e) {
        return e instanceof Array && (e = new Float32Array(e)),
        new Buffer(e)
    }
    ,
    Buffer);
    function Buffer(e, t, i) {
        void 0 === t && (t = !0),
        void 0 === i && (i = !1),
        this.data = e || new Float32Array(1),
        this._glBuffers = {},
        this._updateID = 0,
        this.index = i,
        this.static = t,
        this.id = ci++,
        this.disposeRunner = new vt("disposeBuffer")
    }
    var di = {
        Float32Array: Float32Array,
        Uint32Array: Uint32Array,
        Int32Array: Int32Array,
        Uint8Array: Uint8Array
    };
    var hi = {
        5126: 4,
        5123: 2,
        5121: 1
    }
      , pi = 0
      , _i = {
        Float32Array: Float32Array,
        Uint32Array: Uint32Array,
        Int32Array: Int32Array,
        Uint8Array: Uint8Array,
        Uint16Array: Uint16Array
    }
      , fi = (Geometry.prototype.addAttribute = function(e, t, i, o, n, r, s, a) {
        if (void 0 === i && (i = 0),
        void 0 === o && (o = !1),
        void 0 === a && (a = !1),
        !t)
            throw new Error("You must pass a buffer when creating an attribute");
        t instanceof ui || (t instanceof Array && (t = new Float32Array(t)),
        t = new ui(t));
        var l = e.split("|");
        if (1 < l.length) {
            for (var c = 0; c < l.length; c++)
                this.addAttribute(l[c], t, i, o, n);
            return this
        }
        var u = this.buffers.indexOf(t);
        return -1 === u && (this.buffers.push(t),
        u = this.buffers.length - 1),
        this.attributes[e] = new li(u,i,o,n,r,s,a),
        this.instanced = this.instanced || a,
        this
    }
    ,
    Geometry.prototype.getAttribute = function(e) {
        return this.attributes[e]
    }
    ,
    Geometry.prototype.getBuffer = function(e) {
        return this.buffers[this.getAttribute(e).buffer]
    }
    ,
    Geometry.prototype.addIndex = function(e) {
        return e instanceof ui || (e instanceof Array && (e = new Uint16Array(e)),
        e = new ui(e)),
        e.type = ne.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,
        this.indexBuffer = e,
        -1 === this.buffers.indexOf(e) && this.buffers.push(e),
        this
    }
    ,
    Geometry.prototype.getIndex = function() {
        return this.indexBuffer
    }
    ,
    Geometry.prototype.interleave = function() {
        if (1 === this.buffers.length || 2 === this.buffers.length && this.indexBuffer)
            return this;
        var e, t = [], i = [], o = new ui;
        for (e in this.attributes) {
            var n = this.attributes[e]
              , r = this.buffers[n.buffer];
            t.push(r.data),
            i.push(n.size * hi[n.type] / 4),
            n.buffer = 0
        }
        for (o.data = function interleaveTypedArrays(e, t) {
            for (var i = 0, o = 0, n = {}, r = 0; r < e.length; r++)
                o += t[r],
                i += e[r].length;
            var s = new ArrayBuffer(4 * i)
              , a = null
              , l = 0;
            for (r = 0; r < e.length; r++) {
                var c = t[r]
                  , u = e[r]
                  , d = getBufferType(u);
                n[d] || (n[d] = new di[d](s)),
                a = n[d];
                for (var h = 0; h < u.length; h++)
                    a[(h / c | 0) * o + l + h % c] = u[h];
                l += c
            }
            return new Float32Array(s)
        }(t, i),
        e = 0; e < this.buffers.length; e++)
            this.buffers[e] !== this.indexBuffer && this.buffers[e].destroy();
        return this.buffers = [o],
        this.indexBuffer && this.buffers.push(this.indexBuffer),
        this
    }
    ,
    Geometry.prototype.getSize = function() {
        for (var e in this.attributes) {
            var t = this.attributes[e];
            return this.buffers[t.buffer].data.length / (t.stride / 4 || t.size)
        }
        return 0
    }
    ,
    Geometry.prototype.dispose = function() {
        this.disposeRunner.emit(this, !1)
    }
    ,
    Geometry.prototype.destroy = function() {
        this.dispose(),
        this.buffers = null,
        this.indexBuffer = null,
        this.attributes = null
    }
    ,
    Geometry.prototype.clone = function() {
        for (var e = new Geometry, t = 0; t < this.buffers.length; t++)
            e.buffers[t] = new ui(this.buffers[t].data.slice(0));
        for (var t in this.attributes) {
            var i = this.attributes[t];
            e.attributes[t] = new li(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)
        }
        return this.indexBuffer && (e.indexBuffer = e.buffers[this.buffers.indexOf(this.indexBuffer)],
        e.indexBuffer.type = ne.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),
        e
    }
    ,
    Geometry.merge = function(e) {
        for (var t, i = new Geometry, o = [], n = [], r = [], s = 0; s < e.length; s++) {
            t = e[s];
            for (var a = 0; a < t.buffers.length; a++)
                n[a] = n[a] || 0,
                n[a] += t.buffers[a].data.length,
                r[a] = 0
        }
        for (s = 0; s < t.buffers.length; s++)
            o[s] = new (_i[getBufferType(t.buffers[s].data)])(n[s]),
            i.buffers[s] = new ui(o[s]);
        for (s = 0; s < e.length; s++)
            for (t = e[s],
            a = 0; a < t.buffers.length; a++)
                o[a].set(t.buffers[a].data, r[a]),
                r[a] += t.buffers[a].data.length;
        if (i.attributes = t.attributes,
        t.indexBuffer) {
            i.indexBuffer = i.buffers[t.buffers.indexOf(t.indexBuffer)],
            i.indexBuffer.type = ne.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;
            var l = 0
              , c = 0
              , u = 0
              , d = 0;
            for (s = 0; s < t.buffers.length; s++)
                if (t.buffers[s] !== t.indexBuffer) {
                    d = s;
                    break
                }
            for (var s in t.attributes) {
                var h = t.attributes[s];
                (0 | h.buffer) === d && (c += h.size * hi[h.type] / 4)
            }
            for (s = 0; s < e.length; s++) {
                var p = e[s].indexBuffer.data;
                for (a = 0; a < p.length; a++)
                    i.indexBuffer.data[a + u] += l;
                l += e[s].buffers[d].data.length / c,
                u += p.length
            }
        }
        return i
    }
    ,
    Geometry);
    function Geometry(e, t) {
        void 0 === e && (e = []),
        void 0 === t && (t = {}),
        this.buffers = e,
        this.indexBuffer = null,
        this.attributes = t,
        this.glVertexArrayObjects = {},
        this.id = pi++,
        this.instanced = !1,
        this.instanceCount = 1,
        this.disposeRunner = new vt("disposeGeometry"),
        this.refCount = 0
    }
    var mi, Ti = (__extends$i(Quad, mi = fi),
    Quad);
    function Quad() {
        var e = mi.call(this) || this;
        return e.addAttribute("aVertexPosition", new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])).addIndex([0, 1, 3, 2]),
        e
    }
    var vi, yi = (__extends$i(QuadUv, vi = fi),
    QuadUv.prototype.map = function(e, t) {
        var i = 0
          , o = 0;
        return this.uvs[0] = i,
        this.uvs[1] = o,
        this.uvs[2] = i + t.width / e.width,
        this.uvs[3] = o,
        this.uvs[4] = i + t.width / e.width,
        this.uvs[5] = o + t.height / e.height,
        this.uvs[6] = i,
        this.uvs[7] = o + t.height / e.height,
        i = t.x,
        o = t.y,
        this.vertices[0] = i,
        this.vertices[1] = o,
        this.vertices[2] = i + t.width,
        this.vertices[3] = o,
        this.vertices[4] = i + t.width,
        this.vertices[5] = o + t.height,
        this.vertices[6] = i,
        this.vertices[7] = o + t.height,
        this.invalidate(),
        this
    }
    ,
    QuadUv.prototype.invalidate = function() {
        return this.vertexBuffer._updateID++,
        this.uvBuffer._updateID++,
        this
    }
    ,
    QuadUv);
    function QuadUv() {
        var e = vi.call(this) || this;
        return e.vertices = new Float32Array([-1, -1, 1, -1, 1, 1, -1, 1]),
        e.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
        e.vertexBuffer = new ui(e.vertices),
        e.uvBuffer = new ui(e.uvs),
        e.addAttribute("aVertexPosition", e.vertexBuffer).addAttribute("aTextureCoord", e.uvBuffer).addIndex([0, 1, 2, 0, 2, 3]),
        e
    }
    var gi = 0
      , wi = (UniformGroup.prototype.update = function() {
        this.dirtyId++,
        !this.autoManage && this.buffer && this.buffer.update()
    }
    ,
    UniformGroup.prototype.add = function(e, t, i) {
        if (this.ubo)
            throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");
        this.uniforms[e] = new UniformGroup(t,i)
    }
    ,
    UniformGroup.from = function(e, t, i) {
        return new UniformGroup(e,t,i)
    }
    ,
    UniformGroup.uboFrom = function(e, t) {
        return new UniformGroup(e,null == t || t,!0)
    }
    ,
    UniformGroup);
    function UniformGroup(e, t, i) {
        this.group = !0,
        this.syncUniforms = {},
        this.dirtyId = 0,
        this.id = gi++,
        this.static = !!t,
        this.ubo = !!i,
        e instanceof ui ? (this.buffer = e,
        this.buffer.type = ne.BUFFER_TYPE.UNIFORM_BUFFER,
        this.autoManage = !1,
        this.ubo = !0) : (this.uniforms = e,
        this.ubo && (this.buffer = new ui(new Float32Array(1)),
        this.buffer.type = ne.BUFFER_TYPE.UNIFORM_BUFFER,
        this.autoManage = !0))
    }
    var Ci = (FilterState.prototype.clear = function() {
        this.target = null,
        this.filters = null,
        this.renderTexture = null
    }
    ,
    FilterState);
    function FilterState() {
        this.renderTexture = null,
        this.target = null,
        this.legacy = !1,
        this.resolution = 1,
        this.multisample = ne.MSAA_QUALITY.NONE,
        this.sourceFrame = new ze,
        this.destinationFrame = new ze,
        this.bindingSourceFrame = new ze,
        this.bindingDestinationFrame = new ze,
        this.filters = [],
        this.transform = null
    }
    var Si = [new je, new je, new je, new je]
      , Ei = new Je
      , bi = (FilterSystem.prototype.push = function(e, t) {
        for (var i, o, n = this.renderer, r = this.defaultFilterStack, s = this.statePool.pop() || new Ci, a = this.renderer.renderTexture, l = t[0].resolution, c = t[0].multisample, u = t[0].padding, d = t[0].autoFit, h = null === (i = t[0].legacy) || void 0 === i || i, p = 1; p < t.length; p++) {
            var _ = t[p];
            l = Math.min(l, _.resolution),
            c = Math.min(c, _.multisample),
            u = this.useMaxPadding ? Math.max(u, _.padding) : u + _.padding,
            d = d && _.autoFit,
            h = h || null === (o = _.legacy) || void 0 === o || o
        }
        1 === r.length && (this.defaultFilterStack[0].renderTexture = a.current),
        r.push(s),
        s.resolution = l,
        s.multisample = c,
        s.legacy = h,
        s.target = e,
        s.sourceFrame.copyFrom(e.filterArea || e.getBounds(!0)),
        s.sourceFrame.pad(u);
        var f = this.tempRect.copyFrom(a.sourceFrame);
        n.projection.transform && this.transformAABB(Ei.copyFrom(n.projection.transform).invert(), f),
        d ? (s.sourceFrame.fit(f),
        (s.sourceFrame.width <= 0 || s.sourceFrame.height <= 0) && (s.sourceFrame.width = 0,
        s.sourceFrame.height = 0)) : s.sourceFrame.intersects(f) || (s.sourceFrame.width = 0,
        s.sourceFrame.height = 0),
        this.roundFrame(s.sourceFrame, a.current ? a.current.resolution : n.resolution, a.sourceFrame, a.destinationFrame, n.projection.transform),
        s.renderTexture = this.getOptimalFilterTexture(s.sourceFrame.width, s.sourceFrame.height, l, c),
        s.filters = t,
        s.destinationFrame.width = s.renderTexture.width,
        s.destinationFrame.height = s.renderTexture.height;
        var m = this.tempRect;
        m.x = 0,
        m.y = 0,
        m.width = s.sourceFrame.width,
        m.height = s.sourceFrame.height,
        s.renderTexture.filterFrame = s.sourceFrame,
        s.bindingSourceFrame.copyFrom(a.sourceFrame),
        s.bindingDestinationFrame.copyFrom(a.destinationFrame),
        s.transform = n.projection.transform,
        n.projection.transform = null,
        a.bind(s.renderTexture, s.sourceFrame, m),
        n.framebuffer.clear(0, 0, 0, 0)
    }
    ,
    FilterSystem.prototype.pop = function() {
        var e = this.defaultFilterStack
          , t = e.pop()
          , i = t.filters;
        this.activeState = t;
        var o = this.globalUniforms.uniforms;
        o.outputFrame = t.sourceFrame,
        o.resolution = t.resolution;
        var n = o.inputSize
          , r = o.inputPixel
          , s = o.inputClamp;
        if (n[0] = t.destinationFrame.width,
        n[1] = t.destinationFrame.height,
        n[2] = 1 / n[0],
        n[3] = 1 / n[1],
        r[0] = Math.round(n[0] * t.resolution),
        r[1] = Math.round(n[1] * t.resolution),
        r[2] = 1 / r[0],
        r[3] = 1 / r[1],
        s[0] = .5 * r[2],
        s[1] = .5 * r[3],
        s[2] = t.sourceFrame.width * n[2] - .5 * r[2],
        s[3] = t.sourceFrame.height * n[3] - .5 * r[3],
        t.legacy) {
            var a = o.filterArea;
            a[0] = t.destinationFrame.width,
            a[1] = t.destinationFrame.height,
            a[2] = t.sourceFrame.x,
            a[3] = t.sourceFrame.y,
            o.filterClamp = o.inputClamp
        }
        this.globalUniforms.update();
        var l = e[e.length - 1];
        if (this.renderer.framebuffer.blit(),
        1 === i.length)
            i[0].apply(this, t.renderTexture, l.renderTexture, ne.CLEAR_MODES.BLEND, t),
            this.returnFilterTexture(t.renderTexture);
        else {
            var c = t.renderTexture
              , u = this.getOptimalFilterTexture(c.width, c.height, t.resolution);
            u.filterFrame = c.filterFrame;
            var d = 0;
            for (d = 0; d < i.length - 1; ++d) {
                1 === d && 1 < t.multisample && ((u = this.getOptimalFilterTexture(c.width, c.height, t.resolution)).filterFrame = c.filterFrame),
                i[d].apply(this, c, u, ne.CLEAR_MODES.CLEAR, t);
                var h = c;
                c = u,
                u = h
            }
            i[d].apply(this, c, l.renderTexture, ne.CLEAR_MODES.BLEND, t),
            1 < d && 1 < t.multisample && this.returnFilterTexture(t.renderTexture),
            this.returnFilterTexture(c),
            this.returnFilterTexture(u)
        }
        t.clear(),
        this.statePool.push(t)
    }
    ,
    FilterSystem.prototype.bindAndClear = function(e, t) {
        void 0 === t && (t = ne.CLEAR_MODES.CLEAR);
        var i = this.renderer
          , o = i.renderTexture
          , n = i.state;
        if (e === this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? this.renderer.projection.transform = this.activeState.transform : this.renderer.projection.transform = null,
        e && e.filterFrame) {
            var r = this.tempRect;
            r.x = 0,
            r.y = 0,
            r.width = e.filterFrame.width,
            r.height = e.filterFrame.height,
            o.bind(e, e.filterFrame, r)
        } else
            e !== this.defaultFilterStack[this.defaultFilterStack.length - 1].renderTexture ? o.bind(e) : this.renderer.renderTexture.bind(e, this.activeState.bindingSourceFrame, this.activeState.bindingDestinationFrame);
        var s = 1 & n.stateId || this.forceClear;
        (t === ne.CLEAR_MODES.CLEAR || t === ne.CLEAR_MODES.BLIT && s) && this.renderer.framebuffer.clear(0, 0, 0, 0)
    }
    ,
    FilterSystem.prototype.applyFilter = function(e, t, i, o) {
        var n = this.renderer;
        n.state.set(e.state),
        this.bindAndClear(i, o),
        e.uniforms.uSampler = t,
        e.uniforms.filterGlobals = this.globalUniforms,
        n.shader.bind(e),
        e.legacy = !!e.program.attributeData.aTextureCoord,
        e.legacy ? (this.quadUv.map(t._frame, t.filterFrame),
        n.geometry.bind(this.quadUv),
        n.geometry.draw(ne.DRAW_MODES.TRIANGLES)) : (n.geometry.bind(this.quad),
        n.geometry.draw(ne.DRAW_MODES.TRIANGLE_STRIP))
    }
    ,
    FilterSystem.prototype.calculateSpriteMatrix = function(e, t) {
        var i = this.activeState
          , o = i.sourceFrame
          , n = i.destinationFrame
          , r = t._texture.orig
          , s = e.set(n.width, 0, 0, n.height, o.x, o.y)
          , a = t.worldTransform.copyTo(Je.TEMP_MATRIX);
        return a.invert(),
        s.prepend(a),
        s.scale(1 / r.width, 1 / r.height),
        s.translate(t.anchor.x, t.anchor.y),
        s
    }
    ,
    FilterSystem.prototype.destroy = function() {
        this.renderer = null,
        this.texturePool.clear(!1)
    }
    ,
    FilterSystem.prototype.getOptimalFilterTexture = function(e, t, i, o) {
        return void 0 === i && (i = 1),
        void 0 === o && (o = ne.MSAA_QUALITY.NONE),
        this.texturePool.getOptimalTexture(e, t, i, o)
    }
    ,
    FilterSystem.prototype.getFilterTexture = function(e, t, i) {
        if ("number" == typeof e) {
            var o = e;
            e = t,
            t = o
        }
        e = e || this.activeState.renderTexture;
        var n = this.texturePool.getOptimalTexture(e.width, e.height, t || e.resolution, i || ne.MSAA_QUALITY.NONE);
        return n.filterFrame = e.filterFrame,
        n
    }
    ,
    FilterSystem.prototype.returnFilterTexture = function(e) {
        this.texturePool.returnTexture(e)
    }
    ,
    FilterSystem.prototype.emptyPool = function() {
        this.texturePool.clear(!0)
    }
    ,
    FilterSystem.prototype.resize = function() {
        this.texturePool.setScreenSize(this.renderer.view)
    }
    ,
    FilterSystem.prototype.transformAABB = function(e, t) {
        var i = Si[0]
          , o = Si[1]
          , n = Si[2]
          , r = Si[3];
        i.set(t.left, t.top),
        o.set(t.left, t.bottom),
        n.set(t.right, t.top),
        r.set(t.right, t.bottom),
        e.apply(i, i),
        e.apply(o, o),
        e.apply(n, n),
        e.apply(r, r);
        var s = Math.min(i.x, o.x, n.x, r.x)
          , a = Math.min(i.y, o.y, n.y, r.y)
          , l = Math.max(i.x, o.x, n.x, r.x)
          , c = Math.max(i.y, o.y, n.y, r.y);
        t.x = s,
        t.y = a,
        t.width = l - s,
        t.height = c - a
    }
    ,
    FilterSystem.prototype.roundFrame = function(e, t, i, o, n) {
        if (!(e.width <= 0 || e.height <= 0 || i.width <= 0 || i.height <= 0)) {
            if (n) {
                var r = n.a
                  , s = n.b
                  , a = n.c
                  , l = n.d;
                if ((1e-4 < Math.abs(s) || 1e-4 < Math.abs(a)) && (1e-4 < Math.abs(r) || 1e-4 < Math.abs(l)))
                    return
            }
            (n = n ? Ei.copyFrom(n) : Ei.identity()).translate(-i.x, -i.y).scale(o.width / i.width, o.height / i.height).translate(o.x, o.y),
            this.transformAABB(n, e),
            e.ceil(t),
            this.transformAABB(n.invert(), e)
        }
    }
    ,
    FilterSystem);
    function FilterSystem(e) {
        this.renderer = e,
        this.defaultFilterStack = [{}],
        this.texturePool = new ai,
        this.texturePool.setScreenSize(e.view),
        this.statePool = [],
        this.quad = new Ti,
        this.quadUv = new yi,
        this.tempRect = new ze,
        this.activeState = {},
        this.globalUniforms = new wi({
            outputFrame: new ze,
            inputSize: new Float32Array(4),
            inputPixel: new Float32Array(4),
            inputClamp: new Float32Array(4),
            resolution: 1,
            filterArea: new Float32Array(4),
            filterClamp: new Float32Array(4)
        },!0),
        this.forceClear = !1,
        this.useMaxPadding = !1
    }
    var Vi = (ObjectRenderer.prototype.flush = function() {}
    ,
    ObjectRenderer.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    ObjectRenderer.prototype.start = function() {}
    ,
    ObjectRenderer.prototype.stop = function() {
        this.flush()
    }
    ,
    ObjectRenderer.prototype.render = function(e) {}
    ,
    ObjectRenderer);
    function ObjectRenderer(e) {
        this.renderer = e
    }
    var Ui = (BatchSystem.prototype.setObjectRenderer = function(e) {
        this.currentRenderer !== e && (this.currentRenderer.stop(),
        this.currentRenderer = e,
        this.currentRenderer.start())
    }
    ,
    BatchSystem.prototype.flush = function() {
        this.setObjectRenderer(this.emptyRenderer)
    }
    ,
    BatchSystem.prototype.reset = function() {
        this.setObjectRenderer(this.emptyRenderer)
    }
    ,
    BatchSystem.prototype.copyBoundTextures = function(e, t) {
        for (var i = this.renderer.texture.boundTextures, o = t - 1; 0 <= o; --o)
            e[o] = i[o] || null,
            e[o] && (e[o]._batchLocation = o)
    }
    ,
    BatchSystem.prototype.boundArray = function(e, t, i, o) {
        for (var n = e.elements, r = e.ids, s = e.count, a = 0, l = 0; l < s; l++) {
            var c = n[l]
              , u = c._batchLocation;
            if (0 <= u && u < o && t[u] === c)
                r[l] = u;
            else
                for (; a < o; ) {
                    var d = t[a];
                    if (!d || d._batchEnabled !== i || d._batchLocation !== a) {
                        r[l] = a,
                        t[c._batchLocation = a] = c;
                        break
                    }
                    a++
                }
        }
    }
    ,
    BatchSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    BatchSystem);
    function BatchSystem(e) {
        this.renderer = e,
        this.emptyRenderer = new Vi(e),
        this.currentRenderer = this.emptyRenderer
    }
    var Ii = 0
      , Ai = (Object.defineProperty(ContextSystem.prototype, "isLost", {
        get: function() {
            return !this.gl || this.gl.isContextLost()
        },
        enumerable: !1,
        configurable: !0
    }),
    ContextSystem.prototype.contextChange = function(e) {
        this.gl = e,
        this.renderer.gl = e,
        this.renderer.CONTEXT_UID = Ii++
    }
    ,
    ContextSystem.prototype.initFromContext = function(e) {
        this.gl = e,
        this.validateContext(e),
        this.renderer.gl = e,
        this.renderer.CONTEXT_UID = Ii++,
        this.renderer.runners.contextChange.emit(e)
    }
    ,
    ContextSystem.prototype.initFromOptions = function(e) {
        var t = this.createContext(this.renderer.view, e);
        this.initFromContext(t)
    }
    ,
    ContextSystem.prototype.createContext = function(e, t) {
        var i;
        if (Z.PREFER_ENV >= ne.ENV.WEBGL2 && (i = e.getContext("webgl2", t)),
        i)
            this.webGLVersion = 2;
        else if (this.webGLVersion = 1,
        !(i = e.getContext("webgl", t) || e.getContext("experimental-webgl", t)))
            throw new Error("This browser does not support WebGL. Try using the canvas renderer");
        return this.gl = i,
        this.getExtensions(),
        this.gl
    }
    ,
    ContextSystem.prototype.getExtensions = function() {
        var e = this.gl
          , t = {
            loseContext: e.getExtension("WEBGL_lose_context"),
            anisotropicFiltering: e.getExtension("EXT_texture_filter_anisotropic"),
            floatTextureLinear: e.getExtension("OES_texture_float_linear"),
            s3tc: e.getExtension("WEBGL_compressed_texture_s3tc"),
            s3tc_sRGB: e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
            etc: e.getExtension("WEBGL_compressed_texture_etc"),
            etc1: e.getExtension("WEBGL_compressed_texture_etc1"),
            pvrtc: e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
            atc: e.getExtension("WEBGL_compressed_texture_atc"),
            astc: e.getExtension("WEBGL_compressed_texture_astc")
        };
        1 === this.webGLVersion ? Object.assign(this.extensions, t, {
            drawBuffers: e.getExtension("WEBGL_draw_buffers"),
            depthTexture: e.getExtension("WEBGL_depth_texture"),
            vertexArrayObject: e.getExtension("OES_vertex_array_object") || e.getExtension("MOZ_OES_vertex_array_object") || e.getExtension("WEBKIT_OES_vertex_array_object"),
            uint32ElementIndex: e.getExtension("OES_element_index_uint"),
            floatTexture: e.getExtension("OES_texture_float"),
            floatTextureLinear: e.getExtension("OES_texture_float_linear"),
            textureHalfFloat: e.getExtension("OES_texture_half_float"),
            textureHalfFloatLinear: e.getExtension("OES_texture_half_float_linear")
        }) : 2 === this.webGLVersion && Object.assign(this.extensions, t, {
            colorBufferFloat: e.getExtension("EXT_color_buffer_float")
        })
    }
    ,
    ContextSystem.prototype.handleContextLost = function(e) {
        var t = this;
        e.preventDefault(),
        setTimeout(function() {
            t.gl.isContextLost() && t.extensions.loseContext && t.extensions.loseContext.restoreContext()
        }, 0)
    }
    ,
    ContextSystem.prototype.handleContextRestored = function() {
        this.renderer.runners.contextChange.emit(this.gl)
    }
    ,
    ContextSystem.prototype.destroy = function() {
        var e = this.renderer.view;
        this.renderer = null,
        e.removeEventListener("webglcontextlost", this.handleContextLost),
        e.removeEventListener("webglcontextrestored", this.handleContextRestored),
        this.gl.useProgram(null),
        this.extensions.loseContext && this.extensions.loseContext.loseContext()
    }
    ,
    ContextSystem.prototype.postrender = function() {
        this.renderer.renderingToScreen && this.gl.flush()
    }
    ,
    ContextSystem.prototype.validateContext = function(e) {
        var t = e.getContextAttributes()
          , i = "WebGL2RenderingContext"in globalThis && e instanceof globalThis.WebGL2RenderingContext;
        i && (this.webGLVersion = 2),
        t && !t.stencil && console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");
        var o = i || !!e.getExtension("OES_element_index_uint");
        (this.supports.uint32Indices = o) || console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")
    }
    ,
    ContextSystem);
    function ContextSystem(e) {
        this.renderer = e,
        this.webGLVersion = 1,
        this.extensions = {},
        this.supports = {
            uint32Indices: !1
        },
        this.handleContextLost = this.handleContextLost.bind(this),
        this.handleContextRestored = this.handleContextRestored.bind(this),
        e.view.addEventListener("webglcontextlost", this.handleContextLost, !1),
        e.view.addEventListener("webglcontextrestored", this.handleContextRestored, !1)
    }
    var Ri = function GLFramebuffer(e) {
        this.framebuffer = e,
        this.stencil = null,
        this.dirtyId = -1,
        this.dirtyFormat = -1,
        this.dirtySize = -1,
        this.multisample = ne.MSAA_QUALITY.NONE,
        this.msaaBuffer = null,
        this.blitFramebuffer = null,
        this.mipLevel = 0
    }
      , Pi = new ze
      , Oi = (FramebufferSystem.prototype.contextChange = function() {
        this.disposeAll(!0);
        var e = this.gl = this.renderer.gl;
        if (this.CONTEXT_UID = this.renderer.CONTEXT_UID,
        this.current = this.unknownFramebuffer,
        this.viewport = new ze,
        this.hasMRT = !0,
        this.writeDepthTexture = !0,
        1 === this.renderer.context.webGLVersion) {
            var t = this.renderer.context.extensions.drawBuffers
              , i = this.renderer.context.extensions.depthTexture;
            Z.PREFER_ENV === ne.ENV.WEBGL_LEGACY && (i = t = null),
            t ? e.drawBuffers = function(e) {
                return t.drawBuffersWEBGL(e)
            }
            : (this.hasMRT = !1,
            e.drawBuffers = function() {}
            ),
            i || (this.writeDepthTexture = !1)
        } else
            this.msaaSamples = e.getInternalformatParameter(e.RENDERBUFFER, e.RGBA8, e.SAMPLES)
    }
    ,
    FramebufferSystem.prototype.bind = function(e, t, i) {
        void 0 === i && (i = 0);
        var o = this.gl;
        if (e) {
            var n = e.glFramebuffers[this.CONTEXT_UID] || this.initFramebuffer(e);
            this.current !== e && (this.current = e,
            o.bindFramebuffer(o.FRAMEBUFFER, n.framebuffer)),
            n.mipLevel !== i && (e.dirtyId++,
            e.dirtyFormat++,
            n.mipLevel = i),
            n.dirtyId !== e.dirtyId && (n.dirtyId = e.dirtyId,
            n.dirtyFormat !== e.dirtyFormat ? (n.dirtyFormat = e.dirtyFormat,
            n.dirtySize = e.dirtySize,
            this.updateFramebuffer(e, i)) : n.dirtySize !== e.dirtySize && (n.dirtySize = e.dirtySize,
            this.resizeFramebuffer(e)));
            for (var r = 0; r < e.colorTextures.length; r++) {
                var s = e.colorTextures[r];
                this.renderer.texture.unbind(s.parentTextureArray || s)
            }
            if (e.depthTexture && this.renderer.texture.unbind(e.depthTexture),
            t) {
                var a = t.width >> i
                  , l = t.height >> i
                  , c = a / t.width;
                this.setViewport(t.x * c, t.y * c, a, l)
            } else
                a = e.width >> i,
                l = e.height >> i,
                this.setViewport(0, 0, a, l)
        } else
            this.current && (this.current = null,
            o.bindFramebuffer(o.FRAMEBUFFER, null)),
            t ? this.setViewport(t.x, t.y, t.width, t.height) : this.setViewport(0, 0, this.renderer.width, this.renderer.height)
    }
    ,
    FramebufferSystem.prototype.setViewport = function(e, t, i, o) {
        var n = this.viewport;
        e = Math.round(e),
        t = Math.round(t),
        i = Math.round(i),
        o = Math.round(o),
        n.width === i && n.height === o && n.x === e && n.y === t || (n.x = e,
        n.y = t,
        n.width = i,
        n.height = o,
        this.gl.viewport(e, t, i, o))
    }
    ,
    Object.defineProperty(FramebufferSystem.prototype, "size", {
        get: function() {
            return this.current ? {
                x: 0,
                y: 0,
                width: this.current.width,
                height: this.current.height
            } : {
                x: 0,
                y: 0,
                width: this.renderer.width,
                height: this.renderer.height
            }
        },
        enumerable: !1,
        configurable: !0
    }),
    FramebufferSystem.prototype.clear = function(e, t, i, o, n) {
        void 0 === n && (n = ne.BUFFER_BITS.COLOR | ne.BUFFER_BITS.DEPTH);
        var r = this.gl;
        r.clearColor(e, t, i, o),
        r.clear(n)
    }
    ,
    FramebufferSystem.prototype.initFramebuffer = function(e) {
        var t = this.gl
          , i = new Ri(t.createFramebuffer());
        return i.multisample = this.detectSamples(e.multisample),
        e.glFramebuffers[this.CONTEXT_UID] = i,
        this.managedFramebuffers.push(e),
        e.disposeRunner.add(this),
        i
    }
    ,
    FramebufferSystem.prototype.resizeFramebuffer = function(e) {
        var t = this.gl
          , i = e.glFramebuffers[this.CONTEXT_UID];
        i.msaaBuffer && (t.bindRenderbuffer(t.RENDERBUFFER, i.msaaBuffer),
        t.renderbufferStorageMultisample(t.RENDERBUFFER, i.multisample, t.RGBA8, e.width, e.height)),
        i.stencil && (t.bindRenderbuffer(t.RENDERBUFFER, i.stencil),
        i.msaaBuffer ? t.renderbufferStorageMultisample(t.RENDERBUFFER, i.multisample, t.DEPTH24_STENCIL8, e.width, e.height) : t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_STENCIL, e.width, e.height));
        var o = e.colorTextures
          , n = o.length;
        t.drawBuffers || (n = Math.min(n, 1));
        for (var r = 0; r < n; r++) {
            var s = o[r]
              , a = s.parentTextureArray || s;
            this.renderer.texture.bind(a, 0)
        }
        e.depthTexture && this.writeDepthTexture && this.renderer.texture.bind(e.depthTexture, 0)
    }
    ,
    FramebufferSystem.prototype.updateFramebuffer = function(e, t) {
        var i = this.gl
          , o = e.glFramebuffers[this.CONTEXT_UID]
          , n = e.colorTextures
          , r = n.length;
        i.drawBuffers || (r = Math.min(r, 1)),
        1 < o.multisample && this.canMultisampleFramebuffer(e) ? (o.msaaBuffer = o.msaaBuffer || i.createRenderbuffer(),
        i.bindRenderbuffer(i.RENDERBUFFER, o.msaaBuffer),
        i.renderbufferStorageMultisample(i.RENDERBUFFER, o.multisample, i.RGBA8, e.width, e.height),
        i.framebufferRenderbuffer(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0, i.RENDERBUFFER, o.msaaBuffer)) : o.msaaBuffer && (i.deleteRenderbuffer(o.msaaBuffer),
        o.msaaBuffer = null,
        o.blitFramebuffer && (o.blitFramebuffer.dispose(),
        o.blitFramebuffer = null));
        for (var s = [], a = 0; a < r; a++) {
            var l = n[a]
              , c = l.parentTextureArray || l;
            this.renderer.texture.bind(c, 0),
            0 === a && o.msaaBuffer || (i.framebufferTexture2D(i.FRAMEBUFFER, i.COLOR_ATTACHMENT0 + a, l.target, c._glTextures[this.CONTEXT_UID].texture, t),
            s.push(i.COLOR_ATTACHMENT0 + a))
        }
        if (1 < s.length && i.drawBuffers(s),
        e.depthTexture && this.writeDepthTexture) {
            var u = e.depthTexture;
            this.renderer.texture.bind(u, 0),
            i.framebufferTexture2D(i.FRAMEBUFFER, i.DEPTH_ATTACHMENT, i.TEXTURE_2D, u._glTextures[this.CONTEXT_UID].texture, t)
        }
        !e.stencil && !e.depth || e.depthTexture && this.writeDepthTexture ? o.stencil && (i.deleteRenderbuffer(o.stencil),
        o.stencil = null) : (o.stencil = o.stencil || i.createRenderbuffer(),
        i.bindRenderbuffer(i.RENDERBUFFER, o.stencil),
        o.msaaBuffer ? i.renderbufferStorageMultisample(i.RENDERBUFFER, o.multisample, i.DEPTH24_STENCIL8, e.width, e.height) : i.renderbufferStorage(i.RENDERBUFFER, i.DEPTH_STENCIL, e.width, e.height),
        i.framebufferRenderbuffer(i.FRAMEBUFFER, i.DEPTH_STENCIL_ATTACHMENT, i.RENDERBUFFER, o.stencil))
    }
    ,
    FramebufferSystem.prototype.canMultisampleFramebuffer = function(e) {
        return 1 !== this.renderer.context.webGLVersion && e.colorTextures.length <= 1 && !e.depthTexture
    }
    ,
    FramebufferSystem.prototype.detectSamples = function(e) {
        var t = this.msaaSamples
          , i = ne.MSAA_QUALITY.NONE;
        if (e <= 1 || null === t)
            return i;
        for (var o = 0; o < t.length; o++)
            if (t[o] <= e) {
                i = t[o];
                break
            }
        return 1 === i && (i = ne.MSAA_QUALITY.NONE),
        i
    }
    ,
    FramebufferSystem.prototype.blit = function(e, t, i) {
        var o = this.current
          , n = this.renderer
          , r = this.gl
          , s = this.CONTEXT_UID;
        if (2 === n.context.webGLVersion && o) {
            var a = o.glFramebuffers[s];
            if (a) {
                if (!e) {
                    if (!a.msaaBuffer)
                        return;
                    var l = o.colorTextures[0];
                    if (!l)
                        return;
                    a.blitFramebuffer || (a.blitFramebuffer = new $t(o.width,o.height),
                    a.blitFramebuffer.addColorTexture(0, l)),
                    (e = a.blitFramebuffer).colorTextures[0] !== l && (e.colorTextures[0] = l,
                    e.dirtyId++,
                    e.dirtyFormat++),
                    e.width === o.width && e.height === o.height || (e.width = o.width,
                    e.height = o.height,
                    e.dirtyId++,
                    e.dirtySize++)
                }
                t || ((t = Pi).width = o.width,
                t.height = o.height),
                i = i || t;
                var c = t.width === i.width && t.height === i.height;
                this.bind(e),
                r.bindFramebuffer(r.READ_FRAMEBUFFER, a.framebuffer),
                r.blitFramebuffer(t.left, t.top, t.right, t.bottom, i.left, i.top, i.right, i.bottom, r.COLOR_BUFFER_BIT, c ? r.NEAREST : r.LINEAR)
            }
        }
    }
    ,
    FramebufferSystem.prototype.disposeFramebuffer = function(e, t) {
        var i = e.glFramebuffers[this.CONTEXT_UID]
          , o = this.gl;
        if (i) {
            delete e.glFramebuffers[this.CONTEXT_UID];
            var n = this.managedFramebuffers.indexOf(e);
            0 <= n && this.managedFramebuffers.splice(n, 1),
            e.disposeRunner.remove(this),
            t || (o.deleteFramebuffer(i.framebuffer),
            i.msaaBuffer && o.deleteRenderbuffer(i.msaaBuffer),
            i.stencil && o.deleteRenderbuffer(i.stencil)),
            i.blitFramebuffer && i.blitFramebuffer.dispose()
        }
    }
    ,
    FramebufferSystem.prototype.disposeAll = function(e) {
        var t = this.managedFramebuffers;
        this.managedFramebuffers = [];
        for (var i = 0; i < t.length; i++)
            this.disposeFramebuffer(t[i], e)
    }
    ,
    FramebufferSystem.prototype.forceStencil = function() {
        var e = this.current;
        if (e) {
            var t = e.glFramebuffers[this.CONTEXT_UID];
            if (t && !t.stencil) {
                e.stencil = !0;
                var i = e.width
                  , o = e.height
                  , n = this.gl
                  , r = n.createRenderbuffer();
                n.bindRenderbuffer(n.RENDERBUFFER, r),
                t.msaaBuffer ? n.renderbufferStorageMultisample(n.RENDERBUFFER, t.multisample, n.DEPTH24_STENCIL8, i, o) : n.renderbufferStorage(n.RENDERBUFFER, n.DEPTH_STENCIL, i, o),
                t.stencil = r,
                n.framebufferRenderbuffer(n.FRAMEBUFFER, n.DEPTH_STENCIL_ATTACHMENT, n.RENDERBUFFER, r)
            }
        }
    }
    ,
    FramebufferSystem.prototype.reset = function() {
        this.current = this.unknownFramebuffer,
        this.viewport = new ze
    }
    ,
    FramebufferSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    FramebufferSystem);
    function FramebufferSystem(e) {
        this.renderer = e,
        this.managedFramebuffers = [],
        this.unknownFramebuffer = new $t(10,10),
        this.msaaSamples = null
    }
    var Di = {
        5126: 4,
        5123: 2,
        5121: 1
    }
      , Li = (GeometrySystem.prototype.contextChange = function() {
        this.disposeAll(!0);
        var e = this.gl = this.renderer.gl
          , t = this.renderer.context;
        if (this.CONTEXT_UID = this.renderer.CONTEXT_UID,
        2 !== t.webGLVersion) {
            var i = this.renderer.context.extensions.vertexArrayObject;
            Z.PREFER_ENV === ne.ENV.WEBGL_LEGACY && (i = null),
            i ? (e.createVertexArray = function() {
                return i.createVertexArrayOES()
            }
            ,
            e.bindVertexArray = function(e) {
                return i.bindVertexArrayOES(e)
            }
            ,
            e.deleteVertexArray = function(e) {
                return i.deleteVertexArrayOES(e)
            }
            ) : (this.hasVao = !1,
            e.createVertexArray = function() {
                return null
            }
            ,
            e.bindVertexArray = function() {
                return null
            }
            ,
            e.deleteVertexArray = function() {
                return null
            }
            )
        }
        if (2 !== t.webGLVersion) {
            var r = e.getExtension("ANGLE_instanced_arrays");
            r ? (e.vertexAttribDivisor = function(e, t) {
                return r.vertexAttribDivisorANGLE(e, t)
            }
            ,
            e.drawElementsInstanced = function(e, t, i, o, n) {
                return r.drawElementsInstancedANGLE(e, t, i, o, n)
            }
            ,
            e.drawArraysInstanced = function(e, t, i, o) {
                return r.drawArraysInstancedANGLE(e, t, i, o)
            }
            ) : this.hasInstance = !1
        }
        this.canUseUInt32ElementIndex = 2 === t.webGLVersion || !!t.extensions.uint32ElementIndex
    }
    ,
    GeometrySystem.prototype.bind = function(e, t) {
        t = t || this.renderer.shader.shader;
        var i = this.gl
          , o = e.glVertexArrayObjects[this.CONTEXT_UID]
          , n = !1;
        o || ((this.managedGeometries[e.id] = e).disposeRunner.add(this),
        e.glVertexArrayObjects[this.CONTEXT_UID] = o = {},
        n = !0);
        var r = o[t.program.id] || this.initGeometryVao(e, t, n);
        this._activeGeometry = e,
        this._activeVao !== r && (this._activeVao = r,
        this.hasVao ? i.bindVertexArray(r) : this.activateVao(e, t.program)),
        this.updateBuffers()
    }
    ,
    GeometrySystem.prototype.reset = function() {
        this.unbind()
    }
    ,
    GeometrySystem.prototype.updateBuffers = function() {
        for (var e = this._activeGeometry, t = this.renderer.buffer, i = 0; i < e.buffers.length; i++) {
            var o = e.buffers[i];
            t.update(o)
        }
    }
    ,
    GeometrySystem.prototype.checkCompatibility = function(e, t) {
        var i = e.attributes
          , o = t.attributeData;
        for (var n in o)
            if (!i[n])
                throw new Error('shader and geometry incompatible, geometry missing the "' + n + '" attribute')
    }
    ,
    GeometrySystem.prototype.getSignature = function(e, t) {
        var i = e.attributes
          , o = t.attributeData
          , n = ["g", e.id];
        for (var r in i)
            o[r] && n.push(r, o[r].location);
        return n.join("-")
    }
    ,
    GeometrySystem.prototype.initGeometryVao = function(e, t, i) {
        void 0 === i && (i = !0);
        var o = this.gl
          , n = this.CONTEXT_UID
          , r = this.renderer.buffer
          , s = t.program;
        s.glPrograms[n] || this.renderer.shader.generateProgram(t),
        this.checkCompatibility(e, s);
        var a = this.getSignature(e, s)
          , l = e.glVertexArrayObjects[this.CONTEXT_UID]
          , c = l[a];
        if (c)
            return l[s.id] = c;
        var u = e.buffers
          , d = e.attributes
          , h = {}
          , p = {};
        for (var _ in u)
            h[_] = 0,
            p[_] = 0;
        for (var _ in d)
            !d[_].size && s.attributeData[_] ? d[_].size = s.attributeData[_].size : d[_].size || console.warn("PIXI Geometry attribute '" + _ + "' size cannot be determined (likely the bound shader does not have the attribute)"),
            h[d[_].buffer] += d[_].size * Di[d[_].type];
        for (var _ in d) {
            var f = d[_]
              , m = f.size;
            void 0 === f.stride && (h[f.buffer] === m * Di[f.type] ? f.stride = 0 : f.stride = h[f.buffer]),
            void 0 === f.start && (f.start = p[f.buffer],
            p[f.buffer] += m * Di[f.type])
        }
        c = o.createVertexArray(),
        o.bindVertexArray(c);
        for (var T = 0; T < u.length; T++) {
            var v = u[T];
            r.bind(v),
            i && v._glBuffers[n].refCount++
        }
        return this.activateVao(e, s),
        this._activeVao = c,
        l[s.id] = c,
        l[a] = c
    }
    ,
    GeometrySystem.prototype.disposeGeometry = function(e, t) {
        var i;
        if (this.managedGeometries[e.id]) {
            delete this.managedGeometries[e.id];
            var o = e.glVertexArrayObjects[this.CONTEXT_UID]
              , n = this.gl
              , r = e.buffers
              , s = null === (i = this.renderer) || void 0 === i ? void 0 : i.buffer;
            if (e.disposeRunner.remove(this),
            o) {
                if (s)
                    for (var a = 0; a < r.length; a++) {
                        var l = r[a]._glBuffers[this.CONTEXT_UID];
                        l && (l.refCount--,
                        0 !== l.refCount || t || s.dispose(r[a], t))
                    }
                if (!t)
                    for (var c in o)
                        if ("g" === c[0]) {
                            var u = o[c];
                            this._activeVao === u && this.unbind(),
                            n.deleteVertexArray(u)
                        }
                delete e.glVertexArrayObjects[this.CONTEXT_UID]
            }
        }
    }
    ,
    GeometrySystem.prototype.disposeAll = function(e) {
        for (var t = Object.keys(this.managedGeometries), i = 0; i < t.length; i++)
            this.disposeGeometry(this.managedGeometries[t[i]], e)
    }
    ,
    GeometrySystem.prototype.activateVao = function(e, t) {
        var i = this.gl
          , o = this.CONTEXT_UID
          , n = this.renderer.buffer
          , r = e.buffers
          , s = e.attributes;
        e.indexBuffer && n.bind(e.indexBuffer);
        var a = null;
        for (var l in s) {
            var c = s[l]
              , u = r[c.buffer]
              , d = u._glBuffers[o];
            if (t.attributeData[l]) {
                a !== d && (n.bind(u),
                a = d);
                var h = t.attributeData[l].location;
                if (i.enableVertexAttribArray(h),
                i.vertexAttribPointer(h, c.size, c.type || i.FLOAT, c.normalized, c.stride, c.start),
                c.instance) {
                    if (!this.hasInstance)
                        throw new Error("geometry error, GPU Instancing is not supported on this device");
                    i.vertexAttribDivisor(h, 1)
                }
            }
        }
    }
    ,
    GeometrySystem.prototype.draw = function(e, t, i, o) {
        var n = this.gl
          , r = this._activeGeometry;
        if (r.indexBuffer) {
            var s = r.indexBuffer.data.BYTES_PER_ELEMENT
              , a = 2 === s ? n.UNSIGNED_SHORT : n.UNSIGNED_INT;
            2 === s || 4 === s && this.canUseUInt32ElementIndex ? r.instanced ? n.drawElementsInstanced(e, t || r.indexBuffer.data.length, a, (i || 0) * s, o || 1) : n.drawElements(e, t || r.indexBuffer.data.length, a, (i || 0) * s) : console.warn("unsupported index buffer type: uint32")
        } else
            r.instanced ? n.drawArraysInstanced(e, i, t || r.getSize(), o || 1) : n.drawArrays(e, i, t || r.getSize());
        return this
    }
    ,
    GeometrySystem.prototype.unbind = function() {
        this.gl.bindVertexArray(null),
        this._activeVao = null,
        this._activeGeometry = null
    }
    ,
    GeometrySystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    GeometrySystem);
    function GeometrySystem(e) {
        this.renderer = e,
        this._activeGeometry = null,
        this._activeVao = null,
        this.hasVao = !0,
        this.hasInstance = !0,
        this.canUseUInt32ElementIndex = !1,
        this.managedGeometries = {}
    }
    var Mi = (Object.defineProperty(MaskData.prototype, "filter", {
        get: function() {
            return this._filters ? this._filters[0] : null
        },
        set: function(e) {
            e ? this._filters ? this._filters[0] = e : this._filters = [e] : this._filters = null
        },
        enumerable: !1,
        configurable: !0
    }),
    MaskData.prototype.reset = function() {
        this.pooled && (this.maskObject = null,
        this.type = ne.MASK_TYPES.NONE,
        this.autoDetect = !0),
        this._target = null,
        this._scissorRectLocal = null
    }
    ,
    MaskData.prototype.copyCountersOrReset = function(e) {
        e ? (this._stencilCounter = e._stencilCounter,
        this._scissorCounter = e._scissorCounter,
        this._scissorRect = e._scissorRect) : (this._stencilCounter = 0,
        this._scissorCounter = 0,
        this._scissorRect = null)
    }
    ,
    MaskData);
    function MaskData(e) {
        void 0 === e && (e = null),
        this.type = ne.MASK_TYPES.NONE,
        this.autoDetect = !0,
        this.maskObject = e || null,
        this.pooled = !1,
        this.isMaskData = !0,
        this.resolution = null,
        this.multisample = Z.FILTER_MULTISAMPLE,
        this.enabled = !0,
        this.colorMask = 15,
        this._filters = null,
        this._stencilCounter = 0,
        this._scissorCounter = 0,
        this._scissorRect = null,
        this._scissorRectLocal = null,
        this._colorMask = 15,
        this._target = null
    }
    function compileShader(e, t, i) {
        var o = e.createShader(t);
        return e.shaderSource(o, i),
        e.compileShader(o),
        o
    }
    function logPrettyShaderError(e, t) {
        var i = e.getShaderSource(t).split("\n").map(function(e, t) {
            return t + ": " + e
        })
          , o = e.getShaderInfoLog(t)
          , n = o.split("\n")
          , r = {}
          , s = n.map(function(e) {
            return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/, "$1"))
        }).filter(function(e) {
            return !(!e || r[e]) && (r[e] = !0)
        })
          , a = [""];
        s.forEach(function(e) {
            i[e - 1] = "%c" + i[e - 1] + "%c",
            a.push("background: #FF0000; color:#FFFFFF; font-size: 10px", "font-size: 10px")
        });
        var l = i.join("\n");
        a[0] = l,
        console.error(o),
        console.groupCollapsed("click to view full shader code"),
        console.warn.apply(console, a),
        console.groupEnd()
    }
    function booleanArray(e) {
        for (var t = new Array(e), i = 0; i < t.length; i++)
            t[i] = !1;
        return t
    }
    function defaultValue(e, t) {
        switch (e) {
        case "float":
            return 0;
        case "vec2":
            return new Float32Array(2 * t);
        case "vec3":
            return new Float32Array(3 * t);
        case "vec4":
            return new Float32Array(4 * t);
        case "int":
        case "uint":
        case "sampler2D":
        case "sampler2DArray":
            return 0;
        case "ivec2":
            return new Int32Array(2 * t);
        case "ivec3":
            return new Int32Array(3 * t);
        case "ivec4":
            return new Int32Array(4 * t);
        case "uvec2":
            return new Uint32Array(2 * t);
        case "uvec3":
            return new Uint32Array(3 * t);
        case "uvec4":
            return new Uint32Array(4 * t);
        case "bool":
            return !1;
        case "bvec2":
            return booleanArray(2 * t);
        case "bvec3":
            return booleanArray(3 * t);
        case "bvec4":
            return booleanArray(4 * t);
        case "mat2":
            return new Float32Array([1, 0, 0, 1]);
        case "mat3":
            return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
        case "mat4":
            return new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])
        }
        return null
    }
    var xi, Bi = {}, Ni = Bi;
    function getTestContext() {
        if (Ni === Bi || Ni && Ni.isContextLost()) {
            var e = Z.ADAPTER.createCanvas()
              , t = void 0;
            Z.PREFER_ENV >= ne.ENV.WEBGL2 && (t = e.getContext("webgl2", {})),
            t || ((t = e.getContext("webgl", {}) || e.getContext("experimental-webgl", {})) ? t.getExtension("WEBGL_draw_buffers") : t = null),
            Ni = t
        }
        return Ni
    }
    function setPrecision(e, t, i) {
        if ("precision" === e.substring(0, 9))
            return i !== ne.PRECISION.HIGH && "precision highp" === e.substring(0, 15) ? e.replace("precision highp", "precision mediump") : e;
        var o = t;
        return t === ne.PRECISION.HIGH && i !== ne.PRECISION.HIGH && (o = ne.PRECISION.MEDIUM),
        "precision " + o + " float;\n" + e
    }
    var Fi = {
        float: 1,
        vec2: 2,
        vec3: 3,
        vec4: 4,
        int: 1,
        ivec2: 2,
        ivec3: 3,
        ivec4: 4,
        uint: 1,
        uvec2: 2,
        uvec3: 3,
        uvec4: 4,
        bool: 1,
        bvec2: 2,
        bvec3: 3,
        bvec4: 4,
        mat2: 4,
        mat3: 9,
        mat4: 16,
        sampler2D: 1
    };
    function mapSize(e) {
        return Fi[e]
    }
    var ki = null
      , Gi = {
        FLOAT: "float",
        FLOAT_VEC2: "vec2",
        FLOAT_VEC3: "vec3",
        FLOAT_VEC4: "vec4",
        INT: "int",
        INT_VEC2: "ivec2",
        INT_VEC3: "ivec3",
        INT_VEC4: "ivec4",
        UNSIGNED_INT: "uint",
        UNSIGNED_INT_VEC2: "uvec2",
        UNSIGNED_INT_VEC3: "uvec3",
        UNSIGNED_INT_VEC4: "uvec4",
        BOOL: "bool",
        BOOL_VEC2: "bvec2",
        BOOL_VEC3: "bvec3",
        BOOL_VEC4: "bvec4",
        FLOAT_MAT2: "mat2",
        FLOAT_MAT3: "mat3",
        FLOAT_MAT4: "mat4",
        SAMPLER_2D: "sampler2D",
        INT_SAMPLER_2D: "sampler2D",
        UNSIGNED_INT_SAMPLER_2D: "sampler2D",
        SAMPLER_CUBE: "samplerCube",
        INT_SAMPLER_CUBE: "samplerCube",
        UNSIGNED_INT_SAMPLER_CUBE: "samplerCube",
        SAMPLER_2D_ARRAY: "sampler2DArray",
        INT_SAMPLER_2D_ARRAY: "sampler2DArray",
        UNSIGNED_INT_SAMPLER_2D_ARRAY: "sampler2DArray"
    };
    function mapType(e, t) {
        if (!ki) {
            var i = Object.keys(Gi);
            ki = {};
            for (var o = 0; o < i.length; ++o) {
                var n = i[o];
                ki[e[n]] = Gi[n]
            }
        }
        return ki[t]
    }
    var ji = [{
        test: function(e) {
            return "float" === e.type && 1 === e.size && !e.isArray
        },
        code: function(e) {
            return '\n            if(uv["' + e + '"] !== ud["' + e + '"].value)\n            {\n                ud["' + e + '"].value = uv["' + e + '"]\n                gl.uniform1f(ud["' + e + '"].location, uv["' + e + '"])\n            }\n            '
        }
    }, {
        test: function(e, t) {
            return !("sampler2D" !== e.type && "samplerCube" !== e.type && "sampler2DArray" !== e.type || 1 !== e.size || e.isArray || null != t && void 0 === t.castToBaseTexture)
        },
        code: function(e) {
            return 't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["' + e + '"], t);\n\n            if(ud["' + e + '"].value !== t)\n            {\n                ud["' + e + '"].value = t;\n                gl.uniform1i(ud["' + e + '"].location, t);\n; // eslint-disable-line max-len\n            }'
        }
    }, {
        test: function(e, t) {
            return "mat3" === e.type && 1 === e.size && !e.isArray && void 0 !== t.a
        },
        code: function(e) {
            return '\n            gl.uniformMatrix3fv(ud["' + e + '"].location, false, uv["' + e + '"].toArray(true));\n            '
        },
        codeUbo: function(e) {
            return "\n                var " + e + "_matrix = uv." + e + ".toArray(true);\n\n                data[offset] = " + e + "_matrix[0];\n                data[offset+1] = " + e + "_matrix[1];\n                data[offset+2] = " + e + "_matrix[2];\n        \n                data[offset + 4] = " + e + "_matrix[3];\n                data[offset + 5] = " + e + "_matrix[4];\n                data[offset + 6] = " + e + "_matrix[5];\n        \n                data[offset + 8] = " + e + "_matrix[6];\n                data[offset + 9] = " + e + "_matrix[7];\n                data[offset + 10] = " + e + "_matrix[8];\n            "
        }
    }, {
        test: function(e, t) {
            return "vec2" === e.type && 1 === e.size && !e.isArray && void 0 !== t.x
        },
        code: function(e) {
            return '\n                cv = ud["' + e + '"].value;\n                v = uv["' + e + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["' + e + '"].location, v.x, v.y);\n                }'
        },
        codeUbo: function(e) {
            return "\n                v = uv." + e + ";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "
        }
    }, {
        test: function(e) {
            return "vec2" === e.type && 1 === e.size && !e.isArray
        },
        code: function(e) {
            return '\n                cv = ud["' + e + '"].value;\n                v = uv["' + e + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["' + e + '"].location, v[0], v[1]);\n                }\n            '
        }
    }, {
        test: function(e, t) {
            return "vec4" === e.type && 1 === e.size && !e.isArray && void 0 !== t.width
        },
        code: function(e) {
            return '\n                cv = ud["' + e + '"].value;\n                v = uv["' + e + '"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["' + e + '"].location, v.x, v.y, v.width, v.height)\n                }'
        },
        codeUbo: function(e) {
            return "\n                    v = uv." + e + ";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "
        }
    }, {
        test: function(e) {
            return "vec4" === e.type && 1 === e.size && !e.isArray
        },
        code: function(e) {
            return '\n                cv = ud["' + e + '"].value;\n                v = uv["' + e + '"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["' + e + '"].location, v[0], v[1], v[2], v[3])\n                }'
        }
    }]
      , qi = {
        float: "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",
        vec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",
        vec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",
        vec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",
        int: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
        ivec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
        ivec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
        ivec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
        uint: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",
        uvec2: "\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",
        uvec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",
        uvec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",
        bool: "\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",
        bvec2: "\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",
        bvec3: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",
        bvec4: "\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",
        mat2: "gl.uniformMatrix2fv(location, false, v)",
        mat3: "gl.uniformMatrix3fv(location, false, v)",
        mat4: "gl.uniformMatrix4fv(location, false, v)",
        sampler2D: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
        samplerCube: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",
        sampler2DArray: "\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"
    }
      , zi = {
        float: "gl.uniform1fv(location, v)",
        vec2: "gl.uniform2fv(location, v)",
        vec3: "gl.uniform3fv(location, v)",
        vec4: "gl.uniform4fv(location, v)",
        mat4: "gl.uniformMatrix4fv(location, false, v)",
        mat3: "gl.uniformMatrix3fv(location, false, v)",
        mat2: "gl.uniformMatrix2fv(location, false, v)",
        int: "gl.uniform1iv(location, v)",
        ivec2: "gl.uniform2iv(location, v)",
        ivec3: "gl.uniform3iv(location, v)",
        ivec4: "gl.uniform4iv(location, v)",
        uint: "gl.uniform1uiv(location, v)",
        uvec2: "gl.uniform2uiv(location, v)",
        uvec3: "gl.uniform3uiv(location, v)",
        uvec4: "gl.uniform4uiv(location, v)",
        bool: "gl.uniform1iv(location, v)",
        bvec2: "gl.uniform2iv(location, v)",
        bvec3: "gl.uniform3iv(location, v)",
        bvec4: "gl.uniform4iv(location, v)",
        sampler2D: "gl.uniform1iv(location, v)",
        samplerCube: "gl.uniform1iv(location, v)",
        sampler2DArray: "gl.uniform1iv(location, v)"
    };
    var Hi, Yi = ["precision mediump float;", "void main(void){", "float test = 0.1;", "%forloop%", "gl_FragColor = vec4(0.0);", "}"].join("\n");
    function generateIfTestSrc(e) {
        for (var t = "", i = 0; i < e; ++i)
            0 < i && (t += "\nelse "),
            i < e - 1 && (t += "if(test == " + i + ".0){}");
        return t
    }
    function checkMaxIfStatementsInShader(e, t) {
        if (0 === e)
            throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");
        for (var i = t.createShader(t.FRAGMENT_SHADER); ; ) {
            var o = Yi.replace(/%forloop%/gi, generateIfTestSrc(e));
            if (t.shaderSource(i, o),
            t.compileShader(i),
            t.getShaderParameter(i, t.COMPILE_STATUS))
                break;
            e = e / 2 | 0
        }
        return e
    }
    var Xi = 0
      , Wi = {}
      , Ki = (Object.defineProperty(Program, "defaultVertexSrc", {
        get: function() {
            return "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Program, "defaultFragmentSrc", {
        get: function() {
            return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"
        },
        enumerable: !1,
        configurable: !0
    }),
    Program.from = function(e, t, i) {
        var o = e + t
          , n = Pe[o];
        return n || (Pe[o] = n = new Program(e,t,i)),
        n
    }
    ,
    Program);
    function Program(e, t, i) {
        void 0 === i && (i = "pixi-shader"),
        this.id = Xi++,
        this.vertexSrc = e || Program.defaultVertexSrc,
        this.fragmentSrc = t || Program.defaultFragmentSrc,
        this.vertexSrc = this.vertexSrc.trim(),
        this.fragmentSrc = this.fragmentSrc.trim(),
        "#version" !== this.vertexSrc.substring(0, 8) && (i = i.replace(/\s+/g, "-"),
        Wi[i] ? (Wi[i]++,
        i += "-" + Wi[i]) : Wi[i] = 1,
        this.vertexSrc = "#define SHADER_NAME " + i + "\n" + this.vertexSrc,
        this.fragmentSrc = "#define SHADER_NAME " + i + "\n" + this.fragmentSrc,
        this.vertexSrc = setPrecision(this.vertexSrc, Z.PRECISION_VERTEX, ne.PRECISION.HIGH),
        this.fragmentSrc = setPrecision(this.fragmentSrc, Z.PRECISION_FRAGMENT, function getMaxFragmentPrecision() {
            if (!xi) {
                xi = ne.PRECISION.MEDIUM;
                var e = getTestContext();
                if (e && e.getShaderPrecisionFormat) {
                    var t = e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT);
                    xi = t.precision ? ne.PRECISION.HIGH : ne.PRECISION.MEDIUM
                }
            }
            return xi
        }())),
        this.glPrograms = {},
        this.syncUniforms = null
    }
    var Ji = (Shader.prototype.checkUniformExists = function(e, t) {
        if (t.uniforms[e])
            return !0;
        for (var i in t.uniforms) {
            var o = t.uniforms[i];
            if (o.group && this.checkUniformExists(e, o))
                return !0
        }
        return !1
    }
    ,
    Shader.prototype.destroy = function() {
        this.uniformGroup = null,
        this.disposeRunner.emit(this),
        this.disposeRunner.destroy()
    }
    ,
    Object.defineProperty(Shader.prototype, "uniforms", {
        get: function() {
            return this.uniformGroup.uniforms
        },
        enumerable: !1,
        configurable: !0
    }),
    Shader.from = function(e, t, i) {
        return new Shader(Ki.from(e, t),i)
    }
    ,
    Shader);
    function Shader(e, t) {
        this.uniformBindCount = 0,
        this.program = e,
        this.uniformGroup = t ? t instanceof wi ? t : new wi(t) : new wi({}),
        this.disposeRunner = new vt("disposeShader")
    }
    var Qi = (Object.defineProperty(State.prototype, "blend", {
        get: function() {
            return !!(1 & this.data)
        },
        set: function(e) {
            !!(1 & this.data) !== e && (this.data ^= 1)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "offsets", {
        get: function() {
            return !!(2 & this.data)
        },
        set: function(e) {
            !!(2 & this.data) !== e && (this.data ^= 2)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "culling", {
        get: function() {
            return !!(4 & this.data)
        },
        set: function(e) {
            !!(4 & this.data) !== e && (this.data ^= 4)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "depthTest", {
        get: function() {
            return !!(8 & this.data)
        },
        set: function(e) {
            !!(8 & this.data) !== e && (this.data ^= 8)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "depthMask", {
        get: function() {
            return !!(32 & this.data)
        },
        set: function(e) {
            !!(32 & this.data) !== e && (this.data ^= 32)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "clockwiseFrontFace", {
        get: function() {
            return !!(16 & this.data)
        },
        set: function(e) {
            !!(16 & this.data) !== e && (this.data ^= 16)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "blendMode", {
        get: function() {
            return this._blendMode
        },
        set: function(e) {
            this.blend = e !== ne.BLEND_MODES.NONE,
            this._blendMode = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(State.prototype, "polygonOffset", {
        get: function() {
            return this._polygonOffset
        },
        set: function(e) {
            this.offsets = !!e,
            this._polygonOffset = e
        },
        enumerable: !1,
        configurable: !0
    }),
    State.prototype.toString = function() {
        return "[@pixi/core:State blendMode=" + this.blendMode + " clockwiseFrontFace=" + this.clockwiseFrontFace + " culling=" + this.culling + " depthMask=" + this.depthMask + " polygonOffset=" + this.polygonOffset + "]"
    }
    ,
    State.for2d = function() {
        var e = new State;
        return e.depthTest = !1,
        e.blend = !0,
        e
    }
    ,
    State);
    function State() {
        this.data = 0,
        this.blendMode = ne.BLEND_MODES.NORMAL,
        this.polygonOffset = 0,
        this.blend = !0,
        this.depthMask = !0
    }
    var $i, Zi = (__extends$i(Filter, $i = Ji),
    Filter.prototype.apply = function(e, t, i, o, n) {
        e.applyFilter(this, t, i, o)
    }
    ,
    Object.defineProperty(Filter.prototype, "blendMode", {
        get: function() {
            return this.state.blendMode
        },
        set: function(e) {
            this.state.blendMode = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Filter.prototype, "resolution", {
        get: function() {
            return this._resolution
        },
        set: function(e) {
            this._resolution = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Filter, "defaultVertexSrc", {
        get: function() {
            return "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Filter, "defaultFragmentSrc", {
        get: function() {
            return "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"
        },
        enumerable: !1,
        configurable: !0
    }),
    Filter);
    function Filter(e, t, i) {
        var o = this
          , n = Ki.from(e || Filter.defaultVertexSrc, t || Filter.defaultFragmentSrc);
        return (o = $i.call(this, n, i) || this).padding = 0,
        o.resolution = Z.FILTER_RESOLUTION,
        o.multisample = Z.FILTER_MULTISAMPLE,
        o.enabled = !0,
        o.autoFit = !0,
        o.state = new Qi,
        o
    }
    var eo = new Je
      , to = (Object.defineProperty(TextureMatrix.prototype, "texture", {
        get: function() {
            return this._texture
        },
        set: function(e) {
            this._texture = e,
            this._textureID = -1
        },
        enumerable: !1,
        configurable: !0
    }),
    TextureMatrix.prototype.multiplyUvs = function(e, t) {
        void 0 === t && (t = e);
        for (var i = this.mapCoord, o = 0; o < e.length; o += 2) {
            var n = e[o]
              , r = e[o + 1];
            t[o] = n * i.a + r * i.c + i.tx,
            t[o + 1] = n * i.b + r * i.d + i.ty
        }
        return t
    }
    ,
    TextureMatrix.prototype.update = function(e) {
        var t = this._texture;
        if (!t || !t.valid)
            return !1;
        if (!e && this._textureID === t._updateID)
            return !1;
        this._textureID = t._updateID,
        this._updateID++;
        var i = t._uvs;
        this.mapCoord.set(i.x1 - i.x0, i.y1 - i.y0, i.x3 - i.x0, i.y3 - i.y0, i.x0, i.y0);
        var o = t.orig
          , n = t.trim;
        n && (eo.set(o.width / n.width, 0, 0, o.height / n.height, -n.x / n.width, -n.y / n.height),
        this.mapCoord.append(eo));
        var r = t.baseTexture
          , s = this.uClampFrame
          , a = this.clampMargin / r.resolution
          , l = this.clampOffset;
        return s[0] = (t._frame.x + a + l) / r.width,
        s[1] = (t._frame.y + a + l) / r.height,
        s[2] = (t._frame.x + t._frame.width - a + l) / r.width,
        s[3] = (t._frame.y + t._frame.height - a + l) / r.height,
        this.uClampOffset[0] = l / r.realWidth,
        this.uClampOffset[1] = l / r.realHeight,
        this.isSimple = t._frame.width === r.width && t._frame.height === r.height && 0 === t.rotate,
        !0
    }
    ,
    TextureMatrix);
    function TextureMatrix(e, t) {
        this._texture = e,
        this.mapCoord = new Je,
        this.uClampFrame = new Float32Array(4),
        this.uClampOffset = new Float32Array(2),
        this._textureID = -1,
        this._updateID = 0,
        this.clampOffset = 0,
        this.clampMargin = void 0 === t ? .5 : t,
        this.isSimple = !1
    }
    var io, oo = (__extends$i(SpriteMaskFilter, io = Zi),
    Object.defineProperty(SpriteMaskFilter.prototype, "maskSprite", {
        get: function() {
            return this._maskSprite
        },
        set: function(e) {
            this._maskSprite = e,
            this._maskSprite && (this._maskSprite.renderable = !1)
        },
        enumerable: !1,
        configurable: !0
    }),
    SpriteMaskFilter.prototype.apply = function(e, t, i, o) {
        var n = this._maskSprite
          , r = n._texture;
        r.valid && (r.uvMatrix || (r.uvMatrix = new to(r,0)),
        r.uvMatrix.update(),
        this.uniforms.npmAlpha = r.baseTexture.alphaMode ? 0 : 1,
        this.uniforms.mask = r,
        this.uniforms.otherMatrix = e.calculateSpriteMatrix(this.maskMatrix, n).prepend(r.uvMatrix.mapCoord),
        this.uniforms.alpha = n.worldAlpha,
        this.uniforms.maskClamp = r.uvMatrix.uClampFrame,
        e.applyFilter(this, t, i, o))
    }
    ,
    SpriteMaskFilter);
    function SpriteMaskFilter(e, t, i) {
        var o = this
          , n = null;
        return "string" != typeof e && void 0 === t && void 0 === i && (n = e,
        i = t = e = void 0),
        (o = io.call(this, e || "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n", t || "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n", i) || this).maskSprite = n,
        o.maskMatrix = new Je,
        o
    }
    var no = (MaskSystem.prototype.setMaskStack = function(e) {
        this.maskStack = e,
        this.renderer.scissor.setMaskStack(e),
        this.renderer.stencil.setMaskStack(e)
    }
    ,
    MaskSystem.prototype.push = function(e, t) {
        var i = t;
        if (!i.isMaskData) {
            var o = this.maskDataPool.pop() || new Mi;
            o.pooled = !0,
            o.maskObject = t,
            i = o
        }
        var n = 0 !== this.maskStack.length ? this.maskStack[this.maskStack.length - 1] : null;
        if (i.copyCountersOrReset(n),
        i._colorMask = n ? n._colorMask : 15,
        i.autoDetect && this.detect(i),
        i._target = e,
        i.type !== ne.MASK_TYPES.SPRITE && this.maskStack.push(i),
        i.enabled)
            switch (i.type) {
            case ne.MASK_TYPES.SCISSOR:
                this.renderer.scissor.push(i);
                break;
            case ne.MASK_TYPES.STENCIL:
                this.renderer.stencil.push(i);
                break;
            case ne.MASK_TYPES.SPRITE:
                i.copyCountersOrReset(null),
                this.pushSpriteMask(i);
                break;
            case ne.MASK_TYPES.COLOR:
                this.pushColorMask(i)
            }
        i.type === ne.MASK_TYPES.SPRITE && this.maskStack.push(i)
    }
    ,
    MaskSystem.prototype.pop = function(e) {
        var t = this.maskStack.pop();
        if (t && t._target === e) {
            if (t.enabled)
                switch (t.type) {
                case ne.MASK_TYPES.SCISSOR:
                    this.renderer.scissor.pop(t);
                    break;
                case ne.MASK_TYPES.STENCIL:
                    this.renderer.stencil.pop(t.maskObject);
                    break;
                case ne.MASK_TYPES.SPRITE:
                    this.popSpriteMask(t);
                    break;
                case ne.MASK_TYPES.COLOR:
                    this.popColorMask(t)
                }
            if (t.reset(),
            t.pooled && this.maskDataPool.push(t),
            0 !== this.maskStack.length) {
                var i = this.maskStack[this.maskStack.length - 1];
                i.type === ne.MASK_TYPES.SPRITE && i._filters && (i._filters[0].maskSprite = i.maskObject)
            }
        }
    }
    ,
    MaskSystem.prototype.detect = function(e) {
        var t = e.maskObject;
        t ? t.isSprite ? e.type = ne.MASK_TYPES.SPRITE : this.enableScissor && this.renderer.scissor.testScissor(e) ? e.type = ne.MASK_TYPES.SCISSOR : e.type = ne.MASK_TYPES.STENCIL : e.type = ne.MASK_TYPES.COLOR
    }
    ,
    MaskSystem.prototype.pushSpriteMask = function(e) {
        var t, i, o = e.maskObject, n = e._target, r = e._filters;
        r = (r = r || this.alphaMaskPool[this.alphaMaskIndex]) || (this.alphaMaskPool[this.alphaMaskIndex] = [new oo]);
        var s, a, l = this.renderer, c = l.renderTexture;
        if (c.current) {
            var u = c.current;
            s = e.resolution || u.resolution,
            a = null !== (t = e.multisample) && void 0 !== t ? t : u.multisample
        } else
            s = e.resolution || l.resolution,
            a = null !== (i = e.multisample) && void 0 !== i ? i : l.multisample;
        r[0].resolution = s,
        r[0].multisample = a,
        r[0].maskSprite = o;
        var d = n.filterArea;
        n.filterArea = o.getBounds(!0),
        l.filter.push(n, r),
        n.filterArea = d,
        e._filters || this.alphaMaskIndex++
    }
    ,
    MaskSystem.prototype.popSpriteMask = function(e) {
        this.renderer.filter.pop(),
        e._filters ? e._filters[0].maskSprite = null : (this.alphaMaskIndex--,
        this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite = null)
    }
    ,
    MaskSystem.prototype.pushColorMask = function(e) {
        var t = e._colorMask
          , i = e._colorMask = t & e.colorMask;
        i !== t && this.renderer.gl.colorMask(0 != (1 & i), 0 != (2 & i), 0 != (4 & i), 0 != (8 & i))
    }
    ,
    MaskSystem.prototype.popColorMask = function(e) {
        var t = e._colorMask
          , i = 0 < this.maskStack.length ? this.maskStack[this.maskStack.length - 1]._colorMask : 15;
        i !== t && this.renderer.gl.colorMask(0 != (1 & i), 0 != (2 & i), 0 != (4 & i), 0 != (8 & i))
    }
    ,
    MaskSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    MaskSystem);
    function MaskSystem(e) {
        this.renderer = e,
        this.enableScissor = !0,
        this.alphaMaskPool = [],
        this.maskDataPool = [],
        this.maskStack = [],
        this.alphaMaskIndex = 0
    }
    var ro = (AbstractMaskSystem.prototype.getStackLength = function() {
        return this.maskStack.length
    }
    ,
    AbstractMaskSystem.prototype.setMaskStack = function(e) {
        var t = this.renderer.gl
          , i = this.getStackLength();
        this.maskStack = e;
        var o = this.getStackLength();
        o !== i && (0 === o ? t.disable(this.glConst) : (t.enable(this.glConst),
        this._useCurrent()))
    }
    ,
    AbstractMaskSystem.prototype._useCurrent = function() {}
    ,
    AbstractMaskSystem.prototype.destroy = function() {
        this.renderer = null,
        this.maskStack = null
    }
    ,
    AbstractMaskSystem);
    function AbstractMaskSystem(e) {
        this.renderer = e,
        this.maskStack = [],
        this.glConst = 0
    }
    var so, ao = new Je, lo = [], co = (__extends$i(ScissorSystem, so = ro),
    ScissorSystem.prototype.getStackLength = function() {
        var e = this.maskStack[this.maskStack.length - 1];
        return e ? e._scissorCounter : 0
    }
    ,
    ScissorSystem.prototype.calcScissorRect = function(e) {
        var t;
        if (!e._scissorRectLocal) {
            var i = e._scissorRect
              , o = e.maskObject
              , n = this.renderer
              , r = n.renderTexture
              , s = o.getBounds(!0, null !== (t = lo.pop()) && void 0 !== t ? t : new ze);
            this.roundFrameToPixels(s, r.current ? r.current.resolution : n.resolution, r.sourceFrame, r.destinationFrame, n.projection.transform),
            i && s.fit(i),
            e._scissorRectLocal = s
        }
    }
    ,
    ScissorSystem.isMatrixRotated = function(e) {
        if (!e)
            return !1;
        var t = e.a
          , i = e.b
          , o = e.c
          , n = e.d;
        return (1e-4 < Math.abs(i) || 1e-4 < Math.abs(o)) && (1e-4 < Math.abs(t) || 1e-4 < Math.abs(n))
    }
    ,
    ScissorSystem.prototype.testScissor = function(e) {
        var t = e.maskObject;
        if (!t.isFastRect || !t.isFastRect())
            return !1;
        if (ScissorSystem.isMatrixRotated(t.worldTransform))
            return !1;
        if (ScissorSystem.isMatrixRotated(this.renderer.projection.transform))
            return !1;
        this.calcScissorRect(e);
        var i = e._scissorRectLocal;
        return 0 < i.width && 0 < i.height
    }
    ,
    ScissorSystem.prototype.roundFrameToPixels = function(e, t, i, o, n) {
        ScissorSystem.isMatrixRotated(n) || ((n = n ? ao.copyFrom(n) : ao.identity()).translate(-i.x, -i.y).scale(o.width / i.width, o.height / i.height).translate(o.x, o.y),
        this.renderer.filter.transformAABB(n, e),
        e.fit(o),
        e.x = Math.round(e.x * t),
        e.y = Math.round(e.y * t),
        e.width = Math.round(e.width * t),
        e.height = Math.round(e.height * t))
    }
    ,
    ScissorSystem.prototype.push = function(e) {
        e._scissorRectLocal || this.calcScissorRect(e);
        var t = this.renderer.gl;
        e._scissorRect || t.enable(t.SCISSOR_TEST),
        e._scissorCounter++,
        e._scissorRect = e._scissorRectLocal,
        this._useCurrent()
    }
    ,
    ScissorSystem.prototype.pop = function(e) {
        var t = this.renderer.gl;
        e && lo.push(e._scissorRectLocal),
        0 < this.getStackLength() ? this._useCurrent() : t.disable(t.SCISSOR_TEST)
    }
    ,
    ScissorSystem.prototype._useCurrent = function() {
        var e, t = this.maskStack[this.maskStack.length - 1]._scissorRect;
        e = this.renderer.renderTexture.current ? t.y : this.renderer.height - t.height - t.y,
        this.renderer.gl.scissor(t.x, e, t.width, t.height)
    }
    ,
    ScissorSystem);
    function ScissorSystem(e) {
        var t = so.call(this, e) || this;
        return t.glConst = Z.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,
        t
    }
    var uo, ho = (__extends$i(StencilSystem, uo = ro),
    StencilSystem.prototype.getStackLength = function() {
        var e = this.maskStack[this.maskStack.length - 1];
        return e ? e._stencilCounter : 0
    }
    ,
    StencilSystem.prototype.push = function(e) {
        var t = e.maskObject
          , i = this.renderer.gl
          , o = e._stencilCounter;
        0 === o && (this.renderer.framebuffer.forceStencil(),
        i.clearStencil(0),
        i.clear(i.STENCIL_BUFFER_BIT),
        i.enable(i.STENCIL_TEST)),
        e._stencilCounter++;
        var n = e._colorMask;
        0 !== n && (e._colorMask = 0,
        i.colorMask(!1, !1, !1, !1)),
        i.stencilFunc(i.EQUAL, o, 4294967295),
        i.stencilOp(i.KEEP, i.KEEP, i.INCR),
        t.renderable = !0,
        t.render(this.renderer),
        this.renderer.batch.flush(),
        t.renderable = !1,
        0 !== n && (e._colorMask = n,
        i.colorMask(0 != (1 & n), 0 != (2 & n), 0 != (4 & n), 0 != (8 & n))),
        this._useCurrent()
    }
    ,
    StencilSystem.prototype.pop = function(e) {
        var t = this.renderer.gl;
        if (0 === this.getStackLength())
            t.disable(t.STENCIL_TEST);
        else {
            var i = 0 !== this.maskStack.length ? this.maskStack[this.maskStack.length - 1] : null
              , o = i ? i._colorMask : 15;
            0 !== o && (i._colorMask = 0,
            t.colorMask(!1, !1, !1, !1)),
            t.stencilOp(t.KEEP, t.KEEP, t.DECR),
            e.renderable = !0,
            e.render(this.renderer),
            this.renderer.batch.flush(),
            e.renderable = !1,
            0 !== o && (i._colorMask = o,
            t.colorMask(0 != (1 & o), 0 != (2 & o), 0 != (4 & o), 0 != (8 & o))),
            this._useCurrent()
        }
    }
    ,
    StencilSystem.prototype._useCurrent = function() {
        var e = this.renderer.gl;
        e.stencilFunc(e.EQUAL, this.getStackLength(), 4294967295),
        e.stencilOp(e.KEEP, e.KEEP, e.KEEP)
    }
    ,
    StencilSystem);
    function StencilSystem(e) {
        var t = uo.call(this, e) || this;
        return t.glConst = Z.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,
        t
    }
    var po = (ProjectionSystem.prototype.update = function(e, t, i, o) {
        this.destinationFrame = e || this.destinationFrame || this.defaultFrame,
        this.sourceFrame = t || this.sourceFrame || e,
        this.calculateProjection(this.destinationFrame, this.sourceFrame, i, o),
        this.transform && this.projectionMatrix.append(this.transform);
        var n = this.renderer;
        n.globalUniforms.uniforms.projectionMatrix = this.projectionMatrix,
        n.globalUniforms.update(),
        n.shader.shader && n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)
    }
    ,
    ProjectionSystem.prototype.calculateProjection = function(e, t, i, o) {
        var n = this.projectionMatrix
          , r = o ? -1 : 1;
        n.identity(),
        n.a = 1 / t.width * 2,
        n.d = r * (1 / t.height * 2),
        n.tx = -1 - t.x * n.a,
        n.ty = -r - t.y * n.d
    }
    ,
    ProjectionSystem.prototype.setTransform = function(e) {}
    ,
    ProjectionSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    ProjectionSystem);
    function ProjectionSystem(e) {
        this.renderer = e,
        this.destinationFrame = null,
        this.sourceFrame = null,
        this.defaultFrame = null,
        this.projectionMatrix = new Je,
        this.transform = null
    }
    var _o = new ze
      , fo = new ze
      , mo = (RenderTextureSystem.prototype.bind = function(e, t, i) {
        void 0 === e && (e = null);
        var o, n, r, s = this.renderer;
        (this.current = e) ? (r = (o = e.baseTexture).resolution,
        t || (_o.width = e.frame.width,
        _o.height = e.frame.height,
        t = _o),
        i || (fo.x = e.frame.x,
        fo.y = e.frame.y,
        fo.width = t.width,
        fo.height = t.height,
        i = fo),
        n = o.framebuffer) : (r = s.resolution,
        t || (_o.width = s.screen.width,
        _o.height = s.screen.height,
        t = _o),
        i || ((i = _o).width = t.width,
        i.height = t.height));
        var a = this.viewportFrame;
        a.x = i.x * r,
        a.y = i.y * r,
        a.width = i.width * r,
        a.height = i.height * r,
        e || (a.y = s.view.height - (a.y + a.height)),
        a.ceil(),
        this.renderer.framebuffer.bind(n, a),
        this.renderer.projection.update(i, t, r, !n),
        e ? this.renderer.mask.setMaskStack(o.maskStack) : this.renderer.mask.setMaskStack(this.defaultMaskStack),
        this.sourceFrame.copyFrom(t),
        this.destinationFrame.copyFrom(i)
    }
    ,
    RenderTextureSystem.prototype.clear = function(e, t) {
        e = this.current ? e || this.current.baseTexture.clearColor : e || this.clearColor;
        var i = this.destinationFrame
          , o = this.current ? this.current.baseTexture : this.renderer.screen
          , n = i.width !== o.width || i.height !== o.height;
        if (n) {
            var r = this.viewportFrame
              , s = r.x
              , a = r.y
              , l = r.width
              , c = r.height;
            s = Math.round(s),
            a = Math.round(a),
            l = Math.round(l),
            c = Math.round(c),
            this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),
            this.renderer.gl.scissor(s, a, l, c)
        }
        this.renderer.framebuffer.clear(e[0], e[1], e[2], e[3], t),
        n && this.renderer.scissor.pop()
    }
    ,
    RenderTextureSystem.prototype.resize = function() {
        this.bind(null)
    }
    ,
    RenderTextureSystem.prototype.reset = function() {
        this.bind(null)
    }
    ,
    RenderTextureSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    RenderTextureSystem);
    function RenderTextureSystem(e) {
        this.renderer = e,
        this.clearColor = e._backgroundColorRgba,
        this.defaultMaskStack = [],
        this.current = null,
        this.sourceFrame = new ze,
        this.destinationFrame = new ze,
        this.viewportFrame = new ze
    }
    function uboUpdate(e, t, i, o, n) {
        i.buffer.update(n)
    }
    var To = {
        float: "\n        data[offset] = v;\n    ",
        vec2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",
        vec3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",
        vec4: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",
        mat2: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",
        mat3: "\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",
        mat4: "\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "
    }
      , vo = {
        float: 4,
        vec2: 8,
        vec3: 12,
        vec4: 16,
        int: 4,
        ivec2: 8,
        ivec3: 12,
        ivec4: 16,
        uint: 4,
        uvec2: 8,
        uvec3: 12,
        uvec4: 16,
        bool: 4,
        bvec2: 8,
        bvec3: 12,
        bvec4: 16,
        mat2: 32,
        mat3: 48,
        mat4: 64
    };
    function createUBOElements(e) {
        for (var t = e.map(function(e) {
            return {
                data: e,
                offset: 0,
                dataLen: 0,
                dirty: 0
            }
        }), i = 0, o = 0, n = 0, r = 0; r < t.length; r++) {
            var s = t[r];
            if (i = vo[s.data.type],
            1 < s.data.size && (i = Math.max(i, 16) * s.data.size),
            o % (s.dataLen = i) != 0 && o < 16) {
                var a = o % i % 16;
                o += a,
                n += a
            }
            16 < o + i ? (n = 16 * Math.ceil(n / 16),
            s.offset = n,
            n += i,
            o = i) : (s.offset = n,
            o += i,
            n += i)
        }
        return {
            uboElements: t,
            size: n = 16 * Math.ceil(n / 16)
        }
    }
    function getUBOData(e, t) {
        var i = [];
        for (var o in e)
            t[o] && i.push(t[o]);
        return i.sort(function(e, t) {
            return e.index - t.index
        }),
        i
    }
    function generateUniformBufferSync(e, t) {
        if (!e.autoManage)
            return {
                size: 0,
                syncFunc: uboUpdate
            };
        for (var i = createUBOElements(getUBOData(e.uniforms, t)), o = i.uboElements, n = i.size, r = ["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "], s = 0; s < o.length; s++) {
            for (var a = o[s], l = e.uniforms[a.data.name], c = a.data.name, u = !1, d = 0; d < ji.length; d++) {
                var h = ji[d];
                if (h.codeUbo && h.test(a.data, l)) {
                    r.push("offset = " + a.offset / 4 + ";", ji[d].codeUbo(a.data.name, l)),
                    u = !0;
                    break
                }
            }
            if (!u)
                if (1 < a.data.size) {
                    var p = mapSize(a.data.type)
                      , _ = Math.max(vo[a.data.type] / 16, 1)
                      , f = p / _
                      , m = (4 - f % 4) % 4;
                    r.push("\n                cv = ud." + c + ".value;\n                v = uv." + c + ";\n                offset = " + a.offset / 4 + ";\n\n                t = 0;\n\n                for(var i=0; i < " + a.data.size * _ + "; i++)\n                {\n                    for(var j = 0; j < " + f + "; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += " + m + ";\n                }\n\n                ")
                } else {
                    var T = To[a.data.type];
                    r.push("\n                cv = ud." + c + ".value;\n                v = uv." + c + ";\n                offset = " + a.offset / 4 + ";\n                " + T + ";\n                ")
                }
        }
        return r.push("\n       renderer.buffer.update(buffer);\n    "),
        {
            size: n,
            syncFunc: new Function("ud","uv","renderer","syncData","buffer",r.join("\n"))
        }
    }
    function Gf() {}
    var yo = (GLProgram.prototype.destroy = function() {
        this.uniformData = null,
        this.uniformGroups = null,
        this.uniformDirtyGroups = null,
        this.uniformBufferBindings = null,
        this.program = null
    }
    ,
    GLProgram);
    function GLProgram(e, t) {
        this.program = e,
        this.uniformData = t,
        this.uniformGroups = {},
        this.uniformDirtyGroups = {},
        this.uniformBufferBindings = {}
    }
    function generateProgram(e, t) {
        var i = compileShader(e, e.VERTEX_SHADER, t.vertexSrc)
          , o = compileShader(e, e.FRAGMENT_SHADER, t.fragmentSrc)
          , n = e.createProgram();
        if (e.attachShader(n, i),
        e.attachShader(n, o),
        e.linkProgram(n),
        e.getProgramParameter(n, e.LINK_STATUS) || function logProgramError(e, t, i, o) {
            e.getProgramParameter(t, e.LINK_STATUS) || (e.getShaderParameter(i, e.COMPILE_STATUS) || logPrettyShaderError(e, i),
            e.getShaderParameter(o, e.COMPILE_STATUS) || logPrettyShaderError(e, o),
            console.error("PixiJS Error: Could not initialize shader."),
            "" !== e.getProgramInfoLog(t) && console.warn("PixiJS Warning: gl.getProgramInfoLog()", e.getProgramInfoLog(t)))
        }(e, n, i, o),
        t.attributeData = function getAttributeData(e, t) {
            for (var i = {}, o = t.getProgramParameter(e, t.ACTIVE_ATTRIBUTES), n = 0; n < o; n++) {
                var r = t.getActiveAttrib(e, n);
                if (0 !== r.name.indexOf("gl_")) {
                    var s = mapType(t, r.type)
                      , a = {
                        type: s,
                        name: r.name,
                        size: mapSize(s),
                        location: t.getAttribLocation(e, r.name)
                    };
                    i[r.name] = a
                }
            }
            return i
        }(n, e),
        t.uniformData = function getUniformData(e, t) {
            for (var i = {}, o = t.getProgramParameter(e, t.ACTIVE_UNIFORMS), n = 0; n < o; n++) {
                var r = t.getActiveUniform(e, n)
                  , s = r.name.replace(/\[.*?\]$/, "")
                  , a = !!r.name.match(/\[.*?\]$/)
                  , l = mapType(t, r.type);
                i[s] = {
                    name: s,
                    index: n,
                    type: l,
                    size: r.size,
                    isArray: a,
                    value: defaultValue(l, r.size)
                }
            }
            return i
        }(n, e),
        !/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)) {
            var r = Object.keys(t.attributeData);
            r.sort(function(e, t) {
                return t < e ? 1 : -1
            });
            for (var s = 0; s < r.length; s++)
                t.attributeData[r[s]].location = s,
                e.bindAttribLocation(n, s, r[s]);
            e.linkProgram(n)
        }
        e.deleteShader(i),
        e.deleteShader(o);
        var a = {};
        for (var s in t.uniformData) {
            var l = t.uniformData[s];
            a[s] = {
                location: e.getUniformLocation(n, s),
                value: defaultValue(l.type, l.size)
            }
        }
        return new yo(n,a)
    }
    var go = 0
      , wo = {
        textureCount: 0,
        uboCount: 0
    }
      , Co = (ShaderSystem.prototype.systemCheck = function() {
        if (!function unsafeEvalSupported() {
            if ("boolean" == typeof Hi)
                return Hi;
            try {
                var e = new Function("param1","param2","param3","return param1[param2] === param3;");
                Hi = !0 === e({
                    a: "b"
                }, "a", "b")
            } catch (e) {
                Hi = !1
            }
            return Hi
        }())
            throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")
    }
    ,
    ShaderSystem.prototype.contextChange = function(e) {
        this.gl = e,
        this.reset()
    }
    ,
    ShaderSystem.prototype.bind = function(e, t) {
        e.disposeRunner.add(this),
        e.uniforms.globals = this.renderer.globalUniforms;
        var i = e.program
          , o = i.glPrograms[this.renderer.CONTEXT_UID] || this.generateProgram(e);
        return this.shader = e,
        this.program !== i && (this.program = i,
        this.gl.useProgram(o.program)),
        t || (wo.textureCount = 0,
        wo.uboCount = 0,
        this.syncUniformGroup(e.uniformGroup, wo)),
        o
    }
    ,
    ShaderSystem.prototype.setUniforms = function(e) {
        var t = this.shader.program
          , i = t.glPrograms[this.renderer.CONTEXT_UID];
        t.syncUniforms(i.uniformData, e, this.renderer)
    }
    ,
    ShaderSystem.prototype.syncUniformGroup = function(e, t) {
        var i = this.getGlProgram();
        e.static && e.dirtyId === i.uniformDirtyGroups[e.id] || (i.uniformDirtyGroups[e.id] = e.dirtyId,
        this.syncUniforms(e, i, t))
    }
    ,
    ShaderSystem.prototype.syncUniforms = function(e, t, i) {
        (e.syncUniforms[this.shader.program.id] || this.createSyncGroups(e))(t.uniformData, e.uniforms, this.renderer, i)
    }
    ,
    ShaderSystem.prototype.createSyncGroups = function(e) {
        var t = this.getSignature(e, this.shader.program.uniformData, "u");
        return this.cache[t] || (this.cache[t] = function generateUniformsSync(e, t) {
            var i, o = ["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];
            for (var n in e.uniforms) {
                var r = t[n];
                if (r) {
                    for (var s = e.uniforms[n], a = !1, l = 0; l < ji.length; l++)
                        if (ji[l].test(r, s)) {
                            o.push(ji[l].code(n, s)),
                            a = !0;
                            break
                        }
                    if (!a) {
                        var c = (1 !== r.size || r.isArray ? zi : qi)[r.type].replace("location", 'ud["' + n + '"].location');
                        o.push('\n            cu = ud["' + n + '"];\n            cv = cu.value;\n            v = uv["' + n + '"];\n            ' + c + ";")
                    }
                } else
                    (null === (i = e.uniforms[n]) || void 0 === i ? void 0 : i.group) && (e.uniforms[n].ubo ? o.push("\n                        renderer.shader.syncUniformBufferGroup(uv." + n + ", '" + n + "');\n                    ") : o.push("\n                        renderer.shader.syncUniformGroup(uv." + n + ", syncData);\n                    "))
            }
            return new Function("ud","uv","renderer","syncData",o.join("\n"))
        }(e, this.shader.program.uniformData)),
        e.syncUniforms[this.shader.program.id] = this.cache[t],
        e.syncUniforms[this.shader.program.id]
    }
    ,
    ShaderSystem.prototype.syncUniformBufferGroup = function(e, t) {
        var i = this.getGlProgram();
        if (!e.static || 0 !== e.dirtyId || !i.uniformGroups[e.id]) {
            e.dirtyId = 0;
            var o = i.uniformGroups[e.id] || this.createSyncBufferGroup(e, i, t);
            e.buffer.update(),
            o(i.uniformData, e.uniforms, this.renderer, wo, e.buffer)
        }
        this.renderer.buffer.bindBufferBase(e.buffer, i.uniformBufferBindings[t])
    }
    ,
    ShaderSystem.prototype.createSyncBufferGroup = function(e, t, i) {
        var o = this.renderer.gl;
        this.renderer.buffer.bind(e.buffer);
        var n = this.gl.getUniformBlockIndex(t.program, i);
        t.uniformBufferBindings[i] = this.shader.uniformBindCount,
        o.uniformBlockBinding(t.program, n, this.shader.uniformBindCount),
        this.shader.uniformBindCount++;
        var r = this.getSignature(e, this.shader.program.uniformData, "ubo")
          , s = this._uboCache[r];
        if (s = s || (this._uboCache[r] = generateUniformBufferSync(e, this.shader.program.uniformData)),
        e.autoManage) {
            var a = new Float32Array(s.size / 4);
            e.buffer.update(a)
        }
        return t.uniformGroups[e.id] = s.syncFunc,
        t.uniformGroups[e.id]
    }
    ,
    ShaderSystem.prototype.getSignature = function(e, t, i) {
        var o = e.uniforms
          , n = [i + "-"];
        for (var r in o)
            n.push(r),
            t[r] && n.push(t[r].type);
        return n.join("-")
    }
    ,
    ShaderSystem.prototype.getGlProgram = function() {
        return this.shader ? this.shader.program.glPrograms[this.renderer.CONTEXT_UID] : null
    }
    ,
    ShaderSystem.prototype.generateProgram = function(e) {
        var t = this.gl
          , i = e.program
          , o = generateProgram(t, i);
        return i.glPrograms[this.renderer.CONTEXT_UID] = o
    }
    ,
    ShaderSystem.prototype.reset = function() {
        this.program = null,
        this.shader = null
    }
    ,
    ShaderSystem.prototype.disposeShader = function(e) {
        this.shader === e && (this.shader = null)
    }
    ,
    ShaderSystem.prototype.destroy = function() {
        this.renderer = null,
        this.destroyed = !0
    }
    ,
    ShaderSystem);
    function ShaderSystem(e) {
        this.destroyed = !1,
        this.renderer = e,
        this.systemCheck(),
        this.gl = null,
        this.shader = null,
        this.program = null,
        this.cache = {},
        this._uboCache = {},
        this.id = go++
    }
    var So = (StateSystem.prototype.contextChange = function(e) {
        this.gl = e,
        this.blendModes = function mapWebGLBlendModesToPixi(e, t) {
            return void 0 === t && (t = []),
            t[ne.BLEND_MODES.NORMAL] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.ADD] = [e.ONE, e.ONE],
            t[ne.BLEND_MODES.MULTIPLY] = [e.DST_COLOR, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.SCREEN] = [e.ONE, e.ONE_MINUS_SRC_COLOR, e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.OVERLAY] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.DARKEN] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.LIGHTEN] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.COLOR_DODGE] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.COLOR_BURN] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.HARD_LIGHT] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.SOFT_LIGHT] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.DIFFERENCE] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.EXCLUSION] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.HUE] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.SATURATION] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.COLOR] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.LUMINOSITY] = [e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.NONE] = [0, 0],
            t[ne.BLEND_MODES.NORMAL_NPM] = [e.SRC_ALPHA, e.ONE_MINUS_SRC_ALPHA, e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.ADD_NPM] = [e.SRC_ALPHA, e.ONE, e.ONE, e.ONE],
            t[ne.BLEND_MODES.SCREEN_NPM] = [e.SRC_ALPHA, e.ONE_MINUS_SRC_COLOR, e.ONE, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.SRC_IN] = [e.DST_ALPHA, e.ZERO],
            t[ne.BLEND_MODES.SRC_OUT] = [e.ONE_MINUS_DST_ALPHA, e.ZERO],
            t[ne.BLEND_MODES.SRC_ATOP] = [e.DST_ALPHA, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.DST_OVER] = [e.ONE_MINUS_DST_ALPHA, e.ONE],
            t[ne.BLEND_MODES.DST_IN] = [e.ZERO, e.SRC_ALPHA],
            t[ne.BLEND_MODES.DST_OUT] = [e.ZERO, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.DST_ATOP] = [e.ONE_MINUS_DST_ALPHA, e.SRC_ALPHA],
            t[ne.BLEND_MODES.XOR] = [e.ONE_MINUS_DST_ALPHA, e.ONE_MINUS_SRC_ALPHA],
            t[ne.BLEND_MODES.SUBTRACT] = [e.ONE, e.ONE, e.ONE, e.ONE, e.FUNC_REVERSE_SUBTRACT, e.FUNC_ADD],
            t
        }(e),
        this.set(this.defaultState),
        this.reset()
    }
    ,
    StateSystem.prototype.set = function(e) {
        if (e = e || this.defaultState,
        this.stateId !== e.data) {
            for (var t = this.stateId ^ e.data, i = 0; t; )
                1 & t && this.map[i].call(this, !!(e.data & 1 << i)),
                t >>= 1,
                i++;
            this.stateId = e.data
        }
        for (i = 0; i < this.checks.length; i++)
            this.checks[i](this, e)
    }
    ,
    StateSystem.prototype.forceState = function(e) {
        e = e || this.defaultState;
        for (var t = 0; t < this.map.length; t++)
            this.map[t].call(this, !!(e.data & 1 << t));
        for (t = 0; t < this.checks.length; t++)
            this.checks[t](this, e);
        this.stateId = e.data
    }
    ,
    StateSystem.prototype.setBlend = function(e) {
        this.updateCheck(StateSystem.checkBlendMode, e),
        this.gl[e ? "enable" : "disable"](this.gl.BLEND)
    }
    ,
    StateSystem.prototype.setOffset = function(e) {
        this.updateCheck(StateSystem.checkPolygonOffset, e),
        this.gl[e ? "enable" : "disable"](this.gl.POLYGON_OFFSET_FILL)
    }
    ,
    StateSystem.prototype.setDepthTest = function(e) {
        this.gl[e ? "enable" : "disable"](this.gl.DEPTH_TEST)
    }
    ,
    StateSystem.prototype.setDepthMask = function(e) {
        this.gl.depthMask(e)
    }
    ,
    StateSystem.prototype.setCullFace = function(e) {
        this.gl[e ? "enable" : "disable"](this.gl.CULL_FACE)
    }
    ,
    StateSystem.prototype.setFrontFace = function(e) {
        this.gl.frontFace(this.gl[e ? "CW" : "CCW"])
    }
    ,
    StateSystem.prototype.setBlendMode = function(e) {
        if (e !== this.blendMode) {
            this.blendMode = e;
            var t = this.blendModes[e]
              , i = this.gl;
            2 === t.length ? i.blendFunc(t[0], t[1]) : i.blendFuncSeparate(t[0], t[1], t[2], t[3]),
            6 === t.length ? (this._blendEq = !0,
            i.blendEquationSeparate(t[4], t[5])) : this._blendEq && (this._blendEq = !1,
            i.blendEquationSeparate(i.FUNC_ADD, i.FUNC_ADD))
        }
    }
    ,
    StateSystem.prototype.setPolygonOffset = function(e, t) {
        this.gl.polygonOffset(e, t)
    }
    ,
    StateSystem.prototype.reset = function() {
        this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1),
        this.forceState(this.defaultState),
        this._blendEq = !0,
        this.blendMode = -1,
        this.setBlendMode(0)
    }
    ,
    StateSystem.prototype.updateCheck = function(e, t) {
        var i = this.checks.indexOf(e);
        t && -1 === i ? this.checks.push(e) : t || -1 === i || this.checks.splice(i, 1)
    }
    ,
    StateSystem.checkBlendMode = function(e, t) {
        e.setBlendMode(t.blendMode)
    }
    ,
    StateSystem.checkPolygonOffset = function(e, t) {
        e.setPolygonOffset(1, t.polygonOffset)
    }
    ,
    StateSystem.prototype.destroy = function() {
        this.gl = null
    }
    ,
    StateSystem);
    function StateSystem() {
        this.gl = null,
        this.stateId = 0,
        this.polygonOffset = 0,
        this.blendMode = ne.BLEND_MODES.NONE,
        this._blendEq = !1,
        this.map = [],
        this.map[0] = this.setBlend,
        this.map[1] = this.setOffset,
        this.map[2] = this.setCullFace,
        this.map[3] = this.setDepthTest,
        this.map[4] = this.setFrontFace,
        this.map[5] = this.setDepthMask,
        this.checks = [],
        this.defaultState = new Qi,
        this.defaultState.blend = !0
    }
    var Eo = (TextureGCSystem.prototype.postrender = function() {
        this.renderer.renderingToScreen && (this.count++,
        this.mode !== ne.GC_MODES.MANUAL && (this.checkCount++,
        this.checkCount > this.checkCountMax && (this.checkCount = 0,
        this.run())))
    }
    ,
    TextureGCSystem.prototype.run = function() {
        for (var e = this.renderer.texture, t = e.managedTextures, i = !1, o = 0; o < t.length; o++) {
            var n = t[o];
            !n.framebuffer && this.count - n.touched > this.maxIdle && (e.destroyTexture(n, !0),
            i = !(t[o] = null))
        }
        if (i) {
            var r = 0;
            for (o = 0; o < t.length; o++)
                null !== t[o] && (t[r++] = t[o]);
            t.length = r
        }
    }
    ,
    TextureGCSystem.prototype.unload = function(e) {
        var t = this.renderer.texture
          , i = e._texture;
        i && !i.framebuffer && t.destroyTexture(i);
        for (var o = e.children.length - 1; 0 <= o; o--)
            this.unload(e.children[o])
    }
    ,
    TextureGCSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    TextureGCSystem);
    function TextureGCSystem(e) {
        this.renderer = e,
        this.count = 0,
        this.checkCount = 0,
        this.maxIdle = Z.GC_MAX_IDLE,
        this.checkCountMax = Z.GC_MAX_CHECK_COUNT,
        this.mode = Z.GC_MODE
    }
    var bo = function GLTexture(e) {
        this.texture = e,
        this.width = -1,
        this.height = -1,
        this.dirtyId = -1,
        this.dirtyStyleId = -1,
        this.mipmap = !1,
        this.wrapMode = 33071,
        this.type = ne.TYPES.UNSIGNED_BYTE,
        this.internalFormat = ne.FORMATS.RGBA,
        this.samplerType = 0
    }
      , Vo = (TextureSystem.prototype.contextChange = function() {
        var e = this.gl = this.renderer.gl;
        this.CONTEXT_UID = this.renderer.CONTEXT_UID,
        this.webGLVersion = this.renderer.context.webGLVersion,
        this.internalFormats = function mapTypeAndFormatToInternalFormat(e) {
            var t, i, o, n, r, s, a, l, c, u, d, h, p, _, f, m, T, v, y, g, w, C;
            return "WebGL2RenderingContext"in globalThis && e instanceof globalThis.WebGL2RenderingContext ? ((t = {})[ne.TYPES.UNSIGNED_BYTE] = ((i = {})[ne.FORMATS.RGBA] = e.RGBA8,
            i[ne.FORMATS.RGB] = e.RGB8,
            i[ne.FORMATS.RG] = e.RG8,
            i[ne.FORMATS.RED] = e.R8,
            i[ne.FORMATS.RGBA_INTEGER] = e.RGBA8UI,
            i[ne.FORMATS.RGB_INTEGER] = e.RGB8UI,
            i[ne.FORMATS.RG_INTEGER] = e.RG8UI,
            i[ne.FORMATS.RED_INTEGER] = e.R8UI,
            i[ne.FORMATS.ALPHA] = e.ALPHA,
            i[ne.FORMATS.LUMINANCE] = e.LUMINANCE,
            i[ne.FORMATS.LUMINANCE_ALPHA] = e.LUMINANCE_ALPHA,
            i),
            t[ne.TYPES.BYTE] = ((o = {})[ne.FORMATS.RGBA] = e.RGBA8_SNORM,
            o[ne.FORMATS.RGB] = e.RGB8_SNORM,
            o[ne.FORMATS.RG] = e.RG8_SNORM,
            o[ne.FORMATS.RED] = e.R8_SNORM,
            o[ne.FORMATS.RGBA_INTEGER] = e.RGBA8I,
            o[ne.FORMATS.RGB_INTEGER] = e.RGB8I,
            o[ne.FORMATS.RG_INTEGER] = e.RG8I,
            o[ne.FORMATS.RED_INTEGER] = e.R8I,
            o),
            t[ne.TYPES.UNSIGNED_SHORT] = ((n = {})[ne.FORMATS.RGBA_INTEGER] = e.RGBA16UI,
            n[ne.FORMATS.RGB_INTEGER] = e.RGB16UI,
            n[ne.FORMATS.RG_INTEGER] = e.RG16UI,
            n[ne.FORMATS.RED_INTEGER] = e.R16UI,
            n[ne.FORMATS.DEPTH_COMPONENT] = e.DEPTH_COMPONENT16,
            n),
            t[ne.TYPES.SHORT] = ((r = {})[ne.FORMATS.RGBA_INTEGER] = e.RGBA16I,
            r[ne.FORMATS.RGB_INTEGER] = e.RGB16I,
            r[ne.FORMATS.RG_INTEGER] = e.RG16I,
            r[ne.FORMATS.RED_INTEGER] = e.R16I,
            r),
            t[ne.TYPES.UNSIGNED_INT] = ((s = {})[ne.FORMATS.RGBA_INTEGER] = e.RGBA32UI,
            s[ne.FORMATS.RGB_INTEGER] = e.RGB32UI,
            s[ne.FORMATS.RG_INTEGER] = e.RG32UI,
            s[ne.FORMATS.RED_INTEGER] = e.R32UI,
            s[ne.FORMATS.DEPTH_COMPONENT] = e.DEPTH_COMPONENT24,
            s),
            t[ne.TYPES.INT] = ((a = {})[ne.FORMATS.RGBA_INTEGER] = e.RGBA32I,
            a[ne.FORMATS.RGB_INTEGER] = e.RGB32I,
            a[ne.FORMATS.RG_INTEGER] = e.RG32I,
            a[ne.FORMATS.RED_INTEGER] = e.R32I,
            a),
            t[ne.TYPES.FLOAT] = ((l = {})[ne.FORMATS.RGBA] = e.RGBA32F,
            l[ne.FORMATS.RGB] = e.RGB32F,
            l[ne.FORMATS.RG] = e.RG32F,
            l[ne.FORMATS.RED] = e.R32F,
            l[ne.FORMATS.DEPTH_COMPONENT] = e.DEPTH_COMPONENT32F,
            l),
            t[ne.TYPES.HALF_FLOAT] = ((c = {})[ne.FORMATS.RGBA] = e.RGBA16F,
            c[ne.FORMATS.RGB] = e.RGB16F,
            c[ne.FORMATS.RG] = e.RG16F,
            c[ne.FORMATS.RED] = e.R16F,
            c),
            t[ne.TYPES.UNSIGNED_SHORT_5_6_5] = ((u = {})[ne.FORMATS.RGB] = e.RGB565,
            u),
            t[ne.TYPES.UNSIGNED_SHORT_4_4_4_4] = ((d = {})[ne.FORMATS.RGBA] = e.RGBA4,
            d),
            t[ne.TYPES.UNSIGNED_SHORT_5_5_5_1] = ((h = {})[ne.FORMATS.RGBA] = e.RGB5_A1,
            h),
            t[ne.TYPES.UNSIGNED_INT_2_10_10_10_REV] = ((p = {})[ne.FORMATS.RGBA] = e.RGB10_A2,
            p[ne.FORMATS.RGBA_INTEGER] = e.RGB10_A2UI,
            p),
            t[ne.TYPES.UNSIGNED_INT_10F_11F_11F_REV] = ((_ = {})[ne.FORMATS.RGB] = e.R11F_G11F_B10F,
            _),
            t[ne.TYPES.UNSIGNED_INT_5_9_9_9_REV] = ((f = {})[ne.FORMATS.RGB] = e.RGB9_E5,
            f),
            t[ne.TYPES.UNSIGNED_INT_24_8] = ((m = {})[ne.FORMATS.DEPTH_STENCIL] = e.DEPTH24_STENCIL8,
            m),
            t[ne.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV] = ((T = {})[ne.FORMATS.DEPTH_STENCIL] = e.DEPTH32F_STENCIL8,
            T),
            t) : ((v = {})[ne.TYPES.UNSIGNED_BYTE] = ((y = {})[ne.FORMATS.RGBA] = e.RGBA,
            y[ne.FORMATS.RGB] = e.RGB,
            y[ne.FORMATS.ALPHA] = e.ALPHA,
            y[ne.FORMATS.LUMINANCE] = e.LUMINANCE,
            y[ne.FORMATS.LUMINANCE_ALPHA] = e.LUMINANCE_ALPHA,
            y),
            v[ne.TYPES.UNSIGNED_SHORT_5_6_5] = ((g = {})[ne.FORMATS.RGB] = e.RGB,
            g),
            v[ne.TYPES.UNSIGNED_SHORT_4_4_4_4] = ((w = {})[ne.FORMATS.RGBA] = e.RGBA,
            w),
            v[ne.TYPES.UNSIGNED_SHORT_5_5_5_1] = ((C = {})[ne.FORMATS.RGBA] = e.RGBA,
            C),
            v)
        }(e);
        var t = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);
        this.boundTextures.length = t;
        for (var i = 0; i < t; i++)
            this.boundTextures[i] = null;
        this.emptyTextures = {};
        var o = new bo(e.createTexture());
        for (e.bindTexture(e.TEXTURE_2D, o.texture),
        e.texImage2D(e.TEXTURE_2D, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, new Uint8Array(4)),
        this.emptyTextures[e.TEXTURE_2D] = o,
        this.emptyTextures[e.TEXTURE_CUBE_MAP] = new bo(e.createTexture()),
        e.bindTexture(e.TEXTURE_CUBE_MAP, this.emptyTextures[e.TEXTURE_CUBE_MAP].texture),
        i = 0; i < 6; i++)
            e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, null);
        for (e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_MAG_FILTER, e.LINEAR),
        e.texParameteri(e.TEXTURE_CUBE_MAP, e.TEXTURE_MIN_FILTER, e.LINEAR),
        i = 0; i < this.boundTextures.length; i++)
            this.bind(null, i)
    }
    ,
    TextureSystem.prototype.bind = function(e, t) {
        void 0 === t && (t = 0);
        var i = this.gl;
        if ((e = null == e ? void 0 : e.castToBaseTexture()) && e.valid && !e.parentTextureArray) {
            e.touched = this.renderer.textureGC.count;
            var o = e._glTextures[this.CONTEXT_UID] || this.initTexture(e);
            this.boundTextures[t] !== e && (this.currentLocation !== t && (this.currentLocation = t,
            i.activeTexture(i.TEXTURE0 + t)),
            i.bindTexture(e.target, o.texture)),
            o.dirtyId !== e.dirtyId ? (this.currentLocation !== t && (this.currentLocation = t,
            i.activeTexture(i.TEXTURE0 + t)),
            this.updateTexture(e)) : o.dirtyStyleId !== e.dirtyStyleId && this.updateTextureStyle(e),
            this.boundTextures[t] = e
        } else
            this.currentLocation !== t && (this.currentLocation = t,
            i.activeTexture(i.TEXTURE0 + t)),
            i.bindTexture(i.TEXTURE_2D, this.emptyTextures[i.TEXTURE_2D].texture),
            this.boundTextures[t] = null
    }
    ,
    TextureSystem.prototype.reset = function() {
        this._unknownBoundTextures = !0,
        this.hasIntegerTextures = !1,
        this.currentLocation = -1;
        for (var e = 0; e < this.boundTextures.length; e++)
            this.boundTextures[e] = this.unknownTexture
    }
    ,
    TextureSystem.prototype.unbind = function(e) {
        var t = this.gl
          , i = this.boundTextures;
        if (this._unknownBoundTextures) {
            this._unknownBoundTextures = !1;
            for (var o = 0; o < i.length; o++)
                i[o] === this.unknownTexture && this.bind(null, o)
        }
        for (o = 0; o < i.length; o++)
            i[o] === e && (this.currentLocation !== o && (t.activeTexture(t.TEXTURE0 + o),
            this.currentLocation = o),
            t.bindTexture(e.target, this.emptyTextures[e.target].texture),
            i[o] = null)
    }
    ,
    TextureSystem.prototype.ensureSamplerType = function(e) {
        var t = this.boundTextures
          , i = this.hasIntegerTextures
          , o = this.CONTEXT_UID;
        if (i)
            for (var n = e - 1; 0 <= n; --n) {
                var r = t[n];
                r && r._glTextures[o].samplerType !== ne.SAMPLER_TYPES.FLOAT && this.renderer.texture.unbind(r)
            }
    }
    ,
    TextureSystem.prototype.initTexture = function(e) {
        var t = new bo(this.gl.createTexture());
        return t.dirtyId = -1,
        e._glTextures[this.CONTEXT_UID] = t,
        this.managedTextures.push(e),
        e.on("dispose", this.destroyTexture, this),
        t
    }
    ,
    TextureSystem.prototype.initTextureType = function(e, t) {
        var i, o;
        t.internalFormat = null !== (o = null === (i = this.internalFormats[e.type]) || void 0 === i ? void 0 : i[e.format]) && void 0 !== o ? o : e.format,
        2 === this.webGLVersion && e.type === ne.TYPES.HALF_FLOAT ? t.type = this.gl.HALF_FLOAT : t.type = e.type
    }
    ,
    TextureSystem.prototype.updateTexture = function(e) {
        var t = e._glTextures[this.CONTEXT_UID];
        if (t) {
            var i = this.renderer;
            if (this.initTextureType(e, t),
            e.resource && e.resource.upload(i, e, t))
                t.samplerType !== ne.SAMPLER_TYPES.FLOAT && (this.hasIntegerTextures = !0);
            else {
                var o = e.realWidth
                  , n = e.realHeight
                  , r = i.gl;
                (t.width !== o || t.height !== n || t.dirtyId < 0) && (t.width = o,
                t.height = n,
                r.texImage2D(e.target, 0, t.internalFormat, o, n, 0, e.format, t.type, null))
            }
            e.dirtyStyleId !== t.dirtyStyleId && this.updateTextureStyle(e),
            t.dirtyId = e.dirtyId
        }
    }
    ,
    TextureSystem.prototype.destroyTexture = function(e, t) {
        var i = this.gl;
        if ((e = e.castToBaseTexture())._glTextures[this.CONTEXT_UID] && (this.unbind(e),
        i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),
        e.off("dispose", this.destroyTexture, this),
        delete e._glTextures[this.CONTEXT_UID],
        !t)) {
            var o = this.managedTextures.indexOf(e);
            -1 !== o && removeItems(this.managedTextures, o, 1)
        }
    }
    ,
    TextureSystem.prototype.updateTextureStyle = function(e) {
        var t = e._glTextures[this.CONTEXT_UID];
        t && (e.mipmap !== ne.MIPMAP_MODES.POW2 && 2 === this.webGLVersion || e.isPowerOfTwo ? t.mipmap = 1 <= e.mipmap : t.mipmap = !1,
        2 === this.webGLVersion || e.isPowerOfTwo ? t.wrapMode = e.wrapMode : t.wrapMode = ne.WRAP_MODES.CLAMP,
        e.resource && e.resource.style(this.renderer, e, t) || this.setStyle(e, t),
        t.dirtyStyleId = e.dirtyStyleId)
    }
    ,
    TextureSystem.prototype.setStyle = function(e, t) {
        var i = this.gl;
        if (t.mipmap && e.mipmap !== ne.MIPMAP_MODES.ON_MANUAL && i.generateMipmap(e.target),
        i.texParameteri(e.target, i.TEXTURE_WRAP_S, t.wrapMode),
        i.texParameteri(e.target, i.TEXTURE_WRAP_T, t.wrapMode),
        t.mipmap) {
            i.texParameteri(e.target, i.TEXTURE_MIN_FILTER, e.scaleMode === ne.SCALE_MODES.LINEAR ? i.LINEAR_MIPMAP_LINEAR : i.NEAREST_MIPMAP_NEAREST);
            var o = this.renderer.context.extensions.anisotropicFiltering;
            if (o && 0 < e.anisotropicLevel && e.scaleMode === ne.SCALE_MODES.LINEAR) {
                var n = Math.min(e.anisotropicLevel, i.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));
                i.texParameterf(e.target, o.TEXTURE_MAX_ANISOTROPY_EXT, n)
            }
        } else
            i.texParameteri(e.target, i.TEXTURE_MIN_FILTER, e.scaleMode === ne.SCALE_MODES.LINEAR ? i.LINEAR : i.NEAREST);
        i.texParameteri(e.target, i.TEXTURE_MAG_FILTER, e.scaleMode === ne.SCALE_MODES.LINEAR ? i.LINEAR : i.NEAREST)
    }
    ,
    TextureSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    TextureSystem);
    function TextureSystem(e) {
        this.renderer = e,
        this.boundTextures = [],
        this.currentLocation = -1,
        this.managedTextures = [],
        this._unknownBoundTextures = !1,
        this.unknownTexture = new Rt,
        this.hasIntegerTextures = !1
    }
    var Uo, Io = {
        __proto__: null,
        FilterSystem: bi,
        BatchSystem: Ui,
        ContextSystem: Ai,
        FramebufferSystem: Oi,
        GeometrySystem: Li,
        MaskSystem: no,
        ScissorSystem: co,
        StencilSystem: ho,
        ProjectionSystem: po,
        RenderTextureSystem: mo,
        ShaderSystem: Co,
        StateSystem: So,
        TextureGCSystem: Eo,
        TextureSystem: Vo
    }, Ao = new Je, Ro = (__extends$i(AbstractRenderer, Uo = te),
    AbstractRenderer.prototype.initPlugins = function(e) {
        for (var t in e)
            this.plugins[t] = new e[t](this)
    }
    ,
    Object.defineProperty(AbstractRenderer.prototype, "width", {
        get: function() {
            return this.view.width
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AbstractRenderer.prototype, "height", {
        get: function() {
            return this.view.height
        },
        enumerable: !1,
        configurable: !0
    }),
    AbstractRenderer.prototype.resize = function(e, t) {
        this.view.width = Math.round(e * this.resolution),
        this.view.height = Math.round(t * this.resolution);
        var i = this.view.width / this.resolution
          , o = this.view.height / this.resolution;
        this.screen.width = i,
        this.screen.height = o,
        this.autoDensity && (this.view.style.width = i + "px",
        this.view.style.height = o + "px"),
        this.emit("resize", i, o)
    }
    ,
    AbstractRenderer.prototype.generateTexture = function(e, t, i, o) {
        void 0 === t && (t = {}),
        "number" == typeof t && (deprecation("6.1.0", "generateTexture options (scaleMode, resolution, region) are now object options."),
        t = {
            scaleMode: t,
            resolution: i,
            region: o
        });
        var n = t.region
          , r = function __rest(e, t) {
            var i = {};
            for (var o in e)
                Object.prototype.hasOwnProperty.call(e, o) && t.indexOf(o) < 0 && (i[o] = e[o]);
            if (null != e && "function" == typeof Object.getOwnPropertySymbols) {
                var n = 0;
                for (o = Object.getOwnPropertySymbols(e); n < o.length; n++)
                    t.indexOf(o[n]) < 0 && Object.prototype.propertyIsEnumerable.call(e, o[n]) && (i[o[n]] = e[o[n]])
            }
            return i
        }(t, ["region"]);
        0 === (o = n || e.getLocalBounds(null, !0)).width && (o.width = 1),
        0 === o.height && (o.height = 1);
        var s = si.create(Et({
            width: o.width,
            height: o.height
        }, r));
        return Ao.tx = -o.x,
        Ao.ty = -o.y,
        this.render(e, {
            renderTexture: s,
            clear: !1,
            transform: Ao,
            skipUpdateTransform: !!e.parent
        }),
        s
    }
    ,
    AbstractRenderer.prototype.destroy = function(e) {
        for (var t in this.plugins)
            this.plugins[t].destroy(),
            this.plugins[t] = null;
        e && this.view.parentNode && this.view.parentNode.removeChild(this.view);
        var i = this;
        i.plugins = null,
        i.type = ne.RENDERER_TYPE.UNKNOWN,
        i.view = null,
        i.screen = null,
        i._tempDisplayObjectParent = null,
        i.options = null,
        this._backgroundColorRgba = null,
        this._backgroundColorString = null,
        this._lastObjectRendered = null
    }
    ,
    Object.defineProperty(AbstractRenderer.prototype, "backgroundColor", {
        get: function() {
            return this._backgroundColor
        },
        set: function(e) {
            this._backgroundColor = e,
            this._backgroundColorString = hex2string(e),
            hex2rgb(e, this._backgroundColorRgba)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AbstractRenderer.prototype, "backgroundAlpha", {
        get: function() {
            return this._backgroundColorRgba[3]
        },
        set: function(e) {
            this._backgroundColorRgba[3] = e
        },
        enumerable: !1,
        configurable: !0
    }),
    AbstractRenderer);
    function AbstractRenderer(e, t) {
        void 0 === e && (e = ne.RENDERER_TYPE.UNKNOWN);
        var i = Uo.call(this) || this;
        return t = Object.assign({}, Z.RENDER_OPTIONS, t),
        i.options = t,
        i.type = e,
        i.screen = new ze(0,0,t.width,t.height),
        i.view = t.view || Z.ADAPTER.createCanvas(),
        i.resolution = t.resolution || Z.RESOLUTION,
        i.useContextAlpha = t.useContextAlpha,
        i.autoDensity = !!t.autoDensity,
        i.preserveDrawingBuffer = t.preserveDrawingBuffer,
        i.clearBeforeRender = t.clearBeforeRender,
        i._backgroundColor = 0,
        i._backgroundColorRgba = [0, 0, 0, 1],
        i._backgroundColorString = "#000000",
        i.backgroundColor = t.backgroundColor || i._backgroundColor,
        i.backgroundAlpha = t.backgroundAlpha,
        void 0 !== t.transparent && (deprecation("6.0.0", "Option transparent is deprecated, please use backgroundAlpha instead."),
        i.useContextAlpha = t.transparent,
        i.backgroundAlpha = t.transparent ? 0 : 1),
        i._lastObjectRendered = null,
        i.plugins = {},
        i
    }
    var Po = function GLBuffer(e) {
        this.buffer = e || null,
        this.updateID = -1,
        this.byteLength = -1,
        this.refCount = 0
    }
      , Oo = (BufferSystem.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    BufferSystem.prototype.contextChange = function() {
        this.disposeAll(!0),
        this.gl = this.renderer.gl,
        this.CONTEXT_UID = this.renderer.CONTEXT_UID
    }
    ,
    BufferSystem.prototype.bind = function(e) {
        var t = this.gl
          , i = this.CONTEXT_UID
          , o = e._glBuffers[i] || this.createGLBuffer(e);
        t.bindBuffer(e.type, o.buffer)
    }
    ,
    BufferSystem.prototype.bindBufferBase = function(e, t) {
        var i = this.gl
          , o = this.CONTEXT_UID;
        if (this.boundBufferBases[t] !== e) {
            var n = e._glBuffers[o] || this.createGLBuffer(e);
            this.boundBufferBases[t] = e,
            i.bindBufferBase(i.UNIFORM_BUFFER, t, n.buffer)
        }
    }
    ,
    BufferSystem.prototype.bindBufferRange = function(e, t, i) {
        var o = this.gl
          , n = this.CONTEXT_UID;
        i = i || 0;
        var r = e._glBuffers[n] || this.createGLBuffer(e);
        o.bindBufferRange(o.UNIFORM_BUFFER, t || 0, r.buffer, 256 * i, 256)
    }
    ,
    BufferSystem.prototype.update = function(e) {
        var t = this.gl
          , i = this.CONTEXT_UID
          , o = e._glBuffers[i];
        if (e._updateID !== o.updateID)
            if (o.updateID = e._updateID,
            t.bindBuffer(e.type, o.buffer),
            o.byteLength >= e.data.byteLength)
                t.bufferSubData(e.type, 0, e.data);
            else {
                var n = e.static ? t.STATIC_DRAW : t.DYNAMIC_DRAW;
                o.byteLength = e.data.byteLength,
                t.bufferData(e.type, e.data, n)
            }
    }
    ,
    BufferSystem.prototype.dispose = function(e, t) {
        if (this.managedBuffers[e.id]) {
            delete this.managedBuffers[e.id];
            var i = e._glBuffers[this.CONTEXT_UID]
              , o = this.gl;
            e.disposeRunner.remove(this),
            i && (t || o.deleteBuffer(i.buffer),
            delete e._glBuffers[this.CONTEXT_UID])
        }
    }
    ,
    BufferSystem.prototype.disposeAll = function(e) {
        for (var t = Object.keys(this.managedBuffers), i = 0; i < t.length; i++)
            this.dispose(this.managedBuffers[t[i]], e)
    }
    ,
    BufferSystem.prototype.createGLBuffer = function(e) {
        var t = this.CONTEXT_UID
          , i = this.gl;
        return e._glBuffers[t] = new Po(i.createBuffer()),
        (this.managedBuffers[e.id] = e).disposeRunner.add(this),
        e._glBuffers[t]
    }
    ,
    BufferSystem);
    function BufferSystem(e) {
        this.renderer = e,
        this.managedBuffers = {},
        this.boundBufferBases = {}
    }
    var Do, Lo = (__extends$i(Renderer, Do = Ro),
    Renderer.create = function(e) {
        if (isWebGLSupported())
            return new Renderer(e);
        throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')
    }
    ,
    Renderer.prototype.contextChange = function() {
        var e, t = this.gl;
        if (1 === this.context.webGLVersion) {
            var i = t.getParameter(t.FRAMEBUFFER_BINDING);
            t.bindFramebuffer(t.FRAMEBUFFER, null),
            e = t.getParameter(t.SAMPLES),
            t.bindFramebuffer(t.FRAMEBUFFER, i)
        } else
            i = t.getParameter(t.DRAW_FRAMEBUFFER_BINDING),
            t.bindFramebuffer(t.DRAW_FRAMEBUFFER, null),
            e = t.getParameter(t.SAMPLES),
            t.bindFramebuffer(t.DRAW_FRAMEBUFFER, i);
        e >= ne.MSAA_QUALITY.HIGH ? this.multisample = ne.MSAA_QUALITY.HIGH : e >= ne.MSAA_QUALITY.MEDIUM ? this.multisample = ne.MSAA_QUALITY.MEDIUM : e >= ne.MSAA_QUALITY.LOW ? this.multisample = ne.MSAA_QUALITY.LOW : this.multisample = ne.MSAA_QUALITY.NONE
    }
    ,
    Renderer.prototype.addSystem = function(e, t) {
        var i = new e(this);
        if (this[t])
            throw new Error('Whoops! The name "' + t + '" is already in use');
        for (var o in this[t] = i,
        this.runners)
            this.runners[o].add(i);
        return this
    }
    ,
    Renderer.prototype.render = function(e, t) {
        var i, o, n, r;
        if (t && (r = t instanceof si ? (deprecation("6.0.0", "Renderer#render arguments changed, use options instead."),
        i = t,
        o = arguments[2],
        n = arguments[3],
        arguments[4]) : (i = t.renderTexture,
        o = t.clear,
        n = t.transform,
        t.skipUpdateTransform)),
        this.renderingToScreen = !i,
        this.runners.prerender.emit(),
        this.emit("prerender"),
        this.projection.transform = n,
        !this.context.isLost) {
            if (i || (this._lastObjectRendered = e),
            !r) {
                var s = e.enableTempParent();
                e.updateTransform(),
                e.disableTempParent(s)
            }
            this.renderTexture.bind(i),
            this.batch.currentRenderer.start(),
            (void 0 !== o ? o : this.clearBeforeRender) && this.renderTexture.clear(),
            e.render(this),
            this.batch.currentRenderer.flush(),
            i && i.baseTexture.update(),
            this.runners.postrender.emit(),
            this.projection.transform = null,
            this.emit("postrender")
        }
    }
    ,
    Renderer.prototype.generateTexture = function(e, t, i, o) {
        void 0 === t && (t = {});
        var n = Do.prototype.generateTexture.call(this, e, t, i, o);
        return this.framebuffer.blit(),
        n
    }
    ,
    Renderer.prototype.resize = function(e, t) {
        Do.prototype.resize.call(this, e, t),
        this.runners.resize.emit(this.screen.height, this.screen.width)
    }
    ,
    Renderer.prototype.reset = function() {
        return this.runners.reset.emit(),
        this
    }
    ,
    Renderer.prototype.clear = function() {
        this.renderTexture.bind(),
        this.renderTexture.clear()
    }
    ,
    Renderer.prototype.destroy = function(e) {
        for (var t in this.runners.destroy.emit(),
        this.runners)
            this.runners[t].destroy();
        Do.prototype.destroy.call(this, e),
        this.gl = null
    }
    ,
    Object.defineProperty(Renderer.prototype, "extract", {
        get: function() {
            return deprecation("6.0.0", "Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),
            this.plugins.extract
        },
        enumerable: !1,
        configurable: !0
    }),
    Renderer.registerPlugin = function(e, t) {
        deprecation("6.5.0", "Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),
        Tt.add({
            name: e,
            type: ne.ExtensionType.RendererPlugin,
            ref: t
        })
    }
    ,
    Renderer.__plugins = {},
    Renderer);
    function Renderer(e) {
        var t = Do.call(this, ne.RENDERER_TYPE.WEBGL, e) || this;
        return e = t.options,
        t.gl = null,
        t.CONTEXT_UID = 0,
        t.runners = {
            destroy: new vt("destroy"),
            contextChange: new vt("contextChange"),
            reset: new vt("reset"),
            update: new vt("update"),
            postrender: new vt("postrender"),
            prerender: new vt("prerender"),
            resize: new vt("resize")
        },
        t.runners.contextChange.add(t),
        t.globalUniforms = new wi({
            projectionMatrix: new Je
        },!0),
        t.addSystem(no, "mask").addSystem(Ai, "context").addSystem(So, "state").addSystem(Co, "shader").addSystem(Vo, "texture").addSystem(Oo, "buffer").addSystem(Li, "geometry").addSystem(Oi, "framebuffer").addSystem(co, "scissor").addSystem(ho, "stencil").addSystem(po, "projection").addSystem(Eo, "textureGC").addSystem(bi, "filter").addSystem(mo, "renderTexture").addSystem(Ui, "batch"),
        t.initPlugins(Renderer.__plugins),
        t.multisample = void 0,
        e.context ? t.context.initFromContext(e.context) : t.context.initFromOptions({
            alpha: !!t.useContextAlpha,
            antialias: e.antialias,
            premultipliedAlpha: t.useContextAlpha && "notMultiplied" !== t.useContextAlpha,
            stencil: !0,
            preserveDrawingBuffer: e.preserveDrawingBuffer,
            powerPreference: t.options.powerPreference
        }),
        t.renderingToScreen = !0,
        sayHello(2 === t.context.webGLVersion ? "WebGL 2" : "WebGL 1"),
        t.resize(t.options.width, t.options.height),
        t
    }
    function autoDetectRenderer(e) {
        return Lo.create(e)
    }
    Tt.handleByMap(ne.ExtensionType.RendererPlugin, Lo.__plugins);
    var Mo = "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}"
      , xo = "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"
      , Bo = (System.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    System);
    function System(e) {
        deprecation("6.1.0", "System class is deprecated, implemement ISystem interface instead."),
        this.renderer = e
    }
    var No = function BatchDrawCall() {
        this.texArray = null,
        this.blend = 0,
        this.type = ne.DRAW_MODES.TRIANGLES,
        this.start = 0,
        this.size = 0,
        this.data = null
    }
      , Fo = (BatchTextureArray.prototype.clear = function() {
        for (var e = 0; e < this.count; e++)
            this.elements[e] = null;
        this.count = 0
    }
    ,
    BatchTextureArray);
    function BatchTextureArray() {
        this.elements = [],
        this.ids = [],
        this.count = 0
    }
    var ko = (Object.defineProperty(ViewableBuffer.prototype, "int8View", {
        get: function() {
            return this._int8View || (this._int8View = new Int8Array(this.rawBinaryData)),
            this._int8View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "uint8View", {
        get: function() {
            return this._uint8View || (this._uint8View = new Uint8Array(this.rawBinaryData)),
            this._uint8View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "int16View", {
        get: function() {
            return this._int16View || (this._int16View = new Int16Array(this.rawBinaryData)),
            this._int16View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "uint16View", {
        get: function() {
            return this._uint16View || (this._uint16View = new Uint16Array(this.rawBinaryData)),
            this._uint16View
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ViewableBuffer.prototype, "int32View", {
        get: function() {
            return this._int32View || (this._int32View = new Int32Array(this.rawBinaryData)),
            this._int32View
        },
        enumerable: !1,
        configurable: !0
    }),
    ViewableBuffer.prototype.view = function(e) {
        return this[e + "View"]
    }
    ,
    ViewableBuffer.prototype.destroy = function() {
        this.rawBinaryData = null,
        this._int8View = null,
        this._uint8View = null,
        this._int16View = null,
        this._uint16View = null,
        this._int32View = null,
        this.uint32View = null,
        this.float32View = null
    }
    ,
    ViewableBuffer.sizeOf = function(e) {
        switch (e) {
        case "int8":
        case "uint8":
            return 1;
        case "int16":
        case "uint16":
            return 2;
        case "int32":
        case "uint32":
        case "float32":
            return 4;
        default:
            throw new Error(e + " isn't a valid view type")
        }
    }
    ,
    ViewableBuffer);
    function ViewableBuffer(e) {
        "number" == typeof e ? this.rawBinaryData = new ArrayBuffer(e) : e instanceof Uint8Array ? this.rawBinaryData = e.buffer : this.rawBinaryData = e,
        this.uint32View = new Uint32Array(this.rawBinaryData),
        this.float32View = new Float32Array(this.rawBinaryData)
    }
    var Go, jo = (__extends$i(AbstractBatchRenderer, Go = Vi),
    AbstractBatchRenderer.prototype.contextChange = function() {
        var e = this.renderer.gl;
        Z.PREFER_ENV === ne.ENV.WEBGL_LEGACY ? this.MAX_TEXTURES = 1 : (this.MAX_TEXTURES = Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS), Z.SPRITE_MAX_TEXTURES),
        this.MAX_TEXTURES = checkMaxIfStatementsInShader(this.MAX_TEXTURES, e)),
        this._shader = this.shaderGenerator.generateShader(this.MAX_TEXTURES);
        for (var t = 0; t < this._packedGeometryPoolSize; t++)
            this._packedGeometries[t] = new this.geometryClass;
        this.initFlushBuffers()
    }
    ,
    AbstractBatchRenderer.prototype.initFlushBuffers = function() {
        for (var e = AbstractBatchRenderer._drawCallPool, t = AbstractBatchRenderer._textureArrayPool, i = this.size / 4, o = Math.floor(i / this.MAX_TEXTURES) + 1; e.length < i; )
            e.push(new No);
        for (; t.length < o; )
            t.push(new Fo);
        for (var n = 0; n < this.MAX_TEXTURES; n++)
            this._tempBoundTextures[n] = null
    }
    ,
    AbstractBatchRenderer.prototype.onPrerender = function() {
        this._flushId = 0
    }
    ,
    AbstractBatchRenderer.prototype.render = function(e) {
        e._texture.valid && (this._vertexCount + e.vertexData.length / 2 > this.size && this.flush(),
        this._vertexCount += e.vertexData.length / 2,
        this._indexCount += e.indices.length,
        this._bufferedTextures[this._bufferSize] = e._texture.baseTexture,
        this._bufferedElements[this._bufferSize++] = e)
    }
    ,
    AbstractBatchRenderer.prototype.buildTexturesAndDrawCalls = function() {
        var e = this._bufferedTextures
          , t = this.MAX_TEXTURES
          , i = AbstractBatchRenderer._textureArrayPool
          , o = this.renderer.batch
          , n = this._tempBoundTextures
          , r = this.renderer.textureGC.count
          , s = ++Rt._globalBatch
          , a = 0
          , l = i[0]
          , c = 0;
        o.copyBoundTextures(n, t);
        for (var u = 0; u < this._bufferSize; ++u) {
            var d = e[u];
            e[u] = null,
            d._batchEnabled !== s && (l.count >= t && (o.boundArray(l, n, s, t),
            this.buildDrawCalls(l, c, u),
            c = u,
            l = i[++a],
            ++s),
            d._batchEnabled = s,
            d.touched = r,
            l.elements[l.count++] = d)
        }
        for (0 < l.count && (o.boundArray(l, n, s, t),
        this.buildDrawCalls(l, c, this._bufferSize),
        ++a,
        ++s),
        u = 0; u < n.length; u++)
            n[u] = null;
        Rt._globalBatch = s
    }
    ,
    AbstractBatchRenderer.prototype.buildDrawCalls = function(e, t, i) {
        var o = this._bufferedElements
          , n = this._attributeBuffer
          , r = this._indexBuffer
          , s = this.vertexSize
          , a = AbstractBatchRenderer._drawCallPool
          , l = this._dcIndex
          , c = this._aIndex
          , u = this._iIndex
          , d = a[l];
        d.start = this._iIndex,
        d.texArray = e;
        for (var h = t; h < i; ++h) {
            var p = o[h]
              , _ = p._texture.baseTexture
              , f = Ue[_.alphaMode ? 1 : 0][p.blendMode];
            o[h] = null,
            t < h && d.blend !== f && (d.size = u - d.start,
            t = h,
            (d = a[++l]).texArray = e,
            d.start = u),
            this.packInterleavedGeometry(p, n, r, c, u),
            c += p.vertexData.length / 2 * s,
            u += p.indices.length,
            d.blend = f
        }
        t < i && (d.size = u - d.start,
        ++l),
        this._dcIndex = l,
        this._aIndex = c,
        this._iIndex = u
    }
    ,
    AbstractBatchRenderer.prototype.bindAndClearTexArray = function(e) {
        for (var t = this.renderer.texture, i = 0; i < e.count; i++)
            t.bind(e.elements[i], e.ids[i]),
            e.elements[i] = null;
        e.count = 0
    }
    ,
    AbstractBatchRenderer.prototype.updateGeometry = function() {
        var e = this._packedGeometries
          , t = this._attributeBuffer
          , i = this._indexBuffer;
        Z.CAN_UPLOAD_SAME_BUFFER ? (e[this._flushId]._buffer.update(t.rawBinaryData),
        e[this._flushId]._indexBuffer.update(i),
        this.renderer.geometry.updateBuffers()) : (this._packedGeometryPoolSize <= this._flushId && (this._packedGeometryPoolSize++,
        e[this._flushId] = new this.geometryClass),
        e[this._flushId]._buffer.update(t.rawBinaryData),
        e[this._flushId]._indexBuffer.update(i),
        this.renderer.geometry.bind(e[this._flushId]),
        this.renderer.geometry.updateBuffers(),
        this._flushId++)
    }
    ,
    AbstractBatchRenderer.prototype.drawBatches = function() {
        for (var e = this._dcIndex, t = this.renderer, i = t.gl, o = t.state, n = AbstractBatchRenderer._drawCallPool, r = null, s = 0; s < e; s++) {
            var a = n[s]
              , l = a.texArray
              , c = a.type
              , u = a.size
              , d = a.start
              , h = a.blend;
            r !== l && (r = l,
            this.bindAndClearTexArray(l)),
            this.state.blendMode = h,
            o.set(this.state),
            i.drawElements(c, u, i.UNSIGNED_SHORT, 2 * d)
        }
    }
    ,
    AbstractBatchRenderer.prototype.flush = function() {
        0 !== this._vertexCount && (this._attributeBuffer = this.getAttributeBuffer(this._vertexCount),
        this._indexBuffer = this.getIndexBuffer(this._indexCount),
        this._aIndex = 0,
        this._iIndex = 0,
        this._dcIndex = 0,
        this.buildTexturesAndDrawCalls(),
        this.updateGeometry(),
        this.drawBatches(),
        this._bufferSize = 0,
        this._vertexCount = 0,
        this._indexCount = 0)
    }
    ,
    AbstractBatchRenderer.prototype.start = function() {
        this.renderer.state.set(this.state),
        this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),
        this.renderer.shader.bind(this._shader),
        Z.CAN_UPLOAD_SAME_BUFFER && this.renderer.geometry.bind(this._packedGeometries[this._flushId])
    }
    ,
    AbstractBatchRenderer.prototype.stop = function() {
        this.flush()
    }
    ,
    AbstractBatchRenderer.prototype.destroy = function() {
        for (var e = 0; e < this._packedGeometryPoolSize; e++)
            this._packedGeometries[e] && this._packedGeometries[e].destroy();
        this.renderer.off("prerender", this.onPrerender, this),
        this._aBuffers = null,
        this._iBuffers = null,
        this._packedGeometries = null,
        this._attributeBuffer = null,
        this._indexBuffer = null,
        this._shader && (this._shader.destroy(),
        this._shader = null),
        Go.prototype.destroy.call(this)
    }
    ,
    AbstractBatchRenderer.prototype.getAttributeBuffer = function(e) {
        var t = nextPow2(Math.ceil(e / 8))
          , i = log2(t)
          , o = 8 * t;
        this._aBuffers.length <= i && (this._iBuffers.length = i + 1);
        var n = this._aBuffers[o];
        return n || (this._aBuffers[o] = n = new ko(o * this.vertexSize * 4)),
        n
    }
    ,
    AbstractBatchRenderer.prototype.getIndexBuffer = function(e) {
        var t = nextPow2(Math.ceil(e / 12))
          , i = log2(t)
          , o = 12 * t;
        this._iBuffers.length <= i && (this._iBuffers.length = i + 1);
        var n = this._iBuffers[i];
        return n || (this._iBuffers[i] = n = new Uint16Array(o)),
        n
    }
    ,
    AbstractBatchRenderer.prototype.packInterleavedGeometry = function(e, t, i, o, n) {
        for (var r = t.uint32View, s = t.float32View, a = o / this.vertexSize, l = e.uvs, c = e.indices, u = e.vertexData, d = e._texture.baseTexture._batchLocation, h = Math.min(e.worldAlpha, 1), p = h < 1 && e._texture.baseTexture.alphaMode ? premultiplyTint(e._tintRGB, h) : e._tintRGB + (255 * h << 24), _ = 0; _ < u.length; _ += 2)
            s[o++] = u[_],
            s[o++] = u[_ + 1],
            s[o++] = l[_],
            s[o++] = l[_ + 1],
            r[o++] = p,
            s[o++] = d;
        for (_ = 0; _ < c.length; _++)
            i[n++] = a + c[_]
    }
    ,
    AbstractBatchRenderer._drawCallPool = [],
    AbstractBatchRenderer._textureArrayPool = [],
    AbstractBatchRenderer);
    function AbstractBatchRenderer(e) {
        var t = Go.call(this, e) || this;
        return t.shaderGenerator = null,
        t.geometryClass = null,
        t.vertexSize = null,
        t.state = Qi.for2d(),
        t.size = 4 * Z.SPRITE_BATCH_SIZE,
        t._vertexCount = 0,
        t._indexCount = 0,
        t._bufferedElements = [],
        t._bufferedTextures = [],
        t._bufferSize = 0,
        t._shader = null,
        t._packedGeometries = [],
        t._packedGeometryPoolSize = 2,
        t._flushId = 0,
        t._aBuffers = {},
        t._iBuffers = {},
        t.MAX_TEXTURES = 1,
        t.renderer.on("prerender", t.onPrerender, t),
        e.runners.contextChange.add(t),
        t._dcIndex = 0,
        t._aIndex = 0,
        t._iIndex = 0,
        t._attributeBuffer = null,
        t._indexBuffer = null,
        t._tempBoundTextures = [],
        t
    }
    var qo = (BatchShaderGenerator.prototype.generateShader = function(e) {
        if (!this.programCache[e]) {
            for (var t = new Int32Array(e), i = 0; i < e; i++)
                t[i] = i;
            this.defaultGroupCache[e] = wi.from({
                uSamplers: t
            }, !0);
            var o = this.fragTemplate;
            o = (o = o.replace(/%count%/gi, "" + e)).replace(/%forloop%/gi, this.generateSampleSrc(e)),
            this.programCache[e] = new Ki(this.vertexSrc,o)
        }
        var n = {
            tint: new Float32Array([1, 1, 1, 1]),
            translationMatrix: new Je,
            default: this.defaultGroupCache[e]
        };
        return new Ji(this.programCache[e],n)
    }
    ,
    BatchShaderGenerator.prototype.generateSampleSrc = function(e) {
        var t = "";
        t += "\n",
        t += "\n";
        for (var i = 0; i < e; i++)
            0 < i && (t += "\nelse "),
            i < e - 1 && (t += "if(vTextureId < " + i + ".5)"),
            t += "\n{",
            t += "\n\tcolor = texture2D(uSamplers[" + i + "], vTextureCoord);",
            t += "\n}";
        return t += "\n",
        t += "\n"
    }
    ,
    BatchShaderGenerator);
    function BatchShaderGenerator(e, t) {
        if (this.vertexSrc = e,
        this.fragTemplate = t,
        this.programCache = {},
        this.defaultGroupCache = {},
        t.indexOf("%count%") < 0)
            throw new Error('Fragment template must contain "%count%".');
        if (t.indexOf("%forloop%") < 0)
            throw new Error('Fragment template must contain "%forloop%".')
    }
    var zo, Ho = (__extends$i(BatchGeometry, zo = fi),
    BatchGeometry);
    function BatchGeometry(e) {
        void 0 === e && (e = !1);
        var t = zo.call(this) || this;
        return t._buffer = new ui(null,e,!1),
        t._indexBuffer = new ui(null,e,!0),
        t.addAttribute("aVertexPosition", t._buffer, 2, !1, ne.TYPES.FLOAT).addAttribute("aTextureCoord", t._buffer, 2, !1, ne.TYPES.FLOAT).addAttribute("aColor", t._buffer, 4, !0, ne.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId", t._buffer, 1, !0, ne.TYPES.FLOAT).addIndex(t._indexBuffer),
        t
    }
    var Yo = "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"
      , Xo = "varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"
      , Wo = (BatchPluginFactory.create = function(e) {
        var i, t = Object.assign({
            vertex: Yo,
            fragment: Xo,
            geometryClass: Ho,
            vertexSize: 6
        }, e), o = t.vertex, n = t.fragment, r = t.vertexSize, s = t.geometryClass;
        return __extends$i(BatchPlugin, i = jo),
        BatchPlugin;
        function BatchPlugin(e) {
            var t = i.call(this, e) || this;
            return t.shaderGenerator = new qo(o,n),
            t.geometryClass = s,
            t.vertexSize = r,
            t
        }
    }
    ,
    Object.defineProperty(BatchPluginFactory, "defaultVertexSrc", {
        get: function() {
            return Yo
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BatchPluginFactory, "defaultFragmentTemplate", {
        get: function() {
            return Xo
        },
        enumerable: !1,
        configurable: !0
    }),
    BatchPluginFactory);
    function BatchPluginFactory() {}
    var Ko = Wo.create();
    Object.assign(Ko, {
        extension: {
            name: "batch",
            type: ne.ExtensionType.RendererPlugin
        }
    });
    function pg(e) {
        Object.defineProperty(Jo, e, {
            get: function() {
                return deprecation("6.0.0", "PIXI.systems." + e + " has moved to PIXI." + e),
                Jt[e]
            }
        })
    }
    var Jo = {};
    for (var Qo in Jt)
        pg(Qo);
    function sg(e) {
        Object.defineProperty($o, e, {
            get: function() {
                return deprecation("6.0.0", "PIXI.resources." + e + " has moved to PIXI." + e),
                Io[e]
            }
        })
    }
    var $o = {};
    for (var Qo in Io)
        sg(Qo);
    var Zo = {
        accessible: !1,
        accessibleTitle: null,
        accessibleHint: null,
        tabIndex: 0,
        _accessibleActive: !1,
        _accessibleDiv: null,
        accessibleType: "button",
        accessiblePointerEvents: "auto",
        accessibleChildren: !0,
        renderId: -1
    };
    ct.mixin(Zo);
    var en = (Object.defineProperty(AccessibilityManager.prototype, "isActive", {
        get: function() {
            return this._isActive
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AccessibilityManager.prototype, "isMobileAccessibility", {
        get: function() {
            return this._isMobileAccessibility
        },
        enumerable: !1,
        configurable: !0
    }),
    AccessibilityManager.prototype.createTouchHook = function() {
        var e = this
          , t = document.createElement("button");
        t.style.width = "1px",
        t.style.height = "1px",
        t.style.position = "absolute",
        t.style.top = "-1000px",
        t.style.left = "-1000px",
        t.style.zIndex = 2..toString(),
        t.style.backgroundColor = "#FF0000",
        t.title = "select to enable accessibility for this content",
        t.addEventListener("focus", function() {
            e._isMobileAccessibility = !0,
            e.activate(),
            e.destroyTouchHook()
        }),
        document.body.appendChild(t),
        this._hookDiv = t
    }
    ,
    AccessibilityManager.prototype.destroyTouchHook = function() {
        this._hookDiv && (document.body.removeChild(this._hookDiv),
        this._hookDiv = null)
    }
    ,
    AccessibilityManager.prototype.activate = function() {
        var e;
        this._isActive || (this._isActive = !0,
        globalThis.document.addEventListener("mousemove", this._onMouseMove, !0),
        globalThis.removeEventListener("keydown", this._onKeyDown, !1),
        this.renderer.on("postrender", this.update, this),
        null === (e = this.renderer.view.parentNode) || void 0 === e || e.appendChild(this.div))
    }
    ,
    AccessibilityManager.prototype.deactivate = function() {
        var e;
        this._isActive && !this._isMobileAccessibility && (this._isActive = !1,
        globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0),
        globalThis.addEventListener("keydown", this._onKeyDown, !1),
        this.renderer.off("postrender", this.update),
        null === (e = this.div.parentNode) || void 0 === e || e.removeChild(this.div))
    }
    ,
    AccessibilityManager.prototype.updateAccessibleObjects = function(e) {
        if (e.visible && e.accessibleChildren) {
            e.accessible && e.interactive && (e._accessibleActive || this.addChild(e),
            e.renderId = this.renderId);
            var t = e.children;
            if (t)
                for (var i = 0; i < t.length; i++)
                    this.updateAccessibleObjects(t[i])
        }
    }
    ,
    AccessibilityManager.prototype.update = function() {
        var e = performance.now();
        if (!($.android.device && e < this.androidUpdateCount) && (this.androidUpdateCount = e + this.androidUpdateFrequency,
        this.renderer.renderingToScreen)) {
            this.renderer._lastObjectRendered && this.updateAccessibleObjects(this.renderer._lastObjectRendered);
            var t = this.renderer.view.getBoundingClientRect()
              , i = t.left
              , o = t.top
              , n = t.width
              , r = t.height
              , s = this.renderer
              , a = s.width
              , l = s.height
              , c = s.resolution
              , u = n / a * c
              , d = r / l * c
              , h = this.div;
            h.style.left = i + "px",
            h.style.top = o + "px",
            h.style.width = a + "px",
            h.style.height = l + "px";
            for (var p = 0; p < this.children.length; p++) {
                var _ = this.children[p];
                if (_.renderId !== this.renderId)
                    _._accessibleActive = !1,
                    removeItems(this.children, p, 1),
                    this.div.removeChild(_._accessibleDiv),
                    this.pool.push(_._accessibleDiv),
                    _._accessibleDiv = null,
                    p--;
                else {
                    h = _._accessibleDiv;
                    var f = _.hitArea
                      , m = _.worldTransform;
                    _.hitArea ? (h.style.left = (m.tx + f.x * m.a) * u + "px",
                    h.style.top = (m.ty + f.y * m.d) * d + "px",
                    h.style.width = f.width * m.a * u + "px",
                    h.style.height = f.height * m.d * d + "px") : (f = _.getBounds(),
                    this.capHitArea(f),
                    h.style.left = f.x * u + "px",
                    h.style.top = f.y * d + "px",
                    h.style.width = f.width * u + "px",
                    h.style.height = f.height * d + "px",
                    h.title !== _.accessibleTitle && null !== _.accessibleTitle && (h.title = _.accessibleTitle),
                    h.getAttribute("aria-label") !== _.accessibleHint && null !== _.accessibleHint && h.setAttribute("aria-label", _.accessibleHint)),
                    _.accessibleTitle === h.title && _.tabIndex === h.tabIndex || (h.title = _.accessibleTitle,
                    h.tabIndex = _.tabIndex,
                    this.debug && this.updateDebugHTML(h))
                }
            }
            this.renderId++
        }
    }
    ,
    AccessibilityManager.prototype.updateDebugHTML = function(e) {
        e.innerHTML = "type: " + e.type + "</br> title : " + e.title + "</br> tabIndex: " + e.tabIndex
    }
    ,
    AccessibilityManager.prototype.capHitArea = function(e) {
        e.x < 0 && (e.width += e.x,
        e.x = 0),
        e.y < 0 && (e.height += e.y,
        e.y = 0);
        var t = this.renderer
          , i = t.width
          , o = t.height;
        e.x + e.width > i && (e.width = i - e.x),
        e.y + e.height > o && (e.height = o - e.y)
    }
    ,
    AccessibilityManager.prototype.addChild = function(e) {
        var t = this.pool.pop();
        t || ((t = document.createElement("button")).style.width = "100px",
        t.style.height = "100px",
        t.style.backgroundColor = this.debug ? "rgba(255,255,255,0.5)" : "transparent",
        t.style.position = "absolute",
        t.style.zIndex = 2..toString(),
        t.style.borderStyle = "none",
        -1 < navigator.userAgent.toLowerCase().indexOf("chrome") ? t.setAttribute("aria-live", "off") : t.setAttribute("aria-live", "polite"),
        navigator.userAgent.match(/rv:.*Gecko\//) ? t.setAttribute("aria-relevant", "additions") : t.setAttribute("aria-relevant", "text"),
        t.addEventListener("click", this._onClick.bind(this)),
        t.addEventListener("focus", this._onFocus.bind(this)),
        t.addEventListener("focusout", this._onFocusOut.bind(this))),
        t.style.pointerEvents = e.accessiblePointerEvents,
        t.type = e.accessibleType,
        e.accessibleTitle && null !== e.accessibleTitle ? t.title = e.accessibleTitle : e.accessibleHint && null !== e.accessibleHint || (t.title = "displayObject " + e.tabIndex),
        e.accessibleHint && null !== e.accessibleHint && t.setAttribute("aria-label", e.accessibleHint),
        this.debug && this.updateDebugHTML(t),
        e._accessibleActive = !0,
        (e._accessibleDiv = t).displayObject = e,
        this.children.push(e),
        this.div.appendChild(e._accessibleDiv),
        e._accessibleDiv.tabIndex = e.tabIndex
    }
    ,
    AccessibilityManager.prototype._onClick = function(e) {
        var t = this.renderer.plugins.interaction
          , i = e.target.displayObject
          , o = t.eventData;
        t.dispatchEvent(i, "click", o),
        t.dispatchEvent(i, "pointertap", o),
        t.dispatchEvent(i, "tap", o)
    }
    ,
    AccessibilityManager.prototype._onFocus = function(e) {
        e.target.getAttribute("aria-live") || e.target.setAttribute("aria-live", "assertive");
        var t = this.renderer.plugins.interaction
          , i = e.target.displayObject
          , o = t.eventData;
        t.dispatchEvent(i, "mouseover", o)
    }
    ,
    AccessibilityManager.prototype._onFocusOut = function(e) {
        e.target.getAttribute("aria-live") || e.target.setAttribute("aria-live", "polite");
        var t = this.renderer.plugins.interaction
          , i = e.target.displayObject
          , o = t.eventData;
        t.dispatchEvent(i, "mouseout", o)
    }
    ,
    AccessibilityManager.prototype._onKeyDown = function(e) {
        9 === e.keyCode && this.activate()
    }
    ,
    AccessibilityManager.prototype._onMouseMove = function(e) {
        0 === e.movementX && 0 === e.movementY || this.deactivate()
    }
    ,
    AccessibilityManager.prototype.destroy = function() {
        this.destroyTouchHook(),
        this.div = null,
        globalThis.document.removeEventListener("mousemove", this._onMouseMove, !0),
        globalThis.removeEventListener("keydown", this._onKeyDown),
        this.pool = null,
        this.children = null,
        this.renderer = null
    }
    ,
    AccessibilityManager.extension = {
        name: "accessibility",
        type: [ne.ExtensionType.RendererPlugin, ne.ExtensionType.CanvasRendererPlugin]
    },
    AccessibilityManager);
    function AccessibilityManager(e) {
        this.debug = !1,
        this._isActive = !1,
        this._isMobileAccessibility = !1,
        this.pool = [],
        this.renderId = 0,
        this.children = [],
        this.androidUpdateCount = 0,
        this.androidUpdateFrequency = 500,
        this._hookDiv = null,
        ($.tablet || $.phone) && this.createTouchHook();
        var t = document.createElement("div");
        t.style.width = "100px",
        t.style.height = "100px",
        t.style.position = "absolute",
        t.style.top = "0px",
        t.style.left = "0px",
        t.style.zIndex = 2..toString(),
        this.div = t,
        this.renderer = e,
        this._onKeyDown = this._onKeyDown.bind(this),
        this._onMouseMove = this._onMouseMove.bind(this),
        globalThis.addEventListener("keydown", this._onKeyDown, !1)
    }
    var tn = (Object.defineProperty(InteractionData.prototype, "pointerId", {
        get: function() {
            return this.identifier
        },
        enumerable: !1,
        configurable: !0
    }),
    InteractionData.prototype.getLocalPosition = function(e, t, i) {
        return e.worldTransform.applyInverse(i || this.global, t)
    }
    ,
    InteractionData.prototype.copyEvent = function(e) {
        "isPrimary"in e && e.isPrimary && (this.isPrimary = !0),
        this.button = "button"in e && e.button;
        var t = "buttons"in e && e.buttons;
        this.buttons = Number.isInteger(t) ? t : "which"in e && e.which,
        this.width = "width"in e && e.width,
        this.height = "height"in e && e.height,
        this.tiltX = "tiltX"in e && e.tiltX,
        this.tiltY = "tiltY"in e && e.tiltY,
        this.pointerType = "pointerType"in e && e.pointerType,
        this.pressure = "pressure"in e && e.pressure,
        this.rotationAngle = "rotationAngle"in e && e.rotationAngle,
        this.twist = "twist"in e && e.twist || 0,
        this.tangentialPressure = "tangentialPressure"in e && e.tangentialPressure || 0
    }
    ,
    InteractionData.prototype.reset = function() {
        this.isPrimary = !1
    }
    ,
    InteractionData);
    function InteractionData() {
        this.pressure = 0,
        this.rotationAngle = 0,
        this.twist = 0,
        this.tangentialPressure = 0,
        this.global = new je,
        this.target = null,
        this.originalEvent = null,
        this.identifier = null,
        this.isPrimary = !1,
        this.button = 0,
        this.buttons = 0,
        this.width = 0,
        this.height = 0,
        this.tiltX = 0,
        this.tiltY = 0,
        this.pointerType = null,
        this.pressure = 0,
        this.rotationAngle = 0,
        this.twist = 0,
        this.tangentialPressure = 0
    }
    var on = function(e, t) {
        return (on = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var nn = (InteractionEvent.prototype.stopPropagation = function() {
        this.stopped = !0,
        this.stopPropagationHint = !0,
        this.stopsPropagatingAt = this.currentTarget
    }
    ,
    InteractionEvent.prototype.reset = function() {
        this.stopped = !1,
        this.stopsPropagatingAt = null,
        this.stopPropagationHint = !1,
        this.currentTarget = null,
        this.target = null
    }
    ,
    InteractionEvent);
    function InteractionEvent() {
        this.stopped = !1,
        this.stopsPropagatingAt = null,
        this.stopPropagationHint = !1,
        this.target = null,
        this.currentTarget = null,
        this.type = null,
        this.data = null
    }
    var rn = (InteractionTrackingData.prototype._doSet = function(e, t) {
        this._flags = t ? this._flags | e : this._flags & ~e
    }
    ,
    Object.defineProperty(InteractionTrackingData.prototype, "pointerId", {
        get: function() {
            return this._pointerId
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "flags", {
        get: function() {
            return this._flags
        },
        set: function(e) {
            this._flags = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "none", {
        get: function() {
            return this._flags === InteractionTrackingData.FLAGS.NONE
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "over", {
        get: function() {
            return 0 != (this._flags & InteractionTrackingData.FLAGS.OVER)
        },
        set: function(e) {
            this._doSet(InteractionTrackingData.FLAGS.OVER, e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "rightDown", {
        get: function() {
            return 0 != (this._flags & InteractionTrackingData.FLAGS.RIGHT_DOWN)
        },
        set: function(e) {
            this._doSet(InteractionTrackingData.FLAGS.RIGHT_DOWN, e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionTrackingData.prototype, "leftDown", {
        get: function() {
            return 0 != (this._flags & InteractionTrackingData.FLAGS.LEFT_DOWN)
        },
        set: function(e) {
            this._doSet(InteractionTrackingData.FLAGS.LEFT_DOWN, e)
        },
        enumerable: !1,
        configurable: !0
    }),
    InteractionTrackingData.FLAGS = Object.freeze({
        NONE: 0,
        OVER: 1,
        LEFT_DOWN: 2,
        RIGHT_DOWN: 4
    }),
    InteractionTrackingData);
    function InteractionTrackingData(e) {
        this._pointerId = e,
        this._flags = InteractionTrackingData.FLAGS.NONE
    }
    var sn = (TreeSearch.prototype.recursiveFindHit = function(e, t, i, o, n) {
        var r;
        if (!t || !t.visible)
            return !1;
        var s = e.data.global
          , a = !1
          , l = n = t.interactive || n
          , c = !0;
        if (t.hitArea)
            o && (t.worldTransform.applyInverse(s, this._tempPoint),
            t.hitArea.contains(this._tempPoint.x, this._tempPoint.y) ? a = !0 : c = o = !1),
            l = !1;
        else if (t._mask && o) {
            var u = t._mask.isMaskData ? t._mask.maskObject : t._mask;
            u && !(null === (r = u.containsPoint) || void 0 === r ? void 0 : r.call(u, s)) && (o = !1)
        }
        if (c && t.interactiveChildren && t.children)
            for (var d = t.children, h = d.length - 1; 0 <= h; h--) {
                var p = d[h]
                  , _ = this.recursiveFindHit(e, p, i, o, l);
                if (_) {
                    if (!p.parent)
                        continue;
                    l = !1,
                    _ && (e.target && (o = !1),
                    a = !0)
                }
            }
        return n && (o && !e.target && !t.hitArea && t.containsPoint && t.containsPoint(s) && (a = !0),
        t.interactive && (a && !e.target && (e.target = t),
        i && i(e, t, !!a))),
        a
    }
    ,
    TreeSearch.prototype.findHit = function(e, t, i, o) {
        this.recursiveFindHit(e, t, i, o, !1)
    }
    ,
    TreeSearch);
    function TreeSearch() {
        this._tempPoint = new je
    }
    var an = {
        interactive: !1,
        interactiveChildren: !0,
        hitArea: null,
        get buttonMode() {
            return "pointer" === this.cursor
        },
        set buttonMode(e) {
            e ? this.cursor = "pointer" : "pointer" === this.cursor && (this.cursor = null)
        },
        cursor: null,
        get trackedPointers() {
            return void 0 === this._trackedPointers && (this._trackedPointers = {}),
            this._trackedPointers
        },
        _trackedPointers: void 0
    };
    ct.mixin(an);
    var ln, cn = {
        target: null,
        data: {
            global: null
        }
    }, un = (function __extends$h(e, t) {
        function __() {
            this.constructor = e
        }
        on(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(InteractionManager, ln = te),
    Object.defineProperty(InteractionManager.prototype, "useSystemTicker", {
        get: function() {
            return this._useSystemTicker
        },
        set: function(e) {
            (this._useSystemTicker = e) ? this.addTickerListener() : this.removeTickerListener()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(InteractionManager.prototype, "lastObjectRendered", {
        get: function() {
            return this.renderer._lastObjectRendered || this._tempDisplayObject
        },
        enumerable: !1,
        configurable: !0
    }),
    InteractionManager.prototype.hitTest = function(e, t) {
        return cn.target = null,
        cn.data.global = e,
        t = t || this.lastObjectRendered,
        this.processInteractive(cn, t, null, !0),
        cn.target
    }
    ,
    InteractionManager.prototype.setTargetElement = function(e, t) {
        void 0 === t && (t = 1),
        this.removeTickerListener(),
        this.removeEvents(),
        this.interactionDOMElement = e,
        this.resolution = t,
        this.addEvents(),
        this.addTickerListener()
    }
    ,
    InteractionManager.prototype.addTickerListener = function() {
        !this.tickerAdded && this.interactionDOMElement && this._useSystemTicker && (gt.system.add(this.tickerUpdate, this, ne.UPDATE_PRIORITY.INTERACTION),
        this.tickerAdded = !0)
    }
    ,
    InteractionManager.prototype.removeTickerListener = function() {
        this.tickerAdded && (gt.system.remove(this.tickerUpdate, this),
        this.tickerAdded = !1)
    }
    ,
    InteractionManager.prototype.addEvents = function() {
        if (!this.eventsAdded && this.interactionDOMElement) {
            var e = this.interactionDOMElement.style;
            globalThis.navigator.msPointerEnabled ? (e.msContentZooming = "none",
            e.msTouchAction = "none") : this.supportsPointerEvents && (e.touchAction = "none"),
            this.supportsPointerEvents ? (globalThis.document.addEventListener("pointermove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("pointerover", this.onPointerOver, this._eventListenerOptions),
            globalThis.addEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions),
            globalThis.addEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.addEventListener("mousemove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("mousedown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("mouseout", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("mouseover", this.onPointerOver, this._eventListenerOptions),
            globalThis.addEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)),
            this.supportsTouchEvents && (this.interactionDOMElement.addEventListener("touchstart", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("touchend", this.onPointerUp, this._eventListenerOptions),
            this.interactionDOMElement.addEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)),
            this.eventsAdded = !0
        }
    }
    ,
    InteractionManager.prototype.removeEvents = function() {
        if (this.eventsAdded && this.interactionDOMElement) {
            var e = this.interactionDOMElement.style;
            globalThis.navigator.msPointerEnabled ? (e.msContentZooming = "",
            e.msTouchAction = "") : this.supportsPointerEvents && (e.touchAction = ""),
            this.supportsPointerEvents ? (globalThis.document.removeEventListener("pointermove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("pointerdown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("pointerleave", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("pointerover", this.onPointerOver, this._eventListenerOptions),
            globalThis.removeEventListener("pointercancel", this.onPointerCancel, this._eventListenerOptions),
            globalThis.removeEventListener("pointerup", this.onPointerUp, this._eventListenerOptions)) : (globalThis.document.removeEventListener("mousemove", this.onPointerMove, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("mousedown", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("mouseout", this.onPointerOut, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("mouseover", this.onPointerOver, this._eventListenerOptions),
            globalThis.removeEventListener("mouseup", this.onPointerUp, this._eventListenerOptions)),
            this.supportsTouchEvents && (this.interactionDOMElement.removeEventListener("touchstart", this.onPointerDown, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("touchcancel", this.onPointerCancel, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("touchend", this.onPointerUp, this._eventListenerOptions),
            this.interactionDOMElement.removeEventListener("touchmove", this.onPointerMove, this._eventListenerOptions)),
            this.interactionDOMElement = null,
            this.eventsAdded = !1
        }
    }
    ,
    InteractionManager.prototype.tickerUpdate = function(e) {
        this._deltaTime += e,
        this._deltaTime < this.interactionFrequency || (this._deltaTime = 0,
        this.update())
    }
    ,
    InteractionManager.prototype.update = function() {
        if (this.interactionDOMElement)
            if (this._didMove)
                this._didMove = !1;
            else {
                for (var e in this.cursor = null,
                this.activeInteractionData)
                    if (this.activeInteractionData.hasOwnProperty(e)) {
                        var t = this.activeInteractionData[e];
                        if (t.originalEvent && "touch" !== t.pointerType) {
                            var i = this.configureInteractionEventForDOMEvent(this.eventData, t.originalEvent, t);
                            this.processInteractive(i, this.lastObjectRendered, this.processPointerOverOut, !0)
                        }
                    }
                this.setCursorMode(this.cursor)
            }
    }
    ,
    InteractionManager.prototype.setCursorMode = function(e) {
        e = e || "default";
        var t = !0;
        if (globalThis.OffscreenCanvas && this.interactionDOMElement instanceof OffscreenCanvas && (t = !1),
        this.currentCursorMode !== e) {
            this.currentCursorMode = e;
            var i = this.cursorStyles[e];
            if (i)
                switch (typeof i) {
                case "string":
                    t && (this.interactionDOMElement.style.cursor = i);
                    break;
                case "function":
                    i(e);
                    break;
                case "object":
                    t && Object.assign(this.interactionDOMElement.style, i)
                }
            else
                t && "string" == typeof e && !Object.prototype.hasOwnProperty.call(this.cursorStyles, e) && (this.interactionDOMElement.style.cursor = e)
        }
    }
    ,
    InteractionManager.prototype.dispatchEvent = function(e, t, i) {
        i.stopPropagationHint && e !== i.stopsPropagatingAt || (i.currentTarget = e,
        i.type = t,
        e.emit(t, i),
        e[t] && e[t](i))
    }
    ,
    InteractionManager.prototype.delayDispatchEvent = function(e, t, i) {
        this.delayedEvents.push({
            displayObject: e,
            eventString: t,
            eventData: i
        })
    }
    ,
    InteractionManager.prototype.mapPositionToPoint = function(e, t, i) {
        var o;
        o = this.interactionDOMElement.parentElement ? this.interactionDOMElement.getBoundingClientRect() : {
            x: 0,
            y: 0,
            width: this.interactionDOMElement.width,
            height: this.interactionDOMElement.height,
            left: 0,
            top: 0
        };
        var n = 1 / this.resolution;
        e.x = (t - o.left) * (this.interactionDOMElement.width / o.width) * n,
        e.y = (i - o.top) * (this.interactionDOMElement.height / o.height) * n
    }
    ,
    InteractionManager.prototype.processInteractive = function(e, t, i, o) {
        var n = this.search.findHit(e, t, i, o)
          , r = this.delayedEvents;
        if (!r.length)
            return n;
        e.stopPropagationHint = !1;
        var s = r.length;
        this.delayedEvents = [];
        for (var a = 0; a < s; a++) {
            var l = r[a]
              , c = l.displayObject
              , u = l.eventString
              , d = l.eventData;
            d.stopsPropagatingAt === c && (d.stopPropagationHint = !0),
            this.dispatchEvent(c, u, d)
        }
        return n
    }
    ,
    InteractionManager.prototype.onPointerDown = function(e) {
        if (!this.supportsTouchEvents || "touch" !== e.pointerType) {
            var t = this.normalizeToPointerData(e);
            this.autoPreventDefault && t[0].isNormalized && (!e.cancelable && "cancelable"in e || e.preventDefault());
            for (var i = t.length, o = 0; o < i; o++) {
                var n = t[o]
                  , r = this.getInteractionDataForPointerId(n)
                  , s = this.configureInteractionEventForDOMEvent(this.eventData, n, r);
                if (s.data.originalEvent = e,
                this.processInteractive(s, this.lastObjectRendered, this.processPointerDown, !0),
                this.emit("pointerdown", s),
                "touch" === n.pointerType)
                    this.emit("touchstart", s);
                else if ("mouse" === n.pointerType || "pen" === n.pointerType) {
                    var a = 2 === n.button;
                    this.emit(a ? "rightdown" : "mousedown", this.eventData)
                }
            }
        }
    }
    ,
    InteractionManager.prototype.processPointerDown = function(e, t, i) {
        var o = e.data
          , n = e.data.identifier;
        if (i)
            if (t.trackedPointers[n] || (t.trackedPointers[n] = new rn(n)),
            this.dispatchEvent(t, "pointerdown", e),
            "touch" === o.pointerType)
                this.dispatchEvent(t, "touchstart", e);
            else if ("mouse" === o.pointerType || "pen" === o.pointerType) {
                var r = 2 === o.button;
                r ? t.trackedPointers[n].rightDown = !0 : t.trackedPointers[n].leftDown = !0,
                this.dispatchEvent(t, r ? "rightdown" : "mousedown", e)
            }
    }
    ,
    InteractionManager.prototype.onPointerComplete = function(e, t, i) {
        var o = this.normalizeToPointerData(e)
          , n = o.length
          , r = e.target;
        e.composedPath && 0 < e.composedPath().length && (r = e.composedPath()[0]);
        for (var s = r !== this.interactionDOMElement ? "outside" : "", a = 0; a < n; a++) {
            var l = o[a]
              , c = this.getInteractionDataForPointerId(l)
              , u = this.configureInteractionEventForDOMEvent(this.eventData, l, c);
            if (u.data.originalEvent = e,
            this.processInteractive(u, this.lastObjectRendered, i, t || !s),
            this.emit(t ? "pointercancel" : "pointerup" + s, u),
            "mouse" === l.pointerType || "pen" === l.pointerType) {
                var d = 2 === l.button;
                this.emit(d ? "rightup" + s : "mouseup" + s, u)
            } else
                "touch" === l.pointerType && (this.emit(t ? "touchcancel" : "touchend" + s, u),
                this.releaseInteractionDataForPointerId(l.pointerId))
        }
    }
    ,
    InteractionManager.prototype.onPointerCancel = function(e) {
        this.supportsTouchEvents && "touch" === e.pointerType || this.onPointerComplete(e, !0, this.processPointerCancel)
    }
    ,
    InteractionManager.prototype.processPointerCancel = function(e, t) {
        var i = e.data
          , o = e.data.identifier;
        void 0 !== t.trackedPointers[o] && (delete t.trackedPointers[o],
        this.dispatchEvent(t, "pointercancel", e),
        "touch" === i.pointerType && this.dispatchEvent(t, "touchcancel", e))
    }
    ,
    InteractionManager.prototype.onPointerUp = function(e) {
        this.supportsTouchEvents && "touch" === e.pointerType || this.onPointerComplete(e, !1, this.processPointerUp)
    }
    ,
    InteractionManager.prototype.processPointerUp = function(e, t, i) {
        var o = e.data
          , n = e.data.identifier
          , r = t.trackedPointers[n]
          , s = "touch" === o.pointerType
          , a = "mouse" === o.pointerType || "pen" === o.pointerType
          , l = !1;
        if (a) {
            var c = 2 === o.button
              , u = rn.FLAGS
              , d = c ? u.RIGHT_DOWN : u.LEFT_DOWN
              , h = void 0 !== r && r.flags & d;
            i ? (this.dispatchEvent(t, c ? "rightup" : "mouseup", e),
            h && (this.dispatchEvent(t, c ? "rightclick" : "click", e),
            l = !0)) : h && this.dispatchEvent(t, c ? "rightupoutside" : "mouseupoutside", e),
            r && (c ? r.rightDown = !1 : r.leftDown = !1)
        }
        i ? (this.dispatchEvent(t, "pointerup", e),
        s && this.dispatchEvent(t, "touchend", e),
        r && (a && !l || this.dispatchEvent(t, "pointertap", e),
        s && (this.dispatchEvent(t, "tap", e),
        r.over = !1))) : r && (this.dispatchEvent(t, "pointerupoutside", e),
        s && this.dispatchEvent(t, "touchendoutside", e)),
        r && r.none && delete t.trackedPointers[n]
    }
    ,
    InteractionManager.prototype.onPointerMove = function(e) {
        if (!this.supportsTouchEvents || "touch" !== e.pointerType) {
            var t = this.normalizeToPointerData(e);
            "mouse" !== t[0].pointerType && "pen" !== t[0].pointerType || (this._didMove = !0,
            this.cursor = null);
            for (var i = t.length, o = 0; o < i; o++) {
                var n = t[o]
                  , r = this.getInteractionDataForPointerId(n)
                  , s = this.configureInteractionEventForDOMEvent(this.eventData, n, r);
                s.data.originalEvent = e,
                this.processInteractive(s, this.lastObjectRendered, this.processPointerMove, !0),
                this.emit("pointermove", s),
                "touch" === n.pointerType && this.emit("touchmove", s),
                "mouse" !== n.pointerType && "pen" !== n.pointerType || this.emit("mousemove", s)
            }
            "mouse" === t[0].pointerType && this.setCursorMode(this.cursor)
        }
    }
    ,
    InteractionManager.prototype.processPointerMove = function(e, t, i) {
        var o = e.data
          , n = "touch" === o.pointerType
          , r = "mouse" === o.pointerType || "pen" === o.pointerType;
        r && this.processPointerOverOut(e, t, i),
        this.moveWhenInside && !i || (this.dispatchEvent(t, "pointermove", e),
        n && this.dispatchEvent(t, "touchmove", e),
        r && this.dispatchEvent(t, "mousemove", e))
    }
    ,
    InteractionManager.prototype.onPointerOut = function(e) {
        if (!this.supportsTouchEvents || "touch" !== e.pointerType) {
            var t = this.normalizeToPointerData(e)[0];
            "mouse" === t.pointerType && (this.mouseOverRenderer = !1,
            this.setCursorMode(null));
            var i = this.getInteractionDataForPointerId(t)
              , o = this.configureInteractionEventForDOMEvent(this.eventData, t, i);
            o.data.originalEvent = t,
            this.processInteractive(o, this.lastObjectRendered, this.processPointerOverOut, !1),
            this.emit("pointerout", o),
            "mouse" === t.pointerType || "pen" === t.pointerType ? this.emit("mouseout", o) : this.releaseInteractionDataForPointerId(i.identifier)
        }
    }
    ,
    InteractionManager.prototype.processPointerOverOut = function(e, t, i) {
        var o = e.data
          , n = e.data.identifier
          , r = "mouse" === o.pointerType || "pen" === o.pointerType
          , s = t.trackedPointers[n];
        i && !s && (s = t.trackedPointers[n] = new rn(n)),
        void 0 !== s && (i && this.mouseOverRenderer ? (s.over || (s.over = !0,
        this.delayDispatchEvent(t, "pointerover", e),
        r && this.delayDispatchEvent(t, "mouseover", e)),
        r && null === this.cursor && (this.cursor = t.cursor)) : s.over && (s.over = !1,
        this.dispatchEvent(t, "pointerout", this.eventData),
        r && this.dispatchEvent(t, "mouseout", e),
        s.none && delete t.trackedPointers[n]))
    }
    ,
    InteractionManager.prototype.onPointerOver = function(e) {
        if (!this.supportsTouchEvents || "touch" !== e.pointerType) {
            var t = this.normalizeToPointerData(e)[0]
              , i = this.getInteractionDataForPointerId(t)
              , o = this.configureInteractionEventForDOMEvent(this.eventData, t, i);
            "mouse" === (o.data.originalEvent = t).pointerType && (this.mouseOverRenderer = !0),
            this.emit("pointerover", o),
            "mouse" !== t.pointerType && "pen" !== t.pointerType || this.emit("mouseover", o)
        }
    }
    ,
    InteractionManager.prototype.getInteractionDataForPointerId = function(e) {
        var t, i = e.pointerId;
        return 1 === i || "mouse" === e.pointerType ? t = this.mouse : this.activeInteractionData[i] ? t = this.activeInteractionData[i] : ((t = this.interactionDataPool.pop() || new tn).identifier = i,
        this.activeInteractionData[i] = t),
        t.copyEvent(e),
        t
    }
    ,
    InteractionManager.prototype.releaseInteractionDataForPointerId = function(e) {
        var t = this.activeInteractionData[e];
        t && (delete this.activeInteractionData[e],
        t.reset(),
        this.interactionDataPool.push(t))
    }
    ,
    InteractionManager.prototype.configureInteractionEventForDOMEvent = function(e, t, i) {
        return e.data = i,
        this.mapPositionToPoint(i.global, t.clientX, t.clientY),
        "touch" === t.pointerType && (t.globalX = i.global.x,
        t.globalY = i.global.y),
        i.originalEvent = t,
        e.reset(),
        e
    }
    ,
    InteractionManager.prototype.normalizeToPointerData = function(e) {
        var t = [];
        if (this.supportsTouchEvents && e instanceof TouchEvent)
            for (var i = 0, o = e.changedTouches.length; i < o; i++) {
                var n = e.changedTouches[i];
                void 0 === n.button && (n.button = e.touches.length ? 1 : 0),
                void 0 === n.buttons && (n.buttons = e.touches.length ? 1 : 0),
                void 0 === n.isPrimary && (n.isPrimary = 1 === e.touches.length && "touchstart" === e.type),
                void 0 === n.width && (n.width = n.radiusX || 1),
                void 0 === n.height && (n.height = n.radiusY || 1),
                void 0 === n.tiltX && (n.tiltX = 0),
                void 0 === n.tiltY && (n.tiltY = 0),
                void 0 === n.pointerType && (n.pointerType = "touch"),
                void 0 === n.pointerId && (n.pointerId = n.identifier || 0),
                void 0 === n.pressure && (n.pressure = n.force || .5),
                void 0 === n.twist && (n.twist = 0),
                void 0 === n.tangentialPressure && (n.tangentialPressure = 0),
                void 0 === n.layerX && (n.layerX = n.offsetX = n.clientX),
                void 0 === n.layerY && (n.layerY = n.offsetY = n.clientY),
                n.isNormalized = !0,
                t.push(n)
            }
        else if (!globalThis.MouseEvent || e instanceof MouseEvent && !(this.supportsPointerEvents && e instanceof globalThis.PointerEvent)) {
            var r = e;
            void 0 === r.isPrimary && (r.isPrimary = !0),
            void 0 === r.width && (r.width = 1),
            void 0 === r.height && (r.height = 1),
            void 0 === r.tiltX && (r.tiltX = 0),
            void 0 === r.tiltY && (r.tiltY = 0),
            void 0 === r.pointerType && (r.pointerType = "mouse"),
            void 0 === r.pointerId && (r.pointerId = 1),
            void 0 === r.pressure && (r.pressure = .5),
            void 0 === r.twist && (r.twist = 0),
            void 0 === r.tangentialPressure && (r.tangentialPressure = 0),
            r.isNormalized = !0,
            t.push(r)
        } else
            t.push(e);
        return t
    }
    ,
    InteractionManager.prototype.destroy = function() {
        this.removeEvents(),
        this.removeTickerListener(),
        this.removeAllListeners(),
        this.renderer = null,
        this.mouse = null,
        this.eventData = null,
        this.interactionDOMElement = null,
        this.onPointerDown = null,
        this.processPointerDown = null,
        this.onPointerUp = null,
        this.processPointerUp = null,
        this.onPointerCancel = null,
        this.processPointerCancel = null,
        this.onPointerMove = null,
        this.processPointerMove = null,
        this.onPointerOut = null,
        this.processPointerOverOut = null,
        this.onPointerOver = null,
        this.search = null
    }
    ,
    InteractionManager.extension = {
        name: "interaction",
        type: [ne.ExtensionType.RendererPlugin, ne.ExtensionType.CanvasRendererPlugin]
    },
    InteractionManager);
    function InteractionManager(e, t) {
        var i = ln.call(this) || this;
        return t = t || {},
        i.renderer = e,
        i.autoPreventDefault = void 0 === t.autoPreventDefault || t.autoPreventDefault,
        i.interactionFrequency = t.interactionFrequency || 10,
        i.mouse = new tn,
        i.mouse.identifier = 1,
        i.mouse.global.set(-999999),
        i.activeInteractionData = {},
        i.activeInteractionData[1] = i.mouse,
        i.interactionDataPool = [],
        i.eventData = new nn,
        i.interactionDOMElement = null,
        i.moveWhenInside = !1,
        i.eventsAdded = !1,
        i.tickerAdded = !1,
        i.mouseOverRenderer = !("PointerEvent"in globalThis),
        i.supportsTouchEvents = "ontouchstart"in globalThis,
        i.supportsPointerEvents = !!globalThis.PointerEvent,
        i.onPointerUp = i.onPointerUp.bind(i),
        i.processPointerUp = i.processPointerUp.bind(i),
        i.onPointerCancel = i.onPointerCancel.bind(i),
        i.processPointerCancel = i.processPointerCancel.bind(i),
        i.onPointerDown = i.onPointerDown.bind(i),
        i.processPointerDown = i.processPointerDown.bind(i),
        i.onPointerMove = i.onPointerMove.bind(i),
        i.processPointerMove = i.processPointerMove.bind(i),
        i.onPointerOut = i.onPointerOut.bind(i),
        i.processPointerOverOut = i.processPointerOverOut.bind(i),
        i.onPointerOver = i.onPointerOver.bind(i),
        i.cursorStyles = {
            default: "inherit",
            pointer: "pointer"
        },
        i.currentCursorMode = null,
        i.cursor = null,
        i.resolution = 1,
        i.delayedEvents = [],
        i.search = new sn,
        i._tempDisplayObject = new dt,
        i._eventListenerOptions = {
            capture: !0,
            passive: !1
        },
        i._useSystemTicker = void 0 === t.useSystemTicker || t.useSystemTicker,
        i.setTargetElement(i.renderer.view, i.renderer.resolution),
        i
    }
    var dn = new ze
      , hn = (Extract.prototype.image = function(e, t, i) {
        var o = new Image;
        return o.src = this.base64(e, t, i),
        o
    }
    ,
    Extract.prototype.base64 = function(e, t, i) {
        return this.canvas(e).toDataURL(t, i)
    }
    ,
    Extract.prototype.canvas = function(e, t) {
        var i = this._rawPixels(e, t)
          , o = i.pixels
          , n = i.width
          , r = i.height
          , s = i.flipY
          , a = new Le(n,r,1)
          , l = a.context.getImageData(0, 0, n, r);
        if (Extract.arrayPostDivide(o, l.data),
        a.context.putImageData(l, 0, 0),
        s) {
            var c = new Le(a.width,a.height,1);
            c.context.scale(1, -1),
            c.context.drawImage(a.canvas, 0, -r),
            a.destroy(),
            a = c
        }
        return a.canvas
    }
    ,
    Extract.prototype.pixels = function(e, t) {
        var i = this._rawPixels(e, t).pixels;
        return Extract.arrayPostDivide(i, i),
        i
    }
    ,
    Extract.prototype._rawPixels = function(e, t) {
        var i, o, n = this.renderer, r = !1, s = !1;
        if (e)
            if (e instanceof si)
                o = e;
            else {
                var a = 2 <= n.context.webGLVersion ? n.multisample : ne.MSAA_QUALITY.NONE;
                if (o = this.renderer.generateTexture(e, {
                    multisample: a
                }),
                a !== ne.MSAA_QUALITY.NONE) {
                    var l = si.create({
                        width: o.width,
                        height: o.height
                    });
                    n.framebuffer.bind(o.framebuffer),
                    n.framebuffer.blit(l.framebuffer),
                    n.framebuffer.bind(null),
                    o.destroy(!0),
                    o = l
                }
                s = !0
            }
        o ? (i = o.baseTexture.resolution,
        t = null != t ? t : o.frame,
        r = !1,
        n.renderTexture.bind(o)) : (i = n.resolution,
        t || ((t = dn).width = n.width,
        t.height = n.height),
        r = !0,
        n.renderTexture.bind(null));
        var c = Math.round(t.width * i)
          , u = Math.round(t.height * i)
          , d = new Uint8Array(4 * c * u)
          , h = n.gl;
        return h.readPixels(Math.round(t.x * i), Math.round(t.y * i), c, u, h.RGBA, h.UNSIGNED_BYTE, d),
        s && o.destroy(!0),
        {
            pixels: d,
            width: c,
            height: u,
            flipY: r
        }
    }
    ,
    Extract.prototype.destroy = function() {
        this.renderer = null
    }
    ,
    Extract.arrayPostDivide = function(e, t) {
        for (var i = 0; i < e.length; i += 4) {
            var o = t[i + 3] = e[i + 3];
            0 !== o ? (t[i] = Math.round(Math.min(255 * e[i] / o, 255)),
            t[i + 1] = Math.round(Math.min(255 * e[i + 1] / o, 255)),
            t[i + 2] = Math.round(Math.min(255 * e[i + 2] / o, 255))) : (t[i] = e[i],
            t[i + 1] = e[i + 1],
            t[i + 2] = e[i + 2])
        }
    }
    ,
    Extract.extension = {
        name: "extract",
        type: ne.ExtensionType.RendererPlugin
    },
    Extract);
    function Extract(e) {
        this.renderer = e
    }
    var pn = (SignalBinding.prototype.detach = function() {
        return null !== this._owner && (this._owner.detach(this),
        !0)
    }
    ,
    SignalBinding);
    function SignalBinding(e, t, i) {
        void 0 === t && (t = !1),
        this._fn = e,
        this._once = t,
        this._thisArg = i,
        this._next = this._prev = this._owner = null
    }
    function _addSignalBinding(e, t) {
        return e._head ? (e._tail._next = t)._prev = e._tail : e._head = t,
        (e._tail = t)._owner = e,
        t
    }
    var _n, fn = (Signal.prototype.handlers = function(e) {
        void 0 === e && (e = !1);
        var t = this._head;
        if (e)
            return !!t;
        for (var i = []; t; )
            i.push(t),
            t = t._next;
        return i
    }
    ,
    Signal.prototype.has = function(e) {
        if (!(e instanceof pn))
            throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");
        return e._owner === this
    }
    ,
    Signal.prototype.dispatch = function() {
        for (var e = arguments, t = [], i = 0; i < arguments.length; i++)
            t[i] = e[i];
        var o = this._head;
        if (!o)
            return !1;
        for (; o; )
            o._once && this.detach(o),
            o._fn.apply(o._thisArg, t),
            o = o._next;
        return !0
    }
    ,
    Signal.prototype.add = function(e, t) {
        if (void 0 === t && (t = null),
        "function" != typeof e)
            throw new Error("MiniSignal#add(): First arg must be a Function.");
        return _addSignalBinding(this, new pn(e,!1,t))
    }
    ,
    Signal.prototype.once = function(e, t) {
        if (void 0 === t && (t = null),
        "function" != typeof e)
            throw new Error("MiniSignal#once(): First arg must be a Function.");
        return _addSignalBinding(this, new pn(e,!0,t))
    }
    ,
    Signal.prototype.detach = function(e) {
        if (!(e instanceof pn))
            throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");
        return e._owner !== this || (e._prev && (e._prev._next = e._next),
        e._next && (e._next._prev = e._prev),
        e === this._head ? (this._head = e._next,
        null === e._next && (this._tail = null)) : e === this._tail && (this._tail = e._prev,
        this._tail._next = null),
        e._owner = null),
        this
    }
    ,
    Signal.prototype.detachAll = function() {
        var e = this._head;
        if (!e)
            return this;
        for (this._head = this._tail = null; e; )
            e._owner = null,
            e = e._next;
        return this
    }
    ,
    Signal);
    function Signal() {
        this._head = this._tail = void 0
    }
    function parseUri(e, t) {
        t = t || {};
        for (var o = {
            key: ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"],
            q: {
                name: "queryKey",
                parser: /(?:^|&)([^&=]*)=?([^&]*)/g
            },
            parser: {
                strict: /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                loose: /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/
            }
        }, i = o.parser[t.strictMode ? "strict" : "loose"].exec(e), n = {}, r = 14; r--; )
            n[o.key[r]] = i[r] || "";
        return n[o.q.name] = {},
        n[o.key[12]].replace(o.q.parser, function(e, t, i) {
            t && (n[o.q.name][t] = i)
        }),
        n
    }
    var mn, Tn, vn, yn, gn, wn = null;
    function _noop$1() {}
    function setExtMap(e, t, i) {
        t && 0 === t.indexOf(".") && (t = t.substring(1)),
        t && (e[t] = i)
    }
    function reqType(e) {
        return e.toString().replace("object ", "")
    }
    function LoaderResource(e, t, i) {
        if (this._dequeue = _noop$1,
        this._onLoadBinding = null,
        this._elementTimer = 0,
        this._boundComplete = null,
        this._boundOnError = null,
        this._boundOnProgress = null,
        this._boundOnTimeout = null,
        this._boundXhrOnError = null,
        this._boundXhrOnTimeout = null,
        this._boundXhrOnAbort = null,
        this._boundXhrOnLoad = null,
        "string" != typeof e || "string" != typeof t)
            throw new Error("Both name and url are required for constructing a resource.");
        i = i || {},
        this._flags = 0,
        this._setFlag(LoaderResource.STATUS_FLAGS.DATA_URL, 0 === t.indexOf("data:")),
        this.name = e,
        this.url = t,
        this.extension = this._getExtension(),
        this.data = null,
        this.crossOrigin = !0 === i.crossOrigin ? "anonymous" : i.crossOrigin,
        this.timeout = i.timeout || 0,
        this.loadType = i.loadType || this._determineLoadType(),
        this.xhrType = i.xhrType,
        this.metadata = i.metadata || {},
        this.error = null,
        this.xhr = null,
        this.children = [],
        this.type = LoaderResource.TYPE.UNKNOWN,
        this.progressChunk = 0,
        this._dequeue = _noop$1,
        this._onLoadBinding = null,
        this._elementTimer = 0,
        this._boundComplete = this.complete.bind(this),
        this._boundOnError = this._onError.bind(this),
        this._boundOnProgress = this._onProgress.bind(this),
        this._boundOnTimeout = this._onTimeout.bind(this),
        this._boundXhrOnError = this._xhrOnError.bind(this),
        this._boundXhrOnTimeout = this._xhrOnTimeout.bind(this),
        this._boundXhrOnAbort = this._xhrOnAbort.bind(this),
        this._boundXhrOnLoad = this._xhrOnLoad.bind(this),
        this.onStart = new fn,
        this.onProgress = new fn,
        this.onComplete = new fn,
        this.onAfterMiddleware = new fn
    }
    function _noop() {}
    function onlyOnce(n) {
        return function onceWrapper() {
            for (var e = arguments, t = [], i = 0; i < arguments.length; i++)
                t[i] = e[i];
            if (null === n)
                throw new Error("Callback was already called.");
            var o = n;
            n = null,
            o.apply(this, t)
        }
    }
    ne.LoaderResource = (LoaderResource.setExtensionLoadType = function(e, t) {
        setExtMap(LoaderResource._loadTypeMap, e, t)
    }
    ,
    LoaderResource.setExtensionXhrType = function(e, t) {
        setExtMap(LoaderResource._xhrTypeMap, e, t)
    }
    ,
    Object.defineProperty(LoaderResource.prototype, "isDataUrl", {
        get: function() {
            return this._hasFlag(LoaderResource.STATUS_FLAGS.DATA_URL)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(LoaderResource.prototype, "isComplete", {
        get: function() {
            return this._hasFlag(LoaderResource.STATUS_FLAGS.COMPLETE)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(LoaderResource.prototype, "isLoading", {
        get: function() {
            return this._hasFlag(LoaderResource.STATUS_FLAGS.LOADING)
        },
        enumerable: !1,
        configurable: !0
    }),
    LoaderResource.prototype.complete = function() {
        this._clearEvents(),
        this._finish()
    }
    ,
    LoaderResource.prototype.abort = function(e) {
        if (!this.error) {
            if (this.error = new Error(e),
            this._clearEvents(),
            this.xhr)
                this.xhr.abort();
            else if (this.xdr)
                this.xdr.abort();
            else if (this.data)
                if (this.data.src)
                    this.data.src = LoaderResource.EMPTY_GIF;
                else
                    for (; this.data.firstChild; )
                        this.data.removeChild(this.data.firstChild);
            this._finish()
        }
    }
    ,
    LoaderResource.prototype.load = function(e) {
        var t = this;
        if (!this.isLoading)
            if (this.isComplete)
                e && setTimeout(function() {
                    return e(t)
                }, 1);
            else
                switch (e && this.onComplete.once(e),
                this._setFlag(LoaderResource.STATUS_FLAGS.LOADING, !0),
                this.onStart.dispatch(this),
                !1 !== this.crossOrigin && "string" == typeof this.crossOrigin || (this.crossOrigin = this._determineCrossOrigin(this.url)),
                this.loadType) {
                case LoaderResource.LOAD_TYPE.IMAGE:
                    this.type = LoaderResource.TYPE.IMAGE,
                    this._loadElement("image");
                    break;
                case LoaderResource.LOAD_TYPE.AUDIO:
                    this.type = LoaderResource.TYPE.AUDIO,
                    this._loadSourceElement("audio");
                    break;
                case LoaderResource.LOAD_TYPE.VIDEO:
                    this.type = LoaderResource.TYPE.VIDEO,
                    this._loadSourceElement("video");
                    break;
                case LoaderResource.LOAD_TYPE.XHR:
                default:
                    void 0 === _n && (_n = !(!globalThis.XDomainRequest || "withCredentials"in new XMLHttpRequest)),
                    _n && this.crossOrigin ? this._loadXdr() : this._loadXhr()
                }
    }
    ,
    LoaderResource.prototype._hasFlag = function(e) {
        return 0 != (this._flags & e)
    }
    ,
    LoaderResource.prototype._setFlag = function(e, t) {
        this._flags = t ? this._flags | e : this._flags & ~e
    }
    ,
    LoaderResource.prototype._clearEvents = function() {
        clearTimeout(this._elementTimer),
        this.data && this.data.removeEventListener && (this.data.removeEventListener("error", this._boundOnError, !1),
        this.data.removeEventListener("load", this._boundComplete, !1),
        this.data.removeEventListener("progress", this._boundOnProgress, !1),
        this.data.removeEventListener("canplaythrough", this._boundComplete, !1)),
        this.xhr && (this.xhr.removeEventListener ? (this.xhr.removeEventListener("error", this._boundXhrOnError, !1),
        this.xhr.removeEventListener("timeout", this._boundXhrOnTimeout, !1),
        this.xhr.removeEventListener("abort", this._boundXhrOnAbort, !1),
        this.xhr.removeEventListener("progress", this._boundOnProgress, !1),
        this.xhr.removeEventListener("load", this._boundXhrOnLoad, !1)) : (this.xhr.onerror = null,
        this.xhr.ontimeout = null,
        this.xhr.onprogress = null,
        this.xhr.onload = null))
    }
    ,
    LoaderResource.prototype._finish = function() {
        if (this.isComplete)
            throw new Error("Complete called again for an already completed resource.");
        this._setFlag(LoaderResource.STATUS_FLAGS.COMPLETE, !0),
        this._setFlag(LoaderResource.STATUS_FLAGS.LOADING, !1),
        this.onComplete.dispatch(this)
    }
    ,
    LoaderResource.prototype._loadElement = function(e) {
        this.metadata.loadElement ? this.data = this.metadata.loadElement : "image" === e && void 0 !== globalThis.Image ? this.data = new Image : this.data = document.createElement(e),
        this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
        this.metadata.skipSource || (this.data.src = this.url),
        this.data.addEventListener("error", this._boundOnError, !1),
        this.data.addEventListener("load", this._boundComplete, !1),
        this.data.addEventListener("progress", this._boundOnProgress, !1),
        this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout))
    }
    ,
    LoaderResource.prototype._loadSourceElement = function(e) {
        if (this.metadata.loadElement ? this.data = this.metadata.loadElement : "audio" === e && void 0 !== globalThis.Audio ? this.data = new Audio : this.data = document.createElement(e),
        null !== this.data) {
            if (this.crossOrigin && (this.data.crossOrigin = this.crossOrigin),
            !this.metadata.skipSource)
                if (navigator.isCocoonJS)
                    this.data.src = Array.isArray(this.url) ? this.url[0] : this.url;
                else if (Array.isArray(this.url))
                    for (var t = this.metadata.mimeType, i = 0; i < this.url.length; ++i)
                        this.data.appendChild(this._createSource(e, this.url[i], Array.isArray(t) ? t[i] : t));
                else
                    t = this.metadata.mimeType,
                    this.data.appendChild(this._createSource(e, this.url, Array.isArray(t) ? t[0] : t));
            this.data.addEventListener("error", this._boundOnError, !1),
            this.data.addEventListener("load", this._boundComplete, !1),
            this.data.addEventListener("progress", this._boundOnProgress, !1),
            this.data.addEventListener("canplaythrough", this._boundComplete, !1),
            this.data.load(),
            this.timeout && (this._elementTimer = setTimeout(this._boundOnTimeout, this.timeout))
        } else
            this.abort("Unsupported element: " + e)
    }
    ,
    LoaderResource.prototype._loadXhr = function() {
        "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
        var e = this.xhr = new XMLHttpRequest;
        "use-credentials" === this.crossOrigin && (e.withCredentials = !0),
        e.open("GET", this.url, !0),
        e.timeout = this.timeout,
        this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.JSON || this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.DOCUMENT ? e.responseType = LoaderResource.XHR_RESPONSE_TYPE.TEXT : e.responseType = this.xhrType,
        e.addEventListener("error", this._boundXhrOnError, !1),
        e.addEventListener("timeout", this._boundXhrOnTimeout, !1),
        e.addEventListener("abort", this._boundXhrOnAbort, !1),
        e.addEventListener("progress", this._boundOnProgress, !1),
        e.addEventListener("load", this._boundXhrOnLoad, !1),
        e.send()
    }
    ,
    LoaderResource.prototype._loadXdr = function() {
        "string" != typeof this.xhrType && (this.xhrType = this._determineXhrType());
        var e = this.xhr = new globalThis.XDomainRequest;
        e.timeout = this.timeout || 5e3,
        e.onerror = this._boundXhrOnError,
        e.ontimeout = this._boundXhrOnTimeout,
        e.onprogress = this._boundOnProgress,
        e.onload = this._boundXhrOnLoad,
        e.open("GET", this.url, !0),
        setTimeout(function() {
            return e.send()
        }, 1)
    }
    ,
    LoaderResource.prototype._createSource = function(e, t, i) {
        i = i || e + "/" + this._getExtension(t);
        var o = document.createElement("source");
        return o.src = t,
        o.type = i,
        o
    }
    ,
    LoaderResource.prototype._onError = function(e) {
        this.abort("Failed to load element using: " + e.target.nodeName)
    }
    ,
    LoaderResource.prototype._onProgress = function(e) {
        e && e.lengthComputable && this.onProgress.dispatch(this, e.loaded / e.total)
    }
    ,
    LoaderResource.prototype._onTimeout = function() {
        this.abort("Load timed out.")
    }
    ,
    LoaderResource.prototype._xhrOnError = function() {
        var e = this.xhr;
        this.abort(reqType(e) + " Request failed. Status: " + e.status + ', text: "' + e.statusText + '"')
    }
    ,
    LoaderResource.prototype._xhrOnTimeout = function() {
        var e = this.xhr;
        this.abort(reqType(e) + " Request timed out.")
    }
    ,
    LoaderResource.prototype._xhrOnAbort = function() {
        var e = this.xhr;
        this.abort(reqType(e) + " Request was aborted by the user.")
    }
    ,
    LoaderResource.prototype._xhrOnLoad = function() {
        var e = this.xhr
          , t = ""
          , i = void 0 === e.status ? 200 : e.status;
        if ("" !== e.responseType && "text" !== e.responseType && void 0 !== e.responseType || (t = e.responseText),
        0 === i && (0 < t.length || e.responseType === LoaderResource.XHR_RESPONSE_TYPE.BUFFER) ? i = 200 : 1223 === i && (i = 204),
        2 == (i / 100 | 0)) {
            if (this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.TEXT)
                this.data = t,
                this.type = LoaderResource.TYPE.TEXT;
            else if (this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.JSON)
                try {
                    this.data = JSON.parse(t),
                    this.type = LoaderResource.TYPE.JSON
                } catch (e) {
                    return void this.abort("Error trying to parse loaded json: " + e)
                }
            else if (this.xhrType === LoaderResource.XHR_RESPONSE_TYPE.DOCUMENT)
                try {
                    if (globalThis.DOMParser) {
                        var o = new DOMParser;
                        this.data = o.parseFromString(t, "text/xml")
                    } else {
                        var n = document.createElement("div");
                        n.innerHTML = t,
                        this.data = n
                    }
                    this.type = LoaderResource.TYPE.XML
                } catch (e) {
                    return void this.abort("Error trying to parse loaded xml: " + e)
                }
            else
                this.data = e.response || t;
            this.complete()
        } else
            this.abort("[" + e.status + "] " + e.statusText + ": " + e.responseURL)
    }
    ,
    LoaderResource.prototype._determineCrossOrigin = function(e, t) {
        if (0 === e.indexOf("data:"))
            return "";
        if (globalThis.origin !== globalThis.location.origin)
            return "anonymous";
        t = t || globalThis.location,
        (wn = wn || document.createElement("a")).href = e;
        var i = parseUri(wn.href, {
            strictMode: !0
        })
          , o = !i.port && "" === t.port || i.port === t.port
          , n = i.protocol ? i.protocol + ":" : "";
        return i.host === t.hostname && o && n === t.protocol ? "" : "anonymous"
    }
    ,
    LoaderResource.prototype._determineXhrType = function() {
        return LoaderResource._xhrTypeMap[this.extension] || LoaderResource.XHR_RESPONSE_TYPE.TEXT
    }
    ,
    LoaderResource.prototype._determineLoadType = function() {
        return LoaderResource._loadTypeMap[this.extension] || LoaderResource.LOAD_TYPE.XHR
    }
    ,
    LoaderResource.prototype._getExtension = function(e) {
        void 0 === e && (e = this.url);
        var t = "";
        if (this.isDataUrl) {
            var i = e.indexOf("/");
            t = e.substring(i + 1, e.indexOf(";", i))
        } else {
            var o = e.indexOf("?")
              , n = e.indexOf("#")
              , r = Math.min(-1 < o ? o : e.length, -1 < n ? n : e.length);
            t = (e = e.substring(0, r)).substring(e.lastIndexOf(".") + 1)
        }
        return t.toLowerCase()
    }
    ,
    LoaderResource.prototype._getMimeFromXhrType = function(e) {
        switch (e) {
        case LoaderResource.XHR_RESPONSE_TYPE.BUFFER:
            return "application/octet-binary";
        case LoaderResource.XHR_RESPONSE_TYPE.BLOB:
            return "application/blob";
        case LoaderResource.XHR_RESPONSE_TYPE.DOCUMENT:
            return "application/xml";
        case LoaderResource.XHR_RESPONSE_TYPE.JSON:
            return "application/json";
        case LoaderResource.XHR_RESPONSE_TYPE.DEFAULT:
        case LoaderResource.XHR_RESPONSE_TYPE.TEXT:
        default:
            return "text/plain"
        }
    }
    ,
    LoaderResource),
    mn = ne.LoaderResource || (ne.LoaderResource = {}),
    (Tn = mn.STATUS_FLAGS || (mn.STATUS_FLAGS = {}))[Tn.NONE = 0] = "NONE",
    Tn[Tn.DATA_URL = 1] = "DATA_URL",
    Tn[Tn.COMPLETE = 2] = "COMPLETE",
    Tn[Tn.LOADING = 4] = "LOADING",
    (vn = mn.TYPE || (mn.TYPE = {}))[vn.UNKNOWN = 0] = "UNKNOWN",
    vn[vn.JSON = 1] = "JSON",
    vn[vn.XML = 2] = "XML",
    vn[vn.IMAGE = 3] = "IMAGE",
    vn[vn.AUDIO = 4] = "AUDIO",
    vn[vn.VIDEO = 5] = "VIDEO",
    vn[vn.TEXT = 6] = "TEXT",
    (yn = mn.LOAD_TYPE || (mn.LOAD_TYPE = {}))[yn.XHR = 1] = "XHR",
    yn[yn.IMAGE = 2] = "IMAGE",
    yn[yn.AUDIO = 3] = "AUDIO",
    yn[yn.VIDEO = 4] = "VIDEO",
    (gn = mn.XHR_RESPONSE_TYPE || (mn.XHR_RESPONSE_TYPE = {})).DEFAULT = "text",
    gn.BUFFER = "arraybuffer",
    gn.BLOB = "blob",
    gn.DOCUMENT = "document",
    gn.JSON = "json",
    gn.TEXT = "text",
    mn._loadTypeMap = {
        gif: mn.LOAD_TYPE.IMAGE,
        png: mn.LOAD_TYPE.IMAGE,
        bmp: mn.LOAD_TYPE.IMAGE,
        jpg: mn.LOAD_TYPE.IMAGE,
        jpeg: mn.LOAD_TYPE.IMAGE,
        tif: mn.LOAD_TYPE.IMAGE,
        tiff: mn.LOAD_TYPE.IMAGE,
        webp: mn.LOAD_TYPE.IMAGE,
        tga: mn.LOAD_TYPE.IMAGE,
        avif: mn.LOAD_TYPE.IMAGE,
        svg: mn.LOAD_TYPE.IMAGE,
        "svg+xml": mn.LOAD_TYPE.IMAGE,
        mp3: mn.LOAD_TYPE.AUDIO,
        ogg: mn.LOAD_TYPE.AUDIO,
        wav: mn.LOAD_TYPE.AUDIO,
        mp4: mn.LOAD_TYPE.VIDEO,
        webm: mn.LOAD_TYPE.VIDEO
    },
    mn._xhrTypeMap = {
        xhtml: mn.XHR_RESPONSE_TYPE.DOCUMENT,
        html: mn.XHR_RESPONSE_TYPE.DOCUMENT,
        htm: mn.XHR_RESPONSE_TYPE.DOCUMENT,
        xml: mn.XHR_RESPONSE_TYPE.DOCUMENT,
        tmx: mn.XHR_RESPONSE_TYPE.DOCUMENT,
        svg: mn.XHR_RESPONSE_TYPE.DOCUMENT,
        tsx: mn.XHR_RESPONSE_TYPE.DOCUMENT,
        gif: mn.XHR_RESPONSE_TYPE.BLOB,
        png: mn.XHR_RESPONSE_TYPE.BLOB,
        bmp: mn.XHR_RESPONSE_TYPE.BLOB,
        jpg: mn.XHR_RESPONSE_TYPE.BLOB,
        jpeg: mn.XHR_RESPONSE_TYPE.BLOB,
        tif: mn.XHR_RESPONSE_TYPE.BLOB,
        tiff: mn.XHR_RESPONSE_TYPE.BLOB,
        webp: mn.XHR_RESPONSE_TYPE.BLOB,
        tga: mn.XHR_RESPONSE_TYPE.BLOB,
        avif: mn.XHR_RESPONSE_TYPE.BLOB,
        json: mn.XHR_RESPONSE_TYPE.JSON,
        text: mn.XHR_RESPONSE_TYPE.TEXT,
        txt: mn.XHR_RESPONSE_TYPE.TEXT,
        ttf: mn.XHR_RESPONSE_TYPE.BUFFER,
        otf: mn.XHR_RESPONSE_TYPE.BUFFER
    },
    mn.EMPTY_GIF = "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";
    var Cn = function AsyncQueueItem(e, t) {
        this.data = e,
        this.callback = t
    }
      , Sn = (AsyncQueue.prototype._next = function(o) {
        var n = this;
        return function() {
            for (var e = arguments, t = [], i = 0; i < arguments.length; i++)
                t[i] = e[i];
            n.workers -= 1,
            o.callback.apply(o, t),
            null != t[0] && n.error(t[0], o.data),
            n.workers <= n.concurrency - n.buffer && n.unsaturated(),
            n.idle() && n.drain(),
            n.process()
        }
    }
    ,
    AsyncQueue.prototype.push = function(e, t) {
        this._insert(e, !1, t)
    }
    ,
    AsyncQueue.prototype.kill = function() {
        this.workers = 0,
        this.drain = _noop,
        this.started = !1,
        this._tasks = []
    }
    ,
    AsyncQueue.prototype.unshift = function(e, t) {
        this._insert(e, !0, t)
    }
    ,
    AsyncQueue.prototype.length = function() {
        return this._tasks.length
    }
    ,
    AsyncQueue.prototype.running = function() {
        return this.workers
    }
    ,
    AsyncQueue.prototype.idle = function() {
        return this._tasks.length + this.workers === 0
    }
    ,
    AsyncQueue.prototype.pause = function() {
        !0 !== this.paused && (this.paused = !0)
    }
    ,
    AsyncQueue.prototype.resume = function() {
        if (!1 !== this.paused) {
            this.paused = !1;
            for (var e = 1; e <= this.concurrency; e++)
                this.process()
        }
    }
    ,
    AsyncQueue.eachSeries = function(t, i, o, n) {
        var r = 0
          , s = t.length;
        !function next(e) {
            e || r === s ? o && o(e) : n ? setTimeout(function() {
                i(t[r++], next)
            }, 1) : i(t[r++], next)
        }()
    }
    ,
    AsyncQueue.queue = function(e, t) {
        return new AsyncQueue(e,t)
    }
    ,
    AsyncQueue);
    function AsyncQueue(e, t) {
        var n = this;
        if (void 0 === t && (t = 1),
        this.workers = 0,
        this.saturated = _noop,
        this.unsaturated = _noop,
        this.empty = _noop,
        this.drain = _noop,
        this.error = _noop,
        this.started = !1,
        this.paused = !1,
        this._tasks = [],
        this._insert = function(e, t, i) {
            if (i && "function" != typeof i)
                throw new Error("task callback must be a function");
            if (n.started = !0,
            null == e && n.idle())
                setTimeout(function() {
                    return n.drain()
                }, 1);
            else {
                var o = new Cn(e,"function" == typeof i ? i : _noop);
                t ? n._tasks.unshift(o) : n._tasks.push(o),
                setTimeout(n.process, 1)
            }
        }
        ,
        this.process = function() {
            for (; !n.paused && n.workers < n.concurrency && n._tasks.length; ) {
                var e = n._tasks.shift();
                0 === n._tasks.length && n.empty(),
                n.workers += 1,
                n.workers === n.concurrency && n.saturated(),
                n._worker(e.data, onlyOnce(n._next(e)))
            }
        }
        ,
        this._worker = e,
        0 === t)
            throw new Error("Concurrency must not be zero");
        this.concurrency = t,
        this.buffer = t / 4
    }
    var En = /(#[\w-]+)?$/
      , bn = (Loader.prototype._add = function(e, t, i, o) {
        if (this.loading && (!i || !i.parentResource))
            throw new Error("Cannot add resources while the loader is running.");
        if (this.resources[e])
            throw new Error('Resource named "' + e + '" already exists.');
        if (t = this._prepareUrl(t),
        this.resources[e] = new ne.LoaderResource(e,t,i),
        "function" == typeof o && this.resources[e].onAfterMiddleware.once(o),
        this.loading) {
            for (var n = i.parentResource, r = [], s = 0; s < n.children.length; ++s)
                n.children[s].isComplete || r.push(n.children[s]);
            var a = n.progressChunk * (r.length + 1) / (r.length + 2);
            for (n.children.push(this.resources[e]),
            n.progressChunk = a,
            s = 0; s < r.length; ++s)
                r[s].progressChunk = a;
            this.resources[e].progressChunk = a
        }
        return this._queue.push(this.resources[e]),
        this
    }
    ,
    Loader.prototype.pre = function(e) {
        return this._beforeMiddleware.push(e),
        this
    }
    ,
    Loader.prototype.use = function(e) {
        return this._afterMiddleware.push(e),
        this
    }
    ,
    Loader.prototype.reset = function() {
        for (var e in this.progress = 0,
        this.loading = !1,
        this._queue.kill(),
        this._queue.pause(),
        this.resources) {
            var t = this.resources[e];
            t._onLoadBinding && t._onLoadBinding.detach(),
            t.isLoading && t.abort("loader reset")
        }
        return this.resources = {},
        this
    }
    ,
    Loader.prototype.load = function(e) {
        if (deprecation("6.5.0", "@pixi/loaders is being replaced with @pixi/assets in the next major release."),
        "function" == typeof e && this.onComplete.once(e),
        this.loading)
            return this;
        if (this._queue.idle())
            this._onStart(),
            this._onComplete();
        else {
            for (var t = 100 / this._queue._tasks.length, i = 0; i < this._queue._tasks.length; ++i)
                this._queue._tasks[i].data.progressChunk = t;
            this._onStart(),
            this._queue.resume()
        }
        return this
    }
    ,
    Object.defineProperty(Loader.prototype, "concurrency", {
        get: function() {
            return this._queue.concurrency
        },
        set: function(e) {
            this._queue.concurrency = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Loader.prototype._prepareUrl = function(e) {
        var t, i = parseUri(e, {
            strictMode: !0
        });
        if (t = i.protocol || !i.path || 0 === e.indexOf("//") ? e : this.baseUrl.length && this.baseUrl.lastIndexOf("/") !== this.baseUrl.length - 1 && "/" !== e.charAt(0) ? this.baseUrl + "/" + e : this.baseUrl + e,
        this.defaultQueryString) {
            var o = En.exec(t)[0];
            -1 !== (t = t.slice(0, t.length - o.length)).indexOf("?") ? t += "&" + this.defaultQueryString : t += "?" + this.defaultQueryString,
            t += o
        }
        return t
    }
    ,
    Loader.prototype._loadResource = function(i, e) {
        var o = this;
        i._dequeue = e,
        Sn.eachSeries(this._beforeMiddleware, function(e, t) {
            e.call(o, i, function() {
                t(i.isComplete ? {} : null)
            })
        }, function() {
            i.isComplete ? o._onLoad(i) : (i._onLoadBinding = i.onComplete.once(o._onLoad, o),
            i.load())
        }, !0)
    }
    ,
    Loader.prototype._onStart = function() {
        this.progress = 0,
        this.loading = !0,
        this.onStart.dispatch(this)
    }
    ,
    Loader.prototype._onComplete = function() {
        this.progress = 100,
        this.loading = !1,
        this.onComplete.dispatch(this, this.resources)
    }
    ,
    Loader.prototype._onLoad = function(i) {
        var o = this;
        i._onLoadBinding = null,
        this._resourcesParsing.push(i),
        i._dequeue(),
        Sn.eachSeries(this._afterMiddleware, function(e, t) {
            e.call(o, i, t)
        }, function() {
            i.onAfterMiddleware.dispatch(i),
            o.progress = Math.min(100, o.progress + i.progressChunk),
            o.onProgress.dispatch(o, i),
            i.error ? o.onError.dispatch(i.error, o, i) : o.onLoad.dispatch(o, i),
            o._resourcesParsing.splice(o._resourcesParsing.indexOf(i), 1),
            o._queue.idle() && 0 === o._resourcesParsing.length && o._onComplete()
        }, !0)
    }
    ,
    Loader.prototype.destroy = function() {
        this._protected || this.reset()
    }
    ,
    Object.defineProperty(Loader, "shared", {
        get: function() {
            var e = Loader._shared;
            return e || ((e = new Loader)._protected = !0,
            Loader._shared = e),
            e
        },
        enumerable: !1,
        configurable: !0
    }),
    Loader.registerPlugin = function(e) {
        return deprecation("6.5.0", "Loader.registerPlugin() is deprecated, use extensions.add() instead."),
        Tt.add({
            type: ne.ExtensionType.Loader,
            ref: e
        }),
        Loader
    }
    ,
    Loader._plugins = [],
    Loader);
    function Loader(e, t) {
        var i = this;
        void 0 === e && (e = ""),
        void 0 === t && (t = 10),
        this.progress = 0,
        this.loading = !1,
        this.defaultQueryString = "",
        this._beforeMiddleware = [],
        this._afterMiddleware = [],
        this._resourcesParsing = [],
        this._boundLoadResource = function(e, t) {
            return i._loadResource(e, t)
        }
        ,
        this.resources = {},
        this.baseUrl = e,
        this._beforeMiddleware = [],
        this._afterMiddleware = [],
        this._resourcesParsing = [],
        this._boundLoadResource = function(e, t) {
            return i._loadResource(e, t)
        }
        ,
        this._queue = Sn.queue(this._boundLoadResource, t),
        this._queue.pause(),
        this.resources = {},
        this.onProgress = new fn,
        this.onError = new fn,
        this.onLoad = new fn,
        this.onStart = new fn,
        this.onComplete = new fn;
        for (var o = 0; o < Loader._plugins.length; ++o) {
            var n = Loader._plugins[o]
              , r = n.pre
              , s = n.use;
            r && this.pre(r),
            s && this.use(s)
        }
        this._protected = !1
    }
    Tt.handleByList(ne.ExtensionType.Loader, bn._plugins),
    bn.prototype.add = function add(e, t, i, o) {
        if (Array.isArray(e)) {
            for (var n = 0; n < e.length; ++n)
                this.add(e[n]);
            return this
        }
        if ("object" == typeof e && (i = e,
        o = t || i.callback || i.onComplete,
        t = i.url,
        e = i.name || i.key || i.url),
        "string" != typeof t && (o = i,
        i = t,
        t = e),
        "string" != typeof t)
            throw new Error("No url passed to add resource to loader.");
        return "function" == typeof i && (o = i,
        i = null),
        this._add(e, t, i, o)
    }
    ;
    var Vn = (AppLoaderPlugin.init = function(e) {
        e = Object.assign({
            sharedLoader: !1
        }, e),
        this.loader = e.sharedLoader ? bn.shared : new bn
    }
    ,
    AppLoaderPlugin.destroy = function() {
        this.loader && (this.loader.destroy(),
        this.loader = null)
    }
    ,
    AppLoaderPlugin.extension = ne.ExtensionType.Application,
    AppLoaderPlugin);
    function AppLoaderPlugin() {}
    var Un = (TextureLoader.add = function() {
        ne.LoaderResource.setExtensionLoadType("svg", ne.LoaderResource.LOAD_TYPE.XHR),
        ne.LoaderResource.setExtensionXhrType("svg", ne.LoaderResource.XHR_RESPONSE_TYPE.TEXT)
    }
    ,
    TextureLoader.use = function(t, i) {
        if (!t.data || t.type !== ne.LoaderResource.TYPE.IMAGE && "svg" !== t.extension)
            i();
        else {
            var e = t.data
              , o = t.url
              , n = t.name
              , r = t.metadata;
            ni.fromLoader(e, o, n, r).then(function(e) {
                t.texture = e,
                i()
            }).catch(i)
        }
    }
    ,
    TextureLoader.extension = ne.ExtensionType.Loader,
    TextureLoader);
    function TextureLoader() {}
    var In = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
    function parsing(e, t) {
        if (e.data) {
            if (e.xhr && e.xhrType === ne.LoaderResource.XHR_RESPONSE_TYPE.BLOB)
                if (self.Blob && "string" != typeof e.data) {
                    if (0 === e.data.type.indexOf("image")) {
                        var i = globalThis.URL || globalThis.webkitURL
                          , o = i.createObjectURL(e.data);
                        return e.blob = e.data,
                        e.data = new Image,
                        e.data.src = o,
                        e.type = ne.LoaderResource.TYPE.IMAGE,
                        void (e.data.onload = function() {
                            i.revokeObjectURL(o),
                            e.data.onload = null,
                            t()
                        }
                        )
                    }
                } else {
                    var n = e.xhr.getResponseHeader("content-type");
                    if (n && 0 === n.indexOf("image"))
                        return e.data = new Image,
                        e.data.src = "data:" + n + ";base64," + function encodeBinary(e) {
                            for (var t = "", i = 0; i < e.length; ) {
                                for (var o = [0, 0, 0], n = [0, 0, 0, 0], r = 0; r < o.length; ++r)
                                    i < e.length ? o[r] = 255 & e.charCodeAt(i++) : o[r] = 0;
                                switch (n[0] = o[0] >> 2,
                                n[1] = (3 & o[0]) << 4 | o[1] >> 4,
                                n[2] = (15 & o[1]) << 2 | o[2] >> 6,
                                n[3] = 63 & o[2],
                                i - (e.length - 1)) {
                                case 2:
                                    n[3] = 64,
                                    n[2] = 64;
                                    break;
                                case 1:
                                    n[3] = 64
                                }
                                for (r = 0; r < n.length; ++r)
                                    t += In.charAt(n[r])
                            }
                            return t
                        }(e.xhr.responseText),
                        e.type = ne.LoaderResource.TYPE.IMAGE,
                        void (e.data.onload = function() {
                            e.data.onload = null,
                            t()
                        }
                        )
                }
            t()
        } else
            t()
    }
    var An, Rn, Pn = (ParsingLoader.extension = ne.ExtensionType.Loader,
    ParsingLoader.use = parsing,
    ParsingLoader);
    function ParsingLoader() {}
    Tt.add(Un, Pn),
    ne.INTERNAL_FORMATS = void 0,
    (Rn = ne.INTERNAL_FORMATS || (ne.INTERNAL_FORMATS = {}))[Rn.COMPRESSED_RGB_S3TC_DXT1_EXT = 33776] = "COMPRESSED_RGB_S3TC_DXT1_EXT",
    Rn[Rn.COMPRESSED_RGBA_S3TC_DXT1_EXT = 33777] = "COMPRESSED_RGBA_S3TC_DXT1_EXT",
    Rn[Rn.COMPRESSED_RGBA_S3TC_DXT3_EXT = 33778] = "COMPRESSED_RGBA_S3TC_DXT3_EXT",
    Rn[Rn.COMPRESSED_RGBA_S3TC_DXT5_EXT = 33779] = "COMPRESSED_RGBA_S3TC_DXT5_EXT",
    Rn[Rn.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",
    Rn[Rn.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",
    Rn[Rn.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919] = "COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",
    Rn[Rn.COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916] = "COMPRESSED_SRGB_S3TC_DXT1_EXT",
    Rn[Rn.COMPRESSED_R11_EAC = 37488] = "COMPRESSED_R11_EAC",
    Rn[Rn.COMPRESSED_SIGNED_R11_EAC = 37489] = "COMPRESSED_SIGNED_R11_EAC",
    Rn[Rn.COMPRESSED_RG11_EAC = 37490] = "COMPRESSED_RG11_EAC",
    Rn[Rn.COMPRESSED_SIGNED_RG11_EAC = 37491] = "COMPRESSED_SIGNED_RG11_EAC",
    Rn[Rn.COMPRESSED_RGB8_ETC2 = 37492] = "COMPRESSED_RGB8_ETC2",
    Rn[Rn.COMPRESSED_RGBA8_ETC2_EAC = 37496] = "COMPRESSED_RGBA8_ETC2_EAC",
    Rn[Rn.COMPRESSED_SRGB8_ETC2 = 37493] = "COMPRESSED_SRGB8_ETC2",
    Rn[Rn.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 37497] = "COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",
    Rn[Rn.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37494] = "COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",
    Rn[Rn.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 37495] = "COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",
    Rn[Rn.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 35840] = "COMPRESSED_RGB_PVRTC_4BPPV1_IMG",
    Rn[Rn.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 35842] = "COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",
    Rn[Rn.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 35841] = "COMPRESSED_RGB_PVRTC_2BPPV1_IMG",
    Rn[Rn.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 35843] = "COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",
    Rn[Rn.COMPRESSED_RGB_ETC1_WEBGL = 36196] = "COMPRESSED_RGB_ETC1_WEBGL",
    Rn[Rn.COMPRESSED_RGB_ATC_WEBGL = 35986] = "COMPRESSED_RGB_ATC_WEBGL",
    Rn[Rn.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 35986] = "COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",
    Rn[Rn.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 34798] = "COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",
    Rn[Rn.COMPRESSED_RGBA_ASTC_4x4_KHR = 37808] = "COMPRESSED_RGBA_ASTC_4x4_KHR";
    var On = ((An = {})[ne.INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_R11_EAC] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RG11_EAC] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = .25,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = .25,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL] = .5,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1,
    An[ne.INTERNAL_FORMATS.COMPRESSED_RGBA_ASTC_4x4_KHR] = 1,
    An)
      , Dn = function(e, t) {
        return (Dn = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$g(e, t) {
        function __() {
            this.constructor = e
        }
        Dn(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    function __awaiter(e, o, n, r) {
        return new (n = n || Promise)(function(t, i) {
            function fulfilled(e) {
                try {
                    step(r.next(e))
                } catch (e) {
                    i(e)
                }
            }
            function rejected(e) {
                try {
                    step(r.throw(e))
                } catch (e) {
                    i(e)
                }
            }
            function step(e) {
                e.done ? t(e.value) : function adopt(t) {
                    return t instanceof n ? t : new n(function(e) {
                        e(t)
                    }
                    )
                }(e.value).then(fulfilled, rejected)
            }
            step((r = r.apply(e, o || [])).next())
        }
        )
    }
    function __generator(i, o) {
        var n, r, s, e, a = {
            label: 0,
            sent: function() {
                if (1 & s[0])
                    throw s[1];
                return s[1]
            },
            trys: [],
            ops: []
        };
        return e = {
            next: verb(0),
            throw: verb(1),
            return: verb(2)
        },
        "function" == typeof Symbol && (e[Symbol.iterator] = function() {
            return this
        }
        ),
        e;
        function verb(t) {
            return function(e) {
                return function step(t) {
                    if (n)
                        throw new TypeError("Generator is already executing.");
                    for (; a; )
                        try {
                            if (n = 1,
                            r && (s = 2 & t[0] ? r.return : t[0] ? r.throw || ((s = r.return) && s.call(r),
                            0) : r.next) && !(s = s.call(r, t[1])).done)
                                return s;
                            switch (r = 0,
                            s && (t = [2 & t[0], s.value]),
                            t[0]) {
                            case 0:
                            case 1:
                                s = t;
                                break;
                            case 4:
                                return a.label++,
                                {
                                    value: t[1],
                                    done: !1
                                };
                            case 5:
                                a.label++,
                                r = t[1],
                                t = [0];
                                continue;
                            case 7:
                                t = a.ops.pop(),
                                a.trys.pop();
                                continue;
                            default:
                                if (!(s = 0 < (s = a.trys).length && s[s.length - 1]) && (6 === t[0] || 2 === t[0])) {
                                    a = 0;
                                    continue
                                }
                                if (3 === t[0] && (!s || t[1] > s[0] && t[1] < s[3])) {
                                    a.label = t[1];
                                    break
                                }
                                if (6 === t[0] && a.label < s[1]) {
                                    a.label = s[1],
                                    s = t;
                                    break
                                }
                                if (s && a.label < s[2]) {
                                    a.label = s[2],
                                    a.ops.push(t);
                                    break
                                }
                                s[2] && a.ops.pop(),
                                a.trys.pop();
                                continue
                            }
                            t = o.call(i, a)
                        } catch (e) {
                            t = [6, e],
                            r = 0
                        } finally {
                            n = s = 0
                        }
                    if (5 & t[0])
                        throw t[1];
                    return {
                        value: t[0] ? t[1] : void 0,
                        done: !0
                    }
                }([t, e])
            }
        }
    }
    var Ln, Mn = (__extends$g(BlobResource, Ln = Ut),
    BlobResource.prototype.onBlobLoaded = function(e) {}
    ,
    BlobResource.prototype.load = function() {
        return __awaiter(this, void 0, Promise, function() {
            var t;
            return __generator(this, function(e) {
                switch (e.label) {
                case 0:
                    return [4, fetch(this.origin)];
                case 1:
                    return [4, e.sent().blob()];
                case 2:
                    return [4, e.sent().arrayBuffer()];
                case 3:
                    return t = e.sent(),
                    this.data = new Uint32Array(t),
                    this.buffer = new ko(t),
                    this.loaded = !0,
                    this.onBlobLoaded(t),
                    this.update(),
                    [2, this]
                }
            })
        })
    }
    ,
    BlobResource);
    function BlobResource(e, t) {
        void 0 === t && (t = {
            width: 1,
            height: 1,
            autoLoad: !0
        });
        var i, o, n = this;
        return o = "string" == typeof e ? (i = e,
        new Uint8Array) : (i = null,
        e),
        (n = Ln.call(this, o, t) || this).origin = i,
        n.buffer = o ? new ko(o) : null,
        n.origin && !1 !== t.autoLoad && n.load(),
        o && o.length && (n.loaded = !0,
        n.onBlobLoaded(n.buffer.rawBinaryData)),
        n
    }
    var xn, Bn = (__extends$g(CompressedTextureResource, xn = Mn),
    CompressedTextureResource.prototype.upload = function(e, t, i) {
        var o = e.gl;
        if (!e.context.extensions[this._extension])
            throw new Error(this._extension + " textures are not supported on the current machine");
        if (!this._levelBuffers)
            return !1;
        for (var n = 0, r = this.levels; n < r; n++) {
            var s = this._levelBuffers[n]
              , a = s.levelID
              , l = s.levelWidth
              , c = s.levelHeight
              , u = s.levelBuffer;
            o.compressedTexImage2D(o.TEXTURE_2D, a, this.format, l, c, 0, u)
        }
        return !0
    }
    ,
    CompressedTextureResource.prototype.onBlobLoaded = function() {
        this._levelBuffers = CompressedTextureResource._createLevelBuffers(this.buffer.uint8View, this.format, this.levels, 4, 4, this.width, this.height)
    }
    ,
    CompressedTextureResource._formatToExtension = function(e) {
        if (33776 <= e && e <= 33779)
            return "s3tc";
        if (37488 <= e && e <= 37497)
            return "etc";
        if (35840 <= e && e <= 35843)
            return "pvrtc";
        if (36196 <= e)
            return "etc1";
        if (35986 <= e && e <= 34798)
            return "atc";
        throw new Error("Invalid (compressed) texture format given!")
    }
    ,
    CompressedTextureResource._createLevelBuffers = function(e, t, i, o, n, r, s) {
        for (var a = new Array(i), l = e.byteOffset, c = r, u = s, d = c + o - 1 & ~(o - 1), h = u + n - 1 & ~(n - 1), p = d * h * On[t], _ = 0; _ < i; _++)
            a[_] = {
                levelID: _,
                levelWidth: 1 < i ? c : d,
                levelHeight: 1 < i ? u : h,
                levelBuffer: new Uint8Array(e.buffer,l,p)
            },
            l += p,
            p = (d = (c = c >> 1 || 1) + o - 1 & ~(o - 1)) * (h = (u = u >> 1 || 1) + n - 1 & ~(n - 1)) * On[t];
        return a
    }
    ,
    CompressedTextureResource);
    function CompressedTextureResource(e, t) {
        var i = xn.call(this, e, t) || this;
        return i.format = t.format,
        i.levels = t.levels || 1,
        i._width = t.width,
        i._height = t.height,
        i._extension = CompressedTextureResource._formatToExtension(i.format),
        (t.levelBuffers || i.buffer) && (i._levelBuffers = t.levelBuffers || CompressedTextureResource._createLevelBuffers(e instanceof Uint8Array ? e : i.buffer.uint8View, i.format, i.levels, 4, 4, i.width, i.height)),
        i
    }
    var Nn, Fn, kn = (CompressedTextureLoader.use = function(r, s) {
        var e = r.data;
        if (r.type === ne.LoaderResource.TYPE.JSON && e && e.cacheID && e.textures) {
            for (var t = e.textures, i = void 0, o = void 0, n = 0, a = t.length; n < a; n++) {
                var l = t[n]
                  , c = l.src
                  , u = l.format;
                if (u || (o = c),
                CompressedTextureLoader.textureFormats[u]) {
                    i = c;
                    break
                }
            }
            if (!(i = i || o))
                return void s(new Error("Cannot load compressed-textures in " + r.url + ", make sure you provide a fallback"));
            if (i === r.url)
                return void s(new Error("URL of compressed texture cannot be the same as the manifest's URL"));
            var d = {
                crossOrigin: r.crossOrigin,
                metadata: r.metadata.imageMetadata,
                parentResource: r
            }
              , h = we.resolve(r.url.replace(this.baseUrl, ""), i)
              , p = e.cacheID;
            this.add(p, h, d, function(e) {
                if (e.error)
                    s(e.error);
                else {
                    var t = e.texture
                      , i = void 0 === t ? null : t
                      , o = e.textures
                      , n = void 0 === o ? {} : o;
                    Object.assign(r, {
                        texture: i,
                        textures: n
                    }),
                    s()
                }
            })
        } else
            s()
    }
    ,
    Object.defineProperty(CompressedTextureLoader, "textureExtensions", {
        get: function() {
            if (!CompressedTextureLoader._textureExtensions) {
                var e = Z.ADAPTER.createCanvas().getContext("webgl");
                if (!e)
                    return console.warn("WebGL not available for compressed textures. Silently failing."),
                    {};
                var t = {
                    s3tc: e.getExtension("WEBGL_compressed_texture_s3tc"),
                    s3tc_sRGB: e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),
                    etc: e.getExtension("WEBGL_compressed_texture_etc"),
                    etc1: e.getExtension("WEBGL_compressed_texture_etc1"),
                    pvrtc: e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),
                    atc: e.getExtension("WEBGL_compressed_texture_atc"),
                    astc: e.getExtension("WEBGL_compressed_texture_astc")
                };
                CompressedTextureLoader._textureExtensions = t
            }
            return CompressedTextureLoader._textureExtensions
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(CompressedTextureLoader, "textureFormats", {
        get: function() {
            if (!CompressedTextureLoader._textureFormats) {
                var e = CompressedTextureLoader.textureExtensions;
                for (var t in CompressedTextureLoader._textureFormats = {},
                e) {
                    var i = e[t];
                    i && Object.assign(CompressedTextureLoader._textureFormats, Object.getPrototypeOf(i))
                }
            }
            return CompressedTextureLoader._textureFormats
        },
        enumerable: !1,
        configurable: !0
    }),
    CompressedTextureLoader.extension = ne.ExtensionType.Loader,
    CompressedTextureLoader);
    function CompressedTextureLoader() {}
    function registerCompressedTextures(n, e, t) {
        var r = {
            textures: {},
            texture: null
        };
        return e && e.map(function(e) {
            return new ni(new Rt(e,Object.assign({
                mipmap: ne.MIPMAP_MODES.OFF,
                alphaMode: ne.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA
            }, t)))
        }).forEach(function(e, t) {
            var i = e.baseTexture
              , o = n + "-" + (t + 1);
            Rt.addToCache(i, o),
            ni.addToCache(e, o),
            0 === t && (Rt.addToCache(i, n),
            ni.addToCache(e, n),
            r.texture = e),
            r.textures[o] = e
        }),
        r
    }
    var Gn, jn, qn, zn, Hn = 3, Yn = 4, Xn = 7, Wn = 19, Kn = 2, Jn = 0, Qn = 1, $n = 2, Zn = 3;
    (jn = Gn = Gn || {})[jn.DXGI_FORMAT_UNKNOWN = 0] = "DXGI_FORMAT_UNKNOWN",
    jn[jn.DXGI_FORMAT_R32G32B32A32_TYPELESS = 1] = "DXGI_FORMAT_R32G32B32A32_TYPELESS",
    jn[jn.DXGI_FORMAT_R32G32B32A32_FLOAT = 2] = "DXGI_FORMAT_R32G32B32A32_FLOAT",
    jn[jn.DXGI_FORMAT_R32G32B32A32_UINT = 3] = "DXGI_FORMAT_R32G32B32A32_UINT",
    jn[jn.DXGI_FORMAT_R32G32B32A32_SINT = 4] = "DXGI_FORMAT_R32G32B32A32_SINT",
    jn[jn.DXGI_FORMAT_R32G32B32_TYPELESS = 5] = "DXGI_FORMAT_R32G32B32_TYPELESS",
    jn[jn.DXGI_FORMAT_R32G32B32_FLOAT = 6] = "DXGI_FORMAT_R32G32B32_FLOAT",
    jn[jn.DXGI_FORMAT_R32G32B32_UINT = 7] = "DXGI_FORMAT_R32G32B32_UINT",
    jn[jn.DXGI_FORMAT_R32G32B32_SINT = 8] = "DXGI_FORMAT_R32G32B32_SINT",
    jn[jn.DXGI_FORMAT_R16G16B16A16_TYPELESS = 9] = "DXGI_FORMAT_R16G16B16A16_TYPELESS",
    jn[jn.DXGI_FORMAT_R16G16B16A16_FLOAT = 10] = "DXGI_FORMAT_R16G16B16A16_FLOAT",
    jn[jn.DXGI_FORMAT_R16G16B16A16_UNORM = 11] = "DXGI_FORMAT_R16G16B16A16_UNORM",
    jn[jn.DXGI_FORMAT_R16G16B16A16_UINT = 12] = "DXGI_FORMAT_R16G16B16A16_UINT",
    jn[jn.DXGI_FORMAT_R16G16B16A16_SNORM = 13] = "DXGI_FORMAT_R16G16B16A16_SNORM",
    jn[jn.DXGI_FORMAT_R16G16B16A16_SINT = 14] = "DXGI_FORMAT_R16G16B16A16_SINT",
    jn[jn.DXGI_FORMAT_R32G32_TYPELESS = 15] = "DXGI_FORMAT_R32G32_TYPELESS",
    jn[jn.DXGI_FORMAT_R32G32_FLOAT = 16] = "DXGI_FORMAT_R32G32_FLOAT",
    jn[jn.DXGI_FORMAT_R32G32_UINT = 17] = "DXGI_FORMAT_R32G32_UINT",
    jn[jn.DXGI_FORMAT_R32G32_SINT = 18] = "DXGI_FORMAT_R32G32_SINT",
    jn[jn.DXGI_FORMAT_R32G8X24_TYPELESS = 19] = "DXGI_FORMAT_R32G8X24_TYPELESS",
    jn[jn.DXGI_FORMAT_D32_FLOAT_S8X24_UINT = 20] = "DXGI_FORMAT_D32_FLOAT_S8X24_UINT",
    jn[jn.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS = 21] = "DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",
    jn[jn.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT = 22] = "DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",
    jn[jn.DXGI_FORMAT_R10G10B10A2_TYPELESS = 23] = "DXGI_FORMAT_R10G10B10A2_TYPELESS",
    jn[jn.DXGI_FORMAT_R10G10B10A2_UNORM = 24] = "DXGI_FORMAT_R10G10B10A2_UNORM",
    jn[jn.DXGI_FORMAT_R10G10B10A2_UINT = 25] = "DXGI_FORMAT_R10G10B10A2_UINT",
    jn[jn.DXGI_FORMAT_R11G11B10_FLOAT = 26] = "DXGI_FORMAT_R11G11B10_FLOAT",
    jn[jn.DXGI_FORMAT_R8G8B8A8_TYPELESS = 27] = "DXGI_FORMAT_R8G8B8A8_TYPELESS",
    jn[jn.DXGI_FORMAT_R8G8B8A8_UNORM = 28] = "DXGI_FORMAT_R8G8B8A8_UNORM",
    jn[jn.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB = 29] = "DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",
    jn[jn.DXGI_FORMAT_R8G8B8A8_UINT = 30] = "DXGI_FORMAT_R8G8B8A8_UINT",
    jn[jn.DXGI_FORMAT_R8G8B8A8_SNORM = 31] = "DXGI_FORMAT_R8G8B8A8_SNORM",
    jn[jn.DXGI_FORMAT_R8G8B8A8_SINT = 32] = "DXGI_FORMAT_R8G8B8A8_SINT",
    jn[jn.DXGI_FORMAT_R16G16_TYPELESS = 33] = "DXGI_FORMAT_R16G16_TYPELESS",
    jn[jn.DXGI_FORMAT_R16G16_FLOAT = 34] = "DXGI_FORMAT_R16G16_FLOAT",
    jn[jn.DXGI_FORMAT_R16G16_UNORM = 35] = "DXGI_FORMAT_R16G16_UNORM",
    jn[jn.DXGI_FORMAT_R16G16_UINT = 36] = "DXGI_FORMAT_R16G16_UINT",
    jn[jn.DXGI_FORMAT_R16G16_SNORM = 37] = "DXGI_FORMAT_R16G16_SNORM",
    jn[jn.DXGI_FORMAT_R16G16_SINT = 38] = "DXGI_FORMAT_R16G16_SINT",
    jn[jn.DXGI_FORMAT_R32_TYPELESS = 39] = "DXGI_FORMAT_R32_TYPELESS",
    jn[jn.DXGI_FORMAT_D32_FLOAT = 40] = "DXGI_FORMAT_D32_FLOAT",
    jn[jn.DXGI_FORMAT_R32_FLOAT = 41] = "DXGI_FORMAT_R32_FLOAT",
    jn[jn.DXGI_FORMAT_R32_UINT = 42] = "DXGI_FORMAT_R32_UINT",
    jn[jn.DXGI_FORMAT_R32_SINT = 43] = "DXGI_FORMAT_R32_SINT",
    jn[jn.DXGI_FORMAT_R24G8_TYPELESS = 44] = "DXGI_FORMAT_R24G8_TYPELESS",
    jn[jn.DXGI_FORMAT_D24_UNORM_S8_UINT = 45] = "DXGI_FORMAT_D24_UNORM_S8_UINT",
    jn[jn.DXGI_FORMAT_R24_UNORM_X8_TYPELESS = 46] = "DXGI_FORMAT_R24_UNORM_X8_TYPELESS",
    jn[jn.DXGI_FORMAT_X24_TYPELESS_G8_UINT = 47] = "DXGI_FORMAT_X24_TYPELESS_G8_UINT",
    jn[jn.DXGI_FORMAT_R8G8_TYPELESS = 48] = "DXGI_FORMAT_R8G8_TYPELESS",
    jn[jn.DXGI_FORMAT_R8G8_UNORM = 49] = "DXGI_FORMAT_R8G8_UNORM",
    jn[jn.DXGI_FORMAT_R8G8_UINT = 50] = "DXGI_FORMAT_R8G8_UINT",
    jn[jn.DXGI_FORMAT_R8G8_SNORM = 51] = "DXGI_FORMAT_R8G8_SNORM",
    jn[jn.DXGI_FORMAT_R8G8_SINT = 52] = "DXGI_FORMAT_R8G8_SINT",
    jn[jn.DXGI_FORMAT_R16_TYPELESS = 53] = "DXGI_FORMAT_R16_TYPELESS",
    jn[jn.DXGI_FORMAT_R16_FLOAT = 54] = "DXGI_FORMAT_R16_FLOAT",
    jn[jn.DXGI_FORMAT_D16_UNORM = 55] = "DXGI_FORMAT_D16_UNORM",
    jn[jn.DXGI_FORMAT_R16_UNORM = 56] = "DXGI_FORMAT_R16_UNORM",
    jn[jn.DXGI_FORMAT_R16_UINT = 57] = "DXGI_FORMAT_R16_UINT",
    jn[jn.DXGI_FORMAT_R16_SNORM = 58] = "DXGI_FORMAT_R16_SNORM",
    jn[jn.DXGI_FORMAT_R16_SINT = 59] = "DXGI_FORMAT_R16_SINT",
    jn[jn.DXGI_FORMAT_R8_TYPELESS = 60] = "DXGI_FORMAT_R8_TYPELESS",
    jn[jn.DXGI_FORMAT_R8_UNORM = 61] = "DXGI_FORMAT_R8_UNORM",
    jn[jn.DXGI_FORMAT_R8_UINT = 62] = "DXGI_FORMAT_R8_UINT",
    jn[jn.DXGI_FORMAT_R8_SNORM = 63] = "DXGI_FORMAT_R8_SNORM",
    jn[jn.DXGI_FORMAT_R8_SINT = 64] = "DXGI_FORMAT_R8_SINT",
    jn[jn.DXGI_FORMAT_A8_UNORM = 65] = "DXGI_FORMAT_A8_UNORM",
    jn[jn.DXGI_FORMAT_R1_UNORM = 66] = "DXGI_FORMAT_R1_UNORM",
    jn[jn.DXGI_FORMAT_R9G9B9E5_SHAREDEXP = 67] = "DXGI_FORMAT_R9G9B9E5_SHAREDEXP",
    jn[jn.DXGI_FORMAT_R8G8_B8G8_UNORM = 68] = "DXGI_FORMAT_R8G8_B8G8_UNORM",
    jn[jn.DXGI_FORMAT_G8R8_G8B8_UNORM = 69] = "DXGI_FORMAT_G8R8_G8B8_UNORM",
    jn[jn.DXGI_FORMAT_BC1_TYPELESS = 70] = "DXGI_FORMAT_BC1_TYPELESS",
    jn[jn.DXGI_FORMAT_BC1_UNORM = 71] = "DXGI_FORMAT_BC1_UNORM",
    jn[jn.DXGI_FORMAT_BC1_UNORM_SRGB = 72] = "DXGI_FORMAT_BC1_UNORM_SRGB",
    jn[jn.DXGI_FORMAT_BC2_TYPELESS = 73] = "DXGI_FORMAT_BC2_TYPELESS",
    jn[jn.DXGI_FORMAT_BC2_UNORM = 74] = "DXGI_FORMAT_BC2_UNORM",
    jn[jn.DXGI_FORMAT_BC2_UNORM_SRGB = 75] = "DXGI_FORMAT_BC2_UNORM_SRGB",
    jn[jn.DXGI_FORMAT_BC3_TYPELESS = 76] = "DXGI_FORMAT_BC3_TYPELESS",
    jn[jn.DXGI_FORMAT_BC3_UNORM = 77] = "DXGI_FORMAT_BC3_UNORM",
    jn[jn.DXGI_FORMAT_BC3_UNORM_SRGB = 78] = "DXGI_FORMAT_BC3_UNORM_SRGB",
    jn[jn.DXGI_FORMAT_BC4_TYPELESS = 79] = "DXGI_FORMAT_BC4_TYPELESS",
    jn[jn.DXGI_FORMAT_BC4_UNORM = 80] = "DXGI_FORMAT_BC4_UNORM",
    jn[jn.DXGI_FORMAT_BC4_SNORM = 81] = "DXGI_FORMAT_BC4_SNORM",
    jn[jn.DXGI_FORMAT_BC5_TYPELESS = 82] = "DXGI_FORMAT_BC5_TYPELESS",
    jn[jn.DXGI_FORMAT_BC5_UNORM = 83] = "DXGI_FORMAT_BC5_UNORM",
    jn[jn.DXGI_FORMAT_BC5_SNORM = 84] = "DXGI_FORMAT_BC5_SNORM",
    jn[jn.DXGI_FORMAT_B5G6R5_UNORM = 85] = "DXGI_FORMAT_B5G6R5_UNORM",
    jn[jn.DXGI_FORMAT_B5G5R5A1_UNORM = 86] = "DXGI_FORMAT_B5G5R5A1_UNORM",
    jn[jn.DXGI_FORMAT_B8G8R8A8_UNORM = 87] = "DXGI_FORMAT_B8G8R8A8_UNORM",
    jn[jn.DXGI_FORMAT_B8G8R8X8_UNORM = 88] = "DXGI_FORMAT_B8G8R8X8_UNORM",
    jn[jn.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM = 89] = "DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",
    jn[jn.DXGI_FORMAT_B8G8R8A8_TYPELESS = 90] = "DXGI_FORMAT_B8G8R8A8_TYPELESS",
    jn[jn.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB = 91] = "DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",
    jn[jn.DXGI_FORMAT_B8G8R8X8_TYPELESS = 92] = "DXGI_FORMAT_B8G8R8X8_TYPELESS",
    jn[jn.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB = 93] = "DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",
    jn[jn.DXGI_FORMAT_BC6H_TYPELESS = 94] = "DXGI_FORMAT_BC6H_TYPELESS",
    jn[jn.DXGI_FORMAT_BC6H_UF16 = 95] = "DXGI_FORMAT_BC6H_UF16",
    jn[jn.DXGI_FORMAT_BC6H_SF16 = 96] = "DXGI_FORMAT_BC6H_SF16",
    jn[jn.DXGI_FORMAT_BC7_TYPELESS = 97] = "DXGI_FORMAT_BC7_TYPELESS",
    jn[jn.DXGI_FORMAT_BC7_UNORM = 98] = "DXGI_FORMAT_BC7_UNORM",
    jn[jn.DXGI_FORMAT_BC7_UNORM_SRGB = 99] = "DXGI_FORMAT_BC7_UNORM_SRGB",
    jn[jn.DXGI_FORMAT_AYUV = 100] = "DXGI_FORMAT_AYUV",
    jn[jn.DXGI_FORMAT_Y410 = 101] = "DXGI_FORMAT_Y410",
    jn[jn.DXGI_FORMAT_Y416 = 102] = "DXGI_FORMAT_Y416",
    jn[jn.DXGI_FORMAT_NV12 = 103] = "DXGI_FORMAT_NV12",
    jn[jn.DXGI_FORMAT_P010 = 104] = "DXGI_FORMAT_P010",
    jn[jn.DXGI_FORMAT_P016 = 105] = "DXGI_FORMAT_P016",
    jn[jn.DXGI_FORMAT_420_OPAQUE = 106] = "DXGI_FORMAT_420_OPAQUE",
    jn[jn.DXGI_FORMAT_YUY2 = 107] = "DXGI_FORMAT_YUY2",
    jn[jn.DXGI_FORMAT_Y210 = 108] = "DXGI_FORMAT_Y210",
    jn[jn.DXGI_FORMAT_Y216 = 109] = "DXGI_FORMAT_Y216",
    jn[jn.DXGI_FORMAT_NV11 = 110] = "DXGI_FORMAT_NV11",
    jn[jn.DXGI_FORMAT_AI44 = 111] = "DXGI_FORMAT_AI44",
    jn[jn.DXGI_FORMAT_IA44 = 112] = "DXGI_FORMAT_IA44",
    jn[jn.DXGI_FORMAT_P8 = 113] = "DXGI_FORMAT_P8",
    jn[jn.DXGI_FORMAT_A8P8 = 114] = "DXGI_FORMAT_A8P8",
    jn[jn.DXGI_FORMAT_B4G4R4A4_UNORM = 115] = "DXGI_FORMAT_B4G4R4A4_UNORM",
    jn[jn.DXGI_FORMAT_P208 = 116] = "DXGI_FORMAT_P208",
    jn[jn.DXGI_FORMAT_V208 = 117] = "DXGI_FORMAT_V208",
    jn[jn.DXGI_FORMAT_V408 = 118] = "DXGI_FORMAT_V408",
    jn[jn.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE = 119] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",
    jn[jn.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE = 120] = "DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",
    jn[jn.DXGI_FORMAT_FORCE_UINT = 121] = "DXGI_FORMAT_FORCE_UINT",
    (zn = qn = qn || {})[zn.DDS_DIMENSION_TEXTURE1D = 2] = "DDS_DIMENSION_TEXTURE1D",
    zn[zn.DDS_DIMENSION_TEXTURE2D = 3] = "DDS_DIMENSION_TEXTURE2D",
    zn[zn.DDS_DIMENSION_TEXTURE3D = 6] = "DDS_DIMENSION_TEXTURE3D";
    var er, tr, ir, or = ((Nn = {})[827611204] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,
    Nn[861165636] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,
    Nn[894720068] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,
    Nn), nr = ((Fn = {})[Gn.DXGI_FORMAT_BC1_TYPELESS] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,
    Fn[Gn.DXGI_FORMAT_BC1_UNORM] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,
    Fn[Gn.DXGI_FORMAT_BC2_TYPELESS] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,
    Fn[Gn.DXGI_FORMAT_BC2_UNORM] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,
    Fn[Gn.DXGI_FORMAT_BC3_TYPELESS] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,
    Fn[Gn.DXGI_FORMAT_BC3_UNORM] = ne.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,
    Fn[Gn.DXGI_FORMAT_BC1_UNORM_SRGB] = ne.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,
    Fn[Gn.DXGI_FORMAT_BC2_UNORM_SRGB] = ne.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,
    Fn[Gn.DXGI_FORMAT_BC3_UNORM_SRGB] = ne.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,
    Fn);
    function parseDDS(e) {
        var t = new Uint32Array(e);
        if (542327876 !== t[0])
            throw new Error("Invalid DDS file magic word");
        var i = new Uint32Array(e,0,124 / Uint32Array.BYTES_PER_ELEMENT)
          , o = i[Hn]
          , n = i[Yn]
          , r = i[Xn]
          , s = new Uint32Array(e,Wn * Uint32Array.BYTES_PER_ELEMENT,32 / Uint32Array.BYTES_PER_ELEMENT)
          , a = s[1];
        if (4 & a) {
            var l = s[Kn];
            if (808540228 !== l) {
                var c = or[l]
                  , u = new Uint8Array(e,128);
                return [new Bn(u,{
                    format: c,
                    width: n,
                    height: o,
                    levels: r
                })]
            }
            var d = new Uint32Array(t.buffer,128,20 / Uint32Array.BYTES_PER_ELEMENT)
              , h = d[Jn]
              , p = d[Qn]
              , _ = d[$n]
              , f = d[Zn]
              , m = nr[h];
            if (void 0 === m)
                throw new Error("DDSParser cannot parse texture data with DXGI format " + h);
            if (4 === _)
                throw new Error("DDSParser does not support cubemap textures");
            if (p === qn.DDS_DIMENSION_TEXTURE3D)
                throw new Error("DDSParser does not supported 3D texture data");
            var T = new Array;
            if (1 === f)
                T.push(new Uint8Array(e,148));
            else {
                for (var v = On[m], y = 0, g = n, w = o, C = 0; C < r; C++) {
                    y += Math.max(1, g + 3 & -4) * Math.max(1, w + 3 & -4) * v,
                    g >>>= 1,
                    w >>>= 1
                }
                var S = 148;
                for (C = 0; C < f; C++)
                    T.push(new Uint8Array(e,S,y)),
                    S += y
            }
            return T.map(function(e) {
                return new Bn(e,{
                    format: m,
                    width: n,
                    height: o,
                    levels: r
                })
            })
        }
        if (64 & a)
            throw new Error("DDSParser does not support uncompressed texture data.");
        if (512 & a)
            throw new Error("DDSParser does not supported YUV uncompressed texture data.");
        if (131072 & a)
            throw new Error("DDSParser does not support single-channel (lumninance) texture data!");
        if (2 & a)
            throw new Error("DDSParser does not support single-channel (alpha) texture data!");
        throw new Error("DDSParser failed to load a texture file due to an unknown reason!")
    }
    var rr = [171, 75, 84, 88, 32, 49, 49, 187, 13, 10, 26, 10]
      , sr = 12
      , ar = 16
      , lr = 24
      , cr = 28
      , ur = 36
      , dr = 40
      , hr = 44
      , pr = 48
      , _r = 52
      , fr = 56
      , mr = 60
      , Tr = 64
      , vr = ((er = {})[ne.TYPES.UNSIGNED_BYTE] = 1,
    er[ne.TYPES.UNSIGNED_SHORT] = 2,
    er[ne.TYPES.INT] = 4,
    er[ne.TYPES.UNSIGNED_INT] = 4,
    er[ne.TYPES.FLOAT] = 4,
    er[ne.TYPES.HALF_FLOAT] = 8,
    er)
      , yr = ((tr = {})[ne.FORMATS.RGBA] = 4,
    tr[ne.FORMATS.RGB] = 3,
    tr[ne.FORMATS.RG] = 2,
    tr[ne.FORMATS.RED] = 1,
    tr[ne.FORMATS.LUMINANCE] = 1,
    tr[ne.FORMATS.LUMINANCE_ALPHA] = 2,
    tr[ne.FORMATS.ALPHA] = 1,
    tr)
      , gr = ((ir = {})[ne.TYPES.UNSIGNED_SHORT_4_4_4_4] = 2,
    ir[ne.TYPES.UNSIGNED_SHORT_5_5_5_1] = 2,
    ir[ne.TYPES.UNSIGNED_SHORT_5_6_5] = 2,
    ir);
    function parseKTX(e, t, i) {
        void 0 === i && (i = !1);
        var o = new DataView(t);
        if (!function validate(e, t) {
            for (var i = 0; i < rr.length; i++)
                if (t.getUint8(i) !== rr[i])
                    return console.error(e + " is not a valid *.ktx file!"),
                    !1;
            return !0
        }(e, o))
            return null;
        var n = 67305985 === o.getUint32(sr, !0)
          , r = o.getUint32(ar, n)
          , s = o.getUint32(lr, n)
          , a = o.getUint32(cr, n)
          , l = o.getUint32(ur, n)
          , c = o.getUint32(dr, n) || 1
          , u = o.getUint32(hr, n) || 1
          , d = o.getUint32(pr, n) || 1
          , h = o.getUint32(_r, n)
          , p = o.getUint32(fr, n)
          , _ = o.getUint32(mr, n);
        if (0 === c || 1 !== u)
            throw new Error("Only 2D textures are supported");
        if (1 !== h)
            throw new Error("CubeTextures are not supported by KTXLoader yet!");
        if (1 !== d)
            throw new Error("WebGL does not support array textures");
        var f, m = l + 3 & -4, T = c + 3 & -4, v = new Array(d), y = l * c;
        if (0 === r && (y = m * T),
        void 0 === (f = 0 !== r ? vr[r] ? vr[r] * yr[s] : gr[r] : On[a]))
            throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");
        for (var g = i ? function parseKvData(e, t, i) {
            var o = new Map
              , n = 0;
            for (; n < t; ) {
                var r = e.getUint32(Tr + n, i)
                  , s = Tr + n + 4
                  , a = 3 - (r + 3) % 4;
                if (0 === r || t - n < r) {
                    console.error("KTXLoader: keyAndValueByteSize out of bounds");
                    break
                }
                for (var l = 0; l < r && 0 !== e.getUint8(s + l); l++)
                    ;
                if (-1 === l) {
                    console.error("KTXLoader: Failed to find null byte terminating kvData key");
                    break
                }
                var c = (new TextDecoder).decode(new Uint8Array(e.buffer,s,l))
                  , u = new DataView(e.buffer,s + l + 1,r - l - 1);
                o.set(c, u),
                n += 4 + r + a
            }
            return o
        }(o, _, n) : null, w = y * f, C = l, S = c, E = m, b = T, V = Tr + _, U = 0; U < p; U++) {
            for (var I = o.getUint32(V, n), A = V + 4, R = 0; R < d; R++) {
                var P = v[R];
                (P = P || (v[R] = new Array(p)))[U] = {
                    levelID: U,
                    levelWidth: 1 < p || 0 !== r ? C : E,
                    levelHeight: 1 < p || 0 !== r ? S : b,
                    levelBuffer: new Uint8Array(t,A,w)
                },
                A += w
            }
            V = (V += I + 4) % 4 != 0 ? V + 4 - V % 4 : V,
            w = (E = (C = C >> 1 || 1) + 4 - 1 & -4) * (b = (S = S >> 1 || 1) + 4 - 1 & -4) * f
        }
        return 0 !== r ? {
            uncompressed: v.map(function(e) {
                var t = e[0].levelBuffer
                  , i = !1;
                return r === ne.TYPES.FLOAT ? t = new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength / 4) : r === ne.TYPES.UNSIGNED_INT ? (i = !0,
                t = new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength / 4)) : r === ne.TYPES.INT && (i = !0,
                t = new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength / 4)),
                {
                    resource: new Ut(t,{
                        width: e[0].levelWidth,
                        height: e[0].levelHeight
                    }),
                    type: r,
                    format: i ? function convertFormatToInteger(e) {
                        switch (e) {
                        case ne.FORMATS.RGBA:
                            return ne.FORMATS.RGBA_INTEGER;
                        case ne.FORMATS.RGB:
                            return ne.FORMATS.RGB_INTEGER;
                        case ne.FORMATS.RG:
                            return ne.FORMATS.RG_INTEGER;
                        case ne.FORMATS.RED:
                            return ne.FORMATS.RED_INTEGER;
                        default:
                            return e
                        }
                    }(s) : s
                }
            }),
            kvData: g
        } : {
            compressed: v.map(function(e) {
                return new Bn(null,{
                    format: a,
                    width: l,
                    height: c,
                    levels: p,
                    levelBuffers: e
                })
            }),
            kvData: g
        }
    }
    ne.LoaderResource.setExtensionXhrType("dds", ne.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);
    var wr = (DDSLoader.use = function(e, t) {
        if ("dds" === e.extension && e.data)
            try {
                Object.assign(e, registerCompressedTextures(e.name || e.url, parseDDS(e.data), e.metadata))
            } catch (e) {
                return void t(e)
            }
        t()
    }
    ,
    DDSLoader.extension = ne.ExtensionType.Loader,
    DDSLoader);
    function DDSLoader() {}
    ne.LoaderResource.setExtensionXhrType("ktx", ne.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);
    var Cr = (KTXLoader.use = function(e, t) {
        if ("ktx" === e.extension && e.data)
            try {
                var n = e.name || e.url
                  , i = parseKTX(n, e.data, this.loadKeyValueData)
                  , o = i.compressed
                  , r = i.uncompressed
                  , s = i.kvData;
                if (o) {
                    var a = registerCompressedTextures(n, o, e.metadata);
                    if (s && a.textures)
                        for (var l in a.textures)
                            a.textures[l].baseTexture.ktxKeyValueData = s;
                    Object.assign(e, a)
                } else if (r) {
                    var c = {};
                    r.forEach(function(e, t) {
                        var i = new ni(new Rt(e.resource,{
                            mipmap: ne.MIPMAP_MODES.OFF,
                            alphaMode: ne.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,
                            type: e.type,
                            format: e.format
                        }))
                          , o = n + "-" + (t + 1);
                        s && (i.baseTexture.ktxKeyValueData = s),
                        Rt.addToCache(i.baseTexture, o),
                        ni.addToCache(i, o),
                        0 === t && (c[n] = i,
                        Rt.addToCache(i.baseTexture, n),
                        ni.addToCache(i, n)),
                        c[o] = i
                    }),
                    Object.assign(e, {
                        textures: c
                    })
                }
            } catch (e) {
                return void t(e)
            }
        t()
    }
    ,
    KTXLoader.extension = ne.ExtensionType.Loader,
    KTXLoader.loadKeyValueData = !1,
    KTXLoader);
    function KTXLoader() {}
    var Sr = function(e, t) {
        return (Sr = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$f(e, t) {
        function __() {
            this.constructor = e
        }
        Sr(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    var Er, br = (__extends$f(ParticleContainer, Er = pt),
    ParticleContainer.prototype.setProperties = function(e) {
        e && (this._properties[0] = "vertices"in e || "scale"in e ? !!e.vertices || !!e.scale : this._properties[0],
        this._properties[1] = "position"in e ? !!e.position : this._properties[1],
        this._properties[2] = "rotation"in e ? !!e.rotation : this._properties[2],
        this._properties[3] = "uvs"in e ? !!e.uvs : this._properties[3],
        this._properties[4] = "tint"in e || "alpha"in e ? !!e.tint || !!e.alpha : this._properties[4])
    }
    ,
    ParticleContainer.prototype.updateTransform = function() {
        this.displayObjectUpdateTransform()
    }
    ,
    Object.defineProperty(ParticleContainer.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(e) {
            hex2rgb(this._tint = e, this.tintRgb)
        },
        enumerable: !1,
        configurable: !0
    }),
    ParticleContainer.prototype.render = function(e) {
        var t = this;
        this.visible && !(this.worldAlpha <= 0) && this.children.length && this.renderable && (this.baseTexture || (this.baseTexture = this.children[0]._texture.baseTexture,
        this.baseTexture.valid || this.baseTexture.once("update", function() {
            return t.onChildrenChange(0)
        })),
        e.batch.setObjectRenderer(e.plugins.particle),
        e.plugins.particle.render(this))
    }
    ,
    ParticleContainer.prototype.onChildrenChange = function(e) {
        for (var t = Math.floor(e / this._batchSize); this._bufferUpdateIDs.length < t; )
            this._bufferUpdateIDs.push(0);
        this._bufferUpdateIDs[t] = ++this._updateID
    }
    ,
    ParticleContainer.prototype.dispose = function() {
        if (this._buffers) {
            for (var e = 0; e < this._buffers.length; ++e)
                this._buffers[e].destroy();
            this._buffers = null
        }
    }
    ,
    ParticleContainer.prototype.destroy = function(e) {
        Er.prototype.destroy.call(this, e),
        this.dispose(),
        this._properties = null,
        this._buffers = null,
        this._bufferUpdateIDs = null
    }
    ,
    ParticleContainer);
    function ParticleContainer(e, t, i, o) {
        void 0 === e && (e = 1500),
        void 0 === i && (i = 16384),
        void 0 === o && (o = !1);
        var n = Er.call(this) || this;
        return 16384 < i && (i = 16384),
        n._properties = [!1, !0, !1, !1, !1],
        n._maxSize = e,
        n._batchSize = i,
        n._buffers = null,
        n._bufferUpdateIDs = [],
        n._updateID = 0,
        n.interactiveChildren = !1,
        n.blendMode = ne.BLEND_MODES.NORMAL,
        n.autoResize = o,
        n.roundPixels = !0,
        n.baseTexture = null,
        n.setProperties(t),
        n._tint = 0,
        n.tintRgb = new Float32Array(4),
        n.tint = 16777215,
        n
    }
    var Vr = (ParticleBuffer.prototype.initBuffers = function() {
        var e = this.geometry
          , t = 0;
        this.indexBuffer = new ui(createIndicesForQuads(this.size),!0,!0),
        e.addIndex(this.indexBuffer);
        for (var i = this.dynamicStride = 0; i < this.dynamicProperties.length; ++i)
            (s = this.dynamicProperties[i]).offset = t,
            t += s.size,
            this.dynamicStride += s.size;
        var o = new ArrayBuffer(this.size * this.dynamicStride * 4 * 4);
        this.dynamicData = new Float32Array(o),
        this.dynamicDataUint32 = new Uint32Array(o),
        this.dynamicBuffer = new ui(this.dynamicData,!1,!1);
        var n = 0;
        for (i = this.staticStride = 0; i < this.staticProperties.length; ++i)
            (s = this.staticProperties[i]).offset = n,
            n += s.size,
            this.staticStride += s.size;
        var r = new ArrayBuffer(this.size * this.staticStride * 4 * 4);
        for (this.staticData = new Float32Array(r),
        this.staticDataUint32 = new Uint32Array(r),
        this.staticBuffer = new ui(this.staticData,!0,!1),
        i = 0; i < this.dynamicProperties.length; ++i) {
            var s = this.dynamicProperties[i];
            e.addAttribute(s.attributeName, this.dynamicBuffer, 0, s.type === ne.TYPES.UNSIGNED_BYTE, s.type, 4 * this.dynamicStride, 4 * s.offset)
        }
        for (i = 0; i < this.staticProperties.length; ++i)
            s = this.staticProperties[i],
            e.addAttribute(s.attributeName, this.staticBuffer, 0, s.type === ne.TYPES.UNSIGNED_BYTE, s.type, 4 * this.staticStride, 4 * s.offset)
    }
    ,
    ParticleBuffer.prototype.uploadDynamic = function(e, t, i) {
        for (var o = 0; o < this.dynamicProperties.length; o++) {
            var n = this.dynamicProperties[o];
            n.uploadFunction(e, t, i, n.type === ne.TYPES.UNSIGNED_BYTE ? this.dynamicDataUint32 : this.dynamicData, this.dynamicStride, n.offset)
        }
        this.dynamicBuffer._updateID++
    }
    ,
    ParticleBuffer.prototype.uploadStatic = function(e, t, i) {
        for (var o = 0; o < this.staticProperties.length; o++) {
            var n = this.staticProperties[o];
            n.uploadFunction(e, t, i, n.type === ne.TYPES.UNSIGNED_BYTE ? this.staticDataUint32 : this.staticData, this.staticStride, n.offset)
        }
        this.staticBuffer._updateID++
    }
    ,
    ParticleBuffer.prototype.destroy = function() {
        this.indexBuffer = null,
        this.dynamicProperties = null,
        this.dynamicBuffer = null,
        this.dynamicData = null,
        this.dynamicDataUint32 = null,
        this.staticProperties = null,
        this.staticBuffer = null,
        this.staticData = null,
        this.staticDataUint32 = null,
        this.geometry.destroy()
    }
    ,
    ParticleBuffer);
    function ParticleBuffer(e, t, i) {
        this.geometry = new fi,
        this.indexBuffer = null,
        this.size = i,
        this.dynamicProperties = [],
        this.staticProperties = [];
        for (var o = 0; o < e.length; ++o) {
            var n = e[o];
            n = {
                attributeName: n.attributeName,
                size: n.size,
                uploadFunction: n.uploadFunction,
                type: n.type || ne.TYPES.FLOAT,
                offset: n.offset
            },
            t[o] ? this.dynamicProperties.push(n) : this.staticProperties.push(n)
        }
        this.staticStride = 0,
        this.staticBuffer = null,
        this.staticData = null,
        this.staticDataUint32 = null,
        this.dynamicStride = 0,
        this.dynamicBuffer = null,
        this.dynamicData = null,
        this.dynamicDataUint32 = null,
        this._updateID = 0,
        this.initBuffers()
    }
    var Ur, Ir, Ar, Rr = (__extends$f(ParticleRenderer, Ur = Vi),
    ParticleRenderer.prototype.render = function(e) {
        var t = e.children
          , i = e._maxSize
          , o = e._batchSize
          , n = this.renderer
          , r = t.length;
        if (0 !== r) {
            i < r && !e.autoResize && (r = i);
            var s = e._buffers;
            s = s || (e._buffers = this.generateBuffers(e));
            var a = t[0]._texture.baseTexture
              , l = 0 < a.alphaMode;
            this.state.blendMode = correctBlendMode(e.blendMode, l),
            n.state.set(this.state);
            var c = n.gl
              , u = e.worldTransform.copyTo(this.tempMatrix);
            u.prepend(n.globalUniforms.uniforms.projectionMatrix),
            this.shader.uniforms.translationMatrix = u.toArray(!0),
            this.shader.uniforms.uColor = premultiplyRgba(e.tintRgb, e.worldAlpha, this.shader.uniforms.uColor, l),
            this.shader.uniforms.uSampler = a,
            this.renderer.shader.bind(this.shader);
            for (var d = !1, h = 0, p = 0; h < r; h += o,
            p += 1) {
                var _ = r - h;
                o < _ && (_ = o),
                p >= s.length && s.push(this._generateOneMoreBuffer(e));
                var f = s[p];
                f.uploadDynamic(t, h, _);
                var m = e._bufferUpdateIDs[p] || 0;
                (d = d || f._updateID < m) && (f._updateID = e._updateID,
                f.uploadStatic(t, h, _)),
                n.geometry.bind(f.geometry),
                c.drawElements(c.TRIANGLES, 6 * _, c.UNSIGNED_SHORT, 0)
            }
        }
    }
    ,
    ParticleRenderer.prototype.generateBuffers = function(e) {
        for (var t = [], i = e._maxSize, o = e._batchSize, n = e._properties, r = 0; r < i; r += o)
            t.push(new Vr(this.properties,n,o));
        return t
    }
    ,
    ParticleRenderer.prototype._generateOneMoreBuffer = function(e) {
        var t = e._batchSize
          , i = e._properties;
        return new Vr(this.properties,i,t)
    }
    ,
    ParticleRenderer.prototype.uploadVertices = function(e, t, i, o, n, r) {
        for (var s = 0, a = 0, l = 0, c = 0, u = 0; u < i; ++u) {
            var d = e[t + u]
              , h = d._texture
              , p = d.scale.x
              , _ = d.scale.y
              , f = h.trim
              , m = h.orig;
            f ? (s = (a = f.x - d.anchor.x * m.width) + f.width,
            l = (c = f.y - d.anchor.y * m.height) + f.height) : (s = m.width * (1 - d.anchor.x),
            a = m.width * -d.anchor.x,
            l = m.height * (1 - d.anchor.y),
            c = m.height * -d.anchor.y),
            o[r] = a * p,
            o[r + 1] = c * _,
            o[r + n] = s * p,
            o[r + n + 1] = c * _,
            o[r + 2 * n] = s * p,
            o[r + 2 * n + 1] = l * _,
            o[r + 3 * n] = a * p,
            o[r + 3 * n + 1] = l * _,
            r += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadPosition = function(e, t, i, o, n, r) {
        for (var s = 0; s < i; s++) {
            var a = e[t + s].position;
            o[r] = a.x,
            o[r + 1] = a.y,
            o[r + n] = a.x,
            o[r + n + 1] = a.y,
            o[r + 2 * n] = a.x,
            o[r + 2 * n + 1] = a.y,
            o[r + 3 * n] = a.x,
            o[r + 3 * n + 1] = a.y,
            r += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadRotation = function(e, t, i, o, n, r) {
        for (var s = 0; s < i; s++) {
            var a = e[t + s].rotation;
            o[r] = a,
            o[r + n] = a,
            o[r + 2 * n] = a,
            o[r + 3 * n] = a,
            r += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadUvs = function(e, t, i, o, n, r) {
        for (var s = 0; s < i; ++s) {
            var a = e[t + s]._texture._uvs;
            a ? (o[r] = a.x0,
            o[r + 1] = a.y0,
            o[r + n] = a.x1,
            o[r + n + 1] = a.y1,
            o[r + 2 * n] = a.x2,
            o[r + 2 * n + 1] = a.y2,
            o[r + 3 * n] = a.x3,
            o[r + 3 * n + 1] = a.y3) : (o[r] = 0,
            o[r + 1] = 0,
            o[r + n] = 0,
            o[r + n + 1] = 0,
            o[r + 2 * n] = 0,
            o[r + 2 * n + 1] = 0,
            o[r + 3 * n] = 0,
            o[r + 3 * n + 1] = 0),
            r += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.uploadTint = function(e, t, i, o, n, r) {
        for (var s = 0; s < i; ++s) {
            var a = e[t + s]
              , l = 0 < a._texture.baseTexture.alphaMode
              , c = a.alpha
              , u = c < 1 && l ? premultiplyTint(a._tintRGB, c) : a._tintRGB + (255 * c << 24);
            o[r] = u,
            o[r + n] = u,
            o[r + 2 * n] = u,
            o[r + 3 * n] = u,
            r += 4 * n
        }
    }
    ,
    ParticleRenderer.prototype.destroy = function() {
        Ur.prototype.destroy.call(this),
        this.shader && (this.shader.destroy(),
        this.shader = null),
        this.tempMatrix = null
    }
    ,
    ParticleRenderer.extension = {
        name: "particle",
        type: ne.ExtensionType.RendererPlugin
    },
    ParticleRenderer);
    function ParticleRenderer(e) {
        var t = Ur.call(this, e) || this;
        return t.shader = null,
        t.properties = null,
        t.tempMatrix = new Je,
        t.properties = [{
            attributeName: "aVertexPosition",
            size: 2,
            uploadFunction: t.uploadVertices,
            offset: 0
        }, {
            attributeName: "aPositionCoord",
            size: 2,
            uploadFunction: t.uploadPosition,
            offset: 0
        }, {
            attributeName: "aRotation",
            size: 1,
            uploadFunction: t.uploadRotation,
            offset: 0
        }, {
            attributeName: "aTextureCoord",
            size: 2,
            uploadFunction: t.uploadUvs,
            offset: 0
        }, {
            attributeName: "aColor",
            size: 1,
            type: ne.TYPES.UNSIGNED_BYTE,
            uploadFunction: t.uploadTint,
            offset: 0
        }],
        t.shader = Ji.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n", "varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}", {}),
        t.state = Qi.for2d(),
        t
    }
    ne.LINE_JOIN = void 0,
    (Ir = ne.LINE_JOIN || (ne.LINE_JOIN = {})).MITER = "miter",
    Ir.BEVEL = "bevel",
    Ir.ROUND = "round",
    ne.LINE_CAP = void 0,
    (Ar = ne.LINE_CAP || (ne.LINE_CAP = {})).BUTT = "butt",
    Ar.ROUND = "round",
    Ar.SQUARE = "square";
    var Pr = {
        adaptive: !0,
        maxLength: 10,
        minSegments: 8,
        maxSegments: 2048,
        epsilon: 1e-4,
        _segmentsCount: function(e, t) {
            if (void 0 === t && (t = 20),
            !this.adaptive || !e || isNaN(e))
                return t;
            var i = Math.ceil(e / this.maxLength);
            return i < this.minSegments ? i = this.minSegments : i > this.maxSegments && (i = this.maxSegments),
            i
        }
    }
      , Or = (FillStyle.prototype.clone = function() {
        var e = new FillStyle;
        return e.color = this.color,
        e.alpha = this.alpha,
        e.texture = this.texture,
        e.matrix = this.matrix,
        e.visible = this.visible,
        e
    }
    ,
    FillStyle.prototype.reset = function() {
        this.color = 16777215,
        this.alpha = 1,
        this.texture = ni.WHITE,
        this.matrix = null,
        this.visible = !1
    }
    ,
    FillStyle.prototype.destroy = function() {
        this.texture = null,
        this.matrix = null
    }
    ,
    FillStyle);
    function FillStyle() {
        this.color = 16777215,
        this.alpha = 1,
        this.texture = ni.WHITE,
        this.matrix = null,
        this.visible = !1,
        this.reset()
    }
    var Dr = function(e, t) {
        return (Dr = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$e(e, t) {
        function __() {
            this.constructor = e
        }
        Dr(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    function fixOrientation(e, t) {
        var i, o;
        void 0 === t && (t = !1);
        var n = e.length;
        if (!(n < 6)) {
            for (var r = 0, s = 0, a = e[n - 2], l = e[n - 1]; s < n; s += 2) {
                var c = e[s]
                  , u = e[s + 1];
                r += (c - a) * (u + l),
                a = c,
                l = u
            }
            if (!t && 0 < r || t && r <= 0) {
                var d = n / 2;
                for (s = d + d % 2; s < n; s += 2) {
                    var h = n - s - 2
                      , p = n - s - 1
                      , _ = s
                      , f = s + 1;
                    i = [e[_], e[h]],
                    e[h] = i[0],
                    e[_] = i[1],
                    o = [e[f], e[p]],
                    e[p] = o[0],
                    e[f] = o[1]
                }
            }
        }
    }
    var Lr = {
        build: function(e) {
            e.points = e.shape.points.slice()
        },
        triangulate: function(e, t) {
            var i = e.points
              , o = e.holes
              , n = t.points
              , r = t.indices;
            if (6 <= i.length) {
                fixOrientation(i, !1);
                for (var s = [], a = 0; a < o.length; a++) {
                    var l = o[a];
                    fixOrientation(l.points, !0),
                    s.push(i.length / 2),
                    i = i.concat(l.points)
                }
                var c = ie(i, s, 2);
                if (!c)
                    return;
                var u = n.length / 2;
                for (a = 0; a < c.length; a += 3)
                    r.push(c[a] + u),
                    r.push(c[a + 1] + u),
                    r.push(c[a + 2] + u);
                for (a = 0; a < i.length; a++)
                    n.push(i[a])
            }
        }
    }
      , Mr = {
        build: function(e) {
            var t, i, o, n, r, s, a = e.points;
            if (e.type === ne.SHAPES.CIRC) {
                var l = e.shape;
                t = l.x,
                i = l.y,
                r = s = l.radius,
                o = n = 0
            } else if (e.type === ne.SHAPES.ELIP) {
                var c = e.shape;
                t = c.x,
                i = c.y,
                r = c.width,
                s = c.height,
                o = n = 0
            } else {
                var u = e.shape
                  , d = u.width / 2
                  , h = u.height / 2;
                t = u.x + d,
                i = u.y + h,
                o = d - (r = s = Math.max(0, Math.min(u.radius, Math.min(d, h)))),
                n = h - s
            }
            if (0 <= r && 0 <= s && 0 <= o && 0 <= n) {
                var p = Math.ceil(2.3 * Math.sqrt(r + s))
                  , _ = 8 * p + (o ? 4 : 0) + (n ? 4 : 0);
                if (0 != (a.length = _)) {
                    if (0 === p)
                        return a.length = 8,
                        a[0] = a[6] = t + o,
                        a[1] = a[3] = i + n,
                        a[2] = a[4] = t - o,
                        void (a[5] = a[7] = i - n);
                    var f = 0
                      , m = 4 * p + (o ? 2 : 0) + 2
                      , T = m
                      , v = _
                      , y = t + (b = o + r)
                      , g = t - b
                      , w = i + (V = n);
                    if (a[f++] = y,
                    a[f++] = w,
                    a[--m] = w,
                    a[--m] = g,
                    n) {
                        var C = i - V;
                        a[T++] = g,
                        a[T++] = C,
                        a[--v] = C,
                        a[--v] = y
                    }
                    for (var S = 1; S < p; S++) {
                        var E = Math.PI / 2 * (S / p);
                        y = t + (b = o + Math.cos(E) * r),
                        g = t - b,
                        w = i + (V = n + Math.sin(E) * s),
                        C = i - V;
                        a[f++] = y,
                        a[f++] = w,
                        a[--m] = w,
                        a[--m] = g,
                        a[T++] = g,
                        a[T++] = C,
                        a[--v] = C,
                        a[--v] = y
                    }
                    var b, V;
                    y = t + (b = o),
                    g = t - b,
                    w = i + (V = n + s),
                    C = i - V;
                    a[f++] = y,
                    a[f++] = w,
                    a[--v] = C,
                    a[--v] = y,
                    o && (a[f++] = g,
                    a[f++] = w,
                    a[--v] = C,
                    a[--v] = g)
                }
            } else
                a.length = 0
        },
        triangulate: function(e, t) {
            var i = e.points
              , o = t.points
              , n = t.indices;
            if (0 !== i.length) {
                var r, s, a = o.length / 2, l = a;
                if (e.type !== ne.SHAPES.RREC) {
                    var c = e.shape;
                    r = c.x,
                    s = c.y
                } else {
                    var u = e.shape;
                    r = u.x + u.width / 2,
                    s = u.y + u.height / 2
                }
                var d = e.matrix;
                o.push(e.matrix ? d.a * r + d.c * s + d.tx : r, e.matrix ? d.b * r + d.d * s + d.ty : s),
                a++,
                o.push(i[0], i[1]);
                for (var h = 2; h < i.length; h += 2)
                    o.push(i[h], i[h + 1]),
                    n.push(a++, l, a);
                n.push(l + 1, l, a)
            }
        }
    }
      , xr = {
        build: function(e) {
            var t = e.shape
              , i = t.x
              , o = t.y
              , n = t.width
              , r = t.height
              , s = e.points;
            s.length = 0,
            s.push(i, o, i + n, o, i + n, o + r, i, o + r)
        },
        triangulate: function(e, t) {
            var i = e.points
              , o = t.points
              , n = o.length / 2;
            o.push(i[0], i[1], i[2], i[3], i[6], i[7], i[4], i[5]),
            t.indices.push(n, 1 + n, 2 + n, 1 + n, 2 + n, 3 + n)
        }
    };
    function getPt(e, t, i) {
        return e + (t - e) * i
    }
    function quadraticBezierCurve(e, t, i, o, n, r, s) {
        void 0 === s && (s = []);
        for (var a = s, l = 0, c = 0, u = 0, d = 0, h = 0, p = 0, _ = 0, f = 0; _ <= 20; ++_)
            l = getPt(e, i, f = _ / 20),
            c = getPt(t, o, f),
            u = getPt(i, n, f),
            d = getPt(o, r, f),
            h = getPt(l, u, f),
            p = getPt(c, d, f),
            0 === _ && a[a.length - 2] === h && a[a.length - 1] === p || a.push(h, p);
        return a
    }
    var Br = {
        build: function(e) {
            if (ts.nextRoundedRectBehavior)
                Mr.build(e);
            else {
                var t = e.shape
                  , i = e.points
                  , o = t.x
                  , n = t.y
                  , r = t.width
                  , s = t.height
                  , a = Math.max(0, Math.min(t.radius, Math.min(r, s) / 2));
                i.length = 0,
                a ? (quadraticBezierCurve(o, n + a, o, n, o + a, n, i),
                quadraticBezierCurve(o + r - a, n, o + r, n, o + r, n + a, i),
                quadraticBezierCurve(o + r, n + s - a, o + r, n + s, o + r - a, n + s, i),
                quadraticBezierCurve(o + a, n + s, o, n + s, o, n + s - a, i)) : i.push(o, n, o + r, n, o + r, n + s, o, n + s)
            }
        },
        triangulate: function(e, t) {
            if (ts.nextRoundedRectBehavior)
                Mr.triangulate(e, t);
            else {
                for (var i = e.points, o = t.points, n = t.indices, r = o.length / 2, s = ie(i, null, 2), a = 0, l = s.length; a < l; a += 3)
                    n.push(s[a] + r),
                    n.push(s[a + 1] + r),
                    n.push(s[a + 2] + r);
                for (a = 0,
                l = i.length; a < l; a++)
                    o.push(i[a], i[++a])
            }
        }
    };
    function square(e, t, i, o, n, r, s, a) {
        var l, c;
        c = s ? (l = o,
        -i) : (l = -o,
        i);
        var u = e - i * n + l
          , d = t - o * n + c
          , h = e + i * r + l
          , p = t + o * r + c;
        return a.push(u, d),
        a.push(h, p),
        2
    }
    function round(e, t, i, o, n, r, s, a) {
        var l = i - e
          , c = o - t
          , u = Math.atan2(l, c)
          , d = Math.atan2(n - e, r - t);
        a && u < d ? u += 2 * Math.PI : !a && d < u && (d += 2 * Math.PI);
        var h = u
          , p = d - u
          , _ = Math.abs(p)
          , f = Math.sqrt(l * l + c * c)
          , m = 1 + (15 * _ * Math.sqrt(f) / Math.PI >> 0)
          , T = p / m;
        if (h += T,
        a) {
            s.push(e, t),
            s.push(i, o);
            for (var v = 1, y = h; v < m; v++,
            y += T)
                s.push(e, t),
                s.push(e + Math.sin(y) * f, t + Math.cos(y) * f);
            s.push(e, t),
            s.push(n, r)
        } else {
            s.push(i, o),
            s.push(e, t);
            for (v = 1,
            y = h; v < m; v++,
            y += T)
                s.push(e + Math.sin(y) * f, t + Math.cos(y) * f),
                s.push(e, t);
            s.push(n, r),
            s.push(e, t)
        }
        return 2 * m
    }
    function buildLine(e, t) {
        e.lineStyle.native ? function buildNativeLine(e, t) {
            var i = 0
              , o = e.shape
              , n = e.points || o.points
              , r = o.type !== ne.SHAPES.POLY || o.closeStroke;
            if (0 !== n.length) {
                var s = t.points
                  , a = t.indices
                  , l = n.length / 2
                  , c = s.length / 2
                  , u = c;
                for (s.push(n[0], n[1]),
                i = 1; i < l; i++)
                    s.push(n[2 * i], n[2 * i + 1]),
                    a.push(u, u + 1),
                    u++;
                r && a.push(u, c)
            }
        }(e, t) : function buildNonNativeLine(e, t) {
            var i = e.shape
              , o = e.points || i.points.slice()
              , n = t.closePointEps;
            if (0 !== o.length) {
                var r = e.lineStyle
                  , s = new je(o[0],o[1])
                  , a = new je(o[o.length - 2],o[o.length - 1])
                  , l = i.type !== ne.SHAPES.POLY || i.closeStroke
                  , c = Math.abs(s.x - a.x) < n && Math.abs(s.y - a.y) < n;
                if (l) {
                    o = o.slice(),
                    c && (o.pop(),
                    o.pop(),
                    a.set(o[o.length - 2], o[o.length - 1]));
                    var u = .5 * (s.x + a.x)
                      , d = .5 * (a.y + s.y);
                    o.unshift(u, d),
                    o.push(u, d)
                }
                var h = t.points
                  , p = o.length / 2
                  , _ = o.length
                  , f = h.length / 2
                  , m = r.width / 2
                  , T = m * m
                  , v = r.miterLimit * r.miterLimit
                  , y = o[0]
                  , g = o[1]
                  , w = o[2]
                  , C = o[3]
                  , S = 0
                  , E = 0
                  , b = -(g - C)
                  , V = y - w
                  , U = 0
                  , I = 0
                  , A = Math.sqrt(b * b + V * V);
                b /= A,
                V /= A,
                b *= m,
                V *= m;
                var R = r.alignment
                  , P = 2 * (1 - R)
                  , O = 2 * R;
                l || (r.cap === ne.LINE_CAP.ROUND ? _ += round(y - b * (P - O) * .5, g - V * (P - O) * .5, y - b * P, g - V * P, y + b * O, g + V * O, h, !0) + 2 : r.cap === ne.LINE_CAP.SQUARE && (_ += square(y, g, b, V, P, O, !0, h))),
                h.push(y - b * P, g - V * P),
                h.push(y + b * O, g + V * O);
                for (var D = 1; D < p - 1; ++D) {
                    y = o[2 * (D - 1)],
                    g = o[2 * (D - 1) + 1],
                    w = o[2 * D],
                    C = o[2 * D + 1],
                    S = o[2 * (D + 1)],
                    E = o[2 * (D + 1) + 1],
                    b = -(g - C),
                    V = y - w,
                    b /= A = Math.sqrt(b * b + V * V),
                    V /= A,
                    b *= m,
                    V *= m,
                    U = -(C - E),
                    I = w - S,
                    U /= A = Math.sqrt(U * U + I * I),
                    I /= A,
                    U *= m,
                    I *= m;
                    var L = w - y
                      , M = g - C
                      , x = w - S
                      , B = E - C
                      , N = L * x + M * B
                      , F = M * x - B * L
                      , k = F < 0;
                    if (Math.abs(F) < .001 * Math.abs(N))
                        h.push(w - b * P, C - V * P),
                        h.push(w + b * O, C + V * O),
                        0 <= N && (r.join === ne.LINE_JOIN.ROUND ? _ += round(w, C, w - b * P, C - V * P, w - U * P, C - I * P, h, !1) + 4 : _ += 2,
                        h.push(w - U * O, C - I * O),
                        h.push(w + U * P, C + I * P));
                    else {
                        var G = (-b + y) * (-V + C) - (-b + w) * (-V + g)
                          , j = (-U + S) * (-I + C) - (-U + w) * (-I + E)
                          , q = (L * j - x * G) / F
                          , z = (B * G - M * j) / F
                          , H = (q - w) * (q - w) + (z - C) * (z - C)
                          , Y = w + (q - w) * P
                          , X = C + (z - C) * P
                          , W = w - (q - w) * O
                          , K = C - (z - C) * O
                          , J = k ? P : O;
                        H <= Math.min(L * L + M * M, x * x + B * B) + J * J * T ? r.join === ne.LINE_JOIN.BEVEL || v < H / T ? (k ? (h.push(Y, X),
                        h.push(w + b * O, C + V * O),
                        h.push(Y, X),
                        h.push(w + U * O, C + I * O)) : (h.push(w - b * P, C - V * P),
                        h.push(W, K),
                        h.push(w - U * P, C - I * P),
                        h.push(W, K)),
                        _ += 2) : r.join === ne.LINE_JOIN.ROUND ? k ? (h.push(Y, X),
                        h.push(w + b * O, C + V * O),
                        _ += round(w, C, w + b * O, C + V * O, w + U * O, C + I * O, h, !0) + 4,
                        h.push(Y, X),
                        h.push(w + U * O, C + I * O)) : (h.push(w - b * P, C - V * P),
                        h.push(W, K),
                        _ += round(w, C, w - b * P, C - V * P, w - U * P, C - I * P, h, !1) + 4,
                        h.push(w - U * P, C - I * P),
                        h.push(W, K)) : (h.push(Y, X),
                        h.push(W, K)) : (h.push(w - b * P, C - V * P),
                        h.push(w + b * O, C + V * O),
                        r.join === ne.LINE_JOIN.ROUND ? _ += k ? round(w, C, w + b * O, C + V * O, w + U * O, C + I * O, h, !0) + 2 : round(w, C, w - b * P, C - V * P, w - U * P, C - I * P, h, !1) + 2 : r.join === ne.LINE_JOIN.MITER && H / T <= v && (k ? (h.push(W, K),
                        h.push(W, K)) : (h.push(Y, X),
                        h.push(Y, X)),
                        _ += 2),
                        h.push(w - U * P, C - I * P),
                        h.push(w + U * O, C + I * O),
                        _ += 2)
                    }
                }
                y = o[2 * (p - 2)],
                g = o[2 * (p - 2) + 1],
                w = o[2 * (p - 1)],
                b = -(g - (C = o[2 * (p - 1) + 1])),
                V = y - w,
                b /= A = Math.sqrt(b * b + V * V),
                V /= A,
                b *= m,
                V *= m,
                h.push(w - b * P, C - V * P),
                h.push(w + b * O, C + V * O),
                l || (r.cap === ne.LINE_CAP.ROUND ? _ += round(w - b * (P - O) * .5, C - V * (P - O) * .5, w - b * P, C - V * P, w + b * O, C + V * O, h, !1) + 2 : r.cap === ne.LINE_CAP.SQUARE && (_ += square(w, C, b, V, P, O, !1, h)));
                var Q = t.indices
                  , $ = Pr.epsilon * Pr.epsilon;
                for (D = f; D < _ + f - 2; ++D)
                    y = h[2 * D],
                    g = h[2 * D + 1],
                    w = h[2 * (D + 1)],
                    C = h[2 * (D + 1) + 1],
                    S = h[2 * (D + 2)],
                    E = h[2 * (D + 2) + 1],
                    Math.abs(y * (C - E) + w * (E - g) + S * (g - C)) < $ || Q.push(D, D + 1, D + 2)
            }
        }(e, t)
    }
    var Nr = (ArcUtils.curveTo = function(e, t, i, o, n, r) {
        var s = r[r.length - 2]
          , a = r[r.length - 1] - t
          , l = s - e
          , c = o - t
          , u = i - e
          , d = Math.abs(a * u - l * c);
        if (d < 1e-8 || 0 === n)
            return r[r.length - 2] === e && r[r.length - 1] === t || r.push(e, t),
            null;
        var h = a * a + l * l
          , p = c * c + u * u
          , _ = a * c + l * u
          , f = n * Math.sqrt(h) / d
          , m = n * Math.sqrt(p) / d
          , T = f * _ / h
          , v = m * _ / p
          , y = f * u + m * l
          , g = f * c + m * a
          , w = l * (m + T)
          , C = a * (m + T)
          , S = u * (f + v)
          , E = c * (f + v);
        return {
            cx: y + e,
            cy: g + t,
            radius: n,
            startAngle: Math.atan2(C - g, w - y),
            endAngle: Math.atan2(E - g, S - y),
            anticlockwise: u * a < l * c
        }
    }
    ,
    ArcUtils.arc = function(e, t, i, o, n, r, s, a, l) {
        for (var c = s - r, u = Pr._segmentsCount(Math.abs(c) * n, 40 * Math.ceil(Math.abs(c) / Fe)), d = c / (2 * u), h = 2 * d, p = Math.cos(d), _ = Math.sin(d), f = u - 1, m = f % 1 / f, T = 0; T <= f; ++T) {
            var v = d + r + h * (T + m * T)
              , y = Math.cos(v)
              , g = -Math.sin(v);
            l.push((p * y + _ * g) * n + i, (p * -g + _ * y) * n + o)
        }
    }
    ,
    ArcUtils);
    function ArcUtils() {}
    var Fr = (BezierUtils.curveLength = function(e, t, i, o, n, r, s, a) {
        for (var l = 0, c = 0, u = 0, d = 0, h = 0, p = 0, _ = 0, f = 0, m = 0, T = 0, v = 0, y = e, g = t, w = 1; w <= 10; ++w)
            T = y - (f = (_ = (p = (h = 1 - (c = w / 10)) * h) * h) * e + 3 * p * c * i + 3 * h * (u = c * c) * n + (d = u * c) * s),
            v = g - (m = _ * t + 3 * p * c * o + 3 * h * u * r + d * a),
            y = f,
            g = m,
            l += Math.sqrt(T * T + v * v);
        return l
    }
    ,
    BezierUtils.curveTo = function(e, t, i, o, n, r, s) {
        var a = s[s.length - 2]
          , l = s[s.length - 1];
        s.length -= 2;
        var c = Pr._segmentsCount(BezierUtils.curveLength(a, l, e, t, i, o, n, r))
          , u = 0
          , d = 0
          , h = 0
          , p = 0
          , _ = 0;
        s.push(a, l);
        for (var f = 1, m = 0; f <= c; ++f)
            h = (d = (u = 1 - (m = f / c)) * u) * u,
            _ = (p = m * m) * m,
            s.push(h * a + 3 * d * m * e + 3 * u * p * i + _ * n, h * l + 3 * d * m * t + 3 * u * p * o + _ * r)
    }
    ,
    BezierUtils);
    function BezierUtils() {}
    var kr = (QuadraticUtils.curveLength = function(e, t, i, o, n, r) {
        var s = e - 2 * i + n
          , a = t - 2 * o + r
          , l = 2 * i - 2 * e
          , c = 2 * o - 2 * t
          , u = 4 * (s * s + a * a)
          , d = 4 * (s * l + a * c)
          , h = l * l + c * c
          , p = 2 * Math.sqrt(u + d + h)
          , _ = Math.sqrt(u)
          , f = 2 * u * _
          , m = 2 * Math.sqrt(h)
          , T = d / _;
        return (f * p + _ * d * (p - m) + (4 * h * u - d * d) * Math.log((2 * _ + T + p) / (T + m))) / (4 * f)
    }
    ,
    QuadraticUtils.curveTo = function(e, t, i, o, n) {
        for (var r = n[n.length - 2], s = n[n.length - 1], a = Pr._segmentsCount(QuadraticUtils.curveLength(r, s, e, t, i, o)), l = 0, c = 0, u = 1; u <= a; ++u) {
            var d = u / a;
            l = r + (e - r) * d,
            c = s + (t - s) * d,
            n.push(l + (e + (i - e) * d - l) * d, c + (t + (o - t) * d - c) * d)
        }
    }
    ,
    QuadraticUtils);
    function QuadraticUtils() {}
    var Gr, jr = (BatchPart.prototype.begin = function(e, t, i) {
        this.reset(),
        this.style = e,
        this.start = t,
        this.attribStart = i
    }
    ,
    BatchPart.prototype.end = function(e, t) {
        this.attribSize = t - this.attribStart,
        this.size = e - this.start
    }
    ,
    BatchPart.prototype.reset = function() {
        this.style = null,
        this.size = 0,
        this.start = 0,
        this.attribStart = 0,
        this.attribSize = 0
    }
    ,
    BatchPart);
    function BatchPart() {
        this.reset()
    }
    var qr = ((Gr = {})[ne.SHAPES.POLY] = Lr,
    Gr[ne.SHAPES.CIRC] = Mr,
    Gr[ne.SHAPES.ELIP] = Mr,
    Gr[ne.SHAPES.RECT] = xr,
    Gr[ne.SHAPES.RREC] = Br,
    Gr)
      , zr = []
      , Hr = []
      , Yr = (GraphicsData.prototype.clone = function() {
        return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)
    }
    ,
    GraphicsData.prototype.destroy = function() {
        this.shape = null,
        this.holes.length = 0,
        this.holes = null,
        this.points.length = 0,
        this.points = null,
        this.lineStyle = null,
        this.fillStyle = null
    }
    ,
    GraphicsData);
    function GraphicsData(e, t, i, o) {
        void 0 === t && (t = null),
        void 0 === i && (i = null),
        void 0 === o && (o = null),
        this.points = [],
        this.holes = [],
        this.shape = e,
        this.lineStyle = i,
        this.fillStyle = t,
        this.matrix = o,
        this.type = e.type
    }
    var Xr, Wr = new je, Kr = (__extends$e(GraphicsGeometry, Xr = Ho),
    Object.defineProperty(GraphicsGeometry.prototype, "bounds", {
        get: function() {
            return this.updateBatches(),
            this.boundsDirty !== this.dirty && (this.boundsDirty = this.dirty,
            this.calculateBounds()),
            this._bounds
        },
        enumerable: !1,
        configurable: !0
    }),
    GraphicsGeometry.prototype.invalidate = function() {
        this.boundsDirty = -1,
        this.dirty++,
        this.batchDirty++,
        this.shapeIndex = 0,
        this.points.length = 0,
        this.colors.length = 0,
        this.uvs.length = 0,
        this.indices.length = 0;
        for (var e = this.textureIds.length = 0; e < this.drawCalls.length; e++)
            this.drawCalls[e].texArray.clear(),
            Hr.push(this.drawCalls[e]);
        for (e = this.drawCalls.length = 0; e < this.batches.length; e++) {
            var t = this.batches[e];
            t.reset(),
            zr.push(t)
        }
        this.batches.length = 0
    }
    ,
    GraphicsGeometry.prototype.clear = function() {
        return 0 < this.graphicsData.length && (this.invalidate(),
        this.clearDirty++,
        this.graphicsData.length = 0),
        this
    }
    ,
    GraphicsGeometry.prototype.drawShape = function(e, t, i, o) {
        void 0 === t && (t = null),
        void 0 === i && (i = null),
        void 0 === o && (o = null);
        var n = new Yr(e,t,i,o);
        return this.graphicsData.push(n),
        this.dirty++,
        this
    }
    ,
    GraphicsGeometry.prototype.drawHole = function(e, t) {
        if (void 0 === t && (t = null),
        !this.graphicsData.length)
            return null;
        var i = new Yr(e,null,null,t)
          , o = this.graphicsData[this.graphicsData.length - 1];
        return i.lineStyle = o.lineStyle,
        o.holes.push(i),
        this.dirty++,
        this
    }
    ,
    GraphicsGeometry.prototype.destroy = function() {
        Xr.prototype.destroy.call(this);
        for (var e = 0; e < this.graphicsData.length; ++e)
            this.graphicsData[e].destroy();
        this.points.length = 0,
        this.points = null,
        this.colors.length = 0,
        this.colors = null,
        this.uvs.length = 0,
        this.uvs = null,
        this.indices.length = 0,
        this.indices = null,
        this.indexBuffer.destroy(),
        this.indexBuffer = null,
        this.graphicsData.length = 0,
        this.graphicsData = null,
        this.drawCalls.length = 0,
        this.drawCalls = null,
        this.batches.length = 0,
        this.batches = null,
        this._bounds = null
    }
    ,
    GraphicsGeometry.prototype.containsPoint = function(e) {
        for (var t = this.graphicsData, i = 0; i < t.length; ++i) {
            var o = t[i];
            if (o.fillStyle.visible && o.shape && (o.matrix ? o.matrix.applyInverse(e, Wr) : Wr.copyFrom(e),
            o.shape.contains(Wr.x, Wr.y))) {
                var n = !1;
                if (o.holes)
                    for (var r = 0; r < o.holes.length; r++)
                        if (o.holes[r].shape.contains(Wr.x, Wr.y)) {
                            n = !0;
                            break
                        }
                if (!n)
                    return !0
            }
        }
        return !1
    }
    ,
    GraphicsGeometry.prototype.updateBatches = function() {
        if (this.graphicsData.length) {
            if (this.validateBatching()) {
                this.cacheDirty = this.dirty;
                var e = this.uvs
                  , t = this.graphicsData
                  , i = null
                  , o = null;
                0 < this.batches.length && (o = (i = this.batches[this.batches.length - 1]).style);
                for (var n = this.shapeIndex; n < t.length; n++) {
                    this.shapeIndex++;
                    var r = t[n]
                      , s = r.fillStyle
                      , a = r.lineStyle;
                    qr[r.type].build(r),
                    r.matrix && this.transformPoints(r.points, r.matrix),
                    (s.visible || a.visible) && this.processHoles(r.holes);
                    for (var l = 0; l < 2; l++) {
                        var c = 0 === l ? s : a;
                        if (c.visible) {
                            var u = c.texture.baseTexture
                              , d = this.indices.length
                              , h = this.points.length / 2;
                            u.wrapMode = ne.WRAP_MODES.REPEAT,
                            0 === l ? this.processFill(r) : this.processLine(r);
                            var p = this.points.length / 2 - h;
                            0 != p && (i && !this._compareStyles(o, c) && (i.end(d, h),
                            i = null),
                            i || ((i = zr.pop() || new jr).begin(c, d, h),
                            this.batches.push(i),
                            o = c),
                            this.addUvs(this.points, e, c.texture, h, p, c.matrix))
                        }
                    }
                }
                var _ = this.indices.length
                  , f = this.points.length / 2;
                if (i && i.end(_, f),
                0 !== this.batches.length) {
                    var m = 65535 < f;
                    this.indicesUint16 && this.indices.length === this.indicesUint16.length && m == 2 < this.indicesUint16.BYTES_PER_ELEMENT ? this.indicesUint16.set(this.indices) : this.indicesUint16 = m ? new Uint32Array(this.indices) : new Uint16Array(this.indices),
                    this.batchable = this.isBatchable(),
                    this.batchable ? this.packBatches() : this.buildDrawCalls()
                } else
                    this.batchable = !0
            }
        } else
            this.batchable = !0
    }
    ,
    GraphicsGeometry.prototype._compareStyles = function(e, t) {
        return !(!e || !t) && e.texture.baseTexture === t.texture.baseTexture && e.color + e.alpha === t.color + t.alpha && !!e.native == !!t.native
    }
    ,
    GraphicsGeometry.prototype.validateBatching = function() {
        if (this.dirty === this.cacheDirty || !this.graphicsData.length)
            return !1;
        for (var e = 0, t = this.graphicsData.length; e < t; e++) {
            var i = this.graphicsData[e]
              , o = i.fillStyle
              , n = i.lineStyle;
            if (o && !o.texture.baseTexture.valid)
                return !1;
            if (n && !n.texture.baseTexture.valid)
                return !1
        }
        return !0
    }
    ,
    GraphicsGeometry.prototype.packBatches = function() {
        this.batchDirty++,
        this.uvsFloat32 = new Float32Array(this.uvs);
        for (var e = this.batches, t = 0, i = e.length; t < i; t++)
            for (var o = e[t], n = 0; n < o.size; n++) {
                var r = o.start + n;
                this.indicesUint16[r] = this.indicesUint16[r] - o.attribStart
            }
    }
    ,
    GraphicsGeometry.prototype.isBatchable = function() {
        if (131070 < this.points.length)
            return !1;
        for (var e = this.batches, t = 0; t < e.length; t++)
            if (e[t].style.native)
                return !1;
        return this.points.length < 2 * GraphicsGeometry.BATCHABLE_SIZE
    }
    ,
    GraphicsGeometry.prototype.buildDrawCalls = function() {
        for (var e = ++Rt._globalBatch, t = 0; t < this.drawCalls.length; t++)
            this.drawCalls[t].texArray.clear(),
            Hr.push(this.drawCalls[t]);
        this.drawCalls.length = 0;
        var i = this.colors
          , o = this.textureIds
          , n = Hr.pop();
        n || ((n = new No).texArray = new Fo),
        n.texArray.count = 0,
        n.start = 0,
        n.size = 0,
        n.type = ne.DRAW_MODES.TRIANGLES;
        var r = 0
          , s = null
          , a = 0
          , l = !1
          , c = ne.DRAW_MODES.TRIANGLES
          , u = 0;
        for (this.drawCalls.push(n),
        t = 0; t < this.batches.length; t++) {
            var d = this.batches[t]
              , h = d.style
              , p = h.texture.baseTexture;
            l !== !!h.native && (c = (l = !!h.native) ? ne.DRAW_MODES.LINES : ne.DRAW_MODES.TRIANGLES,
            s = null,
            r = 8,
            e++),
            s !== p && (s = p)._batchEnabled !== e && (8 === r && (e++,
            (r = 0) < n.size && ((n = Hr.pop()) || ((n = new No).texArray = new Fo),
            this.drawCalls.push(n)),
            n.start = u,
            n.size = 0,
            n.texArray.count = 0,
            n.type = c),
            p.touched = 1,
            p._batchEnabled = e,
            p._batchLocation = r,
            p.wrapMode = ne.WRAP_MODES.REPEAT,
            n.texArray.elements[n.texArray.count++] = p,
            r++),
            n.size += d.size,
            u += d.size,
            a = p._batchLocation,
            this.addColors(i, h.color, h.alpha, d.attribSize, d.attribStart),
            this.addTextureIds(o, a, d.attribSize, d.attribStart)
        }
        Rt._globalBatch = e,
        this.packAttributes()
    }
    ,
    GraphicsGeometry.prototype.packAttributes = function() {
        for (var e = this.points, t = this.uvs, i = this.colors, o = this.textureIds, n = new ArrayBuffer(3 * e.length * 4), r = new Float32Array(n), s = new Uint32Array(n), a = 0, l = 0; l < e.length / 2; l++)
            r[a++] = e[2 * l],
            r[a++] = e[2 * l + 1],
            r[a++] = t[2 * l],
            r[a++] = t[2 * l + 1],
            s[a++] = i[l],
            r[a++] = o[l];
        this._buffer.update(n),
        this._indexBuffer.update(this.indicesUint16)
    }
    ,
    GraphicsGeometry.prototype.processFill = function(e) {
        e.holes.length ? Lr.triangulate(e, this) : qr[e.type].triangulate(e, this)
    }
    ,
    GraphicsGeometry.prototype.processLine = function(e) {
        buildLine(e, this);
        for (var t = 0; t < e.holes.length; t++)
            buildLine(e.holes[t], this)
    }
    ,
    GraphicsGeometry.prototype.processHoles = function(e) {
        for (var t = 0; t < e.length; t++) {
            var i = e[t];
            qr[i.type].build(i),
            i.matrix && this.transformPoints(i.points, i.matrix)
        }
    }
    ,
    GraphicsGeometry.prototype.calculateBounds = function() {
        var e = this._bounds;
        e.clear(),
        e.addVertexData(this.points, 0, this.points.length),
        e.pad(this.boundsPadding, this.boundsPadding)
    }
    ,
    GraphicsGeometry.prototype.transformPoints = function(e, t) {
        for (var i = 0; i < e.length / 2; i++) {
            var o = e[2 * i]
              , n = e[2 * i + 1];
            e[2 * i] = t.a * o + t.c * n + t.tx,
            e[2 * i + 1] = t.b * o + t.d * n + t.ty
        }
    }
    ,
    GraphicsGeometry.prototype.addColors = function(e, t, i, o, n) {
        void 0 === n && (n = 0);
        var r = premultiplyTint((t >> 16) + (65280 & t) + ((255 & t) << 16), i);
        e.length = Math.max(e.length, n + o);
        for (var s = 0; s < o; s++)
            e[n + s] = r
    }
    ,
    GraphicsGeometry.prototype.addTextureIds = function(e, t, i, o) {
        void 0 === o && (o = 0),
        e.length = Math.max(e.length, o + i);
        for (var n = 0; n < i; n++)
            e[o + n] = t
    }
    ,
    GraphicsGeometry.prototype.addUvs = function(e, t, i, o, n, r) {
        void 0 === r && (r = null);
        for (var s = 0, a = t.length, l = i.frame; s < n; ) {
            var c = e[2 * (o + s)]
              , u = e[2 * (o + s) + 1];
            if (r) {
                var d = r.a * c + r.c * u + r.tx;
                u = r.b * c + r.d * u + r.ty,
                c = d
            }
            s++,
            t.push(c / l.width, u / l.height)
        }
        var h = i.baseTexture;
        (l.width < h.width || l.height < h.height) && this.adjustUvs(t, i, a, n)
    }
    ,
    GraphicsGeometry.prototype.adjustUvs = function(e, t, i, o) {
        for (var n = t.baseTexture, r = i + 2 * o, s = t.frame, a = s.width / n.width, l = s.height / n.height, c = s.x / s.width, u = s.y / s.height, d = Math.floor(e[i] + 1e-6), h = Math.floor(e[i + 1] + 1e-6), p = i + 2; p < r; p += 2)
            d = Math.min(d, Math.floor(e[p] + 1e-6)),
            h = Math.min(h, Math.floor(e[p + 1] + 1e-6));
        for (c -= d,
        u -= h,
        p = i; p < r; p += 2)
            e[p] = (e[p] + c) * a,
            e[p + 1] = (e[p + 1] + u) * l
    }
    ,
    GraphicsGeometry.BATCHABLE_SIZE = 100,
    GraphicsGeometry);
    function GraphicsGeometry() {
        var e = Xr.call(this) || this;
        return e.closePointEps = 1e-4,
        e.boundsPadding = 0,
        e.uvsFloat32 = null,
        e.indicesUint16 = null,
        e.batchable = !1,
        e.points = [],
        e.colors = [],
        e.uvs = [],
        e.indices = [],
        e.textureIds = [],
        e.graphicsData = [],
        e.drawCalls = [],
        e.batchDirty = -1,
        e.batches = [],
        e.dirty = 0,
        e.cacheDirty = -1,
        e.clearDirty = 0,
        e.shapeIndex = 0,
        e._bounds = new st,
        e.boundsDirty = -1,
        e
    }
    var Jr, Qr = (__extends$e(LineStyle, Jr = Or),
    LineStyle.prototype.clone = function() {
        var e = new LineStyle;
        return e.color = this.color,
        e.alpha = this.alpha,
        e.texture = this.texture,
        e.matrix = this.matrix,
        e.visible = this.visible,
        e.width = this.width,
        e.alignment = this.alignment,
        e.native = this.native,
        e.cap = this.cap,
        e.join = this.join,
        e.miterLimit = this.miterLimit,
        e
    }
    ,
    LineStyle.prototype.reset = function() {
        Jr.prototype.reset.call(this),
        this.color = 0,
        this.alignment = .5,
        this.width = 0,
        this.native = !1
    }
    ,
    LineStyle);
    function LineStyle() {
        var e = null !== Jr && Jr.apply(this, arguments) || this;
        return e.width = 0,
        e.alignment = .5,
        e.native = !1,
        e.cap = ne.LINE_CAP.BUTT,
        e.join = ne.LINE_JOIN.MITER,
        e.miterLimit = 10,
        e
    }
    var $r, Zr = new Float32Array(3), es = {}, ts = (__extends$e(Graphics, $r = pt),
    Object.defineProperty(Graphics.prototype, "geometry", {
        get: function() {
            return this._geometry
        },
        enumerable: !1,
        configurable: !0
    }),
    Graphics.prototype.clone = function() {
        return this.finishPoly(),
        new Graphics(this._geometry)
    }
    ,
    Object.defineProperty(Graphics.prototype, "blendMode", {
        get: function() {
            return this.state.blendMode
        },
        set: function(e) {
            this.state.blendMode = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Graphics.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(e) {
            this._tint = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Graphics.prototype, "fill", {
        get: function() {
            return this._fillStyle
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Graphics.prototype, "line", {
        get: function() {
            return this._lineStyle
        },
        enumerable: !1,
        configurable: !0
    }),
    Graphics.prototype.lineStyle = function(e, t, i, o, n) {
        return void 0 === e && (e = null),
        void 0 === t && (t = 0),
        void 0 === i && (i = 1),
        void 0 === o && (o = .5),
        void 0 === n && (n = !1),
        "number" == typeof e && (e = {
            width: e,
            color: t,
            alpha: i,
            alignment: o,
            native: n
        }),
        this.lineTextureStyle(e)
    }
    ,
    Graphics.prototype.lineTextureStyle = function(e) {
        e = Object.assign({
            width: 0,
            texture: ni.WHITE,
            color: e && e.texture ? 16777215 : 0,
            alpha: 1,
            matrix: null,
            alignment: .5,
            native: !1,
            cap: ne.LINE_CAP.BUTT,
            join: ne.LINE_JOIN.MITER,
            miterLimit: 10
        }, e),
        this.currentPath && this.startPoly();
        var t = 0 < e.width && 0 < e.alpha;
        return t ? (e.matrix && (e.matrix = e.matrix.clone(),
        e.matrix.invert()),
        Object.assign(this._lineStyle, {
            visible: t
        }, e)) : this._lineStyle.reset(),
        this
    }
    ,
    Graphics.prototype.startPoly = function() {
        if (this.currentPath) {
            var e = this.currentPath.points
              , t = this.currentPath.points.length;
            2 < t && (this.drawShape(this.currentPath),
            this.currentPath = new Xe,
            this.currentPath.closeStroke = !1,
            this.currentPath.points.push(e[t - 2], e[t - 1]))
        } else
            this.currentPath = new Xe,
            this.currentPath.closeStroke = !1
    }
    ,
    Graphics.prototype.finishPoly = function() {
        this.currentPath && (2 < this.currentPath.points.length ? (this.drawShape(this.currentPath),
        this.currentPath = null) : this.currentPath.points.length = 0)
    }
    ,
    Graphics.prototype.moveTo = function(e, t) {
        return this.startPoly(),
        this.currentPath.points[0] = e,
        this.currentPath.points[1] = t,
        this
    }
    ,
    Graphics.prototype.lineTo = function(e, t) {
        this.currentPath || this.moveTo(0, 0);
        var i = this.currentPath.points
          , o = i[i.length - 2]
          , n = i[i.length - 1];
        return o === e && n === t || i.push(e, t),
        this
    }
    ,
    Graphics.prototype._initCurve = function(e, t) {
        void 0 === e && (e = 0),
        void 0 === t && (t = 0),
        this.currentPath ? 0 === this.currentPath.points.length && (this.currentPath.points = [e, t]) : this.moveTo(e, t)
    }
    ,
    Graphics.prototype.quadraticCurveTo = function(e, t, i, o) {
        this._initCurve();
        var n = this.currentPath.points;
        return 0 === n.length && this.moveTo(0, 0),
        kr.curveTo(e, t, i, o, n),
        this
    }
    ,
    Graphics.prototype.bezierCurveTo = function(e, t, i, o, n, r) {
        return this._initCurve(),
        Fr.curveTo(e, t, i, o, n, r, this.currentPath.points),
        this
    }
    ,
    Graphics.prototype.arcTo = function(e, t, i, o, n) {
        this._initCurve(e, t);
        var r = this.currentPath.points
          , s = Nr.curveTo(e, t, i, o, n, r);
        if (s) {
            var a = s.cx
              , l = s.cy
              , c = s.radius
              , u = s.startAngle
              , d = s.endAngle
              , h = s.anticlockwise;
            this.arc(a, l, c, u, d, h)
        }
        return this
    }
    ,
    Graphics.prototype.arc = function(e, t, i, o, n, r) {
        if (void 0 === r && (r = !1),
        o === n)
            return this;
        if (!r && n <= o ? n += Fe : r && o <= n && (o += Fe),
        0 == n - o)
            return this;
        var s = e + Math.cos(o) * i
          , a = t + Math.sin(o) * i
          , l = this._geometry.closePointEps
          , c = this.currentPath ? this.currentPath.points : null;
        if (c) {
            var u = Math.abs(c[c.length - 2] - s)
              , d = Math.abs(c[c.length - 1] - a);
            u < l && d < l || c.push(s, a)
        } else
            this.moveTo(s, a),
            c = this.currentPath.points;
        return Nr.arc(s, a, e, t, i, o, n, r, c),
        this
    }
    ,
    Graphics.prototype.beginFill = function(e, t) {
        return void 0 === e && (e = 0),
        void 0 === t && (t = 1),
        this.beginTextureFill({
            texture: ni.WHITE,
            color: e,
            alpha: t
        })
    }
    ,
    Graphics.prototype.beginTextureFill = function(e) {
        e = Object.assign({
            texture: ni.WHITE,
            color: 16777215,
            alpha: 1,
            matrix: null
        }, e),
        this.currentPath && this.startPoly();
        var t = 0 < e.alpha;
        return t ? (e.matrix && (e.matrix = e.matrix.clone(),
        e.matrix.invert()),
        Object.assign(this._fillStyle, {
            visible: t
        }, e)) : this._fillStyle.reset(),
        this
    }
    ,
    Graphics.prototype.endFill = function() {
        return this.finishPoly(),
        this._fillStyle.reset(),
        this
    }
    ,
    Graphics.prototype.drawRect = function(e, t, i, o) {
        return this.drawShape(new ze(e,t,i,o))
    }
    ,
    Graphics.prototype.drawRoundedRect = function(e, t, i, o, n) {
        return this.drawShape(new We(e,t,i,o,n))
    }
    ,
    Graphics.prototype.drawCircle = function(e, t, i) {
        return this.drawShape(new He(e,t,i))
    }
    ,
    Graphics.prototype.drawEllipse = function(e, t, i, o) {
        return this.drawShape(new Ye(e,t,i,o))
    }
    ,
    Graphics.prototype.drawPolygon = function() {
        for (var e, t = arguments, i = [], o = 0; o < arguments.length; o++)
            i[o] = t[o];
        var n = !0
          , r = i[0];
        e = r.points ? (n = r.closeStroke,
        r.points) : Array.isArray(i[0]) ? i[0] : i;
        var s = new Xe(e);
        return s.closeStroke = n,
        this.drawShape(s),
        this
    }
    ,
    Graphics.prototype.drawShape = function(e) {
        return this._holeMode ? this._geometry.drawHole(e, this._matrix) : this._geometry.drawShape(e, this._fillStyle.clone(), this._lineStyle.clone(), this._matrix),
        this
    }
    ,
    Graphics.prototype.clear = function() {
        return this._geometry.clear(),
        this._lineStyle.reset(),
        this._fillStyle.reset(),
        this._boundsID++,
        this._matrix = null,
        this._holeMode = !1,
        this.currentPath = null,
        this
    }
    ,
    Graphics.prototype.isFastRect = function() {
        var e = this._geometry.graphicsData;
        return !(1 !== e.length || e[0].shape.type !== ne.SHAPES.RECT || e[0].matrix || e[0].holes.length || e[0].lineStyle.visible && e[0].lineStyle.width)
    }
    ,
    Graphics.prototype._render = function(e) {
        this.finishPoly();
        var t = this._geometry;
        t.updateBatches(),
        t.batchable ? (this.batchDirty !== t.batchDirty && this._populateBatches(),
        this._renderBatched(e)) : (e.batch.flush(),
        this._renderDirect(e))
    }
    ,
    Graphics.prototype._populateBatches = function() {
        var e = this._geometry
          , t = this.blendMode
          , i = e.batches.length;
        this.batchTint = -1,
        this._transformID = -1,
        this.batchDirty = e.batchDirty,
        this.batches.length = i,
        this.vertexData = new Float32Array(e.points);
        for (var o = 0; o < i; o++) {
            var n = e.batches[o]
              , r = n.style.color
              , s = new Float32Array(this.vertexData.buffer,4 * n.attribStart * 2,2 * n.attribSize)
              , a = new Float32Array(e.uvsFloat32.buffer,4 * n.attribStart * 2,2 * n.attribSize)
              , l = {
                vertexData: s,
                blendMode: t,
                indices: new Uint16Array(e.indicesUint16.buffer,2 * n.start,n.size),
                uvs: a,
                _batchRGB: hex2rgb(r),
                _tintRGB: r,
                _texture: n.style.texture,
                alpha: n.style.alpha,
                worldAlpha: 1
            };
            this.batches[o] = l
        }
    }
    ,
    Graphics.prototype._renderBatched = function(e) {
        if (this.batches.length) {
            e.batch.setObjectRenderer(e.plugins[this.pluginName]),
            this.calculateVertices(),
            this.calculateTints();
            for (var t = 0, i = this.batches.length; t < i; t++) {
                var o = this.batches[t];
                o.worldAlpha = this.worldAlpha * o.alpha,
                e.plugins[this.pluginName].render(o)
            }
        }
    }
    ,
    Graphics.prototype._renderDirect = function(e) {
        var t = this._resolveDirectShader(e)
          , i = this._geometry
          , o = this.tint
          , n = this.worldAlpha
          , r = t.uniforms
          , s = i.drawCalls;
        r.translationMatrix = this.transform.worldTransform,
        r.tint[0] = (o >> 16 & 255) / 255 * n,
        r.tint[1] = (o >> 8 & 255) / 255 * n,
        r.tint[2] = (255 & o) / 255 * n,
        r.tint[3] = n,
        e.shader.bind(t),
        e.geometry.bind(i, t),
        e.state.set(this.state);
        for (var a = 0, l = s.length; a < l; a++)
            this._renderDrawCallDirect(e, i.drawCalls[a])
    }
    ,
    Graphics.prototype._renderDrawCallDirect = function(e, t) {
        for (var i = t.texArray, o = t.type, n = t.size, r = t.start, s = i.count, a = 0; a < s; a++)
            e.texture.bind(i.elements[a], a);
        e.geometry.draw(o, n, r)
    }
    ,
    Graphics.prototype._resolveDirectShader = function(e) {
        var t = this.shader
          , i = this.pluginName;
        if (!t) {
            if (!es[i]) {
                for (var o = e.plugins[i].MAX_TEXTURES, n = new Int32Array(o), r = 0; r < o; r++)
                    n[r] = r;
                var s = {
                    tint: new Float32Array([1, 1, 1, 1]),
                    translationMatrix: new Je,
                    default: wi.from({
                        uSamplers: n
                    }, !0)
                }
                  , a = e.plugins[i]._shader.program;
                es[i] = new Ji(a,s)
            }
            t = es[i]
        }
        return t
    }
    ,
    Graphics.prototype._calculateBounds = function() {
        this.finishPoly();
        var e = this._geometry;
        if (e.graphicsData.length) {
            var t = e.bounds
              , i = t.minX
              , o = t.minY
              , n = t.maxX
              , r = t.maxY;
            this._bounds.addFrame(this.transform, i, o, n, r)
        }
    }
    ,
    Graphics.prototype.containsPoint = function(e) {
        return this.worldTransform.applyInverse(e, Graphics._TEMP_POINT),
        this._geometry.containsPoint(Graphics._TEMP_POINT)
    }
    ,
    Graphics.prototype.calculateTints = function() {
        if (this.batchTint !== this.tint) {
            this.batchTint = this.tint;
            for (var e = hex2rgb(this.tint, Zr), t = 0; t < this.batches.length; t++) {
                var i = this.batches[t]
                  , o = i._batchRGB
                  , n = (e[0] * o[0] * 255 << 16) + (e[1] * o[1] * 255 << 8) + (0 | e[2] * o[2] * 255);
                i._tintRGB = (n >> 16) + (65280 & n) + ((255 & n) << 16)
            }
        }
    }
    ,
    Graphics.prototype.calculateVertices = function() {
        var e = this.transform._worldID;
        if (this._transformID !== e) {
            this._transformID = e;
            for (var t = this.transform.worldTransform, i = t.a, o = t.b, n = t.c, r = t.d, s = t.tx, a = t.ty, l = this._geometry.points, c = this.vertexData, u = 0, d = 0; d < l.length; d += 2) {
                var h = l[d]
                  , p = l[d + 1];
                c[u++] = i * h + n * p + s,
                c[u++] = r * p + o * h + a
            }
        }
    }
    ,
    Graphics.prototype.closePath = function() {
        var e = this.currentPath;
        return e && (e.closeStroke = !0,
        this.finishPoly()),
        this
    }
    ,
    Graphics.prototype.setMatrix = function(e) {
        return this._matrix = e,
        this
    }
    ,
    Graphics.prototype.beginHole = function() {
        return this.finishPoly(),
        this._holeMode = !0,
        this
    }
    ,
    Graphics.prototype.endHole = function() {
        return this.finishPoly(),
        this._holeMode = !1,
        this
    }
    ,
    Graphics.prototype.destroy = function(e) {
        this._geometry.refCount--,
        0 === this._geometry.refCount && this._geometry.dispose(),
        this._matrix = null,
        this.currentPath = null,
        this._lineStyle.destroy(),
        this._lineStyle = null,
        this._fillStyle.destroy(),
        this._fillStyle = null,
        this._geometry = null,
        this.shader = null,
        this.vertexData = null,
        this.batches.length = 0,
        this.batches = null,
        $r.prototype.destroy.call(this, e)
    }
    ,
    Graphics.nextRoundedRectBehavior = !1,
    Graphics._TEMP_POINT = new je,
    Graphics);
    function Graphics(e) {
        void 0 === e && (e = null);
        var t = $r.call(this) || this;
        return t.shader = null,
        t.pluginName = "batch",
        t.currentPath = null,
        t.batches = [],
        t.batchTint = -1,
        t.batchDirty = -1,
        t.vertexData = null,
        t._fillStyle = new Or,
        t._lineStyle = new Qr,
        t._matrix = null,
        t._holeMode = !1,
        t.state = Qi.for2d(),
        t._geometry = e || new Kr,
        t._geometry.refCount++,
        t._transformID = -1,
        t.tint = 16777215,
        t.blendMode = ne.BLEND_MODES.NORMAL,
        t
    }
    var is = {
        buildPoly: Lr,
        buildCircle: Mr,
        buildRectangle: xr,
        buildRoundedRectangle: Br,
        buildLine: buildLine,
        ArcUtils: Nr,
        BezierUtils: Fr,
        QuadraticUtils: kr,
        BatchPart: jr,
        FILL_COMMANDS: qr,
        BATCH_POOL: zr,
        DRAW_CALL_POOL: Hr
    }
      , os = function(e, t) {
        return (os = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var ns, rs = new je, ss = new Uint16Array([0, 1, 2, 0, 2, 3]), as = (function __extends$d(e, t) {
        function __() {
            this.constructor = e
        }
        os(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(Sprite, ns = pt),
    Sprite.prototype._onTextureUpdate = function() {
        this._textureID = -1,
        this._textureTrimmedID = -1,
        this._cachedTint = 16777215,
        this._width && (this.scale.x = sign(this.scale.x) * this._width / this._texture.orig.width),
        this._height && (this.scale.y = sign(this.scale.y) * this._height / this._texture.orig.height)
    }
    ,
    Sprite.prototype._onAnchorUpdate = function() {
        this._transformID = -1,
        this._transformTrimmedID = -1
    }
    ,
    Sprite.prototype.calculateVertices = function() {
        var e = this._texture;
        if (this._transformID !== this.transform._worldID || this._textureID !== e._updateID) {
            this._textureID !== e._updateID && (this.uvs = this._texture._uvs.uvsFloat32),
            this._transformID = this.transform._worldID,
            this._textureID = e._updateID;
            var t = this.transform.worldTransform
              , i = t.a
              , o = t.b
              , n = t.c
              , r = t.d
              , s = t.tx
              , a = t.ty
              , l = this.vertexData
              , c = e.trim
              , u = e.orig
              , d = this._anchor
              , h = 0
              , p = 0
              , _ = 0
              , f = 0;
            if (_ = c ? (h = (p = c.x - d._x * u.width) + c.width,
            (f = c.y - d._y * u.height) + c.height) : (h = (p = -d._x * u.width) + u.width,
            (f = -d._y * u.height) + u.height),
            l[0] = i * p + n * f + s,
            l[1] = r * f + o * p + a,
            l[2] = i * h + n * f + s,
            l[3] = r * f + o * h + a,
            l[4] = i * h + n * _ + s,
            l[5] = r * _ + o * h + a,
            l[6] = i * p + n * _ + s,
            l[7] = r * _ + o * p + a,
            this._roundPixels)
                for (var m = Z.RESOLUTION, T = 0; T < l.length; ++T)
                    l[T] = Math.round((l[T] * m | 0) / m)
        }
    }
    ,
    Sprite.prototype.calculateTrimmedVertices = function() {
        if (this.vertexTrimmedData) {
            if (this._transformTrimmedID === this.transform._worldID && this._textureTrimmedID === this._texture._updateID)
                return
        } else
            this.vertexTrimmedData = new Float32Array(8);
        this._transformTrimmedID = this.transform._worldID,
        this._textureTrimmedID = this._texture._updateID;
        var e = this._texture
          , t = this.vertexTrimmedData
          , i = e.orig
          , o = this._anchor
          , n = this.transform.worldTransform
          , r = n.a
          , s = n.b
          , a = n.c
          , l = n.d
          , c = n.tx
          , u = n.ty
          , d = -o._x * i.width
          , h = d + i.width
          , p = -o._y * i.height
          , _ = p + i.height;
        t[0] = r * d + a * p + c,
        t[1] = l * p + s * d + u,
        t[2] = r * h + a * p + c,
        t[3] = l * p + s * h + u,
        t[4] = r * h + a * _ + c,
        t[5] = l * _ + s * h + u,
        t[6] = r * d + a * _ + c,
        t[7] = l * _ + s * d + u
    }
    ,
    Sprite.prototype._render = function(e) {
        this.calculateVertices(),
        e.batch.setObjectRenderer(e.plugins[this.pluginName]),
        e.plugins[this.pluginName].render(this)
    }
    ,
    Sprite.prototype._calculateBounds = function() {
        var e = this._texture.trim
          , t = this._texture.orig;
        !e || e.width === t.width && e.height === t.height ? (this.calculateVertices(),
        this._bounds.addQuad(this.vertexData)) : (this.calculateTrimmedVertices(),
        this._bounds.addQuad(this.vertexTrimmedData))
    }
    ,
    Sprite.prototype.getLocalBounds = function(e) {
        return 0 === this.children.length ? (this._localBounds || (this._localBounds = new st),
        this._localBounds.minX = this._texture.orig.width * -this._anchor._x,
        this._localBounds.minY = this._texture.orig.height * -this._anchor._y,
        this._localBounds.maxX = this._texture.orig.width * (1 - this._anchor._x),
        this._localBounds.maxY = this._texture.orig.height * (1 - this._anchor._y),
        e || (this._localBoundsRect || (this._localBoundsRect = new ze),
        e = this._localBoundsRect),
        this._localBounds.getRectangle(e)) : ns.prototype.getLocalBounds.call(this, e)
    }
    ,
    Sprite.prototype.containsPoint = function(e) {
        this.worldTransform.applyInverse(e, rs);
        var t = this._texture.orig.width
          , i = this._texture.orig.height
          , o = -t * this.anchor.x
          , n = 0;
        return rs.x >= o && rs.x < o + t && (n = -i * this.anchor.y,
        rs.y >= n && rs.y < n + i)
    }
    ,
    Sprite.prototype.destroy = function(e) {
        if (ns.prototype.destroy.call(this, e),
        this._texture.off("update", this._onTextureUpdate, this),
        this._anchor = null,
        "boolean" == typeof e ? e : e && e.texture) {
            var t = "boolean" == typeof e ? e : e && e.baseTexture;
            this._texture.destroy(!!t)
        }
        this._texture = null
    }
    ,
    Sprite.from = function(e, t) {
        return new Sprite(e instanceof ni ? e : ni.from(e, t))
    }
    ,
    Object.defineProperty(Sprite.prototype, "roundPixels", {
        get: function() {
            return this._roundPixels
        },
        set: function(e) {
            this._roundPixels !== e && (this._transformID = -1),
            this._roundPixels = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "width", {
        get: function() {
            return Math.abs(this.scale.x) * this._texture.orig.width
        },
        set: function(e) {
            var t = sign(this.scale.x) || 1;
            this.scale.x = t * e / this._texture.orig.width,
            this._width = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "height", {
        get: function() {
            return Math.abs(this.scale.y) * this._texture.orig.height
        },
        set: function(e) {
            var t = sign(this.scale.y) || 1;
            this.scale.y = t * e / this._texture.orig.height,
            this._height = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "anchor", {
        get: function() {
            return this._anchor
        },
        set: function(e) {
            this._anchor.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(e) {
            this._tint = e,
            this._tintRGB = (e >> 16) + (65280 & e) + ((255 & e) << 16)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Sprite.prototype, "texture", {
        get: function() {
            return this._texture
        },
        set: function(e) {
            this._texture !== e && (this._texture && this._texture.off("update", this._onTextureUpdate, this),
            this._texture = e || ni.EMPTY,
            this._cachedTint = 16777215,
            this._textureID = -1,
            this._textureTrimmedID = -1,
            e && (e.baseTexture.valid ? this._onTextureUpdate() : e.once("update", this._onTextureUpdate, this)))
        },
        enumerable: !1,
        configurable: !0
    }),
    Sprite);
    function Sprite(e) {
        var t = ns.call(this) || this;
        return t._anchor = new Ke(t._onAnchorUpdate,t,e ? e.defaultAnchor.x : 0,e ? e.defaultAnchor.y : 0),
        t._texture = null,
        t._width = 0,
        t._height = 0,
        t._tint = null,
        t._tintRGB = null,
        t.tint = 16777215,
        t.blendMode = ne.BLEND_MODES.NORMAL,
        t._cachedTint = 16777215,
        t.uvs = null,
        t.texture = e || ni.EMPTY,
        t.vertexData = new Float32Array(8),
        t.vertexTrimmedData = null,
        t._transformID = -1,
        t._textureID = -1,
        t._transformTrimmedID = -1,
        t._textureTrimmedID = -1,
        t.indices = ss,
        t.pluginName = "batch",
        t.isSprite = !0,
        t._roundPixels = Z.ROUND_PIXELS,
        t
    }
    var ls, cs = function(e, t) {
        return (cs = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    ne.TEXT_GRADIENT = void 0,
    (ls = ne.TEXT_GRADIENT || (ne.TEXT_GRADIENT = {}))[ls.LINEAR_VERTICAL = 0] = "LINEAR_VERTICAL";
    var us = {
        align: "left",
        breakWords: !(ls[ls.LINEAR_HORIZONTAL = 1] = "LINEAR_HORIZONTAL"),
        dropShadow: !1,
        dropShadowAlpha: 1,
        dropShadowAngle: Math.PI / 6,
        dropShadowBlur: 0,
        dropShadowColor: "black",
        dropShadowDistance: 5,
        fill: "black",
        fillGradientType: ne.TEXT_GRADIENT.LINEAR_VERTICAL,
        fillGradientStops: [],
        fontFamily: "Arial",
        fontSize: 26,
        fontStyle: "normal",
        fontVariant: "normal",
        fontWeight: "normal",
        letterSpacing: 0,
        lineHeight: 0,
        lineJoin: "miter",
        miterLimit: 10,
        padding: 0,
        stroke: "black",
        strokeThickness: 0,
        textBaseline: "alphabetic",
        trim: !1,
        whiteSpace: "pre",
        wordWrap: !1,
        wordWrapWidth: 100,
        leading: 0
    }
      , ds = ["serif", "sans-serif", "monospace", "cursive", "fantasy", "system-ui"]
      , hs = (TextStyle.prototype.clone = function() {
        var e = {};
        return deepCopyProperties(e, this, us),
        new TextStyle(e)
    }
    ,
    TextStyle.prototype.reset = function() {
        deepCopyProperties(this, us, us)
    }
    ,
    Object.defineProperty(TextStyle.prototype, "align", {
        get: function() {
            return this._align
        },
        set: function(e) {
            this._align !== e && (this._align = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "breakWords", {
        get: function() {
            return this._breakWords
        },
        set: function(e) {
            this._breakWords !== e && (this._breakWords = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadow", {
        get: function() {
            return this._dropShadow
        },
        set: function(e) {
            this._dropShadow !== e && (this._dropShadow = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowAlpha", {
        get: function() {
            return this._dropShadowAlpha
        },
        set: function(e) {
            this._dropShadowAlpha !== e && (this._dropShadowAlpha = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowAngle", {
        get: function() {
            return this._dropShadowAngle
        },
        set: function(e) {
            this._dropShadowAngle !== e && (this._dropShadowAngle = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowBlur", {
        get: function() {
            return this._dropShadowBlur
        },
        set: function(e) {
            this._dropShadowBlur !== e && (this._dropShadowBlur = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowColor", {
        get: function() {
            return this._dropShadowColor
        },
        set: function(e) {
            var t = getColor(e);
            this._dropShadowColor !== t && (this._dropShadowColor = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "dropShadowDistance", {
        get: function() {
            return this._dropShadowDistance
        },
        set: function(e) {
            this._dropShadowDistance !== e && (this._dropShadowDistance = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fill", {
        get: function() {
            return this._fill
        },
        set: function(e) {
            var t = getColor(e);
            this._fill !== t && (this._fill = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fillGradientType", {
        get: function() {
            return this._fillGradientType
        },
        set: function(e) {
            this._fillGradientType !== e && (this._fillGradientType = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fillGradientStops", {
        get: function() {
            return this._fillGradientStops
        },
        set: function(e) {
            !function areArraysEqual(e, t) {
                if (!Array.isArray(e) || !Array.isArray(t))
                    return !1;
                if (e.length !== t.length)
                    return !1;
                for (var i = 0; i < e.length; ++i)
                    if (e[i] !== t[i])
                        return !1;
                return !0
            }(this._fillGradientStops, e) && (this._fillGradientStops = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontFamily", {
        get: function() {
            return this._fontFamily
        },
        set: function(e) {
            this.fontFamily !== e && (this._fontFamily = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontSize", {
        get: function() {
            return this._fontSize
        },
        set: function(e) {
            this._fontSize !== e && (this._fontSize = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontStyle", {
        get: function() {
            return this._fontStyle
        },
        set: function(e) {
            this._fontStyle !== e && (this._fontStyle = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontVariant", {
        get: function() {
            return this._fontVariant
        },
        set: function(e) {
            this._fontVariant !== e && (this._fontVariant = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "fontWeight", {
        get: function() {
            return this._fontWeight
        },
        set: function(e) {
            this._fontWeight !== e && (this._fontWeight = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "letterSpacing", {
        get: function() {
            return this._letterSpacing
        },
        set: function(e) {
            this._letterSpacing !== e && (this._letterSpacing = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "lineHeight", {
        get: function() {
            return this._lineHeight
        },
        set: function(e) {
            this._lineHeight !== e && (this._lineHeight = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "leading", {
        get: function() {
            return this._leading
        },
        set: function(e) {
            this._leading !== e && (this._leading = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "lineJoin", {
        get: function() {
            return this._lineJoin
        },
        set: function(e) {
            this._lineJoin !== e && (this._lineJoin = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "miterLimit", {
        get: function() {
            return this._miterLimit
        },
        set: function(e) {
            this._miterLimit !== e && (this._miterLimit = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "padding", {
        get: function() {
            return this._padding
        },
        set: function(e) {
            this._padding !== e && (this._padding = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "stroke", {
        get: function() {
            return this._stroke
        },
        set: function(e) {
            var t = getColor(e);
            this._stroke !== t && (this._stroke = t,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "strokeThickness", {
        get: function() {
            return this._strokeThickness
        },
        set: function(e) {
            this._strokeThickness !== e && (this._strokeThickness = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "textBaseline", {
        get: function() {
            return this._textBaseline
        },
        set: function(e) {
            this._textBaseline !== e && (this._textBaseline = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "trim", {
        get: function() {
            return this._trim
        },
        set: function(e) {
            this._trim !== e && (this._trim = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "whiteSpace", {
        get: function() {
            return this._whiteSpace
        },
        set: function(e) {
            this._whiteSpace !== e && (this._whiteSpace = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "wordWrap", {
        get: function() {
            return this._wordWrap
        },
        set: function(e) {
            this._wordWrap !== e && (this._wordWrap = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextStyle.prototype, "wordWrapWidth", {
        get: function() {
            return this._wordWrapWidth
        },
        set: function(e) {
            this._wordWrapWidth !== e && (this._wordWrapWidth = e,
            this.styleID++)
        },
        enumerable: !1,
        configurable: !0
    }),
    TextStyle.prototype.toFontString = function() {
        var e = "number" == typeof this.fontSize ? this.fontSize + "px" : this.fontSize
          , t = this.fontFamily;
        Array.isArray(this.fontFamily) || (t = this.fontFamily.split(","));
        for (var i = t.length - 1; 0 <= i; i--) {
            var o = t[i].trim();
            !/([\"\'])[^\'\"]+\1/.test(o) && ds.indexOf(o) < 0 && (o = '"' + o + '"'),
            t[i] = o
        }
        return this.fontStyle + " " + this.fontVariant + " " + this.fontWeight + " " + e + " " + t.join(",")
    }
    ,
    TextStyle);
    function TextStyle(e) {
        this.styleID = 0,
        this.reset(),
        deepCopyProperties(this, e, e)
    }
    function getSingleColor(e) {
        return "number" == typeof e ? hex2string(e) : ("string" == typeof e && 0 === e.indexOf("0x") && (e = e.replace("0x", "#")),
        e)
    }
    function getColor(e) {
        if (Array.isArray(e)) {
            for (var t = 0; t < e.length; ++t)
                e[t] = getSingleColor(e[t]);
            return e
        }
        return getSingleColor(e)
    }
    function deepCopyProperties(e, t, i) {
        for (var o in i)
            Array.isArray(t[o]) ? e[o] = t[o].slice() : e[o] = t[o]
    }
    var ps = {
        willReadFrequently: !0
    }
      , _s = (TextMetrics.measureText = function(e, t, i, o) {
        void 0 === o && (o = TextMetrics._canvas),
        i = null == i ? t.wordWrap : i;
        var n = t.toFontString()
          , r = TextMetrics.measureFont(n);
        0 === r.fontSize && (r.fontSize = t.fontSize,
        r.ascent = t.fontSize);
        var s = o.getContext("2d", ps);
        s.font = n;
        for (var a = (i ? TextMetrics.wordWrap(e, t, o) : e).split(/(?:\r\n|\r|\n)/), l = new Array(a.length), c = 0, u = 0; u < a.length; u++) {
            var d = s.measureText(a[u]).width + (a[u].length - 1) * t.letterSpacing;
            l[u] = d,
            c = Math.max(c, d)
        }
        var h = c + t.strokeThickness;
        t.dropShadow && (h += t.dropShadowDistance);
        var p = t.lineHeight || r.fontSize + t.strokeThickness
          , _ = Math.max(p, r.fontSize + t.strokeThickness) + (a.length - 1) * (p + t.leading);
        return t.dropShadow && (_ += t.dropShadowDistance),
        new TextMetrics(e,t,h,_,a,l,p + t.leading,c,r)
    }
    ,
    TextMetrics.wordWrap = function(e, t, i) {
        void 0 === i && (i = TextMetrics._canvas);
        for (var o = i.getContext("2d", ps), n = 0, r = "", s = "", a = Object.create(null), l = t.letterSpacing, c = t.whiteSpace, u = TextMetrics.collapseSpaces(c), d = TextMetrics.collapseNewlines(c), h = !u, p = t.wordWrapWidth + l, _ = TextMetrics.tokenize(e), f = 0; f < _.length; f++) {
            var m = _[f];
            if (TextMetrics.isNewline(m)) {
                if (!d) {
                    s += TextMetrics.addLine(r),
                    h = !u,
                    r = "",
                    n = 0;
                    continue
                }
                m = " "
            }
            if (u) {
                var T = TextMetrics.isBreakingSpace(m)
                  , v = TextMetrics.isBreakingSpace(r[r.length - 1]);
                if (T && v)
                    continue
            }
            var y = TextMetrics.getFromCache(m, l, a, o);
            if (p < y)
                if ("" !== r && (s += TextMetrics.addLine(r),
                r = "",
                n = 0),
                TextMetrics.canBreakWords(m, t.breakWords))
                    for (var g = TextMetrics.wordWrapSplit(m), w = 0; w < g.length; w++) {
                        for (var C = g[w], S = 1; g[w + S]; ) {
                            var E = g[w + S]
                              , b = C[C.length - 1];
                            if (TextMetrics.canBreakChars(b, E, m, w, t.breakWords))
                                break;
                            C += E,
                            S++
                        }
                        w += C.length - 1;
                        var V = TextMetrics.getFromCache(C, l, a, o);
                        p < V + n && (s += TextMetrics.addLine(r),
                        h = !1,
                        r = "",
                        n = 0),
                        r += C,
                        n += V
                    }
                else {
                    0 < r.length && (s += TextMetrics.addLine(r),
                    r = "",
                    n = 0);
                    var U = f === _.length - 1;
                    s += TextMetrics.addLine(m, !U),
                    h = !1,
                    r = "",
                    n = 0
                }
            else
                p < y + n && (h = !1,
                s += TextMetrics.addLine(r),
                r = "",
                n = 0),
                (0 < r.length || !TextMetrics.isBreakingSpace(m) || h) && (r += m,
                n += y)
        }
        return s += TextMetrics.addLine(r, !1)
    }
    ,
    TextMetrics.addLine = function(e, t) {
        return void 0 === t && (t = !0),
        e = TextMetrics.trimRight(e),
        e = t ? e + "\n" : e
    }
    ,
    TextMetrics.getFromCache = function(e, t, i, o) {
        var n = i[e];
        if ("number" != typeof n) {
            var r = e.length * t;
            n = o.measureText(e).width + r,
            i[e] = n
        }
        return n
    }
    ,
    TextMetrics.collapseSpaces = function(e) {
        return "normal" === e || "pre-line" === e
    }
    ,
    TextMetrics.collapseNewlines = function(e) {
        return "normal" === e
    }
    ,
    TextMetrics.trimRight = function(e) {
        if ("string" != typeof e)
            return "";
        for (var t = e.length - 1; 0 <= t; t--) {
            var i = e[t];
            if (!TextMetrics.isBreakingSpace(i))
                break;
            e = e.slice(0, -1)
        }
        return e
    }
    ,
    TextMetrics.isNewline = function(e) {
        return "string" == typeof e && 0 <= TextMetrics._newlines.indexOf(e.charCodeAt(0))
    }
    ,
    TextMetrics.isBreakingSpace = function(e, t) {
        return "string" == typeof e && 0 <= TextMetrics._breakingSpaces.indexOf(e.charCodeAt(0))
    }
    ,
    TextMetrics.tokenize = function(e) {
        var t = []
          , i = "";
        if ("string" != typeof e)
            return t;
        for (var o = 0; o < e.length; o++) {
            var n = e[o]
              , r = e[o + 1];
            TextMetrics.isBreakingSpace(n, r) || TextMetrics.isNewline(n) ? ("" !== i && (t.push(i),
            i = ""),
            t.push(n)) : i += n
        }
        return "" !== i && t.push(i),
        t
    }
    ,
    TextMetrics.canBreakWords = function(e, t) {
        return t
    }
    ,
    TextMetrics.canBreakChars = function(e, t, i, o, n) {
        return !0
    }
    ,
    TextMetrics.wordWrapSplit = function(e) {
        return e.split("")
    }
    ,
    TextMetrics.measureFont = function(e) {
        if (TextMetrics._fonts[e])
            return TextMetrics._fonts[e];
        var t = {
            ascent: 0,
            descent: 0,
            fontSize: 0
        }
          , i = TextMetrics._canvas
          , o = TextMetrics._context;
        o.font = e;
        var n = TextMetrics.METRICS_STRING + TextMetrics.BASELINE_SYMBOL
          , r = Math.ceil(o.measureText(n).width)
          , s = Math.ceil(o.measureText(TextMetrics.BASELINE_SYMBOL).width)
          , a = Math.ceil(TextMetrics.HEIGHT_MULTIPLIER * s);
        s = s * TextMetrics.BASELINE_MULTIPLIER | 0,
        i.width = r,
        i.height = a,
        o.fillStyle = "#f00",
        o.fillRect(0, 0, r, a),
        o.font = e,
        o.textBaseline = "alphabetic",
        o.fillStyle = "#000",
        o.fillText(n, 0, s);
        var l = o.getImageData(0, 0, r, a).data
          , c = l.length
          , u = 4 * r
          , d = 0
          , h = 0
          , p = !1;
        for (d = 0; d < s; ++d) {
            for (var _ = 0; _ < u; _ += 4)
                if (255 !== l[h + _]) {
                    p = !0;
                    break
                }
            if (p)
                break;
            h += u
        }
        for (t.ascent = s - d,
        h = c - u,
        p = !1,
        d = a; s < d; --d) {
            for (_ = 0; _ < u; _ += 4)
                if (255 !== l[h + _]) {
                    p = !0;
                    break
                }
            if (p)
                break;
            h -= u
        }
        return t.descent = d - s,
        t.fontSize = t.ascent + t.descent,
        TextMetrics._fonts[e] = t
    }
    ,
    TextMetrics.clearMetrics = function(e) {
        void 0 === e && (e = ""),
        e ? delete TextMetrics._fonts[e] : TextMetrics._fonts = {}
    }
    ,
    Object.defineProperty(TextMetrics, "_canvas", {
        get: function() {
            if (!TextMetrics.__canvas) {
                var t = void 0;
                try {
                    var e = new OffscreenCanvas(0,0)
                      , i = e.getContext("2d", ps);
                    if (i && i.measureText)
                        return TextMetrics.__canvas = e;
                    t = Z.ADAPTER.createCanvas()
                } catch (e) {
                    t = Z.ADAPTER.createCanvas()
                }
                t.width = t.height = 10,
                TextMetrics.__canvas = t
            }
            return TextMetrics.__canvas
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TextMetrics, "_context", {
        get: function() {
            return TextMetrics.__context || (TextMetrics.__context = TextMetrics._canvas.getContext("2d", ps)),
            TextMetrics.__context
        },
        enumerable: !1,
        configurable: !0
    }),
    TextMetrics);
    function TextMetrics(e, t, i, o, n, r, s, a, l) {
        this.text = e,
        this.style = t,
        this.width = i,
        this.height = o,
        this.lines = n,
        this.lineWidths = r,
        this.lineHeight = s,
        this.maxLineWidth = a,
        this.fontProperties = l
    }
    _s._fonts = {},
    _s.METRICS_STRING = "|ÉqÅ",
    _s.BASELINE_SYMBOL = "M",
    _s.BASELINE_MULTIPLIER = 1.4,
    _s.HEIGHT_MULTIPLIER = 2,
    _s._newlines = [10, 13];
    var fs, ms = {
        texture: !0,
        children: !(_s._breakingSpaces = [9, 32, 8192, 8193, 8194, 8195, 8196, 8197, 8198, 8200, 8201, 8202, 8287, 12288]),
        baseTexture: !0
    }, Ts = (function __extends$c(e, t) {
        function __() {
            this.constructor = e
        }
        cs(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(Text, fs = as),
    Text.prototype.updateText = function(e) {
        var t = this._style;
        if (this.localStyleID !== t.styleID && (this.dirty = !0,
        this.localStyleID = t.styleID),
        this.dirty || !e) {
            this._font = this._style.toFontString();
            var i, o, n = this.context, r = _s.measureText(this._text || " ", this._style, this._style.wordWrap, this.canvas), s = r.width, a = r.height, l = r.lines, c = r.lineHeight, u = r.lineWidths, d = r.maxLineWidth, h = r.fontProperties;
            this.canvas.width = Math.ceil(Math.ceil(Math.max(1, s) + 2 * t.padding) * this._resolution),
            this.canvas.height = Math.ceil(Math.ceil(Math.max(1, a) + 2 * t.padding) * this._resolution),
            n.scale(this._resolution, this._resolution),
            n.clearRect(0, 0, this.canvas.width, this.canvas.height),
            n.font = this._font,
            n.lineWidth = t.strokeThickness,
            n.textBaseline = t.textBaseline,
            n.lineJoin = t.lineJoin,
            n.miterLimit = t.miterLimit;
            for (var p = t.dropShadow ? 2 : 1, _ = 0; _ < p; ++_) {
                var f = t.dropShadow && 0 === _
                  , m = f ? Math.ceil(Math.max(1, a) + 2 * t.padding) : 0
                  , T = m * this._resolution;
                if (f) {
                    n.fillStyle = "black",
                    n.strokeStyle = "black";
                    var v = t.dropShadowColor
                      , y = hex2rgb("number" == typeof v ? v : string2hex(v))
                      , g = t.dropShadowBlur * this._resolution
                      , w = t.dropShadowDistance * this._resolution;
                    n.shadowColor = "rgba(" + 255 * y[0] + "," + 255 * y[1] + "," + 255 * y[2] + "," + t.dropShadowAlpha + ")",
                    n.shadowBlur = g,
                    n.shadowOffsetX = Math.cos(t.dropShadowAngle) * w,
                    n.shadowOffsetY = Math.sin(t.dropShadowAngle) * w + T
                } else
                    n.fillStyle = this._generateFillStyle(t, l, r),
                    n.strokeStyle = t.stroke,
                    n.shadowColor = "black",
                    n.shadowBlur = 0,
                    n.shadowOffsetX = 0,
                    n.shadowOffsetY = 0;
                var C = (c - h.fontSize) / 2;
                (!Text.nextLineHeightBehavior || c - h.fontSize < 0) && (C = 0);
                for (var S = 0; S < l.length; S++)
                    i = t.strokeThickness / 2,
                    o = t.strokeThickness / 2 + S * c + h.ascent + C,
                    "right" === t.align ? i += d - u[S] : "center" === t.align && (i += (d - u[S]) / 2),
                    t.stroke && t.strokeThickness && this.drawLetterSpacing(l[S], i + t.padding, o + t.padding - m, !0),
                    t.fill && this.drawLetterSpacing(l[S], i + t.padding, o + t.padding - m)
            }
            this.updateTexture()
        }
    }
    ,
    Text.prototype.drawLetterSpacing = function(e, t, i, o) {
        void 0 === o && (o = !1);
        var n = this._style.letterSpacing
          , r = Text.experimentalLetterSpacing && ("letterSpacing"in CanvasRenderingContext2D.prototype || "textLetterSpacing"in CanvasRenderingContext2D.prototype);
        if (0 === n || r)
            return r && (this.context.letterSpacing = n,
            this.context.textLetterSpacing = n),
            void (o ? this.context.strokeText(e, t, i) : this.context.fillText(e, t, i));
        for (var s = t, a = Array.from ? Array.from(e) : e.split(""), l = this.context.measureText(e).width, c = 0, u = 0; u < a.length; ++u) {
            var d = a[u];
            o ? this.context.strokeText(d, s, i) : this.context.fillText(d, s, i);
            for (var h = "", p = u + 1; p < a.length; ++p)
                h += a[p];
            s += l - (c = this.context.measureText(h).width) + n,
            l = c
        }
    }
    ,
    Text.prototype.updateTexture = function() {
        var e = this.canvas;
        if (this._style.trim) {
            var t = trimCanvas(e);
            t.data && (e.width = t.width,
            e.height = t.height,
            this.context.putImageData(t.data, 0, 0))
        }
        var i = this._texture
          , o = this._style
          , n = o.trim ? 0 : o.padding
          , r = i.baseTexture;
        i.trim.width = i._frame.width = e.width / this._resolution,
        i.trim.height = i._frame.height = e.height / this._resolution,
        i.trim.x = -n,
        i.trim.y = -n,
        i.orig.width = i._frame.width - 2 * n,
        i.orig.height = i._frame.height - 2 * n,
        this._onTextureUpdate(),
        r.setRealSize(e.width, e.height, this._resolution),
        i.updateUvs(),
        this.dirty = !1
    }
    ,
    Text.prototype._render = function(e) {
        this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution,
        this.dirty = !0),
        this.updateText(!0),
        fs.prototype._render.call(this, e)
    }
    ,
    Text.prototype.updateTransform = function() {
        this.updateText(!0),
        fs.prototype.updateTransform.call(this)
    }
    ,
    Text.prototype.getBounds = function(e, t) {
        return this.updateText(!0),
        -1 === this._textureID && (e = !1),
        fs.prototype.getBounds.call(this, e, t)
    }
    ,
    Text.prototype.getLocalBounds = function(e) {
        return this.updateText(!0),
        fs.prototype.getLocalBounds.call(this, e)
    }
    ,
    Text.prototype._calculateBounds = function() {
        this.calculateVertices(),
        this._bounds.addQuad(this.vertexData)
    }
    ,
    Text.prototype._generateFillStyle = function(e, t, i) {
        var o, n = e.fill;
        if (!Array.isArray(n))
            return n;
        if (1 === n.length)
            return n[0];
        var r = e.dropShadow ? e.dropShadowDistance : 0
          , s = e.padding || 0
          , a = this.canvas.width / this._resolution - r - 2 * s
          , l = this.canvas.height / this._resolution - r - 2 * s
          , c = n.slice()
          , u = e.fillGradientStops.slice();
        if (!u.length)
            for (var d = c.length + 1, h = 1; h < d; ++h)
                u.push(h / d);
        if (c.unshift(n[0]),
        u.unshift(0),
        c.push(n[n.length - 1]),
        u.push(1),
        e.fillGradientType === ne.TEXT_GRADIENT.LINEAR_VERTICAL) {
            o = this.context.createLinearGradient(a / 2, s, a / 2, l + s);
            var p = i.fontProperties.fontSize + e.strokeThickness;
            for (h = 0; h < t.length; h++) {
                var _ = i.lineHeight * (h - 1) + p
                  , f = i.lineHeight * h
                  , m = f;
                0 < h && f < _ && (m = (f + _) / 2);
                var T = f + p
                  , v = i.lineHeight * (h + 1)
                  , y = T;
                h + 1 < t.length && v < T && (y = (T + v) / 2);
                for (var g = (y - m) / l, w = 0; w < c.length; w++) {
                    var C = 0;
                    C = "number" == typeof u[w] ? u[w] : w / c.length;
                    var S = Math.min(1, Math.max(0, m / l + C * g));
                    S = Number(S.toFixed(5)),
                    o.addColorStop(S, c[w])
                }
            }
        } else {
            o = this.context.createLinearGradient(s, l / 2, a + s, l / 2);
            var E = c.length + 1
              , b = 1;
            for (h = 0; h < c.length; h++) {
                var V = void 0;
                V = "number" == typeof u[h] ? u[h] : b / E,
                o.addColorStop(V, c[h]),
                b++
            }
        }
        return o
    }
    ,
    Text.prototype.destroy = function(e) {
        "boolean" == typeof e && (e = {
            children: e
        }),
        e = Object.assign({}, ms, e),
        fs.prototype.destroy.call(this, e),
        this._ownCanvas && (this.canvas.height = this.canvas.width = 0),
        this.context = null,
        this.canvas = null,
        this._style = null
    }
    ,
    Object.defineProperty(Text.prototype, "width", {
        get: function() {
            return this.updateText(!0),
            Math.abs(this.scale.x) * this._texture.orig.width
        },
        set: function(e) {
            this.updateText(!0);
            var t = sign(this.scale.x) || 1;
            this.scale.x = t * e / this._texture.orig.width,
            this._width = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "height", {
        get: function() {
            return this.updateText(!0),
            Math.abs(this.scale.y) * this._texture.orig.height
        },
        set: function(e) {
            this.updateText(!0);
            var t = sign(this.scale.y) || 1;
            this.scale.y = t * e / this._texture.orig.height,
            this._height = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "style", {
        get: function() {
            return this._style
        },
        set: function(e) {
            e = e || {},
            this._style = e instanceof hs ? e : new hs(e),
            this.localStyleID = -1,
            this.dirty = !0
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(e) {
            e = String(null == e ? "" : e),
            this._text !== e && (this._text = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Text.prototype, "resolution", {
        get: function() {
            return this._resolution
        },
        set: function(e) {
            this._autoResolution = !1,
            this._resolution !== e && (this._resolution = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Text.nextLineHeightBehavior = !1,
    Text.experimentalLetterSpacing = !1,
    Text);
    function Text(e, t, i) {
        var o = this
          , n = !1;
        i || (i = Z.ADAPTER.createCanvas(),
        n = !0),
        i.width = 3,
        i.height = 3;
        var r = ni.from(i);
        return r.orig = new ze,
        r.trim = new ze,
        (o = fs.call(this, r) || this)._ownCanvas = n,
        o.canvas = i,
        o.context = i.getContext("2d", {
            willReadFrequently: !0
        }),
        o._resolution = Z.RESOLUTION,
        o._autoResolution = !0,
        o._text = null,
        o._style = null,
        o._styleListener = null,
        o._font = "",
        o.text = e,
        o.style = t,
        o.localStyleID = -1,
        o
    }
    Z.UPLOADS_PER_FRAME = 4;
    var vs = function(e, t) {
        return (vs = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var ys = (CountLimiter.prototype.beginFrame = function() {
        this.itemsLeft = this.maxItemsPerFrame
    }
    ,
    CountLimiter.prototype.allowedToUpload = function() {
        return 0 < this.itemsLeft--
    }
    ,
    CountLimiter);
    function CountLimiter(e) {
        this.maxItemsPerFrame = e,
        this.itemsLeft = 0
    }
    function findMultipleBaseTextures(e, t) {
        var i = !1;
        if (e && e._textures && e._textures.length)
            for (var o = 0; o < e._textures.length; o++)
                if (e._textures[o]instanceof ni) {
                    var n = e._textures[o].baseTexture;
                    -1 === t.indexOf(n) && (t.push(n),
                    i = !0)
                }
        return i
    }
    function findBaseTexture(e, t) {
        if (e.baseTexture instanceof Rt) {
            var i = e.baseTexture;
            return -1 === t.indexOf(i) && t.push(i),
            !0
        }
        return !1
    }
    function findTexture(e, t) {
        if (e._texture && e._texture instanceof ni) {
            var i = e._texture.baseTexture;
            return -1 === t.indexOf(i) && t.push(i),
            !0
        }
        return !1
    }
    function drawText(e, t) {
        return t instanceof Ts && (t.updateText(!0),
        !0)
    }
    function calculateTextStyle(e, t) {
        if (t instanceof hs) {
            var i = t.toFontString();
            return _s.measureFont(i),
            !0
        }
        return !1
    }
    function findText(e, t) {
        if (e instanceof Ts) {
            -1 === t.indexOf(e.style) && t.push(e.style),
            -1 === t.indexOf(e) && t.push(e);
            var i = e._texture.baseTexture;
            return -1 === t.indexOf(i) && t.push(i),
            !0
        }
        return !1
    }
    function findTextStyle(e, t) {
        return e instanceof hs && (-1 === t.indexOf(e) && t.push(e),
        !0)
    }
    var gs = (BasePrepare.prototype.upload = function(t, i) {
        var o = this;
        return "function" == typeof t && (i = t,
        t = null),
        i && deprecation("6.5.0", "BasePrepare.upload callback is deprecated, use the return Promise instead."),
        new Promise(function(e) {
            function hHa() {
                null == i || i(),
                e()
            }
            t && o.add(t),
            o.queue.length ? (o.completes.push(hHa),
            o.ticking || (o.ticking = !0,
            gt.system.addOnce(o.tick, o, ne.UPDATE_PRIORITY.UTILITY))) : hHa()
        }
        )
    }
    ,
    BasePrepare.prototype.tick = function() {
        setTimeout(this.delayedTick, 0)
    }
    ,
    BasePrepare.prototype.prepareItems = function() {
        for (this.limiter.beginFrame(); this.queue.length && this.limiter.allowedToUpload(); ) {
            var e = this.queue[0]
              , t = !1;
            if (e && !e._destroyed)
                for (var i = 0, o = this.uploadHooks.length; i < o; i++)
                    if (this.uploadHooks[i](this.uploadHookHelper, e)) {
                        this.queue.shift(),
                        t = !0;
                        break
                    }
            t || this.queue.shift()
        }
        if (this.queue.length)
            gt.system.addOnce(this.tick, this, ne.UPDATE_PRIORITY.UTILITY);
        else {
            this.ticking = !1;
            var n = this.completes.slice(0);
            for (i = this.completes.length = 0,
            o = n.length; i < o; i++)
                n[i]()
        }
    }
    ,
    BasePrepare.prototype.registerFindHook = function(e) {
        return e && this.addHooks.push(e),
        this
    }
    ,
    BasePrepare.prototype.registerUploadHook = function(e) {
        return e && this.uploadHooks.push(e),
        this
    }
    ,
    BasePrepare.prototype.add = function(e) {
        for (var t = 0, i = this.addHooks.length; t < i && !this.addHooks[t](e, this.queue); t++)
            ;
        if (e instanceof pt)
            for (t = e.children.length - 1; 0 <= t; t--)
                this.add(e.children[t]);
        return this
    }
    ,
    BasePrepare.prototype.destroy = function() {
        this.ticking && gt.system.remove(this.tick, this),
        this.ticking = !1,
        this.addHooks = null,
        this.uploadHooks = null,
        this.renderer = null,
        this.completes = null,
        this.queue = null,
        this.limiter = null,
        this.uploadHookHelper = null
    }
    ,
    BasePrepare);
    function BasePrepare(e) {
        var t = this;
        this.limiter = new ys(Z.UPLOADS_PER_FRAME),
        this.renderer = e,
        this.uploadHookHelper = null,
        this.queue = [],
        this.addHooks = [],
        this.uploadHooks = [],
        this.completes = [],
        this.ticking = !1,
        this.delayedTick = function() {
            t.queue && t.prepareItems()
        }
        ,
        this.registerFindHook(findText),
        this.registerFindHook(findTextStyle),
        this.registerFindHook(findMultipleBaseTextures),
        this.registerFindHook(findBaseTexture),
        this.registerFindHook(findTexture),
        this.registerUploadHook(drawText),
        this.registerUploadHook(calculateTextStyle)
    }
    function uploadBaseTextures(e, t) {
        return t instanceof Rt && (t._glTextures[e.CONTEXT_UID] || e.texture.bind(t),
        !0)
    }
    function uploadGraphics(e, t) {
        if (!(t instanceof ts))
            return !1;
        var i = t.geometry;
        t.finishPoly(),
        i.updateBatches();
        for (var o = i.batches, n = 0; n < o.length; n++) {
            var r = o[n].style.texture;
            r && uploadBaseTextures(e, r.baseTexture)
        }
        return i.batchable || e.geometry.bind(i, t._resolveDirectShader(e)),
        !0
    }
    function findGraphics(e, t) {
        return e instanceof ts && (t.push(e),
        !0)
    }
    var ws, Cs = (function __extends$b(e, t) {
        function __() {
            this.constructor = e
        }
        vs(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(Prepare, ws = gs),
    Prepare.extension = {
        name: "prepare",
        type: ne.ExtensionType.RendererPlugin
    },
    Prepare);
    function Prepare(e) {
        var t = ws.call(this, e) || this;
        return t.uploadHookHelper = t.renderer,
        t.registerFindHook(findGraphics),
        t.registerUploadHook(uploadBaseTextures),
        t.registerUploadHook(uploadGraphics),
        t
    }
    var Ss = (TimeLimiter.prototype.beginFrame = function() {
        this.frameStart = Date.now()
    }
    ,
    TimeLimiter.prototype.allowedToUpload = function() {
        return Date.now() - this.frameStart < this.maxMilliseconds
    }
    ,
    TimeLimiter);
    function TimeLimiter(e) {
        this.maxMilliseconds = e,
        this.frameStart = 0
    }
    var Es = (Spritesheet.prototype._updateResolution = function(e) {
        void 0 === e && (e = null);
        var t = this.data.meta.scale
          , i = getResolutionOfUrl(e, null);
        return null === i && (i = void 0 !== t ? parseFloat(t) : 1),
        1 !== i && this.baseTexture.setResolution(i),
        i
    }
    ,
    Spritesheet.prototype.parse = function(i) {
        var e = this;
        return i && deprecation("6.5.0", "Spritesheet.parse callback is deprecated, use the return Promise instead."),
        new Promise(function(t) {
            e._callback = function(e) {
                null == i || i(e),
                t(e)
            }
            ,
            e._batchIndex = 0,
            e._frameKeys.length <= Spritesheet.BATCH_SIZE ? (e._processFrames(0),
            e._processAnimations(),
            e._parseComplete()) : e._nextBatch()
        }
        )
    }
    ,
    Spritesheet.prototype._processFrames = function(e) {
        for (var t = e, i = Spritesheet.BATCH_SIZE; t - e < i && t < this._frameKeys.length; ) {
            var o = this._frameKeys[t]
              , n = this._frames[o]
              , r = n.frame;
            if (r) {
                var s = null
                  , a = null
                  , l = !1 !== n.trimmed && n.sourceSize ? n.sourceSize : n.frame
                  , c = new ze(0,0,Math.floor(l.w) / this.resolution,Math.floor(l.h) / this.resolution);
                s = n.rotated ? new ze(Math.floor(r.x) / this.resolution,Math.floor(r.y) / this.resolution,Math.floor(r.h) / this.resolution,Math.floor(r.w) / this.resolution) : new ze(Math.floor(r.x) / this.resolution,Math.floor(r.y) / this.resolution,Math.floor(r.w) / this.resolution,Math.floor(r.h) / this.resolution),
                !1 !== n.trimmed && n.spriteSourceSize && (a = new ze(Math.floor(n.spriteSourceSize.x) / this.resolution,Math.floor(n.spriteSourceSize.y) / this.resolution,Math.floor(r.w) / this.resolution,Math.floor(r.h) / this.resolution)),
                this.textures[o] = new ni(this.baseTexture,s,c,a,n.rotated ? 2 : 0,n.anchor),
                ni.addToCache(this.textures[o], o)
            }
            t++
        }
    }
    ,
    Spritesheet.prototype._processAnimations = function() {
        var e = this.data.animations || {};
        for (var t in e) {
            this.animations[t] = [];
            for (var i = 0; i < e[t].length; i++) {
                var o = e[t][i];
                this.animations[t].push(this.textures[o])
            }
        }
    }
    ,
    Spritesheet.prototype._parseComplete = function() {
        var e = this._callback;
        this._callback = null,
        this._batchIndex = 0,
        e.call(this, this.textures)
    }
    ,
    Spritesheet.prototype._nextBatch = function() {
        var e = this;
        this._processFrames(this._batchIndex * Spritesheet.BATCH_SIZE),
        this._batchIndex++,
        setTimeout(function() {
            e._batchIndex * Spritesheet.BATCH_SIZE < e._frameKeys.length ? e._nextBatch() : (e._processAnimations(),
            e._parseComplete())
        }, 0)
    }
    ,
    Spritesheet.prototype.destroy = function(e) {
        var t;
        for (var i in void 0 === e && (e = !1),
        this.textures)
            this.textures[i].destroy();
        this._frames = null,
        this._frameKeys = null,
        this.data = null,
        this.textures = null,
        e && (null === (t = this._texture) || void 0 === t || t.destroy(),
        this.baseTexture.destroy()),
        this._texture = null,
        this.baseTexture = null,
        this.linkedSheets = []
    }
    ,
    Spritesheet.BATCH_SIZE = 1e3,
    Spritesheet);
    function Spritesheet(e, t, i) {
        void 0 === i && (i = null),
        this.linkedSheets = [],
        this._texture = e instanceof ni ? e : null,
        this.baseTexture = e instanceof Rt ? e : this._texture.baseTexture,
        this.textures = {},
        this.animations = {},
        this.data = t;
        var o = this.baseTexture.resource;
        this.resolution = this._updateResolution(i || (o ? o.url : null)),
        this._frames = this.data.frames,
        this._frameKeys = Object.keys(this._frames),
        this._batchIndex = 0,
        this._callback = null
    }
    var bs = (SpritesheetLoader.use = function(n, i) {
        var e, t, r = this, o = n.name + "_image";
        if (n.data && n.type === ne.LoaderResource.TYPE.JSON && n.data.frames && !r.resources[o]) {
            var s = null === (t = null === (e = n.data) || void 0 === e ? void 0 : e.meta) || void 0 === t ? void 0 : t.related_multi_packs;
            if (Array.isArray(s))
                for (var a = function(e) {
                    if ("string" != typeof e)
                        return "continue";
                    var t = e.replace(".json", "")
                      , i = we.resolve(n.url.replace(r.baseUrl, ""), e);
                    if (r.resources[t] || Object.values(r.resources).some(function(e) {
                        return we.format(we.parse(e.url)) === i
                    }))
                        return "continue";
                    var o = {
                        crossOrigin: n.crossOrigin,
                        loadType: ne.LoaderResource.LOAD_TYPE.XHR,
                        xhrType: ne.LoaderResource.XHR_RESPONSE_TYPE.JSON,
                        parentResource: n,
                        metadata: n.metadata
                    };
                    r.add(t, i, o)
                }, l = 0, c = s; l < c.length; l++)
                    a(c[l]);
            var u = {
                crossOrigin: n.crossOrigin,
                metadata: n.metadata.imageMetadata,
                parentResource: n
            }
              , d = SpritesheetLoader.getResourcePath(n, r.baseUrl);
            r.add(o, d, u, function onImageLoad(e) {
                if (e.error)
                    i(e.error);
                else {
                    var t = new Es(e.texture,n.data,n.url);
                    t.parse().then(function() {
                        n.spritesheet = t,
                        n.textures = t.textures,
                        i()
                    })
                }
            })
        } else
            i()
    }
    ,
    SpritesheetLoader.getResourcePath = function(e, t) {
        return e.isDataUrl ? e.data.meta.image : we.resolve(e.url.replace(t, ""), e.data.meta.image)
    }
    ,
    SpritesheetLoader.extension = ne.ExtensionType.Loader,
    SpritesheetLoader);
    function SpritesheetLoader() {}
    var Vs = function(e, t) {
        return (Vs = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$a(e, t) {
        function __() {
            this.constructor = e
        }
        Vs(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    var Us, Is = new je, As = (__extends$a(TilingSprite, Us = as),
    Object.defineProperty(TilingSprite.prototype, "clampMargin", {
        get: function() {
            return this.uvMatrix.clampMargin
        },
        set: function(e) {
            this.uvMatrix.clampMargin = e,
            this.uvMatrix.update(!0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TilingSprite.prototype, "tileScale", {
        get: function() {
            return this.tileTransform.scale
        },
        set: function(e) {
            this.tileTransform.scale.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TilingSprite.prototype, "tilePosition", {
        get: function() {
            return this.tileTransform.position
        },
        set: function(e) {
            this.tileTransform.position.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    TilingSprite.prototype._onTextureUpdate = function() {
        this.uvMatrix && (this.uvMatrix.texture = this._texture),
        this._cachedTint = 16777215
    }
    ,
    TilingSprite.prototype._render = function(e) {
        var t = this._texture;
        t && t.valid && (this.tileTransform.updateLocalTransform(),
        this.uvMatrix.update(),
        e.batch.setObjectRenderer(e.plugins[this.pluginName]),
        e.plugins[this.pluginName].render(this))
    }
    ,
    TilingSprite.prototype._calculateBounds = function() {
        var e = this._width * -this._anchor._x
          , t = this._height * -this._anchor._y
          , i = this._width * (1 - this._anchor._x)
          , o = this._height * (1 - this._anchor._y);
        this._bounds.addFrame(this.transform, e, t, i, o)
    }
    ,
    TilingSprite.prototype.getLocalBounds = function(e) {
        return 0 === this.children.length ? (this._bounds.minX = this._width * -this._anchor._x,
        this._bounds.minY = this._height * -this._anchor._y,
        this._bounds.maxX = this._width * (1 - this._anchor._x),
        this._bounds.maxY = this._height * (1 - this._anchor._y),
        e || (this._localBoundsRect || (this._localBoundsRect = new ze),
        e = this._localBoundsRect),
        this._bounds.getRectangle(e)) : Us.prototype.getLocalBounds.call(this, e)
    }
    ,
    TilingSprite.prototype.containsPoint = function(e) {
        this.worldTransform.applyInverse(e, Is);
        var t = this._width
          , i = this._height
          , o = -t * this.anchor._x;
        if (Is.x >= o && Is.x < o + t) {
            var n = -i * this.anchor._y;
            if (Is.y >= n && Is.y < n + i)
                return !0
        }
        return !1
    }
    ,
    TilingSprite.prototype.destroy = function(e) {
        Us.prototype.destroy.call(this, e),
        this.tileTransform = null,
        this.uvMatrix = null
    }
    ,
    TilingSprite.from = function(e, t) {
        return new TilingSprite(e instanceof ni ? e : ni.from(e, t),t.width,t.height)
    }
    ,
    Object.defineProperty(TilingSprite.prototype, "width", {
        get: function() {
            return this._width
        },
        set: function(e) {
            this._width = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(TilingSprite.prototype, "height", {
        get: function() {
            return this._height
        },
        set: function(e) {
            this._height = e
        },
        enumerable: !1,
        configurable: !0
    }),
    TilingSprite);
    function TilingSprite(e, t, i) {
        void 0 === t && (t = 100),
        void 0 === i && (i = 100);
        var o = Us.call(this, e) || this;
        return o.tileTransform = new rt,
        o._width = t,
        o._height = i,
        o.uvMatrix = o.texture.uvMatrix || new to(e),
        o.pluginName = "tilingSprite",
        o.uvRespectAnchor = !1,
        o
    }
    var Rs, Ps = "#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", Os = new Je, Ds = (__extends$a(TilingSpriteRenderer, Rs = Vi),
    TilingSpriteRenderer.prototype.contextChange = function() {
        var e = this.renderer
          , t = {
            globals: e.globalUniforms
        };
        this.simpleShader = Ji.from(Ps, "#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n", t),
        this.shader = 1 < e.context.webGLVersion ? Ji.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n", "#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n", t) : Ji.from(Ps, "#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n", t)
    }
    ,
    TilingSpriteRenderer.prototype.render = function(e) {
        var t = this.renderer
          , i = this.quad
          , o = i.vertices;
        o[0] = o[6] = e._width * -e.anchor.x,
        o[1] = o[3] = e._height * -e.anchor.y,
        o[2] = o[4] = e._width * (1 - e.anchor.x),
        o[5] = o[7] = e._height * (1 - e.anchor.y);
        var n = e.uvRespectAnchor ? e.anchor.x : 0
          , r = e.uvRespectAnchor ? e.anchor.y : 0;
        (o = i.uvs)[0] = o[6] = -n,
        o[1] = o[3] = -r,
        o[2] = o[4] = 1 - n,
        o[5] = o[7] = 1 - r,
        i.invalidate();
        var s = e._texture
          , a = s.baseTexture
          , l = 0 < a.alphaMode
          , c = e.tileTransform.localTransform
          , u = e.uvMatrix
          , d = a.isPowerOfTwo && s.frame.width === a.width && s.frame.height === a.height;
        d && (a._glTextures[t.CONTEXT_UID] ? d = a.wrapMode !== ne.WRAP_MODES.CLAMP : a.wrapMode === ne.WRAP_MODES.CLAMP && (a.wrapMode = ne.WRAP_MODES.REPEAT));
        var h = d ? this.simpleShader : this.shader
          , p = s.width
          , _ = s.height
          , f = e._width
          , m = e._height;
        Os.set(c.a * p / f, c.b * p / m, c.c * _ / f, c.d * _ / m, c.tx / f, c.ty / m),
        Os.invert(),
        d ? Os.prepend(u.mapCoord) : (h.uniforms.uMapCoord = u.mapCoord.toArray(!0),
        h.uniforms.uClampFrame = u.uClampFrame,
        h.uniforms.uClampOffset = u.uClampOffset),
        h.uniforms.uTransform = Os.toArray(!0),
        h.uniforms.uColor = premultiplyTintToRgba(e.tint, e.worldAlpha, h.uniforms.uColor, l),
        h.uniforms.translationMatrix = e.transform.worldTransform.toArray(!0),
        h.uniforms.uSampler = s,
        t.shader.bind(h),
        t.geometry.bind(i),
        this.state.blendMode = correctBlendMode(e.blendMode, l),
        t.state.set(this.state),
        t.geometry.draw(this.renderer.gl.TRIANGLES, 6, 0)
    }
    ,
    TilingSpriteRenderer.extension = {
        name: "tilingSprite",
        type: ne.ExtensionType.RendererPlugin
    },
    TilingSpriteRenderer);
    function TilingSpriteRenderer(e) {
        var t = Rs.call(this, e) || this;
        return e.runners.contextChange.add(t),
        t.quad = new yi,
        t.state = Qi.for2d(),
        t
    }
    var Ls = function(e, t) {
        return (Ls = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$9(e, t) {
        function __() {
            this.constructor = e
        }
        Ls(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    var Ms = (MeshBatchUvs.prototype.update = function(e) {
        if (e || this._bufferUpdateId !== this.uvBuffer._updateID || this._textureUpdateId !== this.uvMatrix._updateID) {
            this._bufferUpdateId = this.uvBuffer._updateID,
            this._textureUpdateId = this.uvMatrix._updateID;
            var t = this.uvBuffer.data;
            this.data && this.data.length === t.length || (this.data = new Float32Array(t.length)),
            this.uvMatrix.multiplyUvs(t, this.data),
            this._updateID++
        }
    }
    ,
    MeshBatchUvs);
    function MeshBatchUvs(e, t) {
        this.uvBuffer = e,
        this.uvMatrix = t,
        this.data = null,
        this._bufferUpdateId = -1,
        this._textureUpdateId = -1,
        this._updateID = 0
    }
    var xs, Bs = new je, Ns = new Xe, Fs = (__extends$9(Mesh, xs = pt),
    Object.defineProperty(Mesh.prototype, "geometry", {
        get: function() {
            return this._geometry
        },
        set: function(e) {
            this._geometry !== e && (this._geometry && (this._geometry.refCount--,
            0 === this._geometry.refCount && this._geometry.dispose()),
            this._geometry = e,
            this._geometry && this._geometry.refCount++,
            this.vertexDirty = -1)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "uvBuffer", {
        get: function() {
            return this.geometry.buffers[1]
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "verticesBuffer", {
        get: function() {
            return this.geometry.buffers[0]
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "material", {
        get: function() {
            return this.shader
        },
        set: function(e) {
            this.shader = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "blendMode", {
        get: function() {
            return this.state.blendMode
        },
        set: function(e) {
            this.state.blendMode = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "roundPixels", {
        get: function() {
            return this._roundPixels
        },
        set: function(e) {
            this._roundPixels !== e && (this._transformID = -1),
            this._roundPixels = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "tint", {
        get: function() {
            return "tint"in this.shader ? this.shader.tint : null
        },
        set: function(e) {
            this.shader.tint = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Mesh.prototype, "texture", {
        get: function() {
            return "texture"in this.shader ? this.shader.texture : null
        },
        set: function(e) {
            this.shader.texture = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Mesh.prototype._render = function(e) {
        var t = this.geometry.buffers[0].data;
        this.shader.batchable && this.drawMode === ne.DRAW_MODES.TRIANGLES && t.length < 2 * Mesh.BATCHABLE_SIZE ? this._renderToBatch(e) : this._renderDefault(e)
    }
    ,
    Mesh.prototype._renderDefault = function(e) {
        var t = this.shader;
        t.alpha = this.worldAlpha,
        t.update && t.update(),
        e.batch.flush(),
        t.uniforms.translationMatrix = this.transform.worldTransform.toArray(!0),
        e.shader.bind(t),
        e.state.set(this.state),
        e.geometry.bind(this.geometry, t),
        e.geometry.draw(this.drawMode, this.size, this.start, this.geometry.instanceCount)
    }
    ,
    Mesh.prototype._renderToBatch = function(e) {
        var t = this.geometry
          , i = this.shader;
        i.uvMatrix && (i.uvMatrix.update(),
        this.calculateUvs()),
        this.calculateVertices(),
        this.indices = t.indexBuffer.data,
        this._tintRGB = i._tintRGB,
        this._texture = i.texture;
        var o = this.material.pluginName;
        e.batch.setObjectRenderer(e.plugins[o]),
        e.plugins[o].render(this)
    }
    ,
    Mesh.prototype.calculateVertices = function() {
        var e = this.geometry.buffers[0]
          , t = e.data
          , i = e._updateID;
        if (i !== this.vertexDirty || this._transformID !== this.transform._worldID) {
            this._transformID = this.transform._worldID,
            this.vertexData.length !== t.length && (this.vertexData = new Float32Array(t.length));
            for (var o = this.transform.worldTransform, n = o.a, r = o.b, s = o.c, a = o.d, l = o.tx, c = o.ty, u = this.vertexData, d = 0; d < u.length / 2; d++) {
                var h = t[2 * d]
                  , p = t[2 * d + 1];
                u[2 * d] = n * h + s * p + l,
                u[2 * d + 1] = r * h + a * p + c
            }
            if (this._roundPixels) {
                var _ = Z.RESOLUTION;
                for (d = 0; d < u.length; ++d)
                    u[d] = Math.round((u[d] * _ | 0) / _)
            }
            this.vertexDirty = i
        }
    }
    ,
    Mesh.prototype.calculateUvs = function() {
        var e = this.geometry.buffers[1]
          , t = this.shader;
        t.uvMatrix.isSimple ? this.uvs = e.data : (this.batchUvs || (this.batchUvs = new Ms(e,t.uvMatrix)),
        this.batchUvs.update(),
        this.uvs = this.batchUvs.data)
    }
    ,
    Mesh.prototype._calculateBounds = function() {
        this.calculateVertices(),
        this._bounds.addVertexData(this.vertexData, 0, this.vertexData.length)
    }
    ,
    Mesh.prototype.containsPoint = function(e) {
        if (!this.getBounds().contains(e.x, e.y))
            return !1;
        this.worldTransform.applyInverse(e, Bs);
        for (var t = this.geometry.getBuffer("aVertexPosition").data, i = Ns.points, o = this.geometry.getIndex().data, n = o.length, r = 4 === this.drawMode ? 3 : 1, s = 0; s + 2 < n; s += r) {
            var a = 2 * o[s]
              , l = 2 * o[s + 1]
              , c = 2 * o[s + 2];
            if (i[0] = t[a],
            i[1] = t[1 + a],
            i[2] = t[l],
            i[3] = t[1 + l],
            i[4] = t[c],
            i[5] = t[1 + c],
            Ns.contains(Bs.x, Bs.y))
                return !0
        }
        return !1
    }
    ,
    Mesh.prototype.destroy = function(e) {
        xs.prototype.destroy.call(this, e),
        this._cachedTexture && (this._cachedTexture.destroy(),
        this._cachedTexture = null),
        this.geometry = null,
        this.shader = null,
        this.state = null,
        this.uvs = null,
        this.indices = null,
        this.vertexData = null
    }
    ,
    Mesh.BATCHABLE_SIZE = 100,
    Mesh);
    function Mesh(e, t, i, o) {
        void 0 === o && (o = ne.DRAW_MODES.TRIANGLES);
        var n = xs.call(this) || this;
        return n.geometry = e,
        n.shader = t,
        n.state = i || Qi.for2d(),
        n.drawMode = o,
        n.start = 0,
        n.size = 0,
        n.uvs = null,
        n.indices = null,
        n.vertexData = new Float32Array(1),
        n.vertexDirty = -1,
        n._transformID = -1,
        n._roundPixels = Z.ROUND_PIXELS,
        n.batchUvs = null,
        n
    }
    var ks, Gs = (__extends$9(MeshMaterial, ks = Ji),
    Object.defineProperty(MeshMaterial.prototype, "texture", {
        get: function() {
            return this.uniforms.uSampler
        },
        set: function(e) {
            this.uniforms.uSampler !== e && (!this.uniforms.uSampler.baseTexture.alphaMode != !e.baseTexture.alphaMode && (this._colorDirty = !0),
            this.uniforms.uSampler = e,
            this.uvMatrix.texture = e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(MeshMaterial.prototype, "alpha", {
        get: function() {
            return this._alpha
        },
        set: function(e) {
            e !== this._alpha && (this._alpha = e,
            this._colorDirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(MeshMaterial.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(e) {
            e !== this._tint && (this._tint = e,
            this._tintRGB = (e >> 16) + (65280 & e) + ((255 & e) << 16),
            this._colorDirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    MeshMaterial.prototype.update = function() {
        if (this._colorDirty) {
            this._colorDirty = !1;
            var e = this.texture.baseTexture;
            premultiplyTintToRgba(this._tint, this._alpha, this.uniforms.uColor, e.alphaMode)
        }
        this.uvMatrix.update() && (this.uniforms.uTextureMatrix = this.uvMatrix.mapCoord)
    }
    ,
    MeshMaterial);
    function MeshMaterial(e, t) {
        var i = this
          , o = {
            uSampler: e,
            alpha: 1,
            uTextureMatrix: Je.IDENTITY,
            uColor: new Float32Array([1, 1, 1, 1])
        };
        return (t = Object.assign({
            tint: 16777215,
            alpha: 1,
            pluginName: "batch"
        }, t)).uniforms && Object.assign(o, t.uniforms),
        (i = ks.call(this, t.program || Ki.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n", "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"), o) || this)._colorDirty = !1,
        i.uvMatrix = new to(e),
        i.batchable = void 0 === t.program,
        i.pluginName = t.pluginName,
        i.tint = t.tint,
        i.alpha = t.alpha,
        i
    }
    var js, qs = (__extends$9(MeshGeometry, js = fi),
    Object.defineProperty(MeshGeometry.prototype, "vertexDirtyId", {
        get: function() {
            return this.buffers[0]._updateID
        },
        enumerable: !1,
        configurable: !0
    }),
    MeshGeometry);
    function MeshGeometry(e, t, i) {
        var o = js.call(this) || this
          , n = new ui(e)
          , r = new ui(t,!0)
          , s = new ui(i,!0,!0);
        return o.addAttribute("aVertexPosition", n, 2, !1, ne.TYPES.FLOAT).addAttribute("aTextureCoord", r, 2, !1, ne.TYPES.FLOAT).addIndex(s),
        o._updateId = -1,
        o
    }
    var zs = function(e, t) {
        return (zs = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var Hs = function BitmapFontData() {
        this.info = [],
        this.common = [],
        this.page = [],
        this.char = [],
        this.kerning = [],
        this.distanceField = []
    }
      , Ys = (TextFormat.test = function(e) {
        return "string" == typeof e && 0 === e.indexOf("info face=")
    }
    ,
    TextFormat.parse = function(e) {
        var t = e.match(/^[a-z]+\s+.+$/gm)
          , i = {
            info: [],
            common: [],
            page: [],
            char: [],
            chars: [],
            kerning: [],
            kernings: [],
            distanceField: []
        };
        for (var o in t) {
            var n = t[o].match(/^[a-z]+/gm)[0]
              , r = t[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm)
              , s = {};
            for (var a in r) {
                var l = r[a].split("=")
                  , c = l[0]
                  , u = l[1].replace(/"/gm, "")
                  , d = parseFloat(u)
                  , h = isNaN(d) ? u : d;
                s[c] = h
            }
            i[n].push(s)
        }
        var p = new Hs;
        return i.info.forEach(function(e) {
            return p.info.push({
                face: e.face,
                size: parseInt(e.size, 10)
            })
        }),
        i.common.forEach(function(e) {
            return p.common.push({
                lineHeight: parseInt(e.lineHeight, 10)
            })
        }),
        i.page.forEach(function(e) {
            return p.page.push({
                id: parseInt(e.id, 10),
                file: e.file
            })
        }),
        i.char.forEach(function(e) {
            return p.char.push({
                id: parseInt(e.id, 10),
                page: parseInt(e.page, 10),
                x: parseInt(e.x, 10),
                y: parseInt(e.y, 10),
                width: parseInt(e.width, 10),
                height: parseInt(e.height, 10),
                xoffset: parseInt(e.xoffset, 10),
                yoffset: parseInt(e.yoffset, 10),
                xadvance: parseInt(e.xadvance, 10)
            })
        }),
        i.kerning.forEach(function(e) {
            return p.kerning.push({
                first: parseInt(e.first, 10),
                second: parseInt(e.second, 10),
                amount: parseInt(e.amount, 10)
            })
        }),
        i.distanceField.forEach(function(e) {
            return p.distanceField.push({
                distanceRange: parseInt(e.distanceRange, 10),
                fieldType: e.fieldType
            })
        }),
        p
    }
    ,
    TextFormat);
    function TextFormat() {}
    var Xs = (XMLFormat.test = function(e) {
        return e instanceof XMLDocument && e.getElementsByTagName("page").length && null !== e.getElementsByTagName("info")[0].getAttribute("face")
    }
    ,
    XMLFormat.parse = function(e) {
        for (var t = new Hs, i = e.getElementsByTagName("info"), o = e.getElementsByTagName("common"), n = e.getElementsByTagName("page"), r = e.getElementsByTagName("char"), s = e.getElementsByTagName("kerning"), a = e.getElementsByTagName("distanceField"), l = 0; l < i.length; l++)
            t.info.push({
                face: i[l].getAttribute("face"),
                size: parseInt(i[l].getAttribute("size"), 10)
            });
        for (l = 0; l < o.length; l++)
            t.common.push({
                lineHeight: parseInt(o[l].getAttribute("lineHeight"), 10)
            });
        for (l = 0; l < n.length; l++)
            t.page.push({
                id: parseInt(n[l].getAttribute("id"), 10) || 0,
                file: n[l].getAttribute("file")
            });
        for (l = 0; l < r.length; l++) {
            var c = r[l];
            t.char.push({
                id: parseInt(c.getAttribute("id"), 10),
                page: parseInt(c.getAttribute("page"), 10) || 0,
                x: parseInt(c.getAttribute("x"), 10),
                y: parseInt(c.getAttribute("y"), 10),
                width: parseInt(c.getAttribute("width"), 10),
                height: parseInt(c.getAttribute("height"), 10),
                xoffset: parseInt(c.getAttribute("xoffset"), 10),
                yoffset: parseInt(c.getAttribute("yoffset"), 10),
                xadvance: parseInt(c.getAttribute("xadvance"), 10)
            })
        }
        for (l = 0; l < s.length; l++)
            t.kerning.push({
                first: parseInt(s[l].getAttribute("first"), 10),
                second: parseInt(s[l].getAttribute("second"), 10),
                amount: parseInt(s[l].getAttribute("amount"), 10)
            });
        for (l = 0; l < a.length; l++)
            t.distanceField.push({
                fieldType: a[l].getAttribute("fieldType"),
                distanceRange: parseInt(a[l].getAttribute("distanceRange"), 10)
            });
        return t
    }
    ,
    XMLFormat);
    function XMLFormat() {}
    var Ws = (XMLStringFormat.test = function(e) {
        if ("string" == typeof e && -1 < e.indexOf("<font>")) {
            var t = (new globalThis.DOMParser).parseFromString(e, "text/xml");
            return Xs.test(t)
        }
        return !1
    }
    ,
    XMLStringFormat.parse = function(e) {
        var t = (new globalThis.DOMParser).parseFromString(e, "text/xml");
        return Xs.parse(t)
    }
    ,
    XMLStringFormat);
    function XMLStringFormat() {}
    var Ks = [Ys, Xs, Ws];
    function autoDetectFormat(e) {
        for (var t = 0; t < Ks.length; t++)
            if (Ks[t].test(e))
                return Ks[t];
        return null
    }
    function drawGlyph(e, t, i, o, n, r, s) {
        var a = i.text
          , l = i.fontProperties;
        t.translate(o, n),
        t.scale(r, r);
        var c = s.strokeThickness / 2
          , u = -s.strokeThickness / 2;
        if (t.font = s.toFontString(),
        t.lineWidth = s.strokeThickness,
        t.textBaseline = s.textBaseline,
        t.lineJoin = s.lineJoin,
        t.miterLimit = s.miterLimit,
        t.fillStyle = function generateFillStyle(e, t, i, o, n, r) {
            var s, a = i.fill;
            if (!Array.isArray(a))
                return a;
            if (1 === a.length)
                return a[0];
            var l = i.dropShadow ? i.dropShadowDistance : 0
              , c = i.padding || 0
              , u = e.width / o - l - 2 * c
              , d = e.height / o - l - 2 * c
              , h = a.slice()
              , p = i.fillGradientStops.slice();
            if (!p.length)
                for (var _ = h.length + 1, f = 1; f < _; ++f)
                    p.push(f / _);
            if (h.unshift(a[0]),
            p.unshift(0),
            h.push(a[a.length - 1]),
            p.push(1),
            i.fillGradientType === ne.TEXT_GRADIENT.LINEAR_VERTICAL) {
                s = t.createLinearGradient(u / 2, c, u / 2, d + c);
                var m = 0
                  , T = (r.fontProperties.fontSize + i.strokeThickness) / d;
                for (f = 0; f < n.length; f++)
                    for (var v = r.lineHeight * f, y = 0; y < h.length; y++) {
                        var g = v / d + ("number" == typeof p[y] ? p[y] : y / h.length) * T
                          , w = Math.max(m, g);
                        w = Math.min(w, 1),
                        s.addColorStop(w, h[y]),
                        m = w
                    }
            } else {
                s = t.createLinearGradient(c, d / 2, u + c, d / 2);
                var C = h.length + 1
                  , S = 1;
                for (f = 0; f < h.length; f++) {
                    var E = void 0;
                    E = "number" == typeof p[f] ? p[f] : S / C,
                    s.addColorStop(E, h[f]),
                    S++
                }
            }
            return s
        }(e, t, s, r, [a], i),
        t.strokeStyle = s.stroke,
        s.dropShadow) {
            var d = s.dropShadowColor
              , h = hex2rgb("number" == typeof d ? d : string2hex(d))
              , p = s.dropShadowBlur * r
              , _ = s.dropShadowDistance * r;
            t.shadowColor = "rgba(" + 255 * h[0] + "," + 255 * h[1] + "," + 255 * h[2] + "," + s.dropShadowAlpha + ")",
            t.shadowBlur = p,
            t.shadowOffsetX = Math.cos(s.dropShadowAngle) * _,
            t.shadowOffsetY = Math.sin(s.dropShadowAngle) * _
        } else
            t.shadowColor = "black",
            t.shadowBlur = 0,
            t.shadowOffsetX = 0,
            t.shadowOffsetY = 0;
        s.stroke && s.strokeThickness && t.strokeText(a, c, u + i.lineHeight - l.descent),
        s.fill && t.fillText(a, c, u + i.lineHeight - l.descent),
        t.setTransform(1, 0, 0, 1, 0, 0),
        t.fillStyle = "rgba(0, 0, 0, 0)"
    }
    function splitTextToCharacters(e) {
        return Array.from ? Array.from(e) : e.split("")
    }
    function extractCharCode(e) {
        return e.codePointAt ? e.codePointAt(0) : e.charCodeAt(0)
    }
    var Js = (BitmapFont.prototype.destroy = function() {
        for (var e in this.chars)
            this.chars[e].texture.destroy(),
            this.chars[e].texture = null;
        for (var e in this.pageTextures)
            this._ownsTextures && this.pageTextures[e].destroy(!0),
            this.pageTextures[e] = null;
        this.chars = null,
        this.pageTextures = null
    }
    ,
    BitmapFont.install = function(e, t, i) {
        var o;
        if (e instanceof Hs)
            o = e;
        else {
            var n = autoDetectFormat(e);
            if (!n)
                throw new Error("Unrecognized data format for font.");
            o = n.parse(e)
        }
        t instanceof ni && (t = [t]);
        var r = new BitmapFont(o,t,i);
        return BitmapFont.available[r.font] = r
    }
    ,
    BitmapFont.uninstall = function(e) {
        var t = BitmapFont.available[e];
        if (!t)
            throw new Error("No font found named '" + e + "'");
        t.destroy(),
        delete BitmapFont.available[e]
    }
    ,
    BitmapFont.from = function(e, t, i) {
        if (!e)
            throw new Error("[BitmapFont] Property `name` is required.");
        var o = Object.assign({}, BitmapFont.defaultOptions, i)
          , n = o.chars
          , r = o.padding
          , s = o.resolution
          , a = o.textureWidth
          , l = o.textureHeight
          , c = function resolveCharacters(e) {
            "string" == typeof e && (e = [e]);
            for (var t = [], i = 0, o = e.length; i < o; i++) {
                var n = e[i];
                if (Array.isArray(n)) {
                    if (2 !== n.length)
                        throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got " + n.length + ".");
                    var r = n[0].charCodeAt(0)
                      , s = n[1].charCodeAt(0);
                    if (s < r)
                        throw new Error("[BitmapFont]: Invalid character range.");
                    for (var a = r, l = s; a <= l; a++)
                        t.push(String.fromCharCode(a))
                } else
                    t.push.apply(t, splitTextToCharacters(n))
            }
            if (0 === t.length)
                throw new Error("[BitmapFont]: Empty set when resolving characters.");
            return t
        }(n)
          , u = t instanceof hs ? t : new hs(t)
          , d = a
          , h = new Hs;
        h.info[0] = {
            face: u.fontFamily,
            size: u.fontSize
        },
        h.common[0] = {
            lineHeight: u.fontSize
        };
        for (var p, _, f, m = 0, T = 0, v = 0, y = [], g = 0; g < c.length; g++) {
            p || ((p = Z.ADAPTER.createCanvas()).width = a,
            p.height = l,
            _ = p.getContext("2d"),
            f = new Rt(p,{
                resolution: s
            }),
            y.push(new ni(f)),
            h.page.push({
                id: y.length - 1,
                file: ""
            }));
            var w = c[g]
              , C = _s.measureText(w, u, !1, p)
              , S = C.width
              , E = Math.ceil(C.height)
              , b = Math.ceil(("italic" === u.fontStyle ? 2 : 1) * S);
            if (l - E * s <= T) {
                if (0 === T)
                    throw new Error("[BitmapFont] textureHeight " + l + "px is too small (fontFamily: '" + u.fontFamily + "', fontSize: " + u.fontSize + "px, char: '" + w + "')");
                --g,
                f = _ = p = null,
                v = m = T = 0
            } else if (v = Math.max(E + C.fontProperties.descent, v),
            d <= b * s + m) {
                if (0 === m)
                    throw new Error("[BitmapFont] textureWidth " + a + "px is too small (fontFamily: '" + u.fontFamily + "', fontSize: " + u.fontSize + "px, char: '" + w + "')");
                --g,
                T += v * s,
                T = Math.ceil(T),
                v = m = 0
            } else {
                drawGlyph(p, _, C, m, T, s, u);
                var V = extractCharCode(C.text);
                h.char.push({
                    id: V,
                    page: y.length - 1,
                    x: m / s,
                    y: T / s,
                    width: b,
                    height: E,
                    xoffset: 0,
                    yoffset: 0,
                    xadvance: Math.ceil(S - (u.dropShadow ? u.dropShadowDistance : 0) - (u.stroke ? u.strokeThickness : 0))
                }),
                m += (b + 2 * r) * s,
                m = Math.ceil(m)
            }
        }
        g = 0;
        for (var U = c.length; g < U; g++)
            for (var I = c[g], A = 0; A < U; A++) {
                var R = c[A]
                  , P = _.measureText(I).width
                  , O = _.measureText(R).width
                  , D = _.measureText(I + R).width - (P + O);
                D && h.kerning.push({
                    first: extractCharCode(I),
                    second: extractCharCode(R),
                    amount: D
                })
            }
        var L = new BitmapFont(h,y,!0);
        return void 0 !== BitmapFont.available[e] && BitmapFont.uninstall(e),
        BitmapFont.available[e] = L
    }
    ,
    BitmapFont.ALPHA = [["a", "z"], ["A", "Z"], " "],
    BitmapFont.NUMERIC = [["0", "9"]],
    BitmapFont.ALPHANUMERIC = [["a", "z"], ["A", "Z"], ["0", "9"], " "],
    BitmapFont.ASCII = [[" ", "~"]],
    BitmapFont.defaultOptions = {
        resolution: 1,
        textureWidth: 512,
        textureHeight: 512,
        padding: 4,
        chars: BitmapFont.ALPHANUMERIC
    },
    BitmapFont.available = {},
    BitmapFont);
    function BitmapFont(e, t, i) {
        var o, n, r = e.info[0], s = e.common[0], a = e.page[0], l = e.distanceField[0], c = getResolutionOfUrl(a.file), u = {};
        this._ownsTextures = i,
        this.font = r.face,
        this.size = r.size,
        this.lineHeight = s.lineHeight / c,
        this.chars = {},
        this.pageTextures = u;
        for (var d = 0; d < e.page.length; d++) {
            var h = e.page[d]
              , p = h.id
              , _ = h.file;
            u[p] = t instanceof Array ? t[d] : t[_],
            (null == l ? void 0 : l.fieldType) && "none" !== l.fieldType && (u[p].baseTexture.alphaMode = ne.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,
            u[p].baseTexture.mipmap = ne.MIPMAP_MODES.OFF)
        }
        for (d = 0; d < e.char.length; d++) {
            var f = e.char[d]
              , m = (p = f.id,
            f.page)
              , T = e.char[d]
              , v = T.x
              , y = T.y
              , g = T.width
              , w = T.height
              , C = T.xoffset
              , S = T.yoffset
              , E = T.xadvance;
            y /= c,
            g /= c,
            w /= c,
            C /= c,
            S /= c,
            E /= c;
            var b = new ze((v /= c) + u[m].frame.x / c,y + u[m].frame.y / c,g,w);
            this.chars[p] = {
                xOffset: C,
                yOffset: S,
                xAdvance: E,
                kerning: {},
                texture: new ni(u[m].baseTexture,b),
                page: m
            }
        }
        for (d = 0; d < e.kerning.length; d++) {
            var V = e.kerning[d]
              , U = V.first
              , I = V.second
              , A = V.amount;
            U /= c,
            I /= c,
            A /= c,
            this.chars[I] && (this.chars[I].kerning[U] = A)
        }
        this.distanceFieldRange = null == l ? void 0 : l.distanceRange,
        this.distanceFieldType = null !== (n = null === (o = null == l ? void 0 : l.fieldType) || void 0 === o ? void 0 : o.toLowerCase()) && void 0 !== n ? n : "none"
    }
    var Qs, $s = [], Zs = [], ea = [], ta = (function __extends$8(e, t) {
        function __() {
            this.constructor = e
        }
        zs(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(BitmapText, Qs = pt),
    BitmapText.prototype.updateText = function() {
        for (var e, t = Js.available[this._fontName], i = this.fontSize, o = i / t.size, n = new je, r = [], s = [], a = [], l = splitTextToCharacters(this._text.replace(/(?:\r\n|\r)/g, "\n") || " "), c = this._maxWidth * t.size / i, u = "none" === t.distanceFieldType ? $s : Zs, d = null, h = 0, p = 0, _ = 0, f = -1, m = 0, T = 0, v = 0, y = 0, g = 0; g < l.length; g++) {
            var w = extractCharCode(G = l[g]);
            if (/(?:\s)/.test(G) && (f = g,
            m = h,
            y++),
            "\r" !== G && "\n" !== G) {
                var C = t.chars[w];
                if (C) {
                    d && C.kerning[d] && (n.x += C.kerning[d]);
                    var S = ea.pop() || {
                        texture: ni.EMPTY,
                        line: 0,
                        charCode: 0,
                        prevSpaces: 0,
                        position: new je
                    };
                    S.texture = C.texture,
                    S.line = _,
                    S.charCode = w,
                    S.position.x = n.x + C.xOffset + this._letterSpacing / 2,
                    S.position.y = n.y + C.yOffset,
                    S.prevSpaces = y,
                    r.push(S),
                    h = S.position.x + Math.max(C.xAdvance - C.xOffset, C.texture.orig.width),
                    n.x += C.xAdvance + this._letterSpacing,
                    v = Math.max(v, C.yOffset + C.texture.height),
                    d = w,
                    -1 !== f && 0 < c && n.x > c && (removeItems(r, 1 + f - ++T, 1 + g - f),
                    g = f,
                    f = -1,
                    s.push(m),
                    a.push(0 < r.length ? r[r.length - 1].prevSpaces : 0),
                    p = Math.max(p, m),
                    _++,
                    n.x = 0,
                    n.y += t.lineHeight,
                    d = null,
                    y = 0)
                }
            } else
                s.push(h),
                a.push(-1),
                p = Math.max(p, h),
                ++_,
                ++T,
                n.x = 0,
                n.y += t.lineHeight,
                d = null,
                y = 0
        }
        var E = l[l.length - 1];
        "\r" !== E && "\n" !== E && (/(?:\s)/.test(E) && (h = m),
        s.push(h),
        p = Math.max(p, h),
        a.push(-1));
        var b = [];
        for (g = 0; g <= _; g++) {
            var V = 0;
            "right" === this._align ? V = p - s[g] : "center" === this._align ? V = (p - s[g]) / 2 : "justify" === this._align && (V = a[g] < 0 ? 0 : (p - s[g]) / a[g]),
            b.push(V)
        }
        var U = r.length
          , I = {}
          , A = []
          , R = this._activePagesMeshData;
        for (u.push.apply(u, R),
        g = 0; g < U; g++) {
            var P = (q = r[g].texture).baseTexture.uid;
            if (!I[P]) {
                if (!(J = u.pop())) {
                    var O = new qs
                      , D = void 0
                      , L = void 0;
                    L = "none" === t.distanceFieldType ? (D = new Gs(ni.EMPTY),
                    ne.BLEND_MODES.NORMAL) : (D = new Gs(ni.EMPTY,{
                        program: Ki.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n", "// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),
                        uniforms: {
                            uFWidth: 0
                        }
                    }),
                    ne.BLEND_MODES.NORMAL_NPM);
                    var M = new Fs(O,D);
                    M.blendMode = L,
                    J = {
                        index: 0,
                        indexCount: 0,
                        vertexCount: 0,
                        uvsCount: 0,
                        total: 0,
                        mesh: M,
                        vertices: null,
                        uvs: null,
                        indices: null
                    }
                }
                J.index = 0,
                J.indexCount = 0,
                J.vertexCount = 0,
                J.uvsCount = 0,
                J.total = 0;
                var x = this._textureCache;
                x[P] = x[P] || new ni(q.baseTexture),
                J.mesh.texture = x[P],
                J.mesh.tint = this._tint,
                A.push(J),
                I[P] = J
            }
            I[P].total++
        }
        for (g = 0; g < R.length; g++)
            -1 === A.indexOf(R[g]) && this.removeChild(R[g].mesh);
        for (g = 0; g < A.length; g++)
            A[g].mesh.parent !== this && this.addChild(A[g].mesh);
        for (var g in this._activePagesMeshData = A,
        I) {
            var B = (J = I[g]).total;
            if (!((null === (e = J.indices) || void 0 === e ? void 0 : e.length) > 6 * B) || J.vertices.length < 2 * Fs.BATCHABLE_SIZE)
                J.vertices = new Float32Array(8 * B),
                J.uvs = new Float32Array(8 * B),
                J.indices = new Uint16Array(6 * B);
            else
                for (var N = J.total, F = J.vertices, k = 4 * N * 2; k < F.length; k++)
                    F[k] = 0;
            J.mesh.size = 6 * B
        }
        for (g = 0; g < U; g++) {
            var G, j = (G = r[g]).position.x + b[G.line] * ("justify" === this._align ? G.prevSpaces : 1);
            this._roundPixels && (j = Math.round(j));
            var q, z = j * o, H = G.position.y * o, Y = I[(q = G.texture).baseTexture.uid], X = q.frame, W = q._uvs, K = Y.index++;
            Y.indices[6 * K + 0] = 0 + 4 * K,
            Y.indices[6 * K + 1] = 1 + 4 * K,
            Y.indices[6 * K + 2] = 2 + 4 * K,
            Y.indices[6 * K + 3] = 0 + 4 * K,
            Y.indices[6 * K + 4] = 2 + 4 * K,
            Y.indices[6 * K + 5] = 3 + 4 * K,
            Y.vertices[8 * K + 0] = z,
            Y.vertices[8 * K + 1] = H,
            Y.vertices[8 * K + 2] = z + X.width * o,
            Y.vertices[8 * K + 3] = H,
            Y.vertices[8 * K + 4] = z + X.width * o,
            Y.vertices[8 * K + 5] = H + X.height * o,
            Y.vertices[8 * K + 6] = z,
            Y.vertices[8 * K + 7] = H + X.height * o,
            Y.uvs[8 * K + 0] = W.x0,
            Y.uvs[8 * K + 1] = W.y0,
            Y.uvs[8 * K + 2] = W.x1,
            Y.uvs[8 * K + 3] = W.y1,
            Y.uvs[8 * K + 4] = W.x2,
            Y.uvs[8 * K + 5] = W.y2,
            Y.uvs[8 * K + 6] = W.x3,
            Y.uvs[8 * K + 7] = W.y3
        }
        for (var g in this._textWidth = p * o,
        this._textHeight = (n.y + t.lineHeight) * o,
        I) {
            var J = I[g];
            if (0 !== this.anchor.x || 0 !== this.anchor.y)
                for (var Q = 0, $ = this._textWidth * this.anchor.x, Z = this._textHeight * this.anchor.y, ee = 0; ee < J.total; ee++)
                    J.vertices[Q++] -= $,
                    J.vertices[Q++] -= Z,
                    J.vertices[Q++] -= $,
                    J.vertices[Q++] -= Z,
                    J.vertices[Q++] -= $,
                    J.vertices[Q++] -= Z,
                    J.vertices[Q++] -= $,
                    J.vertices[Q++] -= Z;
            this._maxLineHeight = v * o;
            var te = J.mesh.geometry.getBuffer("aVertexPosition")
              , ie = J.mesh.geometry.getBuffer("aTextureCoord")
              , oe = J.mesh.geometry.getIndex();
            te.data = J.vertices,
            ie.data = J.uvs,
            oe.data = J.indices,
            te.update(),
            ie.update(),
            oe.update()
        }
        for (g = 0; g < r.length; g++)
            ea.push(r[g]);
        this._font = t,
        this.dirty = !1
    }
    ,
    BitmapText.prototype.updateTransform = function() {
        this.validate(),
        this.containerUpdateTransform()
    }
    ,
    BitmapText.prototype._render = function(e) {
        this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution,
        this.dirty = !0);
        var t = Js.available[this._fontName]
          , i = t.distanceFieldRange
          , o = t.distanceFieldType
          , n = t.size;
        if ("none" !== o)
            for (var r = this.worldTransform, s = r.a, a = r.b, l = r.c, c = r.d, u = Math.sqrt(s * s + a * a), d = Math.sqrt(l * l + c * c), h = (Math.abs(u) + Math.abs(d)) / 2, p = this.fontSize / n, _ = 0, f = this._activePagesMeshData; _ < f.length; _++)
                f[_].mesh.shader.uniforms.uFWidth = h * i * p * this._resolution;
        Qs.prototype._render.call(this, e)
    }
    ,
    BitmapText.prototype.getLocalBounds = function() {
        return this.validate(),
        Qs.prototype.getLocalBounds.call(this)
    }
    ,
    BitmapText.prototype.validate = function() {
        var e = Js.available[this._fontName];
        if (!e)
            throw new Error('Missing BitmapFont "' + this._fontName + '"');
        this._font !== e && (this.dirty = !0),
        this.dirty && this.updateText()
    }
    ,
    Object.defineProperty(BitmapText.prototype, "tint", {
        get: function() {
            return this._tint
        },
        set: function(e) {
            if (this._tint !== e) {
                this._tint = e;
                for (var t = 0; t < this._activePagesMeshData.length; t++)
                    this._activePagesMeshData[t].mesh.tint = e
            }
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "align", {
        get: function() {
            return this._align
        },
        set: function(e) {
            this._align !== e && (this._align = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "fontName", {
        get: function() {
            return this._fontName
        },
        set: function(e) {
            if (!Js.available[e])
                throw new Error('Missing BitmapFont "' + e + '"');
            this._fontName !== e && (this._fontName = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "fontSize", {
        get: function() {
            var e;
            return null !== (e = this._fontSize) && void 0 !== e ? e : Js.available[this._fontName].size
        },
        set: function(e) {
            this._fontSize !== e && (this._fontSize = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "anchor", {
        get: function() {
            return this._anchor
        },
        set: function(e) {
            "number" == typeof e ? this._anchor.set(e) : this._anchor.copyFrom(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "text", {
        get: function() {
            return this._text
        },
        set: function(e) {
            e = String(null == e ? "" : e),
            this._text !== e && (this._text = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "maxWidth", {
        get: function() {
            return this._maxWidth
        },
        set: function(e) {
            this._maxWidth !== e && (this._maxWidth = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "maxLineHeight", {
        get: function() {
            return this.validate(),
            this._maxLineHeight
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "textWidth", {
        get: function() {
            return this.validate(),
            this._textWidth
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "letterSpacing", {
        get: function() {
            return this._letterSpacing
        },
        set: function(e) {
            this._letterSpacing !== e && (this._letterSpacing = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "roundPixels", {
        get: function() {
            return this._roundPixels
        },
        set: function(e) {
            e !== this._roundPixels && (this._roundPixels = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "textHeight", {
        get: function() {
            return this.validate(),
            this._textHeight
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BitmapText.prototype, "resolution", {
        get: function() {
            return this._resolution
        },
        set: function(e) {
            this._autoResolution = !1,
            this._resolution !== e && (this._resolution = e,
            this.dirty = !0)
        },
        enumerable: !1,
        configurable: !0
    }),
    BitmapText.prototype.destroy = function(e) {
        var t = this._textureCache
          , i = "none" === Js.available[this._fontName].distanceFieldType ? $s : Zs;
        i.push.apply(i, this._activePagesMeshData);
        for (var o = 0, n = this._activePagesMeshData; o < n.length; o++) {
            var r = n[o];
            this.removeChild(r.mesh)
        }
        for (var s in this._activePagesMeshData = [],
        i.filter(function(e) {
            return t[e.mesh.texture.baseTexture.uid]
        }).forEach(function(e) {
            e.mesh.texture = ni.EMPTY
        }),
        t)
            t[s].destroy(),
            delete t[s];
        this._font = null,
        this._textureCache = null,
        Qs.prototype.destroy.call(this, e)
    }
    ,
    BitmapText.styleDefaults = {
        align: "left",
        tint: 16777215,
        maxWidth: 0,
        letterSpacing: 0
    },
    BitmapText);
    function BitmapText(e, t) {
        void 0 === t && (t = {});
        var i = Qs.call(this) || this;
        i._tint = 16777215;
        var o = Object.assign({}, BitmapText.styleDefaults, t)
          , n = o.align
          , r = o.tint
          , s = o.maxWidth
          , a = o.letterSpacing
          , l = o.fontName
          , c = o.fontSize;
        if (!Js.available[l])
            throw new Error('Missing BitmapFont "' + l + '"');
        return i._activePagesMeshData = [],
        i._textWidth = 0,
        i._textHeight = 0,
        i._align = n,
        i._tint = r,
        i._font = void 0,
        i._fontName = l,
        i._fontSize = c,
        i.text = e,
        i._maxWidth = s,
        i._maxLineHeight = 0,
        i._letterSpacing = a,
        i._anchor = new Ke(function() {
            i.dirty = !0
        }
        ,i,0,0),
        i._roundPixels = Z.ROUND_PIXELS,
        i.dirty = !0,
        i._resolution = Z.RESOLUTION,
        i._autoResolution = !0,
        i._textureCache = {},
        i
    }
    var ia = (BitmapFontLoader.add = function() {
        ne.LoaderResource.setExtensionXhrType("fnt", ne.LoaderResource.XHR_RESPONSE_TYPE.TEXT)
    }
    ,
    BitmapFontLoader.use = function(t, i) {
        var e = autoDetectFormat(t.data);
        if (e)
            for (var o = BitmapFontLoader.getBaseUrl(this, t), n = e.parse(t.data), r = {}, s = function(e) {
                r[e.metadata.pageFile] = e.texture,
                Object.keys(r).length === n.page.length && (t.bitmapFont = Js.install(n, r, !0),
                i())
            }, a = 0; a < n.page.length; ++a) {
                var l = n.page[a].file
                  , c = o + l
                  , u = !1;
                for (var d in this.resources) {
                    var h = this.resources[d];
                    if (h.url === c) {
                        h.metadata.pageFile = l,
                        h.texture ? s(h) : h.onAfterMiddleware.add(s),
                        u = !0;
                        break
                    }
                }
                if (!u) {
                    var p = {
                        crossOrigin: t.crossOrigin,
                        loadType: ne.LoaderResource.LOAD_TYPE.IMAGE,
                        metadata: Object.assign({
                            pageFile: l
                        }, t.metadata.imageMetadata),
                        parentResource: t
                    };
                    this.add(c, p, s)
                }
            }
        else
            i()
    }
    ,
    BitmapFontLoader.getBaseUrl = function(e, t) {
        var i = t.isDataUrl ? "" : BitmapFontLoader.dirname(t.url);
        return t.isDataUrl && ("." === i && (i = ""),
        e.baseUrl && i && "/" === e.baseUrl.charAt(e.baseUrl.length - 1) && (i += "/")),
        (i = i.replace(e.baseUrl, "")) && "/" !== i.charAt(i.length - 1) && (i += "/"),
        i
    }
    ,
    BitmapFontLoader.dirname = function(e) {
        var t = e.replace(/\\/g, "/").replace(/\/$/, "").replace(/\/[^\/]*$/, "");
        return t === e ? "." : "" === t ? "/" : t
    }
    ,
    BitmapFontLoader.extension = ne.ExtensionType.Loader,
    BitmapFontLoader);
    function BitmapFontLoader() {}
    var oa = function(e, t) {
        return (oa = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var na, ra = (function __extends$7(e, t) {
        function __() {
            this.constructor = e
        }
        oa(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(AlphaFilter, na = Zi),
    Object.defineProperty(AlphaFilter.prototype, "alpha", {
        get: function() {
            return this.uniforms.uAlpha
        },
        set: function(e) {
            this.uniforms.uAlpha = e
        },
        enumerable: !1,
        configurable: !0
    }),
    AlphaFilter);
    function AlphaFilter(e) {
        void 0 === e && (e = 1);
        var t = na.call(this, Mo, "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n", {
            uAlpha: 1
        }) || this;
        return t.alpha = e,
        t
    }
    var sa = function(e, t) {
        return (sa = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$6(e, t) {
        function __() {
            this.constructor = e
        }
        sa(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    var aa = "\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }";
    var la = {
        5: [.153388, .221461, .250301],
        7: [.071303, .131514, .189879, .214607],
        9: [.028532, .067234, .124009, .179044, .20236],
        11: [.0093, .028002, .065984, .121703, .175713, .198596],
        13: [.002406, .009255, .027867, .065666, .121117, .174868, .197641],
        15: [489e-6, .002403, .009246, .02784, .065602, .120999, .174697, .197448]
    }
      , ca = ["varying vec2 vBlurTexCoords[%size%];", "uniform sampler2D uSampler;", "void main(void)", "{", "    gl_FragColor = vec4(0.0);", "    %blur%", "}"].join("\n");
    var ua, da = (__extends$6(BlurFilterPass, ua = Zi),
    BlurFilterPass.prototype.apply = function(e, t, i, o) {
        if (i ? this.horizontal ? this.uniforms.strength = 1 / i.width * (i.width / t.width) : this.uniforms.strength = 1 / i.height * (i.height / t.height) : this.horizontal ? this.uniforms.strength = 1 / e.renderer.width * (e.renderer.width / t.width) : this.uniforms.strength = 1 / e.renderer.height * (e.renderer.height / t.height),
        this.uniforms.strength *= this.strength,
        this.uniforms.strength /= this.passes,
        1 === this.passes)
            e.applyFilter(this, t, i, o);
        else {
            var n = e.getFilterTexture()
              , r = e.renderer
              , s = t
              , a = n;
            this.state.blend = !1,
            e.applyFilter(this, s, a, ne.CLEAR_MODES.CLEAR);
            for (var l = 1; l < this.passes - 1; l++) {
                e.bindAndClear(s, ne.CLEAR_MODES.BLIT);
                var c = this.uniforms.uSampler = a;
                a = s,
                s = c,
                r.shader.bind(this),
                r.geometry.draw(5)
            }
            this.state.blend = !0,
            e.applyFilter(this, a, i, o),
            e.returnFilterTexture(n)
        }
    }
    ,
    Object.defineProperty(BlurFilterPass.prototype, "blur", {
        get: function() {
            return this.strength
        },
        set: function(e) {
            this.padding = 1 + 2 * Math.abs(e),
            this.strength = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilterPass.prototype, "quality", {
        get: function() {
            return this._quality
        },
        set: function(e) {
            this._quality = e,
            this.passes = e
        },
        enumerable: !1,
        configurable: !0
    }),
    BlurFilterPass);
    function BlurFilterPass(e, t, i, o, n) {
        void 0 === t && (t = 8),
        void 0 === i && (i = 4),
        void 0 === o && (o = Z.FILTER_RESOLUTION),
        void 0 === n && (n = 5);
        var r = this
          , s = function generateBlurVertSource(e, t) {
            var i, o = Math.ceil(e / 2), n = aa, r = "";
            i = t ? "vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);" : "vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";
            for (var s = 0; s < e; s++) {
                var a = i.replace("%index%", s.toString());
                r += a = a.replace("%sampleIndex%", s - (o - 1) + ".0"),
                r += "\n"
            }
            return n = (n = n.replace("%blur%", r)).replace("%size%", e.toString())
        }(n, e)
          , a = function generateBlurFragSource(e) {
            for (var t, i = la[e], o = i.length, n = ca, r = "", s = 0; s < e; s++) {
                var a = "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%", s.toString());
                o <= (t = s) && (t = e - s - 1),
                r += a = a.replace("%value%", i[t].toString()),
                r += "\n"
            }
            return n = (n = n.replace("%blur%", r)).replace("%size%", e.toString())
        }(n);
        return (r = ua.call(this, s, a) || this).horizontal = e,
        r.resolution = o,
        r._quality = 0,
        r.quality = i,
        r.blur = t,
        r
    }
    var ha, pa = (__extends$6(BlurFilter, ha = Zi),
    BlurFilter.prototype.apply = function(e, t, i, o) {
        var n = Math.abs(this.blurXFilter.strength)
          , r = Math.abs(this.blurYFilter.strength);
        if (n && r) {
            var s = e.getFilterTexture();
            this.blurXFilter.apply(e, t, s, ne.CLEAR_MODES.CLEAR),
            this.blurYFilter.apply(e, s, i, o),
            e.returnFilterTexture(s)
        } else
            r ? this.blurYFilter.apply(e, t, i, o) : this.blurXFilter.apply(e, t, i, o)
    }
    ,
    BlurFilter.prototype.updatePadding = function() {
        this._repeatEdgePixels ? this.padding = 0 : this.padding = 2 * Math.max(Math.abs(this.blurXFilter.strength), Math.abs(this.blurYFilter.strength))
    }
    ,
    Object.defineProperty(BlurFilter.prototype, "blur", {
        get: function() {
            return this.blurXFilter.blur
        },
        set: function(e) {
            this.blurXFilter.blur = this.blurYFilter.blur = e,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "quality", {
        get: function() {
            return this.blurXFilter.quality
        },
        set: function(e) {
            this.blurXFilter.quality = this.blurYFilter.quality = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "blurX", {
        get: function() {
            return this.blurXFilter.blur
        },
        set: function(e) {
            this.blurXFilter.blur = e,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "blurY", {
        get: function() {
            return this.blurYFilter.blur
        },
        set: function(e) {
            this.blurYFilter.blur = e,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "blendMode", {
        get: function() {
            return this.blurYFilter.blendMode
        },
        set: function(e) {
            this.blurYFilter.blendMode = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(BlurFilter.prototype, "repeatEdgePixels", {
        get: function() {
            return this._repeatEdgePixels
        },
        set: function(e) {
            this._repeatEdgePixels = e,
            this.updatePadding()
        },
        enumerable: !1,
        configurable: !0
    }),
    BlurFilter);
    function BlurFilter(e, t, i, o) {
        void 0 === e && (e = 8),
        void 0 === t && (t = 4),
        void 0 === i && (i = Z.FILTER_RESOLUTION),
        void 0 === o && (o = 5);
        var n = ha.call(this) || this;
        return n.blurXFilter = new da(!0,e,t,i,o),
        n.blurYFilter = new da(!1,e,t,i,o),
        n.resolution = i,
        n.quality = t,
        n.blur = e,
        n.repeatEdgePixels = !1,
        n
    }
    var _a = function(e, t) {
        return (_a = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var fa, ma = (function __extends$5(e, t) {
        function __() {
            this.constructor = e
        }
        _a(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(ColorMatrixFilter, fa = Zi),
    ColorMatrixFilter.prototype._loadMatrix = function(e, t) {
        void 0 === t && (t = !1);
        var i = e;
        t && (this._multiply(i, this.uniforms.m, e),
        i = this._colorMatrix(i)),
        this.uniforms.m = i
    }
    ,
    ColorMatrixFilter.prototype._multiply = function(e, t, i) {
        return e[0] = t[0] * i[0] + t[1] * i[5] + t[2] * i[10] + t[3] * i[15],
        e[1] = t[0] * i[1] + t[1] * i[6] + t[2] * i[11] + t[3] * i[16],
        e[2] = t[0] * i[2] + t[1] * i[7] + t[2] * i[12] + t[3] * i[17],
        e[3] = t[0] * i[3] + t[1] * i[8] + t[2] * i[13] + t[3] * i[18],
        e[4] = t[0] * i[4] + t[1] * i[9] + t[2] * i[14] + t[3] * i[19] + t[4],
        e[5] = t[5] * i[0] + t[6] * i[5] + t[7] * i[10] + t[8] * i[15],
        e[6] = t[5] * i[1] + t[6] * i[6] + t[7] * i[11] + t[8] * i[16],
        e[7] = t[5] * i[2] + t[6] * i[7] + t[7] * i[12] + t[8] * i[17],
        e[8] = t[5] * i[3] + t[6] * i[8] + t[7] * i[13] + t[8] * i[18],
        e[9] = t[5] * i[4] + t[6] * i[9] + t[7] * i[14] + t[8] * i[19] + t[9],
        e[10] = t[10] * i[0] + t[11] * i[5] + t[12] * i[10] + t[13] * i[15],
        e[11] = t[10] * i[1] + t[11] * i[6] + t[12] * i[11] + t[13] * i[16],
        e[12] = t[10] * i[2] + t[11] * i[7] + t[12] * i[12] + t[13] * i[17],
        e[13] = t[10] * i[3] + t[11] * i[8] + t[12] * i[13] + t[13] * i[18],
        e[14] = t[10] * i[4] + t[11] * i[9] + t[12] * i[14] + t[13] * i[19] + t[14],
        e[15] = t[15] * i[0] + t[16] * i[5] + t[17] * i[10] + t[18] * i[15],
        e[16] = t[15] * i[1] + t[16] * i[6] + t[17] * i[11] + t[18] * i[16],
        e[17] = t[15] * i[2] + t[16] * i[7] + t[17] * i[12] + t[18] * i[17],
        e[18] = t[15] * i[3] + t[16] * i[8] + t[17] * i[13] + t[18] * i[18],
        e[19] = t[15] * i[4] + t[16] * i[9] + t[17] * i[14] + t[18] * i[19] + t[19],
        e
    }
    ,
    ColorMatrixFilter.prototype._colorMatrix = function(e) {
        var t = new Float32Array(e);
        return t[4] /= 255,
        t[9] /= 255,
        t[14] /= 255,
        t[19] /= 255,
        t
    }
    ,
    ColorMatrixFilter.prototype.brightness = function(e, t) {
        var i = [e, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, t)
    }
    ,
    ColorMatrixFilter.prototype.tint = function(e, t) {
        var i = [(e >> 16 & 255) / 255, 0, 0, 0, 0, 0, (e >> 8 & 255) / 255, 0, 0, 0, 0, 0, (255 & e) / 255, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, t)
    }
    ,
    ColorMatrixFilter.prototype.greyscale = function(e, t) {
        var i = [e, e, e, 0, 0, e, e, e, 0, 0, e, e, e, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, t)
    }
    ,
    ColorMatrixFilter.prototype.blackAndWhite = function(e) {
        this._loadMatrix([.3, .6, .1, 0, 0, .3, .6, .1, 0, 0, .3, .6, .1, 0, 0, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.hue = function(e, t) {
        e = (e || 0) / 180 * Math.PI;
        var i = Math.cos(e)
          , o = Math.sin(e)
          , n = (0,
        Math.sqrt)(1 / 3)
          , r = [i + 1 / 3 * (1 - i), 1 / 3 * (1 - i) - n * o, 1 / 3 * (1 - i) + n * o, 0, 0, 1 / 3 * (1 - i) + n * o, i + 1 / 3 * (1 - i), 1 / 3 * (1 - i) - n * o, 0, 0, 1 / 3 * (1 - i) - n * o, 1 / 3 * (1 - i) + n * o, i + 1 / 3 * (1 - i), 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(r, t)
    }
    ,
    ColorMatrixFilter.prototype.contrast = function(e, t) {
        var i = (e || 0) + 1
          , o = -.5 * (i - 1)
          , n = [i, 0, 0, 0, o, 0, i, 0, 0, o, 0, 0, i, 0, o, 0, 0, 0, 1, 0];
        this._loadMatrix(n, t)
    }
    ,
    ColorMatrixFilter.prototype.saturate = function(e, t) {
        void 0 === e && (e = 0);
        var i = 2 * e / 3 + 1
          , o = -.5 * (i - 1)
          , n = [i, o, o, 0, 0, o, i, o, 0, 0, o, o, i, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(n, t)
    }
    ,
    ColorMatrixFilter.prototype.desaturate = function() {
        this.saturate(-1)
    }
    ,
    ColorMatrixFilter.prototype.negative = function(e) {
        this._loadMatrix([-1, 0, 0, 1, 0, 0, -1, 0, 1, 0, 0, 0, -1, 1, 0, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.sepia = function(e) {
        this._loadMatrix([.393, .7689999, .18899999, 0, 0, .349, .6859999, .16799999, 0, 0, .272, .5339999, .13099999, 0, 0, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.technicolor = function(e) {
        this._loadMatrix([1.9125277891456083, -.8545344976951645, -.09155508482755585, 0, 11.793603434377337, -.3087833385928097, 1.7658908555458428, -.10601743074722245, 0, -70.35205161461398, -.231103377548616, -.7501899197440212, 1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.polaroid = function(e) {
        this._loadMatrix([1.438, -.062, -.062, 0, 0, -.122, 1.378, -.122, 0, 0, -.016, -.016, 1.483, 0, 0, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.toBGR = function(e) {
        this._loadMatrix([0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.kodachrome = function(e) {
        this._loadMatrix([1.1285582396593525, -.3967382283601348, -.03992559172921793, 0, 63.72958762196502, -.16404339962244616, 1.0835251566291304, -.05498805115633132, 0, 24.732407896706203, -.16786010706155763, -.5603416277695248, 1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.browni = function(e) {
        this._loadMatrix([.5997023498159715, .34553243048391263, -.2708298674538042, 0, 47.43192855600873, -.037703249837783157, .8609577587992641, .15059552388459913, 0, -36.96841498319127, .24113635128153335, -.07441037908422492, .44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.vintage = function(e) {
        this._loadMatrix([.6279345635605994, .3202183420819367, -.03965408211312453, 0, 9.651285835294123, .02578397704808868, .6441188644374771, .03259127616149294, 0, 7.462829176470591, .0466055556782719, -.0851232987247891, .5241648018700465, 0, 5.159190588235296, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.colorTone = function(e, t, i, o, n) {
        var r = ((i = i || 16770432) >> 16 & 255) / 255
          , s = (i >> 8 & 255) / 255
          , a = (255 & i) / 255
          , l = ((o = o || 3375104) >> 16 & 255) / 255
          , c = (o >> 8 & 255) / 255
          , u = (255 & o) / 255
          , d = [.3, .59, .11, 0, 0, r, s, a, e = e || .2, 0, l, c, u, t = t || .15, 0, r - l, s - c, a - u, 0, 0];
        this._loadMatrix(d, n)
    }
    ,
    ColorMatrixFilter.prototype.night = function(e, t) {
        var i = [-2 * (e = e || .1), -e, 0, 0, 0, -e, 0, e, 0, 0, 0, e, 2 * e, 0, 0, 0, 0, 0, 1, 0];
        this._loadMatrix(i, t)
    }
    ,
    ColorMatrixFilter.prototype.predator = function(e, t) {
        var i = [11.224130630493164 * e, -4.794486999511719 * e, -2.8746118545532227 * e, 0 * e, .40342438220977783 * e, -3.6330697536468506 * e, 9.193157196044922 * e, -2.951810836791992 * e, 0 * e, -1.316135048866272 * e, -3.2184197902679443 * e, -4.2375030517578125 * e, 7.476448059082031 * e, 0 * e, .8044459223747253 * e, 0, 0, 0, 1, 0];
        this._loadMatrix(i, t)
    }
    ,
    ColorMatrixFilter.prototype.lsd = function(e) {
        this._loadMatrix([2, -.4, .5, 0, 0, -.5, 2, -.4, 0, 0, -.4, -.5, 3, 0, 0, 0, 0, 0, 1, 0], e)
    }
    ,
    ColorMatrixFilter.prototype.reset = function() {
        this._loadMatrix([1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0], !1)
    }
    ,
    Object.defineProperty(ColorMatrixFilter.prototype, "matrix", {
        get: function() {
            return this.uniforms.m
        },
        set: function(e) {
            this.uniforms.m = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(ColorMatrixFilter.prototype, "alpha", {
        get: function() {
            return this.uniforms.uAlpha
        },
        set: function(e) {
            this.uniforms.uAlpha = e
        },
        enumerable: !1,
        configurable: !0
    }),
    ColorMatrixFilter);
    function ColorMatrixFilter() {
        var e = this
          , t = {
            m: new Float32Array([1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0]),
            uAlpha: 1
        };
        return (e = fa.call(this, xo, "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n", t) || this).alpha = 1,
        e
    }
    ma.prototype.grayscale = ma.prototype.greyscale;
    var Ta = function(e, t) {
        return (Ta = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var va, ya = (function __extends$4(e, t) {
        function __() {
            this.constructor = e
        }
        Ta(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(DisplacementFilter, va = Zi),
    DisplacementFilter.prototype.apply = function(e, t, i, o) {
        this.uniforms.filterMatrix = e.calculateSpriteMatrix(this.maskMatrix, this.maskSprite),
        this.uniforms.scale.x = this.scale.x,
        this.uniforms.scale.y = this.scale.y;
        var n = this.maskSprite.worldTransform
          , r = Math.sqrt(n.a * n.a + n.b * n.b)
          , s = Math.sqrt(n.c * n.c + n.d * n.d);
        0 !== r && 0 !== s && (this.uniforms.rotation[0] = n.a / r,
        this.uniforms.rotation[1] = n.b / r,
        this.uniforms.rotation[2] = n.c / s,
        this.uniforms.rotation[3] = n.d / s),
        e.applyFilter(this, t, i, o)
    }
    ,
    Object.defineProperty(DisplacementFilter.prototype, "map", {
        get: function() {
            return this.uniforms.mapSampler
        },
        set: function(e) {
            this.uniforms.mapSampler = e
        },
        enumerable: !1,
        configurable: !0
    }),
    DisplacementFilter);
    function DisplacementFilter(e, t) {
        var i = this
          , o = new Je;
        return e.renderable = !1,
        (i = va.call(this, "attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n", "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n", {
            mapSampler: e._texture,
            filterMatrix: o,
            scale: {
                x: 1,
                y: 1
            },
            rotation: new Float32Array([1, 0, 0, 1])
        }) || this).maskSprite = e,
        i.maskMatrix = o,
        null == t && (t = 20),
        i.scale = new je(t,t),
        i
    }
    var ga = function(e, t) {
        return (ga = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var wa, Ca = (function __extends$3(e, t) {
        function __() {
            this.constructor = e
        }
        ga(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(FXAAFilter, wa = Zi),
    FXAAFilter);
    function FXAAFilter() {
        return wa.call(this, "\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n", 'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n') || this
    }
    var Sa = function(e, t) {
        return (Sa = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var Ea, ba = (function __extends$2(e, t) {
        function __() {
            this.constructor = e
        }
        Sa(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(NoiseFilter, Ea = Zi),
    Object.defineProperty(NoiseFilter.prototype, "noise", {
        get: function() {
            return this.uniforms.uNoise
        },
        set: function(e) {
            this.uniforms.uNoise = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NoiseFilter.prototype, "seed", {
        get: function() {
            return this.uniforms.uSeed
        },
        set: function(e) {
            this.uniforms.uSeed = e
        },
        enumerable: !1,
        configurable: !0
    }),
    NoiseFilter);
    function NoiseFilter(e, t) {
        void 0 === e && (e = .5),
        void 0 === t && (t = Math.random());
        var i = Ea.call(this, xo, "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n", {
            uNoise: 0,
            uSeed: 0
        }) || this;
        return i.noise = e,
        i.seed = t,
        i
    }
    var Va = new Je;
    ct.prototype._cacheAsBitmap = !1,
    ct.prototype._cacheData = null,
    ct.prototype._cacheAsBitmapResolution = null,
    ct.prototype._cacheAsBitmapMultisample = ne.MSAA_QUALITY.NONE;
    var Ua = function CacheData() {
        this.textureCacheId = null,
        this.originalRender = null,
        this.originalRenderCanvas = null,
        this.originalCalculateBounds = null,
        this.originalGetLocalBounds = null,
        this.originalUpdateTransform = null,
        this.originalDestroy = null,
        this.originalMask = null,
        this.originalFilterArea = null,
        this.originalContainsPoint = null,
        this.sprite = null
    };
    Object.defineProperties(ct.prototype, {
        cacheAsBitmapResolution: {
            get: function() {
                return this._cacheAsBitmapResolution
            },
            set: function(e) {
                e !== this._cacheAsBitmapResolution && (this._cacheAsBitmapResolution = e,
                this.cacheAsBitmap && (this.cacheAsBitmap = !1,
                this.cacheAsBitmap = !0))
            }
        },
        cacheAsBitmapMultisample: {
            get: function() {
                return this._cacheAsBitmapMultisample
            },
            set: function(e) {
                e !== this._cacheAsBitmapMultisample && (this._cacheAsBitmapMultisample = e,
                this.cacheAsBitmap && (this.cacheAsBitmap = !1,
                this.cacheAsBitmap = !0))
            }
        },
        cacheAsBitmap: {
            get: function() {
                return this._cacheAsBitmap
            },
            set: function(e) {
                var t;
                this._cacheAsBitmap !== e && ((this._cacheAsBitmap = e) ? (this._cacheData || (this._cacheData = new Ua),
                (t = this._cacheData).originalRender = this.render,
                t.originalRenderCanvas = this.renderCanvas,
                t.originalUpdateTransform = this.updateTransform,
                t.originalCalculateBounds = this.calculateBounds,
                t.originalGetLocalBounds = this.getLocalBounds,
                t.originalDestroy = this.destroy,
                t.originalContainsPoint = this.containsPoint,
                t.originalMask = this._mask,
                t.originalFilterArea = this.filterArea,
                this.render = this._renderCached,
                this.renderCanvas = this._renderCachedCanvas,
                this.destroy = this._cacheAsBitmapDestroy) : ((t = this._cacheData).sprite && this._destroyCachedDisplayObject(),
                this.render = t.originalRender,
                this.renderCanvas = t.originalRenderCanvas,
                this.calculateBounds = t.originalCalculateBounds,
                this.getLocalBounds = t.originalGetLocalBounds,
                this.destroy = t.originalDestroy,
                this.updateTransform = t.originalUpdateTransform,
                this.containsPoint = t.originalContainsPoint,
                this._mask = t.originalMask,
                this.filterArea = t.originalFilterArea))
            }
        }
    }),
    ct.prototype._renderCached = function _renderCached(e) {
        !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObject(e),
        this._cacheData.sprite.transform._worldID = this.transform._worldID,
        this._cacheData.sprite.worldAlpha = this.worldAlpha,
        this._cacheData.sprite._render(e))
    }
    ,
    ct.prototype._initCachedDisplayObject = function _initCachedDisplayObject(e) {
        var t;
        if (!this._cacheData || !this._cacheData.sprite) {
            var i = this.alpha;
            this.alpha = 1,
            e.batch.flush();
            var o = this.getLocalBounds(null, !0).clone();
            if (this.filters && this.filters.length) {
                var n = this.filters[0].padding;
                o.pad(n)
            }
            o.ceil(Z.RESOLUTION);
            var r = e.renderTexture.current
              , s = e.renderTexture.sourceFrame.clone()
              , a = e.renderTexture.destinationFrame.clone()
              , l = e.projection.transform
              , c = si.create({
                width: o.width,
                height: o.height,
                resolution: this.cacheAsBitmapResolution || e.resolution,
                multisample: null !== (t = this.cacheAsBitmapMultisample) && void 0 !== t ? t : e.multisample
            })
              , u = "cacheAsBitmap_" + uid();
            this._cacheData.textureCacheId = u,
            Rt.addToCache(c.baseTexture, u),
            ni.addToCache(c, u);
            var d = this.transform.localTransform.copyTo(Va).invert().translate(-o.x, -o.y);
            this.render = this._cacheData.originalRender,
            e.render(this, {
                renderTexture: c,
                clear: !0,
                transform: d,
                skipUpdateTransform: !1
            }),
            e.framebuffer.blit(),
            e.projection.transform = l,
            e.renderTexture.bind(r, s, a),
            this.render = this._renderCached,
            this.updateTransform = this.displayObjectUpdateTransform,
            this.calculateBounds = this._calculateCachedBounds,
            this.getLocalBounds = this._getCachedLocalBounds,
            this._mask = null,
            this.filterArea = null,
            this.alpha = i;
            var h = new as(c);
            h.transform.worldTransform = this.transform.worldTransform,
            h.anchor.x = -o.x / o.width,
            h.anchor.y = -o.y / o.height,
            h.alpha = i,
            h._bounds = this._bounds,
            this._cacheData.sprite = h,
            this.transform._parentID = -1,
            this.parent ? this.updateTransform() : (this.enableTempParent(),
            this.updateTransform(),
            this.disableTempParent(null)),
            this.containsPoint = h.containsPoint.bind(h)
        }
    }
    ,
    ct.prototype._renderCachedCanvas = function _renderCachedCanvas(e) {
        !this.visible || this.worldAlpha <= 0 || !this.renderable || (this._initCachedDisplayObjectCanvas(e),
        this._cacheData.sprite.worldAlpha = this.worldAlpha,
        this._cacheData.sprite._renderCanvas(e))
    }
    ,
    ct.prototype._initCachedDisplayObjectCanvas = function _initCachedDisplayObjectCanvas(e) {
        if (!this._cacheData || !this._cacheData.sprite) {
            var t = this.getLocalBounds(null, !0)
              , i = this.alpha;
            this.alpha = 1;
            var o = e.context
              , n = e._projTransform;
            t.ceil(Z.RESOLUTION);
            var r = si.create({
                width: t.width,
                height: t.height
            })
              , s = "cacheAsBitmap_" + uid();
            this._cacheData.textureCacheId = s,
            Rt.addToCache(r.baseTexture, s),
            ni.addToCache(r, s);
            var a = Va;
            this.transform.localTransform.copyTo(a),
            a.invert(),
            a.tx -= t.x,
            a.ty -= t.y,
            this.renderCanvas = this._cacheData.originalRenderCanvas,
            e.render(this, {
                renderTexture: r,
                clear: !0,
                transform: a,
                skipUpdateTransform: !1
            }),
            e.context = o,
            e._projTransform = n,
            this.renderCanvas = this._renderCachedCanvas,
            this.updateTransform = this.displayObjectUpdateTransform,
            this.calculateBounds = this._calculateCachedBounds,
            this.getLocalBounds = this._getCachedLocalBounds,
            this._mask = null,
            this.filterArea = null,
            this.alpha = i;
            var l = new as(r);
            l.transform.worldTransform = this.transform.worldTransform,
            l.anchor.x = -t.x / t.width,
            l.anchor.y = -t.y / t.height,
            l.alpha = i,
            l._bounds = this._bounds,
            this._cacheData.sprite = l,
            this.transform._parentID = -1,
            this.parent ? this.updateTransform() : (this.parent = e._tempDisplayObjectParent,
            this.updateTransform(),
            this.parent = null),
            this.containsPoint = l.containsPoint.bind(l)
        }
    }
    ,
    ct.prototype._calculateCachedBounds = function _calculateCachedBounds() {
        this._bounds.clear(),
        this._cacheData.sprite.transform._worldID = this.transform._worldID,
        this._cacheData.sprite._calculateBounds(),
        this._bounds.updateID = this._boundsID
    }
    ,
    ct.prototype._getCachedLocalBounds = function _getCachedLocalBounds() {
        return this._cacheData.sprite.getLocalBounds(null)
    }
    ,
    ct.prototype._destroyCachedDisplayObject = function _destroyCachedDisplayObject() {
        this._cacheData.sprite._texture.destroy(!0),
        this._cacheData.sprite = null,
        Rt.removeFromCache(this._cacheData.textureCacheId),
        ni.removeFromCache(this._cacheData.textureCacheId),
        this._cacheData.textureCacheId = null
    }
    ,
    ct.prototype._cacheAsBitmapDestroy = function _cacheAsBitmapDestroy(e) {
        this.cacheAsBitmap = !1,
        this.destroy(e)
    }
    ,
    ct.prototype.name = null,
    pt.prototype.getChildByName = function getChildByName(e, t) {
        for (var i = 0, o = this.children.length; i < o; i++)
            if (this.children[i].name === e)
                return this.children[i];
        if (t)
            for (i = 0,
            o = this.children.length; i < o; i++) {
                var n = this.children[i];
                if (n.getChildByName) {
                    var r = n.getChildByName(e, !0);
                    if (r)
                        return r
                }
            }
        return null
    }
    ,
    ct.prototype.getGlobalPosition = function getGlobalPosition(e, t) {
        return void 0 === e && (e = new je),
        void 0 === t && (t = !1),
        this.parent ? this.parent.toGlobal(this.position, e, t) : (e.x = this.position.x,
        e.y = this.position.y),
        e
    }
    ;
    var Ia = (ResizePlugin.init = function(e) {
        var o = this;
        Object.defineProperty(this, "resizeTo", {
            set: function(e) {
                globalThis.removeEventListener("resize", this.queueResize),
                (this._resizeTo = e) && (globalThis.addEventListener("resize", this.queueResize),
                this.resize())
            },
            get: function() {
                return this._resizeTo
            }
        }),
        this.queueResize = function() {
            o._resizeTo && (o.cancelResize(),
            o._resizeId = requestAnimationFrame(function() {
                return o.resize()
            }))
        }
        ,
        this.cancelResize = function() {
            o._resizeId && (cancelAnimationFrame(o._resizeId),
            o._resizeId = null)
        }
        ,
        this.resize = function() {
            if (o._resizeTo) {
                var e, t;
                if (o.cancelResize(),
                o._resizeTo === globalThis.window)
                    e = globalThis.innerWidth,
                    t = globalThis.innerHeight;
                else {
                    var i = o._resizeTo;
                    e = i.clientWidth,
                    t = i.clientHeight
                }
                o.renderer.resize(e, t)
            }
        }
        ,
        this._resizeId = null,
        this._resizeTo = null,
        this.resizeTo = e.resizeTo || null
    }
    ,
    ResizePlugin.destroy = function() {
        globalThis.removeEventListener("resize", this.queueResize),
        this.cancelResize(),
        this.cancelResize = null,
        this.queueResize = null,
        this.resizeTo = null,
        this.resize = null
    }
    ,
    ResizePlugin.extension = ne.ExtensionType.Application,
    ResizePlugin);
    function ResizePlugin() {}
    var Aa = (Application.registerPlugin = function(e) {
        deprecation("6.5.0", "Application.registerPlugin() is deprecated, use extensions.add()"),
        Tt.add({
            type: ne.ExtensionType.Application,
            ref: e
        })
    }
    ,
    Application.prototype.render = function() {
        this.renderer.render(this.stage)
    }
    ,
    Object.defineProperty(Application.prototype, "view", {
        get: function() {
            return this.renderer.view
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(Application.prototype, "screen", {
        get: function() {
            return this.renderer.screen
        },
        enumerable: !1,
        configurable: !0
    }),
    Application.prototype.destroy = function(e, t) {
        var i = this
          , o = Application._plugins.slice(0);
        o.reverse(),
        o.forEach(function(e) {
            e.destroy.call(i)
        }),
        this.stage.destroy(t),
        this.stage = null,
        this.renderer.destroy(e),
        this.renderer = null
    }
    ,
    Application._plugins = [],
    Application);
    function Application(t) {
        var i = this;
        this.stage = new pt,
        t = Object.assign({
            forceCanvas: !1
        }, t),
        this.renderer = autoDetectRenderer(t),
        Application._plugins.forEach(function(e) {
            e.init.call(i, t)
        })
    }
    Tt.handleByList(ne.ExtensionType.Application, Aa._plugins),
    Tt.add(Ia);
    var Ra = function(e, t) {
        return (Ra = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    function __extends$1(e, t) {
        function __() {
            this.constructor = e
        }
        Ra(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
    var Pa, Oa = (__extends$1(PlaneGeometry, Pa = qs),
    PlaneGeometry.prototype.build = function() {
        for (var e = this.segWidth * this.segHeight, t = [], i = [], o = [], n = this.segWidth - 1, r = this.segHeight - 1, s = this.width / n, a = this.height / r, l = 0; l < e; l++) {
            var c = l % this.segWidth
              , u = l / this.segWidth | 0;
            t.push(c * s, u * a),
            i.push(c / n, u / r)
        }
        var d = n * r;
        for (l = 0; l < d; l++) {
            var h = l % n
              , p = l / n | 0
              , _ = p * this.segWidth + h
              , f = p * this.segWidth + h + 1
              , m = (1 + p) * this.segWidth + h
              , T = (1 + p) * this.segWidth + h + 1;
            o.push(_, f, m, f, T, m)
        }
        this.buffers[0].data = new Float32Array(t),
        this.buffers[1].data = new Float32Array(i),
        this.indexBuffer.data = new Uint16Array(o),
        this.buffers[0].update(),
        this.buffers[1].update(),
        this.indexBuffer.update()
    }
    ,
    PlaneGeometry);
    function PlaneGeometry(e, t, i, o) {
        void 0 === e && (e = 100),
        void 0 === t && (t = 100),
        void 0 === i && (i = 10),
        void 0 === o && (o = 10);
        var n = Pa.call(this) || this;
        return n.segWidth = i,
        n.segHeight = o,
        n.width = e,
        n.height = t,
        n.build(),
        n
    }
    var Da, La = (__extends$1(RopeGeometry, Da = qs),
    Object.defineProperty(RopeGeometry.prototype, "width", {
        get: function() {
            return this._width
        },
        enumerable: !1,
        configurable: !0
    }),
    RopeGeometry.prototype.build = function() {
        var e = this.points;
        if (e) {
            var t = this.getBuffer("aVertexPosition")
              , i = this.getBuffer("aTextureCoord")
              , o = this.getIndex();
            if (!(e.length < 1)) {
                t.data.length / 4 !== e.length && (t.data = new Float32Array(4 * e.length),
                i.data = new Float32Array(4 * e.length),
                o.data = new Uint16Array(6 * (e.length - 1)));
                var n = i.data
                  , r = o.data;
                n[0] = 0,
                n[1] = 0,
                n[2] = 0,
                n[3] = 1;
                for (var s = 0, a = e[0], l = this._width * this.textureScale, c = e.length, u = 0; u < c; u++) {
                    var d = 4 * u;
                    if (0 < this.textureScale) {
                        var h = a.x - e[u].x
                          , p = a.y - e[u].y
                          , _ = Math.sqrt(h * h + p * p);
                        a = e[u],
                        s += _ / l
                    } else
                        s = u / (c - 1);
                    n[d] = s,
                    n[d + 1] = 0,
                    n[d + 2] = s,
                    n[d + 3] = 1
                }
                var f = 0;
                for (u = 0; u < c - 1; u++)
                    d = 2 * u,
                    r[f++] = d,
                    r[f++] = d + 1,
                    r[f++] = d + 2,
                    r[f++] = d + 2,
                    r[f++] = d + 1,
                    r[f++] = d + 3;
                i.update(),
                o.update(),
                this.updateVertices()
            }
        }
    }
    ,
    RopeGeometry.prototype.updateVertices = function() {
        var e = this.points;
        if (!(e.length < 1)) {
            for (var t, i = e[0], o = 0, n = 0, r = this.buffers[0].data, s = e.length, a = 0; a < s; a++) {
                var l = e[a]
                  , c = 4 * a;
                n = -((t = a < e.length - 1 ? e[a + 1] : l).x - i.x),
                o = t.y - i.y;
                var u = Math.sqrt(o * o + n * n)
                  , d = 0 < this.textureScale ? this.textureScale * this._width / 2 : this._width / 2;
                o /= u,
                n /= u,
                o *= d,
                n *= d,
                r[c] = l.x + o,
                r[1 + c] = l.y + n,
                r[2 + c] = l.x - o,
                r[3 + c] = l.y - n,
                i = l
            }
            this.buffers[0].update()
        }
    }
    ,
    RopeGeometry.prototype.update = function() {
        0 < this.textureScale ? this.build() : this.updateVertices()
    }
    ,
    RopeGeometry);
    function RopeGeometry(e, t, i) {
        void 0 === e && (e = 200),
        void 0 === i && (i = 0);
        var o = Da.call(this, new Float32Array(4 * t.length), new Float32Array(4 * t.length), new Uint16Array(6 * (t.length - 1))) || this;
        return o.points = t,
        o._width = e,
        o.textureScale = i,
        o.build(),
        o
    }
    var Ma, xa = (__extends$1(SimpleRope, Ma = Fs),
    SimpleRope.prototype._render = function(e) {
        var t = this.geometry;
        !this.autoUpdate && t._width === this.shader.texture.height || (t._width = this.shader.texture.height,
        t.update()),
        Ma.prototype._render.call(this, e)
    }
    ,
    SimpleRope);
    function SimpleRope(e, t, i) {
        void 0 === i && (i = 0);
        var o = this
          , n = new La(e.height,t,i)
          , r = new Gs(e);
        return 0 < i && (e.baseTexture.wrapMode = ne.WRAP_MODES.REPEAT),
        (o = Ma.call(this, n, r) || this).autoUpdate = !0,
        o
    }
    var Ba, Na = (__extends$1(SimplePlane, Ba = Fs),
    SimplePlane.prototype.textureUpdated = function() {
        this._textureID = this.shader.texture._updateID;
        var e = this.geometry
          , t = this.shader.texture
          , i = t.width
          , o = t.height;
        !this.autoResize || e.width === i && e.height === o || (e.width = this.shader.texture.width,
        e.height = this.shader.texture.height,
        e.build())
    }
    ,
    Object.defineProperty(SimplePlane.prototype, "texture", {
        get: function() {
            return this.shader.texture
        },
        set: function(e) {
            this.shader.texture !== e && (this.shader.texture = e,
            this._textureID = -1,
            e.baseTexture.valid ? this.textureUpdated() : e.once("update", this.textureUpdated, this))
        },
        enumerable: !1,
        configurable: !0
    }),
    SimplePlane.prototype._render = function(e) {
        this._textureID !== this.shader.texture._updateID && this.textureUpdated(),
        Ba.prototype._render.call(this, e)
    }
    ,
    SimplePlane.prototype.destroy = function(e) {
        this.shader.texture.off("update", this.textureUpdated, this),
        Ba.prototype.destroy.call(this, e)
    }
    ,
    SimplePlane);
    function SimplePlane(e, t, i) {
        var o = this
          , n = new Oa(e.width,e.height,t,i)
          , r = new Gs(ni.WHITE);
        return (o = Ba.call(this, n, r) || this).texture = e,
        o.autoResize = !0,
        o
    }
    var Fa, ka = (__extends$1(SimpleMesh, Fa = Fs),
    Object.defineProperty(SimpleMesh.prototype, "vertices", {
        get: function() {
            return this.geometry.getBuffer("aVertexPosition").data
        },
        set: function(e) {
            this.geometry.getBuffer("aVertexPosition").data = e
        },
        enumerable: !1,
        configurable: !0
    }),
    SimpleMesh.prototype._render = function(e) {
        this.autoUpdate && this.geometry.getBuffer("aVertexPosition").update(),
        Fa.prototype._render.call(this, e)
    }
    ,
    SimpleMesh);
    function SimpleMesh(e, t, i, o, n) {
        void 0 === e && (e = ni.EMPTY);
        var r = this
          , s = new qs(t,i,o);
        s.getBuffer("aVertexPosition").static = !1;
        var a = new Gs(e);
        return (r = Fa.call(this, s, a, null, n) || this).autoUpdate = !0,
        r
    }
    var Ga, ja = (__extends$1(NineSlicePlane, Ga = Na),
    NineSlicePlane.prototype.textureUpdated = function() {
        this._textureID = this.shader.texture._updateID,
        this._refresh()
    }
    ,
    Object.defineProperty(NineSlicePlane.prototype, "vertices", {
        get: function() {
            return this.geometry.getBuffer("aVertexPosition").data
        },
        set: function(e) {
            this.geometry.getBuffer("aVertexPosition").data = e
        },
        enumerable: !1,
        configurable: !0
    }),
    NineSlicePlane.prototype.updateHorizontalVertices = function() {
        var e = this.vertices
          , t = this._getMinScale();
        e[9] = e[11] = e[13] = e[15] = this._topHeight * t,
        e[17] = e[19] = e[21] = e[23] = this._height - this._bottomHeight * t,
        e[25] = e[27] = e[29] = e[31] = this._height
    }
    ,
    NineSlicePlane.prototype.updateVerticalVertices = function() {
        var e = this.vertices
          , t = this._getMinScale();
        e[2] = e[10] = e[18] = e[26] = this._leftWidth * t,
        e[4] = e[12] = e[20] = e[28] = this._width - this._rightWidth * t,
        e[6] = e[14] = e[22] = e[30] = this._width
    }
    ,
    NineSlicePlane.prototype._getMinScale = function() {
        var e = this._leftWidth + this._rightWidth
          , t = this._width > e ? 1 : this._width / e
          , i = this._topHeight + this._bottomHeight
          , o = this._height > i ? 1 : this._height / i;
        return Math.min(t, o)
    }
    ,
    Object.defineProperty(NineSlicePlane.prototype, "width", {
        get: function() {
            return this._width
        },
        set: function(e) {
            this._width = e,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "height", {
        get: function() {
            return this._height
        },
        set: function(e) {
            this._height = e,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "leftWidth", {
        get: function() {
            return this._leftWidth
        },
        set: function(e) {
            this._leftWidth = e,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "rightWidth", {
        get: function() {
            return this._rightWidth
        },
        set: function(e) {
            this._rightWidth = e,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "topHeight", {
        get: function() {
            return this._topHeight
        },
        set: function(e) {
            this._topHeight = e,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(NineSlicePlane.prototype, "bottomHeight", {
        get: function() {
            return this._bottomHeight
        },
        set: function(e) {
            this._bottomHeight = e,
            this._refresh()
        },
        enumerable: !1,
        configurable: !0
    }),
    NineSlicePlane.prototype._refresh = function() {
        var e = this.texture
          , t = this.geometry.buffers[1].data;
        this._origWidth = e.orig.width,
        this._origHeight = e.orig.height;
        var i = 1 / this._origWidth
          , o = 1 / this._origHeight;
        t[0] = t[8] = t[16] = t[24] = 0,
        t[1] = t[3] = t[5] = t[7] = 0,
        t[6] = t[14] = t[22] = t[30] = 1,
        t[25] = t[27] = t[29] = t[31] = 1,
        t[2] = t[10] = t[18] = t[26] = i * this._leftWidth,
        t[4] = t[12] = t[20] = t[28] = 1 - i * this._rightWidth,
        t[9] = t[11] = t[13] = t[15] = o * this._topHeight,
        t[17] = t[19] = t[21] = t[23] = 1 - o * this._bottomHeight,
        this.updateHorizontalVertices(),
        this.updateVerticalVertices(),
        this.geometry.buffers[0].update(),
        this.geometry.buffers[1].update()
    }
    ,
    NineSlicePlane);
    function NineSlicePlane(e, t, i, o, n) {
        void 0 === t && (t = 10),
        void 0 === i && (i = 10),
        void 0 === o && (o = 10),
        void 0 === n && (n = 10);
        var r = Ga.call(this, ni.WHITE, 4, 4) || this;
        return r._origWidth = e.orig.width,
        r._origHeight = e.orig.height,
        r._width = r._origWidth,
        r._height = r._origHeight,
        r._leftWidth = t,
        r._rightWidth = o,
        r._topHeight = i,
        r._bottomHeight = n,
        r.texture = e,
        r
    }
    var qa = function(e, t) {
        return (qa = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                t.hasOwnProperty(i) && (e[i] = t[i])
        }
        )(e, t)
    };
    var za, Ha = (function __extends(e, t) {
        function __() {
            this.constructor = e
        }
        qa(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }(AnimatedSprite, za = as),
    AnimatedSprite.prototype.stop = function() {
        this._playing && (this._playing = !1,
        this._autoUpdate && this._isConnectedToTicker && (gt.shared.remove(this.update, this),
        this._isConnectedToTicker = !1))
    }
    ,
    AnimatedSprite.prototype.play = function() {
        this._playing || (this._playing = !0,
        this._autoUpdate && !this._isConnectedToTicker && (gt.shared.add(this.update, this, ne.UPDATE_PRIORITY.HIGH),
        this._isConnectedToTicker = !0))
    }
    ,
    AnimatedSprite.prototype.gotoAndStop = function(e) {
        this.stop();
        var t = this.currentFrame;
        this._currentTime = e,
        t !== this.currentFrame && this.updateTexture()
    }
    ,
    AnimatedSprite.prototype.gotoAndPlay = function(e) {
        var t = this.currentFrame;
        this._currentTime = e,
        t !== this.currentFrame && this.updateTexture(),
        this.play()
    }
    ,
    AnimatedSprite.prototype.update = function(e) {
        if (this._playing) {
            var t = this.animationSpeed * e
              , i = this.currentFrame;
            if (null !== this._durations) {
                var o = this._currentTime % 1 * this._durations[this.currentFrame];
                for (o += t / 60 * 1e3; o < 0; )
                    this._currentTime--,
                    o += this._durations[this.currentFrame];
                var n = Math.sign(this.animationSpeed * e);
                for (this._currentTime = Math.floor(this._currentTime); o >= this._durations[this.currentFrame]; )
                    o -= this._durations[this.currentFrame] * n,
                    this._currentTime += n;
                this._currentTime += o / this._durations[this.currentFrame]
            } else
                this._currentTime += t;
            this._currentTime < 0 && !this.loop ? (this.gotoAndStop(0),
            this.onComplete && this.onComplete()) : this._currentTime >= this._textures.length && !this.loop ? (this.gotoAndStop(this._textures.length - 1),
            this.onComplete && this.onComplete()) : i !== this.currentFrame && (this.loop && this.onLoop && (0 < this.animationSpeed && this.currentFrame < i ? this.onLoop() : this.animationSpeed < 0 && this.currentFrame > i && this.onLoop()),
            this.updateTexture())
        }
    }
    ,
    AnimatedSprite.prototype.updateTexture = function() {
        var e = this.currentFrame;
        this._previousFrame !== e && (this._previousFrame = e,
        this._texture = this._textures[e],
        this._textureID = -1,
        this._textureTrimmedID = -1,
        this._cachedTint = 16777215,
        this.uvs = this._texture._uvs.uvsFloat32,
        this.updateAnchor && this._anchor.copyFrom(this._texture.defaultAnchor),
        this.onFrameChange && this.onFrameChange(this.currentFrame))
    }
    ,
    AnimatedSprite.prototype.destroy = function(e) {
        this.stop(),
        za.prototype.destroy.call(this, e),
        this.onComplete = null,
        this.onFrameChange = null,
        this.onLoop = null
    }
    ,
    AnimatedSprite.fromFrames = function(e) {
        for (var t = [], i = 0; i < e.length; ++i)
            t.push(ni.from(e[i]));
        return new AnimatedSprite(t)
    }
    ,
    AnimatedSprite.fromImages = function(e) {
        for (var t = [], i = 0; i < e.length; ++i)
            t.push(ni.from(e[i]));
        return new AnimatedSprite(t)
    }
    ,
    Object.defineProperty(AnimatedSprite.prototype, "totalFrames", {
        get: function() {
            return this._textures.length
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "textures", {
        get: function() {
            return this._textures
        },
        set: function(e) {
            if (e[0]instanceof ni)
                this._textures = e,
                this._durations = null;
            else {
                this._textures = [],
                this._durations = [];
                for (var t = 0; t < e.length; t++)
                    this._textures.push(e[t].texture),
                    this._durations.push(e[t].time)
            }
            this._previousFrame = null,
            this.gotoAndStop(0),
            this.updateTexture()
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "currentFrame", {
        get: function() {
            var e = Math.floor(this._currentTime) % this._textures.length;
            return e < 0 && (e += this._textures.length),
            e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "playing", {
        get: function() {
            return this._playing
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(AnimatedSprite.prototype, "autoUpdate", {
        get: function() {
            return this._autoUpdate
        },
        set: function(e) {
            e !== this._autoUpdate && (this._autoUpdate = e,
            !this._autoUpdate && this._isConnectedToTicker ? (gt.shared.remove(this.update, this),
            this._isConnectedToTicker = !1) : this._autoUpdate && !this._isConnectedToTicker && this._playing && (gt.shared.add(this.update, this),
            this._isConnectedToTicker = !0))
        },
        enumerable: !1,
        configurable: !0
    }),
    AnimatedSprite);
    function AnimatedSprite(e, t) {
        void 0 === t && (t = !0);
        var i = za.call(this, e[0]instanceof ni ? e[0] : e[0].texture) || this;
        return i._textures = null,
        i._durations = null,
        i._autoUpdate = t,
        i._isConnectedToTicker = !1,
        i.animationSpeed = 1,
        i.loop = !0,
        i.updateAnchor = !1,
        i.onComplete = null,
        i.onFrameChange = null,
        i.onLoop = null,
        i._currentTime = 0,
        i._playing = !1,
        i._previousFrame = null,
        i.textures = e,
        i
    }
    Tt.add(en, hn, un, Rr, Cs, Ko, Ds, ia, kn, wr, Cr, bs, wt, Vn);
    var Ya = {
        AlphaFilter: ra,
        BlurFilter: pa,
        BlurFilterPass: da,
        ColorMatrixFilter: ma,
        DisplacementFilter: ya,
        FXAAFilter: Ca,
        NoiseFilter: ba
    };
    return ne.AbstractBatchRenderer = jo,
    ne.AbstractMultiResource = Ot,
    ne.AbstractRenderer = Ro,
    ne.AccessibilityManager = en,
    ne.AnimatedSprite = Ha,
    ne.AppLoaderPlugin = Vn,
    ne.Application = Aa,
    ne.ArrayResource = Lt,
    ne.Attribute = li,
    ne.BaseImageResource = xt,
    ne.BasePrepare = gs,
    ne.BaseRenderTexture = ei,
    ne.BaseTexture = Rt,
    ne.BatchDrawCall = No,
    ne.BatchGeometry = Ho,
    ne.BatchPluginFactory = Wo,
    ne.BatchRenderer = Ko,
    ne.BatchShaderGenerator = qo,
    ne.BatchSystem = Ui,
    ne.BatchTextureArray = Fo,
    ne.BitmapFont = Js,
    ne.BitmapFontData = Hs,
    ne.BitmapFontLoader = ia,
    ne.BitmapText = ta,
    ne.BlobResource = Mn,
    ne.Bounds = st,
    ne.BrowserAdapter = O,
    ne.Buffer = ui,
    ne.BufferResource = Ut,
    ne.CanvasResource = Nt,
    ne.Circle = He,
    ne.CompressedTextureLoader = kn,
    ne.CompressedTextureResource = Bn,
    ne.Container = pt,
    ne.ContextSystem = Ai,
    ne.CountLimiter = ys,
    ne.CubeResource = kt,
    ne.DDSLoader = wr,
    ne.DEG_TO_RAD = Ge,
    ne.DisplayObject = ct,
    ne.Ellipse = Ye,
    ne.Extract = hn,
    ne.FORMATS_TO_COMPONENTS = yr,
    ne.FillStyle = Or,
    ne.Filter = Zi,
    ne.FilterState = Ci,
    ne.FilterSystem = bi,
    ne.Framebuffer = $t,
    ne.FramebufferSystem = Oi,
    ne.GLFramebuffer = Ri,
    ne.GLProgram = yo,
    ne.GLTexture = bo,
    ne.GRAPHICS_CURVES = Pr,
    ne.Geometry = fi,
    ne.GeometrySystem = Li,
    ne.Graphics = ts,
    ne.GraphicsData = Yr,
    ne.GraphicsGeometry = Kr,
    ne.IGLUniformData = Gf,
    ne.INSTALLED = Ct,
    ne.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL = On,
    ne.ImageBitmapResource = Wt,
    ne.ImageResource = jt,
    ne.InteractionData = tn,
    ne.InteractionEvent = nn,
    ne.InteractionManager = un,
    ne.InteractionTrackingData = rn,
    ne.KTXLoader = Cr,
    ne.LineStyle = Qr,
    ne.Loader = bn,
    ne.MaskData = Mi,
    ne.MaskSystem = no,
    ne.Matrix = Je,
    ne.Mesh = Fs,
    ne.MeshBatchUvs = Ms,
    ne.MeshGeometry = qs,
    ne.MeshMaterial = Gs,
    ne.NineSlicePlane = ja,
    ne.ObjectRenderer = Vi,
    ne.ObservablePoint = Ke,
    ne.PI_2 = Fe,
    ne.ParticleContainer = br,
    ne.ParticleRenderer = Rr,
    ne.PlaneGeometry = Oa,
    ne.Point = je,
    ne.Polygon = Xe,
    ne.Prepare = Cs,
    ne.Program = Ki,
    ne.ProjectionSystem = po,
    ne.Quad = Ti,
    ne.QuadUv = yi,
    ne.RAD_TO_DEG = ke,
    ne.Rectangle = ze,
    ne.RenderTexture = si,
    ne.RenderTexturePool = ai,
    ne.RenderTextureSystem = mo,
    ne.Renderer = Lo,
    ne.ResizePlugin = Ia,
    ne.Resource = bt,
    ne.RopeGeometry = La,
    ne.RoundedRectangle = We,
    ne.Runner = vt,
    ne.SVGResource = zt,
    ne.ScissorSystem = co,
    ne.Shader = Ji,
    ne.ShaderSystem = Co,
    ne.SimpleMesh = ka,
    ne.SimplePlane = Na,
    ne.SimpleRope = xa,
    ne.Sprite = as,
    ne.SpriteMaskFilter = oo,
    ne.Spritesheet = Es,
    ne.SpritesheetLoader = bs,
    ne.State = Qi,
    ne.StateSystem = So,
    ne.StencilSystem = ho,
    ne.System = Bo,
    ne.TYPES_TO_BYTES_PER_COMPONENT = vr,
    ne.TYPES_TO_BYTES_PER_PIXEL = gr,
    ne.TemporaryDisplayObject = dt,
    ne.Text = Ts,
    ne.TextFormat = Ys,
    ne.TextMetrics = _s,
    ne.TextStyle = hs,
    ne.Texture = ni,
    ne.TextureGCSystem = Eo,
    ne.TextureLoader = Un,
    ne.TextureMatrix = to,
    ne.TextureSystem = Vo,
    ne.TextureUvs = ti,
    ne.Ticker = gt,
    ne.TickerPlugin = wt,
    ne.TilingSprite = As,
    ne.TilingSpriteRenderer = Ds,
    ne.TimeLimiter = Ss,
    ne.Transform = rt,
    ne.UniformGroup = wi,
    ne.VERSION = "6.5.9",
    ne.VideoResource = Yt,
    ne.ViewableBuffer = ko,
    ne.XMLFormat = Xs,
    ne.XMLStringFormat = Ws,
    ne.accessibleTarget = Zo,
    ne.autoDetectFormat = autoDetectFormat,
    ne.autoDetectRenderer = autoDetectRenderer,
    ne.autoDetectResource = autoDetectResource,
    ne.checkMaxIfStatementsInShader = checkMaxIfStatementsInShader,
    ne.createUBOElements = createUBOElements,
    ne.defaultFilterVertex = xo,
    ne.defaultVertex = Mo,
    ne.extensions = Tt,
    ne.filters = Ya,
    ne.generateProgram = generateProgram,
    ne.generateUniformBufferSync = generateUniformBufferSync,
    ne.getTestContext = getTestContext,
    ne.getUBOData = getUBOData,
    ne.graphicsUtils = is,
    ne.groupD8 = nt,
    ne.interactiveTarget = an,
    ne.isMobile = $,
    ne.parseDDS = parseDDS,
    ne.parseKTX = parseKTX,
    ne.resources = Jo,
    ne.settings = Z,
    ne.systems = $o,
    ne.uniformParsers = ji,
    ne.utils = Ne,
    Object.defineProperty(ne, "__esModule", {
        value: !0
    }),
    ne
}({})
  , __extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}()
  , PixiApplicationOptions = function(t) {
    function PixiApplicationOptions() {
        var e = t.call(this) || this;
        return e.height = 0,
        e.width = 0,
        e.backgroundAlpha = 0,
        e.autoDensity = !1,
        e
    }
    return __extends(PixiApplicationOptions, t),
    PixiApplicationOptions
}(EAObject)
  , UTBaseShineView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTBaseShineView() {
        var e = t.call(this) || this;
        return e.gradientColor = "rgba(255, 255, 255, 1.0)",
        e.transparent = "rgba(255, 255, 255, 0.0)",
        e.shineSpriteY = -400,
        e.shineSpriteX = 0,
        e.shineAlpha = 1,
        e.isAnimating = !1,
        e.loop = !0,
        e.tempCanvas = null,
        e
    }
    return __extends(UTBaseShineView, t),
    UTBaseShineView.prototype.dealloc = function() {
        this.stopAnimation(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTBaseShineView.prototype.getTempCanvas = function() {
        if (this.tempCanvas) {
            var e = this.tempCanvas.getContext("2d");
            e && (e.globalCompositeOperation = "source-over",
            e.clearRect(0, 0, this.tempCanvas.width, this.tempCanvas.height))
        } else
            this.tempCanvas = document.createElement("canvas");
        return this.tempCanvas
    }
    ,
    UTBaseShineView.prototype.startAnimation = function() {
        !this._isInViewport() || this.isAnimating || this.pixiApplication || (this.pixiApplicationOptions = new PixiApplicationOptions,
        this.pixiApplicationOptions.backgroundAlpha = 0,
        this.pixiApplicationOptions.autoDensity = !0,
        this.pixiApplicationOptions.resolution = window.devicePixelRatio,
        PIXI.utils.skipHello(),
        this.pixiApplication = new PIXI.Application(this.pixiApplicationOptions),
        this.shineSprite = new PIXI.Sprite(this._generateShineTexture()),
        this.pixiApplication && this.__container.appendChild(this.pixiApplication.view),
        this._animateShineTexture(),
        this.isAnimating = !0)
    }
    ,
    UTBaseShineView.prototype._generateShineTexture = function() {
        var e = this.getTempCanvas()
          , t = e.getContext("2d");
        if (e.width = 64,
        e.height = 1,
        t) {
            var i = t.createLinearGradient(0, 0, 64, 0);
            i.addColorStop(0, this.transparent),
            i.addColorStop(.4, this.gradientColor),
            i.addColorStop(.6, this.gradientColor),
            i.addColorStop(1, this.transparent),
            t.fillStyle = i,
            t.fillRect(0, 0, 64, 1)
        }
        return PIXI.Texture.from(e)
    }
    ,
    UTBaseShineView.prototype.stopAnimation = function() {
        this.pixiApplication && this.isAnimating && (this.pixiApplication.view.width = 0,
        this.pixiApplication.view.height = 0,
        this.pixiApplication.destroy(!0),
        this.isAnimating = !1,
        this.pixiApplication = null),
        this.tempCanvas && (this.tempCanvas.width = 0,
        this.tempCanvas.height = 0),
        this.tempCanvas = null
    }
    ,
    UTBaseShineView.prototype._isInViewport = function() {
        var e = this.__container.getBoundingClientRect()
          , t = window.innerHeight || document.documentElement.clientHeight
          , i = window.innerWidth || document.documentElement.clientWidth;
        return 0 <= e.bottom && 0 <= e.right && e.top <= t && e.left <= i
    }
    ,
    UTBaseShineView.prototype.updateAnimationRunState = function() {
        this._isInViewport() ? this.startAnimation() : this._isInViewport() || this.stopAnimation()
    }
    ,
    UTBaseShineView.prototype._animateShineTexture = function() {
        var e, t, i = this, o = this.getAnimationSpeed();
        this.shineSprite.position.set(this.shineSpriteX, this.shineSpriteY),
        this.shineSprite.rotation = Math.PI / 7,
        this.shineSprite.width = 64,
        this.shineSprite.height = 500,
        this.shineSprite.alpha = this.shineAlpha,
        null === (e = this.pixiApplication) || void 0 === e || e.stage.addChild(this.shineSprite);
        var n = 0;
        null === (t = this.pixiApplication) || void 0 === t || t.ticker.add(function(e) {
            i.pixiApplication && (n < 1 || i.loop) && (i.pixiApplication.resizeTo = i.__container,
            i.shineSprite.x += e * o,
            i.shineSprite.y += e * o,
            i.shineSprite.x > i.pixiApplication.view.width && i.shineSprite.y > i.pixiApplication.view.height && (i.shineSprite.x = i.shineSpriteX,
            i.shineSprite.y = i.shineSpriteY,
            n++))
        })
    }
    ,
    UTBaseShineView
}(EAView));
UTBaseShineView.prototype._generate = function _generate() {
    this._generated || (this.__container = document.createElement("div"),
    this.__root = this.__container,
    this._generated = !0)
}
,
UTBaseShineView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__container = null
}
,
UTBaseShineView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTPackAnimationShineView = function(t) {
    function UTPackAnimationShineView() {
        var e = null !== t && t.apply(this, arguments) || this;
        return e.shineAlpha = .2,
        e.gradientColor = "#FBF8DF",
        e
    }
    return __extends(UTPackAnimationShineView, t),
    UTPackAnimationShineView.prototype.getAnimationSpeed = function() {
        return this._getRandomArbitrary(2, 3)
    }
    ,
    UTPackAnimationShineView.prototype._getRandomArbitrary = function(e, t) {
        return Math.random() * (t - e) + e
    }
    ,
    UTPackAnimationShineView
}(UTBaseShineView)
  , UTPackGraphicView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTPackGraphicView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTPackGraphicView, e),
    UTPackGraphicView.prototype.init = function() {
        e.prototype.init.call(this),
        this.showRecommendedLabel(!1),
        this.__recoText.textContent = services.Localization.localize("store.sale.reco"),
        this._packTradableImage.src = "images/Items/pack-tradable.png",
        this._packTradableImage.setDisplay(!1)
    }
    ,
    UTPackGraphicView.prototype.getBackgroundImageView = function() {
        return this._packBackgroundImage
    }
    ,
    UTPackGraphicView.prototype.getPackShine = function() {
        return this._packShine
    }
    ,
    UTPackGraphicView.prototype.showRecommendedLabel = function(e) {
        DOMKit.toggleDisplayStyle(this.__recoLabel, e)
    }
    ,
    UTPackGraphicView.prototype.setPackBackground = function(e) {
        var t = this;
        this._packBackgroundImage.onerror = function() {
            t._packBackgroundImage.onerror = null,
            t._packBackgroundImage.src = AssetLocationUtils.getPackBackgroundImageUri(PurchasePackTier.GENERIC)
        }
        ,
        this._packBackgroundImage.src = AssetLocationUtils.getPackBackgroundImageUri(e)
    }
    ,
    UTPackGraphicView.prototype.setTradable = function(e) {
        this._packTradableImage.setDisplay(e)
    }
    ,
    UTPackGraphicView.prototype.setPromo = function(e, t) {
        if (DOMKit.toggleClass(this.__promoText, "limited", t),
        t)
            this.__promoText.textContent = services.Localization.localize("store.sale.limited"),
            DOMKit.toggleDisplayStyle(this.__promoText, !0);
        else
            switch (e) {
            case PurchaseDealType.DEAL:
                this.__promoText.textContent = services.Localization.localize("store.sale.deal"),
                DOMKit.toggleDisplayStyle(this.__promoText, !0);
                break;
            case PurchaseDealType.PROMO:
                this.__promoText.textContent = services.Localization.localize("store.sale.promo"),
                DOMKit.toggleDisplayStyle(this.__promoText, !0);
                break;
            case PurchaseDealType.BESTDEAL:
                this.__promoText.textContent = services.Localization.localize("store.sale.bestdeal"),
                DOMKit.toggleDisplayStyle(this.__promoText, !0);
                break;
            default:
                this.__promoText.textContent = "",
                DOMKit.toggleDisplayStyle(this.__promoText, !1)
            }
    }
    ,
    UTPackGraphicView
}(EAView));
UTPackGraphicView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("basePack"),
        e.classList.add("ut-pack-graphic-view"),
        this._packBackgroundImage = new EAImageView,
        this._packBackgroundImage.getRootElement().classList.add("ut-pack-graphic-view--background"),
        e.appendChild(this._packBackgroundImage.getRootElement()),
        this._packTradableImage = new EAImageView,
        this._packTradableImage.getRootElement().classList.add("ut-pack-graphic-view--tradable"),
        e.appendChild(this._packTradableImage.getRootElement()),
        this._packShine = new UTPackAnimationShineView,
        this._packShine.getRootElement().classList.add("ut-pack-graphic-view--shine"),
        e.appendChild(this._packShine.getRootElement()),
        this.__recoLabel = document.createElement("div"),
        this.__recoLabel.classList.add("ut-pack-graphic-view--reco"),
        this.__recoText = document.createElement("span"),
        this.__recoLabel.appendChild(this.__recoText),
        e.appendChild(this.__recoLabel),
        this.__promoText = document.createElement("div"),
        this.__promoText.classList.add("ut-pack-graphic-view--promo"),
        e.appendChild(this.__promoText),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPackGraphicView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._packBackgroundImage.destroy(),
    this._packTradableImage.destroy(),
    this._packShine.destroy(),
    this.__recoLabel = null,
    this.__recoText = null,
    this.__promoText = null
}
,
UTPackGraphicView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var BaseRewardsCarouselView = function(t) {
    function BaseRewardsCarouselView() {
        var e = t.call(this) || this;
        return e.afterChangeCb = null,
        e.rewardsCount = 0,
        e.visibleItems = 1,
        e
    }
    return __extends(BaseRewardsCarouselView, t),
    BaseRewardsCarouselView.prototype.dealloc = function() {
        this.afterChangeCb = null,
        this.reset(),
        t.prototype.dealloc.call(this)
    }
    ,
    BaseRewardsCarouselView.prototype.reset = function() {
        this._tnsCarousel.teardown(this.getRootElement()),
        this.__tapAreaLeft = this.getRootElement().getElementsByClassName("tapLeft")[0],
        this.__tapAreaRight = this.getRootElement().getElementsByClassName("tapRight")[0]
    }
    ,
    BaseRewardsCarouselView.prototype.setNumVisibleItems = function(e) {
        this.visibleItems = e
    }
    ,
    BaseRewardsCarouselView.prototype.setAfterChangeFunction = function(e) {
        this.afterChangeCb = e
    }
    ,
    BaseRewardsCarouselView.prototype.isOn = function() {
        return this._tnsCarousel.isOn()
    }
    ,
    BaseRewardsCarouselView.prototype.getCurrentSlide = function() {
        return this._tnsCarousel.getCurrentSlide()
    }
    ,
    BaseRewardsCarouselView.prototype.getTapAreaRight = function() {
        return this.__tapAreaRight
    }
    ,
    BaseRewardsCarouselView.prototype.getTapAreaLeft = function() {
        return this.__tapAreaLeft
    }
    ,
    BaseRewardsCarouselView.prototype.preSetup = function(e) {
        this._tnsCarousel.emptyCarousel(),
        this.toggleLeftArrow(!1),
        this.toggleRightArrow(!1),
        this.rewardsCount = e
    }
    ,
    BaseRewardsCarouselView.prototype.instantiateCarousel = function() {
        this.__tapAreaLeft && this.toggleLeftArrow(!1),
        this.__tapAreaRight && this.toggleRightArrow(!0),
        this._tnsCarousel.setup(this.generateTNSPropertiesDTO()),
        this._tnsCarousel.afterChange(this.afterChange.bind(this))
    }
    ,
    BaseRewardsCarouselView.prototype.generateTNSPropertiesDTO = function() {
        var e = new TNSPropertiesDTO;
        return e.nav = 1 === this.visibleItems,
        e.speed = 600,
        e.prevButton = this.__tapAreaLeft,
        e.nextButton = this.__tapAreaRight,
        e.items = this.visibleItems,
        e.container = this._tnsCarousel.getRootElement(),
        e
    }
    ,
    BaseRewardsCarouselView.prototype.afterChange = function() {
        this.toggleArrows(this.getCurrentSlide()),
        this.afterChangeCb && this.afterChangeCb()
    }
    ,
    BaseRewardsCarouselView.prototype.toggleArrows = function(e) {
        var t = 0 === e
          , i = !1;
        i = 1 === this.visibleItems ? e === this.rewardsCount - 1 : e >= this.rewardsCount - this.visibleItems,
        this.toggleLeftArrow(!t),
        this.toggleRightArrow(!i)
    }
    ,
    BaseRewardsCarouselView.prototype.toggleLeftArrow = function(e) {
        this.__tapAreaLeft.style.display = e ? "" : "none",
        this.__tapAreaLeft.style.opacity = e ? "1" : "0",
        DOMKit.toggleClass(this.__tapAreaLeft, "disabled", !e)
    }
    ,
    BaseRewardsCarouselView.prototype.toggleRightArrow = function(e) {
        this.__tapAreaRight.style.display = e ? "" : "none",
        this.__tapAreaRight.style.opacity = e ? "1" : "0",
        DOMKit.toggleClass(this.__tapAreaRight, "disabled", !e)
    }
    ,
    BaseRewardsCarouselView
}(EAView)
  , UTRewardsCarouselView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTRewardsCarouselView() {
        var e = t.call(this) || this;
        return e.mobileTitle = "",
        e.packs = [],
        e.playerItems = [],
        e
    }
    return __extends(UTRewardsCarouselView, t),
    UTRewardsCarouselView.prototype.dealloc = function() {
        this.playerItems.forEach(function(e) {
            return e.dealloc()
        }),
        this.packs.forEach(function(e) {
            return e.dealloc()
        }),
        this.playerItems = [],
        this.packs = [],
        t.prototype.dealloc.call(this)
    }
    ,
    UTRewardsCarouselView.prototype.setMobileTitle = function(e) {
        this.mobileTitle = e
    }
    ,
    UTRewardsCarouselView.prototype.setupRewards = function(e) {
        var d = this;
        this.preSetup(e.length);
        var h = document.createElement("p");
        DOMKit.addClass(h, "textField"),
        e.forEach(function(e) {
            var t, i, o;
            o = GameRewardStyle.REWARD;
            var n = document.createElement("p")
              , r = []
              , s = services.Localization
              , a = UTLocalizationUtil.buildRewardString(e, s);
            if (DOMKit.addClass(n, "textField"),
            isPhone() && 0 < d.mobileTitle.length && (h.textContent = d.mobileTitle,
            r.push(h)),
            e.isStadiumSlotUnlock)
                o += " " + GameRewardStyle.MYSTADIUM_SLOT,
                n.textContent = a;
            else if (e.isCoin)
                o += " " + GameRewardStyle.COIN,
                n.textContent = s.localizeNumber(e.value);
            else if (e.item)
                if (e.item.isCoinBoost() && (o += " " + GameRewardStyle.COIN_BOOST,
                n.textContent = s.localize("FUT_SCMP_COIN_BOOST_" + (null !== (t = e.item.definitionId) && void 0 !== t ? t : 0))),
                e.item.isCoinBoost())
                    o += " " + GameRewardStyle.COIN_BOOST,
                    n.textContent = s.localize("FUT_SCMP_COIN_BOOST_" + (null !== (i = e.item.definitionId) && void 0 !== i ? i : 0));
                else {
                    var l = d.generateItemView(e.item, !1);
                    r.push(l.getRootElement()),
                    d.playerItems.push(l),
                    n.textContent = a
                }
            else if (e.isPack) {
                var c = d.generatePackGraphicView(e);
                r.push(c.getRootElement()),
                d.packs.push(c),
                n.textContent = a
            } else if (e.isChampionQualificationPoints || e.isXP) {
                var u = s.localizeNumber(e.value);
                o += " " + (e.isXP ? GameRewardStyle.XP : GameRewardStyle.CHAMPION_POINTS),
                n.textContent = u + " " + a
            } else
                e.isChampionStageEntry && (o += " " + GameRewardStyle.CHAMPION_STAGE_ENTRY,
                n.textContent = a);
            r.push(n),
            d._tnsCarousel.appendElem(r, o)
        }, this),
        isPhone() && DOMKit.addClass(h, GameRewardStyle.TITLE),
        1 < this.rewardsCount && this.instantiateCarousel()
    }
    ,
    UTRewardsCarouselView.prototype.generateItemView = function(e, t) {
        var i = t ? factories.ItemView.createSmallItem(e) : factories.ItemView.createLargeItem(e);
        return i.init(),
        i.supportSecondaryViews = !1,
        i.render(e),
        i
    }
    ,
    UTRewardsCarouselView.prototype.generatePackGraphicView = function(e) {
        var t = new UTPackGraphicView;
        return t.init(),
        t.setPackBackground(e.assetId),
        t.setPromo(PurchaseDealType.REGULAR),
        t
    }
    ,
    UTRewardsCarouselView
}(BaseRewardsCarouselView));
UTRewardsCarouselView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("section");
        e.classList.add("rewards-carousel"),
        this.__tapAreaLeft = document.createElement("a"),
        this.__tapAreaLeft.classList.add("btn-flat"),
        this.__tapAreaLeft.classList.add("tapLeft"),
        e.appendChild(this.__tapAreaLeft),
        this._tnsCarousel = new TNSContainerView,
        this._tnsCarousel.getRootElement().classList.add("rewards-slider-container"),
        e.appendChild(this._tnsCarousel.getRootElement()),
        this.__tapAreaRight = document.createElement("a"),
        this.__tapAreaRight.classList.add("btn-flat"),
        this.__tapAreaRight.classList.add("tapRight"),
        e.appendChild(this.__tapAreaRight),
        this.__root = e,
        this._generated = !0
    }
}
,
UTRewardsCarouselView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tapAreaLeft = null,
    this._tnsCarousel.destroy(),
    this.__tapAreaRight = null
}
,
UTRewardsCarouselView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTGameRewardsView = function(e) {
    function UTGameRewardsView() {
        return e.call(this) || this
    }
    return __extends(UTGameRewardsView, e),
    UTGameRewardsView.prototype.init = function() {
        e.prototype.init.call(this),
        this._actionBtn.init(),
        this._actionBtn.addTarget(this, this.onButtonTapped, EventType.TAP)
    }
    ,
    UTGameRewardsView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTGameRewardsView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTGameRewardsView.prototype.setButtonText = function(e) {
        this._actionBtn.setText(e)
    }
    ,
    UTGameRewardsView.prototype.setupRewardsCarousel = function(e) {
        0 < e.length && this._rewardsCarousel.setupRewards(e)
    }
    ,
    UTGameRewardsView.prototype.setSbcChallenge = function(e) {
        this.setTitle(e.name),
        this.setDescription(e.description),
        this.setButtonText(services.Localization.localize("sbc.rewards.claim"))
    }
    ,
    UTGameRewardsView.prototype.setSbcSet = function(e) {
        this.setTitle(e.name),
        this.setDescription(e.description),
        this.setButtonText(services.Localization.localize("sbc.rewards.claim"))
    }
    ,
    UTGameRewardsView.prototype.resetRewardsCarousel = function() {
        this._rewardsCarousel.reset()
    }
    ,
    UTGameRewardsView.prototype.onButtonTapped = function(e, t, i) {
        this._triggerActions(EventType.TAP)
    }
    ,
    UTGameRewardsView
}(EATargetActionView);
UTGameRewardsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("game-rewards-view");
        var t = document.createElement("header");
        this.__title = document.createElement("h1"),
        t.appendChild(this.__title),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("content-container"),
        this.__description = document.createElement("div"),
        this.__description.classList.add("description"),
        i.appendChild(this.__description);
        var o = document.createElement("section");
        o.classList.add("rewards-container"),
        this._rewardsCarousel = new UTRewardsCarouselView,
        o.appendChild(this._rewardsCarousel.getRootElement()),
        i.appendChild(o),
        e.appendChild(i);
        var n = document.createElement("footer");
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(n),
        this.__root = e,
        this._generated = !0
    }
}
,
UTGameRewardsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__description = null,
    this._rewardsCarousel.destroy(),
    this._actionBtn.destroy()
}
,
UTGameRewardsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTGameRewardsViewController = function(i) {
    function UTGameRewardsViewController(e) {
        var t = i.call(this) || this;
        return t.hasChampionsQualificationPoints = !1,
        t.hasCoinsReward = !1,
        t.hasItemReward = !1,
        t.hasPackReward = !1,
        t.rewards = e,
        t.rewardsCarouselSetup = !1,
        t
    }
    return __extends(UTGameRewardsViewController, i),
    UTGameRewardsViewController.prototype.checkRewards = function(e) {
        var t = this;
        e.forEach(function(e) {
            t.hasCoinsReward = t.hasCoinsReward || e.isCoin,
            t.hasItemReward = t.hasItemReward || e.isItem,
            t.hasPackReward = t.hasPackReward || e.isPack,
            t.hasChampionsQualificationPoints = t.hasChampionsQualificationPoints || e.isChampionQualificationPoints,
            t.hasXpReward = t.hasXpReward || e.isXP
        })
    }
    ,
    UTGameRewardsViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.getView().addTarget(this, this.onButtonTapped, EventType.TAP)
    }
    ,
    UTGameRewardsViewController.prototype.dealloc = function() {
        this.rewards = [],
        i.prototype.dealloc.call(this)
    }
    ,
    UTGameRewardsViewController.prototype._getViewInstanceFromData = function() {
        return new UTGameRewardsView
    }
    ,
    UTGameRewardsViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this),
        !this.rewardsCarouselSetup && 0 < this.rewards.length && (this.getView().setupRewardsCarousel(this.rewards),
        this.checkRewards(this.rewards),
        this.rewardsCarouselSetup = !0)
    }
    ,
    UTGameRewardsViewController.prototype.setTitle = function(e) {
        this.getView().setTitle(e)
    }
    ,
    UTGameRewardsViewController.prototype.setDescription = function(e) {
        this.getView().setDescription(e)
    }
    ,
    UTGameRewardsViewController.prototype.setButtonText = function(e) {
        this.getView().setButtonText(e)
    }
    ,
    UTGameRewardsViewController.prototype.onButtonTapped = function(e, t, i) {
        if (this.closePopup(),
        this.hasItemReward) {
            services.Notification.queue([services.Localization.localize("notification.item.added"), UINotificationType.POSITIVE]),
            repositories.Item.setDirty(ItemPile.PURCHASED);
            var o = this.rewards.reduce(function(e, t) {
                return t.item && e.push(t.item),
                e
            }, []);
            getDefaultDispatcher().notify(AppNotification.UNASSIGNED_ITEM_ADDED, this, {
                items: o
            })
        }
        if (this.hasPackReward) {
            services.Notification.queue([services.Localization.localize("notification.pack.added"), UINotificationType.POSITIVE]);
            var n = services.User.getUser();
            n && n.incrementNumUnopenedPacks()
        }
        this.hasCoinsReward && (services.Notification.queue([services.Localization.localize("notification.coins.added"), UINotificationType.POSITIVE]),
        services.User.requestCurrencies()),
        this.hasChampionsQualificationPoints && services.Notification.queue([services.Localization.localize("notification.championsPoints.added"), UINotificationType.POSITIVE]),
        this.hasXpReward && (services.Notification.queue([services.Localization.localize("notification.xp.added"), UINotificationType.POSITIVE]),
        services.Objectives.reset())
    }
    ,
    UTGameRewardsViewController.prototype.handleKeyUpEvent = function(e) {
        e.key !== KeyboardKey.ESCAPE && e.key !== KeyboardKey.MS_ESCAPE && e.key !== KeyboardKey.ENTER || this.onExit.notify(enums.UIDialogOptions.OK)
    }
    ,
    UTGameRewardsViewController
}(BasePopupViewController)
  , UTCompanionCarouselItemView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTCompanionCarouselItemView() {
        var e = t.call(this) || this;
        return e.item = null,
        e.itemView = null,
        e
    }
    return __extends(UTCompanionCarouselItemView, t),
    UTCompanionCarouselItemView.prototype.init = function() {
        t.prototype.init.call(this),
        this._btnCancel.init(),
        this._btnCancel.setVisibility(!1),
        this._btnCancel.addTarget(this, this.onCancelButtonSelected, EventType.TAP)
    }
    ,
    UTCompanionCarouselItemView.prototype.createItem = function(e) {
        var t;
        JSUtils.isValid(this.itemView) && (DebugUtils.Assert(!1, "Expected an invalid item view when creating an item."),
        null === (t = this.itemView) || void 0 === t || t.dealloc()),
        this.item = e,
        this.itemView = factories.ItemView.createLargeItem(e),
        this.itemView.init(),
        this.itemView.render(e),
        this.addSubview(this.itemView),
        this.layoutSubviews()
    }
    ,
    UTCompanionCarouselItemView.prototype.setDataIndex = function(e) {
        this.getRootElement().setAttribute("data-index", e.toString())
    }
    ,
    UTCompanionCarouselItemView.prototype.onCancelButtonSelected = function() {
        this.isInteractionEnabled() && (this._triggerActions(UTPlayerPicksView.Event.CANCEL_SELECTION, {
            item: this.item
        }),
        this.setSelected(!1))
    }
    ,
    UTCompanionCarouselItemView.prototype.setSelected = function(e) {
        this._btnCancel.setInteractionState(e),
        this._btnCancel.setVisibility(e)
    }
    ,
    UTCompanionCarouselItemView.prototype.setActive = function(e) {
        this.toggleClass(enums.UIState.ACTIVE, e)
    }
    ,
    UTCompanionCarouselItemView
}(EATargetActionView));
UTCompanionCarouselItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-companion-carousel-item-view"),
        this._btnCancel = new UTImageButtonControl,
        this._btnCancel.getRootElement().classList.add("companion-carousel-item--button--unselect"),
        this._btnCancel.getRootElement().classList.add("exit-btn-item"),
        e.appendChild(this._btnCancel.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTCompanionCarouselItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._btnCancel.destroy()
}
,
UTCompanionCarouselItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTPlayerPickOptionView = function(t) {
    function UTPlayerPickOptionView() {
        var e = t.call(this) || this;
        return e.itemView = null,
        e
    }
    return __extends(UTPlayerPickOptionView, t),
    UTPlayerPickOptionView.prototype.init = function() {
        t.prototype.init.call(this)
    }
    ,
    UTPlayerPickOptionView.prototype.dealloc = function() {
        var e;
        null === (e = this.itemView) || void 0 === e || e.dealloc(),
        this.itemView = null,
        t.prototype.dealloc.call(this)
    }
    ,
    UTPlayerPickOptionView.prototype.getItemView = function() {
        return this.itemView
    }
    ,
    UTPlayerPickOptionView.prototype.setSelected = function(e) {
        DOMKit.toggleClass(this.__optionContainer, enums.UIState.SELECTED, e)
    }
    ,
    UTPlayerPickOptionView.prototype.createItem = function(e, t) {
        var i;
        JSUtils.isValid(this.itemView) && (null === (i = this.itemView) || void 0 === i || i.dealloc()),
        this.itemView = t ? factories.ItemView.createSmallItem(e) : factories.ItemView.createLargeItem(e),
        this.itemView.init(),
        this.itemView.render(e),
        this.addSubview(this.itemView, this.__optionContainer),
        DOMKit.addClass(this.__optionContainer, "item-selected-checkmark"),
        this.layoutSubviews()
    }
    ,
    UTPlayerPickOptionView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTPlayerPickOptionView
}(EATargetActionView);
UTPlayerPickOptionView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-player-pick-option-view"),
        this.__optionContainer = document.createElement("div"),
        e.appendChild(this.__optionContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerPickOptionView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__optionContainer = null
}
,
UTPlayerPickOptionView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTCompanionCarouselItemContainerView = function(t) {
    function UTCompanionCarouselItemContainerView() {
        var e = t.call(this) || this;
        return e.carouselItems = [],
        e
    }
    return __extends(UTCompanionCarouselItemContainerView, t),
    UTCompanionCarouselItemContainerView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this.toggleLeftArrow(!1);
        var e = isWeb() ? 0 : 100;
        this.observer = new IntersectionObserver(JSUtils.debounce(this.handleIntersectionEvent.bind(this), e),{
            root: this.__carouselItemsContainer,
            rootMargin: "0% -50% 0% -50%"
        })
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.dealloc = function() {
        this.observer.disconnect(),
        this.carouselItems.forEach(function(e) {
            return e.dealloc()
        }),
        this.carouselItems = [],
        t.prototype.dealloc.call(this)
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.handleIntersectionEvent = function(e) {
        var i = this;
        e.forEach(function(e) {
            if (e.isIntersecting) {
                var t = Number(e.target.getAttribute("data-index"));
                JSUtils.isNumber(t) && (isPhone() || i.updatePrevNextState(t),
                i._triggerActions(UTPlayerPicksView.Event.CAROUSEL_SCROLLED, {
                    index: t
                }))
            }
        })
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.setCarouselItems = function(e) {
        var t = this;
        this.carouselItems = e,
        this.carouselItems.forEach(function(e) {
            return t.addSubview(e, t.__carouselItemsContainer)
        }),
        this.layoutSubviews(),
        this.__carouselItemsContainer.querySelectorAll(".ut-companion-carousel-item-view").forEach(function(e) {
            return t.observer.observe(e)
        })
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.setSelectedStateByIndex = function(e, t) {
        var i = this.carouselItems[e];
        null == i || i.setSelected(t)
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.setActiveIndexState = function(i) {
        this.carouselItems.forEach(function(e, t) {
            e.setActive(t === i)
        })
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.hideCarouselArrows = function() {
        this.toggleLeftArrow(!1),
        this.toggleRightArrow(!1)
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.toggleRightArrow = function(e) {
        DOMKit.toggleClass(this.__btnNext, "show", e)
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.toggleLeftArrow = function(e) {
        DOMKit.toggleClass(this.__btnPrev, "show", e)
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.updatePrevNextState = function(e) {
        var t = 0 < e
          , i = e < this.carouselItems.length - 1;
        this.toggleLeftArrow(t),
        this.toggleRightArrow(i)
    }
    ,
    UTCompanionCarouselItemContainerView.prototype.focusCarousel = function() {
        this.__carouselItemsContainer.focus({
            preventScroll: !0
        })
    }
    ,
    UTCompanionCarouselItemContainerView.prototype._tapDetected = function(e) {
        var t = "rtl" === document.documentElement.dir;
        e.target === this.__btnPrev ? t ? this.__carouselItemsContainer.scrollTo({
            left: this.__carouselItemsContainer.scrollLeft + 144,
            behavior: "smooth"
        }) : this.__carouselItemsContainer.scrollTo({
            left: this.__carouselItemsContainer.scrollLeft - 144,
            behavior: "smooth"
        }) : e.target === this.__btnNext && (t ? this.__carouselItemsContainer.scrollTo({
            left: this.__carouselItemsContainer.scrollLeft - 144,
            behavior: "smooth"
        }) : this.__carouselItemsContainer.scrollTo({
            left: this.__carouselItemsContainer.scrollLeft + 144,
            behavior: "smooth"
        })),
        this.focusCarousel()
    }
    ,
    UTCompanionCarouselItemContainerView
}(EATargetActionView);
UTCompanionCarouselItemContainerView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-companion-carousel-item-container-view");
        var t = document.createElement("div");
        t.classList.add("target-top"),
        t.classList.add("target"),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("target-bottom"),
        i.classList.add("target"),
        e.appendChild(i),
        this.__btnPrev = document.createElement("a"),
        this.__btnPrev.classList.add("tapLeft"),
        e.appendChild(this.__btnPrev),
        this.__carouselItemsContainer = document.createElement("div"),
        this.__carouselItemsContainer.setAttribute("tabindex", "0"),
        this.__carouselItemsContainer.classList.add("item-container"),
        e.appendChild(this.__carouselItemsContainer),
        this.__btnNext = document.createElement("a"),
        this.__btnNext.classList.add("tapRight"),
        e.appendChild(this.__btnNext),
        this.__root = e,
        this._generated = !0
    }
}
,
UTCompanionCarouselItemContainerView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__btnPrev = null,
    this.__carouselItemsContainer = null,
    this.__btnNext = null
}
,
UTCompanionCarouselItemContainerView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTPlayerPicksView = function(t) {
    function UTPlayerPicksView() {
        var e = t.call(this) || this;
        return e.playerPickViews = [],
        e
    }
    return __extends(UTPlayerPicksView, t),
    UTPlayerPicksView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this.__title.textContent = e.localize("playerpicks.modal.title.multiple"),
        this.setDescription(e.localize("playerpicks.modal.description.multiple")),
        this._itemInfoSwitchBtn.init(),
        this._itemInfoSwitchBtn.setInteractionState(!0),
        this._exitBtn.init(),
        this._exitBtn.addTarget(this, this.onExitTapped, EventType.TAP),
        this._selectBtn.init(),
        this._selectBtn.setInteractionState(!1),
        this._selectBtn.setText(e.localize("common.dialog.select")),
        this._selectBtn.addTarget(this, this.eSelectButtonTapped, EventType.TAP),
        this._continueBtn.init(),
        this._continueBtn.setInteractionState(!1),
        this._continueBtn.setText(e.localize("common.dialog.continue")),
        this._continueBtn.addTarget(this, this.eContinueButtonTapped, EventType.TAP),
        this._backBtn.init(),
        this._backBtn.setText(e.localize("common.dialog.back")),
        this._backBtn.addTarget(this, this.eBackButtonTapped, EventType.TAP),
        this._confirmBtn.init(),
        this._confirmBtn.setText(e.localize("common.dialog.confirm")),
        this._confirmBtn.addTarget(this, this.eConfirmButtonTapped, EventType.TAP),
        this._carouselItemsContainer.init(),
        this._carouselItemsContainer.addTarget(this, this.bubbleEvent, UTPlayerPicksView.Event.CAROUSEL_SCROLLED),
        isPhone() && this._carouselItemsContainer.hideCarouselArrows(),
        this.setOwnershipDescription(e.localize("playerpicks.modal.option.owned")),
        this.setItemSelectedDescription(e.localize("playerpicks.modal.option.selected")),
        this.setTitle(e.localize("playerpicks.modal.title.multiple")),
        this.setDescription(e.localize("playerpicks.modal.description.multiple"))
    }
    ,
    UTPlayerPicksView.prototype.dealloc = function() {
        this.playerPickViews.forEach(function(e) {
            e.dealloc()
        }, this),
        this._exitBtn.removeTarget(this, this.onExitTapped, EventType.TAP),
        this._selectBtn.removeTarget(this, this.eSelectButtonTapped, EventType.TAP),
        this._continueBtn.removeTarget(this, this.eContinueButtonTapped, EventType.TAP),
        this._backBtn.removeTarget(this, this.eBackButtonTapped, EventType.TAP),
        this._confirmBtn.removeTarget(this, this.eConfirmButtonTapped, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTPlayerPicksView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTPlayerPicksView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTPlayerPicksView.prototype.setOwnershipDescription = function(e) {
        this.__ownershipDescription.textContent = e
    }
    ,
    UTPlayerPicksView.prototype.setItemSelectedDescription = function(e) {
        this.__itemSelectedDescription.textContent = e
    }
    ,
    UTPlayerPicksView.prototype.setCarouselItems = function(e) {
        var n = this
          , r = [];
        e.forEach(function(e, t) {
            var i = new UTCompanionCarouselItemView;
            i.init(),
            i.createItem(e),
            i.setInteractionState(!0),
            i.setDataIndex(t),
            i.addTarget(n, n.handleCancelSelection, UTPlayerPicksView.Event.CANCEL_SELECTION),
            r.push(i);
            var o = document.createElement("li");
            DOMKit.addClass(o, "carousel-indicator-dot"),
            o.setAttribute("data-index", t.toString()),
            n.__carouselIndicatorDots.appendChild(o)
        }, this),
        this._carouselItemsContainer.setCarouselItems(r),
        this.layoutSubviews(),
        this.setActiveIndexState(0)
    }
    ,
    UTPlayerPicksView.prototype.renderSelectedPicks = function(e) {
        var i = this;
        this.clearPlayersPickViews();
        var o = isPhone();
        e.forEach(function(e) {
            var t = new UTPlayerPickOptionView;
            t.init(),
            t.createItem(e, o),
            t.setInteractionState(!0),
            i.playerPickViews.push(t),
            i.addSubview(t, i.__gridItems),
            i.layoutSubviews()
        }, this)
    }
    ,
    UTPlayerPicksView.prototype.clearPlayersPickViews = function() {
        this.playerPickViews.forEach(function(e) {
            e.dealloc()
        }, this),
        this.playerPickViews = []
    }
    ,
    UTPlayerPicksView.prototype.carouselFocus = function() {
        this._carouselItemsContainer.focusCarousel()
    }
    ,
    UTPlayerPicksView.prototype.toggleSelectButton = function(e) {
        this._selectBtn.setDisplay(e),
        this._selectBtn.setInteractionState(e)
    }
    ,
    UTPlayerPicksView.prototype.toggleConfirmButton = function(e) {
        this._confirmBtn.setDisplay(e),
        this._confirmBtn.setInteractionState(e)
    }
    ,
    UTPlayerPicksView.prototype.toggleBackButton = function(e) {
        this._backBtn.setDisplay(e)
    }
    ,
    UTPlayerPicksView.prototype.toggleContinueButton = function(e) {
        this._continueBtn.setDisplay(e)
    }
    ,
    UTPlayerPicksView.prototype.toggleChooseContainer = function(e) {
        this.__chooseContainer.style.display = e ? "block" : "none"
    }
    ,
    UTPlayerPicksView.prototype.toggleChosenContainer = function(e) {
        this.__chosenContainer.style.display = e ? "block" : "none"
    }
    ,
    UTPlayerPicksView.prototype.toggleSelectedDescription = function(e) {
        this.__itemSelectedDescription.style.display = e ? "block" : "none"
    }
    ,
    UTPlayerPicksView.prototype.setConfirmButtonInteractionState = function(e) {
        this._confirmBtn.setInteractionState(e)
    }
    ,
    UTPlayerPicksView.prototype.setContinueButtonInteractionState = function(e) {
        this._continueBtn.setInteractionState(e)
    }
    ,
    UTPlayerPicksView.prototype.onExitTapped = function(e, t, i) {
        this._triggerActions(UTPlayerPicksView.Event.EXIT)
    }
    ,
    UTPlayerPicksView.prototype.eSelectButtonTapped = function() {
        this._triggerActions(UTPlayerPicksView.Event.SELECT_CURRENT_PICK),
        this.carouselFocus()
    }
    ,
    UTPlayerPicksView.prototype.setSelectedCarouselItem = function(e) {
        this._carouselItemsContainer.setSelectedStateByIndex(e, !0)
    }
    ,
    UTPlayerPicksView.prototype.deselectCarouselItemByIndex = function(e) {
        this._carouselItemsContainer.setSelectedStateByIndex(e, !1)
    }
    ,
    UTPlayerPicksView.prototype.eContinueButtonTapped = function() {
        this._triggerActions(UTPlayerPicksView.Event.CONTINUE)
    }
    ,
    UTPlayerPicksView.prototype.eBackButtonTapped = function() {
        this._triggerActions(UTPlayerPicksView.Event.BACK)
    }
    ,
    UTPlayerPicksView.prototype.eConfirmButtonTapped = function() {
        this._triggerActions(UTPlayerPicksView.Event.CONFIRM_PICK)
    }
    ,
    UTPlayerPicksView.prototype.setActiveIndexState = function(e) {
        var t = this.__carouselIndicatorDots.children[e];
        DOMKit.addClass(t, "active"),
        this._carouselItemsContainer.setActiveIndexState(e)
    }
    ,
    UTPlayerPicksView.prototype.removeActiveIndexState = function() {
        DOMKit.findElements(this.__carouselIndicatorDots, ".carousel-indicator-dot").forEach(function(e) {
            DOMKit.removeClass(e, "active")
        })
    }
    ,
    UTPlayerPicksView.prototype.setSelectedCounterText = function(e, t) {
        this.__selectedCounter.textContent = services.Localization.localize("common.fraction", [e.toString(), t.toString()])
    }
    ,
    UTPlayerPicksView.prototype.toggleSelectedTextDisplay = function(e) {
        DOMKit.toggleClass(this.__itemSelectedDescription, "selected", e)
    }
    ,
    UTPlayerPicksView.prototype.updateItemStateText = function(e, t) {
        DOMKit.toggleClass(this.__ownershipDescription, "owned", e),
        DOMKit.toggleClass(this.__ownershipDescription, "untradeable", t)
    }
    ,
    UTPlayerPicksView.prototype.getItemInfoSwitchButton = function() {
        return this._itemInfoSwitchBtn
    }
    ,
    UTPlayerPicksView.prototype.handleCancelSelection = function(e, t, i) {
        this._triggerActions(UTPlayerPicksView.Event.CANCEL_SELECTION, {
            item: i.item
        })
    }
    ,
    UTPlayerPicksView.prototype.bubbleEvent = function(e, t, i) {
        this._triggerActions(t, i)
    }
    ,
    UTPlayerPicksView.Event = Object.freeze({
        BACK: "UTPlayerPicksView.Event.BACK",
        CANCEL_SELECTION: "UTPlayerPicksView.Event.CANCEL_SELECTION",
        CAROUSEL_SCROLLED: "UTPlayerPicksView.Event.CAROUSEL_SCROLLED",
        CONFIRM_PICK: "UTPlayerPicksView.Event.CONFIRM_PICK",
        CONTINUE: "UTPlayerPicksView.Event.CONTINUE",
        EXIT: "UTPlayerPicksView.Event.EXIT",
        SELECT_CURRENT_PICK: "UTPlayerPicksView.Event.SELECT_CURRENT_PICK"
    }),
    UTPlayerPicksView
}(EATargetActionView);
UTPlayerPicksView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-player-picks-view");
        var t = document.createElement("header");
        this._itemInfoSwitchBtn = new UTItemInfoChangeButtonControl,
        this._itemInfoSwitchBtn.getRootElement().classList.add("ut-player-picks-view--info-change"),
        t.appendChild(this._itemInfoSwitchBtn.getRootElement()),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("title"),
        t.appendChild(this.__title),
        this.__description = document.createElement("p"),
        this.__description.classList.add("description"),
        t.appendChild(this.__description),
        this.__selectedCounter = document.createElement("p"),
        this.__selectedCounter.classList.add("selected-counter"),
        t.appendChild(this.__selectedCounter),
        e.appendChild(t),
        this.__chooseContainer = document.createElement("section"),
        this.__chooseContainer.classList.add("content-container"),
        this.__ownershipDescription = document.createElement("p"),
        this.__ownershipDescription.classList.add("ownership-description"),
        this.__chooseContainer.appendChild(this.__ownershipDescription),
        this._carouselItemsContainer = new UTCompanionCarouselItemContainerView,
        this.__chooseContainer.appendChild(this._carouselItemsContainer.getRootElement()),
        this.__itemSelectedDescription = document.createElement("p"),
        this.__itemSelectedDescription.classList.add("item-selected-description"),
        this.__chooseContainer.appendChild(this.__itemSelectedDescription),
        this.__carouselIndicatorDots = document.createElement("ul"),
        this.__carouselIndicatorDots.classList.add("carousel-indicator-dots"),
        this.__chooseContainer.appendChild(this.__carouselIndicatorDots),
        this._selectBtn = new UTStandardButtonControl,
        this._selectBtn.getRootElement().classList.add("mini"),
        this._selectBtn.getRootElement().classList.add("select-btn"),
        this._selectBtn.getRootElement().classList.add("call-to-action"),
        this.__chooseContainer.appendChild(this._selectBtn.getRootElement()),
        e.appendChild(this.__chooseContainer),
        this.__chosenContainer = document.createElement("section"),
        this.__chosenContainer.classList.add("content-container"),
        this.__gridItems = document.createElement("div"),
        this.__gridItems.classList.add("grid-scrollable"),
        this.__chosenContainer.appendChild(this.__gridItems),
        e.appendChild(this.__chosenContainer);
        var i = document.createElement("footer");
        this._continueBtn = new UTStandardButtonControl,
        this._continueBtn.getRootElement().classList.add("mini"),
        this._continueBtn.getRootElement().classList.add("call-to-action"),
        i.appendChild(this._continueBtn.getRootElement()),
        this._backBtn = new UTStandardButtonControl,
        this._backBtn.getRootElement().classList.add("back-btn"),
        this._backBtn.getRootElement().classList.add("mini"),
        i.appendChild(this._backBtn.getRootElement()),
        this._confirmBtn = new UTStandardButtonControl,
        this._confirmBtn.getRootElement().classList.add("mini"),
        this._confirmBtn.getRootElement().classList.add("call-to-action"),
        i.appendChild(this._confirmBtn.getRootElement()),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerPicksView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._itemInfoSwitchBtn.destroy(),
    this._exitBtn.destroy(),
    this.__title = null,
    this.__description = null,
    this.__selectedCounter = null,
    this.__chooseContainer = null,
    this.__ownershipDescription = null,
    this._carouselItemsContainer.destroy(),
    this.__itemSelectedDescription = null,
    this.__carouselIndicatorDots = null,
    this._selectBtn.destroy(),
    this.__chosenContainer = null,
    this.__gridItems = null,
    this._continueBtn.destroy(),
    this._backBtn.destroy(),
    this._confirmBtn.destroy()
}
,
UTPlayerPicksView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTPlayerPicksViewController = function(t) {
    function UTPlayerPicksViewController() {
        var e = t.call(this) || this;
        return e.picks = [],
        e.ownership = [],
        e.selectedPicks = [],
        e.carouselCurrentIndex = 0,
        e.availablePicks = 0,
        e.isPendingSelection = !1,
        e.itemInfoStateViewModel = new UTItemInfoStateViewModel(services.UserSettings),
        e.modalState = PlayerPicksState.CHOICE,
        e
    }
    return __extends(UTPlayerPicksViewController, t),
    UTPlayerPicksViewController.prototype.init = function() {
        if (!this.initialized) {
            DebugUtils.Assert(0 < this.picks.length, "UTPlayerPicksViewController expects at least one item."),
            getKeyboardEventController().registerDelegate(this, KeyboardEventPriority.POPUP);
            var e = this.getView();
            e.setSelectedCounterText(this.selectedPicks.length, this.availablePicks),
            e.getItemInfoSwitchButton().addTarget(this, this.eItemInfoSwitchButtonSelected, EventType.TAP),
            e.addTarget(this, this.eConfirmSelection, UTPlayerPicksView.Event.CONFIRM_PICK),
            e.addTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.EXIT),
            e.addTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.CONTINUE),
            e.addTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.BACK),
            e.addTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.SELECT_CURRENT_PICK),
            e.addTarget(this, this.onCarouselScrolled, UTPlayerPicksView.Event.CAROUSEL_SCROLLED),
            e.addTarget(this, this.onPickCanceled, UTPlayerPicksView.Event.CANCEL_SELECTION),
            t.prototype.init.call(this)
        }
    }
    ,
    UTPlayerPicksViewController.prototype.dealloc = function() {
        this.picks = [],
        this.itemInfoStateViewModel = null,
        getKeyboardEventController().unregisterDelegate(this, KeyboardEventPriority.POPUP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTPlayerPicksViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.getItemInfoSwitchButton().removeTarget(this, this.eItemInfoSwitchButtonSelected, EventType.TAP),
        e.removeTarget(this, this.eConfirmSelection, UTPlayerPicksView.Event.CONFIRM_PICK),
        e.removeTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.EXIT),
        e.removeTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.CONTINUE),
        e.removeTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.BACK),
        e.removeTarget(this, this.onButtonTapped, UTPlayerPicksView.Event.SELECT_CURRENT_PICK),
        e.removeTarget(this, this.onCarouselScrolled, UTPlayerPicksView.Event.CAROUSEL_SCROLLED),
        e.removeTarget(this, this.onPickCanceled, UTPlayerPicksView.Event.CANCEL_SELECTION)
    }
    ,
    UTPlayerPicksViewController.prototype.eItemInfoSwitchButtonSelected = function(e, t, i) {
        this.itemInfoStateViewModel && this.getView().getItemInfoSwitchButton().setCurrentState(this.itemInfoStateViewModel.nextState())
    }
    ,
    UTPlayerPicksViewController.prototype.isPendingSelectionContext = function() {
        return this.isPendingSelection
    }
    ,
    UTPlayerPicksViewController.prototype.setPendingSelectionContext = function() {
        this.isPendingSelection = !0,
        this.getView().setDescription(services.Localization.localize("playerpicks.modal.description.pending"))
    }
    ,
    UTPlayerPicksViewController.prototype.getCurrentPick = function() {
        return this.picks[this.carouselCurrentIndex]
    }
    ,
    UTPlayerPicksViewController.prototype.isCurrentPickSelected = function() {
        return this.selectedPicks.includes(this.getCurrentPick())
    }
    ,
    UTPlayerPicksViewController.prototype.isItemSelected = function(e) {
        return this.selectedPicks.includes(e)
    }
    ,
    UTPlayerPicksViewController.prototype.isAtMaxPicks = function() {
        return this.selectedPicks.length === this.availablePicks
    }
    ,
    UTPlayerPicksViewController.prototype.initWithPicks = function(e, t) {
        this.initialized || (this.availablePicks = t,
        this.picks = e,
        this.init())
    }
    ,
    UTPlayerPicksViewController.prototype._getViewInstanceFromData = function() {
        return new UTPlayerPicksView
    }
    ,
    UTPlayerPicksViewController.prototype.viewDidAppear = function() {
        this.render(),
        t.prototype.viewDidAppear.call(this)
    }
    ,
    UTPlayerPicksViewController.prototype.render = function() {
        var n = this
          , e = new UTSearchCriteriaDTO;
        e.defId = this.picks.map(function(e) {
            return e.definitionId
        }),
        services.Club.search(e).observe(this, function(e, t) {
            var i = n.getView()
              , o = JSUtils.isObject(t.response) ? t.response.items : [];
            e.unobserve(n),
            n.ownership = function(e) {
                var t = [];
                return 0 < e.length ? t = n.picks.map(function(t) {
                    return JSUtils.isValid(JSUtils.find(e, function(e) {
                        return e.definitionId === t.definitionId && e.limitedUseType === t.limitedUseType
                    }))
                }, n) : (t.length = n.picks.length,
                t.fill(!1, 0, n.picks.length)),
                t
            }
            .call(n, o),
            i.setCarouselItems(n.picks),
            n.renderBasedOnState(),
            n.itemInfoStateViewModel && i.getItemInfoSwitchButton().setCurrentState(n.itemInfoStateViewModel.getState())
        })
    }
    ,
    UTPlayerPicksViewController.prototype.onCarouselScrolled = function(e, t, i) {
        this.carouselCurrentIndex = i.index,
        this.updatePlayerPicksDisplay()
    }
    ,
    UTPlayerPicksViewController.prototype.onPickCanceled = function(e, t, i) {
        this.deselectByItem(i.item)
    }
    ,
    UTPlayerPicksViewController.prototype.onButtonTapped = function(e, t, i) {
        var o;
        t === UTPlayerPicksView.Event.EXIT ? null === (o = this.getParentViewController()) || void 0 === o || o.dismissViewController() : t === UTPlayerPicksView.Event.CONTINUE ? (this.modalState = PlayerPicksState.CONFIRM,
        this.renderBasedOnState()) : t === UTPlayerPicksView.Event.BACK ? (this.modalState = PlayerPicksState.CHOICE,
        this.renderBasedOnState()) : t === UTPlayerPicksView.Event.SELECT_CURRENT_PICK && this.markSelectedByItem(this.getCurrentPick())
    }
    ,
    UTPlayerPicksViewController.prototype.markSelectedByItem = function(e) {
        var t = this.picks.indexOf(e);
        if (!this.isAtMaxPicks() && !this.isItemSelected(e) && -1 !== t) {
            var i = this.getView();
            this.selectedPicks.push(e),
            i.setSelectedCarouselItem(t),
            this.updatePlayerPicksDisplay()
        }
    }
    ,
    UTPlayerPicksViewController.prototype.deselectByItem = function(e) {
        var t = this.selectedPicks.indexOf(e)
          , i = this.picks.indexOf(e)
          , o = this.getView();
        -1 !== t && -1 !== i && (this.selectedPicks.splice(t, 1),
        o.deselectCarouselItemByIndex(i),
        this.updatePlayerPicksDisplay())
    }
    ,
    UTPlayerPicksViewController.prototype.updatePlayerPicksDisplay = function() {
        var e = this.getView();
        e.removeActiveIndexState(),
        e.setActiveIndexState(this.carouselCurrentIndex),
        e.toggleSelectedTextDisplay(this.isCurrentPickSelected()),
        e.toggleSelectButton(!this.isCurrentPickSelected() && !this.isAtMaxPicks()),
        e.setContinueButtonInteractionState(this.isAtMaxPicks()),
        e.setSelectedCounterText(this.selectedPicks.length, this.availablePicks),
        e.updateItemStateText(this.ownership[this.carouselCurrentIndex], this.getCurrentPick().untradeable)
    }
    ,
    UTPlayerPicksViewController.prototype.renderBasedOnState = function() {
        var e = this.getView()
          , t = services.Localization;
        this.modalState === PlayerPicksState.CHOICE ? (e.setTitle(t.localize("playerpicks.modal.title.multiple")),
        e.setDescription(t.localize("playerpicks.modal.description.multiple")),
        e.toggleContinueButton(!0),
        e.toggleBackButton(!1),
        e.toggleConfirmButton(!1),
        e.toggleChooseContainer(!0),
        e.toggleChosenContainer(!1),
        this.updatePlayerPicksDisplay(),
        e.carouselFocus()) : (e.setTitle(t.localize("playerpicks.modal.title.confirm")),
        e.setDescription(t.localize("playerpicks.modal.description.confirm")),
        e.toggleSelectButton(!1),
        e.toggleContinueButton(!1),
        e.toggleBackButton(!0),
        e.toggleConfirmButton(!0),
        e.toggleChooseContainer(!1),
        e.toggleChosenContainer(!0),
        e.renderSelectedPicks(this.selectedPicks))
    }
    ,
    UTPlayerPicksViewController.prototype.eConfirmSelection = function(e, t, i) {
        var a = this;
        services.Item.confirmPlayerPickItemSelection(this.selectedPicks).observe(this, function(e, t) {
            var i, o;
            e.unobserve(a);
            var n = services.Localization;
            if (t.success && (null === (i = t.data) || void 0 === i ? void 0 : i.rewards)) {
                a.isPendingSelection || TelemetryManager.trackEvent(TelemetryManager.Sections.MISC, TelemetryManager.Categories.PLAYER_PICKS, "Claimed draft item and confirmed player selection.");
                var r = new UTGameRewardsViewController(t.data.rewards)
                  , s = r.getView();
                r.init(),
                s.setTitle(n.localize("playerpicks.rewards.title")),
                s.setDescription(n.localize("playerpicks.rewards.description")),
                s.setButtonText(n.localize("playerpicks.rewards.claim")),
                r.modalDisplayDimensions.width = "24em",
                gPopupClickShield.setActivePopup(r)
            } else
                services.Notification.queue([n.localize("notification.playerpicks.confirmFailed"), UINotificationType.NEGATIVE]);
            null === (o = a.getParentViewController()) || void 0 === o || o.dismissViewController()
        })
    }
    ,
    UTPlayerPicksViewController.prototype.handleKeyUpEvent = function(e) {
        var t;
        e.key === KeyboardKey.ESCAPE || e.key === KeyboardKey.MS_ESCAPE ? null === (t = this.getParentViewController()) || void 0 === t || t.dismissViewController() : e.key === KeyboardKey.ENTER && (this.isCurrentPickSelected() ? this.deselectByItem(this.getCurrentPick()) : this.markSelectedByItem(this.getCurrentPick()))
    }
    ,
    UTPlayerPicksViewController
}(EAViewController)
  , UTItemSectionListViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTItemSectionListViewModel(e) {
        var t = i.call(this, e) || this;
        return t.sections = new EAHashTable,
        t
    }
    return __extends(UTItemSectionListViewModel, i),
    UTItemSectionListViewModel.prototype.setSection = function(e, t, i) {
        this.sections.set(e, {
            filter: t,
            priority: i
        })
    }
    ,
    UTItemSectionListViewModel.prototype.getSectionItems = function(e) {
        var t = this.sections.get(e);
        return this.sections.has(e) && t ? this.values().filter(t.filter) : this.values()
    }
    ,
    UTItemSectionListViewModel.prototype.organizeItems = function() {
        var t = this;
        if (0 !== this.length && 0 !== this.sections.length) {
            var i = []
              , o = [];
            this.sections.forEach(function(e) {
                i[e.priority] = t.values().filter(e.filter)
            }),
            i.forEach(function(e) {
                e.sort(t.sortByType.bind(t)),
                o = o.concat(e)
            }),
            this.resetCollection(o)
        }
    }
    ,
    UTItemSectionListViewModel
}(UTItemListViewModel))
  , UTSquadSectionListViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadSectionListViewModel(e) {
        var t = i.call(this, e) || this;
        return t.sections = new EAHashTable,
        t.setSection(UTSquadSectionListViewModel.SECTION.STARTING_ELEVEN, function(e) {
            return 0 <= e.index && e.index < UTSquadEntity.FIELD_PLAYERS
        }, UTSquadSectionListViewModel.SECTION.STARTING_ELEVEN),
        t.setSection(UTSquadSectionListViewModel.SECTION.SUBS, function(e) {
            return e.index >= UTSquadEntity.FIELD_PLAYERS && e.index < UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS
        }, UTSquadSectionListViewModel.SECTION.SUBS),
        t.setSection(UTSquadSectionListViewModel.SECTION.RESERVES, function(e) {
            return e.index >= UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS && e.index < UTSquadEntity.MANAGER_SLOT_INDEX
        }, UTSquadSectionListViewModel.SECTION.RESERVES),
        t
    }
    return __extends(UTSquadSectionListViewModel, i),
    UTSquadSectionListViewModel.prototype.setSection = function(e, t, i) {
        this.sections.set(e, {
            filter: t,
            priority: i
        })
    }
    ,
    UTSquadSectionListViewModel.prototype.getSectionSlots = function(e) {
        var t = this.sections.get(e);
        return this.sections.has(e) && t ? this.values().filter(t.filter) : this.values()
    }
    ,
    UTSquadSectionListViewModel.prototype.getStartingEleven = function() {
        return this.getSectionSlots(UTSquadSectionListViewModel.SECTION.STARTING_ELEVEN)
    }
    ,
    UTSquadSectionListViewModel.prototype.getSubs = function() {
        return this.getSectionSlots(UTSquadSectionListViewModel.SECTION.SUBS)
    }
    ,
    UTSquadSectionListViewModel.prototype.getReserves = function() {
        return this.getSectionSlots(UTSquadSectionListViewModel.SECTION.RESERVES)
    }
    ,
    UTSquadSectionListViewModel.SECTION = {
        STARTING_ELEVEN: 0,
        SUBS: 1,
        RESERVES: 2
    },
    UTSquadSectionListViewModel
}(EAIterator))
  , UTEmptySectionMessageView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTEmptySectionMessageView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTEmptySectionMessageView, e),
    UTEmptySectionMessageView
}(BaseNoResultsView));
UTEmptySectionMessageView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-empty-section-view");
        var t = document.createElement("span");
        t.classList.add("icon_squad"),
        t.classList.add("fut_icon"),
        e.appendChild(t),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-empty-section-view--title"),
        e.appendChild(this.__title),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-empty-section-view--body"),
        e.appendChild(this.__description),
        this.__root = e,
        this._generated = !0
    }
}
,
UTEmptySectionMessageView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__description = null
}
,
UTEmptySectionMessageView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSectionedItemListView = function(t) {
    function UTSectionedItemListView() {
        var e = t.call(this) || this;
        return e.listRows = [],
        e.footerCallback = null,
        e._footerBtn = null,
        e.emptyHeaderMessage = services.Localization.localize("squads.setEmptyMessage.defaultHeader"),
        e.emptyBodyMessage = services.Localization.localize("squads.setEmptyMessage.defaultBody"),
        e.emptyMessage = null,
        e.selectedIndex = -1,
        e
    }
    return __extends(UTSectionedItemListView, t),
    UTSectionedItemListView.prototype.init = function() {
        t.prototype.init.call(this),
        this._header.init(),
        this._header.hideActionButton(),
        this.__buttonGroup && (this.__buttonGroup.style.display = "none")
    }
    ,
    UTSectionedItemListView.prototype.dealloc = function() {
        this.footerCallback = null,
        this.removeEmptyMessage(),
        this.clearList(),
        this.removeFooter(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSectionedItemListView.prototype.clearList = function() {
        this.listRows.forEach(function(e) {
            return e.dealloc()
        }),
        this.listRows = []
    }
    ,
    UTSectionedItemListView.prototype.showEmptyMessage = function() {
        this.emptyMessage || (this.emptyMessage = new UTEmptySectionMessageView),
        this.getRootElement().appendChild(this.emptyMessage.getRootElement()),
        this.emptyMessage.setHeading(this.emptyHeaderMessage),
        this.emptyMessage.setDescription(this.emptyBodyMessage)
    }
    ,
    UTSectionedItemListView.prototype.removeEmptyMessage = function() {
        this.emptyMessage && (this.emptyMessage.dealloc(),
        this.emptyMessage = null)
    }
    ,
    UTSectionedItemListView.prototype.setBulkHeaderSubtitle = function(e, t) {
        this._header.setSubText(e, t)
    }
    ,
    UTSectionedItemListView.prototype.setActionHeader = function(e, t, i) {
        var o = this;
        this._header.setText(e),
        this._header.setActionButtonText(t),
        i && JSUtils.isFunction(i) && (this._header.getActions(this, EventType.TAP).forEach(function(e) {
            o._header.removeTarget(o, e, EventType.TAP)
        }),
        this._header.addTarget(this, i, EventType.TAP),
        this._header.showActionButton())
    }
    ,
    UTSectionedItemListView.prototype.setBulkHeader = function(e, t, i) {
        var o = this;
        this._header.setText(e),
        i && JSUtils.isFunction(i) && (this._header.getActions(this, EventType.TAP).forEach(function(e) {
            o._header.removeTarget(o, e, EventType.TAP)
        }),
        this._header.addTarget(this, i, UTSectionedTableHeaderView.Event.BULK_ACTION))
    }
    ,
    UTSectionedItemListView.prototype.showBulkActionButton = function() {
        this._header.showBulkActionButton()
    }
    ,
    UTSectionedItemListView.prototype.hideBulkActionButton = function() {
        this._header.hideBulkActionButton()
    }
    ,
    UTSectionedItemListView.prototype.setFooter = function(e, t, i, o) {
        this._footerBtn || (this._footerBtn = new UTGroupButtonControl,
        this._footerBtn.init(),
        this.__buttonGroup && this.__buttonGroup.appendChild(this._footerBtn.getRootElement())),
        DOMKit.toggleClass(this._footerBtn.getRootElement(), "ut-group-button cta", i),
        this._footerBtn.setText(e),
        this._footerBtn.setSubtext(t),
        this._footerBtn.displayCurrencyIcon(!0),
        this.footerCallback && this._footerBtn.removeTarget(this, this.footerCallback, EventType.TAP),
        this.footerCallback = o,
        this._footerBtn.addTarget(this, this.footerCallback, EventType.TAP),
        this.__buttonGroup && (this.__buttonGroup.style.display = "")
    }
    ,
    UTSectionedItemListView.prototype.removeFooter = function() {
        this._footerBtn && (this._footerBtn.dealloc(),
        this._footerBtn = null,
        this.__buttonGroup && (this.__buttonGroup.style.display = ""))
    }
    ,
    UTSectionedItemListView.prototype.setEmptyMessage = function(e, t) {
        this.emptyHeaderMessage = e,
        this.emptyBodyMessage = t,
        this.emptyMessage && (this.emptyMessage.setHeading(this.emptyHeaderMessage),
        this.emptyMessage.setDescription(this.emptyBodyMessage))
    }
    ,
    UTSectionedItemListView.prototype.addItems = function(e, t, i) {
        var o = this;
        return void 0 === i && (i = ListItemPriority.DEFAULT),
        this.listRows = e.map(function(e) {
            return o.generateListRow(e, t, i)
        }),
        this.listRows
    }
    ,
    UTSectionedItemListView.prototype.removeItemsById = function(e) {
        var t = this;
        e.forEach(function(i) {
            var e = JSUtils.find(t.listRows, function(e) {
                var t;
                return (null === (t = e.getData()) || void 0 === t ? void 0 : t.id) === i
            });
            e && (e.dealloc(),
            t.listRows.splice(t.listRows.indexOf(e), 1))
        }, this),
        this.render()
    }
    ,
    UTSectionedItemListView.prototype.render = function() {
        var t = this;
        0 === this.listRows.length ? this.showEmptyMessage() : (this.removeEmptyMessage(),
        this.listRows.forEach(function(e) {
            e.render(),
            t.__list.appendChild(e.getRootElement())
        }))
    }
    ,
    UTSectionedItemListView.prototype.generateListRow = function(e, t, i) {
        var o = new UTItemTableCellView;
        return o.setData(e, void 0, i),
        t && o.setTapCallback(t),
        o
    }
    ,
    UTSectionedItemListView.prototype.toggleHeaderButtonEnabled = function(e) {
        this._header.toggleButtonEnabled(e)
    }
    ,
    UTSectionedItemListView.prototype.toggleHeaderButton = function(e) {
        this._header.toggleOptionButton(e)
    }
    ,
    UTSectionedItemListView.prototype.selectRowByIndex = function(i) {
        var o = this
          , n = -1;
        0 <= i && i < this.listRows.length && this.listRows.forEach(function(e) {
            var t = e === o.listRows[i];
            e.setSelected(t),
            t && (n = i)
        }),
        this.selectedIndex = n
    }
    ,
    UTSectionedItemListView.prototype.selectRowByItemId = function(o) {
        var n = this
          , r = -1;
        this.listRows.forEach(function(e) {
            var t, i = (null === (t = e.getData()) || void 0 === t ? void 0 : t.id) === o;
            e.setSelected(i),
            i && (r = n.listRows.indexOf(e))
        }),
        this.selectedIndex = r
    }
    ,
    UTSectionedItemListView.prototype.getNumOfRows = function() {
        return this.listRows.length
    }
    ,
    UTSectionedItemListView.prototype.getSelectedRow = function() {
        return this.listRows[this.selectedIndex] || null
    }
    ,
    UTSectionedItemListView.prototype.onTimedUpdate = function() {
        this.listRows.forEach(function(e) {
            return e.onTimedUpdate()
        })
    }
    ,
    UTSectionedItemListView
}(EAView);
UTSectionedItemListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("section");
        e.classList.add("sectioned-item-list"),
        this._header = new UTSectionedTableHeaderView,
        e.appendChild(this._header.getRootElement()),
        this.__list = document.createElement("ul"),
        this.__list.classList.add("itemList"),
        e.appendChild(this.__list),
        this.__buttonGroup = document.createElement("div"),
        this.__buttonGroup.classList.add("ut-button-group"),
        e.appendChild(this.__buttonGroup),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSectionedItemListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._header.destroy(),
    this.__list = null,
    this.__buttonGroup = null
}
,
UTSectionedItemListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSectionedSlotListView = function(n) {
    function UTSectionedSlotListView() {
        return n.call(this) || this
    }
    return __extends(UTSectionedSlotListView, n),
    UTSectionedSlotListView.prototype.addSlotItems = function(e, t, i) {
        var o = e.map(function(e) {
            return e.item
        });
        return n.prototype.addItems.call(this, o, t, i)
    }
    ,
    UTSectionedSlotListView
}(UTSectionedItemListView);
UTSectionedItemListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("section");
        e.classList.add("sectioned-item-list"),
        this._header = new UTSectionedTableHeaderView,
        e.appendChild(this._header.getRootElement()),
        this.__list = document.createElement("ul"),
        this.__list.classList.add("itemList"),
        e.appendChild(this.__list),
        this.__buttonGroup = document.createElement("div"),
        this.__buttonGroup.classList.add("ut-button-group"),
        e.appendChild(this.__buttonGroup),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSectionedItemListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._header.destroy(),
    this.__list = null,
    this.__buttonGroup = null
}
,
UTSectionedItemListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSendToSquadView = function(i) {
    function UTSendToSquadView() {
        var e = i.call(this) || this;
        return e.pinnedRow = null,
        e.onSlotSelected = new EAObservable,
        e
    }
    return __extends(UTSendToSquadView, i),
    UTSendToSquadView.prototype.init = function() {
        i.prototype.init.call(this)
    }
    ,
    UTSendToSquadView.prototype.dealloc = function() {
        var e, t;
        null === (e = this.pinnedRow) || void 0 === e || e.dealloc(),
        this.pinnedRow = null,
        this.getSubviews().forEach(function(e) {
            return e.dealloc()
        }),
        null === (t = this.onSlotSelected) || void 0 === t || t.dealloc(),
        this.onSlotSelected = null,
        i.prototype.dealloc.call(this)
    }
    ,
    UTSendToSquadView.prototype.setPinnedItem = function(e) {
        var t, i = this;
        DOMKit.empty(this.__pinnedDiv),
        null === (t = this.pinnedRow) || void 0 === t || t.dealloc(),
        this.pinnedRow = new UTItemTableCellView,
        this.pinnedRow.setData(e),
        this.pinnedRow.render(),
        this.__pinnedDiv.appendChild(this.pinnedRow.getRootElement()),
        requestAnimationFrame(function() {
            i.__scrollerDiv.style.top = i.__pinnedDiv.offsetHeight + "px"
        })
    }
    ,
    UTSendToSquadView.prototype.renderSections = function(e, s) {
        var a = this;
        this.getSubviews().forEach(function(e) {
            return e.dealloc()
        }),
        e.forEach(function(o) {
            var e = new UTSectionedSlotListView
              , n = o.chemTotalValues
              , r = o.differencesTotal;
            e.init(),
            e.setActionHeader(o.sectionTitle, ""),
            e.addSlotItems(o.slots).forEach(function(e, t) {
                if (e instanceof UTItemTableCellView) {
                    if (e.slotData = o.slots[t],
                    a.pinnedRow && a.pinnedRow.data && e.setComparisonData(a.pinnedRow.data),
                    e.slotData && e.slotData.index === s && e.addClass("selectedSlot"),
                    n && r) {
                        var i = new UTListChemistryTagView;
                        i.setChemistryImpactString(n[t], r[t]),
                        e.setChemistryTagComponent(i)
                    }
                    e.setAction(e.data ? enums.UIRowActionClass.SWAP : enums.UIRowActionClass.ADD, a.onActionCB.bind(a, e.slotData.index))
                }
            }),
            e.render(),
            a.addSubview(e, a.__scrollerDiv)
        }),
        this.layoutSubviews()
    }
    ,
    UTSendToSquadView.prototype.onActionCB = function(e) {
        var t;
        null === (t = this.onSlotSelected) || void 0 === t || t.notify(e)
    }
    ,
    UTSendToSquadView
}(EAView);
UTSendToSquadView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("article");
        e.setAttribute("id", "SendToActiveSquad"),
        e.classList.add("ut-pinned-list-container"),
        this.__pinnedDiv = document.createElement("ul"),
        this.__pinnedDiv.classList.add("ut-pinned-item"),
        e.appendChild(this.__pinnedDiv),
        this.__scrollerDiv = document.createElement("div"),
        this.__scrollerDiv.classList.add("ut-pinned-list"),
        e.appendChild(this.__scrollerDiv),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSendToSquadView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__pinnedDiv = null,
    this.__scrollerDiv = null
}
,
UTSendToSquadView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSendToSquadViewController = function(i) {
    function UTSendToSquadViewController() {
        var e = i.call(this) || this;
        return e.defaultedToActiveSquad = !1,
        e.chemCalculator = new UTSquadChemCalculatorUtils(services.Chemistry,repositories.TeamConfig),
        e.pinnedItem = null,
        e.selectedSlotIndex = -1,
        e.squad = null,
        e.viewModel = null,
        e
    }
    return __extends(UTSendToSquadViewController, i),
    UTSendToSquadViewController.prototype.init = function() {
        var e;
        this.initialized || (i.prototype.init.call(this),
        null === (e = this.getView().onSlotSelected) || void 0 === e || e.observe(this, this.eAddSwap))
    }
    ,
    UTSendToSquadViewController.prototype.initWithItem = function(e) {
        this.initialized || (this.pinnedItem = e,
        this.init())
    }
    ,
    UTSendToSquadViewController.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.viewModel = null
    }
    ,
    UTSendToSquadViewController.prototype._getViewInstanceFromData = function() {
        return new UTSendToSquadView
    }
    ,
    UTSendToSquadViewController.prototype.getNavigationTitle = function() {
        return this.squad && this.squad.isSBC() ? services.Localization.localize("navbar.label.SBCSquad") : this.squad ? this.squad.getName() : services.Localization.localize("navbar.label.activesquad")
    }
    ,
    UTSendToSquadViewController.prototype.viewDidAppear = function() {
        var e, u = this;
        i.prototype.viewDidAppear.call(this);
        var n = this.getView()
          , d = services.Localization;
        if (null === (e = this.getNavigationController()) || void 0 === e || e.setNavigationVisibility(!0, !0),
        this.pinnedItem && n.setPinnedItem(this.pinnedItem),
        this.squad) {
            this.viewModel = new UTSquadSectionListViewModel(this.squad.getPlayers());
            var t = [];
            this.viewModel.getStartingEleven().forEach(function(e) {
                e.isBrick() || t.push(e)
            }),
            this.squad.isSBC() ? n.renderSections([{
                sectionTitle: d.localize("dock.label.startingeleven"),
                slots: t.reverse()
            }, {
                sectionTitle: d.localize("dock.label.workArea"),
                slots: this.viewModel.getSubs().concat(this.viewModel.getReserves())
            }], this.selectedSlotIndex) : n.renderSections([{
                sectionTitle: d.localize("dock.label.startingeleven"),
                slots: t.reverse()
            }, {
                sectionTitle: d.localize("dock.label.substitutes"),
                slots: this.viewModel.getSubs()
            }, {
                sectionTitle: d.localize("dock.label.reserves"),
                slots: this.viewModel.getReserves()
            }], this.selectedSlotIndex)
        } else
            services.Squad.requestSquadByType("active").observe(this, function(e, t) {
                var i;
                e.unobserve(u);
                var r = t.success ? null === (i = t.data) || void 0 === i ? void 0 : i.squad : null;
                u.defaultedToActiveSquad = !0,
                r && u.setSquad(r);
                var s = []
                  , a = []
                  , o = r ? r.getPlayers() : [];
                if (u.viewModel = new UTSquadSectionListViewModel(o),
                r && u.pinnedItem) {
                    var l = u.pinnedItem
                      , c = u.viewModel.getStartingEleven();
                    c.forEach(function(t) {
                        var e = c.map(function(e) {
                            return t.index === e.index ? l : e.item
                        })
                          , i = r.getFormation()
                          , o = r.getManager().item
                          , n = 0;
                        i && (n = u.chemCalculator.calculate(i, e, o).chemistry,
                        s.push(n),
                        a.push(n - r.getChemistry()))
                    })
                }
                n.renderSections([{
                    sectionTitle: d.localize("dock.label.startingeleven"),
                    slots: u.viewModel.getStartingEleven().reverse(),
                    chemTotalValues: s.reverse(),
                    differencesTotal: a.reverse()
                }, {
                    sectionTitle: d.localize("dock.label.substitutes"),
                    slots: u.viewModel.getSubs()
                }, {
                    sectionTitle: d.localize("dock.label.reserves"),
                    slots: u.viewModel.getReserves()
                }], u.selectedSlotIndex)
            });
        TelemetryManager.trackPage(TelemetryManager.Sections.SQUADS, "MyClubSquadSwap")
    }
    ,
    UTSendToSquadViewController.prototype.setSquad = function(e) {
        e instanceof UTSquadEntity && (this.squad = e)
    }
    ,
    UTSendToSquadViewController.prototype.setSelectedSlotIndex = function(e) {
        this.selectedSlotIndex = e
    }
    ,
    UTSendToSquadViewController.prototype.eAddSwap = function(e, r) {
        function g8a(e, t) {
            var i;
            e.unobserve(a),
            t.success ? a.defaultedToActiveSquad ? services.Notification.queue([l.localize("notification.item.toActiveSquad"), UINotificationType.NEUTRAL]) : (TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.BUTTON_PRESS, "Squad Slot Detail View - Sent to Current Squad"),
            services.Notification.queue([l.localize("notification.item.toCurrentSquad"), UINotificationType.NEUTRAL])) : (d && (null === (i = a.squad) || void 0 === i || i.addItemToSlot(r, d)),
            services.Notification.queue(u)),
            null == c || c.popViewController()
        }
        var t, i, o, n, s, a = this, l = services.Localization, c = this.getNavigationController(), u = new UINotificationDTO(l.localize("notification.item.toActiveSquadFailed"),UINotificationType.NEGATIVE), d = null, h = null === (t = this.squad) || void 0 === t ? void 0 : t.getSlot(r), p = null == h ? void 0 : h.item, _ = (null == h ? void 0 : h.generalPosition) == PlayerPosition.GK, f = null === (i = this.pinnedItem) || void 0 === i ? void 0 : i.isCarson();
        if (_ && f)
            utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.PLAYER_NOT_ELIGIBLE, {
                params: []
            });
        else if (this.getView().setInteractionState(!1),
        p && this.pinnedItem) {
            var m = null === (o = this.squad) || void 0 === o ? void 0 : o.containsVariationOfCard(this.pinnedItem)
              , T = p.compareDream(this.pinnedItem) || m && p.compareResourceTo(this.pinnedItem);
            if (!m || T)
                if (this.pinnedItem.pile !== ItemPile.CLUB)
                    services.Item.move(this.pinnedItem, ItemPile.CLUB).observe(this, function(e, t) {
                        var i, o, n;
                        e.unobserve(a),
                        t.success && a.pinnedItem ? (d = null !== (o = null === (i = a.squad) || void 0 === i ? void 0 : i.addItemToSlot(r, a.pinnedItem)) && void 0 !== o ? o : null,
                        null === (n = a.squad) || void 0 === n || n.save().observe(a, g8a)) : (services.Notification.queue(u),
                        NetworkErrorManager.handleStatus(t.status),
                        null == c || c.popViewController())
                    });
                else {
                    var v = null === (n = this.squad) || void 0 === n ? void 0 : n.addItemToSlot(r, this.pinnedItem);
                    d = v || null,
                    null === (s = this.squad) || void 0 === s || s.save().observe(this, g8a)
                }
        } else
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.DUPLICATE_ITEM),
            null == c || c.popViewController()
    }
    ,
    UTSendToSquadViewController
}(EAViewController)
  , UTSquadMarketSearchViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadMarketSearchViewModel() {
        var e = t.call(this) || this;
        return e.squad = null,
        e.slotIndex = 0,
        e
    }
    return __extends(UTSquadMarketSearchViewModel, t),
    UTSquadMarketSearchViewModel.prototype.setSquad = function(e) {
        this.squad = e
    }
    ,
    UTSquadMarketSearchViewModel.prototype.setCurrentSlotIndex = function(e) {
        this.slotIndex = e
    }
    ,
    UTSquadMarketSearchViewModel.prototype.getSquad = function() {
        return this.squad
    }
    ,
    UTSquadMarketSearchViewModel.prototype.getCurrentSlot = function() {
        return this.squad ? this.squad.getSlot(this.slotIndex) : null
    }
    ,
    UTSquadMarketSearchViewModel.prototype.isActiveSquad = function() {
        return !!this.squad && this.squad.getId() === services.Squad.getActiveSquadId()
    }
    ,
    UTSquadMarketSearchViewModel
}(EAObject))
  , UTTransferMarketPaginationViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTransferMarketPaginationViewModel() {
        var e = t.call(this) || this;
        return e.paginationList = new UTPaginatedItemListViewModel([],e.getNumItemsPerPage()),
        e.pageIndex = 1,
        e
    }
    return __extends(UTTransferMarketPaginationViewModel, t),
    UTTransferMarketPaginationViewModel.prototype.dealloc = function() {
        t.prototype.dealloc.call(this),
        this.paginationList && (this.paginationList.stopAuctionUpdates(),
        this.paginationList.dataUpdated.clearObservers())
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getIterator = function() {
        return this.paginationList
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setPageItems = function(e) {
        this.paginationList.resetCollection(e)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setPinnedItem = function(e) {
        this.paginationList.setPinnedItem(e)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.addAuctionUpdateObserver = function(e, t) {
        this.paginationList.dataUpdated.observe(e, t)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.removeAuctionUpdateObserver = function(e, t) {
        var i;
        null === (i = this.paginationList) || void 0 === i || i.dataUpdated.unobserve(e, t)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.startAuctionUpdates = function() {
        var e;
        null === (e = this.paginationList) || void 0 === e || e.startAuctionUpdates()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.stopAuctionUpdates = function() {
        this.paginationList.stopAuctionUpdates()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getIndexByItemId = function(t) {
        return this.paginationList.indexOf(function(e) {
            return e.id === t
        })
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getCurrentPageItems = function() {
        return this.paginationList.values()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getCurrentItem = function() {
        return this.paginationList.current()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getItemCount = function() {
        return this.paginationList.length
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getCurrentPageIndex = function() {
        return this.pageIndex
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getNextPageIndex = function() {
        return this.pageIndex + 1
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getPrevPageIndex = function() {
        return Math.max(this.pageIndex - 1, 1)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setPageIndex = function(e) {
        JSUtils.isNumber(e) && (this.pageIndex = 1 <= e ? e : 1)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.setIndex = function(e) {
        this.paginationList.setIndex(e)
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getIndex = function() {
        return this.paginationList.getIndex()
    }
    ,
    UTTransferMarketPaginationViewModel.prototype.getNumItemsPerPage = function() {
        var e = getAppMain().getConfigRepository().getConfigObject(EAConfigurationRepository.KEY_ITEMS_PER_PAGE);
        return e ? e[EAConfigurationRepository.ITEMS_PER_PAGE.TRANSFER_MARKET] : 20
    }
    ,
    UTTransferMarketPaginationViewModel
}(UTViewModel))
  , UTMarketSearchView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTMarketSearchView() {
        return e.call(this) || this
    }
    return __extends(UTMarketSearchView, e),
    UTMarketSearchView.prototype.init = function() {
        e.prototype.init.call(this),
        this._list.init(),
        this._list.addTarget(this, this.bubbleEvent, enums.UIListEvent.ROW_SELECT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.NEXT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.PREVIOUS),
        this.setInteractionState(!0)
    }
    ,
    UTMarketSearchView.prototype.dealloc = function() {
        this.pinnedItemView = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTMarketSearchView.prototype.updateListTopPosition = function() {
        var e, t, i = null === (e = this.pinnedItemView) || void 0 === e ? void 0 : e.getRootElement(), o = this._list.getRootElement(), n = (null !== (t = null == i ? void 0 : i.offsetHeight) && void 0 !== t ? t : 0) + "px";
        requestAnimationFrame(function() {
            return o.style.top = n
        })
    }
    ,
    UTMarketSearchView.prototype.setItems = function(e) {
        0 < e.length ? (this._list.setItems(e),
        this._list.renderItems(),
        this._list.setRowTapCallback()) : this.setEmptyListMessage(JSUtils.isValid(this.pinnedItemView))
    }
    ,
    UTMarketSearchView.prototype.setItemsWithChemDiff = function(i, o, n, r, s) {
        var a = this;
        0 < i.length ? (this._list.setItems(i).forEach(function(e, t) {
            a.setChemistryData(!i[t].isManager(), e, o[t], n[t], r[t], s[t])
        }),
        this._list.renderItems(),
        this._list.setRowTapCallback()) : this.setEmptyListMessage(JSUtils.isValid(this.pinnedItemView))
    }
    ,
    UTMarketSearchView.prototype.setChemistryData = function(e, t, i, o, n, r) {
        var s = new UTListChemistryTagView;
        if (s.setChemistryImpactString(i, o),
        e) {
            t.setChemistryTagComponent(s);
            var a = UTSquadSlotChemistryPointsView.State.NEUTRAL;
            0 < r ? a = UTSquadSlotChemistryPointsView.State.POSITIVE : r < 0 && (a = UTSquadSlotChemistryPointsView.State.NEGATIVE);
            var l = new UTSquadSlotChemistryPointsView;
            l.isItemView(),
            l.render(n),
            l.setState(a),
            t.setChemistryPointsComponent(l)
        }
    }
    ,
    UTMarketSearchView.prototype.removeItemsById = function(e) {
        this._list.removeItemsById(e)
    }
    ,
    UTMarketSearchView.prototype.setEmptyListMessage = function(e) {
        var t = services.Localization.localize(e ? "popup.error.searchauctions.retrysearchfromsquad" : "popup.error.searchauctions.retrysearch");
        this._list.appendEmptyListMessage(t)
    }
    ,
    UTMarketSearchView.prototype.setRowTapCallback = function(e) {
        this._list.setRowTapCallback(e)
    }
    ,
    UTMarketSearchView.prototype.setPaginationState = function(e, t) {
        this._list.setPaginationState(e, t)
    }
    ,
    UTMarketSearchView.prototype.appendPinnedItemView = function(e) {
        this.pinnedItemView = e;
        var t = this.getRootElement();
        t.insertBefore(e.getRootElement(), t.firstChild),
        this.updateListTopPosition()
    }
    ,
    UTMarketSearchView.prototype.onTimedUpdate = function() {
        var e;
        this._list.onTimedUpdate(),
        null === (e = this.pinnedItemView) || void 0 === e || e.onTimedUpdate()
    }
    ,
    UTMarketSearchView.prototype.selectListRow = function(e) {
        this._list.selectRow(e)
    }
    ,
    UTMarketSearchView.prototype.bubbleEvent = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(t, i)
    }
    ,
    UTMarketSearchView
}(EATargetActionView));
UTMarketSearchView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("section");
        e.classList.add("ut-pinned-list-container"),
        e.classList.add("SearchResults"),
        this.__pinnedDiv = document.createElement("ul"),
        this.__pinnedDiv.classList.add("ut-pinned-item"),
        e.appendChild(this.__pinnedDiv),
        this._list = new UTPaginatedItemListView,
        this._list.getRootElement().classList.add("ut-pinned-list"),
        e.appendChild(this._list.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTMarketSearchView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__pinnedDiv = null,
    this._list.destroy()
}
,
UTMarketSearchView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTMarketSearchResultsViewController = function(n) {
    function UTMarketSearchResultsViewController() {
        var e = n.call(this) || this;
        return e.chemCalculator = new UTSquadChemCalculatorUtils(services.Chemistry,repositories.TeamConfig),
        e.itemListViewDelegate = null,
        e.paginationViewModel = new UTTransferMarketPaginationViewModel,
        e.searchCriteria = null,
        e.squadContext = null,
        e.compareItem = null,
        e.selectedItem = null,
        e.pinnedListItem = null,
        e.updateInterval = 0,
        e.onDataChange = new EAObservable,
        e
    }
    return __extends(UTMarketSearchResultsViewController, n),
    UTMarketSearchResultsViewController.prototype.init = function() {
        if (services.Module.set(3288334336),
        !this.initialized) {
            if (n.prototype.init.call(this),
            this.paginationViewModel.init(),
            this.paginationViewModel.addAuctionUpdateObserver(this, this._eViewmodelDataUpdated),
            this.searchCriteria) {
                var e = this.paginationViewModel.getNumItemsPerPage();
                this.searchCriteria.count = e + 1
            }
            var t = this.getView();
            t.addTarget(this, this._eRowSelected, enums.UIListEvent.ROW_SELECT),
            t.addTarget(this, this._eNextPage, enums.UIPaginationEvent.NEXT),
            t.addTarget(this, this._ePrevPage, enums.UIPaginationEvent.PREVIOUS)
        }
    }
    ,
    UTMarketSearchResultsViewController.prototype.initWithSearchCriteria = function(e) {
        this.initialized || (DebugUtils.Assert(e instanceof UTSearchCriteriaDTO, "Initialization expected a search criteria DTO."),
        this.searchCriteria = e,
        this.init())
    }
    ,
    UTMarketSearchResultsViewController.prototype.dealloc = function() {
        n.prototype.dealloc.call(this),
        this.onDataChange.dealloc(),
        this.searchCriteria = null,
        this.squadContext = null,
        this.compareItem = null,
        this.selectedItem = null,
        this.chemCalculator.dealloc(),
        JSUtils.isValid(this.pinnedListItem) && (this.pinnedListItem.dealloc(),
        this.pinnedListItem = null),
        this.itemListViewDelegate && (this.itemListViewDelegate = null),
        this.paginationViewModel && this.paginationViewModel.dealloc(),
        getDefaultDispatcher().removeObserver(AppNotification.UI_ITEM_STATE_CHANGE, this)
    }
    ,
    UTMarketSearchResultsViewController.prototype.setSquadContext = function(e) {
        if (!this.initialized) {
            DebugUtils.Assert(e instanceof UTSquadMarketSearchViewModel, "Initialization expected a squad market search VM."),
            this.squadContext = e;
            var t = this.squadContext.getCurrentSlot();
            t && this.setPinnedItem(t.item)
        }
    }
    ,
    UTMarketSearchResultsViewController.prototype._getViewInstanceFromData = function() {
        return new UTMarketSearchView
    }
    ,
    UTMarketSearchResultsViewController.prototype._getTelemetryId = function() {
        return "Transfer Market Results - List View"
    }
    ,
    UTMarketSearchResultsViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.searchresults")
    }
    ,
    UTMarketSearchResultsViewController.prototype.viewDidAppear = function() {
        var e, t, i;
        services.Module.set(3489660928),
        n.prototype.viewDidAppear.call(this),
        getDefaultDispatcher().addObserver(AppNotification.UI_ITEM_STATE_CHANGE, this, this._nInfoStateChanged),
        this._requestItems(this.paginationViewModel.getCurrentPageIndex()),
        this.compareItem && !this.pinnedListItem && this._generatePinnedItemView();
        var o = null !== (t = null === (e = this.squadContext) || void 0 === e ? void 0 : e.getCurrentSlot()) && void 0 !== t ? t : null;
        o && this.compareItem !== o.item && (this.compareItem = o.item,
        null === (i = this.pinnedListItem) || void 0 === i || i.setItem(this.compareItem)),
        this.pinnedListItem && this.pinnedListItem.viewDidAppear(),
        this.updateInterval = window.setInterval(this._arbitraryViewUpdate.bind(this), 5e3),
        TelemetryManager.trackPage(TelemetryManager.Sections.AUCTIONS, "Transfer Market Search Results")
    }
    ,
    UTMarketSearchResultsViewController.prototype.viewWillDisappear = function() {
        services.Module.set(3758096384),
        n.prototype.viewWillDisappear.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.UI_ITEM_STATE_CHANGE, this),
        this.paginationViewModel.stopAuctionUpdates(),
        this.paginationViewModel.removeAuctionUpdateObserver(this),
        clearInterval(this.updateInterval)
    }
    ,
    UTMarketSearchResultsViewController.prototype.setItemListViewDelegate = function(e) {
        this.itemListViewDelegate = e
    }
    ,
    UTMarketSearchResultsViewController.prototype.setPinnedItem = function(e) {
        this.compareItem = e,
        this.hasLoaded && !this.pinnedListItem && this._generatePinnedItemView()
    }
    ,
    UTMarketSearchResultsViewController.prototype.setSelectedItem = function(e) {
        this.selectedItem = e
    }
    ,
    UTMarketSearchResultsViewController.prototype.getSelectedItem = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationViewModel) || void 0 === e ? void 0 : e.getCurrentItem()) && void 0 !== t ? t : null
    }
    ,
    UTMarketSearchResultsViewController.prototype._generatePinnedItemView = function() {
        var e, t, i = null !== (t = null === (e = this.squadContext) || void 0 === e ? void 0 : e.getCurrentSlot()) && void 0 !== t ? t : null;
        if (this.pinnedListItem = new UTPinnedItemViewController,
        DebugUtils.Assert(JSUtils.isValid(this.compareItem), "Expected a comparison item to pin."),
        this.compareItem) {
            if (this.pinnedListItem.initWithItem(this.compareItem),
            i && !this.compareItem.isManager() && i.index < UTSquadEntity.FIELD_PLAYERS) {
                var o = new UTSquadSlotChemistryPointsView;
                o.isItemView(),
                o.render(i.chemistry, 0, i.inPossiblePosition),
                o.setState(UTSquadSlotChemistryPointsView.State.NEUTRAL);
                var n = this.pinnedListItem.getView();
                n.setChemistryPointsComponent(o),
                n.renderChemistryBreakdown(i.chemistry, i.nationChemistryPoints, i.leagueChemistryPoints, i.clubChemistryPoints)
            }
            this.addChildViewController(this.pinnedListItem),
            this.getView().appendPinnedItemView(this.pinnedListItem.getView())
        }
    }
    ,
    UTMarketSearchResultsViewController.prototype._requestItems = function(C) {
        var S = this;
        if (DebugUtils.Assert(JSUtils.isValid(this.searchCriteria), "Missing search criteria object when requesting items."),
        this.searchCriteria) {
            services.Module.set(3355443200),
            this.paginationViewModel.stopAuctionUpdates(),
            services.Item.searchTransferMarket(this.searchCriteria, C).observe(this, function(e, t) {
                var i, o, n, r, s, a;
                if (e.unobserve(S),
                !t.success || !JSUtils.isObject(t.data))
                    return NetworkErrorManager.checkCriticalStatus(t.status) ? void NetworkErrorManager.handleStatus(t.status) : (services.Notification.queue([services.Localization.localize("popup.error.searcherror"), UINotificationType.NEGATIVE]),
                    void (null === (a = S.getNavigationController()) || void 0 === a || a.popViewController()));
                if (DebugUtils.Assert(JSUtils.isValid(S.searchCriteria), "Missing search criteria object when requesting items."),
                S.searchCriteria) {
                    if (0 < S.searchCriteria.offset && 0 === t.data.items.length)
                        S._requestItems(C - 1);
                    else {
                        var l = S.getView()
                          , c = null !== (o = null === (i = S.squadContext) || void 0 === i ? void 0 : i.getSquad()) && void 0 !== o ? o : null
                          , u = null !== (r = null === (n = S.squadContext) || void 0 === n ? void 0 : n.getCurrentSlot()) && void 0 !== r ? r : null
                          , d = S.paginationViewModel.getNumItemsPerPage()
                          , h = t.data.items.slice();
                        S.onDataChange.notify({
                            items: h
                        }),
                        h.length > d && (h = h.slice(0, d)),
                        S.paginationViewModel.setPageItems(h),
                        S.paginationViewModel.setPageIndex(C);
                        var p = S.paginationViewModel.getCurrentPageItems();
                        if (S.selectedItem && 0 < h.length) {
                            var _ = S.paginationViewModel.getIndexByItemId(Number(S.selectedItem.id));
                            0 < _ && S.paginationViewModel.setIndex(_),
                            S.selectedItem = null
                        }
                        if (c && u && S.compareItem && (u.index < UTSquadEntity.FIELD_PLAYERS || u.item.isManager())) {
                            var f = []
                              , m = []
                              , T = []
                              , v = [];
                            p.forEach(function(t) {
                                var e = c.getPlayers().map(function(e) {
                                    return e.index === u.index ? t : e.item
                                })
                                  , i = u.item.isManager() ? t : c.getManager().item
                                  , o = c.getFormation()
                                  , n = 0;
                                if (o) {
                                    var r = S.chemCalculator.calculate(o, e, i);
                                    if (n = r.chemistry,
                                    !t.isManager()) {
                                        var s = r.getSlotChemistry(u.index).points;
                                        T.push(s),
                                        v.push(s - u.chemistry)
                                    }
                                } else if (!t.isManager()) {
                                    var a = u.chemistry;
                                    T.push(0),
                                    v.push(0 - a)
                                }
                                f.push(n),
                                m.push(n - c.getChemistry())
                            }, S),
                            l.setItemsWithChemDiff(p, f, m, T, v)
                        } else
                            l.setItems(p);
                        if (l.setPaginationState(1 < C, t.data.items.length > d),
                        JSUtils.isValid(S.compareItem) && !S.squadContext) {
                            var y = S.compareItem
                              , g = JSUtils.find(h, function(e) {
                                return e.getAuctionData().tradeId === y.getAuctionData().tradeId
                            });
                            JSUtils.isValid(g) ? null === (s = S.pinnedListItem) || void 0 === s || s.setItem(g) : S.paginationViewModel.setPinnedItem(S.compareItem)
                        } else if (!isPhone() && 0 < h.length) {
                            var w = S.paginationViewModel.getCurrentItem();
                            w && l.selectListRow(Number(w.id))
                        }
                    }
                    S.paginationViewModel.startAuctionUpdates()
                }
            })
        }
    }
    ,
    UTMarketSearchResultsViewController.prototype.getIterator = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationViewModel) || void 0 === e ? void 0 : e.getIterator()) && void 0 !== t ? t : null
    }
    ,
    UTMarketSearchResultsViewController.prototype.removeItemsById = function(e) {
        var t, i;
        if (0 < this.paginationViewModel.getItemCount()) {
            var o = this.getView()
              , n = Number(null !== (i = null === (t = this.paginationViewModel.getCurrentItem()) || void 0 === t ? void 0 : t.id) && void 0 !== i ? i : 0);
            o.removeItemsById(e),
            o.selectListRow(n)
        } else
            this.refreshList()
    }
    ,
    UTMarketSearchResultsViewController.prototype.refreshList = function() {
        var e, t, i, o, n = this.getView();
        if (this.compareItem && -1 === this.paginationViewModel.getIndexByItemId(Number(this.compareItem.id)))
            return void (null === (e = this.getNavigationController()) || void 0 === e || e.popViewController());
        if (n.setItems(this.paginationViewModel.getCurrentPageItems()),
        JSUtils.isValid(this.pinnedListItem))
            this.pinnedListItem.refresh();
        else {
            var r = Number(null !== (o = null === (i = null === (t = this.paginationViewModel) || void 0 === t ? void 0 : t.getCurrentItem()) || void 0 === i ? void 0 : i.id) && void 0 !== o ? o : 0);
            n.selectListRow(r)
        }
    }
    ,
    UTMarketSearchResultsViewController.prototype._ePrevPage = function(e, t, i) {
        this._requestItems(this.paginationViewModel.getPrevPageIndex())
    }
    ,
    UTMarketSearchResultsViewController.prototype._eNextPage = function(e, t, i) {
        this._requestItems(this.paginationViewModel.getNextPageIndex())
    }
    ,
    UTMarketSearchResultsViewController.prototype._eRowSelected = function(e, t, i) {
        var o, n = null !== (o = i.item) && void 0 !== o ? o : null, r = JSUtils.isValid(n) ? this.paginationViewModel.getIndexByItemId(n.id) : 0;
        if (n) {
            var s = n.getAuctionData()
              , a = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED)
              , l = r !== this.paginationViewModel.getIndex();
            if (!a && (s.isActiveTrade() || s.isClosedTrade()))
                return void utils.PopupManager.showAlert(utils.PopupManager.Alerts.TRADING_DISABLED);
            if (l && this.paginationViewModel.setIndex(r),
            JSUtils.isValid(this.itemListViewDelegate))
                l && this.itemListViewDelegate.selectListRow(this, r, n);
            else {
                var c = this.getNavigationController();
                if (c) {
                    var u = new UTItemDetailsViewController;
                    this.squadContext && u.setSquadContext(this.squadContext),
                    u.initWithIterator(this.paginationViewModel.getIterator()),
                    u.enablePriceComparison(!JSUtils.isValid(this.pinnedListItem)),
                    c.pushViewController(u, !0)
                }
            }
        }
    }
    ,
    UTMarketSearchResultsViewController.prototype._eViewmodelDataUpdated = function(e) {
        this.getView().onTimedUpdate()
    }
    ,
    UTMarketSearchResultsViewController.prototype._arbitraryViewUpdate = function() {
        this.getView().onTimedUpdate()
    }
    ,
    UTMarketSearchResultsViewController.prototype._nInfoStateChanged = function(e, t, i) {
        TelemetryManager.trackEvent(TelemetryManager.Sections.AUCTIONS, TelemetryManager.Categories.BUTTON_PRESS, "Item Info Switch Button - Transfer Market Search Results")
    }
    ,
    UTMarketSearchResultsViewController
}(EAViewController)
  , UTMarketSearchResultsSplitViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(o) {
    function UTMarketSearchResultsSplitViewController() {
        var e = o.call(this) || this;
        return e._listController = new UTMarketSearchResultsViewController,
        e._itemDetailController = new UTItemDetailsNavigationController,
        e
    }
    return __extends(UTMarketSearchResultsSplitViewController, o),
    UTMarketSearchResultsSplitViewController.prototype.init = function() {
        if (!this.initialized) {
            o.prototype.init.call(this),
            this._listController.init(),
            this._listController.setItemListViewDelegate(this),
            this._listController.onDataChange.observe(this, this._eListDataChanged);
            var e = this._listController.getView()
              , t = this._listController.getIterator();
            e.addTarget(this, this._ePageChange, enums.UIPaginationEvent.NEXT),
            e.addTarget(this, this._ePageChange, enums.UIPaginationEvent.PREVIOUS),
            t ? this._itemDetailController.initWithIterator(t) : this._itemDetailController.init(),
            this._itemDetailController.enableSwiping(!1),
            this.addChildViewController(this._listController),
            this.addChildViewController(this._itemDetailController);
            var i = getDefaultDispatcher();
            i.addObserver(AppNotification.ITEM_DISCARD, this, this._nItemDiscarded),
            i.addObserver(AppNotification.ITEM_LIST, this, this._nItemListed),
            i.addObserver(AppNotification.ITEM_MOVE, this, this._nItemMoved)
        }
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.initWithSearchCriteria = function(e) {
        this.initialized || (this._listController.initWithSearchCriteria(e),
        this.init())
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.dealloc = function() {
        this._itemDetailController.dealloc(),
        this._listController.dealloc();
        var e = getDefaultDispatcher();
        e.removeObserver(AppNotification.ITEM_DISCARD, this),
        e.removeObserver(AppNotification.ITEM_LIST, this),
        e.removeObserver(AppNotification.ITEM_MOVE, this),
        o.prototype.dealloc.call(this)
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.getNavigationTitle = function() {
        return this._listController.getNavigationTitle()
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.viewDidAppear = function() {
        o.prototype.viewDidAppear.call(this),
        this.setLeftController(this._listController),
        this._itemDetailController.setNavigationStyle(UTNavigationBarView.Style.SECONDARY)
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.setPinnedItem = function(e) {
        var t;
        this._listController && (null === (t = this._listController) || void 0 === t || t.setPinnedItem(e))
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.setSelectedItem = function(e) {
        this._listController.setSelectedItem(e)
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.getSelectedItem = function() {
        return this._listController.getSelectedItem()
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype.selectListRow = function(e, t, i) {
        e === this._listController && (this._listController.getView().selectListRow(Number(i.id)),
        this._itemDetailController.setIndex(t))
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype._eListDataChanged = function(e, t) {
        var i, o;
        if (t.items)
            if (0 < t.items.length) {
                var n = null !== (o = null === (i = this._listController.getIterator()) || void 0 === i ? void 0 : i.getIndex()) && void 0 !== o ? o : 0;
                this.setRightController(this._itemDetailController),
                this._itemDetailController.setIndex(n)
            } else
                this.removeRightController()
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype._ePageChange = function(e, t, i) {
        this._itemDetailController.onPageChange()
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype._nItemDiscarded = function(e, t, i) {
        this._listController.removeItemsById(i.itemIds || [])
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype._nItemListed = function(e, t, i) {
        this._listController.removeItemsById(i.itemIds || [])
    }
    ,
    UTMarketSearchResultsSplitViewController.prototype._nItemMoved = function(e, t, i) {
        this._listController.removeItemsById(i.itemIds || [])
    }
    ,
    UTMarketSearchResultsSplitViewController
}(UTSplitViewController))
  , UTBucketedItemSearchViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTBucketedItemSearchViewModel() {
        var e = t.call(this) || this;
        return e.searchBucket = SearchBucket.PLAYER,
        e.showCategoryTab = !0,
        e
    }
    return __extends(UTBucketedItemSearchViewModel, t),
    UTBucketedItemSearchViewModel.prototype.resetSearch = function() {
        t.prototype.resetSearch.call(this),
        this.updateSearchType()
    }
    ,
    UTBucketedItemSearchViewModel.prototype.mapCategoryToCategoryGroup = function(e) {
        switch (e) {
        case SearchCategory.BADGE:
        case SearchCategory.BALL:
        case SearchCategory.KIT:
        case SearchCategory.VANITY_AUDIO_ANTHEM_MUSIC:
        case SearchCategory.VANITY_AUDIO_CLUB_NICKNAME:
        case SearchCategory.VANITY_AUDIO_CROWD_CHANT:
        case SearchCategory.VANITY_AUDIO_GOAL_SCORE:
        case SearchCategory.VANITY_PLAYER_CELEBRATION:
            return SearchCategoryGroup.CLUB;
        case SearchCategory.STADIUM:
        case SearchCategory.VANITY_STADIUM_THEME:
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN:
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_LINE_COLOR:
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_GOAL_PACKAGE:
        case SearchCategory.VANITY_STADIUM_BASE_SEAT_COLOR:
        case SearchCategory.VANITY_STADIUM_BASE_STRUCTURE_COLOR:
        case SearchCategory.VANITY_PYROTECHNICS_FLAME_CANNON:
        case SearchCategory.VANITY_PYROTECHNICS_CONFETTI_CANNON:
        case SearchCategory.VANITY_PYROTECHNICS_FIREWORKS_CANNON:
        case SearchCategory.VANITY_PYROTECHNICS_SPARKLER_CANNON:
        case SearchCategory.VANITY_VIP_AREA:
            return SearchCategoryGroup.STRUCTURE;
        case SearchCategory.VANITY_TIFO_BASE:
        case SearchCategory.VANITY_TIFO_BIG:
        case SearchCategory.VANITY_STADIUM_BASE_PITCH_PROP:
        case SearchCategory.VANITY_POLE_BANNER:
        case SearchCategory.VANITY_TIFO_MOVING:
            return SearchCategoryGroup.COSMETICS;
        default:
            return SearchCategoryGroup.NONE
        }
    }
    ,
    UTBucketedItemSearchViewModel.prototype.updateSearchCriteria = function(e) {
        t.prototype.updateSearchCriteria.call(this, e),
        this.searchBucket = this.getBucketFromType(e.type),
        this.searchCategoryGroup = this.mapCategoryToCategoryGroup(e.category)
    }
    ,
    UTBucketedItemSearchViewModel.prototype.updateSearchType = function() {
        this.searchBucket === SearchBucket.PLAYER ? (this.searchCriteria.type = SearchType.PLAYER,
        this.defaultSearchCriteria.type = SearchType.PLAYER) : this.searchBucket === SearchBucket.STAFF ? (this.searchCriteria.type = SearchType.STAFF,
        this.searchCriteria.category = SearchCategory.MANAGER,
        this.defaultSearchCriteria.type = SearchType.STAFF,
        this.defaultSearchCriteria.category = SearchCategory.MANAGER) : this.searchBucket === SearchBucket.CLUB ? (this.searchCriteria.type = SearchType.CLUB_INFO,
        this.defaultSearchCriteria.type = SearchType.CLUB_INFO) : this.searchBucket === SearchBucket.CONSUMABLE && (this.searchCriteria.type = SearchType.CONSUMABLES_TRAINING,
        this.defaultSearchCriteria.type = SearchType.CONSUMABLES_TRAINING)
    }
    ,
    UTBucketedItemSearchViewModel.prototype.setSearchBucket = function(e) {
        this.searchBucket === SearchBucket.CLUB && e !== SearchBucket.CLUB ? this.searchCategoryGroup = SearchCategoryGroup.NONE : this.searchBucket !== SearchBucket.CLUB && e === SearchBucket.CLUB && (this.searchCategoryGroup = SearchCategoryGroup.CLUB),
        this.searchBucket = e,
        this.updateSearchType()
    }
    ,
    UTBucketedItemSearchViewModel.prototype.setCategoryTabVisible = function(e) {
        this.showCategoryTab = e
    }
    ,
    UTBucketedItemSearchViewModel.prototype.getCategoryTabVisible = function() {
        return this.showCategoryTab
    }
    ,
    UTBucketedItemSearchViewModel
}(UTItemSearchViewModel))
  , UTNumberInputControl = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTNumberInputControl() {
        var e = t.call(this) || this;
        return e.maxValue = Number.MAX_SAFE_INTEGER,
        e.minValue = Number.MIN_SAFE_INTEGER,
        e
    }
    return __extends(UTNumberInputControl, t),
    UTNumberInputControl.prototype.getInputValue = function() {
        var e = this.getRootElement()
          , t = JSUtils.parseNumber(e.value, services.Localization.locale.toBCPString());
        return JSUtils.isNumber(t) ? t : 0
    }
    ,
    UTNumberInputControl.prototype.setInputValue = function(e) {
        e > this.maxValue ? e = this.maxValue : e < this.minValue && (e = this.minValue),
        this.getRootElement().value = services.Localization.localizeNumber(e)
    }
    ,
    UTNumberInputControl.prototype.setInputPlaceholder = function(e) {
        this.getRootElement().setAttribute("placeholder", e)
    }
    ,
    Object.defineProperty(UTNumberInputControl.prototype, "value", {
        get: function() {
            return this.getInputValue()
        },
        set: function(e) {
            this.setInputValue(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTNumberInputControl.prototype, "placeholder", {
        set: function(e) {
            this.setInputPlaceholder(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    UTNumberInputControl.prototype.init = function() {
        t.prototype.init.call(this),
        this.setPlaceholder(services.Localization.localize("roles.defaultRole")),
        this.setInteractionState(!0)
    }
    ,
    UTNumberInputControl.prototype.dealloc = function() {
        window.clearTimeout(this.selectionTimeout),
        this.selectionTimeout = 0,
        t.prototype.dealloc.call(this)
    }
    ,
    UTNumberInputControl.prototype._startHandlingEvents = function(e) {
        t.prototype._startHandlingEvents.call(this, e),
        this.eventElement && (this._addListener(EventType.CHANGE, this.eventElement, this.onChange.bind(this)),
        this._addListener(EventType.FOCUS, this.eventElement, this.onFocus.bind(this)),
        this._addListener(EventType.BLUR, this.eventElement, this.onBlur.bind(this)))
    }
    ,
    UTNumberInputControl.prototype.setInteractionState = function(e) {
        if (this._setInteractionStateFlag(e)) {
            var t = this.getRootElement();
            this._interactionState ? this._startHandlingEvents(this.getRootElement()) : this._stopHandlingEvents(!0),
            t.disabled = !this._interactionState,
            this.toggleClass(enums.UIState.DISABLED, !this._interactionState),
            this._interactionState || t !== document.activeElement || t.blur()
        }
    }
    ,
    UTNumberInputControl.prototype.reset = function() {
        this.value = 0
    }
    ,
    UTNumberInputControl.prototype.setPlaceholder = function(e) {
        this.placeholder = e
    }
    ,
    UTNumberInputControl.prototype.setValue = function(e) {
        this.value = e
    }
    ,
    UTNumberInputControl.prototype.getValue = function() {
        return this.value
    }
    ,
    UTNumberInputControl.prototype.setMinValue = function(e) {
        e < Number.MIN_SAFE_INTEGER ? this.minValue = Number.MIN_SAFE_INTEGER : e > Number.MAX_SAFE_INTEGER ? this.minValue = Number.MAX_SAFE_INTEGER : e !== this.minValue && (this.minValue = e),
        this.maxValue < this.minValue && (this.maxValue = this.minValue),
        this.getValue() < this.minValue && this.setValue(this.minValue)
    }
    ,
    UTNumberInputControl.prototype.getMinValue = function() {
        return this.minValue
    }
    ,
    UTNumberInputControl.prototype.setMaxValue = function(e) {
        e > Number.MAX_SAFE_INTEGER ? this.maxValue = Number.MAX_SAFE_INTEGER : e < Number.MIN_SAFE_INTEGER ? this.maxValue = Number.MIN_SAFE_INTEGER : e !== this.maxValue && (this.maxValue = e,
        this.minValue = Math.min(this.minValue, this.maxValue)),
        this.minValue > this.maxValue && (this.minValue = this.maxValue),
        this.getValue() > this.maxValue && this.setValue(this.maxValue)
    }
    ,
    UTNumberInputControl.prototype.getMaxValue = function() {
        return this.maxValue
    }
    ,
    UTNumberInputControl.prototype.sanitizeValue = function() {
        var e = this.getRootElement()
          , t = JSUtils.parseNumber(e.value, services.Localization.locale.toBCPString());
        return JSUtils.isNumber(t) ? t > this.maxValue ? t = this.maxValue : t < this.minValue && (t = this.minValue) : t = 0,
        e.value = services.Localization.localizeNumber(t),
        t
    }
    ,
    UTNumberInputControl.prototype.onFocus = function(e) {
        var t = this.getRootElement();
        t.value = t.value.replace(/\D/g, ""),
        this.selectionTimeout = window.setTimeout(function() {
            return t.setSelectionRange(0, t.value.length)
        }, 50),
        this._triggerActions(EventType.FOCUS)
    }
    ,
    UTNumberInputControl.prototype.onBlur = function(e) {
        clearTimeout(this.selectionTimeout),
        this.selectionTimeout = 0,
        this.sanitizeValue(),
        this._triggerActions(EventType.BLUR)
    }
    ,
    UTNumberInputControl.prototype.onChange = function(e) {
        var t = this.sanitizeValue();
        this._triggerActions(EventType.CHANGE, t)
    }
    ,
    UTNumberInputControl
}(UTControl));
UTNumberInputControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("input");
        e.setAttribute("type", "tel"),
        e.classList.add("ut-number-input-control"),
        this.__root = e,
        this._generated = !0
    }
}
,
UTNumberInputControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTNumberInputControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTDoubleRangeControl = function(t) {
    function UTDoubleRangeControl() {
        var i = t.call(this) || this;
        return i.latestSetMin = UTDoubleRangeControl.DEFAULT_ABSOLUTE_MIN,
        i.latestSetMax = UTDoubleRangeControl.DEFAULT_ABSOLUTE_MAX,
        i._debouncedSetMinValue = JSUtils.debounce(function(e, t) {
            JSUtils.isValid(i.__rangeSliderMinInput) && (i._setValue(e, i.__rangeSliderMinInput),
            i._handleMinInputChange(t))
        }, UTDoubleRangeControl.SET_VALUE_DEBOUCE_MS),
        i._debouncedSetMaxValue = JSUtils.debounce(function(e, t) {
            JSUtils.isValid(i.__rangeSliderMaxInput) && (i._setValue(e, i.__rangeSliderMaxInput),
            i._handleMaxInputChange(t))
        }, UTDoubleRangeControl.SET_VALUE_DEBOUCE_MS),
        i
    }
    return __extends(UTDoubleRangeControl, t),
    UTDoubleRangeControl.prototype.init = function() {
        t.prototype.init.call(this),
        this._rangeSliderMinTextInput.init(),
        this._rangeSliderMaxTextInput.init(),
        this.setInteractionState(!0)
    }
    ,
    UTDoubleRangeControl.prototype.initWith = function(e, t, i, o, n) {
        void 0 === n && (n = UTDoubleRangeControl.DEFAULT_STEP),
        this.init(),
        this.setStep(n),
        this.latestSetMin = e,
        this.latestSetMax = t,
        this.setAbsoluteMin(e),
        this.setAbsoluteMax(t),
        this._setValue(e, this.__rangeSliderMinInput),
        this._setValue(t, this.__rangeSliderMaxInput),
        this.setMinTitle(i),
        this.setMaxTitle(o),
        this._refresh()
    }
    ,
    UTDoubleRangeControl.prototype.setInteractionState = function(e) {
        this._rangeSliderMaxTextInput.setInteractionState(e),
        this._rangeSliderMinTextInput.setInteractionState(e),
        t.prototype.setInteractionState.call(this, e)
    }
    ,
    UTDoubleRangeControl.prototype._startHandlingEvents = function(e) {
        t.prototype._startHandlingEvents.call(this, e),
        this.eventElement && (this._addListener(EventType.INPUT, this.__rangeSliderMinInput, this._onSliderMinInputChanged.bind(this)),
        this._rangeSliderMinTextInput.addTarget(this, this._onSliderMinTextInputChanged, EventType.CHANGE),
        this._addListener(EventType.INPUT, this.__rangeSliderMaxInput, this._onSliderMaxInputChanged.bind(this)),
        this._rangeSliderMaxTextInput.addTarget(this, this._onSliderMaxTextInputChanged, EventType.CHANGE))
    }
    ,
    UTDoubleRangeControl.prototype.setMaxTitle = function(e) {
        this.__rangeSliderMaxTitle.textContent = e
    }
    ,
    UTDoubleRangeControl.prototype.setMinTitle = function(e) {
        this.__rangeSliderMinTitle.textContent = e
    }
    ,
    UTDoubleRangeControl.prototype.setAbsoluteMin = function(e) {
        var t = e.toString();
        this._setAbsoluteValue("min", t, this.__rangeSliderMinInput),
        this._setAbsoluteValue("min", t, this.__rangeSliderMaxInput),
        this.setMinValue(this.latestSetMin),
        this.setMaxValue(this.latestSetMax)
    }
    ,
    UTDoubleRangeControl.prototype.getAbsoluteMin = function() {
        return Number(this.__rangeSliderMinInput.getAttribute("min"))
    }
    ,
    UTDoubleRangeControl.prototype.setAbsoluteMax = function(e) {
        var t = e.toString();
        this._setAbsoluteValue("max", t, this.__rangeSliderMinInput),
        this._setAbsoluteValue("max", t, this.__rangeSliderMaxInput),
        this.setMinValue(this.latestSetMin),
        this.setMaxValue(this.latestSetMax)
    }
    ,
    UTDoubleRangeControl.prototype.getAbsoluteMax = function() {
        return Number(this.__rangeSliderMaxInput.getAttribute("max"))
    }
    ,
    UTDoubleRangeControl.prototype._setAbsoluteValue = function(e, t, i) {
        t !== i.getAttribute(e) && i.setAttribute(e, t)
    }
    ,
    UTDoubleRangeControl.prototype.setStep = function(e) {
        this._setStep(e, this.__rangeSliderMinInput),
        this._setStep(e, this.__rangeSliderMaxInput)
    }
    ,
    UTDoubleRangeControl.prototype._setStep = function(e, t) {
        var i = e.toString();
        i !== t.getAttribute("step") && t.setAttribute("step", i)
    }
    ,
    UTDoubleRangeControl.prototype.getStep = function() {
        return Number(this.__rangeSliderMinInput.getAttribute("step"))
    }
    ,
    UTDoubleRangeControl.prototype.setMinValue = function(e, t) {
        void 0 === t && (t = !1),
        this._debouncedSetMinValue(e, t)
    }
    ,
    UTDoubleRangeControl.prototype.setMaxValue = function(e, t) {
        void 0 === t && (t = !1),
        this._debouncedSetMaxValue(e, t)
    }
    ,
    UTDoubleRangeControl.prototype._setValue = function(e, t) {
        t.value = e.toString()
    }
    ,
    UTDoubleRangeControl.prototype.getMinValue = function() {
        return Number(this.__rangeSliderMinInput.value)
    }
    ,
    UTDoubleRangeControl.prototype.getMaxValue = function() {
        return Number(this.__rangeSliderMaxInput.value)
    }
    ,
    UTDoubleRangeControl.prototype.reset = function() {
        this.setMinValue(this.getAbsoluteMin()),
        this.setMaxValue(this.getAbsoluteMax(), !0)
    }
    ,
    UTDoubleRangeControl.prototype._refresh = function() {
        this._handleMinInputChange(),
        this._handleMaxInputChange()
    }
    ,
    UTDoubleRangeControl.prototype._onSliderMinInputChanged = function(e) {
        this._handleMinInputChange(!0)
    }
    ,
    UTDoubleRangeControl.prototype._handleMinInputChange = function(e) {
        void 0 === e && (e = !1);
        var t = this.getMinValue();
        t > this.latestSetMax && (t = this.latestSetMax),
        t < this.getAbsoluteMin() && (t = this.getAbsoluteMin()),
        this._rangeSliderMinTextInput.value = t,
        this.__rangeSliderMinInput.value = t.toString(),
        this._updateTextFieldPossibleRangeValues(),
        this._updateFillSpanLength(),
        t !== this.latestSetMin && (this.latestSetMin = t,
        e && this._notifyInputListeners())
    }
    ,
    UTDoubleRangeControl.prototype._onSliderMinTextInputChanged = function(e, t, i) {
        var o = Number(this._rangeSliderMinTextInput.value);
        o !== this.latestSetMin && (this.__rangeSliderMinInput.value = o.toString(),
        this._handleMinInputChange(!0))
    }
    ,
    UTDoubleRangeControl.prototype._onSliderMaxInputChanged = function(e) {
        this._handleMaxInputChange(!0)
    }
    ,
    UTDoubleRangeControl.prototype._handleMaxInputChange = function(e) {
        void 0 === e && (e = !1);
        var t = this.getMaxValue();
        t < this.latestSetMin && (t = this.latestSetMin),
        t < this.getAbsoluteMin() && (t = this.getAbsoluteMin()),
        this._rangeSliderMaxTextInput.value = t,
        this.__rangeSliderMaxInput.value = t.toString(),
        this._updateFillSpanLength(),
        t !== this.latestSetMax && (this.latestSetMax = t,
        e && this._notifyInputListeners())
    }
    ,
    UTDoubleRangeControl.prototype._onSliderMaxTextInputChanged = function(e, t, i) {
        var o = Number(this._rangeSliderMaxTextInput.value);
        o !== this.latestSetMax && (this.__rangeSliderMaxInput.value = o.toString(),
        this._handleMaxInputChange(!0))
    }
    ,
    UTDoubleRangeControl.prototype._updateTextFieldPossibleRangeValues = function() {
        this._rangeSliderMinTextInput.setMinValue(this.getAbsoluteMin()),
        this._rangeSliderMinTextInput.setMaxValue(this.getMaxValue()),
        this._rangeSliderMaxTextInput.setMinValue(this.getMinValue()),
        this._rangeSliderMaxTextInput.setMaxValue(this.getAbsoluteMax())
    }
    ,
    UTDoubleRangeControl.prototype._notifyInputListeners = function() {
        this._triggerActions(EventType.INPUT, {
            min: this.latestSetMin,
            max: this.latestSetMax
        }),
        this.setInteractionState(!0)
    }
    ,
    UTDoubleRangeControl.prototype._updateFillSpanLength = function() {
        var e = this.getAbsoluteMin()
          , t = this.getAbsoluteMax()
          , i = this.getMinValue()
          , o = this.getMaxValue()
          , n = 1;
        e < t ? n = 100 / (t - e) : console.error("Absolute max " + t + " and min, " + e + " values are not valid."),
        this.__rangeSliderFillSpan.style.left = (i - e) * n + "%",
        this.__rangeSliderFillSpan.style.right = 100 - (o - e) * n + "%"
    }
    ,
    UTDoubleRangeControl.DEFAULT_STEP = 1,
    UTDoubleRangeControl.DEFAULT_ABSOLUTE_MIN = 0,
    UTDoubleRangeControl.DEFAULT_ABSOLUTE_MAX = 100,
    UTDoubleRangeControl.SET_VALUE_DEBOUCE_MS = 100,
    UTDoubleRangeControl
}(UTControl);
UTDoubleRangeControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-double-range-control");
        var t = document.createElement("div");
        t.classList.add("range-slider"),
        this.__rangeSliderFillSpan = document.createElement("span"),
        this.__rangeSliderFillSpan.classList.add("range-fill"),
        t.appendChild(this.__rangeSliderFillSpan),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("range-input"),
        this.__rangeSliderMinInput = document.createElement("input"),
        this.__rangeSliderMinInput.setAttribute("type", "range"),
        this.__rangeSliderMinInput.classList.add("min"),
        i.appendChild(this.__rangeSliderMinInput),
        this.__rangeSliderMaxInput = document.createElement("input"),
        this.__rangeSliderMaxInput.setAttribute("type", "range"),
        this.__rangeSliderMaxInput.classList.add("max"),
        i.appendChild(this.__rangeSliderMaxInput),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("text-input-container");
        var n = document.createElement("div");
        n.classList.add("titles"),
        this.__rangeSliderMinTitle = document.createElement("label"),
        n.appendChild(this.__rangeSliderMinTitle),
        this.__rangeSliderMaxTitle = document.createElement("label"),
        n.appendChild(this.__rangeSliderMaxTitle),
        o.appendChild(n);
        var r = document.createElement("div");
        r.classList.add("inputs"),
        this._rangeSliderMinTextInput = new UTNumberInputControl,
        r.appendChild(this._rangeSliderMinTextInput.getRootElement()),
        this._rangeSliderMaxTextInput = new UTNumberInputControl,
        r.appendChild(this._rangeSliderMaxTextInput.getRootElement()),
        o.appendChild(r),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTDoubleRangeControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__rangeSliderFillSpan = null,
    this.__rangeSliderMinInput = null,
    this.__rangeSliderMaxInput = null,
    this.__rangeSliderMinTitle = null,
    this.__rangeSliderMaxTitle = null,
    this._rangeSliderMinTextInput.destroy(),
    this._rangeSliderMaxTextInput.destroy()
}
,
UTDoubleRangeControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTextInputControl = function(t) {
    function UTTextInputControl() {
        var e = t.call(this) || this;
        return e.blurTimeout = 0,
        e.selectionTimeout = 0,
        e
    }
    return __extends(UTTextInputControl, t),
    Object.defineProperty(UTTextInputControl.prototype, "value", {
        get: function() {
            return this.getRootElement().value
        },
        set: function(e) {
            this.getRootElement().value = e
        },
        enumerable: !1,
        configurable: !0
    }),
    UTTextInputControl.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTTextInputControl.prototype.dealloc = function() {
        clearTimeout(this.selectionTimeout),
        clearTimeout(this.blurTimeout),
        this.selectionTimeout = 0,
        this.blurTimeout = 0,
        t.prototype.dealloc.call(this)
    }
    ,
    UTTextInputControl.prototype.setInteractionState = function(e) {
        if (this._setInteractionStateFlag(e)) {
            var t = this.getRootElement()
              , i = "textEvent";
            this.toggleClass(enums.UIState.DISABLED, !this._interactionState),
            this._interactionState ? (t.removeAttribute("disabled"),
            this._addListener(EventType.FOCUS, t, this.handleFocusEvent.bind(this), i),
            this._addListener(EventType.BLUR, t, this.handleBlurEvent.bind(this), i),
            this._addListener(EventType.CHANGE, t, this.handleChangeEvent.bind(this), i),
            this._addListener(EventType.INPUT, t, this.handleInputEvent.bind(this), i),
            this._addListener(EventType.CUT, t, this.handleInputEvent.bind(this), i),
            this._addListener(EventType.PASTE, t, this.handleInputEvent.bind(this), i)) : (this.blur(),
            t.setAttribute("disabled", "disabled"),
            this._removeListenersByNS(i))
        }
    }
    ,
    UTTextInputControl.prototype.getValue = function() {
        return this.value
    }
    ,
    UTTextInputControl.prototype.setValue = function(e) {
        this.value = e
    }
    ,
    UTTextInputControl.prototype.getType = function() {
        var e;
        return null !== (e = this.getRootElement().getAttribute("type")) && void 0 !== e ? e : "text"
    }
    ,
    UTTextInputControl.prototype.setType = function(e) {
        this.getRootElement().setAttribute("type", e)
    }
    ,
    UTTextInputControl.prototype.setPlaceholder = function(e) {
        this.getRootElement().setAttribute("placeholder", e)
    }
    ,
    UTTextInputControl.prototype.setMaxLength = function(e) {
        this.getRootElement().setAttribute("maxlength", e.toString())
    }
    ,
    UTTextInputControl.prototype.clear = function() {
        this.value = ""
    }
    ,
    UTTextInputControl.prototype.handleChangeEvent = function(e) {
        this._triggerActions(EventType.CHANGE, {
            value: this.value
        })
    }
    ,
    UTTextInputControl.prototype.handleInputEvent = function(e) {
        this._triggerActions(EventType.INPUT, {
            value: this.value
        })
    }
    ,
    UTTextInputControl.prototype.handleFocusEvent = function(e) {
        var t = this;
        this.selectionTimeout = window.setTimeout(function() {
            var e = t.getRootElement();
            e.setSelectionRange(0, e.value.length)
        }, 50),
        this._triggerActions(EventType.FOCUS)
    }
    ,
    UTTextInputControl.prototype.handleBlurEvent = function(e) {
        clearTimeout(this.selectionTimeout),
        this.selectionTimeout = 0,
        this._triggerActions(EventType.BLUR)
    }
    ,
    UTTextInputControl.prototype.toggleReadOnly = function(e) {
        this.getRootElement().readOnly = e
    }
    ,
    UTTextInputControl
}(UTControl);
UTTextInputControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("input");
        e.setAttribute("type", "text"),
        e.classList.add("ut-text-input-control"),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTextInputControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTTextInputControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTPlayerSearchControl = function(t) {
    function UTPlayerSearchControl() {
        var e = t.call(this) || this;
        return e.closeTimeout = 0,
        e.currentName = "",
        e.currentQuery = [],
        e.inputChangeTimeout = 0,
        e.isOpen = !1,
        e.searchEngine = new UTPlayerSearchEngine(repositories.Item.getStaticData()),
        e.selected = null,
        e.timeout = 0,
        e.windowListener = e.windowTapCallback.bind(e),
        e.tapDelay = 0,
        e
    }
    return __extends(UTPlayerSearchControl, t),
    UTPlayerSearchControl.prototype.init = function() {
        var e = services.Localization;
        this._playerNameInput.init(),
        this._playerNameInput.addTarget(this, this.handleInputChange, EventType.INPUT),
        this._playerNameInput.setPlaceholder(e.localize("searchauctions.playersearch.inputcaption")),
        this._playerNameInput.setMaxLength(50),
        this.__playerNameTitle.textContent = e.localize("searchauctions.label.playername"),
        this.__ratingTitle.textContent = e.localize("squads.rating"),
        this.__playerResultsEmpty.textContent = e.localize("searchauctions.playersearch.noresults"),
        DOMKit.toggleDisplayStyle(this.__playerResultsEmpty, !1),
        DOMKit.toggleDisplayStyle(this.__playerResults, !1),
        this._clearButton.init(),
        this._clearButton.addTarget(this, this.handleClearBtnEvents, EventType.TAP),
        t.prototype.init.call(this)
    }
    ,
    UTPlayerSearchControl.prototype.dealloc = function() {
        clearTimeout(this.timeout),
        clearTimeout(this.closeTimeout),
        clearTimeout(this.inputChangeTimeout),
        this.clearList(),
        this.removeWindowListener(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTPlayerSearchControl.prototype.inputChange = function(e) {
        var t = this
          , i = !JSUtils.isEmpty(e);
        this.toggleClass("has-selection", i),
        clearTimeout(this.inputChangeTimeout),
        i ? this.addClass("contract-text-input") : this.inputChangeTimeout = window.setTimeout(function() {
            return t.removeClass("contract-text-input")
        }, this.tapDelay)
    }
    ,
    UTPlayerSearchControl.prototype.setInput = function(e) {
        this._playerNameInput.value = e,
        this.currentName = e,
        this.inputChange(e)
    }
    ,
    UTPlayerSearchControl.prototype.setPlayerData = function(e) {
        var t = e.commonName ? e.commonName : e.firstName + " " + e.lastName;
        this.selected = e,
        this.setInput(t)
    }
    ,
    UTPlayerSearchControl.prototype.getSelected = function() {
        return this.selected
    }
    ,
    UTPlayerSearchControl.prototype.clearInput = function() {
        this.setInput(""),
        this.selected = null
    }
    ,
    UTPlayerSearchControl.prototype.clearList = function() {
        this.currentQuery.forEach(function(e) {
            return e.dealloc()
        }),
        this.currentQuery = []
    }
    ,
    UTPlayerSearchControl.prototype.updateList = function(e, t) {
        var o = this;
        this.clearList(),
        DOMKit.toggleDisplayStyle(this.__playerResultsList, !JSUtils.isEmpty(e) && 0 < t.length),
        DOMKit.toggleDisplayStyle(this.__playerResultsEmpty, 0 === t.length || JSUtils.isEmpty(e)),
        this.open(),
        JSUtils.isValid(e) && t.forEach(function(e) {
            var t = e.commonName ? e.commonName : e.firstName + " " + e.lastName
              , i = new UTGroupButtonControl;
            i.init(),
            i.setText(t),
            i.setSubtext(e.rating.toString()),
            i.addTarget(o, function() {
                return o.selectPlayerEntry(e, t)
            }, EventType.TAP),
            o.currentQuery.push(i),
            o.__playerResultsList.appendChild(i.getRootElement())
        })
    }
    ,
    UTPlayerSearchControl.prototype.open = function() {
        var e = this;
        this.isOpen || (this.isOpen = !0,
        clearTimeout(this.closeTimeout),
        requestAnimationFrame(function() {
            e.addClass("is-open"),
            e.addWindowListener(),
            DOMKit.toggleDisplayStyle(e.__playerResults, !0)
        }))
    }
    ,
    UTPlayerSearchControl.prototype.close = function() {
        var e = this;
        this.isOpen && (this.isOpen = !1,
        clearTimeout(this.closeTimeout),
        this.closeTimeout = window.setTimeout(function() {
            e.removeClass("is-open"),
            DOMKit.toggleDisplayStyle(e.__playerResults, !1),
            e.clearList(),
            e.setInput(e.currentName),
            e.removeWindowListener(),
            clearTimeout(e.timeout),
            clearTimeout(e.closeTimeout)
        }, this.tapDelay))
    }
    ,
    UTPlayerSearchControl.prototype.selectPlayerEntry = function(e, t) {
        this.selected = e,
        this.setInput(t),
        this._triggerActions(EventType.CHANGE),
        this.close()
    }
    ,
    UTPlayerSearchControl.prototype.handleInputChange = function(e, t, i) {
        var o = this;
        JSUtils.isEmpty(i.value) && (this.clearInput(),
        this._triggerActions(EventType.CHANGE)),
        clearTimeout(this.timeout),
        this.timeout = window.setTimeout(function() {
            var e = i.value;
            o.inputChange(e),
            o.updateList(e, o.searchEngine.getEntriesForString(e, 5)),
            clearTimeout(o.timeout)
        }, 500)
    }
    ,
    UTPlayerSearchControl.prototype.windowTapCallback = function(e) {
        for (var t = e.target; t; ) {
            if (t === this.__root)
                return;
            t = t.parentNode
        }
        this.close()
    }
    ,
    UTPlayerSearchControl.prototype.removeWindowListener = function() {
        window.removeEventListener(EventType.MOUSEUP, this.windowListener, !1),
        window.removeEventListener(EventType.TOUCHEND, this.windowListener, !1)
    }
    ,
    UTPlayerSearchControl.prototype.addWindowListener = function() {
        this.removeWindowListener(),
        window.addEventListener(EventType.MOUSEUP, this.windowListener, !1),
        window.addEventListener(EventType.TOUCHEND, this.windowListener, !1)
    }
    ,
    UTPlayerSearchControl.prototype.handleClearBtnEvents = function(e, t, i) {
        t === EventType.TAP && (this.clearInput(),
        this._triggerActions(EventType.CHANGE),
        this.close())
    }
    ,
    UTPlayerSearchControl
}(UTControl);
UTPlayerSearchControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("inline-list-select"),
        e.classList.add("ut-player-search-control"),
        this.__animatedContainer = document.createElement("div"),
        this.__animatedContainer.classList.add("inline-container");
        var t = document.createElement("div");
        t.classList.add("ut-player-search-control--input-container");
        var i = document.createElement("span");
        i.classList.add("fut_icon"),
        i.classList.add("icon_magnifier"),
        t.appendChild(i),
        this._clearButton = new UTFlatButtonControl,
        this._clearButton.getRootElement().classList.add("inline-list-btn"),
        this._clearButton.getRootElement().classList.add("icon_close"),
        this._clearButton.getRootElement().classList.add("fut_icon"),
        this._clearButton.getRootElement().classList.add("exit-btn"),
        this._clearButton.getRootElement().classList.add("icon-btn"),
        t.appendChild(this._clearButton.getRootElement()),
        this._playerNameInput = new UTTextInputControl,
        t.appendChild(this._playerNameInput.getRootElement()),
        this.__animatedContainer.appendChild(t),
        this.__playerResults = document.createElement("div"),
        this.__playerResults.classList.add("inline-list");
        var o = document.createElement("div");
        o.classList.add("sectionHeader"),
        this.__playerNameTitle = document.createElement("span"),
        this.__playerNameTitle.classList.add("playerNameTitle"),
        o.appendChild(this.__playerNameTitle),
        this.__ratingTitle = document.createElement("span"),
        this.__ratingTitle.classList.add("ratingTitle"),
        o.appendChild(this.__ratingTitle),
        this.__playerResults.appendChild(o),
        this.__playerResultsList = document.createElement("ul"),
        this.__playerResultsList.classList.add("ut-button-group"),
        this.__playerResultsList.classList.add("playerResultsList"),
        this.__playerResults.appendChild(this.__playerResultsList),
        this.__playerResultsEmpty = document.createElement("div"),
        this.__playerResultsEmpty.classList.add("icon_negative"),
        this.__playerResultsEmpty.classList.add("playerResultsEmpty"),
        this.__playerResults.appendChild(this.__playerResultsEmpty),
        this.__animatedContainer.appendChild(this.__playerResults),
        e.appendChild(this.__animatedContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerSearchControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__animatedContainer = null,
    this._clearButton.destroy(),
    this._playerNameInput.destroy(),
    this.__playerResults = null,
    this.__playerNameTitle = null,
    this.__ratingTitle = null,
    this.__playerResultsList = null,
    this.__playerResultsEmpty = null
}
,
UTPlayerSearchControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTItemSearchView = function(i) {
    function UTItemSearchView() {
        var e = i.call(this) || this;
        return e.bucketFilterIconTables = new EAHashTable,
        e.filterIconTables = new EAHashTable,
        e.filters = [],
        e.onFilterChange = new EAObservable,
        e.onSearchModeChange = new EAObservable,
        e.pileFilter = null,
        e.pileFilterIcons = new EAHashTable,
        e.searchBucket = 0,
        e.searchFilters = new EAHashTable,
        e
    }
    return __extends(UTItemSearchView, i),
    UTItemSearchView.prototype.init = function() {
        i.prototype.init.call(this),
        this._playerNameSearch.init(),
        this.initOvrRangeOptions()
    }
    ,
    UTItemSearchView.prototype.initOvrRangeOptions = function() {
        var e = services.Localization;
        this._ovrRangeOptions.initWith(UTSearchCriteriaDTO.SEARCH_CRITERIA_DEFAULT_OVR_MIN, UTSearchCriteriaDTO.SEARCH_CRITERIA_DEFAULT_OVR_MAX, e.localize("search.ovrRange.input.min"), e.localize("search.ovrRange.input.max")),
        this.__ovrRangeTitle.textContent = e.localize("search.ovrRange.title"),
        this.__ovrRangeDescription.textContent = e.localize("search.ovrRange.description"),
        this._ovrRangeOptions.addTarget(this, this.handleOvrRangeChange, EventType.INPUT)
    }
    ,
    UTItemSearchView.prototype.dealloc = function() {
        this.pileFilter && (this.pileFilter.dealloc(),
        this.pileFilter = null),
        this.pileFilterIcons.clear(),
        this.clearFilters(),
        this.filterIconTables.forEach(function(e) {
            return e.clear()
        }),
        this.filterIconTables.clear(),
        this.bucketFilterIconTables.forEach(function(e) {
            return e.clear()
        }),
        this.bucketFilterIconTables.clear(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTItemSearchView.prototype.setInteractionState = function(t) {
        var e;
        this.filters.forEach(function(e) {
            return e.setInteractionState(t)
        }),
        this._playerNameSearch.setInteractionState(t),
        null === (e = this.pileFilter) || void 0 === e || e.setInteractionState(t),
        i.prototype.setInteractionState.call(this, t)
    }
    ,
    UTItemSearchView.prototype.clearFilters = function() {
        this.searchFilters.forEach(function(e) {
            return e.dealloc()
        }),
        this.searchFilters.clear(),
        this.filters = []
    }
    ,
    UTItemSearchView.prototype.resetFilters = function() {
        this.searchFilters.forEach(function(e) {
            return e.setIndex(e.getDefaultIndex())
        }),
        this.resetPlayerName(),
        this._ovrRangeOptions.reset()
    }
    ,
    UTItemSearchView.prototype.setFilterLock = function(e, t) {
        var i;
        null === (i = this.searchFilters.get(e)) || void 0 === i || i.setInteractionState(!t)
    }
    ,
    UTItemSearchView.prototype.setFilterImage = function(e) {
        e.image = this.generateFilterImage(e.setId, e.id, e.value)
    }
    ,
    UTItemSearchView.prototype.generatePileFilterIconTable = function() {
        return this.pileFilterIcons.set(ItemSearchFeature.CLUB, this.generatePileFilterImage("club")),
        this.pileFilterIcons.set(ItemSearchFeature.CONCEPT, this.generatePileFilterImage("dream")),
        this.pileFilterIcons.set(ItemSearchFeature.STORAGE, this.generatePileFilterImage("storage")),
        this.pileFilterIcons
    }
    ,
    UTItemSearchView.prototype.generatePileFilterImage = function(e) {
        return "club" === e ? "images/SearchFilters/players_club.png" : "dream" === e ? "images/SearchFilters/players_concept.png" : "storage" === e ? "images/SearchFilters/players_storage.png" : ""
    }
    ,
    UTItemSearchView.prototype.generateFilterImage = function(e, t, i) {
        switch (e) {
        case enums.UISearchFilters.LEVEL:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.LEVEL, i);
        case enums.UISearchFilters.RARITY:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.RARITY, i);
        case enums.UISearchFilters.POSITION:
        case enums.UISearchFilters.POSITION_MOD:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.POSITION, 0 <= t ? t : "default");
        case enums.UISearchFilters.PLAYSTYLE:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.PLAYSTYLE, 0 <= t ? t : "default");
        case enums.UISearchFilters.LEAGUE:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.LEAGUE, 0 <= t ? t : "default");
        case enums.UISearchFilters.NATION:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.NATION, 0 <= t ? t : "default");
        case enums.UISearchFilters.CLUB:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.CLUB, 0 <= t ? t : "default");
        case enums.UISearchFilters.TYPE:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.TYPE, 0 <= t ? t : "default", this.searchBucket);
        case enums.UISearchFilters.VANITY_CATEGORY:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.VANITY, t);
        case enums.UISearchFilters.VANITY:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.VANITY_SECTION, t);
        case enums.UISearchFilters.AUTHENTICITY:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.AUTHENTICITY, i);
        case enums.UISearchFilters.PRIMARY_COLOR:
        case enums.UISearchFilters.SECONDARY_COLOR:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.COLOR, t);
        case enums.UISearchFilters.ICON_TRAITS:
            return AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.ICON_TRAIT, i)
        }
        return ""
    }
    ,
    UTItemSearchView.prototype.generateFilterIconTable = function(e, t, i) {
        function Rgb(e, t, i) {
            var o = null != e ? e : new EAHashTable;
            return e || t.forEach(function(e) {
                return o.set(e.value, n.generateFilterImage(i, e.id, e.value))
            }),
            o
        }
        var n = this;
        if (t === enums.UISearchFilters.LEVEL || t === enums.UISearchFilters.TYPE) {
            var o = Rgb(this.bucketFilterIconTables.get(i + "-" + t), e, t);
            return this.bucketFilterIconTables.set(i + "-" + t, o),
            o
        }
        if (i === SearchBucket.PLAYER || t !== enums.UISearchFilters.RARITY && t !== enums.UISearchFilters.VANITY_CATEGORY) {
            o = Rgb(this.filterIconTables.get(t), e, t);
            return this.filterIconTables.set(t, o),
            o
        }
        return Rgb(null, e, t)
    }
    ,
    UTItemSearchView.prototype.setFilterValue = function(e, t) {
        var i = this.searchFilters.get(e);
        i && (JSUtils.isNumber(t) ? i.setIndexById(t) : JSUtils.isString(t) && i.setIndexByValue(t))
    }
    ,
    UTItemSearchView.prototype.setFilterDefaultValue = function(e, t) {
        var i = this.searchFilters.get(e);
        i && (JSUtils.isNumber(t) ? i.setDefaultIndexById(t) : JSUtils.isString(t) && i.setDefaultIndexByValue(t))
    }
    ,
    UTItemSearchView.prototype.getFilterTitle = function(e) {
        var t = services.Localization;
        switch (e) {
        case enums.UISearchFilters.TYPE:
            return t.localize("search.details.type");
        case enums.UISearchFilters.LEVEL:
            return t.localize("search.pagination.level");
        case enums.UISearchFilters.RARITY:
            return t.localize("search.pagination.rarity");
        case enums.UISearchFilters.POSITION:
            return t.localize("search.pagination.position");
        case enums.UISearchFilters.PLAYSTYLE:
            return t.localize("search.pagination.playerstyle");
        case enums.UISearchFilters.NATION:
            return t.localize("controlbar.cardview.Nationality");
        case enums.UISearchFilters.LEAGUE:
            return t.localize("controlbar.cardview.League");
        case enums.UISearchFilters.CLUB:
            return t.localize("controlbar.cardview.Club");
        case enums.UISearchFilters.POSITION_MOD:
            return t.localize("search.pagination.position");
        case enums.UISearchFilters.AUTHENTICITY:
            return t.localize("search.pagination.authenticity");
        case enums.UISearchFilters.PRIMARY_COLOR:
            return t.localize("search.pagination.primaryColor");
        case enums.UISearchFilters.SECONDARY_COLOR:
            return t.localize("search.pagination.secondaryColor");
        case enums.UISearchFilters.ICON_TRAITS:
            return t.localize("search.pagination.icontraits")
        }
        return ""
    }
    ,
    UTItemSearchView.prototype.filterHasDefault = function(e) {
        return e === enums.UISearchFilters.TYPE ? this.searchBucket === SearchBucket.STAFF : e !== enums.UISearchFilters.VANITY && e !== enums.UISearchFilters.VANITY_CATEGORY
    }
    ,
    UTItemSearchView.prototype.normalizeCriteria = function(e) {
        e.level !== SearchLevel.SPECIAL || e.type !== SearchType.STAFF && e.type !== SearchType.CONSUMABLES_DEVELOPMENT && e.type !== SearchType.CONSUMABLES_TRAINING || (e.level = SearchLevel.GOLD)
    }
    ,
    UTItemSearchView.prototype.generateFilter = function(e, t, i) {
        var o = this.searchFilters.get(e);
        o ? o.removeTarget(this, this.handleFilterChange, EventType.CHANGE) : ((o = new UTSearchFilterControl).init(),
        o.setId = e,
        o.setDefaultLabel(this.getFilterTitle(e)),
        o.setInteractionState(!0),
        e !== enums.UISearchFilters.LEAGUE && e !== enums.UISearchFilters.CLUB || o.addClass("force-ltr"),
        this.searchFilters.set(e, o)),
        o.setHasDefault(this.filterHasDefault(e)),
        o.setIconTable(this.generateFilterIconTable(t, e, this.searchBucket)),
        o.setOptions(t),
        this.filters.push(o),
        JSUtils.isValid(i) && this.setFilterValue(e, i),
        o.addTarget(this, this.handleFilterChange, EventType.CHANGE)
    }
    ,
    UTItemSearchView.prototype.getRarityDataEntries = function(e, t) {
        var i = []
          , o = [];
        switch (e.type) {
        case SearchType.PLAYER:
            i = [ItemSubType.PLAYER],
            o = [ItemType.PLAYER];
            break;
        case SearchType.BALL:
            i = [ItemSubType.BALL],
            o = [ItemType.BALL];
            break;
        case SearchType.STADIUM:
            i = [ItemSubType.STADIUM],
            o = [ItemType.STADIUM];
            break;
        case SearchType.CLUB_INFO:
            i = e.subtypes,
            o = e.category === SearchCategory.KIT ? [ItemType.KIT] : [ItemType.BADGE];
            break;
        case SearchType.VANITY:
            i = e.subtypes,
            o = [ItemType.VANITY]
        }
        return factories.DataProvider.getItemRarityDP({
            itemSubTypes: i,
            itemTypes: o,
            quality: e.level,
            tradableOnly: t.isMarketSearch
        })
    }
    ,
    UTItemSearchView.prototype.setFilters = function(e, t) {
        var i = this
          , o = e.searchCriteria;
        if (this.searchBucket = e.getBucketFromType(o.type),
        this.setFilterLock(enums.UISearchFilters.TYPE, !1),
        this.setFilterLock(enums.UISearchFilters.LEVEL, !1),
        this.setFilterLock(enums.UISearchFilters.VANITY_CATEGORY, !1),
        this.normalizeCriteria(o),
        this.filters.forEach(function(e) {
            e.blur(),
            DOMKit.remove(e.getRootElement())
        }),
        this.filters = [],
        this.searchBucket === SearchBucket.STAFF ? (this.generateFilter(enums.UISearchFilters.TYPE, factories.DataProvider.getStaffTypeDP(), o.category),
        this.setFilterLock(enums.UISearchFilters.TYPE, !0)) : this.searchBucket === SearchBucket.CLUB ? this.generateFilter(enums.UISearchFilters.VANITY, factories.DataProvider.getVanityCategoryDP(e.isMarketSearch), e.searchCategoryGroup) : this.searchBucket === SearchBucket.CONSUMABLE && this.generateFilter(enums.UISearchFilters.TYPE, factories.DataProvider.getConsumableTypeDP(), o.category),
        o.type === SearchType.BALL || o.type === SearchType.CLUB_INFO || o.type === SearchType.PLAYER || o.type === SearchType.STADIUM || o.type === SearchType.VANITY) {
            this.generateFilter(enums.UISearchFilters.LEVEL, factories.DataProvider.getRareItemLevelDP(), o.level);
            var n = services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.RARITY_SEARCH_ENABLED)
              , r = services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.RARITY_PLAYER_SEARCH_ENABLED)
              , s = services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.RARITY_VANITY_SEARCH_ENABLED);
            if (n && (o.type === SearchType.PLAYER && r || o.type !== SearchType.PLAYER && s)) {
                var a = this.getRarityDataEntries(o, e);
                this.generateFilter(enums.UISearchFilters.RARITY, a, o.rarities[0]),
                this.setFilterLock(enums.UISearchFilters.RARITY, a.length <= 1)
            }
        } else
            this.generateFilter(enums.UISearchFilters.LEVEL, factories.DataProvider.getItemLevelDP(), o.level),
            o.category === SearchCategory.HEALING && (this.setFilterValue(enums.UISearchFilters.LEVEL, 2),
            this.setFilterLock(enums.UISearchFilters.LEVEL, !0));
        if (o.type === SearchType.PLAYER) {
            var l = -1 !== o.zone ? o.zone : o.position
              , c = l !== SearchType.ANY ? l === PlayerPosition[PlayerPosition.GK] : void 0;
            this.generateFilter(enums.UISearchFilters.POSITION, factories.DataProvider.getPlayerPositionDP(t), l),
            this.generateFilter(enums.UISearchFilters.PLAYSTYLE, factories.DataProvider.getPlayStyleDP(c), o.playStyle),
            this.generateFilter(enums.UISearchFilters.NATION, factories.DataProvider.getNationDP(), o.nation),
            this.generateFilter(enums.UISearchFilters.LEAGUE, factories.DataProvider.getLeagueDP(!0), o.league),
            this.generateFilter(enums.UISearchFilters.CLUB, factories.DataProvider.getTeamDP(o.league), o.club),
            e.isMarketSearch && this.generateFilter(enums.UISearchFilters.ICON_TRAITS, factories.DataProvider.getIconTraitDP(), o.icontraits),
            e.playerData ? this.setPlayerSearch(e.playerData) : this.resetPlayerName(),
            this._ovrRangeOptions.setMinValue(o.ovrMin),
            this._ovrRangeOptions.setMaxValue(o.ovrMax)
        } else if (o.category === SearchCategory.MANAGER)
            this.generateFilter(enums.UISearchFilters.NATION, factories.DataProvider.getNationDP(), o.nation),
            this.generateFilter(enums.UISearchFilters.LEAGUE, factories.DataProvider.getLeagueDP(e.isMarketSearch), o.league);
        else if (o.category === SearchCategory.PLAYSTYLE)
            this.generateFilter(enums.UISearchFilters.PLAYSTYLE, factories.DataProvider.getPlayStyleDP(), o.playStyle);
        else if (o.category === SearchCategory.MANAGER_LEAGUE)
            this.generateFilter(enums.UISearchFilters.LEAGUE, factories.DataProvider.getLeagueDP(!0), o.league);
        else if (e.searchCategoryGroup === SearchCategoryGroup.CLUB) {
            var u = o.category !== SearchCategory.ANY ? o.category : SearchCategory.KIT;
            this.generateFilter(enums.UISearchFilters.VANITY_CATEGORY, factories.DataProvider.getClubVanityTypesDP(), u),
            o.category !== SearchCategory.VANITY_PLAYER_CELEBRATION && o.category !== SearchCategory.VANITY_AUDIO_GOAL_SCORE && o.category !== SearchCategory.VANITY_AUDIO_CLUB_NICKNAME && (this.generateFilter(enums.UISearchFilters.AUTHENTICITY, factories.DataProvider.getVanityAuthenticityDP(), o.authenticity),
            o.category !== SearchCategory.BALL && (this.generateFilter(enums.UISearchFilters.LEAGUE, factories.DataProvider.getLeagueDP(!0), o.league),
            this.generateFilter(enums.UISearchFilters.CLUB, factories.DataProvider.getTeamDP(o.league), o.club)),
            o.category !== SearchCategory.KIT && o.category !== SearchCategory.BADGE && o.category !== SearchCategory.BALL || (this.generateFilter(enums.UISearchFilters.PRIMARY_COLOR, factories.DataProvider.getVanityColorDP(), o.primaryColor),
            o.category !== SearchCategory.BALL && this.generateFilter(enums.UISearchFilters.SECONDARY_COLOR, factories.DataProvider.getVanityColorDP(), o.secondaryColor)))
        } else if (e.searchCategoryGroup === SearchCategoryGroup.STRUCTURE) {
            var d = o.category !== SearchCategory.ANY ? o.category : SearchCategory.STADIUM;
            this.generateFilter(enums.UISearchFilters.VANITY_CATEGORY, factories.DataProvider.getStadiumVanityTypesDP(), d),
            o.category !== SearchCategory.VANITY_STADIUM_BASE_SEAT_COLOR && o.category !== SearchCategory.VANITY_STADIUM_BASE_STRUCTURE_COLOR && (this.generateFilter(enums.UISearchFilters.AUTHENTICITY, factories.DataProvider.getVanityAuthenticityDP(), o.authenticity),
            this.generateFilter(enums.UISearchFilters.LEAGUE, factories.DataProvider.getLeagueDP(!0), o.league),
            this.generateFilter(enums.UISearchFilters.CLUB, factories.DataProvider.getTeamDP(o.league), o.club)),
            o.category !== SearchCategory.STADIUM && o.category !== SearchCategory.VANITY_STADIUM_BASE_PITCH_MOW_PATTERN && o.category !== SearchCategory.VANITY_VIP_AREA && (this.generateFilter(enums.UISearchFilters.PRIMARY_COLOR, factories.DataProvider.getVanityColorDP(), o.primaryColor),
            o.category !== SearchCategory.VANITY_STADIUM_BASE_SEAT_COLOR && this.generateFilter(enums.UISearchFilters.SECONDARY_COLOR, factories.DataProvider.getVanityColorDP(), o.secondaryColor))
        } else if (e.searchCategoryGroup === SearchCategoryGroup.COSMETICS) {
            var h = o.category !== SearchCategory.ANY ? o.category : SearchCategory.VANITY_TIFO_BASE;
            this.generateFilter(enums.UISearchFilters.VANITY_CATEGORY, factories.DataProvider.getCosmeticsVanityTypesDP(), h)
        }
        var p = JSUtils.isValid(e.playerData)
          , _ = o.type !== SearchType.PLAYER && o.type !== SearchType.STAFF && "authentic" !== o.authenticity
          , f = 0 <= o.league;
        this.setFilterLock(enums.UISearchFilters.NATION, p),
        this.setFilterLock(enums.UISearchFilters.LEAGUE, p || _),
        this.setFilterLock(enums.UISearchFilters.CLUB, p || _ || !f),
        this.searchFilters.forEach(function(e) {
            return i.setFilterImage(e)
        }),
        this.filters.forEach(function(e) {
            return i.getRootElement().appendChild(e.getRootElement())
        })
    }
    ,
    UTItemSearchView.prototype.setPlayerSearch = function(e) {
        this._playerNameSearch.setPlayerData(e),
        this.setFilterValue(enums.UISearchFilters.NATION, -1),
        this.setFilterValue(enums.UISearchFilters.LEAGUE, -1),
        this.setFilterValue(enums.UISearchFilters.CLUB, -1),
        this.setFilterLock(enums.UISearchFilters.NATION, !0),
        this.setFilterLock(enums.UISearchFilters.LEAGUE, !0),
        this.setFilterLock(enums.UISearchFilters.CLUB, !0)
    }
    ,
    UTItemSearchView.prototype.resetPlayerName = function() {
        this._playerNameSearch.clearInput(),
        this.setFilterLock(enums.UISearchFilters.NATION, !1),
        this.setFilterLock(enums.UISearchFilters.LEAGUE, !1),
        this.setFilterLock(enums.UISearchFilters.CLUB, !1)
    }
    ,
    UTItemSearchView.prototype.togglePlayerNameRow = function(e) {
        this._playerNameSearch.setDisplay(e)
    }
    ,
    UTItemSearchView.prototype.togglePileFilter = function(e) {
        this.pileFilter && this.pileFilter.setDisplay(e)
    }
    ,
    UTItemSearchView.prototype.setPileFilter = function(e, t) {
        var i = services.Localization;
        this.pileFilter || (this.pileFilter = new UTSearchFilterControl,
        this.pileFilter.init(),
        this.pileFilter.setIconTable(this.generatePileFilterIconTable()),
        this.pileFilter.setOptions(e),
        this.pileFilter.addTarget(this, this.handleSearchModeChange, EventType.CHANGE),
        this.pileFilter.setInteractionState(!0),
        DOMKit.insertAfter(this.pileFilter.getRootElement(), this._playerNameSearch.getRootElement())),
        this.pileFilter.setIndexByValue(t),
        this.pileFilter.setDefaultLabel(i.localize("search.pagination.searchmode")),
        this.setPileFilterImage()
    }
    ,
    UTItemSearchView.prototype.setPileFilterImage = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.pileFilter), "Attempted to set search pile image when no pile filter exists."),
        this.pileFilter) {
            var e = this.pileFilter.value;
            this.pileFilter.image = this.generatePileFilterImage("club" === e || "dream" === e || "storage" === e ? e : "club")
        }
    }
    ,
    UTItemSearchView.prototype.getPlayerNameSearch = function() {
        return this._playerNameSearch
    }
    ,
    UTItemSearchView.prototype.toggleOvrRange = function(e, t) {
        var i = e === SearchType.PLAYER
          , o = [ItemSearchFeature.ANY, ItemSearchFeature.CLUB, ItemSearchFeature.STORAGE]
          , n = i && o.includes(t);
        this.__ovrRangeContainer.style.display = n ? "block" : "none",
        n || this._ovrRangeOptions.reset()
    }
    ,
    UTItemSearchView.prototype.handleOvrRangeChange = function(e, t, i) {
        this.onFilterChange.notify(enums.UISearchFilters.OVR_MIN, i.min),
        this.onFilterChange.notify(enums.UISearchFilters.OVR_MAX, i.max)
    }
    ,
    UTItemSearchView.prototype.handleFilterChange = function(e, t, i) {
        this.setFilterImage(e),
        this.onFilterChange.notify(e.setId, e.id, e.value)
    }
    ,
    UTItemSearchView.prototype.handleSearchModeChange = function(e, t, i) {
        this.setPileFilterImage(),
        this.onSearchModeChange.notify(e.value)
    }
    ,
    UTItemSearchView
}(EAView);
UTItemSearchView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-item-search-view"),
        this.__ovrRangeContainer = document.createElement("div"),
        this.__ovrRangeContainer.classList.add("ut-item-search-view-ovr-range-container"),
        this.__ovrRangeTitle = document.createElement("h4"),
        this.__ovrRangeTitle.classList.add("ovr-range-title"),
        this.__ovrRangeContainer.appendChild(this.__ovrRangeTitle),
        this.__ovrRangeDescription = document.createElement("h5"),
        this.__ovrRangeDescription.classList.add("ovr-range-description"),
        this.__ovrRangeContainer.appendChild(this.__ovrRangeDescription),
        this._ovrRangeOptions = new UTDoubleRangeControl,
        this.__ovrRangeContainer.appendChild(this._ovrRangeOptions.getRootElement()),
        e.appendChild(this.__ovrRangeContainer),
        this._playerNameSearch = new UTPlayerSearchControl,
        e.appendChild(this._playerNameSearch.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTItemSearchView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__ovrRangeContainer = null,
    this.__ovrRangeTitle = null,
    this.__ovrRangeDescription = null,
    this._ovrRangeOptions.destroy(),
    this._playerNameSearch.destroy()
}
,
UTItemSearchView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTCurrencyInputControl = function(t) {
    function UTCurrencyInputControl() {
        var e = t.call(this) || this;
        return e.defaultValue = 0,
        e
    }
    return __extends(UTCurrencyInputControl, t),
    UTCurrencyInputControl.prototype.roundToNearestStep = function(t) {
        var e = JSUtils.find(UTCurrencyInputControl.PRICE_TIERS, function(e) {
            return t >= e.min
        });
        return Math.round(t / e.inc) * e.inc
    }
    ,
    UTCurrencyInputControl.prototype.setInputValue = function(e) {
        var t = Math.max(Math.min(this.roundToNearestStep(0 === e ? this.defaultValue : e), this.maxValue), this.minValue)
          , i = this.getValue();
        this.toggleClass("filled", 0 !== t),
        this.getRootElement().value = 0 < t ? services.Localization.localizeNumber(t) : "",
        t !== i && this._triggerActions(EventType.CHANGE, {
            value: t,
            from: i,
            delta: t - i
        })
    }
    ,
    UTCurrencyInputControl.prototype.setMinValue = function(e) {
        var t = this.roundToNearestStep(e);
        t !== this.minValue && (this.minValue = t,
        this.maxValue = Math.max(this.maxValue, this.minValue),
        this.setValue(Math.max(this.getValue(), this.minValue)))
    }
    ,
    UTCurrencyInputControl.prototype.setMaxValue = function(e) {
        var t = this.roundToNearestStep(e);
        t !== this.maxValue && (this.maxValue = t,
        this.minValue = Math.min(this.minValue, this.maxValue),
        this.setValue(Math.min(this.getValue(), this.maxValue)))
    }
    ,
    UTCurrencyInputControl.prototype.setDefaultValue = function(e) {
        this.defaultValue = e
    }
    ,
    UTCurrencyInputControl.prototype.getDefaultValue = function() {
        return this.defaultValue
    }
    ,
    UTCurrencyInputControl.prototype.increase = function(e) {
        this.value = UTCurrencyInputControl.getIncrementAboveVal(JSUtils.isNumber(e) ? e : this.value)
    }
    ,
    UTCurrencyInputControl.prototype.decrease = function(e) {
        this.value = UTCurrencyInputControl.getIncrementBelowVal(JSUtils.isNumber(e) ? e : this.value)
    }
    ,
    UTCurrencyInputControl.getIncrementBelowVal = function(t) {
        if (DebugUtils.Assert(0 <= t, "Expected a number value greater than or equal to zero."),
        t <= 0)
            return 0;
        var e = JSUtils.find(UTCurrencyInputControl.PRICE_TIERS, function(e) {
            return t > e.min
        });
        return 0 < t - e.inc ? Math.round((t - e.inc) / e.inc) * e.inc : 0
    }
    ,
    UTCurrencyInputControl.getIncrementAboveVal = function(t) {
        if (DebugUtils.Assert(t <= AUCTION_MAX_BID, "Expected a number value no greater than the maximum auction limit."),
        t >= AUCTION_MAX_BID)
            return AUCTION_MAX_BID;
        var e = JSUtils.find(UTCurrencyInputControl.PRICE_TIERS, function(e) {
            return t >= e.min
        });
        return t + e.inc < AUCTION_MAX_BID ? Math.round((t + e.inc) / e.inc) * e.inc : AUCTION_MAX_BID
    }
    ,
    UTCurrencyInputControl.prototype.sanitizeValue = function() {
        var e = this.getRootElement()
          , t = JSUtils.parseNumber(e.value, services.Localization.locale.toBCPString())
          , i = Math.max(Math.min(this.roundToNearestStep(0 !== t && JSUtils.isNumber(t) ? t : this.defaultValue), this.maxValue), this.minValue);
        return e.value = 0 < i ? services.Localization.localizeNumber(i) : "",
        t
    }
    ,
    UTCurrencyInputControl.PRICE_TIERS = [{
        min: 1e5,
        inc: 1e3
    }, {
        min: 5e4,
        inc: 500
    }, {
        min: 1e4,
        inc: 250
    }, {
        min: 1e3,
        inc: 100
    }, {
        min: 150,
        inc: 50
    }, {
        min: 0,
        inc: 150
    }],
    UTCurrencyInputControl
}(UTNumberInputControl)
  , UTNumericInputSpinnerControl = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTNumericInputSpinnerControl() {
        var e = i.call(this) || this;
        return e.decreaseTimeout = 0,
        e.duration = 0,
        e.increaseTimeout = 0,
        e.speedInterval = 50,
        e.startInterval = 250,
        e
    }
    return __extends(UTNumericInputSpinnerControl, i),
    UTNumericInputSpinnerControl.prototype.endIncrease = function() {
        window.clearTimeout(this.increaseTimeout),
        this.increaseTimeout = 0,
        this.duration = 0
    }
    ,
    UTNumericInputSpinnerControl.prototype.endDecrease = function() {
        window.clearTimeout(this.decreaseTimeout),
        this.decreaseTimeout = 0,
        this.duration = 0
    }
    ,
    UTNumericInputSpinnerControl.prototype.beginIncrease = function() {
        if (!this.decreaseTimeout)
            if (this._currencyInput.value < this._currencyInput.getMaxValue()) {
                this._currencyInput.increase(),
                this.duration++;
                var e = this.duration <= 4 ? this.startInterval : this.speedInterval;
                this.increaseTimeout = window.setTimeout(this.beginIncrease.bind(this), e)
            } else
                this.endIncrease()
    }
    ,
    UTNumericInputSpinnerControl.prototype.beginDecrease = function() {
        if (!this.increaseTimeout)
            if (this._currencyInput.value > this._currencyInput.getMinValue()) {
                this._currencyInput.decrease(),
                this.duration++;
                var e = this.duration <= 4 ? this.startInterval : this.speedInterval;
                this.decreaseTimeout = window.setTimeout(this.beginDecrease.bind(this), e)
            } else
                this.endDecrease()
    }
    ,
    UTNumericInputSpinnerControl.prototype.init = function() {
        var t = this;
        i.prototype.init.call(this),
        this._currencyInput.init(),
        this._currencyInput.setPlaceholder(services.Localization.localize("post.spinnerDefaultValue")),
        this._currencyInput.addTarget(this, function() {
            var e = t.getValue();
            t._decrementBtn.setInteractionState(e > t._currencyInput.getMinValue()),
            t._incrementBtn.setInteractionState(e < t._currencyInput.getMaxValue())
        }, EventType.CHANGE);
        var e = this.getValue();
        this._decrementBtn.init(),
        this._decrementBtn.addTarget(this, this.beginDecrease, EventType.TOUCHSTART),
        this._decrementBtn.addTarget(this, this.endDecrease, EventType.TOUCHEND),
        this._decrementBtn.addTarget(this, this.endDecrease, EventType.TOUCHCANCEL),
        this._decrementBtn.setInteractionState(e > this._currencyInput.getMinValue()),
        this._incrementBtn.init(),
        this._incrementBtn.addTarget(this, this.beginIncrease, EventType.TOUCHSTART),
        this._incrementBtn.addTarget(this, this.endIncrease, EventType.TOUCHEND),
        this._incrementBtn.addTarget(this, this.endIncrease, EventType.TOUCHCANCEL),
        this._incrementBtn.setInteractionState(e < this._currencyInput.getMaxValue())
    }
    ,
    UTNumericInputSpinnerControl.prototype.reset = function() {
        this._currencyInput.reset()
    }
    ,
    UTNumericInputSpinnerControl.prototype.setInteractionState = function(e) {
        var t = this.getValue();
        i.prototype.setInteractionState.call(this, e),
        this._currencyInput.setInteractionState(e),
        this._decrementBtn.setInteractionState(e && t > this._currencyInput.getMinValue()),
        this._incrementBtn.setInteractionState(e && t < this._currencyInput.getMaxValue())
    }
    ,
    UTNumericInputSpinnerControl.prototype.getInput = function() {
        return this._currencyInput
    }
    ,
    UTNumericInputSpinnerControl.prototype.getValue = function() {
        return this._currencyInput.value
    }
    ,
    UTNumericInputSpinnerControl.prototype.setValue = function(e) {
        this._currencyInput.value = e
    }
    ,
    UTNumericInputSpinnerControl.prototype.getDefaultValue = function() {
        return this._currencyInput.getDefaultValue()
    }
    ,
    UTNumericInputSpinnerControl.prototype.setDefaultValue = function(e) {
        this._currencyInput.setDefaultValue(e)
    }
    ,
    UTNumericInputSpinnerControl.prototype.getMinValue = function() {
        return this._currencyInput.getMinValue()
    }
    ,
    UTNumericInputSpinnerControl.prototype.setMinValue = function(e) {
        this._currencyInput.setMinValue(e)
    }
    ,
    UTNumericInputSpinnerControl.prototype.getMaxValue = function() {
        return this._currencyInput.getMaxValue()
    }
    ,
    UTNumericInputSpinnerControl.prototype.setMaxValue = function(e) {
        this._currencyInput.setMaxValue(e)
    }
    ,
    UTNumericInputSpinnerControl.prototype.setLimits = function(e, t) {
        var i = this.getValue();
        this._currencyInput.setMinValue(e),
        this._currencyInput.setMaxValue(t),
        this._decrementBtn.setInteractionState(e < i),
        this._incrementBtn.setInteractionState(i < t)
    }
    ,
    UTNumericInputSpinnerControl
}(EAView));
UTNumericInputSpinnerControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-numeric-input-spinner-control"),
        this._decrementBtn = new UTStandardButtonControl,
        this._decrementBtn.getRootElement().classList.add("decrement-value"),
        e.appendChild(this._decrementBtn.getRootElement()),
        this._currencyInput = new UTCurrencyInputControl,
        e.appendChild(this._currencyInput.getRootElement()),
        this._incrementBtn = new UTStandardButtonControl,
        this._incrementBtn.getRootElement().classList.add("increment-value"),
        e.appendChild(this._incrementBtn.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTNumericInputSpinnerControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._decrementBtn.destroy(),
    this._currencyInput.destroy(),
    this._incrementBtn.destroy()
}
,
UTNumericInputSpinnerControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSearchCriteriaPriceView = function(t) {
    function UTSearchCriteriaPriceView() {
        var e = t.call(this) || this;
        return e.label = "",
        e.minPrice = 0,
        e.maxPrice = AUCTION_MAX_BID,
        e.value = 0,
        e
    }
    return __extends(UTSearchCriteriaPriceView, t),
    Object.defineProperty(UTSearchCriteriaPriceView.prototype, "minPrice", {
        get: function() {
            return this._currencyInput.getMinValue()
        },
        set: function(e) {
            this._currencyInput.setMinValue(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSearchCriteriaPriceView.prototype, "maxPrice", {
        get: function() {
            return this._currencyInput.getMaxValue()
        },
        set: function(e) {
            this._currencyInput.setMaxValue(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSearchCriteriaPriceView.prototype, "label", {
        get: function() {
            var e;
            return null !== (e = this.__label.textContent) && void 0 !== e ? e : ""
        },
        set: function(e) {
            this.__label.textContent = e
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTSearchCriteriaPriceView.prototype, "value", {
        get: function() {
            return this._currencyInput.getValue()
        },
        set: function(e) {
            this._currencyInput.setValue(e)
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSearchCriteriaPriceView.prototype.init = function() {
        t.prototype.init.call(this),
        this._currencyInput.init()
    }
    ,
    UTSearchCriteriaPriceView.prototype.reset = function() {
        this._currencyInput.reset()
    }
    ,
    UTSearchCriteriaPriceView.prototype.getCurrencyInput = function() {
        return this._currencyInput.getInput()
    }
    ,
    UTSearchCriteriaPriceView
}(EAView);
UTSearchCriteriaPriceView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("price-filter");
        var t = document.createElement("div");
        t.classList.add("info"),
        this.__label = document.createElement("span"),
        this.__label.classList.add("label"),
        t.appendChild(this.__label),
        e.appendChild(t),
        this._currencyInput = new UTNumericInputSpinnerControl,
        e.appendChild(this._currencyInput.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSearchCriteriaPriceView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this._currencyInput.destroy()
}
,
UTSearchCriteriaPriceView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTMarketSearchFiltersView = function(r) {
    function UTMarketSearchFiltersView() {
        var e = r.call(this) || this;
        return e.pinnedListRowItem = null,
        e
    }
    return __extends(UTMarketSearchFiltersView, r),
    UTMarketSearchFiltersView.prototype.init = function() {
        r.prototype.init.call(this);
        var e = services.Localization;
        this._minBidPriceRow.init(),
        this._minBidPriceRow.label = e.localize("abbr.minimum"),
        this._maxBidPriceRow.init(),
        this._maxBidPriceRow.label = e.localize("abbr.maximum"),
        this._minBuyNowPriceRow.init(),
        this._minBuyNowPriceRow.label = e.localize("abbr.minimum"),
        this._maxBuyNowPriceRow.init(),
        this._maxBuyNowPriceRow.label = e.localize("abbr.maximum");
        var t = this._minBidPriceRow.getCurrencyInput();
        t.addTarget(this, this.eMinBidPriceChanged, EventType.CHANGE),
        t.placeholder = e.localize("roles.defaultRole"),
        t.setMaxValue(UTCurrencyInputControl.getIncrementBelowVal(AUCTION_MAX_BID));
        var i = this._maxBidPriceRow.getCurrencyInput();
        i.addTarget(this, this.eMaxBidPriceChanged, EventType.CHANGE),
        i.placeholder = e.localize("roles.defaultRole"),
        i.setMaxValue(UTCurrencyInputControl.getIncrementBelowVal(AUCTION_MAX_BID));
        var o = this._minBuyNowPriceRow.getCurrencyInput();
        o.addTarget(this, this.eMinBuyPriceChanged, EventType.CHANGE),
        o.placeholder = e.localize("roles.defaultRole");
        var n = this._maxBuyNowPriceRow.getCurrencyInput();
        n.addTarget(this, this.eMaxBuyPriceChanged, EventType.CHANGE),
        n.placeholder = e.localize("roles.defaultRole"),
        this.__clearBidHeader.textContent = e.localize("auctioninfo.bidprice"),
        this.__clearBuyHeader.textContent = e.localize("auctioninfo.buynowprice"),
        this._clearBidPrice.init(),
        this._clearBidPrice.setText(e.localize("search.button.clear")),
        this._clearBidPrice.addTarget(this, this.eClearButtonSelected, EventType.TAP),
        this._clearBidPrice.setInteractionState(!1),
        this._clearBuyPrice.init(),
        this._clearBuyPrice.setText(e.localize("search.button.clear")),
        this._clearBuyPrice.addTarget(this, this.eClearButtonSelected, EventType.TAP),
        this._clearBuyPrice.setInteractionState(!1),
        this._resetButton.init(),
        this._resetButton.addTarget(this, this.eResetButtonSelected, EventType.TAP),
        this._resetButton.setText(e.localize("search.pagination.reset")),
        this._searchButton.init(),
        this._searchButton.addTarget(this, this.eSearchButtonSelected, EventType.TAP),
        this._searchButton.setText(e.localize("button.search")),
        this._searchFilters.init(),
        this._searchFilters.onFilterChange.observe(this, this.eFilterChanged)
    }
    ,
    UTMarketSearchFiltersView.prototype.dealloc = function() {
        this.pinnedListRowItem && (this.pinnedListRowItem.dealloc(),
        this.pinnedListRowItem = null),
        r.prototype.dealloc.call(this)
    }
    ,
    UTMarketSearchFiltersView.prototype.initTabMenuComponent = function() {
        var e = services.Localization;
        this._tabMenu.addTab(SearchBucket.PLAYER, e.localize("search.filters.players")),
        this._tabMenu.addTab(SearchBucket.STAFF, e.localize("search.filters.staff")),
        this._tabMenu.addTab(SearchBucket.CLUB, e.localize("search.filters.club")),
        this._tabMenu.addTab(SearchBucket.CONSUMABLE, e.localize("search.filters.consumables")),
        this._tabMenu.setActiveTab(SearchBucket.PLAYER),
        this._tabMenu.layoutSubviews()
    }
    ,
    UTMarketSearchFiltersView.prototype.setPinnedItem = function(e, t) {
        if (this.pinnedListRowItem && (this.pinnedListRowItem.dealloc(),
        this.pinnedListRowItem = null),
        this.pinnedListRowItem = new UTItemTableCellView,
        t && t.index < UTSquadEntity.FIELD_PLAYERS) {
            var i = new UTSquadSlotChemistryPointsView;
            i.isItemView(),
            i.render(t.chemistry, 0, t.inPossiblePosition),
            i.setState(UTSquadSlotChemistryPointsView.State.NEUTRAL),
            this.pinnedListRowItem.setChemistryPointsComponent(i)
        }
        this.pinnedListRowItem.setData(e),
        this.pinnedListRowItem.render(),
        t && t.index < UTSquadEntity.FIELD_PLAYERS && this.pinnedListRowItem.renderChemistryBreakdown(t.chemistry, t.nationChemistryPoints, t.leagueChemistryPoints, t.clubChemistryPoints),
        this.__pinnedItem.appendChild(this.pinnedListRowItem.getRootElement())
    }
    ,
    UTMarketSearchFiltersView.prototype.getTabMenuComponent = function() {
        return this._tabMenu
    }
    ,
    UTMarketSearchFiltersView.prototype.getPlayerNameSearch = function() {
        return this._searchFilters.getPlayerNameSearch()
    }
    ,
    UTMarketSearchFiltersView.prototype.getFilters = function() {
        return this._searchFilters
    }
    ,
    UTMarketSearchFiltersView.prototype.setFilters = function(e, t) {
        this._searchFilters.setFilters(e, t),
        this._searchFilters.togglePlayerNameRow(e.searchCriteria.type === SearchType.PLAYER)
    }
    ,
    UTMarketSearchFiltersView.prototype.setFilterValue = function(e, t) {
        this._searchFilters.setFilterValue(e, t)
    }
    ,
    UTMarketSearchFiltersView.prototype.setPlayerSearch = function(e) {
        this._searchFilters.setPlayerSearch(e)
    }
    ,
    UTMarketSearchFiltersView.prototype.resetPlayerName = function() {
        this._searchFilters.resetPlayerName()
    }
    ,
    UTMarketSearchFiltersView.prototype.setMinBidPrice = function(e) {
        this._minBidPriceRow.value = e
    }
    ,
    UTMarketSearchFiltersView.prototype.setMaxBidPrice = function(e) {
        this._maxBidPriceRow.value = e
    }
    ,
    UTMarketSearchFiltersView.prototype.setMinBuyNowPrice = function(e) {
        this._minBuyNowPriceRow.value = e
    }
    ,
    UTMarketSearchFiltersView.prototype.setMaxBuyNowPrice = function(e) {
        this._maxBuyNowPriceRow.value = e
    }
    ,
    UTMarketSearchFiltersView.prototype.eClearButtonSelected = function(e, t, i) {
        e === this._clearBidPrice ? (this._minBidPriceRow.value = 0,
        this._maxBidPriceRow.value = 0) : e === this._clearBuyPrice && (this._minBuyNowPriceRow.value = 0,
        this._maxBuyNowPriceRow.value = 0)
    }
    ,
    UTMarketSearchFiltersView.prototype.resetPrices = function() {
        this._minBidPriceRow.reset(),
        this._maxBidPriceRow.reset(),
        this._minBuyNowPriceRow.reset(),
        this._maxBuyNowPriceRow.reset()
    }
    ,
    UTMarketSearchFiltersView.prototype.eMinBidPriceChanged = function(e, t, i) {
        var o = this._minBidPriceRow.value
          , n = this._maxBidPriceRow.value
          , r = this._minBuyNowPriceRow.value;
        this._clearBidPrice.setInteractionState(0 < o || 0 < n),
        0 !== n && n <= o && this.setMaxBidPrice(UTCurrencyInputControl.getIncrementAboveVal(o)),
        0 !== r && r <= o && this.setMinBuyNowPrice(UTCurrencyInputControl.getIncrementAboveVal(o)),
        this._triggerActions(UTMarketSearchFiltersView.Event.MIN_BID_PRICE_CHANGE, {
            value: o
        })
    }
    ,
    UTMarketSearchFiltersView.prototype.eMaxBidPriceChanged = function(e, t, i) {
        var o = this._minBidPriceRow.value
          , n = this._maxBidPriceRow.value
          , r = this._maxBuyNowPriceRow.value;
        this._clearBidPrice.setInteractionState(0 < o || 0 < n),
        0 !== n && n <= o && this.setMinBidPrice(UTCurrencyInputControl.getIncrementBelowVal(n)),
        0 !== r && r <= n && this.setMaxBuyNowPrice(UTCurrencyInputControl.getIncrementAboveVal(n)),
        this._triggerActions(UTMarketSearchFiltersView.Event.MAX_BID_PRICE_CHANGE, {
            value: n
        })
    }
    ,
    UTMarketSearchFiltersView.prototype.eMinBuyPriceChanged = function(e, t, i) {
        var o = this._minBidPriceRow.value
          , n = this._minBuyNowPriceRow.value
          , r = this._maxBuyNowPriceRow.value;
        this._clearBuyPrice.setInteractionState(0 < n || 0 < r),
        0 !== n && n < AUCTION_MIN_BUY ? this.setMinBuyNowPrice(0 < i.delta ? AUCTION_MIN_BUY : 0) : (0 !== n && n <= o && this.setMinBidPrice(UTCurrencyInputControl.getIncrementBelowVal(n)),
        0 !== r && r <= n && this.setMaxBuyNowPrice(UTCurrencyInputControl.getIncrementAboveVal(n)),
        this._triggerActions(UTMarketSearchFiltersView.Event.MIN_BUY_PRICE_CHANGE, {
            value: n
        }))
    }
    ,
    UTMarketSearchFiltersView.prototype.eMaxBuyPriceChanged = function(e, t, i) {
        var o = this._maxBidPriceRow.value
          , n = this._minBuyNowPriceRow.value
          , r = this._maxBuyNowPriceRow.value;
        this._clearBuyPrice.setInteractionState(0 < n || 0 < r),
        0 !== r && r < AUCTION_MIN_BUY ? this.setMaxBuyNowPrice(0 < i.delta ? AUCTION_MIN_BUY : 0) : (0 !== r && r <= o && this.setMaxBidPrice(UTCurrencyInputControl.getIncrementBelowVal(r)),
        0 !== r && r <= n && this.setMinBuyNowPrice(UTCurrencyInputControl.getIncrementBelowVal(r)),
        this._triggerActions(UTMarketSearchFiltersView.Event.MAX_BUY_PRICE_CHANGE, {
            value: r
        }))
    }
    ,
    UTMarketSearchFiltersView.prototype.eResetButtonSelected = function(e, t, i) {
        this._triggerActions(UTMarketSearchFiltersView.Event.RESET)
    }
    ,
    UTMarketSearchFiltersView.prototype.eSearchButtonSelected = function(e, t, i) {
        this._triggerActions(UTMarketSearchFiltersView.Event.SEARCH)
    }
    ,
    UTMarketSearchFiltersView.prototype.eFilterChanged = function(e, t, i, o) {
        this._triggerActions(UTMarketSearchFiltersView.Event.FILTER_CHANGE, {
            id: i,
            setId: t,
            value: o
        })
    }
    ,
    UTMarketSearchFiltersView.Event = Object.freeze({
        FILTER_CHANGE: "UTMarketSearchFiltersView.Event.FILTER_CHANGE",
        MIN_BID_PRICE_CHANGE: "UTMarketSearchFiltersView.Event.MIN_BID_PRICE_CHANGE",
        MAX_BID_PRICE_CHANGE: "UTMarketSearchFiltersView.Event.MAX_BID_PRICE_CHANGE",
        MIN_BUY_PRICE_CHANGE: "UTMarketSearchFiltersView.Event.MIN_BUY_PRICE_CHANGE",
        MAX_BUY_PRICE_CHANGE: "UTMarketSearchFiltersView.Event.MAX_BUY_PRICE_CHANGE",
        RESET: "UTMarketSearchFiltersView.Event.RESET",
        SEARCH: "UTMarketSearchFiltersView.Event.SEARCH"
    }),
    UTMarketSearchFiltersView
}(EATargetActionView);
UTMarketSearchFiltersView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-market-search-filters-view"),
        this._tabMenu = new EAFilterBarView,
        e.appendChild(this._tabMenu.getRootElement());
        var t = document.createElement("div");
        t.classList.add("ut-pinned-list-container"),
        t.classList.add("ut-content-container"),
        this.__searchContainer = document.createElement("div"),
        this.__searchContainer.classList.add("ut-content");
        var i = document.createElement("div");
        i.classList.add("ut-pinned-list"),
        this.__pinnedItem = document.createElement("ul"),
        this.__pinnedItem.classList.add("ut-pinned-item"),
        i.appendChild(this.__pinnedItem),
        this._searchFilters = new UTItemSearchView,
        i.appendChild(this._searchFilters.getRootElement());
        var o = document.createElement("div");
        o.classList.add("search-prices");
        var n = document.createElement("div");
        n.classList.add("search-price-header"),
        this.__clearBidHeader = document.createElement("h1"),
        n.appendChild(this.__clearBidHeader),
        this._clearBidPrice = new UTFlatButtonControl,
        this._clearBidPrice.getRootElement().classList.add("camel-case"),
        n.appendChild(this._clearBidPrice.getRootElement()),
        o.appendChild(n),
        this._minBidPriceRow = new UTSearchCriteriaPriceView,
        o.appendChild(this._minBidPriceRow.getRootElement()),
        this._maxBidPriceRow = new UTSearchCriteriaPriceView,
        o.appendChild(this._maxBidPriceRow.getRootElement());
        var r = document.createElement("div");
        r.classList.add("search-price-header"),
        this.__clearBuyHeader = document.createElement("h1"),
        r.appendChild(this.__clearBuyHeader),
        this._clearBuyPrice = new UTFlatButtonControl,
        this._clearBuyPrice.getRootElement().classList.add("camel-case"),
        r.appendChild(this._clearBuyPrice.getRootElement()),
        o.appendChild(r),
        this._minBuyNowPriceRow = new UTSearchCriteriaPriceView,
        o.appendChild(this._minBuyNowPriceRow.getRootElement()),
        this._maxBuyNowPriceRow = new UTSearchCriteriaPriceView,
        o.appendChild(this._maxBuyNowPriceRow.getRootElement()),
        i.appendChild(o),
        this.__searchContainer.appendChild(i);
        var s = document.createElement("div");
        s.classList.add("button-container"),
        this._resetButton = new UTStandardButtonControl,
        s.appendChild(this._resetButton.getRootElement()),
        this._searchButton = new UTStandardButtonControl,
        this._searchButton.getRootElement().classList.add("call-to-action"),
        s.appendChild(this._searchButton.getRootElement()),
        this.__searchContainer.appendChild(s),
        t.appendChild(this.__searchContainer),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTMarketSearchFiltersView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._tabMenu.destroy(),
    this.__searchContainer = null,
    this.__pinnedItem = null,
    this._searchFilters.destroy(),
    this.__clearBidHeader = null,
    this._clearBidPrice.destroy(),
    this._minBidPriceRow.destroy(),
    this._maxBidPriceRow.destroy(),
    this.__clearBuyHeader = null,
    this._clearBuyPrice.destroy(),
    this._minBuyNowPriceRow.destroy(),
    this._maxBuyNowPriceRow.destroy(),
    this._resetButton.destroy(),
    this._searchButton.destroy()
}
,
UTMarketSearchFiltersView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTMarketSearchFiltersViewController = function(r) {
    function UTMarketSearchFiltersViewController() {
        var e = r.call(this) || this;
        return e.viewmodel = new UTBucketedItemSearchViewModel,
        e
    }
    return __extends(UTMarketSearchFiltersViewController, r),
    UTMarketSearchFiltersViewController.prototype.init = function() {
        var e;
        if (!this.initialized && (r.prototype.init.call(this),
        this.viewmodel)) {
            this.viewmodel.searchCriteria.type === SearchType.ANY && (this.viewmodel.searchCriteria.type = SearchType.PLAYER);
            var t = getAppMain().getConfigRepository().getConfigObject(EAConfigurationRepository.KEY_ITEMS_PER_PAGE)
              , i = null !== (e = 1 + (t && t[EAConfigurationRepository.ITEMS_PER_PAGE.TRANSFER_MARKET])) ? e : 20;
            this.viewmodel.searchCriteria.count = i,
            this.viewmodel.searchFeature = ItemSearchFeature.MARKET,
            this.viewmodel.getCategoryTabVisible() && this.getView().initTabMenuComponent()
        }
    }
    ,
    UTMarketSearchFiltersViewController.prototype.initWithSearchCriteria = function(e) {
        this.initialized || (this.viewmodel = new UTBucketedItemSearchViewModel,
        this.viewmodel.searchFeature = ItemSearchFeature.MARKET,
        this.viewmodel.defaultSearchCriteria.type = e.type,
        this.viewmodel.defaultSearchCriteria.category = e.category,
        this.viewmodel.updateSearchCriteria(e),
        this.init())
    }
    ,
    UTMarketSearchFiltersViewController.prototype.initWithSquadContext = function(e) {
        var t;
        if (!this.initialized) {
            this.squadContext = e;
            var i = new UTSearchCriteriaDTO
              , o = this.squadContext.getCurrentSlot()
              , n = null == o ? void 0 : o.item;
            if (n && o && 0 <= o.index) {
                var r = n.isManager();
                i.type = r ? SearchType.STAFF : SearchType.PLAYER,
                i.category = r ? SearchCategory.MANAGER : SearchCategory.ANY,
                i.position = o.generalPositionName || SearchType.ANY,
                n.concept && (i.maskedDefId = n.databaseId)
            }
            this.initWithSearchCriteria(i),
            null === (t = this.viewmodel) || void 0 === t || t.setCategoryTabVisible(!1)
        }
    }
    ,
    UTMarketSearchFiltersViewController.prototype.dealloc = function() {
        this.viewmodel = null,
        this.squadContext = null,
        r.prototype.dealloc.call(this)
    }
    ,
    UTMarketSearchFiltersViewController.prototype._getViewInstanceFromData = function() {
        return new UTMarketSearchFiltersView
    }
    ,
    UTMarketSearchFiltersViewController.prototype._getTelemetryId = function() {
        return "Transfer Market Search"
    }
    ,
    UTMarketSearchFiltersViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.search")
    }
    ,
    UTMarketSearchFiltersViewController.prototype.viewDidAppear = function() {
        var e, t = this.getView(), i = t.getTabMenuComponent();
        if (r.prototype.viewDidAppear.call(this),
        this.viewmodel) {
            this.viewmodel.getCategoryTabVisible() ? (i.setActiveTab(this.viewmodel.searchBucket),
            i.addTarget(this, this.eSearchCategoryChanged, EventType.TAP)) : i.clearTabs(),
            t.setFilters(this.viewmodel, !1),
            this.viewmodel.playerData && t.setPlayerSearch(this.viewmodel.playerData);
            var o = null === (e = this.squadContext) || void 0 === e ? void 0 : e.getCurrentSlot();
            if (this.squadContext && o && (t.setPinnedItem(o.item, o),
            o.item.isManager())) {
                var n = this.getView().getFilters();
                n.setFilterDefaultValue(enums.UISearchFilters.TYPE, SearchCategory.MANAGER),
                n.setFilterValue(enums.UISearchFilters.TYPE, SearchCategory.MANAGER),
                n.setFilterLock(enums.UISearchFilters.TYPE, !0)
            }
            t.setMinBidPrice(this.viewmodel.searchCriteria.minBid),
            t.setMaxBidPrice(this.viewmodel.searchCriteria.maxBid),
            t.setMinBuyNowPrice(this.viewmodel.searchCriteria.minBuy),
            t.setMaxBuyNowPrice(this.viewmodel.searchCriteria.maxBuy),
            t.addTarget(this, this.eResetSelected, UTMarketSearchFiltersView.Event.RESET),
            t.addTarget(this, this.eSearchSelected, UTMarketSearchFiltersView.Event.SEARCH),
            t.addTarget(this, this.eFilterChanged, UTMarketSearchFiltersView.Event.FILTER_CHANGE),
            t.addTarget(this, this.eMinBidPriceChanged, UTMarketSearchFiltersView.Event.MIN_BID_PRICE_CHANGE),
            t.addTarget(this, this.eMaxBidPriceChanged, UTMarketSearchFiltersView.Event.MAX_BID_PRICE_CHANGE),
            t.addTarget(this, this.eMinBuyPriceChanged, UTMarketSearchFiltersView.Event.MIN_BUY_PRICE_CHANGE),
            t.addTarget(this, this.eMaxBuyPriceChanged, UTMarketSearchFiltersView.Event.MAX_BUY_PRICE_CHANGE),
            this.squadContext ? isPhone() || t.addClass("narrow") : t.addClass("floating"),
            t.getPlayerNameSearch().addTarget(this, this.ePlayerNameChanged, EventType.CHANGE),
            TelemetryManager.trackPage(TelemetryManager.Sections.AUCTIONS, "Transfer Market Search Filters")
        }
    }
    ,
    UTMarketSearchFiltersViewController.prototype.viewWillDisappear = function() {
        var e = this.getView()
          , t = e.getTabMenuComponent();
        r.prototype.viewDidDisappear.call(this),
        e.removeTarget(this, this.eResetSelected, UTMarketSearchFiltersView.Event.RESET),
        e.removeTarget(this, this.eSearchSelected, UTMarketSearchFiltersView.Event.SEARCH),
        e.removeTarget(this, this.eFilterChanged, UTMarketSearchFiltersView.Event.FILTER_CHANGE),
        e.removeTarget(this, this.eMinBidPriceChanged, UTMarketSearchFiltersView.Event.MIN_BID_PRICE_CHANGE),
        e.removeTarget(this, this.eMaxBidPriceChanged, UTMarketSearchFiltersView.Event.MAX_BID_PRICE_CHANGE),
        e.removeTarget(this, this.eMinBuyPriceChanged, UTMarketSearchFiltersView.Event.MIN_BUY_PRICE_CHANGE),
        e.removeTarget(this, this.eMaxBuyPriceChanged, UTMarketSearchFiltersView.Event.MAX_BUY_PRICE_CHANGE),
        t.removeTarget(this, this.eSearchCategoryChanged, EventType.TAP)
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eMinBidPriceChanged = function(e, t, i) {
        this.viewmodel && (this.viewmodel.searchCriteria.minBid = i.value)
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eMaxBidPriceChanged = function(e, t, i) {
        this.viewmodel && (this.viewmodel.searchCriteria.maxBid = i.value)
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eMinBuyPriceChanged = function(e, t, i) {
        this.viewmodel && (this.viewmodel.searchCriteria.minBuy = i.value)
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eMaxBuyPriceChanged = function(e, t, i) {
        this.viewmodel && (this.viewmodel.searchCriteria.maxBuy = i.value)
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eResetSelected = function(e, t, i) {
        var o, n = this.getView();
        this.viewmodel && (this.viewmodel.resetSearch(),
        n.setFilters(this.viewmodel, !1)),
        n.resetPrices(),
        null === (o = services.User.getUser()) || void 0 === o || o.marketSearchCriteria.reset()
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eSearchSelected = function(e, t, i) {
        if (this.viewmodel) {
            var o, n = this.viewmodel.searchCriteria, r = services.User.getUser(), s = this.getNavigationController(), a = !(isPhone() || this.squadContext);
            if (r) {
                var l = r.marketSearchCriteria;
                n.offset = 0,
                l.update(n),
                l.maskedDefId = 0
            }
            a ? o = new UTMarketSearchResultsSplitViewController : (o = new UTMarketSearchResultsViewController,
            this.squadContext && (TelemetryManager.trackEvent(TelemetryManager.Sections.AUCTIONS, TelemetryManager.Categories.BUTTON_PRESS, "Squad Slot Detail View - Search from Transfer Market Filters"),
            o.setSquadContext(this.squadContext))),
            services.Item.clearTransferMarketCache(),
            o.initWithSearchCriteria(n),
            null == s || s.pushViewController(o, !0)
        }
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eFilterChanged = function(e, t, i) {
        this.viewmodel && JSUtils.isValid(i.setId) && JSUtils.isValid(i.id) && JSUtils.isValid(i.value) && (this.viewmodel.updateFromFilterChange(i.setId, i.id, i.value),
        this.getView().setFilters(this.viewmodel, !1))
    }
    ,
    UTMarketSearchFiltersViewController.prototype.ePlayerNameChanged = function(e, t, i) {
        if (this.viewmodel) {
            var o = this.getView()
              , n = o.getPlayerNameSearch().getSelected();
            n ? this.viewmodel.setPlayerData(n) : this.viewmodel.clearPlayerData(),
            o.setFilters(this.viewmodel, !1),
            JSUtils.isValid(n) && (o.setFilterValue(enums.UISearchFilters.NATION, -1),
            o.setFilterValue(enums.UISearchFilters.LEAGUE, -1),
            o.setFilterValue(enums.UISearchFilters.CLUB, -1))
        }
    }
    ,
    UTMarketSearchFiltersViewController.prototype.eSearchCategoryChanged = function(e, t, i) {
        if (this.viewmodel && i.id !== this.viewmodel.searchBucket) {
            var o = this.getView();
            i.id !== SearchBucket.PLAYER && (this.viewmodel.clearPlayerData(),
            o.resetPlayerName()),
            this.viewmodel.setSearchBucket(i.id),
            o.setFilters(this.viewmodel, !1)
        }
    }
    ,
    UTMarketSearchFiltersViewController
}(EAViewController);
services.URL.registerDeepLinkID(DeepLinkSection.AUCTION, function(e) {
    var t, i, o = !getAppMain().getConfigRepository().getConfigBoolean(EAConfigurationRepository.KEY_HIDE_TRANSFER_MARKET) && (null === (t = services.User.getUser()) || void 0 === t ? void 0 : t.hasTradeAccess()) && services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED), n = getAppMain().getRootViewController();
    n.setGameViewTab(UTGameTabBarController.TabTag.TRANSFERS);
    var r = n.getPresentedViewController();
    if (o && r instanceof UTTabBarController) {
        var s = r.getCurrentViewController()
          , a = void 0;
        if (services.Item.clearTransferMarketCache(),
        s instanceof UTNavigationController && 0 === e.length) {
            a = new UTMarketSearchFiltersViewController;
            var l = null === (i = services.User.getUser()) || void 0 === i ? void 0 : i.marketSearchCriteria;
            l && a.initWithSearchCriteria(l),
            s.pushViewController(a)
        } else if (s instanceof UTNavigationController) {
            var c = new UTSearchCriteriaDTO;
            c.defId = [parseInt(e[0], 10)],
            (a = isPhone() ? new UTMarketSearchResultsViewController : new UTMarketSearchResultsSplitViewController).initWithSearchCriteria(c),
            s.pushViewController(a)
        }
    }
});
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTQuickListPanelView = function(t) {
    function UTQuickListPanelView() {
        var e = t.call(this) || this;
        return e.priceLimitsSet = !1,
        e
    }
    return __extends(UTQuickListPanelView, t),
    UTQuickListPanelView.prototype.init = function() {
        t.prototype.init.call(this),
        this._bidNumericStepper.init(),
        this._bidNumericStepper.setMinValue(AUCTION_MIN_BID),
        this._bidNumericStepper.getInput().addTarget(this, this.onBidPriceChanged, EventType.CHANGE),
        this._buyNowNumericStepper.init(),
        this._buyNowNumericStepper.setMinValue(AUCTION_MIN_BUY),
        this._buyNowNumericStepper.getInput().addTarget(this, this.onBuyPriceChanged, EventType.CHANGE);
        var e = services.Localization;
        this._durationPicker.init(),
        this._durationPicker.setOptions([new UTDataProviderEntryDTO(0,3600,e.localize("auctionduration.hour.singular")), new UTDataProviderEntryDTO(1,10800,e.localize("auctionduration.hour.plural", [e.localizeNumber(3)])), new UTDataProviderEntryDTO(2,21600,e.localize("auctionduration.hour.plural", [e.localizeNumber(6)])), new UTDataProviderEntryDTO(3,43200,e.localize("auctionduration.hour.plural", [e.localizeNumber(12)])), new UTDataProviderEntryDTO(4,86400,e.localize("auctionduration.day.singular")), new UTDataProviderEntryDTO(5,259200,e.localize("auctionduration.day.plural", [e.localizeNumber(3)]))]),
        this._durationPicker.setIndex(repositories.Item.cachedDurationIndex),
        this._durationPicker.addTarget(this, this._eDurationChanged, EventType.CHANGE),
        this.__boughtPriceLabel.textContent = e.localize("auctioninfo.boughtfor"),
        this.__minPriceLabel.textContent = e.localize("auctioninfo.startprice"),
        this.__maxPriceLabel.textContent = e.localize("auctioninfo.buynowprice"),
        this.__duration.textContent = e.localize("auctioninfo.duration"),
        this._btnToggle.init(),
        this._btnToggle.addTarget(this, this._eToggle, EventType.TAP),
        this._listButton.init(),
        this._listButton.setText(e.localize("infopanel.label.listitem")),
        this._listButton.addTarget(this, this._eListSelected, EventType.TAP)
    }
    ,
    UTQuickListPanelView.prototype.dealloc = function() {
        this._durationPicker.removeTarget(this, this._eDurationChanged, EventType.CHANGE),
        t.prototype.dealloc.call(this)
    }
    ,
    UTQuickListPanelView.prototype.setTitle = function(e) {
        this._btnToggle.setText(e)
    }
    ,
    UTQuickListPanelView.prototype.onBidPriceChanged = function(e, t, i) {
        var o = this._bidNumericStepper.getValue()
          , n = this._buyNowNumericStepper.getValue();
        n <= o && (n < this._buyNowNumericStepper.getMaxValue() ? this._buyNowNumericStepper.getInput().increase(o) : this._bidNumericStepper.getInput().decrease(n))
    }
    ,
    UTQuickListPanelView.prototype.onBuyPriceChanged = function(e, t, i) {
        var o = this._bidNumericStepper.getValue()
          , n = this._buyNowNumericStepper.getValue();
        n <= o && o !== this._bidNumericStepper.getMinValue() && this._bidNumericStepper.getInput().decrease(n)
    }
    ,
    UTQuickListPanelView.prototype._eDurationChanged = function(e, t, i) {
        repositories.Item.cachedDurationIndex = e.getIndex()
    }
    ,
    UTQuickListPanelView.prototype.makeListButtonBusy = function(e) {
        this._listButton.setInteractionState(!e)
    }
    ,
    UTQuickListPanelView.prototype.setPriceLimits = function(e) {
        var t = this;
        this.priceLimitsSet = !!e;
        var i = services.Localization
          , o = e ? e.minimum : AUCTION_MIN_BID
          , n = UTCurrencyInputControl.getIncrementAboveVal(o)
          , r = e ? e.maximum : AUCTION_MAX_BID
          , s = UTCurrencyInputControl.getIncrementBelowVal(r);
        this.__minPrice.textContent = i.localize("auction.list.min") + " " + i.localizeNumber(o),
        this.__maxPrice.textContent = i.localize("auction.list.max") + " " + i.localizeNumber(r),
        this._bidNumericStepper.setLimits(o, s),
        this._bidNumericStepper.setValue(o),
        this._buyNowNumericStepper.setLimits(n, r),
        this._buyNowNumericStepper.setDefaultValue(r),
        this._buyNowNumericStepper.setValue(r),
        DOMKit.HTMLCollectionToArray(this.getRootElement().getElementsByClassName("buttonInfoLabel")).forEach(function(e) {
            DOMKit.toggleClass(e, "hasPriceBanding", t.priceLimitsSet)
        })
    }
    ,
    UTQuickListPanelView.prototype.setBidValue = function(e) {
        this._bidNumericStepper.setValue(0 < e ? Math.max(AUCTION_MIN_BID, Math.min(e, AUCTION_MAX_BID)) : AUCTION_MIN_BID),
        this._buyNowNumericStepper.getValue() <= this._bidNumericStepper.getValue() && this._buyNowNumericStepper.setValue(Math.min(UTCurrencyInputControl.getIncrementAboveVal(this._bidNumericStepper.getValue()), AUCTION_MAX_BID))
    }
    ,
    UTQuickListPanelView.prototype.setBuyNowValue = function(e) {
        this._buyNowNumericStepper.setValue(0 < e ? Math.max(UTCurrencyInputControl.getIncrementAboveVal(AUCTION_MIN_BID), Math.min(e, AUCTION_MAX_BID)) : 0);
        var t = this._bidNumericStepper.getValue()
          , i = this._buyNowNumericStepper.getValue();
        0 < i && i <= t && this._bidNumericStepper.setValue(UTCurrencyInputControl.getIncrementBelowVal(i))
    }
    ,
    UTQuickListPanelView.prototype.setBoughtPrice = function(e) {
        this.__boughtPriceValue.textContent = 0 < e ? services.Localization.localizeNumber(e) : "",
        DOMKit.toggleClass(this.__boughtPrice, "hasPreviousPrice", 0 < e)
    }
    ,
    UTQuickListPanelView.prototype.hasPriceLimits = function() {
        return this.priceLimitsSet
    }
    ,
    UTQuickListPanelView.prototype.toggle = function() {
        this._btnToggle.toggleClass("open", !this._btnToggle.hasClass("open")),
        DOMKit.toggleClass(this.__panelActions, "open")
    }
    ,
    UTQuickListPanelView.prototype.open = function() {
        this._btnToggle.addClass("open"),
        DOMKit.addClass(this.__panelActions, "open")
    }
    ,
    UTQuickListPanelView.prototype.close = function() {
        this._btnToggle.removeClass("open"),
        DOMKit.removeClass(this.__panelActions, "open")
    }
    ,
    UTQuickListPanelView.prototype.toggleDisplay = function(e) {
        this.setDisplay(e)
    }
    ,
    UTQuickListPanelView.prototype._eToggle = function(e, t, i) {
        this._triggerActions("panelToggle", {
            openState: this.hasClass("open")
        })
    }
    ,
    UTQuickListPanelView.prototype._eListSelected = function(e, t, i) {
        this._triggerActions(enums.UIItemActionEvent.LIST_ON_MARKET, {
            bidAmount: this._bidNumericStepper.getValue(),
            buyAmount: this._buyNowNumericStepper.getValue(),
            duration: parseInt(this._durationPicker.value, 10)
        })
    }
    ,
    UTQuickListPanelView
}(EATargetActionView);
UTQuickListPanelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-quick-list-panel-view");
        var t = document.createElement("div");
        t.classList.add("ut-button-group"),
        this._btnToggle = new UTGroupButtonControl,
        this._btnToggle.getRootElement().classList.add("accordian"),
        t.appendChild(this._btnToggle.getRootElement()),
        e.appendChild(t),
        this.__panelActions = document.createElement("div"),
        this.__panelActions.classList.add("panelActions"),
        this.__boughtPrice = document.createElement("div"),
        this.__boughtPrice.classList.add("boughtPrice"),
        this.__boughtPrice.classList.add("panelActionRow"),
        this.__boughtPriceLabel = document.createElement("span"),
        this.__boughtPriceLabel.classList.add("boughtPriceLabel"),
        this.__boughtPrice.appendChild(this.__boughtPriceLabel),
        this.__boughtPriceValue = document.createElement("span"),
        this.__boughtPriceValue.classList.add("currency-coins"),
        this.__boughtPriceValue.classList.add("boughtPriceValue"),
        this.__boughtPrice.appendChild(this.__boughtPriceValue),
        this.__panelActions.appendChild(this.__boughtPrice);
        var i = document.createElement("div");
        i.classList.add("panelActionRow");
        var o = document.createElement("div");
        o.classList.add("buttonInfoLabel"),
        this.__minPriceLabel = document.createElement("span"),
        this.__minPriceLabel.classList.add("spinnerLabel"),
        o.appendChild(this.__minPriceLabel),
        this.__minPrice = document.createElement("span"),
        this.__minPrice.classList.add("currency-coins"),
        this.__minPrice.classList.add("bandingLabel"),
        o.appendChild(this.__minPrice),
        i.appendChild(o),
        this._bidNumericStepper = new UTNumericInputSpinnerControl,
        i.appendChild(this._bidNumericStepper.getRootElement()),
        this.__panelActions.appendChild(i);
        var n = document.createElement("div");
        n.classList.add("panelActionRow");
        var r = document.createElement("div");
        r.classList.add("buttonInfoLabel"),
        this.__maxPriceLabel = document.createElement("span"),
        this.__maxPriceLabel.classList.add("spinnerLabel"),
        r.appendChild(this.__maxPriceLabel),
        this.__maxPrice = document.createElement("span"),
        this.__maxPrice.classList.add("currency-coins"),
        this.__maxPrice.classList.add("bandingLabel"),
        r.appendChild(this.__maxPrice),
        n.appendChild(r),
        this._buyNowNumericStepper = new UTNumericInputSpinnerControl,
        n.appendChild(this._buyNowNumericStepper.getRootElement()),
        this.__panelActions.appendChild(n);
        var s = document.createElement("div");
        s.classList.add("panelActionRow"),
        this.__duration = document.createElement("div"),
        this.__duration.classList.add("durationLabel"),
        this.__duration.classList.add("buttonInfoLabel"),
        s.appendChild(this.__duration),
        this._durationPicker = new UTDropDownControl,
        s.appendChild(this._durationPicker.getRootElement()),
        this.__panelActions.appendChild(s),
        this._listButton = new UTStandardButtonControl,
        this._listButton.getRootElement().classList.add("call-to-action"),
        this.__panelActions.appendChild(this._listButton.getRootElement()),
        e.appendChild(this.__panelActions),
        this.__root = e,
        this._generated = !0
    }
}
,
UTQuickListPanelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._btnToggle.destroy(),
    this.__panelActions = null,
    this.__boughtPrice = null,
    this.__boughtPriceLabel = null,
    this.__boughtPriceValue = null,
    this.__minPriceLabel = null,
    this.__minPrice = null,
    this._bidNumericStepper.destroy(),
    this.__maxPriceLabel = null,
    this.__maxPrice = null,
    this._buyNowNumericStepper.destroy(),
    this.__duration = null,
    this._durationPicker.destroy(),
    this._listButton.destroy()
}
,
UTQuickListPanelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTQuickListPanelViewController = function(t) {
    function UTQuickListPanelViewController() {
        var e = t.call(this) || this;
        return e.item = null,
        e
    }
    return __extends(UTQuickListPanelViewController, t),
    UTQuickListPanelViewController.prototype.init = function() {
        if (!this.initialized) {
            t.prototype.init.call(this);
            var e = this.getView();
            e.addTarget(this, this._onList, enums.UIItemActionEvent.LIST_ON_MARKET),
            e.addTarget(this, this._onOpen, "panelToggle")
        }
    }
    ,
    UTQuickListPanelViewController.prototype.initWithItem = function(e) {
        this.initialized || (this.item = e,
        this.init())
    }
    ,
    UTQuickListPanelViewController.prototype._getViewInstanceFromData = function() {
        return new UTQuickListPanelView
    }
    ,
    UTQuickListPanelViewController.prototype.renderView = function() {
        var e, t, i, o = this.getView(), n = null === (e = this.item) || void 0 === e ? void 0 : e.getAuctionData(), r = null === (t = this.item) || void 0 === t ? void 0 : t.getPriceLimits();
        r && o.setPriceLimits(r);
        var s = null === (i = this.item) || void 0 === i ? void 0 : i.lastSalePrice;
        o.setBoughtPrice(null != s ? s : 0),
        n && n.isValid() && n.isExpired() && n.tradeOwner && (o.setBidValue(0 < n.currentBid ? n.currentBid : n.startingBid),
        o.setBuyNowValue(n.buyNowPrice))
    }
    ,
    UTQuickListPanelViewController.prototype.setItem = function(e) {
        this.item = e,
        this.renderView()
    }
    ,
    UTQuickListPanelViewController.prototype.viewDidAppear = function() {
        this.renderView()
    }
    ,
    UTQuickListPanelViewController.prototype._onList = function(e, t, i) {
        gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        this.item && services.Item.list(this.item, i.bidAmount, i.buyAmount, i.duration).observe(this, function onListComplete(e, t) {
            if (e.unobserve(this),
            !t.success) {
                var i = t.error ? t.error.code : t.status;
                if (NetworkErrorManager.checkCriticalStatus(i))
                    NetworkErrorManager.handleStatus(i);
                else {
                    var o = void 0;
                    switch (i) {
                    case HttpStatusCode.FORBIDDEN:
                        o = "popup.error.list.forbidden.message";
                        break;
                    case UtasErrorCode.PERMISSION_DENIED:
                        o = "popup.error.list.PermissionDenied";
                        break;
                    case UtasErrorCode.STATE_INVALID:
                        o = "popup.error.list.InvalidState";
                        break;
                    case UtasErrorCode.DESTINATION_FULL:
                        o = "popup.error.tradetoken.SellItemTradePileFull";
                        break;
                    case UtasErrorCode.CARD_IN_TRADE:
                        o = "popup.error.tradetoken.ItemInTradeOffer";
                        break;
                    default:
                        o = "popup.error.list.InvalidState"
                    }
                    services.Notification.queue([services.Localization.localize(o), UINotificationType.NEGATIVE])
                }
            }
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        })
    }
    ,
    UTQuickListPanelViewController.prototype._onOpen = function(e, t, i) {
        var o = this
          , n = this.getView();
        i && !i.openState ? services.Item.requestTransferItems().observe(this, function(e, t) {
            e.unobserve(o);
            var i = (JSUtils.isObject(t.response) ? t.response.items : []).filter(function(e) {
                return e.getAuctionData().isSelling()
            });
            t.success && i && i.length >= repositories.Item.getPileSize(ItemPile.TRANSFER) ? utils.PopupManager.showAlert(utils.PopupManager.Alerts.HIT_MAX_LISTING) : o.item && !o.item.hasPriceLimits() ? (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
            services.Item.requestMarketData(o.item).observe(o, function(e, t) {
                e.unobserve(o),
                gClickShield.hideShield(EAClickShieldView.Shield.LOADING),
                NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : (o.renderView(),
                n.open())
            })) : n.hasPriceLimits() ? n.toggle() : (o.renderView(),
            n.open())
        }) : n.close()
    }
    ,
    UTQuickListPanelViewController
}(EAViewController)
  , UTQuickSellPopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTQuickSellPopupView() {
        return e.call(this) || this
    }
    return __extends(UTQuickSellPopupView, e),
    UTQuickSellPopupView.prototype.init = function() {
        this._cancelBtn.init(),
        this._cancelBtn.setText(services.Localization.localize("common.dialog.cancel")),
        this._cancelBtn.setInteractionState(!0),
        this._confirmBtn.init(),
        this._confirmBtn.setInteractionState(!1),
        this._minusBtn.init(),
        this._minusBtn.setInteractionState(!0),
        this._plusBtn.init(),
        this._plusBtn.setInteractionState(!0),
        this._quickSellInput.init(),
        this._quickSellInput.setInteractionState(!0)
    }
    ,
    UTQuickSellPopupView.prototype.dealloc = function() {
        e.prototype.dealloc.call(this)
    }
    ,
    UTQuickSellPopupView.prototype.focus = function() {
        this._quickSellInput.getRootElement().focus()
    }
    ,
    UTQuickSellPopupView.prototype.render = function(e, t, i, o) {
        var n = services.Localization
          , r = n.localize("club.quicksell.hint", [o.toString()]);
        this.__titleText.textContent = e,
        this._confirmBtn.setText(t),
        this.__total.textContent = n.localize("club.quicksell.total", [i.toString()]),
        this.__hint.textContent = "[" + r + "]",
        this.__quickSellMsg.textContent = n.localize("club.quicksell.intro"),
        this.__quickSellInputLabel.textContent = n.localize("club.quicksell.label")
    }
    ,
    UTQuickSellPopupView.prototype.getSellCount = function() {
        return this._quickSellInput.value
    }
    ,
    UTQuickSellPopupView.prototype.setSellCount = function(e) {
        this._quickSellInput.value = e
    }
    ,
    UTQuickSellPopupView.prototype.getConfirmBtn = function() {
        return this._confirmBtn
    }
    ,
    UTQuickSellPopupView.prototype.getCancelBtn = function() {
        return this._cancelBtn
    }
    ,
    UTQuickSellPopupView.prototype.getIncrementBtn = function() {
        return this._plusBtn
    }
    ,
    UTQuickSellPopupView.prototype.getDecrementBtn = function() {
        return this._minusBtn
    }
    ,
    UTQuickSellPopupView.prototype.getSellCountInput = function() {
        return this._quickSellInput
    }
    ,
    UTQuickSellPopupView.prototype.setDiscardValue = function(e) {
        this.__quickSellTotalCoins.textContent = e.toString()
    }
    ,
    UTQuickSellPopupView.prototype.enableDisableIncrements = function(e) {
        this._minusBtn.setInteractionState(!1),
        this._plusBtn.setInteractionState(!1),
        1 < this.getSellCount() && this._minusBtn.setInteractionState(!0),
        this.getSellCount() < e && this._plusBtn.setInteractionState(!0)
    }
    ,
    UTQuickSellPopupView.prototype.setConfirmButtonEnabled = function(e) {
        this._confirmBtn.setInteractionState(e)
    }
    ,
    UTQuickSellPopupView.Event = Object.freeze({
        CHANGE: "change"
    }),
    UTQuickSellPopupView
}(EATargetActionView));
UTQuickSellPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-quick-sell");
        var t = document.createElement("header");
        this.__titleText = document.createElement("h1"),
        t.appendChild(this.__titleText),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("bodySection"),
        this.__quickSellMsg = document.createElement("p"),
        this.__quickSellMsg.classList.add("ut-quick-sell--msg"),
        i.appendChild(this.__quickSellMsg);
        var o = document.createElement("div");
        o.classList.add("ut-quick-sell--input-container"),
        this.__quickSellInputLabel = document.createElement("label"),
        this.__quickSellInputLabel.classList.add("ut-sell-quick--label"),
        o.appendChild(this.__quickSellInputLabel);
        var n = document.createElement("div");
        n.classList.add("ut-quick-sell--input"),
        this._minusBtn = new UTStandardButtonControl,
        this._minusBtn.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._minusBtn.getRootElement()),
        this._quickSellInput = new UTNumberInputControl,
        n.appendChild(this._quickSellInput.getRootElement()),
        this._plusBtn = new UTStandardButtonControl,
        this._plusBtn.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._plusBtn.getRootElement());
        var r = document.createElement("div");
        r.classList.add("ut-quick-sell--total-coins"),
        this.__quickSellTotalCoins = document.createElement("span"),
        r.appendChild(this.__quickSellTotalCoins),
        n.appendChild(r),
        o.appendChild(n);
        var s = document.createElement("div");
        this.__total = document.createElement("span"),
        this.__total.classList.add("ut-quick-sell--total"),
        s.appendChild(this.__total),
        this.__hint = document.createElement("span"),
        this.__hint.classList.add("ut-quick-sell--hint"),
        s.appendChild(this.__hint),
        o.appendChild(s),
        i.appendChild(o),
        e.appendChild(i);
        var a = document.createElement("div");
        a.classList.add("ut-button-group"),
        this._confirmBtn = new UTGroupButtonControl,
        a.appendChild(this._confirmBtn.getRootElement()),
        this._cancelBtn = new UTGroupButtonControl,
        this._cancelBtn.getRootElement().classList.add("negative"),
        a.appendChild(this._cancelBtn.getRootElement()),
        e.appendChild(a),
        this.__root = e,
        this._generated = !0
    }
}
,
UTQuickSellPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleText = null,
    this.__quickSellMsg = null,
    this.__quickSellInputLabel = null,
    this._minusBtn.destroy(),
    this._quickSellInput.destroy(),
    this._plusBtn.destroy(),
    this.__quickSellTotalCoins = null,
    this.__total = null,
    this.__hint = null,
    this._confirmBtn.destroy(),
    this._cancelBtn.destroy()
}
,
UTQuickSellPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTQuickSellPopupViewController = function(n) {
    function UTQuickSellPopupViewController(e, t, i) {
        var o = n.call(this) || this;
        return o.discardValue = i,
        o.onConfirm = new EAObservable,
        o.totalCount = e,
        o.untradeableCount = t,
        o
    }
    return __extends(UTQuickSellPopupViewController, n),
    UTQuickSellPopupViewController.prototype.init = function() {
        n.prototype.init.call(this);
        var e = this.getView();
        e.getConfirmBtn().addTarget(this, this.eConfirm, EventType.TAP),
        e.getCancelBtn().addTarget(this, this.eCancel, EventType.TAP),
        e.getIncrementBtn().addTarget(this, this.eIncrement, EventType.TAP),
        e.getDecrementBtn().addTarget(this, this.eDecrement, EventType.TAP),
        e.getSellCountInput().addTarget(this, this.eChange, EventType.CHANGE)
    }
    ,
    UTQuickSellPopupViewController.prototype.dealloc = function() {
        this.onConfirm.dealloc(),
        n.prototype.dealloc.call(this)
    }
    ,
    UTQuickSellPopupViewController.prototype.viewDidAppear = function() {
        n.prototype.viewDidAppear.call(this);
        var e = services.Localization
          , t = this.getView();
        t.render(e.localize("club.quicksell.title"), e.localize("club.quicksell.title"), this.totalCount, this.untradeableCount),
        t.getSellCountInput().setMinValue(1),
        t.getSellCountInput().setMaxValue(this.totalCount),
        t.setSellCount(1),
        t.getConfirmBtn().setInteractionState(!0),
        this.updateConfirmButtonStatus()
    }
    ,
    UTQuickSellPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTQuickSellPopupView
    }
    ,
    UTQuickSellPopupViewController.prototype.eDecrement = function() {
        this.updateAmount(-1)
    }
    ,
    UTQuickSellPopupViewController.prototype.eIncrement = function() {
        this.updateAmount(1)
    }
    ,
    UTQuickSellPopupViewController.prototype.eChange = function() {
        this.updateInterface()
    }
    ,
    UTQuickSellPopupViewController.prototype.updateAmount = function(e) {
        var t = this.getView()
          , i = t.getSellCount();
        (i += e) < 1 ? i = 1 : i > this.totalCount && (i = this.totalCount),
        t.setSellCount(i),
        this.updateDiscardValue(),
        t.enableDisableIncrements(this.totalCount),
        this.updateConfirmButtonStatus()
    }
    ,
    UTQuickSellPopupViewController.prototype.updateDiscardValue = function() {
        var e = this.getView()
          , t = e.getSellCount()
          , i = t * this.discardValue;
        JSUtils.isNumber(i) || (i = 1 * this.discardValue,
        e.setSellCount(1)),
        t > this.totalCount - this.untradeableCount && (i = (this.totalCount - this.untradeableCount) * this.discardValue),
        e.setDiscardValue(i)
    }
    ,
    UTQuickSellPopupViewController.prototype.eCancel = function() {
        this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTQuickSellPopupViewController.prototype.updateInterface = function() {
        this.updateConfirmButtonStatus()
    }
    ,
    UTQuickSellPopupViewController.prototype.updateConfirmButtonStatus = function() {
        var e = this.getView();
        e.setConfirmButtonEnabled(!1);
        var t = e.getSellCountInput().getValue();
        JSUtils.isNumber(t) || e.setSellCount(1),
        t > this.totalCount ? e.setSellCount(this.totalCount) : t < 1 && e.setSellCount(1),
        e.setConfirmButtonEnabled(!0),
        this.updateDiscardValue(),
        e.enableDisableIncrements(this.totalCount)
    }
    ,
    UTQuickSellPopupViewController.prototype.eConfirm = function() {
        this.confirmCount()
    }
    ,
    UTQuickSellPopupViewController.prototype.confirmCount = function() {
        var e = this.getView()
          , t = e.getSellCount();
        0 === t || t > this.totalCount || (e.setInteractionState(!1),
        this.onConfirm.notify(t),
        this.onExit.notify(enums.UIDialogOptions.OK))
    }
    ,
    UTQuickSellPopupViewController.prototype.handleKeyUpEvent = function(e) {
        e.key === KeyboardKey.ESCAPE || e.key === KeyboardKey.MS_ESCAPE ? this.onExit.notify(enums.UIDialogOptions.CANCEL) : e.key === KeyboardKey.ENTER && this.confirmCount()
    }
    ,
    UTQuickSellPopupViewController
}(BasePopupViewController)
  , UTTacticsApplyManagerPresetRowView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsApplyManagerPresetRowView() {
        return t.call(this) || this
    }
    return __extends(UTTacticsApplyManagerPresetRowView, t),
    UTTacticsApplyManagerPresetRowView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTTacticsApplyManagerPresetRowView.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    UTTacticsApplyManagerPresetRowView.prototype.setTacticName = function(e) {
        this.__tacticName.textContent = e
    }
    ,
    UTTacticsApplyManagerPresetRowView.prototype.toggleSelected = function(e) {
        this.toggleClass("selected", e)
    }
    ,
    UTTacticsApplyManagerPresetRowView.prototype.toggleActive = function(e) {
        this.toggleClass("active", e),
        DOMKit.toggleDisplayStyle(this.__checkmark, e)
    }
    ,
    UTTacticsApplyManagerPresetRowView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTTacticsApplyManagerPresetRowView
}(EATargetActionView));
UTTacticsApplyManagerPresetRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-apply-manager-preset-row-view");
        var t = document.createElement("div");
        t.classList.add("ut-tactics-apply-manager-preset-row-view--content"),
        this.__label = document.createElement("p"),
        this.__label.classList.add("ut-tactics-apply-manager-preset-row-view--label"),
        t.appendChild(this.__label),
        this.__tacticName = document.createElement("p"),
        this.__tacticName.classList.add("ut-tactics-apply-manager-preset-row-view--name"),
        t.appendChild(this.__tacticName),
        e.appendChild(t),
        this.__checkmark = document.createElement("div"),
        this.__checkmark.classList.add("ut-tactics-apply-manager-preset-row-view--checkmark"),
        e.appendChild(this.__checkmark),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsApplyManagerPresetRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__tacticName = null,
    this.__checkmark = null
}
,
UTTacticsApplyManagerPresetRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsInfoCellView = function(e) {
    function UTTacticsInfoCellView() {
        return e.call(this) || this
    }
    return __extends(UTTacticsInfoCellView, e),
    UTTacticsInfoCellView.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    UTTacticsInfoCellView.prototype.setName = function(e) {
        this.__name.textContent = e
    }
    ,
    UTTacticsInfoCellView.prototype.setEmptyCell = function(e) {
        this.setLabel(e),
        this.setName(BLANK_STR)
    }
    ,
    UTTacticsInfoCellView.prototype.showCheckmark = function(e) {
        this.__checkmark.style.display = e ? "block" : "none"
    }
    ,
    UTTacticsInfoCellView
}(EAView);
UTTacticsInfoCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-info-cell-view"),
        this.__label = document.createElement("p"),
        this.__label.classList.add("ut-tactics-info-cell-view--label"),
        e.appendChild(this.__label);
        var t = document.createElement("span");
        t.classList.add("ut-tactics-info-cell-view--name-container"),
        this.__name = document.createElement("p"),
        this.__name.classList.add("ut-tactics-info-cell-view--name"),
        t.appendChild(this.__name),
        this.__checkmark = document.createElement("div"),
        this.__checkmark.classList.add("ut-tactics-info-cell-view--checkmark"),
        t.appendChild(this.__checkmark),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsInfoCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__name = null,
    this.__checkmark = null
}
,
UTTacticsInfoCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsPresetInfoRowView = function(t) {
    function UTTacticsPresetInfoRowView() {
        return t.call(this) || this
    }
    return __extends(UTTacticsPresetInfoRowView, t),
    UTTacticsPresetInfoRowView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this._name.setName(BLANK_STR),
        this._formation.setEmptyCell(e.localize("tactics.label.formation")),
        this._buildUpStyle.setEmptyCell(e.localize("tactics.label.offensive")),
        this._defensiveStyle.setEmptyCell(e.localize("tactics.label.defensive")),
        this.setOverlayText(e.localize("tactics.label.manageSettings.createNew")),
        this.setInteractionState(!0)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setTacticNameLabel = function(e) {
        this._name.setLabel(e)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setTacticName = function(e) {
        this._name.setName(e)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setFormationLabel = function(e) {
        this._formation.setLabel(e)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setFormationName = function(e) {
        var t = services.Localization
          , i = UTLocalizationUtil.formationDbNameToName(e, t);
        this._formation.setName(i)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setBuildUpStyleLabel = function(e) {
        this._buildUpStyle.setLabel(e)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setBuildUpStyle = function(e) {
        var t = services.Localization.localize("tactics.style.offensive." + e);
        this._buildUpStyle.setName(t)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setDefensiveStyleLabel = function(e) {
        this._defensiveStyle.setLabel(e)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setDefensiveStyle = function(e) {
        var t = services.Localization.localize("tactics.style.defensive." + e);
        this._defensiveStyle.setName(t)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.toggleOverlayDisplay = function(e) {
        this.__createOverlay.style.display = e ? "flex" : "none"
    }
    ,
    UTTacticsPresetInfoRowView.prototype.setOverlayText = function(e) {
        this.__createOverlayText.textContent = e
    }
    ,
    UTTacticsPresetInfoRowView.prototype.toggleSelected = function(e) {
        this.toggleClass("selected", e)
    }
    ,
    UTTacticsPresetInfoRowView.prototype.toggleActive = function(e) {
        this._name.showCheckmark(e)
    }
    ,
    UTTacticsPresetInfoRowView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTTacticsPresetInfoRowView
}(EATargetActionView);
UTTacticsPresetInfoRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-preset-info-row-view");
        var t = document.createElement("div");
        t.classList.add("ut-tactics-preset-info-row-view--content"),
        this._name = new UTTacticsInfoCellView,
        t.appendChild(this._name.getRootElement()),
        this._formation = new UTTacticsInfoCellView,
        t.appendChild(this._formation.getRootElement()),
        this._buildUpStyle = new UTTacticsInfoCellView,
        t.appendChild(this._buildUpStyle.getRootElement()),
        this._defensiveStyle = new UTTacticsInfoCellView,
        t.appendChild(this._defensiveStyle.getRootElement()),
        e.appendChild(t),
        this.__createOverlay = document.createElement("span"),
        this.__createOverlay.classList.add("ut-tactics-preset-info-row-view--overlay");
        var i = document.createElement("div");
        i.classList.add("ut-tactics-preset-info-row-view--overlay-icon"),
        this.__createOverlay.appendChild(i),
        this.__createOverlayText = document.createElement("p"),
        this.__createOverlay.appendChild(this.__createOverlayText),
        e.appendChild(this.__createOverlay),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsPresetInfoRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._name.destroy(),
    this._formation.destroy(),
    this._buildUpStyle.destroy(),
    this._defensiveStyle.destroy(),
    this.__createOverlay = null,
    this.__createOverlayText = null
}
,
UTTacticsPresetInfoRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsPresetInfoView = function(e) {
    function UTTacticsPresetInfoView() {
        return e.call(this) || this
    }
    return __extends(UTTacticsPresetInfoView, e),
    UTTacticsPresetInfoView.prototype.init = function() {
        var e = services.Localization;
        this.setPresetLabel(e.localize("tactics.presetpopup.label.tacticalpreset")),
        this.setBuildUpStyleLabel(e.localize("tactics.presetpopup.label.offensive")),
        this.setFormationLabel(e.localize("tactics.presetpopup.label.formation")),
        this.setDefenseStyleLabel(e.localize("tactics.presetpopup.label.defensive"))
    }
    ,
    UTTacticsPresetInfoView.prototype.setPresetLabel = function(e) {
        this.__presetLabel.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.setPresetName = function(e) {
        this.__presetName.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.setFormationLabel = function(e) {
        this.__formationLabel.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.setFormationName = function(e) {
        this.__formationName.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.setBuildUpStyleLabel = function(e) {
        this.__buildUpStyleLabel.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.setBuildUpStyleName = function(e) {
        this.__buildUpStyleName.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.setDefenseStyleLabel = function(e) {
        this.__defenseStyleLabel.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.setDefenseStyleName = function(e) {
        this.__defenseStyleName.textContent = e
    }
    ,
    UTTacticsPresetInfoView.prototype.renderPresetInfo = function(e, t) {
        var i = services.Localization;
        this.setPresetName(e.name),
        this.setFormationName(UTLocalizationUtil.formationDbNameToName(t, i)),
        this.setBuildUpStyleName(i.localize("tactics.style.offensive." + e.offensiveStyleId)),
        this.setDefenseStyleName(i.localize("tactics.style.defensive." + e.defensiveStyleId))
    }
    ,
    UTTacticsPresetInfoView
}(EAView);
UTTacticsPresetInfoView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-preset-info-view");
        var t = document.createElement("div");
        t.classList.add("ut-tactics-preset-info-view--row"),
        this.__presetLabel = document.createElement("p"),
        this.__presetLabel.classList.add("ut-tactics-preset-info-view--row-label"),
        t.appendChild(this.__presetLabel),
        this.__presetName = document.createElement("p"),
        this.__presetName.classList.add("ut-tactics-preset-info-view--row-value"),
        t.appendChild(this.__presetName),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-tactics-preset-info-view--row"),
        this.__formationLabel = document.createElement("p"),
        this.__formationLabel.classList.add("ut-tactics-preset-info-view--row-label"),
        i.appendChild(this.__formationLabel),
        this.__formationName = document.createElement("p"),
        this.__formationName.classList.add("ut-tactics-preset-info-view--row-value"),
        i.appendChild(this.__formationName),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-tactics-preset-info-view--row"),
        this.__buildUpStyleLabel = document.createElement("p"),
        this.__buildUpStyleLabel.classList.add("ut-tactics-preset-info-view--row-label"),
        o.appendChild(this.__buildUpStyleLabel),
        this.__buildUpStyleName = document.createElement("p"),
        this.__buildUpStyleName.classList.add("ut-tactics-preset-info-view--row-value"),
        o.appendChild(this.__buildUpStyleName),
        e.appendChild(o);
        var n = document.createElement("div");
        n.classList.add("ut-tactics-preset-info-view--row"),
        this.__defenseStyleLabel = document.createElement("p"),
        this.__defenseStyleLabel.classList.add("ut-tactics-preset-info-view--row-label"),
        n.appendChild(this.__defenseStyleLabel),
        this.__defenseStyleName = document.createElement("p"),
        this.__defenseStyleName.classList.add("ut-tactics-preset-info-view--row-value"),
        n.appendChild(this.__defenseStyleName),
        e.appendChild(n),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsPresetInfoView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__presetLabel = null,
    this.__presetName = null,
    this.__formationLabel = null,
    this.__formationName = null,
    this.__buildUpStyleLabel = null,
    this.__buildUpStyleName = null,
    this.__defenseStyleLabel = null,
    this.__defenseStyleName = null
}
,
UTTacticsPresetInfoView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsPresetPopupView = function(t) {
    function UTTacticsPresetPopupView() {
        var e = t.call(this) || this;
        return e.tacticSlotRows = [],
        e
    }
    return __extends(UTTacticsPresetPopupView, t),
    UTTacticsPresetPopupView.prototype.init = function() {
        var e = services.Localization;
        t.prototype.init.call(this),
        this._exitBtn.init(),
        this._actionBtn.init(),
        this._cancelBtn.init(),
        this._backBtn.init(),
        this._actionBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._cancelBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._backBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._backBtn.setVisibility(!1),
        this._cancelBtn.setText(e.localize("common.dialog.cancel")),
        this._checkmarkBtn.init(),
        this._checkmarkBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this.toggleDontShowAgainContainer(!1),
        this.setDontShowAgainText(e.localize("popup.applyPreset.dontShowAgain"))
    }
    ,
    UTTacticsPresetPopupView.prototype.dealloc = function() {
        this.clearTacticSlotRows(),
        this.presetInfo && (this.presetInfo.dealloc(),
        this.presetInfo = null),
        this._actionBtn.removeTarget(this, this.eButtonSelected, EventType.TAP),
        this._cancelBtn.removeTarget(this, this.eButtonSelected, EventType.TAP),
        this._backBtn.removeTarget(this, this.eButtonSelected, EventType.TAP),
        this._checkmarkBtn.removeTarget(this, this.eButtonSelected, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsPresetPopupView.prototype.clearTacticSlotRows = function() {
        this.tacticSlotRows.forEach(function(e) {
            return e.dealloc()
        }),
        this.tacticSlotRows = []
    }
    ,
    UTTacticsPresetPopupView.prototype.getExitBtn = function() {
        return this._exitBtn
    }
    ,
    UTTacticsPresetPopupView.prototype.getCancelBtn = function() {
        return this._cancelBtn
    }
    ,
    UTTacticsPresetPopupView.prototype.toggleBackBtn = function(e) {
        this._backBtn.setVisibility(e)
    }
    ,
    UTTacticsPresetPopupView.prototype.setActionButtonText = function(e) {
        this._actionBtn.setText(e)
    }
    ,
    UTTacticsPresetPopupView.prototype.toggleDontShowAgainContainer = function(e) {
        this.__dontShowAgainContainer.style.display = e ? "flex" : "none"
    }
    ,
    UTTacticsPresetPopupView.prototype.setSelectedTacticSlotRow = function(e) {
        this.tacticSlotRows.forEach(function(e) {
            return e.toggleSelected(!1)
        }),
        this.tacticSlotRows[e].toggleSelected(!0)
    }
    ,
    UTTacticsPresetPopupView.prototype.setStepText = function(e) {
        this.__step.textContent = services.Localization.localize("popup.applyPreset.step", [e.toString(), UTTacticsPresetPopupView.MAX_STEPS.toString()])
    }
    ,
    UTTacticsPresetPopupView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTTacticsPresetPopupView.prototype.setDontShowAgainText = function(e) {
        this.__dontShowAgainText.textContent = e
    }
    ,
    UTTacticsPresetPopupView.prototype.setApplyButtonInteractionState = function(e) {
        this._actionBtn.setInteractionState(e)
    }
    ,
    UTTacticsPresetPopupView.prototype.renderPresetInfo = function(e, t) {
        this.removeSubviews();
        var i = new UTTacticsPresetInfoView;
        (this.presetInfo = i).init(),
        i.renderPresetInfo(e, t),
        this.addSubview(i, this.__content),
        this.layoutSubviews()
    }
    ,
    UTTacticsPresetPopupView.prototype.renderTacticSlots = function(e, o) {
        var n = this;
        this.removeSubviews(),
        this.clearTacticSlotRows(),
        e.forEach(function(e, t) {
            var i = n.generateTacticSlotRow(e, t, o);
            n.tacticSlotRows.push(i),
            n.addSubview(i, n.__content)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsPresetPopupView.prototype.generateTacticSlotRow = function(e, t, i) {
        var o = this
          , n = services.Localization
          , r = new UTTacticsApplyManagerPresetRowView;
        return r.init(),
        r.setLabel(n.localize("popup.applyPreset.tacticLabel", [(t + 1).toString()])),
        e.getState() === TacticState.ACTIVE && r.toggleActive(!0),
        e.isCustomized() ? (r.setTacticName(e.name),
        r.addTarget(this, function() {
            return o._eTacticSlotSelected(e.id, t)
        }, EventType.TAP)) : (r.setTacticName(n.localize("popup.applyPreset.createNew")),
        r.addTarget(this, function() {
            return o._eNewTacticsSlotSelected(e.id, t, i)
        }, EventType.TAP)),
        r
    }
    ,
    UTTacticsPresetPopupView.prototype.eButtonSelected = function(e, t, i) {
        e === this._actionBtn ? this._triggerActions(UTTacticsPresetPopupView.Events.APPLY) : e === this._cancelBtn ? this._triggerActions(UTTacticsPresetPopupView.Events.CANCEL) : e === this._backBtn ? this._triggerActions(UTTacticsPresetPopupView.Events.BACK) : e === this._checkmarkBtn && this._triggerActions(UTTacticsPresetPopupView.Events.DONT_SHOW_AGAIN)
    }
    ,
    UTTacticsPresetPopupView.prototype._eTacticSlotSelected = function(e, t) {
        this.setApplyButtonInteractionState(!0),
        this.setSelectedTacticSlotRow(t),
        this._triggerActions(UTTacticsPresetPopupView.Events.SELECT_TACTIC_SLOT, {
            slotId: e
        })
    }
    ,
    UTTacticsPresetPopupView.prototype._eNewTacticsSlotSelected = function(e, t, i) {
        this.setSelectedTacticSlotRow(t),
        this._triggerActions(UTTacticsPresetPopupView.Events.CREATE_NEW_TACTICS_SLOT, {
            slotId: e,
            preset: i
        })
    }
    ,
    UTTacticsPresetPopupView.MAX_STEPS = 2,
    UTTacticsPresetPopupView.Events = {
        APPLY: "APPLY",
        BACK: "BACK",
        CANCEL: "CANCEL",
        CREATE_NEW_TACTICS_SLOT: "CREATE_NEW_TACTICS_SLOT",
        SELECT_TACTIC_SLOT: "SELECT_TACTIC_SLOT",
        DONT_SHOW_AGAIN: "DONT_SHOW_AGAIN"
    },
    UTTacticsPresetPopupView
}(EATargetActionView);
UTTacticsPresetPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-preset-popup-view");
        var t = document.createElement("header");
        t.classList.add("ut-tactics-preset-popup-view--header"),
        this._backBtn = new UTImageButtonControl,
        this._backBtn.getRootElement().classList.add("back-btn"),
        t.appendChild(this._backBtn.getRootElement()),
        this.__step = document.createElement("p"),
        t.appendChild(this.__step),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-tactics-preset-popup-view--description"),
        e.appendChild(this.__description),
        this.__content = document.createElement("div"),
        this.__content.classList.add("ut-tactics-preset-popup-view--content"),
        e.appendChild(this.__content),
        this.__buttonContainer = document.createElement("div"),
        this.__buttonContainer.classList.add("ut-tactics-preset-popup-view--button-container"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        this.__buttonContainer.appendChild(this._actionBtn.getRootElement()),
        this._cancelBtn = new UTStandardButtonControl,
        this.__buttonContainer.appendChild(this._cancelBtn.getRootElement()),
        e.appendChild(this.__buttonContainer),
        this.__dontShowAgainContainer = document.createElement("div"),
        this.__dontShowAgainContainer.classList.add("ut-tactics-preset-popup-view--dont-show"),
        this._checkmarkBtn = new UTToggleButtonControl,
        this._checkmarkBtn.getRootElement().classList.add("checkmark"),
        this.__dontShowAgainContainer.appendChild(this._checkmarkBtn.getRootElement()),
        this.__dontShowAgainText = document.createElement("p"),
        this.__dontShowAgainContainer.appendChild(this.__dontShowAgainText),
        e.appendChild(this.__dontShowAgainContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsPresetPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._backBtn.destroy(),
    this.__step = null,
    this._exitBtn.destroy(),
    this.__description = null,
    this.__content = null,
    this.__buttonContainer = null,
    this._actionBtn.destroy(),
    this._cancelBtn.destroy(),
    this.__dontShowAgainContainer = null,
    this._checkmarkBtn.destroy(),
    this.__dontShowAgainText = null
}
,
UTTacticsPresetPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsPresetPopupViewController = function(o) {
    function UTTacticsPresetPopupViewController(e, t) {
        var i = o.call(this) || this;
        return i.item = e,
        i.popupViewModel = t,
        i.currentStep = 1,
        i.tacticsViewModel = null,
        i
    }
    return __extends(UTTacticsPresetPopupViewController, o),
    UTTacticsPresetPopupViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsPresetPopupViewController.prototype.init = function() {
        o.prototype.init.call(this),
        this.popupViewModel.setPreset(services.Squad.getManagerPresetById(this.item.id))
    }
    ,
    UTTacticsPresetPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsPresetPopupView
    }
    ,
    UTTacticsPresetPopupViewController.prototype.viewDidAppear = function() {
        o.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.getExitBtn().addTarget(this, this.closePopup, EventType.TAP),
        e.getCancelBtn().addTarget(this, this.closePopup, EventType.TAP),
        e.addTarget(this, this.eActionButtonTapped, UTTacticsPresetPopupView.Events.APPLY),
        e.addTarget(this, this.eActionButtonTapped, UTTacticsPresetPopupView.Events.BACK),
        e.addTarget(this, this._onCreateNewSlot, UTTacticsPresetPopupView.Events.CREATE_NEW_TACTICS_SLOT),
        e.addTarget(this, this._onSelectSlot, UTTacticsPresetPopupView.Events.SELECT_TACTIC_SLOT),
        e.addTarget(this, this._onDontShowAgain, UTTacticsPresetPopupView.Events.DONT_SHOW_AGAIN)
    }
    ,
    UTTacticsPresetPopupViewController.prototype.viewWillDisappear = function() {
        o.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.getExitBtn().removeTarget(this, this.closePopup, EventType.TAP),
        e.getCancelBtn().removeTarget(this, this.closePopup, EventType.TAP),
        e.removeTarget(this, this.eActionButtonTapped, UTTacticsPresetPopupView.Events.APPLY),
        e.removeTarget(this, this.eActionButtonTapped, UTTacticsPresetPopupView.Events.BACK),
        e.removeTarget(this, this._onCreateNewSlot, UTTacticsPresetPopupView.Events.CREATE_NEW_TACTICS_SLOT),
        e.removeTarget(this, this._onSelectSlot, UTTacticsPresetPopupView.Events.SELECT_TACTIC_SLOT),
        e.removeTarget(this, this._onDontShowAgain, UTTacticsPresetPopupView.Events.DONT_SHOW_AGAIN)
    }
    ,
    UTTacticsPresetPopupViewController.prototype.eActionButtonTapped = function(e, t, i) {
        var o, n, r, s = this, a = services.Localization, l = this.popupViewModel.getPreset();
        if (t === UTTacticsPresetPopupView.Events.APPLY) {
            if (1 === this.currentStep)
                this.currentStep += 1,
                this.renderBasedOnStep(this.currentStep);
            else if (2 === this.currentStep) {
                if (!this.popupViewModel.getSelectedSlot())
                    return;
                null === (o = this.tacticsViewModel) || void 0 === o || o.setSelectedMentalityById(this.popupViewModel.getSelectedSlot());
                var c = null === (n = this.tacticsViewModel) || void 0 === n ? void 0 : n.getSelectedMentality();
                c && l && (this.applyPresetToMentality(c, l),
                gClickShield.showShield(EAClickShieldView.Shield.LOADING),
                null === (r = this.tacticsViewModel) || void 0 === r || r.saveModifiedMentalities().observe(this, function(e, t) {
                    e.unobserve(s),
                    t.success && (gClickShield.hideShield(EAClickShieldView.Shield.LOADING),
                    services.Notification.queue([a.localize("notification.applyPreset.applied"), UINotificationType.POSITIVE]))
                })),
                this.closePopup()
            }
        } else
            t === UTTacticsPresetPopupView.Events.BACK && (this.currentStep -= 1,
            this.renderBasedOnStep(this.currentStep))
    }
    ,
    UTTacticsPresetPopupViewController.prototype.renderBasedOnStep = function(e) {
        var t = this.popupViewModel.getPreset();
        if (t) {
            var i = services.Localization
              , o = this.getView()
              , n = repositories.Squad.getFormationById(t.formation.id);
            1 === e && n ? (o.setStepText(this.currentStep),
            o.toggleBackBtn(!1),
            o.setDescription(i.localize("popup.applyPreset.description1")),
            o.setActionButtonText(i.localize("popup.applyPreset.apply")),
            o.renderPresetInfo(t, n.name),
            o.setApplyButtonInteractionState(!0)) : 2 === e && (o.setStepText(this.currentStep),
            o.setDescription(i.localize("popup.applyPreset.description2")),
            o.setActionButtonText(i.localize("popup.applyPreset.saveChanges")),
            o.toggleBackBtn(!0),
            o.setApplyButtonInteractionState(!1),
            this.tacticsViewModel && o.renderTacticSlots(this.tacticsViewModel.getMentalities(), t))
        }
    }
    ,
    UTTacticsPresetPopupViewController.prototype.applyPresetToMentality = function(i, e) {
        var t = repositories.Squad.getFormationById(e.formation.id);
        t ? (i.setFormation(t),
        i.setDefensiveStyle(e.defensiveStyleId),
        i.setBuildUpPlayStyle(e.offensiveStyleId),
        i.setDefensiveLineHeight(UTSquadTacticsEntity.getLineHeightFromDefensiveStyle(e.defensiveStyleId)),
        e.formation.roles.forEach(function(e, t) {
            i.setInstructionsBySlotIndex(t, e)
        })) : DebugUtils.Assert(null !== t, "Expected a valid squad formation to be found.")
    }
    ,
    UTTacticsPresetPopupViewController.prototype._onCreateNewSlot = function(e, t, r) {
        var s = this;
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model when creating a new tactic slot");
        var a = services.Localization
          , l = this.popupViewModel.getPreset()
          , i = new UTRenamePopupViewController({
            defaultName: "",
            title: a.localize("popup.applyPreset.renameTitle")
        });
        i.init(),
        i.modalDisplayDimensions.width = "24em",
        i.onConfirm.observe(this, function(e, t) {
            var i;
            if (s.tacticsViewModel && l) {
                e.unobserve(s),
                s.tacticsViewModel.setSelectedMentalityById(r.slotId);
                var o = s.tacticsViewModel.getSelectedMentality()
                  , n = s.tacticsViewModel.getActiveMentality();
                o && (s.applyPresetToMentality(o, l),
                o.setCustomName(t),
                n || o.setState(TacticState.ACTIVE),
                gClickShield.showShield(EAClickShieldView.Shield.LOADING),
                null === (i = s.tacticsViewModel) || void 0 === i || i.saveModifiedMentalities().observe(s, function(e, t) {
                    e.unobserve(s),
                    t.success ? (gClickShield.hideShield(EAClickShieldView.Shield.LOADING),
                    JSUtils.isObject(t.response) && JSUtils.isValid(t.response.tactics) && services.Notification.queue([a.localize("notification.tactics.profanity"), UINotificationType.NEUTRAL]),
                    services.Notification.queue([a.localize("notification.applyPreset.createAndApplied"), UINotificationType.POSITIVE])) : services.Notification.queue([a.localize("notification.applyPreset.createFailed"), UINotificationType.NEGATIVE]),
                    gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
                }))
            }
        }),
        gPopupClickShield.setActivePopup(i),
        gPopupClickShield.closeActivePopup()
    }
    ,
    UTTacticsPresetPopupViewController.prototype._onSelectSlot = function(e, t, i) {
        var o;
        this.getView().setApplyButtonInteractionState(!0),
        this.popupViewModel.setSelectedSlot(i.slotId),
        null === (o = this.tacticsViewModel) || void 0 === o || o.setSelectedMentalityById(i.slotId)
    }
    ,
    UTTacticsPresetPopupViewController.prototype._onDontShowAgain = function(e, t, i) {
        var o = services.UserSettings.getSessionItem(UserSettingsKey.DONT_SHOW_APPLY_PRESET_POPUP);
        services.UserSettings.setSessionItem(UserSettingsKey.DONT_SHOW_APPLY_PRESET_POPUP, "true" === o ? "false" : "true")
    }
    ,
    UTTacticsPresetPopupViewController
}(BasePopupViewController)
  , UTTacticsPopupViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsPopupViewModel() {
        var e = t.call(this) || this;
        return e.managerPreset = null,
        e.selectedSlot = TacticsProfileSlot.SLOT_INVALID,
        e
    }
    return __extends(UTTacticsPopupViewModel, t),
    UTTacticsPopupViewModel.prototype.setSelectedSlot = function(e) {
        this.selectedSlot = e
    }
    ,
    UTTacticsPopupViewModel.prototype.getSelectedSlot = function() {
        return this.selectedSlot
    }
    ,
    UTTacticsPopupViewModel.prototype.setPreset = function(e) {
        this.managerPreset = e
    }
    ,
    UTTacticsPopupViewModel.prototype.getPreset = function() {
        return this.managerPreset
    }
    ,
    UTTacticsPopupViewModel
}(EAObject))
  , UTItemDetailsView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTItemDetailsView() {
        var e = t.call(this) || this;
        return e.items = new EAIterator([]),
        e.enableSwiping = !0,
        e
    }
    return __extends(UTItemDetailsView, t),
    UTItemDetailsView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTItemDetailsView.prototype.dealloc = function() {
        this.resetItems(),
        this.items = null,
        t.prototype.dealloc.call(this)
    }
    ,
    UTItemDetailsView.prototype.resetItems = function() {
        this.items && (this.items.values().forEach(function(e) {
            e.dealloc()
        }),
        this.items.resetCollection([]))
    }
    ,
    UTItemDetailsView.prototype.appendPanel = function(e) {
        this.removeSubviews(),
        this.addSubview(e),
        this.getRootElement().appendChild(e.getRootElement())
    }
    ,
    UTItemDetailsView.prototype.toggleCarouselDisplay = function(e) {
        DOMKit.toggleDisplayStyle(this._tnsCarousel.getRootElement(), e)
    }
    ,
    UTItemDetailsView.prototype.toggleCarouselSwiping = function(e) {
        this.enableSwiping = e,
        DOMKit.toggleDisplayStyle(this.__btnPrev, e),
        DOMKit.toggleDisplayStyle(this.__btnNext, e)
    }
    ,
    UTItemDetailsView.prototype.updatePrevNextState = function() {
        if (this.items) {
            var e = !this.items.startOfList
              , t = !this.items.endOfList;
            this.toggleClass("has-prev", e),
            this.toggleClass("has-next", t),
            this.enableSwiping ? (DOMKit.toggleDisplayStyle(this.__btnPrev, e),
            DOMKit.toggleDisplayStyle(this.__btnNext, t)) : (DOMKit.toggleDisplayStyle(this.__btnPrev, !1),
            DOMKit.toggleDisplayStyle(this.__btnNext, !1))
        }
    }
    ,
    UTItemDetailsView.prototype.render = function(t, i, e, o) {
        var n = this;
        if (void 0 === e && (e = !0),
        this.items) {
            if (0 === this.items.length || this.items.length !== t.length)
                this.populateIterator(t, i, e, o);
            else if (this._tnsCarousel.getCurrentSlide() !== i && i < this._tnsCarousel.getNumOfSlides()) {
                var r = null == o ? void 0 : o.find(function(e) {
                    return e.item == t[i]
                });
                this.updateSlide(i, t[i], e, r),
                this._tnsCarousel.goTo(i)
            } else {
                var s = this.items.values();
                this.items.resetCollection(t.map(function(t) {
                    return n.generateItemView(t, e, null == o ? void 0 : o.find(function(e) {
                        return e.item === t
                    }))
                })),
                this.items.setIndex(i),
                this.items.values().forEach(function(e, t) {
                    n._tnsCarousel.dynamicSlideChange(t, e.getRootElement()),
                    s[t].dealloc()
                })
            }
            this.toggleCarouselDisplay(!0)
        }
    }
    ,
    UTItemDetailsView.prototype.updateSlide = function(e, t, i, o) {
        if (void 0 === i && (i = !0),
        this.items) {
            var n = this.items.get(e)
              , r = this.generateItemView(t, i, o);
            this.items.set(r, e),
            this._tnsCarousel.dynamicSlideChange(e, r.getRootElement()),
            null == n || n.dealloc()
        }
    }
    ,
    UTItemDetailsView.prototype.setSlotChemistry = function(e) {
        var r = this;
        e.forEach(function(e, t) {
            var i, o = null === (i = r.items) || void 0 === i ? void 0 : i.get(t);
            if (o && e.isValid() && e.index < UTSquadEntity.FIELD_PLAYERS) {
                o.renderChemistryBreakdown(e.chemistry, e.nationChemistryPoints, e.leagueChemistryPoints, e.clubChemistryPoints);
                var n = new UTSquadSlotChemistryPointsView;
                n.isItemView(),
                n.render(e.chemistry, 0, e.inPossiblePosition),
                n.setState(UTSquadSlotChemistryPointsView.State.NEUTRAL),
                o.renderChemistryPoints(n)
            }
        })
    }
    ,
    UTItemDetailsView.prototype.initializeIterator = function() {
        var t = this;
        this._tnsCarousel.emptyCarousel(),
        this.items && (this.items.values().forEach(function(e) {
            t._tnsCarousel.appendElem(e.getRootElement())
        }),
        this.setupCarousel(this.items.getIndex()))
    }
    ,
    UTItemDetailsView.prototype.setupCarousel = function(e) {
        if (this.items && 1 < this.items.length) {
            var t = new TNSPropertiesDTO;
            t.container = this._tnsCarousel.getRootElement(),
            t.controls = this.enableSwiping,
            t.mouseDrag = this.enableSwiping,
            t.preventActionWhenRunning = !1,
            t.startIndex = e,
            t.touch = this.enableSwiping,
            this._tnsCarousel.setup(t),
            this._tnsCarousel.afterChange(function(e) {
                this.items.setIndex(e),
                this.updatePrevNextState(),
                this._triggerActions(UTItemDetailsView.Event.INDEX_CHANGE, {
                    index: e
                })
            }
            .bind(this))
        }
        this.updatePrevNextState()
    }
    ,
    UTItemDetailsView.prototype.destroyCarousel = function() {
        DOMKit.toggleDisplayStyle(this._tnsCarousel.getRootElement(), !1),
        this._tnsCarousel.teardown(this.getRootElement())
    }
    ,
    UTItemDetailsView.prototype.populateIterator = function(e, t, i, o) {
        var n = this;
        if (this.items) {
            var r = this.items.values();
            this.items.resetCollection(e.map(function(t) {
                return n.generateItemView(t, i, null == o ? void 0 : o.find(function(e) {
                    return e.item === t
                }))
            })),
            this.items.setIndex(t),
            this._tnsCarousel.isOn() ? (this._tnsCarousel.teardown(this.getRootElement()),
            this.items.values().forEach(function(e) {
                n._tnsCarousel.appendElem(e.getRootElement())
            }),
            r.forEach(function(e) {
                return e.dealloc()
            }),
            this.setupCarousel(t)) : this.initializeIterator()
        }
    }
    ,
    UTItemDetailsView.prototype.generateItemView = function(e, t, i) {
        void 0 === t && (t = !0);
        var o = factories.ItemView.createLargeItem(e);
        return o.init(),
        o.renderRestrictions = t,
        o.render(e, i),
        o
    }
    ,
    UTItemDetailsView.prototype._tapDetected = function(e) {
        this.items && (e.target === this.__btnPrev ? (this.items.previous(),
        this._tnsCarousel.goTo(this.items.getIndex())) : e.target === this.__btnNext && (this.items.next(),
        this._tnsCarousel.goTo(this.items.getIndex())))
    }
    ,
    UTItemDetailsView.Event = Object.freeze({
        INDEX_CHANGE: "UTItemDetailsView.Event.INDEX_CHANGE"
    }),
    UTItemDetailsView
}(EATargetActionView));
UTItemDetailsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("DetailView");
        var t = document.createElement("div");
        t.classList.add("detail-carousel"),
        this.__btnPrev = document.createElement("a"),
        this.__btnPrev.classList.add("alt"),
        this.__btnPrev.classList.add("btn-flat"),
        this.__btnPrev.classList.add("tapLeft"),
        t.appendChild(this.__btnPrev),
        this._tnsCarousel = new TNSContainerView,
        t.appendChild(this._tnsCarousel.getRootElement()),
        this.__btnNext = document.createElement("a"),
        this.__btnNext.classList.add("alt"),
        this.__btnNext.classList.add("btn-flat"),
        this.__btnNext.classList.add("tapRight"),
        t.appendChild(this.__btnNext),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTItemDetailsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__btnPrev = null,
    this._tnsCarousel.destroy(),
    this.__btnNext = null
}
,
UTItemDetailsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTToggleButtonControl = function(t) {
    function UTToggleButtonControl() {
        var e = t.call(this) || this;
        return e.checked = !1,
        e.textOn = "",
        e.textOff = "",
        e
    }
    return __extends(UTToggleButtonControl, t),
    UTToggleButtonControl.prototype.setChecked = function(e) {
        var t = this.checked;
        this.checked = e,
        this.updateText(),
        this.toggleClass("checked", this.checked),
        e !== t && this._triggerActions(EventType.CHANGE)
    }
    ,
    UTToggleButtonControl.prototype.getChecked = function() {
        return this.checked
    }
    ,
    UTToggleButtonControl.prototype.setTextOn = function(e) {
        this.textOn = e,
        this.updateText()
    }
    ,
    UTToggleButtonControl.prototype.setTextOff = function(e) {
        this.textOff = e,
        this.updateText()
    }
    ,
    UTToggleButtonControl.prototype.setAllText = function(e) {
        this.setTextOff(e),
        this.setTextOn(e)
    }
    ,
    UTToggleButtonControl.prototype.updateText = function() {
        this.setText(this.checked ? this.textOn : this.textOff)
    }
    ,
    UTToggleButtonControl.prototype._tapDetected = function(e) {
        this.setChecked(!this.checked),
        t.prototype._tapDetected.call(this, e)
    }
    ,
    UTToggleButtonControl
}(UTButtonControl);
UTToggleButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("button");
        e.classList.add("ut-toggle-button-control"),
        this.__root = e,
        this._generated = !0
    }
}
,
UTToggleButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTToggleButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTAuctionActionPanelView = function(t) {
    function UTAuctionActionPanelView() {
        var e = t.call(this) || this;
        return e.isOutbid = !1,
        e._enablePriceComparison = !0,
        e
    }
    return __extends(UTAuctionActionPanelView, t),
    UTAuctionActionPanelView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this._bidNumericStepper.init(),
        this._watchButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._watchButton.setTextOn(e.localize("button.unwatch")),
        this._watchButton.setTextOff(e.localize("button.watch")),
        this._watchButton.init(),
        this._bidButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._bidButton.setText(e.localize("infopanel.button.placebid")),
        this._bidButton.init(),
        this._buyNowButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._buyNowButton.setText(e.localize("infopanel.label.buynow")),
        this._buyNowButton.init(),
        this._findRelatedButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._findRelatedButton.setText(e.localize("infopanel.label.findallitems")),
        this._findRelatedButton.init(),
        this._playerBioButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._playerBioButton.setText(e.localize("extendedPlayerInfo.general.playerBio")),
        this._playerBioButton.init(),
        this.__timeRemainingTitle.textContent = e.localize("auctioninfo.timeremaining")
    }
    ,
    UTAuctionActionPanelView.prototype.enablePriceComparison = function(e) {
        this._enablePriceComparison = !!e
    }
    ,
    UTAuctionActionPanelView.prototype.togglePlayerBio = function(e) {
        this._playerBioButton.setDisplay(e)
    }
    ,
    UTAuctionActionPanelView.prototype.toggleBuyNow = function(e) {
        0 < e ? (this._buyNowButton.setText(services.Localization.localize("infopanel.label.buynowfor", [services.Localization.localizeNumber(e)])),
        this._buyNowButton.setDisplay(!0),
        this._buyNowButton.addClass("currency-coins")) : (this._buyNowButton.setDisplay(!1),
        this._buyNowButton.removeClass("currency-coins"))
    }
    ,
    UTAuctionActionPanelView.prototype.toggleWatchedState = function(e) {
        this._watchButton.setChecked(e)
    }
    ,
    UTAuctionActionPanelView.prototype.setBidLimits = function(e, t) {
        this._bidNumericStepper.setLimits(e, t)
    }
    ,
    UTAuctionActionPanelView.prototype.getMinBidFromAuction = function(e) {
        var t = UTCurrencyInputControl.getIncrementAboveVal(e.currentBid);
        return 0 < e.currentBid ? t : e.startingBid
    }
    ,
    UTAuctionActionPanelView.prototype.getMaxBidFromAuction = function(e) {
        var t = UTCurrencyInputControl.getIncrementBelowVal(e.buyNowPrice)
          , i = 0 < e.buyNowPrice ? t : AUCTION_MAX_BID;
        return Math.max(i, this.getMinBidFromAuction(e))
    }
    ,
    UTAuctionActionPanelView.prototype.render = function(e, t) {
        var i = e.getAuctionData()
          , o = 0 < i.currentBid ? UTCurrencyInputControl.getIncrementAboveVal(i.currentBid) : i.startingBid
          , n = i.canBid(o, t)
          , r = services.Localization.localize(e.isPlayer() ? "extendedPlayerInfo.general.playerBio" : "IWL_extendedPlayerInfo.general.managerBio", [], {
            gender: e.gender
        });
        this._findRelatedButton.setDisplay(this._enablePriceComparison),
        this.togglePlayerBio(e.isPlayer() || e.isManager()),
        this.toggleBuyNow(i.buyNowPrice),
        this.toggleWatchedState(i.watched),
        this.setBidLimits(this.getMinBidFromAuction(i), this.getMaxBidFromAuction(i)),
        this.setCurrentBidText(i),
        this._playerBioButton.setText(r),
        this._watchButton.setInteractionState(i.canWatch() || i.watched),
        this._buyNowButton.setInteractionState(i.canBuy(t)),
        this._bidButton.setInteractionState(n),
        this._bidNumericStepper.setInteractionState(n),
        this.onTimedUpdate(i)
    }
    ,
    UTAuctionActionPanelView.prototype.setCurrentBidText = function(e) {
        var t = services.Localization
          , i = e.currentBid
          , o = e.startingBid
          , n = o <= i ? i : o
          , r = "";
        r = e.isClosedTrade() ? "auctioninfo.finalprice" : o <= i ? e.isActiveTrade() ? "auctioninfo.currentbid" : "auctioninfo.finalprice" : "auctioninfo.startprice",
        this.__currentBidTitle.textContent = t.localize(r),
        this.__detailCurrentBidVal.textContent = t.localizeNumber(n)
    }
    ,
    UTAuctionActionPanelView.prototype.onTimedUpdate = function(e, t) {
        var i;
        void 0 === t && (t = e.getSecondsRemaining());
        var o = services.Localization;
        !this.isOutbid && e.isOutbid() && this.performOutbidAnimation(),
        this.isOutbid = e.isOutbid();
        var n = "";
        if (t <= 0 ? (n = o.localize(e.isPendingExpiry() ? "auctioninfo.timeremaining.pending" : "watchlist.dock.categories.expired.condensed"),
        this._watchButton.setInteractionState(e.watched),
        this._buyNowButton.setInteractionState(!1),
        this._bidButton.setInteractionState(!1),
        this._bidNumericStepper.setInteractionState(!1)) : n = t > AUCTION_COUNTDOWN_THRESHOLD ? o.localizeAuctionTimeRemaining(t) : o.localizeTimeRemaining(t),
        this.__timeRemainingVal.textContent = n,
        0 < t && t < AUCTION_COUNTDOWN_FLASING_THRESHOLD ? (DOMKit.addClass(this.__timeRemainingVal, "alarm-txt"),
        t <= AUCTION_COUNTDOWN_ALERT_THRESHOLD && DOMKit.addClass(this.__timeRemainingVal, "expiring")) : DOMKit.removeClass(this.__timeRemainingVal, "expiring alarm-txt"),
        0 < t) {
            this.setBidLimits(this.getMinBidFromAuction(e), this.getMaxBidFromAuction(e)),
            this.setCurrentBidText(e);
            var r = null === (i = services.User.getUser()) || void 0 === i ? void 0 : i.getCurrency(GameCurrency.COINS).amount
              , s = 0 < e.currentBid ? UTCurrencyInputControl.getIncrementAboveVal(e.currentBid) : e.startingBid
              , a = e.canBid(s, r);
            this._bidNumericStepper.setInteractionState(a)
        }
    }
    ,
    UTAuctionActionPanelView.prototype.setBidBusyState = function(e) {
        this._bidButton.setInteractionState(!e)
    }
    ,
    UTAuctionActionPanelView.prototype.setBuyBusyState = function(e) {
        this._buyNowButton.setInteractionState(!e)
    }
    ,
    UTAuctionActionPanelView.prototype.setBidBuyBusyState = function(e) {
        this.setBidBusyState(e),
        this.setBuyBusyState(e)
    }
    ,
    UTAuctionActionPanelView.prototype.setWatchBusyState = function(e) {
        this._watchButton.setInteractionState(!e)
    }
    ,
    UTAuctionActionPanelView.prototype._performBidAnimation = function(e) {
        function Pvb() {
            t.__currentBid && t.__currentBid.classList.remove(e)
        }
        var t = this;
        requestAnimationFrame(function() {
            t.__currentBid && t.__currentBid.classList.add(e),
            setTimeout(Pvb, 3e3)
        })
    }
    ,
    UTAuctionActionPanelView.prototype.performOutbidAnimation = function() {
        this._performBidAnimation("currencyIncreaseRed")
    }
    ,
    UTAuctionActionPanelView.prototype.performBidIncreaseAnimation = function() {
        this._performBidAnimation("currencyIncrease")
    }
    ,
    UTAuctionActionPanelView.prototype._eButtonSelected = function(e, t, i) {
        var o, n = enums.UIItemActionEvent.BIO;
        e === this._playerBioButton ? n = enums.UIItemActionEvent.BIO : e === this._watchButton ? (this.setWatchBusyState(!0),
        n = enums.UIItemActionEvent.WATCH) : e === this._bidButton ? (this.setBidBuyBusyState(!0),
        n = enums.UIItemActionEvent.BID,
        o = {
            value: this._bidNumericStepper.getValue()
        }) : e === this._buyNowButton ? (this.setBidBuyBusyState(!0),
        n = enums.UIItemActionEvent.BUY) : e === this._findRelatedButton && (n = enums.UIItemActionEvent.COMPARE),
        this._triggerActions(n, o)
    }
    ,
    UTAuctionActionPanelView
}(EATargetActionView);
UTAuctionActionPanelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("DetailPanel");
        var t = document.createElement("div");
        t.classList.add("ut-item-details--metadata"),
        this.__viewAuction = document.createElement("div"),
        this.__viewAuction.classList.add("auctionInfo");
        var i = document.createElement("div");
        i.classList.add("column"),
        this.__timeRemainingTitle = document.createElement("span"),
        this.__timeRemainingTitle.classList.add("subHeading"),
        i.appendChild(this.__timeRemainingTitle),
        this.__timeRemainingVal = document.createElement("span"),
        this.__timeRemainingVal.classList.add("subContent"),
        i.appendChild(this.__timeRemainingVal),
        this.__viewAuction.appendChild(i),
        this.__currentBid = document.createElement("div"),
        this.__currentBid.classList.add("currentBid"),
        this.__currentBid.classList.add("column"),
        this.__currentBidTitle = document.createElement("span"),
        this.__currentBidTitle.classList.add("subHeading"),
        this.__currentBid.appendChild(this.__currentBidTitle),
        this.__detailCurrentBidVal = document.createElement("span"),
        this.__detailCurrentBidVal.classList.add("currency-coins"),
        this.__detailCurrentBidVal.classList.add("subContent"),
        this.__currentBid.appendChild(this.__detailCurrentBidVal);
        var o = document.createElement("span");
        o.classList.add("currencyArrow"),
        this.__currentBid.appendChild(o),
        this.__viewAuction.appendChild(this.__currentBid);
        var n = document.createElement("div");
        n.classList.add("column"),
        this._watchButton = new UTToggleButtonControl,
        this._watchButton.getRootElement().classList.add("watch"),
        n.appendChild(this._watchButton.getRootElement()),
        this.__viewAuction.appendChild(n),
        t.appendChild(this.__viewAuction),
        e.appendChild(t);
        var r = document.createElement("div");
        r.classList.add("bidOptions"),
        this._bidNumericStepper = new UTNumericInputSpinnerControl,
        r.appendChild(this._bidNumericStepper.getRootElement()),
        this._bidButton = new UTStandardButtonControl,
        this._bidButton.getRootElement().classList.add("call-to-action"),
        this._bidButton.getRootElement().classList.add("bidButton"),
        r.appendChild(this._bidButton.getRootElement()),
        this._buyNowButton = new UTStandardButtonControl,
        this._buyNowButton.getRootElement().classList.add("buyButton"),
        r.appendChild(this._buyNowButton.getRootElement()),
        e.appendChild(r);
        var s = document.createElement("div");
        s.classList.add("ut-button-group"),
        this._playerBioButton = new UTGroupButtonControl,
        this._playerBioButton.getRootElement().classList.add("more"),
        s.appendChild(this._playerBioButton.getRootElement()),
        this._findRelatedButton = new UTGroupButtonControl,
        s.appendChild(this._findRelatedButton.getRootElement()),
        e.appendChild(s),
        this.__root = e,
        this._generated = !0
    }
}
,
UTAuctionActionPanelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__viewAuction = null,
    this.__timeRemainingTitle = null,
    this.__timeRemainingVal = null,
    this.__currentBid = null,
    this.__currentBidTitle = null,
    this.__detailCurrentBidVal = null,
    this._watchButton.destroy(),
    this._bidNumericStepper.destroy(),
    this._bidButton.destroy(),
    this._buyNowButton.destroy(),
    this._playerBioButton.destroy(),
    this._findRelatedButton.destroy()
}
,
UTAuctionActionPanelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTDefaultActionPanelView = function(t) {
    function UTDefaultActionPanelView() {
        var e = t.call(this) || this;
        return e.quickListView = null,
        e
    }
    return __extends(UTDefaultActionPanelView, t),
    UTDefaultActionPanelView.prototype.init = function() {
        t.prototype.init.call(this),
        this._bioButton.init(),
        this._managerPresetButton.init(),
        this._redeemButton.init(),
        this._applyConsumableButton.init(),
        this._makeItemActiveButton.init(),
        this._deactivateItemButton.init(),
        this._sendClubButton.init(),
        this._sendToSquadButton.init(),
        this._sendTransferButton.init(),
        this._sendToStorageButton.init(),
        this._comparePriceButton.init(),
        this._discardButton.init(),
        this._bioButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._managerPresetButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._redeemButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._applyConsumableButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._makeItemActiveButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._deactivateItemButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._sendClubButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._sendToSquadButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._sendToStorageButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._comparePriceButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._sendTransferButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._discardButton.addTarget(this, this._eButtonSelected, EventType.TAP);
        var e = services.Localization;
        this._bioButton.setText(e.localize("extendedPlayerInfo.general.playerBio")),
        this._managerPresetButton.setText(e.localize("infopanel.label.applyPreset")),
        this._applyConsumableButton.setText(e.localize("panel.applyitem.button")),
        this._makeItemActiveButton.setText(e.localize("navbar.label.makeactive.item")),
        this._deactivateItemButton.setText(e.localize("panel.button.emptyStadiumSlot")),
        this._sendClubButton.setText(e.localize("infopanel.label.storeInClub")),
        this._sendToSquadButton.setText(e.localize("infopanel.button.sendtosquad")),
        this._sendTransferButton.setText(e.localize("infopanel.label.sendTradePile")),
        this._sendToStorageButton.setText(e.localize("infopanel.label.sendToStorage")),
        this._comparePriceButton.setText(e.localize("infopanel.label.findallitems")),
        this._discardButton.setText(e.localize("infopanel.label.quickSell")),
        this._discardButton.displayCurrencyIcon(!0)
    }
    ,
    UTDefaultActionPanelView.prototype.dealloc = function() {
        this.quickListView && this.removeQuickList(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTDefaultActionPanelView.prototype.render = function(e, t, i, o, n, r, s, a) {
        var l;
        void 0 === r && (r = !1),
        void 0 === s && (s = !1),
        void 0 === a && (a = !1);
        var c = services.Localization;
        if (e.isMiscItem()) {
            DOMKit.toggleDisplayStyle(this.__activeSquadIndicator, !1),
            DOMKit.removeClass(this.__valueInfo, "currency-coins xp-reward");
            var u = "";
            return e.isFreeCoins() ? (DOMKit.toggleDisplayStyle(this.__auctionInfo, !0),
            u = "infopanel.label.collectcoins",
            this.__textInfo.textContent = c.localize("card.desc.FreeCreditsDesc"),
            this.__valueInfo.textContent = c.localizeNumber(e.getStaticData().amount),
            DOMKit.addClass(this.__valueInfo, "currency-coins")) : e.isFreeXp() ? (DOMKit.toggleDisplayStyle(this.__auctionInfo, !0),
            u = "infopanel.label.collectxp",
            this.__textInfo.textContent = c.localize("card.desc.FreeXpDesc"),
            this.__valueInfo.textContent = c.localizeNumber(e.getStaticData().amount),
            DOMKit.addClass(this.__valueInfo, "xp-reward")) : e.isFreePack() ? (DOMKit.toggleDisplayStyle(this.__auctionInfo, !1),
            u = "infopanel.label.claimpack") : e.isDraftToken() ? (DOMKit.toggleDisplayStyle(this.__auctionInfo, !1),
            u = "infopanel.label.claimdrafttoken") : e.isAcademyUnlockToken() ? (DOMKit.toggleDisplayStyle(this.__auctionInfo, !1),
            u = "infopanel.label.claimacademytoken") : e.isPlayerPickItem() && (DOMKit.toggleDisplayStyle(this.__auctionInfo, !0),
            DOMKit.toggleDisplayStyle(this.__valueInfo, !1),
            u = "infopanel.label.claimdraftitem",
            this.__textInfo.textContent = e.getStaticData().description),
            this._redeemButton.setText(c.localize(u)),
            this._redeemButton.setDisplay(!0),
            this._managerPresetButton.setDisplay(!1),
            this._applyConsumableButton.setDisplay(!1),
            this._makeItemActiveButton.setDisplay(!1),
            this._deactivateItemButton.setDisplay(!1),
            this._sendClubButton.setDisplay(!1),
            this._sendToSquadButton.setDisplay(!1),
            this._sendTransferButton.setDisplay(!1),
            this._discardButton.setDisplay(!1),
            this._bioButton.setDisplay(!1),
            this._comparePriceButton.setDisplay(!1),
            void this._sendToStorageButton.setDisplay(!1)
        }
        var d = e.isDuplicate()
          , h = e.isClubItem()
          , p = e.concept;
        h && !d && (this._makeItemActiveButton.setInteractionState(!r),
        this._makeItemActiveButton.setText(r ? c.localize("navbar.label.itemalreadyactive") : c.localize("navbar.label.makeactive.item")));
        var _ = e.pile !== ItemPile.TRANSFER && !r && e.isValid();
        if (this._sendTransferButton.setDisplay(_),
        _ && (e.untradeable || e.isLimitedUse()) ? (this._sendTransferButton.setText(c.localize("infopanel.label.untradeable")),
        this._sendTransferButton.setInteractionState(!1)) : _ && i && (this._sendTransferButton.setText(c.localize("popup.error.tradetoken.SellItemTradePileFullTitle")),
        this._sendTransferButton.setInteractionState(!1)),
        o ? (this._sendToStorageButton.setInteractionState(!1),
        this._sendToStorageButton.setText(c.localize("infopanel.label.storagefull"))) : (this._sendToStorageButton.setInteractionState(!0),
        this._sendToStorageButton.setText(c.localize("infopanel.label.sendToStorage"))),
        this._sendClubButton.setText(c.localize(d ? "infopanel.button.swap" : "infopanel.label.storeInClub")),
        this._discardButton.setSubtext(c.localizeNumber(e.discardValue)),
        e.isLimitedUse() && this._comparePriceButton.setText(c.localize("infopanel.button.searchmarket")),
        this._redeemButton.setDisplay(!1),
        this._makeItemActiveButton.setDisplay(h && !d && s),
        this._deactivateItemButton.setDisplay(r && a),
        this._sendClubButton.setDisplay(!p && e.pile !== ItemPile.CLUB),
        this._bioButton.setDisplay(e.isPlayer() || e.isManager()),
        e.isManager() || this._managerPresetButton.setDisplay(!1),
        e.isPlayer() || e.isManager()) {
            var f = e.isPlayer() ? "extendedPlayerInfo.general.playerBio" : "extendedPlayerInfo.general.managerBio";
            this._bioButton.setText(c.localize(f, [], {
                gender: e.gender
            }))
        }
        this._discardButton.setDisplay(!r && e.isDiscardable());
        var m = services.User.getUser()
          , T = !!m && m.hasTradeAccess()
          , v = !getAppMain().getConfigRepository().getConfigBoolean(EAConfigurationRepository.KEY_HIDE_TRANSFER_MARKET) && T && services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED)
          , y = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.PLATFORM_SPLIT_FOR_TRANSFER_MARKET)
          , g = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORAGE_PILE_ENABLED);
        this._comparePriceButton.setDisplay(e.isValid() && v && !y),
        g && e.isStorable() || this._sendToStorageButton.setDisplay(!1),
        g && e.isStorable() && (this._sendTransferButton.setInteractionState(!1),
        this._sendTransferButton.setDisplay(!1));
        var w = e.getAuctionData()
          , C = e.lastSalePrice
          , S = w.startingBid
          , E = w.currentBid
          , b = e.isConsumable() && !(null == t ? void 0 : t.isDream()) && e.isValid();
        this._applyConsumableButton.setDisplay(b || e.pile === ItemPile.CLUB && (e.isPlayer() || e.isManager())),
        n ? this._sendToSquadButton.setText(c.localize("infopanel.button.sendtosquad")) : (null == t ? void 0 : t.isSBC()) ? this._sendToSquadButton.setText(c.localize("infopanel.button.sendtosbc")) : this._sendToSquadButton.setText(c.localize("infopanel.button.sendtocurrentsquad")),
        this._sendToSquadButton.setDisplay(!(null == t ? void 0 : t.isSBC()) && !d && !p && (e.isPlayer() || e.isManager()) && !(null == t ? void 0 : t.containsItem(e, !0)));
        var V = !0;
        w && 0 < E && e.isValid() ? (this.__textInfo.textContent = c.localize("infopanel.label.congratulations"),
        this.__valueInfo.textContent = c.localizeNumber(E)) : w.isExpired() ? (this.__textInfo.textContent = c.localize("infopanel.label.lastListedPrice"),
        this.__valueInfo.textContent = c.localizeNumber(S)) : 0 < C && e.isValid() ? (this.__textInfo.textContent = c.localize("infopanel.label.prevBoughtPrice"),
        this.__valueInfo.textContent = c.localizeNumber(C)) : V = !1,
        DOMKit.toggleDisplayStyle(this.__auctionInfo, V);
        var U = c.localize(e.isManager() ? "infopanel.label.managerInActiveSquad" : "infopanel.label.inActiveSquad", [], {
            gender: e.gender
        })
          , I = null !== (l = (null == t ? void 0 : t.containsItem(e, !0)) && (null == t ? void 0 : t.isActive())) && void 0 !== l && l;
        this.__activeSquadText.textContent = U,
        DOMKit.toggleDisplayStyle(this.__activeSquadIndicator, I),
        DOMKit.toggleDisplayStyle(this.__metadata, I || V)
    }
    ,
    UTDefaultActionPanelView.prototype.appendQuickList = function(e) {
        this.quickListView = e,
        DOMKit.insertBefore(e.getRootElement(), this.__itemActions)
    }
    ,
    UTDefaultActionPanelView.prototype.removeQuickList = function() {
        this.quickListView && (DOMKit.remove(this.quickListView.getRootElement()),
        this.quickListView = null)
    }
    ,
    UTDefaultActionPanelView.prototype._eButtonSelected = function(e, t, i) {
        var o = enums.UIItemActionEvent.BIO;
        e === this._bioButton ? o = enums.UIItemActionEvent.BIO : e === this._redeemButton ? o = enums.UIItemActionEvent.REDEEM : e === this._applyConsumableButton ? o = enums.UIItemActionEvent.APPLY_CONSUMABLE : e === this._makeItemActiveButton ? o = enums.UIItemActionEvent.ACTIVATE : e === this._deactivateItemButton ? o = enums.UIItemActionEvent.DEACTIVATE : e === this._sendClubButton ? o = enums.UIItemActionEvent.SEND_TO_CLUB : e === this._sendToSquadButton ? o = enums.UIItemActionEvent.SEND_TO_SQUAD : e === this._sendTransferButton ? o = enums.UIItemActionEvent.SEND_TO_TRANSFERS : e === this._sendToStorageButton ? o = enums.UIItemActionEvent.SEND_TO_STORAGE : e === this._comparePriceButton ? o = enums.UIItemActionEvent.COMPARE : e === this._discardButton ? o = enums.UIItemActionEvent.DISCARD : e === this._managerPresetButton && (o = enums.UIItemActionEvent.APPLY_MANAGER_PRESET),
        this._triggerActions(o)
    }
    ,
    UTDefaultActionPanelView
}(EATargetActionView);
UTDefaultActionPanelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("DetailPanel"),
        this.__metadata = document.createElement("div"),
        this.__metadata.classList.add("ut-item-details--metadata"),
        this.__activeSquadIndicator = document.createElement("div"),
        this.__activeSquadIndicator.classList.add("ut-item-details--squad-indicator");
        var t = document.createElement("span");
        t.classList.add("fut_icon"),
        t.classList.add("icon_squad"),
        this.__activeSquadIndicator.appendChild(t),
        this.__activeSquadText = document.createElement("span"),
        this.__activeSquadIndicator.appendChild(this.__activeSquadText),
        this.__metadata.appendChild(this.__activeSquadIndicator),
        this.__auctionInfo = document.createElement("div"),
        this.__auctionInfo.classList.add("auctionInfo");
        var i = document.createElement("div");
        i.classList.add("column"),
        this.__textInfo = document.createElement("span"),
        this.__textInfo.classList.add("subHeading"),
        i.appendChild(this.__textInfo),
        this.__valueInfo = document.createElement("span"),
        this.__valueInfo.classList.add("subContent"),
        i.appendChild(this.__valueInfo),
        this.__auctionInfo.appendChild(i),
        this.__metadata.appendChild(this.__auctionInfo),
        e.appendChild(this.__metadata),
        this.__itemActions = document.createElement("div"),
        this.__itemActions.classList.add("ut-button-group"),
        this._bioButton = new UTGroupButtonControl,
        this._bioButton.getRootElement().classList.add("more"),
        this.__itemActions.appendChild(this._bioButton.getRootElement()),
        this._managerPresetButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._managerPresetButton.getRootElement()),
        this._redeemButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._redeemButton.getRootElement()),
        this._applyConsumableButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._applyConsumableButton.getRootElement()),
        this._makeItemActiveButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._makeItemActiveButton.getRootElement()),
        this._deactivateItemButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._deactivateItemButton.getRootElement()),
        this._sendClubButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._sendClubButton.getRootElement()),
        this._sendToSquadButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._sendToSquadButton.getRootElement()),
        this._sendTransferButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._sendTransferButton.getRootElement()),
        this._sendToStorageButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._sendToStorageButton.getRootElement()),
        this._comparePriceButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._comparePriceButton.getRootElement()),
        this._discardButton = new UTGroupButtonControl,
        this.__itemActions.appendChild(this._discardButton.getRootElement()),
        e.appendChild(this.__itemActions),
        this.__root = e,
        this._generated = !0
    }
}
,
UTDefaultActionPanelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__metadata = null,
    this.__activeSquadIndicator = null,
    this.__activeSquadText = null,
    this.__auctionInfo = null,
    this.__textInfo = null,
    this.__valueInfo = null,
    this.__itemActions = null,
    this._bioButton.destroy(),
    this._managerPresetButton.destroy(),
    this._redeemButton.destroy(),
    this._applyConsumableButton.destroy(),
    this._makeItemActiveButton.destroy(),
    this._deactivateItemButton.destroy(),
    this._sendClubButton.destroy(),
    this._sendToSquadButton.destroy(),
    this._sendTransferButton.destroy(),
    this._sendToStorageButton.destroy(),
    this._comparePriceButton.destroy(),
    this._discardButton.destroy()
}
,
UTDefaultActionPanelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTDiscardedItemActionPanelView = function(t) {
    function UTDiscardedItemActionPanelView() {
        return t.call(this) || this
    }
    return __extends(UTDiscardedItemActionPanelView, t),
    UTDiscardedItemActionPanelView.prototype.init = function() {
        var e = services.Localization;
        t.prototype.init.call(this),
        this._recoverButton.init(),
        this._playerBioButton.init(),
        this._recoverButton.setText(e.localize("undoDiscard.button.recover")),
        this._playerBioButton.setText(e.localize("extendedPlayerInfo.general.playerBio")),
        this._recoverButton.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._playerBioButton.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._recoverButton.displayCurrencyIcon(!0),
        this.setInteractionState(!0)
    }
    ,
    UTDiscardedItemActionPanelView.prototype.setInteractionState = function(e) {
        t.prototype.setInteractionState.call(this, e),
        this._recoverButton.setInteractionState(e),
        this._playerBioButton.setInteractionState(e)
    }
    ,
    UTDiscardedItemActionPanelView.prototype.setRecoverButtonInteractionState = function(e) {
        this._recoverButton.setInteractionState(e)
    }
    ,
    UTDiscardedItemActionPanelView.prototype.render = function(e) {
        var t = services.Localization.localize("extendedPlayerInfo.general.playerBio", [], {
            gender: e.gender
        });
        DebugUtils.Assert(e.isRecoverable(), "Expected a discarded player"),
        this._playerBioButton.setText(t),
        this._recoverButton.setSubtext(services.Localization.localizeNumber(e.discardValue))
    }
    ,
    UTDiscardedItemActionPanelView.prototype.onButtonSelected = function(e, t, i) {
        e === this._playerBioButton ? this._triggerActions(enums.UIItemActionEvent.BIO) : e === this._recoverButton && this._triggerActions(enums.UIItemActionEvent.RECOVER)
    }
    ,
    UTDiscardedItemActionPanelView
}(EATargetActionView);
UTDiscardedItemActionPanelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("DetailPanel"),
        this.__itemActions = document.createElement("div");
        var t = document.createElement("div");
        t.classList.add("ut-button-group"),
        this._recoverButton = new UTGroupButtonControl,
        t.appendChild(this._recoverButton.getRootElement()),
        this._playerBioButton = new UTGroupButtonControl,
        this._playerBioButton.getRootElement().classList.add("more"),
        t.appendChild(this._playerBioButton.getRootElement()),
        this.__itemActions.appendChild(t),
        e.appendChild(this.__itemActions),
        this.__root = e,
        this._generated = !0
    }
}
,
UTDiscardedItemActionPanelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__itemActions = null,
    this._recoverButton.destroy(),
    this._playerBioButton.destroy()
}
,
UTDiscardedItemActionPanelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTDuplicateLoanActionPanelView = function(t) {
    function UTDuplicateLoanActionPanelView() {
        return t.call(this) || this
    }
    return __extends(UTDuplicateLoanActionPanelView, t),
    UTDuplicateLoanActionPanelView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this._actionButton.init(),
        this._actionButton.setText(e.localize("common.dialog.ok").toUpperCase()),
        this._actionButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._discardButton.init(),
        this._discardButton.setText(e.localize("infopanel.label.quickSell")),
        this._discardButton.displayCurrencyIcon(!0),
        this._discardButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._playerBioButton.init(),
        this._playerBioButton.setText(e.localize("extendedPlayerInfo.general.playerBio")),
        this._playerBioButton.addTarget(this, this._eButtonSelected, EventType.TAP)
    }
    ,
    UTDuplicateLoanActionPanelView.prototype.renderGlobalTimeLimit = function(e) {
        var t = services.Localization;
        DOMKit.toggleDisplayStyle(this.__infoText2, !1),
        DOMKit.toggleDisplayStyle(this.__metaData, !1),
        this.__infoText1.textContent = t.localize("item.loan.global.cannotmerge"),
        this._actionButton.hide(),
        this._discardButton.show()
    }
    ,
    UTDuplicateLoanActionPanelView.prototype.renderUserTimeLimit = function(e) {
        var t = Math.floor(Date.now() / MS_PER_SECOND)
          , i = Math.max(e.duplicateCombinedEndTime - t, 0)
          , o = Math.max(e.duplicateEndTime - t, 0)
          , n = Math.max(e.endTime - t, 0)
          , r = services.Localization;
        DOMKit.toggleDisplayStyle(this.__infoText2, !1),
        DOMKit.toggleDisplayStyle(this.__metaData, !0),
        this.__itemInfo1Label.textContent = r.localize("panel.label.currentTime"),
        this.__itemInfo1Value.textContent = r.localizeAuctionTimeRemaining(o),
        this.__itemInfo2Label.textContent = r.localize("panel.label.addTime"),
        this.__itemInfo2Value.textContent = r.localizeAuctionTimeRemaining(n),
        this.__itemInfo3Label.textContent = r.localize("panel.label.newTime"),
        this.__itemInfo3Value.textContent = r.localizeAuctionTimeRemaining(i),
        this.__infoText1.textContent = r.localize("item.loan.user.merge"),
        this._actionButton.show(),
        this._discardButton.hide()
    }
    ,
    UTDuplicateLoanActionPanelView.prototype.renderMatchLimit = function(e) {
        function Rxb(e) {
            return t.localize("panel.label.game" + (1 < e ? "s" : ""), [e.toString()])
        }
        var t = services.Localization
          , i = e.loans
          , o = e.duplicateItemLoans
          , n = o + i;
        DOMKit.toggleDisplayStyle(this.__infoText2, !0),
        DOMKit.toggleDisplayStyle(this.__metaData, !0),
        this.__itemInfo1Label.textContent = t.localize("panel.label.currentContract"),
        this.__itemInfo1Value.textContent = Rxb(o),
        this.__itemInfo2Label.textContent = t.localize("panel.label.addContract"),
        this.__itemInfo2Value.textContent = Rxb(i),
        this.__itemInfo3Label.textContent = t.localize("panel.label.newContract"),
        this.__itemInfo3Value.textContent = Rxb(n),
        this.__infoText1.textContent = t.localize("panel.text.loanDuplicatePlayer1"),
        this.__infoText2.textContent = t.localize("panel.text.loanDuplicatePlayer2"),
        this._actionButton.show(),
        this._actionButton.setInteractionState(e.isDuplicateLoanPlayer()),
        this._discardButton.hide()
    }
    ,
    UTDuplicateLoanActionPanelView.prototype.render = function(e) {
        DebugUtils.Assert(e.isDuplicateLoanPlayer(), "[UTDuplicateLoanActionPanelView] Eexpected a duplicate loan player.");
        var t = services.Localization;
        this._playerBioButton.setText(t.localize("extendedPlayerInfo.general.playerBio", [], {
            gender: e.gender
        })),
        this._discardButton.setSubtext(t.localizeNumber(e.discardValue)),
        e.isGlobalTimeLimited() ? this.renderGlobalTimeLimit(e) : e.isUserTimeLimited() ? this.renderUserTimeLimit(e) : this.renderMatchLimit(e)
    }
    ,
    UTDuplicateLoanActionPanelView.prototype._eButtonSelected = function(e, t, i) {
        var o = enums.UIItemActionEvent.BIO;
        e === this._playerBioButton ? o = enums.UIItemActionEvent.BIO : e === this._actionButton ? o = enums.UIItemActionEvent.CLEAR_LIST : e === this._discardButton && (o = enums.UIItemActionEvent.DISCARD),
        this._triggerActions(o)
    }
    ,
    UTDuplicateLoanActionPanelView
}(EATargetActionView);
UTDuplicateLoanActionPanelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("DetailPanel"),
        this.__metaData = document.createElement("div"),
        this.__metaData.classList.add("ut-item-details--metadata");
        var t = document.createElement("div");
        t.classList.add("auctionInfo");
        var i = document.createElement("div");
        i.classList.add("column"),
        this.__itemInfo1Label = document.createElement("span"),
        this.__itemInfo1Label.classList.add("subHeading"),
        i.appendChild(this.__itemInfo1Label),
        this.__itemInfo1Value = document.createElement("span"),
        this.__itemInfo1Value.classList.add("subContent"),
        i.appendChild(this.__itemInfo1Value),
        t.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("column"),
        this.__itemInfo2Label = document.createElement("span"),
        this.__itemInfo2Label.classList.add("subHeading"),
        o.appendChild(this.__itemInfo2Label),
        this.__itemInfo2Value = document.createElement("span"),
        this.__itemInfo2Value.classList.add("subContent"),
        o.appendChild(this.__itemInfo2Value),
        t.appendChild(o);
        var n = document.createElement("div");
        n.classList.add("column"),
        this.__itemInfo3Label = document.createElement("span"),
        this.__itemInfo3Label.classList.add("subHeading"),
        n.appendChild(this.__itemInfo3Label),
        this.__itemInfo3Value = document.createElement("span"),
        this.__itemInfo3Value.classList.add("subContent"),
        n.appendChild(this.__itemInfo3Value),
        t.appendChild(n),
        this.__metaData.appendChild(t),
        e.appendChild(this.__metaData),
        this.__itemActions = document.createElement("div"),
        this.__itemActions.classList.add("loanPlayer"),
        this.__infoText1 = document.createElement("p"),
        this.__infoText1.classList.add("infoText"),
        this.__itemActions.appendChild(this.__infoText1),
        this.__infoText2 = document.createElement("p"),
        this.__infoText2.classList.add("infoText"),
        this.__itemActions.appendChild(this.__infoText2),
        this._actionButton = new UTStandardButtonControl,
        this._actionButton.getRootElement().classList.add("call-to-action"),
        this.__itemActions.appendChild(this._actionButton.getRootElement());
        var r = document.createElement("div");
        r.classList.add("ut-button-group"),
        this._playerBioButton = new UTGroupButtonControl,
        this._playerBioButton.getRootElement().classList.add("more"),
        r.appendChild(this._playerBioButton.getRootElement()),
        this._discardButton = new UTGroupButtonControl,
        r.appendChild(this._discardButton.getRootElement()),
        this.__itemActions.appendChild(r),
        e.appendChild(this.__itemActions),
        this.__root = e,
        this._generated = !0
    }
}
,
UTDuplicateLoanActionPanelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__metaData = null,
    this.__itemInfo1Label = null,
    this.__itemInfo1Value = null,
    this.__itemInfo2Label = null,
    this.__itemInfo2Value = null,
    this.__itemInfo3Label = null,
    this.__itemInfo3Value = null,
    this.__itemActions = null,
    this.__infoText1 = null,
    this.__infoText2 = null,
    this._actionButton.destroy(),
    this._playerBioButton.destroy(),
    this._discardButton.destroy()
}
,
UTDuplicateLoanActionPanelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTransferActionPanelView = function(t) {
    function UTTransferActionPanelView() {
        var e = t.call(this) || this;
        return e.timeRemaining = 0,
        e
    }
    return __extends(UTTransferActionPanelView, t),
    UTTransferActionPanelView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this._removeButton.init(),
        this._removeButton.setText(e.localize("infopanel.button.remove")),
        this._removeButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this._playerBioButton.init(),
        this._playerBioButton.setText(e.localize("extendedPlayerInfo.general.playerBio")),
        this._playerBioButton.addTarget(this, this._eButtonSelected, EventType.TAP),
        this.__headerTimeRemaining.textContent = e.localize("auctioninfo.timeremaining"),
        this.__headerCurrentBuyNow.textContent = e.localize("auctioninfo.buynowprice"),
        this.__strTradeStatus.textContent = e.localize("auctioninfo.currentlylisted"),
        this.__headerBoughtFor.textContent = e.localize("auctioninfo.boughtfor")
    }
    ,
    UTTransferActionPanelView.prototype.toggleRemove = function(e) {
        this._removeButton.setDisplay(e)
    }
    ,
    UTTransferActionPanelView.prototype.togglePlayerBio = function(e) {
        this._playerBioButton.setDisplay(e)
    }
    ,
    UTTransferActionPanelView.prototype.setBioButtonText = function(e, t) {
        var i = services.Localization;
        this._playerBioButton.setText(i.localize(e ? "extendedPlayerInfo.general.playerBio" : "IWL_extendedPlayerInfo.general.managerBio", [], {
            gender: t
        }))
    }
    ,
    UTTransferActionPanelView.prototype.setBuyNowText = function(e) {
        this.__txtBuyValue.textContent = services.Localization.localizeNumber(e)
    }
    ,
    UTTransferActionPanelView.prototype.setCurrentBidText = function(e) {
        var t = e.currentBid >= e.startingBid
          , i = services.Localization
          , o = "auctioninfo.startprice";
        e.isSold() ? o = "auctioninfo.finalprice" : t && (o = "auctioninfo.currentbid"),
        this.__headerCurrentBid.textContent = i.localize(o),
        this.__txtBidValue.textContent = i.localizeNumber(t ? e.currentBid : e.startingBid)
    }
    ,
    UTTransferActionPanelView.prototype.setBoughtForText = function(e) {
        this.__txtBoughtForValue.textContent = 0 < e ? services.Localization.localizeNumber(e) : BLANK_STR
    }
    ,
    UTTransferActionPanelView.prototype.render = function(e) {
        var t = e.getAuctionData()
          , i = services.Localization.localize("extendedPlayerInfo.general.playerBio", [], {
            gender: e.gender
        });
        this._playerBioButton.setText(i),
        this.setBioButtonText(e.isPlayer(), e.gender),
        this.toggleRemove(t.isClosedTrade()),
        this.togglePlayerBio(e.isPlayer() || e.isManager()),
        DOMKit.toggleDisplayStyle(this.__strTradeStatus, !t.isClosedTrade()),
        this.setCurrentBidText(t),
        this.setBuyNowText(t.buyNowPrice),
        this.setBoughtForText(e.lastSalePrice),
        this.onTimedUpdate(t)
    }
    ,
    UTTransferActionPanelView.prototype.onTimedUpdate = function(e, t) {
        if (void 0 === t && (t = e.getSecondsRemaining()),
        this.timeRemaining = t,
        this.timeRemaining <= 0) {
            var i = e.isPendingExpiry() ? "auctioninfo.timeremaining.pending" : "watchlist.dock.categories.expired.condensed";
            DOMKit.removeClass(this.__txtTimeRemaining, "alarm-txt"),
            this.__txtTimeRemaining.textContent = services.Localization.localize(i)
        } else
            DOMKit.toggleClass(this.__txtTimeRemaining, "alarm-txt", this.timeRemaining < 15),
            this.__txtTimeRemaining.textContent = services.Localization.localizeTimeRemaining(this.timeRemaining)
    }
    ,
    UTTransferActionPanelView.prototype._eButtonSelected = function(e, t, i) {
        var o = enums.UIItemActionEvent.BIO;
        e === this._playerBioButton ? o = enums.UIItemActionEvent.BIO : e === this._removeButton && (o = enums.UIItemActionEvent.CLEAR_LIST),
        this._triggerActions(o)
    }
    ,
    UTTransferActionPanelView
}(EATargetActionView);
UTTransferActionPanelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("DetailPanel");
        var t = document.createElement("div");
        t.classList.add("ut-item-details--metadata"),
        this.__activeTrade = document.createElement("div"),
        this.__activeTrade.classList.add("transferPanel"),
        this.__activeTrade.classList.add("auctionInfo");
        var i = document.createElement("div");
        i.classList.add("column"),
        this.__headerTimeRemaining = document.createElement("span"),
        this.__headerTimeRemaining.classList.add("subHeading"),
        i.appendChild(this.__headerTimeRemaining),
        this.__txtTimeRemaining = document.createElement("span"),
        this.__txtTimeRemaining.classList.add("subContent"),
        i.appendChild(this.__txtTimeRemaining),
        this.__activeTrade.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("column"),
        this.__headerCurrentBid = document.createElement("span"),
        this.__headerCurrentBid.classList.add("subHeading"),
        o.appendChild(this.__headerCurrentBid),
        this.__txtBidValue = document.createElement("span"),
        this.__txtBidValue.classList.add("currency-coins"),
        this.__txtBidValue.classList.add("subContent"),
        o.appendChild(this.__txtBidValue),
        this.__activeTrade.appendChild(o);
        var n = document.createElement("div");
        n.classList.add("column"),
        this.__headerCurrentBuyNow = document.createElement("span"),
        this.__headerCurrentBuyNow.classList.add("subHeading"),
        n.appendChild(this.__headerCurrentBuyNow),
        this.__txtBuyValue = document.createElement("span"),
        this.__txtBuyValue.classList.add("currency-coins"),
        this.__txtBuyValue.classList.add("subContent"),
        n.appendChild(this.__txtBuyValue),
        this.__activeTrade.appendChild(n);
        var r = document.createElement("div");
        r.classList.add("column"),
        this.__headerBoughtFor = document.createElement("span"),
        this.__headerBoughtFor.classList.add("subHeading"),
        r.appendChild(this.__headerBoughtFor),
        this.__txtBoughtForValue = document.createElement("span"),
        this.__txtBoughtForValue.classList.add("currency-coins"),
        this.__txtBoughtForValue.classList.add("subContent"),
        r.appendChild(this.__txtBoughtForValue),
        this.__activeTrade.appendChild(r),
        t.appendChild(this.__activeTrade),
        e.appendChild(t),
        this.__itemActions = document.createElement("div"),
        this.__itemActions.classList.add("tradeOptions"),
        this.__strTradeStatus = document.createElement("p"),
        this.__strTradeStatus.classList.add("tradeStatus"),
        this.__itemActions.appendChild(this.__strTradeStatus),
        this._removeButton = new UTStandardButtonControl,
        this._removeButton.getRootElement().classList.add("call-to-action"),
        this.__itemActions.appendChild(this._removeButton.getRootElement());
        var s = document.createElement("div");
        s.classList.add("ut-button-group"),
        this._playerBioButton = new UTGroupButtonControl,
        this._playerBioButton.getRootElement().classList.add("more"),
        s.appendChild(this._playerBioButton.getRootElement()),
        this.__itemActions.appendChild(s),
        e.appendChild(this.__itemActions),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTransferActionPanelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__activeTrade = null,
    this.__headerTimeRemaining = null,
    this.__txtTimeRemaining = null,
    this.__headerCurrentBid = null,
    this.__txtBidValue = null,
    this.__headerCurrentBuyNow = null,
    this.__txtBuyValue = null,
    this.__headerBoughtFor = null,
    this.__txtBoughtForValue = null,
    this.__itemActions = null,
    this.__strTradeStatus = null,
    this._removeButton.destroy(),
    this._playerBioButton.destroy()
}
,
UTTransferActionPanelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
var RevenueAnalytics = function() {
    function RevenueAnalytics() {}
    return RevenueAnalytics.Event = Object.freeze({
        STORE_PACK_PURCHASED: "STORE_PACK_PURCHASED",
        ACADEMY_SLOT_UNLOCKED: "ACADEMY_SLOT_UNLOCKED",
        PREMIUM_PASS_PURCHASED: "PREMIUM_PASS_PURCHASED",
        TRANSFER_MARKET_BID_OR_PURCHASE: "TRANSFER_MARKET_BID_OR_PURCHASE"
    }),
    RevenueAnalytics.Key = Object.freeze({
        CURRENCY: "CURRENCY",
        TYPE: "TYPE",
        ID: "ID"
    }),
    RevenueAnalytics.Currency = Object.freeze({
        POINTS: "POINTS",
        COINS: "COINS"
    }),
    RevenueAnalytics
}()
  , UTItemDetailsViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(n) {
    function UTItemDetailsViewController() {
        var e = n.call(this) || this;
        return e.clientCountdownAuctionId = "0",
        e.clientCountdown = -1,
        e.countdownIntervalController = null,
        e.currentSquad = null,
        e.currentAuction = null,
        e.priceComparisonEnabled = !0,
        e.itemActionController = new UTItemActionController,
        e.panel = null,
        e.panelSwiping = !0,
        e.quickListPanel = new UTQuickListPanelViewController,
        e.requestedBid = 0,
        e.stadiumViewModel = null,
        e.squadContext = null,
        e.viewmodel = null,
        e
    }
    return __extends(UTItemDetailsViewController, n),
    UTItemDetailsViewController.prototype.init = function() {
        if (!this.initialized) {
            n.prototype.init.call(this),
            this.itemActionController.init(),
            this.quickListPanel.init(),
            this.getView().addTarget(this, this.eIndexChange, UTItemDetailsView.Event.INDEX_CHANGE);
            var e = getDefaultDispatcher();
            e.addObserver(AppNotification.ITEM_LIST, this, this.nItemListed),
            e.addObserver(AppNotification.ITEM_MOVE, this, this.nItemMoved),
            e.addObserver(AppNotification.ITEM_UNDO_DISCARD, this, this.nItemRecovered)
        }
    }
    ,
    UTItemDetailsViewController.prototype.initWithIterator = function(e) {
        this.initialized || (DebugUtils.Assert(e instanceof EAIterator, "Initialization expected an instance of EAIterator."),
        this.viewmodel = e,
        this.init())
    }
    ,
    UTItemDetailsViewController.prototype.setStadiumViewModel = function(e) {
        this.stadiumViewModel = e
    }
    ,
    UTItemDetailsViewController.prototype.setSquadContext = function(e) {
        this.squadContext = e
    }
    ,
    UTItemDetailsViewController.prototype.dealloc = function() {
        var e = getDefaultDispatcher();
        e.removeObserver(AppNotification.ITEM_LIST, this),
        e.removeObserver(AppNotification.ITEM_MOVE, this),
        this.viewmodel = null,
        this.panel && (this.panel.dealloc(),
        this.panel = null),
        this.itemActionController.dealloc(),
        this.quickListPanel.dealloc(),
        n.prototype.dealloc.call(this)
    }
    ,
    UTItemDetailsViewController.prototype.enableSwiping = function(e) {
        this.panelSwiping = e
    }
    ,
    UTItemDetailsViewController.prototype._getTelemetryId = function() {
        return "Item - Detail View"
    }
    ,
    UTItemDetailsViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.detailView")
    }
    ,
    UTItemDetailsViewController.prototype._getViewInstanceFromData = function() {
        return new UTItemDetailsView
    }
    ,
    UTItemDetailsViewController.prototype.setupPanelViewInstanceFromData = function(e, t) {
        var i;
        this.panel && this.panel.dealloc();
        var o = services.User.getUser()
          , n = e.getAuctionData();
        if (e.isRecoverable())
            this.panel = new UTDiscardedItemActionPanelView,
            this.panel.init(),
            this.panel.render(e),
            this.panel.addTarget(this, this.onRecover, enums.UIItemActionEvent.RECOVER),
            this.panel.addTarget(this, this.onBioTap, enums.UIItemActionEvent.BIO),
            this.panel.setRecoverButtonInteractionState(0 < services.Item.getDiscardRestoresLeft());
        else if (e.isDuplicateLoanPlayer())
            this.panel = new UTDuplicateLoanActionPanelView,
            this.panel.init(),
            this.panel.render(e),
            this.panel.addTarget(this, this.onBioTap, enums.UIItemActionEvent.BIO),
            this.panel.addTarget(this, this.onCombineLoans, enums.UIItemActionEvent.CLEAR_LIST),
            this.panel.addTarget(this, this.onDiscard, enums.UIItemActionEvent.DISCARD);
        else if (n.isSelling() && n.isActiveTrade() || n.isSold())
            this.panel = new UTTransferActionPanelView,
            this.panel.init(),
            this.panel.render(e),
            this.panel.addTarget(this, this.onBioTap, enums.UIItemActionEvent.BIO),
            this.panel.addTarget(this, this.onClearSold, enums.UIItemActionEvent.CLEAR_LIST);
        else if (!n.isValid() || n.isWon() || n.tradeOwner) {
            var r = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED) && !getAppMain().getConfigRepository().getConfigBoolean(EAConfigurationRepository.KEY_HIDE_TRANSFER_MARKET) && (null == o ? void 0 : o.hasTradeAccess())
              , s = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.PLATFORM_SPLIT_FOR_TRANSFER_MARKET)
              , a = repositories.Item.isPileFull(ItemPile.TRANSFER)
              , l = repositories.Item.isPileFull(ItemPile.STORAGE)
              , c = !1
              , u = !1
              , d = !1;
            if (this.stadiumViewModel) {
                var h = this.stadiumViewModel.getCurrentSlot();
                c = e.id === this.stadiumViewModel.getSlotItemId(),
                u = JSUtils.isValid(h),
                d = !!h && h.emptiable
            }
            if (this.panel = new UTDefaultActionPanelView,
            this.panel.init(),
            this.panel.render(e, null != t ? t : null, a, l, !this.squadContext || this.squadContext.isActiveSquad(), c, u, d),
            this.panel.addTarget(this, this.onDiscard, enums.UIItemActionEvent.DISCARD),
            this.panel.addTarget(this, this.onMove, enums.UIItemActionEvent.SEND_TO_CLUB),
            this.panel.addTarget(this, this.onMove, enums.UIItemActionEvent.SEND_TO_STORAGE),
            this.panel.addTarget(this, this.onMove, enums.UIItemActionEvent.SEND_TO_TRANSFERS),
            this.panel.addTarget(this, this.onCompare, enums.UIItemActionEvent.COMPARE),
            this.panel.addTarget(this, this.onRedeem, enums.UIItemActionEvent.REDEEM),
            this.panel.addTarget(this, this.onApply, enums.UIItemActionEvent.APPLY_CONSUMABLE),
            this.panel.addTarget(this, this.onActivate, enums.UIItemActionEvent.ACTIVATE),
            this.panel.addTarget(this, this.onDeactivate, enums.UIItemActionEvent.DEACTIVATE),
            this.panel.addTarget(this, this.onSendToSquad, enums.UIItemActionEvent.SEND_TO_SQUAD),
            this.panel.addTarget(this, this.onBioTap, enums.UIItemActionEvent.BIO),
            this.panel.addTarget(this, this.onApplyPreset, enums.UIItemActionEvent.APPLY_MANAGER_PRESET),
            !s && r && !e.untradeable && !c && !e.isInjured() && !e.isPlayerPickItem() && (!a || e.pile === ItemPile.TRANSFER) && e.isValid()) {
                var p = this.quickListPanel.getView()
                  , _ = void 0;
                _ = n.isExpired() ? "infopanel.label.relistitem" : "infopanel.label.quickList",
                p.setTitle(services.Localization.localize(_)),
                p.close(),
                this.panel.appendQuickList(p)
            }
        } else
            this.panel = new UTAuctionActionPanelView,
            this.panel.init(),
            this.panel.enablePriceComparison(this.priceComparisonEnabled),
            this.panel.render(e, null !== (i = null == o ? void 0 : o.getCurrency(GameCurrency.COINS).amount) && void 0 !== i ? i : 0),
            this.panel.addTarget(this, this.onWatch, enums.UIItemActionEvent.WATCH),
            this.panel.addTarget(this, this.onBid, enums.UIItemActionEvent.BID),
            this.panel.addTarget(this, this.onBuyNow, enums.UIItemActionEvent.BUY),
            this.panel.addTarget(this, this.onFindRelated, enums.UIItemActionEvent.COMPARE),
            this.panel.addTarget(this, this.onBioTap, enums.UIItemActionEvent.BIO)
    }
    ,
    UTItemDetailsViewController.prototype.viewDidAppear = function() {
        var r = this;
        n.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e && e.toggleCarouselSwiping(this.panelSwiping),
        services.Squad.requestSquadByType("active").observe(this, function(e, t) {
            var i, o;
            if (e.unobserve(r),
            t.success && (r.currentSquad = null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.squad) && void 0 !== o ? o : null),
            r.isViewDisplayed() && (r.renderView(),
            r.refreshPanel()),
            r.viewmodel) {
                var n = r.viewmodel.current();
                isPhone() && (null == n ? void 0 : n.isClubConsumable()) && 0 === n.stackCount && r.handleRemove([Number(n.id)]),
                r.viewmodel.conforms(interfaces.AuctionUpdater) && r.viewmodel.startAuctionUpdates()
            }
        })
    }
    ,
    UTItemDetailsViewController.prototype.viewWillDisappear = function() {
        n.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.resetItems(),
        e.destroyCarousel(),
        this.viewmodel && this.viewmodel.conforms(interfaces.AuctionUpdater) && this.viewmodel.stopAuctionUpdates(),
        this.stopClientTimer(),
        this.currentAuction && (this.currentAuction.onDataUpdated.unobserve(this),
        this.currentAuction = null)
    }
    ,
    UTItemDetailsViewController.prototype.didDismiss = function(e) {
        var t, i;
        if (n.prototype.didDismiss.call(this, e),
        e instanceof UTPlayerPicksViewController && e.isPendingSelectionContext() && !(null === (t = services.User.getUser()) || void 0 === t ? void 0 : t.hasPlayerPicksPending)) {
            var o = null === (i = this.viewmodel) || void 0 === i ? void 0 : i.current();
            o && services.Item.redeem(o).observe(this, this.eRedeemComplete)
        }
        e.dealloc()
    }
    ,
    UTItemDetailsViewController.prototype.enablePriceComparison = function(e) {
        this.priceComparisonEnabled = !!e,
        this.panel && this.panel instanceof UTAuctionActionPanelView && (this.panel.enablePriceComparison(this.priceComparisonEnabled),
        this.refreshPanel())
    }
    ,
    UTItemDetailsViewController.prototype.getViewIteratorItems = function() {
        var e, t;
        return null !== (t = this.viewmodel instanceof UTPaginatedItemListViewModel ? this.viewmodel.getPageItems() : null === (e = this.viewmodel) || void 0 === e ? void 0 : e.values()) && void 0 !== t ? t : []
    }
    ,
    UTItemDetailsViewController.prototype.getViewIteratorIndex = function() {
        var e, t;
        return null !== (t = this.viewmodel instanceof UTPaginatedItemListViewModel ? this.viewmodel.getPageIndex() : null === (e = this.viewmodel) || void 0 === e ? void 0 : e.getIndex()) && void 0 !== t ? t : 0
    }
    ,
    UTItemDetailsViewController.prototype.setViewIteratorIndex = function(e) {
        var t;
        this.viewmodel instanceof UTPaginatedItemListViewModel && (e = this.viewmodel.numItemsPerPage * (this.viewmodel.getCurrentPage() - 1) + e);
        null === (t = this.viewmodel) || void 0 === t || t.setIndex(e)
    }
    ,
    UTItemDetailsViewController.prototype.checkStadiumSlot = function() {
        var e, t = !1, i = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current();
        if (this.stadiumViewModel && i) {
            var o = this.stadiumViewModel.getCurrentSlot()
              , n = JSUtils.isValid(o);
            t = i.id === this.stadiumViewModel.getSlotItemId(),
            n && (null == o ? void 0 : o.modified) && !t && services.MyStadium.saveStadium()
        }
    }
    ,
    UTItemDetailsViewController.prototype.renderView = function() {
        var e, t = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current();
        this.refreshView(),
        t && this.renderPanel(t),
        this.checkStadiumSlot()
    }
    ,
    UTItemDetailsViewController.prototype.refreshView = function() {
        this.isViewDisplayed() && this.getView().render(this.getViewIteratorItems(), this.getViewIteratorIndex())
    }
    ,
    UTItemDetailsViewController.prototype.renderPanel = function(e) {
        this.currentAuction && this.currentAuction.onDataUpdated.unobserve(this),
        this.currentAuction = e.getAuctionData(),
        this.currentAuction.onDataUpdated.observe(this, this.onTimedUpdate),
        this.setupPanelViewInstanceFromData(e, this.squadContext ? this.squadContext.getSquad() : this.currentSquad),
        this.quickListPanel.setItem(e),
        this.appendPanel(),
        (this.panel instanceof UTAuctionActionPanelView && this.currentAuction.getSecondsRemaining() <= AUCTION_COUNTDOWN_THRESHOLD || this.panel instanceof UTTransferActionPanelView) && this.startClientTimer()
    }
    ,
    UTItemDetailsViewController.prototype.refreshPanel = function() {
        var e, t, i, o = services.User.getUser(), n = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current(), r = !1, s = !1, a = !1;
        if (this.stadiumViewModel) {
            var l = this.stadiumViewModel.getCurrentSlot();
            r = (null == n ? void 0 : n.id) === this.stadiumViewModel.getSlotItemId(),
            s = JSUtils.isValid(l),
            a = !!l && (null == l ? void 0 : l.emptiable)
        }
        n && (this.panel instanceof UTAuctionActionPanelView ? this.panel.render(n, null !== (t = null == o ? void 0 : o.getCurrency(GameCurrency.COINS).amount) && void 0 !== t ? t : 0) : this.panel instanceof UTDefaultActionPanelView ? this.panel.render(n, this.squadContext ? this.squadContext.getSquad() : this.currentSquad, repositories.Item.isPileFull(ItemPile.TRANSFER), repositories.Item.isPileFull(ItemPile.STORAGE), !this.squadContext || this.squadContext.isActiveSquad(), r, s, a) : null === (i = this.panel) || void 0 === i || i.render(n))
    }
    ,
    UTItemDetailsViewController.prototype.appendPanel = function() {
        this.panel && this.getView().appendPanel(this.panel)
    }
    ,
    UTItemDetailsViewController.prototype.eIndexChange = function(e, t, i) {
        var o;
        if (i.index !== this.getViewIteratorIndex()) {
            this.setViewIteratorIndex(i.index);
            var n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
            n && this.renderPanel(n)
        }
    }
    ,
    UTItemDetailsViewController.prototype.onIndexChange = function(e) {
        this.renderView()
    }
    ,
    UTItemDetailsViewController.prototype.onPageChange = function() {
        this.getView().resetItems()
    }
    ,
    UTItemDetailsViewController.prototype.onBid = function(e, t, i) {
        var o, n;
        if (this.panel) {
            var r = null === (n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current()) || void 0 === n ? void 0 : n.getAuctionData();
            r && (this.requestedBid = i.value,
            this.panel instanceof UTAuctionActionPanelView && 0 < r.getSecondsRemaining() && (repositories.Item.isPileFull(ItemPile.INBOX) && !r.watched ? (utils.PopupManager.showAlert(utils.PopupManager.Alerts.WATCH_LIST_FULL),
            this.panel.setBidBuyBusyState(!1)) : this.requestedBid < r.currentBid || this.requestedBid < r.startingBid ? (utils.PopupManager.showAlert(utils.PopupManager.Alerts.BID_TOO_LOW),
            this.panel.setBidBuyBusyState(!1)) : r.isHighestBid() ? utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.BID_WHEN_HIGHEST_BIDDER, {
                params: []
            }, this.eBidConfirmed.bind(this), this.eBidCancelled.bind(this)) : this.eBidConfirmed()))
        }
    }
    ,
    UTItemDetailsViewController.prototype.eBidConfirmed = function() {
        var e, a = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current(), l = this.panel;
        a && 0 < this.requestedBid ? this.itemActionController.bid(a, this.requestedBid).observe(this, function _eBidComplete(e, t) {
            var i, o, n;
            e.unobserve(this);
            var r = null == a ? void 0 : a.getAuctionData();
            if (t.success) {
                if ((null == r ? void 0 : r.isWon()) ? this.renderView() : (l instanceof UTAuctionActionPanelView && (null == r ? void 0 : r.isHighestBid()) && l.performBidIncreaseAnimation(),
                window.services.revenueSDK.logEvent(RevenueAnalytics.Event.TRANSFER_MARKET_BID_OR_PURCHASE, ((i = {})[RevenueAnalytics.Key.CURRENCY] = RevenueAnalytics.Currency.COINS,
                i[RevenueAnalytics.Key.ID] = null !== (n = null === (o = null == r ? void 0 : r.tradeId) || void 0 === o ? void 0 : o.toString()) && void 0 !== n ? n : "unknown",
                i)),
                this.refreshView(),
                this.refreshPanel()),
                this.squadContext) {
                    var s = "Squad Slot Detail View - SOTM " + ((null == r ? void 0 : r.isWon()) ? "Buy Now" : "Bid");
                    TelemetryManager.trackEvent(TelemetryManager.Sections.AUCTIONS, TelemetryManager.Categories.BUTTON_PRESS, s)
                }
            } else
                t.error && t.error.code === UtasErrorCode.LOCKED_TRANSFER_MARKET ? this.getNavigationController().popToRootViewController() : NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : l instanceof UTAuctionActionPanelView && l.setBidBuyBusyState(!1)
        }) : l instanceof UTAuctionActionPanelView && l.setBidBuyBusyState(!1)
    }
    ,
    UTItemDetailsViewController.prototype.eBidCancelled = function() {
        var e, t, i, o = null === (t = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current()) || void 0 === t ? void 0 : t.getAuctionData();
        if (o && this.panel instanceof UTAuctionActionPanelView) {
            var n = 0 < (null == o ? void 0 : o.currentBid) ? UTCurrencyInputControl.getIncrementAboveVal(o.currentBid) : o.startingBid
              , r = null === (i = services.User.getUser()) || void 0 === i ? void 0 : i.getCurrency(GameCurrency.COINS).amount
              , s = null == o ? void 0 : o.canBid(n, r);
            this.panel.setBuyBusyState(!o.canBuy(r)),
            this.panel.setBidBusyState(!s)
        }
    }
    ,
    UTItemDetailsViewController.prototype.onBuyNow = function(e, t, i) {
        var o, n, r, s = services.Localization, a = services.User.getUser(), l = null === (n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current()) || void 0 === n ? void 0 : n.getAuctionData(), c = null !== (r = null == l ? void 0 : l.buyNowPrice) && void 0 !== r ? r : 0;
        this.requestedBid = c,
        l && 0 < l.getSecondsRemaining() && (repositories.Item.numItemsInCache(ItemPile.PURCHASED) >= MAX_NEW_ITEMS ? utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.NEW_ITEMS_FULL, {
            params: []
        }, this.goToUnassigned.bind(this), this.eBidCancelled.bind(this)) : l.canBuy(null == a ? void 0 : a.getCurrency(GameCurrency.COINS).amount) ? utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.CONFIRM_BUY_NOW, {
            params: [s.localizeNumber(c)]
        }, this.eBidConfirmed.bind(this), this.eBidCancelled.bind(this)) : (services.Notification.queue([s.localize("popup.error.auctionInsufficientCoins"), UINotificationType.NEGATIVE]),
        this.eBidCancelled()))
    }
    ,
    UTItemDetailsViewController.prototype.onCombineLoans = function(e, t, i) {
        var o, r = this, n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        n && this.itemActionController.combineLoans(n).observe(this, function(e, t) {
            var i, o;
            e.unobserve(r);
            var n = null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.itemIds) && void 0 !== o ? o : [];
            t.success && 0 < n.length && r.handleRemove(n)
        })
    }
    ,
    UTItemDetailsViewController.prototype.onDiscard = function(e, t, i) {
        var o, n, r = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        if ((null == r ? void 0 : r.isConsumable()) && 1 < r.stackCount) {
            var s = new UTQuickSellPopupViewController(r.stackCount,r.untradeableCount,r.discardValue);
            s.onConfirm.observe(this, this.onDiscardConfirmConsumable),
            gPopupClickShield.setActivePopup(s)
        } else {
            var a = services.Localization.localizeNumber(null !== (n = null == r ? void 0 : r.discardValue) && void 0 !== n ? n : 0);
            utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.CONFIRM_DISCARD, {
                params: [a]
            }, this.onDiscardConfirm.bind(this))
        }
    }
    ,
    UTItemDetailsViewController.prototype.onDiscardConfirmConsumable = function(e, t) {
        var i, o = this, n = null === (i = this.viewmodel) || void 0 === i ? void 0 : i.current();
        n && this.itemActionController.discard(n, t).observe(this, function(e, t) {
            e.unobserve(o),
            t.success && JSUtils.isObject(t.data) && o.handleRemove(t.data.itemIds.map(function(e) {
                return Number(e)
            }))
        })
    }
    ,
    UTItemDetailsViewController.prototype.onDiscardConfirm = function() {
        var e, i = this, t = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current();
        t && this.itemActionController.discard(t).observe(this, function(e, t) {
            e.unobserve(i),
            t.success && JSUtils.isObject(t.data) && i.handleRemove(t.data.itemIds.map(function(e) {
                return Number(e)
            }))
        })
    }
    ,
    UTItemDetailsViewController.prototype.onMove = function(e, t, i) {
        var o, n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        if (n) {
            var r = ItemPile.CLUB;
            switch (t) {
            case enums.UIItemActionEvent.SEND_TO_TRANSFERS:
                r = ItemPile.TRANSFER;
                break;
            case enums.UIItemActionEvent.SEND_TO_STORAGE:
                r = ItemPile.STORAGE;
                break;
            default:
                r = ItemPile.CLUB
            }
            var s = services.UserSettings.getSwapDuplicatesWarningSkip();
            if (n.isDuplicate() && !s)
                return void this.showSwapDuplicateWarning(n, r);
            this.moveItemToPile(n, r)
        }
    }
    ,
    UTItemDetailsViewController.prototype.moveItemToPile = function(e, t) {
        var n = this;
        this.itemActionController.move(e, t).observe(this, function(e, t) {
            var i, o;
            e.unobserve(n),
            t.success && JSUtils.isObject(t.data) && n.handleItemMove(null === (i = t.data) || void 0 === i ? void 0 : i.itemIds, null === (o = t.data) || void 0 === o ? void 0 : o.clubDuplicates)
        })
    }
    ,
    UTItemDetailsViewController.prototype.showSwapDuplicateWarning = function(i, o) {
        var n = this
          , e = services.Localization
          , r = new UTActionConfirmationPopupViewController;
        r.init(),
        r.modalDisplayStyle = "form",
        r.modalDisplayDimensions.width = "380px",
        r.modalCanDismissFromShield = !1,
        r.setTitleText(e.localize("bulkaction.confirmpopup.swaptradeables.title")),
        r.setBodyText(e.localize("bulkaction.confirmpopup.swaptradeables.body")),
        gPopupClickShield.setActivePopup(r),
        r.onExit.observe(this, function(e, t) {
            e.unobserve(n),
            t === enums.UIDialogOptions.OK && (services.UserSettings.setSwapDuplicatesWarningSkip(!r.getShowConfirmationPopup()),
            n.moveItemToPile(i, o))
        })
    }
    ,
    UTItemDetailsViewController.prototype.nItemMoved = function(e, t, i) {
        this.viewmodel && 0 < this.viewmodel.length && (1 === i.itemIds.length ? this.handleItemMove(i.itemIds, i.clubDuplicates) : this.renderView())
    }
    ,
    UTItemDetailsViewController.prototype.nItemRecovered = function(e, t, i) {
        this.viewmodel && 0 < this.viewmodel.length && (1 === i.itemIds.length ? this.handleRemove(i.itemIds) : this.renderView())
    }
    ,
    UTItemDetailsViewController.prototype.handleItemMove = function(e, t) {
        var i, o, n = null === (i = this.viewmodel) || void 0 === i ? void 0 : i.current(), r = null == n ? void 0 : n.isConsumable();
        if (n && this.viewmodel)
            if (n && -1 < e.indexOf(n.id) || r && 0 === (null == n ? void 0 : n.stackCount)) {
                var s = this.getRootNavigationController()
                  , a = this.getNavigationController()
                  , l = this.viewmodel.getIndex()
                  , c = t.find(function(e) {
                    return e.id === (null == n ? void 0 : n.duplicateId)
                });
                0 <= l && this.viewmodel.remove(l),
                null === (o = this.viewmodel) || void 0 === o || o.values().forEach(function(e) {
                    e.compareResourceTo(n, !0) && e.limitedUseType === n.limitedUseType && n.pile === ItemPile.CLUB && (e.duplicateId = JSUtils.isNumber(n.id) ? n.id : Number(n.id),
                    e.isMatchLimited() && n.isMatchLimited() && (e.duplicateItemLoans = n.loans))
                }),
                c && (this.viewmodel.add(c, l),
                this.setViewIteratorIndex(l)),
                0 < this.viewmodel.length ? (JSUtils.isValid(c) || this.renderPanel(n),
                this.renderView()) : isPhone() && s && s !== a && s.getCurrentController() !== s.getRootController() && (null == a ? void 0 : a.getCurrentController()) === (null == a ? void 0 : a.getRootController()) ? s.popViewController() : a && a.getCurrentController() !== a.getRootController() && a.popViewController()
            } else
                r && 0 < n.stackCount && this.refreshConsumable(n)
    }
    ,
    UTItemDetailsViewController.prototype.onCompare = function(e, t, i) {
        var o = this.getNavigationController();
        if (o && this.viewmodel) {
            var n = new UTMarketSearchResultsViewController
              , r = new UTSearchCriteriaDTO
              , s = this.viewmodel.current();
            services.Item.clearTransferMarketCache(),
            s ? (r.defId = [s.definitionId],
            r.type = s.getSearchType(),
            n.initWithSearchCriteria(r),
            n.setPinnedItem(s)) : n.initWithSearchCriteria(r),
            o.pushViewController(n, !0)
        }
    }
    ,
    UTItemDetailsViewController.prototype.onRedeem = function(e, t, i) {
        var o, n = this;
        if (this.viewmodel) {
            var r = this.getView()
              , s = this.viewmodel.current();
            s && (null == s ? void 0 : s.isPlayerPickItem()) && (null === (o = services.User.getUser()) || void 0 === o ? void 0 : o.hasPlayerPicksPending) ? utils.PopupManager.showConfirmation(new UTPopupDTO("popup.error.playerPicks.title.collectBeforePurchase","popup.error.playerPicks.description.collectBeforePurchase",[{
                labelEnum: enums.UIDialogOptions.CANCEL,
                negativeActionFlag: !0
            }, {
                labelEnum: enums.UIDialogOptions.TAKE_ME
            }]), {
                params: []
            }, function() {
                services.Item.requestPendingPlayerPickItemSelection().observe(n, function(e, t) {
                    e.unobserve(n),
                    t.success && JSUtils.isObject(t.response) ? n.showPlayerPicks(t.response.items, t.response.availablePicks, !0) : NetworkErrorManager.handleStatus(t.status)
                })
            }, function() {
                r.setInteractionState(!0)
            }) : s && services.Item.redeem(s).observe(this, this.eRedeemComplete)
        }
    }
    ,
    UTItemDetailsViewController.prototype.eRedeemComplete = function(e, t) {
        var i, o, n, r;
        if (e.unobserve(this),
        this.viewmodel)
            if (t.success) {
                var s = null === (i = t.data) || void 0 === i ? void 0 : i.playerPicks
                  , a = null === (o = t.data) || void 0 === o ? void 0 : o.availablePicks;
                (null === (n = this.viewmodel.current()) || void 0 === n ? void 0 : n.isPlayerPickItem()) && s && a && this.showPlayerPicks(s, a);
                var l = null === (r = t.data) || void 0 === r ? void 0 : r.itemIds;
                (null == l ? void 0 : l.length) && this.handleRemove(l.map(function(e) {
                    return Number(e)
                }))
            } else
                NetworkErrorManager.handleStatus(t.status)
    }
    ,
    UTItemDetailsViewController.prototype.nItemListed = function(e, t, i) {
        var o, n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        n && -1 < i.itemIds.indexOf(Number(n.id)) && this.renderView()
    }
    ,
    UTItemDetailsViewController.prototype.onClearSold = function(e, t, i) {
        var o, n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        n && services.Item.clearSoldItems(n).observe(this, function _eClearSoldComplete(e, t) {
            var i;
            e.unobserve(this),
            t.success && this.handleRemove(null === (i = t.data) || void 0 === i ? void 0 : i.itemIds)
        })
    }
    ,
    UTItemDetailsViewController.prototype.onActivate = function(e, t, i) {
        var o, n, r, s = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        if (s && (JSUtils.isValid(this.stadiumViewModel) && (null === (n = this.stadiumViewModel) || void 0 === n ? void 0 : n.assignItemToSlot(s)))) {
            this.refreshView(),
            this.refreshPanel(),
            this.panel instanceof UTDefaultActionPanelView && (null === (r = this.panel) || void 0 === r || r.removeQuickList());
            var a = new UTStadiumMessageProducer
              , l = a.createMessage(MessageType.STADIUM, {
                message: s.subtype.toString()
            });
            a.publishMessage(l)
        }
    }
    ,
    UTItemDetailsViewController.prototype.onDeactivate = function(e, t, i) {
        var o, n = services.Localization, r = services.Notification, s = JSUtils.isValid(this.stadiumViewModel);
        s && (null === (o = this.stadiumViewModel) || void 0 === o ? void 0 : o.assignItemToSlot(new UTNullItemEntity)) ? (this.refreshView(),
        this.refreshPanel(),
        this.panel instanceof UTDefaultActionPanelView && this.panel.removeQuickList(),
        r.queue([n.localize("notification.club.unassignSuccess"), UINotificationType.POSITIVE])) : r.queue([n.localize("notification.club.unassignFailed"), UINotificationType.NEGATIVE]),
        DebugUtils.Assert(s, "Item Detail controller is missing stadium context for deactivation.")
    }
    ,
    UTItemDetailsViewController.prototype.onSendToSquad = function(e, t, i) {
        var o, s = this, n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current(), a = services.Localization, l = services.Notification;
        if (n) {
            function xDb(o) {
                function ADb(i) {
                    i.addItemToSlot(UTSquadEntity.MANAGER_SLOT_INDEX, n),
                    i.save().observe(s, function(e, t) {
                        e.unobserve(s),
                        t.success && (s.currentSquad = i,
                        o && s.refreshPanel(),
                        l.queue([a.localize("notification.item.toActiveSquad"), UINotificationType.NEUTRAL]))
                    })
                }
                s.squadContext ? ADb.call(s, s.squadContext.getSquad()) : services.Squad.requestSquadByType("active").observe(s, function(e, t) {
                    var i;
                    e.unobserve(s),
                    t.success && ADb.call(s, null === (i = t.data) || void 0 === i ? void 0 : i.squad)
                })
            }
            n.isPlayer() ? this.gotoSendToSquadFlow() : n.isManager() && (n.pile !== ItemPile.CLUB ? services.Item.move(n, ItemPile.CLUB).observe(this, function(e, t) {
                var i, o, n, r;
                e.unobserve(s),
                t.success ? (s.handleItemMove(null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.itemIds) && void 0 !== o ? o : [], null !== (r = null === (n = t.data) || void 0 === n ? void 0 : n.clubDuplicates) && void 0 !== r ? r : []),
                xDb.call(s, !1)) : (l.queue([a.localize("notification.item.toActiveSquadFailed"), UINotificationType.NEGATIVE]),
                NetworkErrorManager.handleStatus(t.status))
            }) : xDb.call(this, !0))
        }
    }
    ,
    UTItemDetailsViewController.prototype.onApply = function(e, t, i) {
        this.gotoApplyConsumableFlow()
    }
    ,
    UTItemDetailsViewController.prototype.onWatch = function(e, t, i) {
        var o, n, r = null === (n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current()) || void 0 === n ? void 0 : n.getAuctionData();
        r && r.watched ? r.isHighestBid() ? (utils.PopupManager.showAlert(utils.PopupManager.Alerts.CANT_UNWATCH_ACTIVE_BID),
        this.panel instanceof UTAuctionActionPanelView && (this.panel.setWatchBusyState(!1),
        this.panel.toggleWatchedState(!0))) : this.onUnwatchAction() : repositories.Item.isPileFull(ItemPile.INBOX) ? (utils.PopupManager.showAlert(utils.PopupManager.Alerts.WATCH_LIST_FULL),
        this.panel instanceof UTAuctionActionPanelView && (this.panel.setWatchBusyState(!1),
        this.panel.toggleWatchedState(!0))) : this.onWatchAction()
    }
    ,
    UTItemDetailsViewController.prototype.onWatchAction = function() {
        var e, o = this, n = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current();
        n && this.itemActionController.target(n).observe(this, function(e, t) {
            var i;
            e.unobserve(o),
            o.panel instanceof UTAuctionActionPanelView && (o.panel.toggleWatchedState(n.getAuctionData().watched),
            o.panel.setWatchBusyState(!1)),
            t.error && (t.error.code === UtasErrorCode.LOCKED_TRANSFER_MARKET ? null === (i = o.getNavigationController()) || void 0 === i || i.popToRootViewController() : t.error.code !== UtasErrorCode.PERMISSION_DENIED && t.status !== HttpStatusCode.CONFLICT && NetworkErrorManager.handleStatus(t.status))
        })
    }
    ,
    UTItemDetailsViewController.prototype.onUnwatchAction = function() {
        var e, n = this, r = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current();
        r && this.itemActionController.untarget(r).observe(this, function(e, t) {
            var i;
            e.unobserve(n);
            var o = r.getAuctionData();
            n.panel instanceof UTAuctionActionPanelView && (n.panel.toggleWatchedState(o.watched),
            o.isExpired() || n.panel.setWatchBusyState(!1)),
            t.error && (t.error.code === UtasErrorCode.LOCKED_TRANSFER_MARKET ? null === (i = n.getNavigationController()) || void 0 === i || i.popToRootViewController() : t.error.code !== UtasErrorCode.PERMISSION_DENIED && NetworkErrorManager.handleStatus(t.status))
        })
    }
    ,
    UTItemDetailsViewController.prototype.onBioTap = function(e, t, i) {
        var o, n, r, s = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        if (s)
            if (s.isValid() && s.isPlayer() && JSUtils.isValid(s.getMetaData()))
                (a = new UTPlayerBioViewController).initWithItem(s),
                null === (n = this.getNavigationController()) || void 0 === n || n.pushViewController(a);
            else if (s.isValid() && s.isManager()) {
                var a;
                (a = new UTManagerBioViewController).initWithItem(s),
                null === (r = this.getNavigationController()) || void 0 === r || r.pushViewController(a)
            } else
                services.Notification.queue([services.Localization.localize("playerbio.unavailable"), UINotificationType.NEGATIVE])
    }
    ,
    UTItemDetailsViewController.prototype.onRecover = function(e, t, i) {
        var o, n = this, r = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        r && (DebugUtils.Assert(r.isRecoverable(), "Undo Discard: Trying to recover an item that can't be recovered."),
        r.isRecoverable() && services.Item.restoreDiscardedItem(Number(r.id), r.discardDate, r.continuationId).observe(this, function(e, t) {
            e.unobserve(n),
            t.success ? services.Notification.queue([services.Localization.localize("notification.undoDiscard.success", [r.getStaticData().name]), UINotificationType.POSITIVE]) : services.Notification.queue([services.Localization.localize("notification.undoDiscard.fail", [r.getStaticData().name]), UINotificationType.NEGATIVE])
        }))
    }
    ,
    UTItemDetailsViewController.prototype.onFindRelated = function(e, t, i) {
        var o, n = this.getNavigationController();
        if (n) {
            var r = new UTMarketSearchResultsViewController
              , s = new UTSearchCriteriaDTO
              , a = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
            services.Item.clearTransferMarketCache(),
            a ? (s.defId = [a.definitionId],
            s.type = a.getSearchType(),
            r.initWithSearchCriteria(s),
            r.setPinnedItem(a)) : r.initWithSearchCriteria(s),
            n.pushViewController(r, !0)
        }
    }
    ,
    UTItemDetailsViewController.prototype.onApplyPreset = function(e, t, i) {
        var o, n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.current();
        if (n) {
            var r = services.Localization
              , s = new UTTacticsPopupViewModel
              , a = new UTTacticsPresetPopupViewController(n,s)
              , l = new UTSquadTacticsViewModel(services.Squad)
              , c = this.currentSquad;
            c && l.setSquad(c),
            a.initWithTacticsViewModel(l),
            a.modalDisplayDimensions.width = "24em";
            var u = services.Squad.getManagerPresetById(n.id);
            if (u) {
                var d = a.getView()
                  , h = repositories.Squad.getFormationById(u.formation.id);
                h && (d.setStepText(1),
                d.setActionButtonText(r.localize("popup.applyPreset.apply")),
                d.setDescription(r.localize("popup.applyPreset.description1")),
                d.renderPresetInfo(u, null == h ? void 0 : h.name),
                gPopupClickShield.setActivePopup(a))
            }
        }
    }
    ,
    UTItemDetailsViewController.prototype.onTimedUpdate = function(e, t) {
        this.currentAuction && (this.panel instanceof UTAuctionActionPanelView || this.panel instanceof UTTransferActionPanelView) && (this.currentAuction.isWon() || this.currentAuction.isExpired() ? (this.stopClientTimer(),
        this.renderView(),
        this.refreshPanel()) : ((JSUtils.isValid(t.bidState) || JSUtils.isValid(t.tradeState)) && (this.refreshView(),
        this.refreshPanel()),
        this.clientCountdownAuctionId !== this.currentAuction.tradeId && this.stopClientTimer(),
        this.panel instanceof UTTransferActionPanelView || this.currentAuction.getSecondsRemaining() <= AUCTION_COUNTDOWN_THRESHOLD ? this.startClientTimer() : this.panel.onTimedUpdate(this.currentAuction)))
    }
    ,
    UTItemDetailsViewController.prototype.startClientTimer = function() {
        this.currentAuction && !this.countdownIntervalController && (this.panel instanceof UTAuctionActionPanelView || this.panel instanceof UTTransferActionPanelView) && (this.clientCountdownAuctionId = this.currentAuction.tradeId,
        this.clientCountdown = this.currentAuction.getSecondsRemaining(),
        this.panel.onTimedUpdate(this.currentAuction, this.clientCountdown),
        this.countdownIntervalController = new EAIntervalController(1e3,this.updateClientTimer.bind(this)),
        this.countdownIntervalController.start())
    }
    ,
    UTItemDetailsViewController.prototype.stopClientTimer = function() {
        this.countdownIntervalController && (this.countdownIntervalController.dealloc(),
        this.countdownIntervalController = null)
    }
    ,
    UTItemDetailsViewController.prototype.updateClientTimer = function() {
        if (this.currentAuction)
            if (this.clientCountdownAuctionId !== this.currentAuction.tradeId || this.clientCountdown < 0)
                this.stopClientTimer();
            else {
                this.clientCountdown--;
                var e = this.clientCountdown
                  , t = Math.abs(this.currentAuction.expires - this.clientCountdown);
                (this.clientCountdown < 0 || this.currentAuction.expires < 0 || t > AUCTION_LATENCY_THRESHOLD) && (e = this.currentAuction.getSecondsRemaining(),
                0 <= this.clientCountdown && 0 <= this.currentAuction.expires && (this.clientCountdown = e)),
                (this.panel instanceof UTAuctionActionPanelView || this.panel instanceof UTTransferActionPanelView) && this.panel.onTimedUpdate(this.currentAuction, e)
            }
    }
    ,
    UTItemDetailsViewController.prototype.handleRemove = function(e) {
        if (this.viewmodel) {
            var t = this.viewmodel.current();
            if (Array.isArray(e) && 1 === e.length && t) {
                if (t.isClubConsumable())
                    isPhone() ? (this.refreshConsumable(t),
                    this.refreshPanel(),
                    this.refreshView()) : 0 < t.stackCount && this.refreshConsumable(t);
                else if (e.includes(Number(t.id))) {
                    var i = isPhone() ? this.getRootNavigationController() : this.getNavigationController();
                    this.viewmodel.remove(this.viewmodel.getIndex()),
                    0 < this.viewmodel.length ? (this.renderPanel(t),
                    this.renderView()) : i && i.getCurrentController() !== i.getRootController() && i.popViewController()
                }
            } else
                this.renderView()
        }
    }
    ,
    UTItemDetailsViewController.prototype.showPlayerPicks = function(e, t, i) {
        var o, n;
        void 0 === i && (i = !1);
        var r = isPhone()
          , s = new UTPlayerPicksViewController;
        s.initWithPicks(e, t),
        i && s.setPendingSelectionContext(),
        s.modalDisplayStyle = r ? "fullscreen" : "form",
        r ? null === (n = null === (o = this.getNavigationController()) || void 0 === o ? void 0 : o.getPreviousController()) || void 0 === n || n.presentViewController(s, !0) : this.presentViewController(s, !0)
    }
    ,
    UTItemDetailsViewController.prototype.refreshConsumable = function(e) {
        e.untradeable && this.refreshPanel(),
        this.renderView()
    }
    ,
    UTItemDetailsViewController.prototype.gotoSendToSquadFlow = function() {
        var e, t;
        if (this.viewmodel) {
            var i = this.viewmodel.current()
              , o = new UTSendToSquadViewController;
            if (this.squadContext) {
                var n = this.squadContext.getSquad()
                  , r = null === (e = this.squadContext.getCurrentSlot()) || void 0 === e ? void 0 : e.index;
                n && o.setSquad(n),
                r && o.setSelectedSlotIndex(r)
            }
            i ? o.initWithItem(i) : o.init(),
            null === (t = this.getNavigationController()) || void 0 === t || t.pushViewController(o)
        }
    }
    ,
    UTItemDetailsViewController.prototype.gotoApplyConsumableFlow = function() {
        var e, t, i, o = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.current();
        (null == o ? void 0 : o.isConsumable()) ? (i = new UTClubSearchFiltersViewController).displayAsDetails = !0 : i = new UTConsumableCategoriesViewController,
        o ? i.initWithItem(o) : i.init(),
        null === (t = this.getNavigationController()) || void 0 === t || t.pushViewController(i)
    }
    ,
    UTItemDetailsViewController.prototype.goToUnassigned = function() {
        var r = this;
        gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        services.Item.requestUnassignedItems().observe(this, function(e, t) {
            var i;
            e.unobserve(r);
            var o = r.getRootNavigationController();
            if (o) {
                var n = isPhone() ? new UTUnassignedItemsViewController : new UTUnassignedItemsSplitViewController;
                t.success && JSUtils.isObject(t.response) ? n.initWithItems(null === (i = t.response) || void 0 === i ? void 0 : i.items) : n.init(),
                services.Item.clearTransferMarketCache(),
                o.pushViewController(n)
            }
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        })
    }
    ,
    UTItemDetailsViewController
}(EAViewController))
  , UTItemDetailsNavigationController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTItemDetailsNavigationController(e, t) {
        return i.call(this, e, t) || this
    }
    return __extends(UTItemDetailsNavigationController, i),
    UTItemDetailsNavigationController.prototype.initWithIterator = function(e) {
        if (!this.initialized) {
            var t = this._getRootControllerInstance();
            t.initWithIterator(e),
            this.initWithRootController(t)
        }
    }
    ,
    UTItemDetailsNavigationController.prototype._getRootControllerInstance = function() {
        return new UTItemDetailsViewController
    }
    ,
    UTItemDetailsNavigationController.prototype.setIndex = function(e) {
        this.popToRootViewController();
        var t = this.getRootController();
        t instanceof UTItemDetailsViewController && t.onIndexChange(e)
    }
    ,
    UTItemDetailsNavigationController.prototype.setStadiumViewModel = function(e) {
        var t = this.getRootController();
        t instanceof UTItemDetailsViewController && t.setStadiumViewModel(e)
    }
    ,
    UTItemDetailsNavigationController.prototype.onPageChange = function() {
        var e = this.getRootController();
        e instanceof UTItemDetailsViewController && e.onPageChange()
    }
    ,
    UTItemDetailsNavigationController.prototype.enableSwiping = function(e) {
        var t = this.getRootController();
        t instanceof UTItemDetailsViewController && t.enableSwiping(e)
    }
    ,
    UTItemDetailsNavigationController.prototype.enablePriceComparison = function(e) {
        var t = this.getRootController();
        t instanceof UTItemDetailsViewController && t.enablePriceComparison(e)
    }
    ,
    UTItemDetailsNavigationController.prototype.didPush = function(e) {
        i.prototype.didPush.call(this, e),
        this.setNavigationVisibility(e !== this.getRootController(), !0)
    }
    ,
    UTItemDetailsNavigationController
}(UTNavigationController))
  , UTClubSearchResultsViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(s) {
    function UTClubSearchResultsViewController() {
        var e = s.call(this) || this;
        return e.activeSquad = null,
        e.clubViewModel = null,
        e.consumableItem = null,
        e.displayAsDetails = !1,
        e.onDataChange = new EAObservable,
        e.onItemSelected = new EAObservable,
        e.pinnedItemController = null,
        e.searchCriteria = new UTSearchCriteriaDTO,
        e.selectedItem = null,
        e.selectedSubType = null,
        e.stadiumViewModel = null,
        e
    }
    return __extends(UTClubSearchResultsViewController, s),
    UTClubSearchResultsViewController.prototype.init = function() {
        this.initialized || (s.prototype.init.call(this),
        this.searchCriteria.count = MAX_ITEMS_REQUEST + 1)
    }
    ,
    UTClubSearchResultsViewController.prototype.initWithSearchCriteria = function(e) {
        this.initialized || (this.clubViewModel || (this.clubViewModel = new UTClubViewModel([])),
        this.searchCriteria = e,
        this.init())
    }
    ,
    UTClubSearchResultsViewController.prototype.dealloc = function() {
        var e;
        this.getView().onSearch.unobserve(this),
        s.prototype.dealloc.call(this),
        this.clubViewModel = null,
        this.consumableItem = null,
        this.selectedItem = null,
        this.selectedSubType = null,
        this.onItemSelected.dealloc(),
        this.onDataChange.dealloc(),
        null === (e = this.pinnedItemController) || void 0 === e || e.dealloc(),
        this.pinnedItemController = null
    }
    ,
    UTClubSearchResultsViewController.prototype._getViewInstanceFromData = function() {
        return new UTClubSearchResultsView
    }
    ,
    UTClubSearchResultsViewController.prototype.validateCurrentItems = function() {
        var e, t, i, o = null !== (t = null === (e = this.clubViewModel) || void 0 === e ? void 0 : e.getItemList().filter(function(e) {
            var t = repositories.Item.getClub()
              , i = e.isConsumable() ? e.definitionId : e.id;
            return JSUtils.isNumber(i) && !t.getItem(e.type, e.subtype, i)
        }).map(function(e) {
            return e.id
        })) && void 0 !== t ? t : [];
        null === (i = this.clubViewModel) || void 0 === i || i.removeItemsById(o)
    }
    ,
    UTClubSearchResultsViewController.prototype.viewDidAppear = function() {
        var i = this;
        s.prototype.viewDidAppear.call(this);
        var o = this.getView()
          , e = 1 < this.searchCriteria.subtypes.length;
        if (o.toggleSubTypesOptions(e),
        e) {
            var t = o.getSubTypesDropDown()
              , n = factories.DataProvider.getDynamicSubTypesDP(this.searchCriteria.subtypes);
            o.setSubTypesOptions(n),
            this.selectedSubType && t.setIndexById(this.selectedSubType),
            t.addTarget(this, this.onDropDownChanged, EventType.CHANGE)
        }
        function uGb() {
            var e, t;
            i.setupHeader(),
            i.selectedItem && (null === (e = i.clubViewModel) || void 0 === e ? void 0 : e.canShowPage()) ? (i.validateCurrentItems(),
            i.clubViewModel.removeEmptyConsumables(),
            i.updateItemList(i.clubViewModel.getPageItems()),
            i.selectedItem = null) : (null === (t = i.clubViewModel) || void 0 === t || t.resetCollection([]),
            i._requestItems()),
            i.consumableItem && (i.generatePinnedItemView(),
            o.setPinnedItemData(i.consumableItem)),
            i.pinnedItemController && i.pinnedItemController.viewDidAppear(),
            o.updateListTopPosition(),
            i.setupTelemetry()
        }
        this.stadiumViewModel && this.stadiumViewModel.stadium.onDataUpdated.observe(this, this.onStadiumUpdated),
        this.searchCriteria.type === SearchType.PLAYER || this.searchCriteria.type === SearchType.STAFF ? services.Squad.requestSquadByType("active").observe(this, function(e, t) {
            e.unobserve(i),
            t.success && t.data && t.data.squad && i.setActiveSquadData(t.data.squad),
            uGb.call(i)
        }) : uGb.call(this),
        o.onSearch.observe(this, this.onSearch),
        o.addTarget(this, this.onTableCellSelected, enums.UIListEvent.ROW_SELECT),
        o.addTarget(this, this.onTableCellActionSelected, enums.UIListEvent.ROW_ACTION),
        o.addTarget(this, this.onNextPageSelected, enums.UIPaginationEvent.NEXT),
        o.addTarget(this, this.onPreviousPageSelected, enums.UIPaginationEvent.PREVIOUS);
        var r = getDefaultDispatcher();
        r.addObserver(AppNotification.ITEM_ACTIVATE, this, this.onItemActivated),
        r.addObserver(AppNotification.UI_ITEM_STATE_CHANGE, this, this.onItemViewStateChanged),
        r.addObserver(AppNotification.ITEM_APPLY, this, this.onConsumableApplied),
        r.addObserver(AppNotification.ITEM_DISCARD, this, this.onItemDiscarded),
        r.addObserver(AppNotification.ITEM_LIST, this, this.onItemListed),
        r.addObserver(AppNotification.ITEM_MOVE, this, this.onItemMoved),
        r.addObserver(AppNotification.SQUAD_SAVE, this, this._nSquadSaved)
    }
    ,
    UTClubSearchResultsViewController.prototype.viewWillDisappear = function() {
        s.prototype.viewWillDisappear.call(this),
        this.clubViewModel && this.clubViewModel.stopAuctionUpdates(),
        this.stadiumViewModel && this.stadiumViewModel.stadium.onDataUpdated.unobserve(this);
        var e = this.getView();
        e.removeTarget(this, this.onTableCellSelected, enums.UIListEvent.ROW_SELECT),
        e.removeTarget(this, this.onTableCellActionSelected, enums.UIListEvent.ROW_ACTION),
        e.removeTarget(this, this.onNextPageSelected, enums.UIPaginationEvent.NEXT),
        e.removeTarget(this, this.onPreviousPageSelected, enums.UIPaginationEvent.PREVIOUS);
        var t = getDefaultDispatcher();
        t.removeObserver(AppNotification.ITEM_ACTIVATE, this),
        t.removeObserver(AppNotification.ITEM_APPLY, this),
        t.removeObserver(AppNotification.ITEM_DISCARD, this),
        t.removeObserver(AppNotification.ITEM_LIST, this),
        t.removeObserver(AppNotification.ITEM_MOVE, this),
        t.removeObserver(AppNotification.SQUAD_SAVE, this),
        t.removeObserver(AppNotification.UI_ITEM_STATE_CHANGE, this)
    }
    ,
    UTClubSearchResultsViewController.prototype.getNavigationTitle = function() {
        return JSUtils.isValid(this.consumableItem) ? services.Localization.localize("panel.applyitem.button") : services.Localization.localize("navbar.label.club")
    }
    ,
    UTClubSearchResultsViewController.prototype.generatePinnedItemView = function() {
        this.pinnedItemController || (this.pinnedItemController = new UTPinnedItemViewController,
        this.consumableItem ? this.pinnedItemController.initWithItem(this.consumableItem) : this.pinnedItemController.init(),
        this.addChildViewController(this.pinnedItemController),
        this.getView().appendPinnedItemView(this.pinnedItemController.getView()))
    }
    ,
    UTClubSearchResultsViewController.prototype.setStadiumViewModel = function(e) {
        this.stadiumViewModel = e
    }
    ,
    UTClubSearchResultsViewController.prototype.setActiveSquadData = function(e) {
        e && (this.activeSquad = e,
        this.getView().setActiveSquadData(this.activeSquad))
    }
    ,
    UTClubSearchResultsViewController.prototype.setIterator = function(e) {
        this.clubViewModel = e
    }
    ,
    UTClubSearchResultsViewController.prototype.getIterator = function() {
        return this.clubViewModel
    }
    ,
    UTClubSearchResultsViewController.prototype.setConsumableToApply = function(e) {
        this.consumableItem = e
    }
    ,
    UTClubSearchResultsViewController.prototype.getItemTypeFromCriteria = function() {
        switch (this.searchCriteria.type) {
        case SearchType.PLAYER:
            return ItemType.PLAYER;
        case SearchType.STAFF:
            return ItemType.MANAGER;
        case SearchType.CLUB_INFO:
            return this.searchCriteria.category === SearchCategory.BADGE ? ItemType.BADGE : ItemType.KIT;
        case SearchType.BALL:
            return ItemType.BALL;
        case SearchType.STADIUM:
            return ItemType.STADIUM;
        case SearchType.VANITY:
            return ItemType.VANITY;
        case SearchType.CONSUMABLES_DEVELOPMENT:
            return ItemType.HEALTH;
        case SearchType.CONSUMABLES_TRAINING:
            return ItemType.TRAINING;
        case SearchType.ANY:
            return ItemType.NONE;
        default:
            return DebugUtils.Assert(!1, "Criteria type hasn't been defined."),
            ItemType.NONE
        }
    }
    ,
    UTClubSearchResultsViewController.prototype.updateClubHeader = function() {
        var e = this.getView()
          , t = e.getSubTypesDropDown()
          , i = [new EAImageView]
          , o = this.getItemTypeFromCriteria()
          , n = ItemSubType.NONE;
        0 < t.length ? n = t.id : 0 < this.searchCriteria.subtypes.length ? n = this.searchCriteria.subtypes[0] : this.searchCriteria.category === SearchCategory.MANAGER_LEAGUE ? n = ItemSubType.TRAINING_PLAYER_FORMATION_3412 : this.searchCriteria.category === SearchCategory.PLAYSTYLE && (n = ItemSubType.TRAINING_PLAYERSTYLE_GENERAL_1),
        JSUtils.isValid(this.consumableItem) || e.setItemTypeHeader(n !== ItemSubType.NONE ? n : o, i)
    }
    ,
    UTClubSearchResultsViewController.prototype.setupHeader = function() {
        var e, t;
        if (!this.consumableItem) {
            this.updateClubHeader();
            var i = this.getItemTypeFromCriteria()
              , o = "navbar.label.club";
            if (i === ItemType.PLAYER)
                o += "players";
            else if (i === ItemType.MANAGER)
                o += "staff";
            else if (i === ItemType.HEALTH)
                o = "navbar.label.clubconsumables";
            else if (i === ItemType.TRAINING) {
                var n = null === (e = this.clubViewModel) || void 0 === e ? void 0 : e.get(0);
                n ? n.isStyleModifier() ? o = "trainingtype.playStyle" : n.isManagerLeagueModifier() ? o = "card.title.leagueModifier" : n.isTraining() && (o = "search.filters.training") : o += "consumables"
            } else
                i !== ItemType.NONE && (o += "items");
            null === (t = this.getNavigationController()) || void 0 === t || t.setNavigationTitle(services.Localization.localize(o))
        }
    }
    ,
    UTClubSearchResultsViewController.prototype.setupTelemetry = function() {
        var e = this.getItemTypeFromCriteria();
        if (e !== ItemType.NONE) {
            var t = "Club - ";
            e === ItemType.PLAYER ? t += "Players" : e === ItemType.MANAGER ? t += "Staff" : e === ItemType.TRAINING ? t += "Consumables" : t += "Club Items",
            t += " - List View",
            services.PIN.sendData(PINEventType.PAGE_VIEW, {
                type: PIN_PAGEVIEW_EVT_TYPE,
                pgid: t
            }),
            TelemetryManager.trackPage(TelemetryManager.Sections.CLUB, t)
        }
    }
    ,
    UTClubSearchResultsViewController.prototype._requestItems = function(r) {
        var s = this;
        void 0 === r && (r = !1);
        var e = this.getView().getSubTypesDropDown()
          , t = new UTSearchCriteriaDTO;
        t.update(this.searchCriteria),
        0 < e.length && (t.subtypes = [e.id]),
        services.Club.search(t).observe(this, function(e, t) {
            var i;
            if (e.unobserve(s),
            s.clubViewModel && t.success && JSUtils.isObject(t.response)) {
                var o = s.clubViewModel.getIndex()
                  , n = s.searchCriteria.sortBy === SearchSortType.RECENCY;
                s.clubViewModel.sortByRecency = n,
                s.clubViewModel.sort = s.searchCriteria.sort,
                s.clubViewModel.sortType = s.searchCriteria.sortBy,
                s.clubViewModel.removeArray(t.response.items),
                s.clubViewModel.addArray(t.response.items),
                s.clubViewModel.isFull = t.response.retrievedAll,
                s.clubViewModel.setIndex(o),
                s.updateItemList(s.clubViewModel.getPageItems(), !r)
            } else
                services.Notification.queue([services.Localization.localize("notification.club.failedToLoad"), UINotificationType.NEGATIVE]),
                null === (i = s.getNavigationController()) || void 0 === i || i.popViewController(!0)
        })
    }
    ,
    UTClubSearchResultsViewController.prototype.updateItemList = function(e, t) {
        var i, o, n, r, s, a, l, c;
        void 0 === t && (t = !0);
        var u = this.getView();
        if (t && this.onDataChange.notify({
            items: e
        }),
        0 < e.length) {
            var d = null !== (o = null === (i = this.stadiumViewModel) || void 0 === i ? void 0 : i.getSlotItemId()) && void 0 !== o ? o : 0
              , h = this.searchCriteria.type === SearchType.CONSUMABLES_DEVELOPMENT || this.searchCriteria.type === SearchType.CONSUMABLES_TRAINING;
            if (u.setItems(e, d),
            u.toggleHeaderSearchBtn(0 < e.length && !h && !this.stadiumViewModel),
            !this.displayAsDetails && !isPhone()) {
                var p = null === (r = null === (n = this.clubViewModel) || void 0 === n ? void 0 : n.current()) || void 0 === r ? void 0 : r.id;
                JSUtils.isNumber(p) && u.selectListRow(p)
            }
            if (this.setTableCellCallbacks(),
            this.consumableItem) {
                var _ = this.consumableItem
                  , f = e.map(function(e) {
                    return _.canApplyTo(e)
                });
                u.setActionableStates(f)
            }
        } else
            u.setEmptyListMessage(!this.stadiumViewModel && this.searchCriteria.isModified()),
            u.toggleHeaderSearchBtn(!1);
        u.setPaginationState(null !== (a = null === (s = this.clubViewModel) || void 0 === s ? void 0 : s.hasPreviousPage()) && void 0 !== a && a, null !== (c = null === (l = this.clubViewModel) || void 0 === l ? void 0 : l.hasNextPage()) && void 0 !== c && c),
        this.refreshPinnedItem(),
        u.setScrollInertia(!0)
    }
    ,
    UTClubSearchResultsViewController.prototype.refreshList = function() {
        var e, t, i = this.getItemTypeFromCriteria();
        i !== ItemType.TRAINING && i !== ItemType.HEALTH || null === (e = this.clubViewModel) || void 0 === e || e.removeEmptyConsumables(),
        (null === (t = this.clubViewModel) || void 0 === t ? void 0 : t.shouldRequestItems()) ? (this.searchCriteria.offset += this.searchCriteria.count,
        this._requestItems(!0)) : this.clubViewModel && this.updateItemList(this.clubViewModel.getPageItems(), !isPhone())
    }
    ,
    UTClubSearchResultsViewController.prototype.refreshPinnedItem = function() {
        var e;
        null === (e = this.pinnedItemController) || void 0 === e || e.refresh()
    }
    ,
    UTClubSearchResultsViewController.prototype.setTableCellCallbacks = function() {
        var e = this.getView();
        this.consumableItem ? e.setRowActionCallback() : e.setRowTapCallback()
    }
    ,
    UTClubSearchResultsViewController.prototype.onSearch = function() {
        var e;
        if (JSUtils.isValid(this.consumableItem) || this.searchCriteria.type === SearchType.CLUB_INFO || this.searchCriteria.type === SearchType.BALL || this.searchCriteria.type === SearchType.STADIUM || this.searchCriteria.type === SearchType.VANITY)
            null === (e = this.getNavigationController()) || void 0 === e || e.popViewController();
        else {
            var t = this.getNavigationController();
            if (t) {
                var i = new UTMyClubSearchFiltersViewController;
                this.searchCriteria.type === SearchType.STAFF && (this.searchCriteria.category = SearchCategory.MANAGER),
                i.initWithSearchCriteria(this.searchCriteria),
                this.clubViewModel && i.setSearchResultViewModel(this.clubViewModel),
                t.pushViewController(i)
            }
        }
    }
    ,
    UTClubSearchResultsViewController.prototype.onStadiumUpdated = function(e, t) {
        JSUtils.isObject(t) && (this.updateClubHeader(),
        this.clubViewModel && this.updateItemList(this.clubViewModel.getPageItems(), !isPhone()))
    }
    ,
    UTClubSearchResultsViewController.prototype.onPreviousPageSelected = function(e, t, i) {
        var o;
        this.getView().setScrollInertia(!1),
        (null === (o = this.clubViewModel) || void 0 === o ? void 0 : o.hasPreviousPage()) && this.updateItemList(this.clubViewModel.previousPage(), !0)
    }
    ,
    UTClubSearchResultsViewController.prototype.onNextPageSelected = function(e, t, i) {
        var o;
        this.getView().setScrollInertia(!1),
        (null === (o = this.clubViewModel) || void 0 === o ? void 0 : o.hasNextPage()) && (this.clubViewModel.nextPage(),
        this.clubViewModel.shouldRequestItems() ? (this.searchCriteria.offset += this.searchCriteria.count,
        this._requestItems()) : this.updateItemList(this.clubViewModel.getPageItems(), !0))
    }
    ,
    UTClubSearchResultsViewController.prototype.exitConsumableApplyFlow = function() {
        var e = this.getNavigationController();
        if (e)
            if (isPhone()) {
                var t = 0 < repositories.Item.getUnassignedItems().length ? 3 : 2
                  , i = e.getPreviousController(t);
                i ? e.popToViewController(i) : e.popToRootViewController(!0)
            } else
                e.popToRootViewController(!0)
    }
    ,
    UTClubSearchResultsViewController.prototype.onTableCellActionSelected = function(e, t, i) {
        var o = this
          , n = i.item;
        this.consumableItem && n && services.Item.applyTo(this.consumableItem, n).observe(this, function(e, t) {
            if (e.unobserve(o),
            NetworkErrorManager.checkCriticalStatus(t.status))
                NetworkErrorManager.handleStatus(t.status);
            else {
                var i = services.Localization;
                t.success ? services.Notification.queue([i.localize("notification.item.appliedConsumable"), UINotificationType.NEUTRAL]) : services.Notification.queue([i.localize("notification.item.unableToApplyConsumable"), UINotificationType.NEGATIVE]),
                o.exitConsumableApplyFlow()
            }
        })
    }
    ,
    UTClubSearchResultsViewController.prototype.onTableCellSelected = function(e, t, i) {
        var o, n, r, s = i.item;
        if (s) {
            var a = null !== (n = null === (o = this.clubViewModel) || void 0 === o ? void 0 : o.indexOf(function(e) {
                return e.id === s.id
            })) && void 0 !== n ? n : 0
              , l = !!this.clubViewModel && a !== this.clubViewModel.getIndex();
            if (l && (null === (r = this.clubViewModel) || void 0 === r || r.setIndex(a)),
            isPhone() && !this.consumableItem) {
                var c = this.getNavigationController();
                if (c) {
                    var u = new UTItemDetailsNavigationController;
                    this.selectedItem = s,
                    this.clubViewModel ? u.initWithIterator(this.clubViewModel) : u.init(),
                    this.stadiumViewModel && u.setStadiumViewModel(this.stadiumViewModel),
                    c.pushViewController(u)
                }
            } else
                l && (this.onItemSelected.notify(s),
                JSUtils.isNumber(s.id) && this.getView().selectListRow(s.id))
        }
    }
    ,
    UTClubSearchResultsViewController.prototype.onDropDownChanged = function(e, t, i) {
        var o;
        this.selectedSubType = i.id,
        null === (o = this.clubViewModel) || void 0 === o || o.resetCollection([]),
        this.updateClubHeader(),
        this._requestItems(!1)
    }
    ,
    UTClubSearchResultsViewController.prototype.onItemActivated = function(e, t, i) {
        this.updateClubHeader(),
        this.refreshList()
    }
    ,
    UTClubSearchResultsViewController.prototype.onItemViewStateChanged = function(e, t, i) {
        TelemetryManager.trackEvent(TelemetryManager.Sections.CLUB, TelemetryManager.Categories.BUTTON_PRESS, "Item Info Switch Button - Club Search Results")
    }
    ,
    UTClubSearchResultsViewController.prototype.onConsumableApplied = function(e, t, i) {
        this.refreshList()
    }
    ,
    UTClubSearchResultsViewController.prototype.onItemDiscarded = function(e, t, i) {
        var o;
        null === (o = this.clubViewModel) || void 0 === o || o.removeItemsById(i.itemIds),
        this.refreshList()
    }
    ,
    UTClubSearchResultsViewController.prototype.onItemListed = function(e, t, i) {
        var o;
        null === (o = this.clubViewModel) || void 0 === o || o.removeItemsById(i.itemIds),
        this.refreshList()
    }
    ,
    UTClubSearchResultsViewController.prototype.onItemMoved = function(e, t, i) {
        var o;
        null === (o = this.clubViewModel) || void 0 === o || o.removeItemsById(i.itemIds),
        this.refreshList()
    }
    ,
    UTClubSearchResultsViewController.prototype._nSquadSaved = function(e, t, i) {
        i.squad instanceof UTSquadEntity && this.setActiveSquadData(i.squad),
        this.refreshList()
    }
    ,
    UTClubSearchResultsViewController
}(EAViewController));
NamespaceManager.Register("controllers.club"),
controllers.club.ClubSearchResultsLandscape = function ClubSearchResultsSplitViewController() {
    UTSplitViewController.call(this),
    this._itemDetailController = new UTItemDetailsNavigationController,
    this._listController = new UTClubSearchResultsViewController,
    this._viewmodel = this._listController.getIterator(),
    Object.defineProperty(this, "_viewmodel", {
        get: function() {
            return this._listController.getIterator()
        },
        set: function(e) {
            this._listController.setIterator(e)
        }
    }),
    this._searchCriteria = this._listController._searchCriteria,
    Object.defineProperty(this, "_searchCriteria", {
        get: function() {
            return this._listController._searchCriteria
        },
        set: function(e) {
            this._listController._searchCriteria = e
        }
    })
}
,
JSUtils.inherits(controllers.club.ClubSearchResultsLandscape, UTSplitViewController),
controllers.club.ClubSearchResultsLandscape.prototype.init = function init() {
    if (!this.initialized) {
        this.superclass(),
        this._listController.init(),
        this._listController.onDataChange.observe(this, this._eListDataChanged),
        this._listController.onItemSelected.observe(this, this._eItemSelected);
        var e = this._listController.getView();
        e.addTarget(this, this._ePageChange, enums.UIPaginationEvent.NEXT),
        e.addTarget(this, this._ePageChange, enums.UIPaginationEvent.PREVIOUS),
        this._itemDetailController.initWithIterator(this._listController.getIterator()),
        this._itemDetailController.enableSwiping(!1),
        this.addChildViewController(this._listController),
        this.addChildViewController(this._itemDetailController)
    }
}
,
controllers.club.ClubSearchResultsLandscape.prototype.initWithSearchCriteria = function initWithSearchCriteria(e) {
    this.initialized || (this._listController.initWithSearchCriteria(e),
    this.init())
}
,
controllers.club.ClubSearchResultsLandscape.prototype.dealloc = function dealloc() {
    this._itemDetailController.dealloc(),
    this._itemDetailController = null,
    this._listController.dealloc(),
    this._listController = null,
    this.superclass()
}
,
controllers.club.ClubSearchResultsLandscape.prototype.viewDidAppear = function viewDidAppear() {
    this.rightController && 0 === this._listController.getIterator().length && this.removeRightController(),
    this.superclass(),
    this.setLeftController(this._listController),
    this._itemDetailController.setNavigationStyle(UTNavigationBarView.Style.SECONDARY)
}
,
controllers.club.ClubSearchResultsLandscape.prototype.setStadiumViewModel = function setStadiumViewModel(e) {
    this._listController.setStadiumViewModel(e),
    this._itemDetailController.setStadiumViewModel(e)
}
,
controllers.club.ClubSearchResultsLandscape.prototype.setConsumableToApply = function setConsumableToApply(e) {
    this._listController.setConsumableToApply(e)
}
,
controllers.club.ClubSearchResultsLandscape.prototype._ePageChange = function _ePageChange() {
    this._itemDetailController.onPageChange()
}
,
controllers.club.ClubSearchResultsLandscape.prototype._eItemSelected = function _eItemSelected(e, t) {
    this._itemDetailController.setIndex(this._listController.getIterator().indexOf(function(e) {
        return e.id === t.id
    }))
}
,
controllers.club.ClubSearchResultsLandscape.prototype._eListDataChanged = function _eListDataChanged(e, t) {
    t.items && (0 < t.items.length ? (this.setRightController(this._itemDetailController),
    this._itemDetailController.setIndex(this._listController.getIterator().getIndex())) : this.removeRightController())
}
;
var TileDimOverlayType;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
!function(e) {
    e.DEFAULT = "",
    e.LOCKED = "locked",
    e.MAINTENANCE = "maintenance"
}(TileDimOverlayType = TileDimOverlayType || {});
var UTTileDimOverlayView = function(e) {
    function UTTileDimOverlayView() {
        return e.call(this) || this
    }
    return __extends(UTTileDimOverlayView, e),
    UTTileDimOverlayView.prototype.setText = function(e) {
        this.__messageTextField.textContent = e
    }
    ,
    UTTileDimOverlayView.prototype.setType = function(e) {
        this.removeClass([TileDimOverlayType.LOCKED, TileDimOverlayType.MAINTENANCE].join(" ")),
        this.addClass(e)
    }
    ,
    UTTileDimOverlayView
}(EAView);
UTTileDimOverlayView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tile-dim-overlay-view"),
        this.__messageTextField = document.createElement("p"),
        this.__messageTextField.classList.add("ut-tile-dim-text"),
        e.appendChild(this.__messageTextField),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTileDimOverlayView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__messageTextField = null
}
,
UTTileDimOverlayView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTileView = function(i) {
    function UTTileView() {
        return i.call(this) || this
    }
    return __extends(UTTileView, i),
    Object.defineProperty(UTTileView.prototype, "title", {
        get: function() {
            return this.__tileTitle.textContent || ""
        },
        set: function(e) {
            this.__tileTitle.textContent = e
        },
        enumerable: !1,
        configurable: !0
    }),
    UTTileView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTTileView.prototype.dealloc = function() {
        window.clearTimeout(this.highlightTimeout),
        i.prototype.dealloc.call(this),
        this.dimOverlay && (this.dimOverlay.dealloc(),
        this.dimOverlay = null),
        this.contentView && (this.contentView.dealloc(),
        this.contentView = null)
    }
    ,
    UTTileView.prototype.setInteractionState = function(e) {
        var t = this._interactionState;
        i.prototype.setInteractionState.call(this, e),
        this._interactionState !== t && (this.toggleClass(enums.UIState.DISABLED, !this._interactionState),
        this._interactionState || this.removeClass(enums.UIState.ACTIVE))
    }
    ,
    UTTileView.prototype._getContentViewInstance = function() {
        return null
    }
    ,
    UTTileView.prototype.loadContentView = function() {
        return this.contentLoaded || (this.contentView = this._getContentViewInstance(),
        this.contentView && (this.contentView.init(),
        this.addSubview(this.contentView, this.__tileContent),
        this.layoutSubviews()),
        this.contentLoaded = !0),
        this.contentView
    }
    ,
    UTTileView.prototype.getContentView = function() {
        return this.contentView || this.loadContentView(),
        this.contentView
    }
    ,
    UTTileView.prototype.getTileContent = function() {
        return this.__tileContent
    }
    ,
    UTTileView.prototype.show = function() {
        this.setDisplay(!0)
    }
    ,
    UTTileView.prototype.hide = function() {
        this.setDisplay(!1)
    }
    ,
    UTTileView.prototype.enable = function() {
        this.setInteractionState(!0)
    }
    ,
    UTTileView.prototype.disable = function() {
        this.setInteractionState(!1)
    }
    ,
    UTTileView.prototype.setEnabled = function(e) {
        this.setInteractionState(e)
    }
    ,
    UTTileView.prototype.getTitle = function() {
        return this.title
    }
    ,
    UTTileView.prototype.setTitle = function(e) {
        this.title = e
    }
    ,
    UTTileView.prototype.getDimOverlay = function() {
        return this.dimOverlay || (this.dimOverlay = new UTTileDimOverlayView,
        this.dimOverlay.init()),
        this.dimOverlay
    }
    ,
    UTTileView.prototype.setContent = function(e) {
        var t = this;
        DOMKit.empty(this.__tileContent);
        function AJb(e) {
            e instanceof HTMLElement ? t.__tileContent.appendChild(e) : e instanceof EAView ? t.__tileContent.appendChild(e.getRootElement()) : t.__tileContent.textContent = e.toString()
        }
        Array.isArray(e) ? e.forEach(AJb, this) : e && AJb.call(this, e)
    }
    ,
    UTTileView.prototype.appendContent = function(e) {
        var t = this;
        JSUtils.valToArray(e).forEach(function(e) {
            return t.__tileContent.appendChild(e)
        })
    }
    ,
    UTTileView.prototype.removeContent = function() {
        DOMKit.empty(this.__tileContent)
    }
    ,
    UTTileView.prototype.setDimOverlayText = function(e) {
        this.getDimOverlay().setText(e)
    }
    ,
    UTTileView.prototype.setDimOverlayContent = function(e) {
        this.setDimOverlayText(e)
    }
    ,
    UTTileView.prototype.setDimmed = function(e) {
        var t = this.getDimOverlay();
        e ? this.addSubview(t) : t.removeFromSuperview(),
        this.layoutSubviews()
    }
    ,
    UTTileView.prototype.setDimOverlayType = function(e) {
        this.getDimOverlay().setType(e)
    }
    ,
    UTTileView.prototype.showLoadingState = function() {
        var e = this.getContentView();
        this.setInteractionState(!1),
        e && e.setVisibility(!1),
        this.addClass(UTTileView.Style.LOADING)
    }
    ,
    UTTileView.prototype.hideLoadingState = function() {
        var e = this.getContentView();
        e && e.setVisibility(!0),
        this.removeClass(UTTileView.Style.LOADING),
        this.setInteractionState(!0)
    }
    ,
    UTTileView.prototype._mouseLeave = function(e) {
        this.removeClass([enums.UIState.ACTIVE, enums.UIState.HOVER].join(" "))
    }
    ,
    UTTileView.prototype._mouseEnter = function(e) {
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTTileView.prototype._touchStarted = function(e) {
        i.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTTileView.prototype._touchMoved = function(e) {
        i.prototype._touchMoved.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTTileView.prototype._touchEnded = function(e) {
        i.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTTileView.prototype._touchCancelled = function(e) {
        i.prototype._touchCancelled.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTTileView.prototype._tapDetected = function(e) {
        var t = this;
        i.prototype._tapDetected.call(this, e),
        this.hasClass(enums.UIState.ACTIVE) ? this.removeClass(enums.UIState.ACTIVE) : (this.addClass(enums.UIState.ACTIVE),
        this.highlightTimeout = window.setTimeout(function() {
            return t.removeClass(enums.UIState.ACTIVE)
        }, 100)),
        this.hasClass(enums.UIState.HOVER) && this.removeClass(enums.UIState.HOVER),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTTileView.Style = Object.freeze({
        LOADING: "loading",
        LOADING_IMAGES: "loading-images"
    }),
    UTTileView
}(EATargetActionView);
UTTileView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("tile");
        var t = document.createElement("div");
        t.classList.add("loadingSpinner"),
        e.appendChild(t);
        var i = document.createElement("header");
        this.__tileTitle = document.createElement("h1"),
        this.__tileTitle.classList.add("tileHeader"),
        i.appendChild(this.__tileTitle),
        e.appendChild(i),
        this.__tileContent = document.createElement("div"),
        this.__tileContent.classList.add("tileContent"),
        e.appendChild(this.__tileContent),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTileView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tileTitle = null,
    this.__tileContent = null
}
,
UTTileView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTLabelView = function(e) {
    function UTLabelView() {
        return e.call(this) || this
    }
    return __extends(UTLabelView, e),
    UTLabelView.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    UTLabelView.prototype.setRoundedCorner = function(e) {
        this.removeClass(JSUtils.getObjectValues(UTLabelView.Rounded).join(" ")),
        this.addClass(e)
    }
    ,
    UTLabelView.prototype.setStyle = function(e) {
        this.removeClass(JSUtils.getObjectValues(UTLabelView.Style).join(" ")),
        this.addClass(e)
    }
    ,
    UTLabelView.Rounded = {
        BOTTOM_LEFT: "rounded-bottom-left",
        BOTTOM_RIGHT: "rounded-bottom-right",
        TOP_LEFT: "rounded-top-left",
        TOP_RIGHT: "rounded-top-right",
        ROUND: "round"
    },
    UTLabelView.Style = {
        ACTIVE: "active",
        HIGHLIGHT: "highlight",
        LIGHT: "light",
        DISABLED: "disabled",
        NONE: ""
    },
    UTLabelView
}(EAView);
UTLabelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-label-view"),
        this.__label = document.createElement("span"),
        this.__label.classList.add("ut-label-view--label"),
        e.appendChild(this.__label),
        this.__root = e,
        this._generated = !0
    }
}
,
UTLabelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null
}
,
UTLabelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTConsumablesHubView = function(t) {
    function UTConsumablesHubView() {
        return t.call(this) || this
    }
    return __extends(UTConsumablesHubView, t),
    UTConsumablesHubView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this._healingTile.init(),
        this._healingTile.title = e.localize("club.category.healing"),
        this._managerLeagueTile.init(),
        this._managerLeagueTile.title = e.localize("card.title.leagueModifier"),
        this._chemistryTile.init(),
        this._chemistryTile.title = e.localize("trainingtype.playStyle")
    }
    ,
    UTConsumablesHubView.prototype.render = function(e) {
        function yKb(e, t) {
            var i = services.Localization
              , o = new UTLabelView;
            o.setRoundedCorner(UTLabelView.Rounded.TOP_RIGHT);
            var n = i.localize(1 === t ? "tile.label.itemCount" : "tile.label.itemsCount", [t.toString()]);
            o.setLabel(n),
            0 === t && (e.setInteractionState(!1),
            o.setStyle(UTLabelView.Style.DISABLED)),
            e.setContent(o)
        }
        services.Localization;
        yKb(this._healingTile, e.healing),
        yKb(this._managerLeagueTile, e.managerLeagueModifier),
        yKb(this._chemistryTile, e.playStyle)
    }
    ,
    UTConsumablesHubView.prototype.getHealingTile = function() {
        return this._healingTile
    }
    ,
    UTConsumablesHubView.prototype.getManagerLeagueTile = function() {
        return this._managerLeagueTile
    }
    ,
    UTConsumablesHubView.prototype.getChemistryStyleTile = function() {
        return this._chemistryTile
    }
    ,
    UTConsumablesHubView
}(EAView);
UTConsumablesHubView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div")
          , t = document.createElement("div");
        t.classList.add("grid"),
        t.classList.add("layout-hub"),
        this._healingTile = new UTTileView,
        this._healingTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._healingTile.getRootElement().classList.add("col-1-2"),
        this._healingTile.getRootElement().classList.add("healing-tile"),
        this._healingTile.getRootElement().classList.add("consumable-tile"),
        t.appendChild(this._healingTile.getRootElement()),
        this._chemistryTile = new UTTileView,
        this._chemistryTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._chemistryTile.getRootElement().classList.add("col-1-2"),
        this._chemistryTile.getRootElement().classList.add("chemistry-tile"),
        this._chemistryTile.getRootElement().classList.add("consumable-tile"),
        t.appendChild(this._chemistryTile.getRootElement()),
        this._managerLeagueTile = new UTTileView,
        this._managerLeagueTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._managerLeagueTile.getRootElement().classList.add("col-1-2"),
        this._managerLeagueTile.getRootElement().classList.add("managerLeague-tile"),
        this._managerLeagueTile.getRootElement().classList.add("consumable-tile"),
        t.appendChild(this._managerLeagueTile.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTConsumablesHubView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._healingTile.destroy(),
    this._chemistryTile.destroy(),
    this._managerLeagueTile.destroy()
}
,
UTConsumablesHubView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTConsumablesHubViewController = function(t) {
    function UTConsumablesHubViewController() {
        var e = t.call(this) || this;
        return e.viewmodel = null,
        e
    }
    return __extends(UTConsumablesHubViewController, t),
    UTConsumablesHubViewController.prototype.init = function() {
        this.initialized || (t.prototype.init.call(this),
        this.viewmodel || (this.viewmodel = new UTConsumableCategoriesViewModel([])))
    }
    ,
    UTConsumablesHubViewController.prototype.initWithConsumableCategories = function(e) {
        this.viewmodel = e,
        this.init()
    }
    ,
    UTConsumablesHubViewController.prototype.dealloc = function() {
        t.prototype.dealloc.call(this),
        this.viewmodel = null
    }
    ,
    UTConsumablesHubViewController.prototype._getViewInstanceFromData = function() {
        return new UTConsumablesHubView
    }
    ,
    UTConsumablesHubViewController.prototype._getTelemetryId = function() {
        return "Club - Consumables"
    }
    ,
    UTConsumablesHubViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.clubconsumables")
    }
    ,
    UTConsumablesHubViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        this.viewmodel && this.getView().render(this.viewmodel.getTotals());
        var e = this.getView();
        e.getHealingTile().addTarget(this, this._eHealingTileSelected, EventType.TAP),
        e.getManagerLeagueTile().addTarget(this, this._eManagerLeagueTileSelected, EventType.TAP),
        e.getChemistryStyleTile().addTarget(this, this._eChemistryStyleTileSelected, EventType.TAP),
        TelemetryManager.trackPage(TelemetryManager.Sections.CLUB, "Club Consumables Hub")
    }
    ,
    UTConsumablesHubViewController.prototype.viewWillDisappear = function() {
        t.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.getHealingTile().removeTarget(this, this._eHealingTileSelected, EventType.TAP),
        e.getManagerLeagueTile().removeTarget(this, this._eManagerLeagueTileSelected, EventType.TAP),
        e.getChemistryStyleTile().removeTarget(this, this._eChemistryStyleTileSelected, EventType.TAP)
    }
    ,
    UTConsumablesHubViewController.prototype._goToSection = function(e) {
        var t = this.getNavigationController();
        if (t) {
            var i = isPhone() ? new UTClubSearchResultsViewController : new controllers.club.ClubSearchResultsLandscape
              , o = new UTSearchCriteriaDTO;
            o.category = e,
            i.initWithSearchCriteria(o),
            t.pushViewController(i)
        }
    }
    ,
    UTConsumablesHubViewController.prototype._eHealingTileSelected = function(e, t, i) {
        this._goToSection(SearchCategory.HEALING)
    }
    ,
    UTConsumablesHubViewController.prototype._eManagerLeagueTileSelected = function(e, t, i) {
        this._goToSection(SearchCategory.MANAGER_LEAGUE)
    }
    ,
    UTConsumablesHubViewController.prototype._eChemistryStyleTileSelected = function(e, t, i) {
        this._goToSection(SearchCategory.PLAYSTYLE)
    }
    ,
    UTConsumablesHubViewController
}(EAViewController)
  , UTDiscardedItemsViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTDiscardedItemsViewModel(e) {
        var t = i.call(this) || this;
        return t.itemServiceObject = e,
        t.paginationList = null,
        t.hasMore = !1,
        t
    }
    return __extends(UTDiscardedItemsViewModel, i),
    UTDiscardedItemsViewModel.prototype.init = function() {
        i.prototype.init.call(this),
        this.paginationList = new UTPaginatedItemListViewModel([],this.getNumItemsPerPage())
    }
    ,
    UTDiscardedItemsViewModel.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.hasMore = !1,
        this.paginationList = null
    }
    ,
    UTDiscardedItemsViewModel.prototype.getIterator = function() {
        return this.paginationList
    }
    ,
    UTDiscardedItemsViewModel.prototype.setItems = function(e) {
        this.paginationList && (this.paginationList.resetCollection(e),
        this.paginationList.isFull = !this.hasMore)
    }
    ,
    UTDiscardedItemsViewModel.prototype.getIndexByItemId = function(t) {
        var e, i;
        return null !== (i = null === (e = this.paginationList) || void 0 === e ? void 0 : e.indexOf(function(e) {
            return e.id === t
        })) && void 0 !== i ? i : -1
    }
    ,
    UTDiscardedItemsViewModel.prototype.getCurrentPageItems = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.getPageItems()) && void 0 !== t ? t : []
    }
    ,
    UTDiscardedItemsViewModel.prototype.getCurrentItem = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.current()) && void 0 !== t ? t : null
    }
    ,
    UTDiscardedItemsViewModel.prototype.getItemCount = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.length) && void 0 !== t ? t : 0
    }
    ,
    UTDiscardedItemsViewModel.prototype.hasPreviousPage = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.hasPreviousPage()) && void 0 !== t && t
    }
    ,
    UTDiscardedItemsViewModel.prototype.hasNextPage = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.hasNextPage()) && void 0 !== t && t
    }
    ,
    UTDiscardedItemsViewModel.prototype.previousPage = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.previousPage()) && void 0 !== t ? t : []
    }
    ,
    UTDiscardedItemsViewModel.prototype.nextPage = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.nextPage()) && void 0 !== t ? t : []
    }
    ,
    UTDiscardedItemsViewModel.prototype.setIndex = function(e) {
        var t;
        null === (t = this.paginationList) || void 0 === t || t.setIndex(e)
    }
    ,
    UTDiscardedItemsViewModel.prototype.getIndex = function() {
        var e, t;
        return null !== (t = null === (e = this.paginationList) || void 0 === e ? void 0 : e.getIndex()) && void 0 !== t ? t : 0
    }
    ,
    UTDiscardedItemsViewModel.prototype.getRestoreCount = function() {
        return this.itemServiceObject.getDiscardRestoresLeft()
    }
    ,
    UTDiscardedItemsViewModel.prototype.getDiscardEndTimestamp = function() {
        return this.itemServiceObject.getDiscardEndTimestamp()
    }
    ,
    UTDiscardedItemsViewModel.prototype.requestDiscardedData = function(e, s) {
        var a = this
          , t = s ? this.itemServiceObject.getDiscardedItems(e, s) : this.itemServiceObject.getDiscardedItems(e);
        this._trackRequest(t, !0);
        return t.observe(this, function(e, t) {
            var i, o, n;
            if (e.unobserve(a),
            JSUtils.isObject(t.response)) {
                var r = null !== (o = null === (i = a.paginationList) || void 0 === i ? void 0 : i.getIndex()) && void 0 !== o ? o : 0;
                a.hasMore = t.response.hasMore,
                a.setItems(t.response.items.sort(a.sortByDiscardedDate.bind(a))),
                s ? (null === (n = a.paginationList) || void 0 === n || n.setIndex(r),
                t.response.items = a.nextPage()) : t.response.items = a.getCurrentPageItems()
            }
        }),
        t
    }
    ,
    UTDiscardedItemsViewModel.prototype.getNumItemsPerPage = function() {
        var e = services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.DISCARD_RETRIEVAL_LIMIT);
        return JSUtils.isValid(e) ? e - 1 : 14
    }
    ,
    UTDiscardedItemsViewModel.prototype.sortByDiscardedDate = function(e, t) {
        return e.discardDate === t.discardDate ? JSUtils.sortCompare(e.continuationId, t.continuationId) : JSUtils.sortCompare(e.discardDate, t.discardDate)
    }
    ,
    UTDiscardedItemsViewModel.prototype.shouldRequestItems = function() {
        return this.paginationList && !this.paginationList.isFull && this.paginationList.length <= this.paginationList.numItemsPerPage * this.paginationList.getCurrentPage() || this.hasMore
    }
    ,
    UTDiscardedItemsViewModel
}(UTViewModel))
  , UTUndoDiscardStatusBarView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTUndoDiscardStatusBarView() {
        var e = i.call(this) || this;
        return e.displayFilter = !1,
        e
    }
    return __extends(UTUndoDiscardStatusBarView, i),
    UTUndoDiscardStatusBarView.prototype.init = function() {
        i.prototype.init.call(this);
        var e = services.Localization;
        DOMKit.toggleDisplayStyle(this.__filterContainer, this.displayFilter),
        this._infoButton.init(),
        this._infoButton.addTarget(this, this._bubbleInfoEvent, EventType.TAP),
        this._infoButton.setInteractionState(!0),
        this._filterButton.init(),
        this._filterButton.addTarget(this, this.toggleFilterDisplay, EventType.TAP),
        this._filterButton.setInteractionState(!0),
        this.setLabel(e.localize("undoDiscard.label.dateFilter")),
        this.setButtonLabel(e.localize("undoDiscard.button.search")),
        this._search.init(),
        this._search.addTarget(this, this._bubbleSearchEvent, EventType.TAP),
        this._search.setInteractionState(!1);
        var t = factories.DataProvider.getUndoDiscardDateFilterDP();
        t && (this._dateDropDown.init(),
        this._dateDropDown.addTarget(this, this._eDropDownControlChange, EventType.CHANGE),
        this._dateDropDown.setOptions(t),
        this._dateDropDown.setDefaultIndexByValue("0", !0),
        this._dateDropDown.setInteractionState(!0)),
        this.setInteractionState(!0)
    }
    ,
    UTUndoDiscardStatusBarView.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    UTUndoDiscardStatusBarView.prototype.setButtonLabel = function(e) {
        this._search.setText(e)
    }
    ,
    UTUndoDiscardStatusBarView.prototype.setRestoresLabel = function(e) {
        this.__restoresRemainingLabel.textContent = e
    }
    ,
    UTUndoDiscardStatusBarView.prototype.setRestoresValue = function(e) {
        this.__restoresRemainingValue.textContent = e
    }
    ,
    UTUndoDiscardStatusBarView.prototype.setReplenishValue = function(e) {
        this.__replenishTimeRemainingValue.textContent = e
    }
    ,
    UTUndoDiscardStatusBarView.prototype.toggleFilterDisplay = function(e, t, i) {
        this.displayFilter = !this.displayFilter,
        DOMKit.toggleDisplayStyle(this.__filterContainer, this.displayFilter)
    }
    ,
    UTUndoDiscardStatusBarView.prototype._eDropDownControlChange = function(e, t, i) {
        this.isInteractionEnabled() && (this._search.setInteractionState(!0),
        this._triggerActions(UTUndoDiscardStatusBarView.Event.DROP_DOWN_CHANGED, {
            id: i.id,
            value: i.value
        }))
    }
    ,
    UTUndoDiscardStatusBarView.prototype._bubbleInfoEvent = function(e, t, i) {
        this._triggerActions(UTUndoDiscardStatusBarView.Event.INFO)
    }
    ,
    UTUndoDiscardStatusBarView.prototype._bubbleSearchEvent = function(e, t, i) {
        this._search.setInteractionState(!1),
        this._triggerActions(UTUndoDiscardStatusBarView.Event.SEARCH)
    }
    ,
    UTUndoDiscardStatusBarView.Event = Object.freeze({
        INFO: "UTUndoDiscardStatusBarView.Event.INFO",
        DROP_DOWN_CHANGED: "UTUndoDiscardStatusBarView.Event.DROP_DOWN_CHANGED",
        SEARCH: "UTUndoDiscardStatusBarView.Event.SEARCH"
    }),
    UTUndoDiscardStatusBarView
}(EATargetActionView));
UTUndoDiscardStatusBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-undodiscard-status-bar");
        var t = document.createElement("div");
        t.classList.add("ut-undodiscard-status-bar--filter-button"),
        this._filterButton = new UTImageButtonControl,
        t.appendChild(this._filterButton.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-undodiscard-status-bar--restore"),
        this.__restoresRemainingLabel = document.createElement("span"),
        this.__restoresRemainingLabel.classList.add("label"),
        i.appendChild(this.__restoresRemainingLabel),
        this.__restoresRemainingValue = document.createElement("span"),
        this.__restoresRemainingValue.classList.add("value"),
        i.appendChild(this.__restoresRemainingValue),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-undodiscard-status-bar--replenish"),
        this.__replenishTimeRemainingLabel = document.createElement("span"),
        this.__replenishTimeRemainingLabel.classList.add("label"),
        o.appendChild(this.__replenishTimeRemainingLabel),
        this.__replenishTimeRemainingValue = document.createElement("span"),
        this.__replenishTimeRemainingValue.classList.add("value"),
        o.appendChild(this.__replenishTimeRemainingValue),
        e.appendChild(o);
        var n = document.createElement("div");
        n.classList.add("ut-undodiscard-status-bar--info-button"),
        this._infoButton = new UTImageButtonControl,
        this._infoButton.getRootElement().classList.add("info-btn"),
        n.appendChild(this._infoButton.getRootElement()),
        e.appendChild(n),
        this.__filterContainer = document.createElement("div"),
        this.__filterContainer.classList.add("ut-undodiscard-status-bar--filter-container"),
        this.__label = document.createElement("span"),
        this.__label.classList.add("label"),
        this.__filterContainer.appendChild(this.__label);
        var r = document.createElement("div");
        r.classList.add("ut-undodiscard-status-bar--filter-group"),
        this.__filterInput = document.createElement("div"),
        this._dateDropDown = new UTDropDownControl,
        this.__filterInput.appendChild(this._dateDropDown.getRootElement()),
        r.appendChild(this.__filterInput),
        this._search = new UTStandardButtonControl,
        this._search.getRootElement().classList.add("disabled"),
        this._search.getRootElement().classList.add("call-to-action"),
        this._search.getRootElement().classList.add("ut-search-filter-control--row-button"),
        r.appendChild(this._search.getRootElement()),
        this.__filterContainer.appendChild(r),
        e.appendChild(this.__filterContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTUndoDiscardStatusBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._filterButton.destroy(),
    this.__restoresRemainingLabel = null,
    this.__restoresRemainingValue = null,
    this.__replenishTimeRemainingLabel = null,
    this.__replenishTimeRemainingValue = null,
    this._infoButton.destroy(),
    this.__filterContainer = null,
    this.__label = null,
    this.__filterInput = null,
    this._dateDropDown.destroy(),
    this._search.destroy()
}
,
UTUndoDiscardStatusBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTUndoDiscardView = function(e) {
    function UTUndoDiscardView() {
        return e.call(this) || this
    }
    return __extends(UTUndoDiscardView, e),
    UTUndoDiscardView.prototype.init = function() {
        e.prototype.init.call(this),
        this._list.init(),
        this._list.addTarget(this, this.bubbleEvent, enums.UIListEvent.ROW_SELECT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.NEXT),
        this._list.addTarget(this, this.bubbleEvent, enums.UIPaginationEvent.PREVIOUS),
        this._statusBar.init(),
        this._statusBar.addTarget(this, this.bubbleEvent, UTUndoDiscardStatusBarView.Event.INFO),
        this._statusBar.addTarget(this, this.bubbleEvent, UTUndoDiscardStatusBarView.Event.DROP_DOWN_CHANGED),
        this._statusBar.addTarget(this, this.bubbleEvent, UTUndoDiscardStatusBarView.Event.SEARCH),
        this._statusBar.setRestoresLabel(services.Localization.localize("undoDiscard.label.restoresRemaining")),
        this.setInteractionState(!0)
    }
    ,
    UTUndoDiscardView.prototype.setItems = function(e) {
        0 < e.length ? (this._list.setItems(e),
        this._list.renderItems(),
        this._list.setRowTapCallback()) : this.setEmptyListMessage()
    }
    ,
    UTUndoDiscardView.prototype.setRestoreValue = function(e) {
        this._statusBar.setRestoresValue(e.toString())
    }
    ,
    UTUndoDiscardView.prototype.setCountdownValue = function(e) {
        this._statusBar.setReplenishValue(e)
    }
    ,
    UTUndoDiscardView.prototype.removeItemsById = function(e) {
        this._list.removeItemsById(e)
    }
    ,
    UTUndoDiscardView.prototype.setEmptyListMessage = function() {
        this._list.appendEmptyListMessage(services.Localization.localize("undoDiscard.emptyListMessage"), services.Localization.localize("undoDiscard.emptyListDescription"))
    }
    ,
    UTUndoDiscardView.prototype.setRowTapCallback = function(e) {
        this._list.setRowTapCallback(e)
    }
    ,
    UTUndoDiscardView.prototype.setPaginationState = function(e, t) {
        this._list.setPaginationState(e, t)
    }
    ,
    UTUndoDiscardView.prototype.selectListRow = function(e) {
        this._list.selectRow(e)
    }
    ,
    UTUndoDiscardView.prototype.bubbleEvent = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(t, i)
    }
    ,
    UTUndoDiscardView.Event = Object.freeze({
        RECOVER: "UTUndoDiscardView.Event.RECOVER"
    }),
    UTUndoDiscardView
}(EATargetActionView);
UTUndoDiscardView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-pinned-list-container"),
        this._statusBar = new UTUndoDiscardStatusBarView,
        e.appendChild(this._statusBar.getRootElement()),
        this._list = new UTPaginatedItemListView,
        this._list.getRootElement().classList.add("ut-pinned-list"),
        e.appendChild(this._list.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTUndoDiscardView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._statusBar.destroy(),
    this._list.destroy()
}
,
UTUndoDiscardView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTUndoDiscardViewController = function(i) {
    function UTUndoDiscardViewController() {
        var e = i.call(this) || this;
        return e.itemListViewDelegate = null,
        e.viewmodel = null,
        e.intervalController = new EAIntervalController(1e4,e.handleEventTimer.bind(e)),
        e.onDataChange = new EAObservable,
        e.selectedStateDate = 0,
        e
    }
    return __extends(UTUndoDiscardViewController, i),
    UTUndoDiscardViewController.prototype.init = function() {
        if (!this.initialized) {
            i.prototype.init.call(this),
            this.viewmodel || (this.viewmodel = new UTDiscardedItemsViewModel(services.Item)),
            this.viewmodel.init();
            var e = new Date;
            e.setDate(e.getDate()),
            e.setHours(23, 59, 59),
            this.selectedStateDate = e.getTime()
        }
    }
    ,
    UTUndoDiscardViewController.prototype.initWithViewmodel = function(e) {
        this.initialized || (this.viewmodel = e,
        this.init())
    }
    ,
    UTUndoDiscardViewController.prototype.dealloc = function() {
        this.itemListViewDelegate && (this.itemListViewDelegate = null),
        this.viewmodel && (this.viewmodel.dealloc(),
        this.viewmodel = null),
        this.intervalController && this.intervalController.dealloc(),
        this.selectedStateDate = 0,
        this.onDataChange.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTUndoDiscardViewController.prototype._getViewInstanceFromData = function() {
        return new UTUndoDiscardView
    }
    ,
    UTUndoDiscardViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.undoDiscard")
    }
    ,
    UTUndoDiscardViewController.prototype.viewDidAppear = function() {
        var e;
        i.prototype.viewDidAppear.call(this),
        null === (e = this.getNavigationController()) || void 0 === e || e.setNavigationVisibility(!0, !0);
        var t = this.getView();
        t.addTarget(this, this.eRowSelected, enums.UIListEvent.ROW_SELECT),
        t.addTarget(this, this.eNextPage, enums.UIPaginationEvent.NEXT),
        t.addTarget(this, this.ePrevPage, enums.UIPaginationEvent.PREVIOUS),
        t.addTarget(this, this.eOpenInfoPopup, UTUndoDiscardStatusBarView.Event.INFO),
        t.addTarget(this, this.eDateChange, UTUndoDiscardStatusBarView.Event.DROP_DOWN_CHANGED),
        t.addTarget(this, this.eSearchDate, UTUndoDiscardStatusBarView.Event.SEARCH),
        this.requestItems(!1)
    }
    ,
    UTUndoDiscardViewController.prototype.viewWillDisappear = function() {
        i.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.eRowSelected, enums.UIListEvent.ROW_SELECT),
        e.removeTarget(this, this.eNextPage, enums.UIPaginationEvent.NEXT),
        e.removeTarget(this, this.ePrevPage, enums.UIPaginationEvent.PREVIOUS),
        e.removeTarget(this, this.eOpenInfoPopup, UTUndoDiscardStatusBarView.Event.INFO),
        e.removeTarget(this, this.eDateChange, UTUndoDiscardStatusBarView.Event.DROP_DOWN_CHANGED),
        e.removeTarget(this, this.eSearchDate, UTUndoDiscardStatusBarView.Event.SEARCH),
        this.intervalController.stop()
    }
    ,
    UTUndoDiscardViewController.prototype.setItemListViewDelegate = function(e) {
        this.itemListViewDelegate = e
    }
    ,
    UTUndoDiscardViewController.prototype.getIterator = function() {
        var e, t;
        return null !== (t = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.getIterator()) && void 0 !== t ? t : null
    }
    ,
    UTUndoDiscardViewController.prototype.getCurrentPageItems = function() {
        var e, t;
        return null !== (t = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.getCurrentPageItems()) && void 0 !== t ? t : []
    }
    ,
    UTUndoDiscardViewController.prototype.removeItemsById = function(e) {
        var t, i;
        if (this.viewmodel) {
            var o = this.getView();
            if (o.removeItemsById(e),
            0 < this.viewmodel.getItemCount()) {
                var n = null === (t = this.viewmodel.getCurrentItem()) || void 0 === t ? void 0 : t.id;
                o.selectListRow(null !== (i = Number(n)) && void 0 !== i ? i : 0)
            } else
                o.setItems(this.viewmodel.getCurrentPageItems())
        }
    }
    ,
    UTUndoDiscardViewController.prototype.updateRestoresLeftCount = function() {
        var e, t;
        this.getView().setRestoreValue(null !== (t = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.getRestoreCount()) && void 0 !== t ? t : 0)
    }
    ,
    UTUndoDiscardViewController.prototype.requestItemsFailed = function() {
        var e;
        services.Notification.queue([services.Localization.localize("notification.undoDiscard.loadFailed"), UINotificationType.NEGATIVE]),
        null === (e = this.getNavigationController()) || void 0 === e || e.popViewController()
    }
    ,
    UTUndoDiscardViewController.prototype.requestItems = function(l, e) {
        function RNb(e, t) {
            var i;
            e.unobserve(c);
            var o = services.Localization;
            if (t.success && JSUtils.isObject(t.response) && c.isViewDisplayed()) {
                var n = c.getView()
                  , r = null === (i = t.response) || void 0 === i ? void 0 : i.items
                  , s = t.response.endTimestamp;
                c.setItems(r);
                var a = Math.max(s - Math.round(Date.now() / MS_PER_SECOND), 0);
                c.intervalController.start(),
                n.setCountdownValue(o.localizeTimeRemaining(a)),
                n.setRestoreValue(t.response.restoresLeft),
                l && 0 === r.length && services.Notification.queue([o.localize("notification.undoDiscard.zeroResultsForPeriod"), UINotificationType.NEUTRAL]),
                c.triggerTelemetryPage()
            } else
                c.requestItemsFailed()
        }
        var t, i, c = this;
        services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.UNDO_DISCARD_ENABLED) ? e ? null === (t = this.viewmodel) || void 0 === t || t.requestDiscardedData(this.selectedStateDate, e).observe(this, RNb) : null === (i = this.viewmodel) || void 0 === i || i.requestDiscardedData(this.selectedStateDate).observe(this, RNb) : this.requestItemsFailed()
    }
    ,
    UTUndoDiscardViewController.prototype.setItems = function(e) {
        var t;
        if (this.viewmodel) {
            var i = this.getView();
            i.setItems(e),
            i.setPaginationState(this.viewmodel.hasPreviousPage(), this.viewmodel.hasNextPage() || (null === (t = this.viewmodel) || void 0 === t ? void 0 : t.hasMore)),
            this.itemListViewDelegate && 0 < e.length && this.itemListViewDelegate.selectListRow(this, 0, e[0]),
            this.onDataChange.notify({
                items: e
            })
        }
    }
    ,
    UTUndoDiscardViewController.prototype.handleEventTimer = function() {
        if (this.viewmodel) {
            var e = services.Localization
              , t = this.getView()
              , i = this.viewmodel.getDiscardEndTimestamp() - Math.round(Date.now() / MS_PER_SECOND);
            0 < i ? t.setCountdownValue(e.localizeTimeRemaining(i)) : (this.intervalController.stop(),
            t.setCountdownValue(e.localizeTimeRemaining(0)),
            this.requestItems(!1))
        }
    }
    ,
    UTUndoDiscardViewController.prototype.ePrevPage = function(e, t, i) {
        var o, n;
        this.setItems(null !== (n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.previousPage()) && void 0 !== n ? n : [])
    }
    ,
    UTUndoDiscardViewController.prototype.eNextPage = function(e, t, i) {
        var o, n;
        if (this.viewmodel && (this.viewmodel.hasNextPage() || this.viewmodel.hasMore)) {
            var r = null !== (n = null === (o = this.viewmodel.getIterator()) || void 0 === o ? void 0 : o.values()) && void 0 !== n ? n : [];
            this.viewmodel.shouldRequestItems() ? this.requestItems(!0, r[r.length - 1].continuationId) : this.setItems(this.viewmodel.nextPage())
        }
    }
    ,
    UTUndoDiscardViewController.prototype.eRowSelected = function(e, t, i) {
        var o;
        if (this.viewmodel) {
            var n = i.item
              , r = Number(n.id)
              , s = JSUtils.isValid(n) ? this.viewmodel.getIndexByItemId(r) : 0;
            if (n) {
                var a = s !== this.viewmodel.getIndex();
                if (a && this.viewmodel.setIndex(s),
                JSUtils.isValid(this.itemListViewDelegate))
                    a && (null === (o = this.itemListViewDelegate) || void 0 === o || o.selectListRow(this, s, n));
                else {
                    var l = this.getNavigationController();
                    if (l) {
                        var c = new UTItemDetailsViewController
                          , u = this.viewmodel.getIterator();
                        u && c.initWithIterator(u),
                        l.pushViewController(c, !0)
                    }
                }
            }
        }
    }
    ,
    UTUndoDiscardViewController.prototype.triggerTelemetryPage = function() {
        var e = "Undo Discard Hub";
        services.PIN.sendData(PINEventType.PAGE_VIEW, {
            type: PIN_PAGEVIEW_EVT_TYPE,
            pgid: e
        }),
        TelemetryManager.trackPage(TelemetryManager.Sections.MISC, e)
    }
    ,
    UTUndoDiscardViewController.prototype.eOpenInfoPopup = function(e, t, i) {
        if (this.viewmodel) {
            var o = services.Localization
              , n = new EADialogViewController({
                dialogOptions: [{
                    labelEnum: enums.UIDialogOptions.OK
                }],
                message: o.localize("undoDiscard.popup.message", [this.viewmodel.getRestoreCount().toString(), UTUndoDiscardViewController.RENEWAL_PERIOD.DAYS.toString(), UTUndoDiscardViewController.RENEWAL_PERIOD.HOURS.toString(), UTUndoDiscardViewController.RENEWAL_PERIOD.MINUTES.toString()]),
                title: o.localize("undoDiscard.popup.title"),
                type: EADialogView.Type.MESSAGE
            });
            n.modalDisplayDimensions.width = "380px",
            n.init(),
            n.viewWillAppear(),
            gPopupClickShield.setActivePopup(n)
        }
    }
    ,
    UTUndoDiscardViewController.prototype.eDateChange = function(e, t, i) {
        var o = Number(i.value);
        isNaN(o) ? DebugUtils.Assert(!1, "Expected a valid number value after conversion") : this.selectedStateDate = o
    }
    ,
    UTUndoDiscardViewController.prototype.eSearchDate = function(e, t, i) {
        0 < this.selectedStateDate && this.requestItems(!0)
    }
    ,
    UTUndoDiscardViewController.RENEWAL_PERIOD = {
        DAYS: 30,
        HOURS: 23,
        MINUTES: 59
    },
    UTUndoDiscardViewController
}(EAViewController)
  , UTUndoDiscardSplitViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTUndoDiscardSplitViewController() {
        var e = t.call(this) || this;
        return e.listViewController = new UTUndoDiscardViewController,
        e.itemDetailController = new UTItemDetailsNavigationController,
        e
    }
    return __extends(UTUndoDiscardSplitViewController, t),
    UTUndoDiscardSplitViewController.prototype.init = function() {
        if (!this.initialized) {
            t.prototype.init.call(this),
            this.listViewController.init(),
            this.listViewController.setItemListViewDelegate(this),
            this.listViewController.onDataChange.observe(this, this._eListDataChanged);
            var e = this.listViewController.getIterator();
            e && this.itemDetailController.initWithIterator(e),
            this.itemDetailController.enableSwiping(!1),
            this.addChildViewController(this.listViewController),
            this.addChildViewController(this.itemDetailController)
        }
    }
    ,
    UTUndoDiscardSplitViewController.prototype.dealloc = function() {
        this.itemDetailController.dealloc(),
        this.listViewController.dealloc(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTUndoDiscardSplitViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.undoDiscard")
    }
    ,
    UTUndoDiscardSplitViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        this.setLeftController(this.listViewController),
        this.itemDetailController.setNavigationStyle(UTNavigationBarView.Style.SECONDARY),
        getDefaultDispatcher().addObserver(AppNotification.ITEM_UNDO_DISCARD, this, this.nItemUndiscarded)
    }
    ,
    UTUndoDiscardSplitViewController.prototype.viewWillDisappear = function() {
        t.prototype.viewWillDisappear.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.ITEM_UNDO_DISCARD, this)
    }
    ,
    UTUndoDiscardSplitViewController.prototype.selectListRow = function(e, t, i) {
        e === this.listViewController && JSUtils.isNumber(i.id) && (this.listViewController.getView().selectListRow(i.id),
        this.itemDetailController.setIndex(t))
    }
    ,
    UTUndoDiscardSplitViewController.prototype._eListDataChanged = function(e, t) {
        var i, o;
        t.items && (0 < t.items.length ? (this.setRightController(this.itemDetailController),
        this.itemDetailController.setIndex(null !== (o = null === (i = this.listViewController.getIterator()) || void 0 === i ? void 0 : i.getIndex()) && void 0 !== o ? o : 0)) : this.removeRightController())
    }
    ,
    UTUndoDiscardSplitViewController.prototype.nItemUndiscarded = function(e, t, i) {
        this.listViewController.removeItemsById(i.itemIds || []),
        this.listViewController.updateRestoresLeftCount(),
        this.listViewController.getCurrentPageItems().length || (this.removeRightController(),
        this.listViewController.getView().setEmptyListMessage())
    }
    ,
    UTUndoDiscardSplitViewController
}(UTSplitViewController))
  , UTLeaderboardsTileView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTLeaderboardsTileView() {
        return e.call(this) || this
    }
    return __extends(UTLeaderboardsTileView, e),
    UTLeaderboardsTileView.prototype.init = function() {
        e.prototype.init.call(this),
        this.title = services.Localization.localize("leaderboards.tile.title")
    }
    ,
    UTLeaderboardsTileView.prototype.setBadge = function(e) {
        this._badge.src = AssetLocationUtils.getBadgeImageUri(e, enums.UIThemeVariation.DARK)
    }
    ,
    UTLeaderboardsTileView.prototype.setName = function(e) {
        this.__label.textContent = e
    }
    ,
    UTLeaderboardsTileView
}(UTTileView));
UTLeaderboardsTileView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-leaderboards-tile-view"),
        e.classList.add("tile");
        var t = document.createElement("div");
        t.classList.add("loadingSpinner"),
        e.appendChild(t);
        var i = document.createElement("header");
        this.__tileTitle = document.createElement("h1"),
        this.__tileTitle.classList.add("tileHeader"),
        i.appendChild(this.__tileTitle),
        e.appendChild(i),
        this.__tileContent = document.createElement("div"),
        this.__tileContent.classList.add("tileContent"),
        this.__label = document.createElement("div"),
        this.__tileContent.appendChild(this.__label),
        this._badge = new EAImageView,
        this.__tileContent.appendChild(this._badge.getRootElement()),
        e.appendChild(this.__tileContent),
        this.__root = e,
        this._generated = !0
    }
}
,
UTLeaderboardsTileView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tileTitle = null,
    this.__tileContent = null,
    this.__label = null,
    this._badge.destroy()
}
,
UTLeaderboardsTileView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
NamespaceManager.Register("views.club");
var UTClubHubView = function(t) {
    function UTClubHubView() {
        return t.call(this) || this
    }
    return __extends(UTClubHubView, t),
    UTClubHubView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this._playersTile.init(),
        this._consumablesTile.init(),
        this._staffTile.init(),
        this._playersTile.title = e.localize("search.filters.players"),
        this._consumablesTile.title = e.localize("search.filters.consumables"),
        this._staffTile.title = e.localize("search.filters.staff"),
        this._undoDiscardTile.init(),
        this._undoDiscardTile.title = e.localize("navbar.label.undoDiscard"),
        this._leaderboardsTile.init(),
        this._customizeTile.init(),
        this._customizeTile.title = e.localize("navbar.label.customizeHub")
    }
    ,
    UTClubHubView.prototype.clearTileContent = function() {
        this._playersTile.setContent(null),
        this._consumablesTile.setContent(null),
        this._staffTile.setContent(null)
    }
    ,
    UTClubHubView.prototype.addTileStats = function(e, t) {
        var i = services.Localization
          , o = new UTLabelView;
        o.setRoundedCorner(UTLabelView.Rounded.TOP_RIGHT);
        var n = i.localize(1 === t ? "tile.label.itemCount" : "tile.label.itemsCount", [t.toString()]);
        o.setLabel(n),
        e.setContent(o)
    }
    ,
    UTClubHubView.prototype.getPlayersTile = function() {
        return this._playersTile
    }
    ,
    UTClubHubView.prototype.getConsumablesTile = function() {
        return this._consumablesTile
    }
    ,
    UTClubHubView.prototype.getStaffTile = function() {
        return this._staffTile
    }
    ,
    UTClubHubView.prototype.getUndoDiscardTile = function() {
        return this._undoDiscardTile
    }
    ,
    UTClubHubView.prototype.getLeaderboardsTile = function() {
        return this._leaderboardsTile
    }
    ,
    UTClubHubView.prototype.getCustomizeTile = function() {
        return this._customizeTile
    }
    ,
    UTClubHubView
}(EAView);
UTClubHubView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-club-hub-view");
        var t = document.createElement("div");
        t.classList.add("grid"),
        t.classList.add("layout-hub"),
        this._playersTile = new UTTileView,
        this._playersTile.getRootElement().classList.add("col-1-1-md"),
        this._playersTile.getRootElement().classList.add("players-tile"),
        t.appendChild(this._playersTile.getRootElement()),
        this._undoDiscardTile = new UTGraphicalInfoTileView,
        this._undoDiscardTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._undoDiscardTile.getRootElement().classList.add("col-1-2"),
        this._undoDiscardTile.getRootElement().classList.add("ut-tile-hub-undo"),
        t.appendChild(this._undoDiscardTile.getRootElement()),
        this._consumablesTile = new UTTileView,
        this._consumablesTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._consumablesTile.getRootElement().classList.add("col-1-2"),
        this._consumablesTile.getRootElement().classList.add("consumables-tile"),
        t.appendChild(this._consumablesTile.getRootElement()),
        this._staffTile = new UTTileView,
        this._staffTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._staffTile.getRootElement().classList.add("col-1-2"),
        this._staffTile.getRootElement().classList.add("staff-tile"),
        t.appendChild(this._staffTile.getRootElement()),
        this._customizeTile = new UTGraphicalInfoTileView,
        this._customizeTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._customizeTile.getRootElement().classList.add("col-1-2"),
        this._customizeTile.getRootElement().classList.add("ut-tile-hub-customize"),
        t.appendChild(this._customizeTile.getRootElement()),
        this._leaderboardsTile = new UTLeaderboardsTileView,
        this._leaderboardsTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._leaderboardsTile.getRootElement().classList.add("col-1-2-md"),
        this._leaderboardsTile.getRootElement().classList.add("col-1-1"),
        t.appendChild(this._leaderboardsTile.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTClubHubView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._playersTile.destroy(),
    this._undoDiscardTile.destroy(),
    this._consumablesTile.destroy(),
    this._staffTile.destroy(),
    this._customizeTile.destroy(),
    this._leaderboardsTile.destroy()
}
,
UTClubHubView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTClubHubViewController = function(a) {
    function UTClubHubViewController() {
        var e = a.call(this) || this;
        return e.viewmodel = new UTClubViewModel([]),
        e
    }
    return __extends(UTClubHubViewController, a),
    UTClubHubViewController.prototype.init = function() {
        this.initialized || a.prototype.init.call(this)
    }
    ,
    UTClubHubViewController.prototype.dealloc = function() {
        a.prototype.dealloc.call(this),
        this.viewmodel.dealloc()
    }
    ,
    UTClubHubViewController.prototype._getViewInstanceFromData = function() {
        return new UTClubHubView
    }
    ,
    UTClubHubViewController.prototype._getTelemetryId = function() {
        return "Hub - Club"
    }
    ,
    UTClubHubViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("nav.label.club")
    }
    ,
    UTClubHubViewController.prototype.viewDidAppear = function() {
        var e, o = this, t = services.Localization, n = this.getView();
        a.prototype.viewDidAppear.call(this),
        null === (e = this.getNavigationController()) || void 0 === e || e.setNavigationVisibility(!0, !0),
        n.clearTileContent();
        var i = new UTSearchCriteriaDTO;
        i.type = SearchType.CONSUMABLES_DEVELOPMENT,
        i.category = SearchCategory.ANY,
        services.Club.search(i).observe(this, function(e, t) {
            if (e.unobserve(o),
            t.success && JSUtils.isObject(t.response)) {
                var i = t.response.items.reduce(function(e, t) {
                    return e + t.stackCount
                }, 0);
                n.addTileStats(n.getConsumablesTile(), i)
            } else
                NetworkErrorManager.checkCriticalStatus(t.status) && NetworkErrorManager.handleStatus(t.status)
        }),
        services.Club.getStats().observe(this, function(e, t) {
            e.unobserve(o),
            t.success && JSUtils.isObject(t.response) ? t.response.stats.forEach(function(e) {
                var t = null;
                switch (e.type) {
                case ClubItemTypeEnum.PLAYERS:
                    t = n.getPlayersTile();
                    break;
                case ClubItemTypeEnum.STAFF:
                    t = n.getStaffTile()
                }
                t && n.addTileStats(t, e.count)
            }, o) : NetworkErrorManager.checkCriticalStatus(t.status) && NetworkErrorManager.handleStatus(t.status)
        });
        var r = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.UNDO_DISCARD_ENABLED)
          , s = n.getUndoDiscardTile();
        r && s.setDescription(services.Localization.localize("undodiscard.tile.description")),
        s.setInteractionState(r),
        s.setDisplay(r),
        n.getCustomizeTile().setDescription(t.localize("customize.tile.description")),
        hasConnection() && (this.populateLeaderboardsTile(),
        services.MyStadium.getStadium().observe(this, this.onStadiumRequested)),
        n.getPlayersTile().addTarget(this, this.ePlayersTileSelected, EventType.TAP),
        s.addTarget(this, this.eUndoDiscardTileSelected, EventType.TAP),
        n.getConsumablesTile().addTarget(this, this.eConsumablesTileSelected, EventType.TAP),
        n.getStaffTile().addTarget(this, this.eStaffTileSelected, EventType.TAP),
        n.getLeaderboardsTile().addTarget(this, this.eLeaderboardsTileSelected, EventType.TAP),
        n.getCustomizeTile().addTarget(this, this.eCustomizeTileSelected, EventType.TAP),
        TelemetryManager.trackPage(TelemetryManager.Sections.CLUB, "Club Hub")
    }
    ,
    UTClubHubViewController.prototype.viewWillDisappear = function() {
        a.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.getPlayersTile().removeTarget(this, this.ePlayersTileSelected, EventType.TAP),
        e.getUndoDiscardTile().removeTarget(this, this.eUndoDiscardTileSelected, EventType.TAP),
        e.getConsumablesTile().removeTarget(this, this.eConsumablesTileSelected, EventType.TAP),
        e.getStaffTile().removeTarget(this, this.eStaffTileSelected, EventType.TAP),
        e.getLeaderboardsTile().removeTarget(this, this.eLeaderboardsTileSelected, EventType.TAP),
        e.getCustomizeTile().removeTarget(this, this.eCustomizeTileSelected, EventType.TAP)
    }
    ,
    UTClubHubViewController.prototype.gotoConsumablesHub = function() {
        var n = this
          , e = new UTSearchCriteriaDTO;
        e.type = SearchType.CONSUMABLES_DEVELOPMENT,
        e.category = SearchCategory.ANY,
        gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        services.Club.search(e).observe(this, function(e, t) {
            if (e.unobserve(n),
            t.success && JSUtils.isObject(t.response)) {
                var i = n.getNavigationController();
                if (i) {
                    var o = new UTConsumablesHubViewController;
                    o.initWithConsumableCategories(new UTConsumableCategoriesViewModel(t.response.items)),
                    i.pushViewController(o)
                }
            } else
                NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : services.Notification.queue([services.Localization.localize("notification.error.loadConsumables"), UINotificationType.NEGATIVE]);
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        })
    }
    ,
    UTClubHubViewController.prototype.gotoClubSearchResults = function(e) {
        var t = this.getNavigationController();
        if (t) {
            var i = isPhone() ? new UTClubSearchResultsViewController : new controllers.club.ClubSearchResultsLandscape;
            i.initWithSearchCriteria(e),
            t.pushViewController(i)
        }
    }
    ,
    UTClubHubViewController.prototype.populateLeaderboardsTile = function() {
        var e, t, i = this.getView().getLeaderboardsTile(), o = null === (e = services.User.getUser()) || void 0 === e ? void 0 : e.getSelectedPersona(), n = null === (t = null == o ? void 0 : o.getCurrentClub()) || void 0 === t ? void 0 : t.assetId;
        i && o && n && (i.setName(o.name),
        i.setBadge(n))
    }
    ,
    UTClubHubViewController.prototype.ePlayersTileSelected = function(e, t, i) {
        var o = new UTSearchCriteriaDTO;
        o.type = SearchType.PLAYER,
        this.gotoClubSearchResults(o)
    }
    ,
    UTClubHubViewController.prototype.eConsumablesTileSelected = function(e, t, i) {
        this.gotoConsumablesHub()
    }
    ,
    UTClubHubViewController.prototype.eStaffTileSelected = function(e, t, i) {
        var o = new UTSearchCriteriaDTO;
        o.type = SearchType.STAFF,
        o.category = SearchCategory.MANAGER,
        this.gotoClubSearchResults(o)
    }
    ,
    UTClubHubViewController.prototype.eUndoDiscardTileSelected = function(e, t, i) {
        var o, n = isPhone() ? new UTUndoDiscardViewController : new UTUndoDiscardSplitViewController;
        n.init(),
        null === (o = this.getNavigationController()) || void 0 === o || o.pushViewController(n)
    }
    ,
    UTClubHubViewController.prototype.eLeaderboardsTileSelected = function(e, t, i) {
        var o = this.getNavigationController();
        if (o) {
            var n = new UTLeaderboardsHubViewController;
            n.init(),
            o.pushViewController(n),
            TelemetryManager.trackEvent(TelemetryManager.Sections.CLUB, TelemetryManager.Categories.BUTTON_PRESS, "Club - Leaderboards Tile")
        }
    }
    ,
    UTClubHubViewController.prototype.eCustomizeTileSelected = function(e, t, i) {
        var o = this.getNavigationController();
        if (o) {
            var n = new UTCustomizeHubViewController;
            n.init(),
            o.pushViewController(n),
            TelemetryManager.trackEvent(TelemetryManager.Sections.CLUB, TelemetryManager.Categories.BUTTON_PRESS, "Club - Club Tile")
        }
    }
    ,
    UTClubHubViewController.prototype.onStadiumRequested = function(e, t) {
        e.unobserve(this);
        var i = t.success;
        this.getView().getCustomizeTile().setInteractionState(i),
        !i && NetworkErrorManager.checkCriticalStatus(t.status) && NetworkErrorManager.handleStatus(t.status)
    }
    ,
    UTClubHubViewController
}(EAViewController);
function UTGoToLinkController() {
    EAObject.call(this),
    this._nc = null
}
UTGoToLinkController.StoreType = {
    PACK: "pack",
    ITEM: "item"
},
JSUtils.inherits(UTGoToLinkController, EAObject),
UTGoToLinkController.prototype.init = function init() {
    this.superclass()
}
,
UTGoToLinkController.prototype.initWithNavigationController = function initWithNavigationController(e) {
    this.initialized || (this.setNavigationController(e),
    this.init())
}
,
UTGoToLinkController.prototype.dealloc = function dealloc() {
    this._nc = null,
    this.superclass()
}
,
UTGoToLinkController.prototype.setNavigationController = function setNavigationController(e) {
    e instanceof UTNavigationController && (this._nc = e)
}
,
UTGoToLinkController.prototype.attemptNavigation = function attemptNavigation(e) {
    switch (e) {
    case RedirectId.AUCTION_SEARCH:
        this._gotoMarketSearch();
        break;
    case RedirectId.CLUB:
        this._gotoClubHub();
        break;
    case RedirectId.OBJECTIVES:
        this._gotoObjectives();
        break;
    case RedirectId.SBC:
    case RedirectId.SBC_SQUAD:
        this._gotoSquadBuildingChallengeHub();
        break;
    case RedirectId.SQUAD:
        this._gotoActiveSquadOverview();
        break;
    case RedirectId.SQUAD_SELECT:
        this._gotoSquadManagement();
        break;
    case RedirectId.STORE:
        this._gotoStore();
        break;
    case RedirectId.TOTW:
        this._gotoTOTWSquadOverview();
        break;
    case RedirectId.TRADE_PILE:
        this._gotoTransferList();
        break;
    case RedirectId.UNASSIGNED:
        this._gotoUnassigned();
        break;
    case RedirectId.WATCH_LIST:
        this._gotoTransferTargets();
        break;
    default:
        return DebugUtils.Assert(!1, "Unsupported goto link received: " + e),
        !1
    }
    return !0
}
,
UTGoToLinkController.prototype.attemptStoreNavigation = function attemptStoreNavigation(e, t) {
    switch (e) {
    case UTGoToLinkController.StoreType.PACK:
        this._goToPackStore(t);
        break;
    case UTGoToLinkController.StoreType.ITEM:
        this._goToVanityStore(t);
        break;
    default:
        return DebugUtils.Assert(!1, "Unsupported goto link received: " + link),
        !1
    }
    return !0
}
,
UTGoToLinkController.prototype._goToPackStore = function _goToPackStore(e) {
    if (this._nc) {
        var t = new UTStorePackViewController(e);
        t.init(),
        this._nc.pushViewController(t, !0)
    }
}
,
UTGoToLinkController.prototype._goToVanityStore = function _goToVanityStore(e) {
    if (this._nc) {
        var t = new UTStoreItemViewController(e);
        t.init(),
        this._nc.pushViewController(t, !0)
    }
}
,
UTGoToLinkController.prototype._gotoMarketSearch = function _gotoMarketSearch() {
    if (this._nc) {
        var e = !getAppMain().getConfigRepository().getConfigBoolean(EAConfigurationRepository.KEY_HIDE_TRANSFER_MARKET) && services.User.getUser().hasTradeAccess() && services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED) ? new UTMarketSearchFiltersViewController : new UTTransfersHubViewController;
        e.init(),
        this._nc.pushViewController(e, !0)
    }
}
,
UTGoToLinkController.prototype._gotoClubHub = function _gotoClubHub() {
    if (this._nc) {
        var e = new UTClubHubViewController;
        e.init(),
        this._nc.pushViewController(e, !0)
    }
}
,
UTGoToLinkController.prototype.attemptObjectivesNavigation = function attemptObjectivesNavigation(e) {
    if (JSUtils.isNumber(e) && this._nc) {
        var t = new UTObjectivesViewModel(services.Objectives)
          , i = new UTObjectivesHubViewController;
        return t.currentCategoryId = e,
        i.initWithViewmodel(t),
        this._nc.pushViewController(i, !0),
        !0
    }
    return DebugUtils.Assert(!1, "Unsupported objectives category id received: " + e),
    !1
}
,
UTGoToLinkController.prototype._gotoObjectives = function _gotoObjectives() {
    if (this._nc) {
        var e = new UTObjectivesHubViewController;
        e.init(),
        this._nc.pushViewController(e, !0)
    }
}
,
UTGoToLinkController.prototype._gotoSquadBuildingChallengeHub = function _gotoSquadBuildingChallengeHub() {
    services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED) ? this._nc && (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
    services.SBC.requestSets().observe(this, function _onRetrieveSBCSetsComplete(e, t) {
        if (e.unobserve(this),
        t.success) {
            var i = new UTSBCHubViewController;
            i.initWithSBCSetCategories(t.data.sets, t.data.categories),
            this._nc.pushViewController(i, !0)
        } else {
            var o = t.error && t.error.code === UtasErrorCode.SERVICE_IS_DISABLED
              , n = o ? "sbc.notification.disabled" : "notification.sbcSets.failedToLoad";
            services.Notification.queue([services.Localization.localize(n), UINotificationType.NEGATIVE]),
            o && services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.SBC_ENABLED, !1)
        }
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
    })) : services.Notification.queue([services.Localization.localize("sbc.notification.disabled"), UINotificationType.NEGATIVE])
}
,
UTGoToLinkController.prototype._gotoActiveSquadOverview = function _gotoActiveSquadOverview() {
    this._nc && (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
    services.Squad.requestSquadByType("active").observe(this, function _onSquadLoadComplete(e, t) {
        if (e.unobserve(this),
        t.success) {
            var i = isPhone() ? new UTSquadOverviewViewController : new UTSquadSplitViewController;
            i.initWithSquad(t.data.squad),
            this._nc.pushViewController(i)
        } else
            services.Notification.queue([services.Localization.localize("notification.squad.failedToLoad"), UINotificationType.NEGATIVE]);
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
    }))
}
,
UTGoToLinkController.prototype._gotoSquadManagement = function _gotoSquadManagement() {
    if (this._nc) {
        var e = isPhone() ? new UTSquadListViewController : new UTSquadListSplitViewController;
        e.init(),
        this._nc.pushViewController(e, !0)
    }
}
,
UTGoToLinkController.prototype._gotoStore = function _gotoStore() {
    if (this._nc) {
        var e = new UTStoreHubViewController;
        e.init(),
        this._nc.pushViewController(e, !0)
    }
}
,
UTGoToLinkController.prototype._gotoTOTWSquadOverview = function _gotoTOTWSquadOverview() {
    function _onRequestTOTWSquadComplete(e, t) {
        if (e.unobserve(this),
        t.success) {
            var i = isPhone() ? new UTTOTWSquadOverviewViewController : new UTTOTWSquadSplitViewController;
            i.initWithSquad(t.data.squad),
            this._nc.pushViewController(i)
        } else
            services.Notification.queue([services.Localization.localize("notification.TOTW.loadfail"), UINotificationType.NEGATIVE])
    }
    this._nc && (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
    services.Squad.requestTOTWHistory().observe(this, function _onRequestHistoryComplete(e, t) {
        if (e.unobserve(this),
        this._nc && t.success && 0 < t.data.squads.length) {
            var i = t.data.squads[0];
            if (i && i.isValid()) {
                var o = isPhone() ? new UTTOTWSquadOverviewViewController : new UTTOTWSquadSplitViewController;
                o.initWithSquad(i),
                this._nc.pushViewController(o)
            } else
                services.Squad.requestTOTWSquad(i.getId()).observe(this, _onRequestTOTWSquadComplete)
        } else
            services.Notification.queue([services.Localization.localize("notification.TOTW.loadfail"), UINotificationType.NEGATIVE]);
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
    }))
}
,
UTGoToLinkController.prototype._gotoTransferList = function _gotoTransferList() {
    if (this._nc) {
        var e = isPhone() ? new UTTransferListViewController : new UTTransferListSplitViewController;
        e.init(),
        this._nc.pushViewController(e, !0)
    }
}
,
UTGoToLinkController.prototype._gotoUnassigned = function _gotoUnassigned() {
    this._nc && (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
    services.Item.requestUnassignedItems().observe(this, function _onRequestUnassignedComplete(e, t) {
        e.unobserve(this);
        var i = isPhone() ? new UTUnassignedItemsViewController : new UTUnassignedItemsSplitViewController;
        t.success ? i.initWithItems(t.response.items) : i.init(),
        this._nc.pushViewController(i, !0),
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
    }))
}
,
UTGoToLinkController.prototype._gotoTransferTargets = function _gotoTransferTargets() {
    var e;
    this._nc && ((e = !getAppMain().getConfigRepository().getConfigBoolean(EAConfigurationRepository.KEY_HIDE_TRANSFER_MARKET) && services.User.getUser().hasTradeAccess() && services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED) ? isPhone() ? new UTWatchListViewController : new UTWatchListSplitViewController : new UTTransfersHubViewController).init(),
    this._nc.pushViewController(e, !0))
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTMyStadiumViewModel = function(i) {
    function UTMyStadiumViewModel(e) {
        var t = i.call(this) || this;
        return t.currentArea = MyStadiumSlotCategory.NONE,
        t.currentSlotId = -1,
        t.currentTierId = -1,
        t.stadiumEntity = e,
        t
    }
    return __extends(UTMyStadiumViewModel, i),
    UTMyStadiumViewModel.prototype.getCurrentSlot = function() {
        return this.stadiumEntity.getTierSlotById(this.currentTierId, this.currentSlotId)
    }
    ,
    UTMyStadiumViewModel.prototype.getCurrentAreaSlots = function() {
        return this.stadiumEntity.getAreaSlots(this.currentArea, this.stadiumEntity.lastUsedTierLevel).sort(this.sortSlots)
    }
    ,
    UTMyStadiumViewModel.prototype.assignItemToSlot = function(e) {
        return this.stadiumEntity.getActiveClubItemIds().includes(e.id) ? (services.Notification.queue([services.Localization.localize("notification.club.itemAlreadyAssigned"), UINotificationType.NEGATIVE]),
        !0) : this.stadiumEntity.setSlot(this.currentSlotId, this.currentTierId, e)
    }
    ,
    Object.defineProperty(UTMyStadiumViewModel.prototype, "stadium", {
        get: function() {
            return this.stadiumEntity
        },
        enumerable: !1,
        configurable: !0
    }),
    UTMyStadiumViewModel.prototype.getSlotItemId = function(e) {
        return (e = e || this.getCurrentSlot()) ? e.item.id : 0
    }
    ,
    UTMyStadiumViewModel.prototype.getAssetUriForSlot = function(e) {
        var t = e.item
          , i = t.getStaticData();
        switch (t.type) {
        case ItemType.BALL:
            return AssetLocationUtils.getBallImageUri(i.assetId);
        case ItemType.STADIUM:
            return AssetLocationUtils.getStadiumImageUri(i.assetId);
        case ItemType.BADGE:
            return AssetLocationUtils.getBadgeImageUri(t.teamId, enums.UIThemeVariation.DARK);
        case ItemType.KIT:
            var o = i instanceof UTStaticKitItemDataDTO ? i.kitType : KitType.HOME;
            return AssetLocationUtils.getKitImageUri(o, t.teamId);
        case ItemType.VANITY:
            return t.authenticity && (t.subtype === ItemSubType.VANITY_STADIUM_THEME || t.isAudioItem()) ? AssetLocationUtils.getBadgeImageUri(t.getItemAssetId(), enums.UIThemeVariation.DARK) : AssetLocationUtils.getVanityImageUri(t.subtype, t.getItemAssetId());
        default:
            return DebugUtils.Assert(t.type === ItemType.NONE, "Unsupported item type: " + t.type),
            ""
        }
    }
    ,
    UTMyStadiumViewModel.prototype.setSlotTierFromData = function(i) {
        var o = this;
        this.stadiumEntity.tiers.values().forEach(function(e) {
            var t = e.getSlotById(i.id);
            t && t.globalId === i.globalId && (o.currentTierId = e.id)
        })
    }
    ,
    UTMyStadiumViewModel.prototype.sortSlots = function(e, t) {
        return e.sortOrder < t.sortOrder ? -1 : e.sortOrder > t.sortOrder ? 1 : 0
    }
    ,
    UTMyStadiumViewModel
}(UTViewModel)
  , UTImageListView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTImageListView() {
        return t.call(this) || this
    }
    return __extends(UTImageListView, t),
    UTImageListView.prototype.init = function() {
        t.prototype.init.call(this)
    }
    ,
    UTImageListView.prototype.render = function() {
        this.updateText(),
        this.setImage(this.imageUri)
    }
    ,
    Object.defineProperty(UTImageListView.prototype, "placeholderUrl", {
        get: function() {
            return this._placeholderUrl
        },
        set: function(e) {
            this._placeholderUrl = 0 < e.length ? e : this.buildPlaceholderUrl()
        },
        enumerable: !1,
        configurable: !0
    }),
    UTImageListView.prototype.setImage = function(e) {
        var t = this._listImage
          , i = this.placeholderUrl ? this.placeholderUrl : this.buildPlaceholderUrl();
        t.onerror = function(e) {
            t.onerror = null,
            t.src = i
        }
        ,
        t.src = e
    }
    ,
    UTImageListView.prototype.buildPlaceholderUrl = function() {
        switch (this.itemType) {
        case ItemType.BADGE:
            return AssetLocationUtils.getBadgeImageUri(UTItemEntity.DEFAULT_ASSET_ID, enums.UIThemeVariation.DARK);
        case ItemType.BALL:
            return AssetLocationUtils.getBallImageUri(UTItemEntity.DEFAULT_BALL_ASSET_ID);
        case ItemType.KIT:
            return AssetLocationUtils.getKitImageUri(KitType.HOME, UTItemEntity.DEFAULT_ASSET_ID);
        case ItemType.STADIUM:
            return AssetLocationUtils.getStadiumImageUri(UTItemEntity.DEFAULT_ASSET_ID);
        case ItemType.VANITY:
            return AssetLocationUtils.getVanityImageUri(ItemSubType.NONE, UTItemEntity.DEFAULT_ASSET_ID);
        default:
            return DebugUtils.Assert(this.itemType === ItemType.NONE, "Unsupported item type: " + this.itemType),
            AssetLocationUtils.getVanityImageUri(ItemSubType.NONE, UTItemEntity.DEFAULT_ASSET_ID)
        }
    }
    ,
    UTImageListView.prototype.updateText = function() {
        this.__primaryText.textContent = this.primaryText,
        this.__secondaryText.textContent = this.secondaryText
    }
    ,
    UTImageListView.prototype.setInteractionState = function(e) {
        t.prototype.setInteractionState.call(this, e),
        this.toggleClass(enums.UIState.DISABLED, !this._interactionState),
        DOMKit.toggleClass(this.__rowContent, "has-tap-callback", e),
        this._interactionState || this.removeClass([enums.UIState.ACTIVE, enums.UIState.HOVER].join(" "))
    }
    ,
    UTImageListView.prototype._touchStarted = function(e) {
        t.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTImageListView.prototype._touchMoved = function(e) {
        t.prototype._touchMoved.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTImageListView.prototype._touchEnded = function(e) {
        t.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTImageListView.prototype._touchCancelled = function(e) {
        t.prototype._touchCancelled.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTImageListView.prototype._mouseLeave = function(e) {
        t.prototype._mouseLeave.call(this, e),
        this.removeClass(enums.UIState.ACTIVE),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTImageListView.prototype._mouseEnter = function(e) {
        t.prototype._mouseEnter.call(this, e),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTImageListView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTImageListView.UI_STATE = Object.freeze({
        NONE: "",
        NEUTRAL: "neutral",
        DISABLED: "disabled"
    }),
    UTImageListView
}(EATargetActionView));
UTImageListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("li");
        e.classList.add("ut-image-list");
        var t = document.createElement("div");
        t.classList.add("image-container"),
        this._listImage = new EAImageView,
        t.appendChild(this._listImage.getRootElement()),
        e.appendChild(t),
        this.__rowContent = document.createElement("div"),
        this.__rowContent.classList.add("rowContent"),
        this.__primaryText = document.createElement("span"),
        this.__primaryText.classList.add("primary-text"),
        this.__rowContent.appendChild(this.__primaryText),
        this.__secondaryText = document.createElement("span"),
        this.__secondaryText.classList.add("secondary-text"),
        this.__rowContent.appendChild(this.__secondaryText),
        e.appendChild(this.__rowContent),
        this.__root = e,
        this._generated = !0
    }
}
,
UTImageListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._listImage.destroy(),
    this.__rowContent = null,
    this.__primaryText = null,
    this.__secondaryText = null
}
,
UTImageListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTCustomSlotListView = function(t) {
    function UTCustomSlotListView() {
        var e = t.call(this) || this;
        return e.listRows = [],
        e
    }
    return __extends(UTCustomSlotListView, t),
    UTCustomSlotListView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTCustomSlotListView.prototype.render = function() {
        this.renderItems()
    }
    ,
    UTCustomSlotListView.prototype.renderItems = function() {
        var t = this;
        DOMKit.empty(this.__slotRows),
        this.listRows.forEach(function(e) {
            e.render(),
            e.addTarget(t, t.onSlotTapped, EventType.TAP),
            t.__slotRows.appendChild(e.getRootElement())
        })
    }
    ,
    Object.defineProperty(UTCustomSlotListView.prototype, "rows", {
        get: function() {
            return this.listRows
        },
        set: function(e) {
            e.forEach(function(e) {
                e.init()
            }),
            this.listRows = e
        },
        enumerable: !1,
        configurable: !0
    }),
    UTCustomSlotListView.prototype.onSlotTapped = function(e) {
        this._triggerActions(EventType.TAP, {
            index: this.rows.indexOf(e)
        })
    }
    ,
    UTCustomSlotListView
}(EATargetActionView);
UTCustomSlotListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-custom-slot-list"),
        this.__slotRows = document.createElement("ul"),
        e.appendChild(this.__slotRows),
        this.__root = e,
        this._generated = !0
    }
}
,
UTCustomSlotListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__slotRows = null
}
,
UTCustomSlotListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTCustomizeHubView = function(t) {
    function UTCustomizeHubView() {
        return t.call(this) || this
    }
    return __extends(UTCustomizeHubView, t),
    UTCustomizeHubView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this.setInteractionState(!0),
        this.initTabMenu(),
        this._slotList.init(),
        this._searchFilters.init(),
        this._resetButton = this._searchFilters.getResetButton(),
        this._searchButton = this._searchFilters.getSearchButton(),
        this._resetButton.init(),
        this._resetButton.setText(e.localize("search.pagination.reset")),
        this._resetButton.addTarget(this, this._eResetButtonSelected, EventType.TAP),
        this._searchButton.init(),
        this._searchButton.setText(e.localize("button.search")),
        this._searchButton.addTarget(this, this._eSearchButtonSelected, EventType.TAP),
        this._searchFilters.onFilterChange.observe(this, this._eFilterChanged),
        this._searchFilters.setupSearchOptions({
            includeEvolutionsToggle: !1,
            includeLimitedUseToggle: !1,
            includeSquadPlayersToggle: !1,
            includeUntradeableToggle: !0
        }),
        this._searchFilters.setSortOptions(factories.DataProvider.getStaffSortTypeDP()),
        this._searchFilters.getSortOptions().addTarget(this, this._eSearchOptionChanged, EventType.CHANGE),
        this._searchFilters.getSortDropDown().addTarget(this, this._eDropDownChanged, EventType.CHANGE),
        this._searchFilters.getSortDropDown().setDefaultIndexById(SearchSortID.RATING_DESC, !0),
        this._slotList.addTarget(this, this.handleSlotSelect, EventType.TAP)
    }
    ,
    UTCustomizeHubView.prototype.render = function() {
        this._searchFilters.setDisplay(!1),
        this._slotList.setDisplay(!0),
        this._slotList.render()
    }
    ,
    UTCustomizeHubView.prototype.renderSearch = function() {
        this._slotList.setDisplay(!1),
        this._searchFilters.setDisplay(!0)
    }
    ,
    UTCustomizeHubView.prototype.getFilters = function() {
        return this._searchFilters
    }
    ,
    UTCustomizeHubView.prototype.setFilterLock = function(e, t) {
        this._searchFilters.setFilterLock(e, t)
    }
    ,
    UTCustomizeHubView.prototype.setFilters = function(e) {
        this._searchFilters.setFilters(e, !1),
        this._searchFilters.togglePileFilter(!1),
        this._searchFilters.togglePlayerNameRow(e.searchCriteria.type === SearchType.PLAYER)
    }
    ,
    UTCustomizeHubView.prototype.setFilterValue = function(e, t) {
        this._searchFilters.setFilterValue(e, t)
    }
    ,
    Object.defineProperty(UTCustomizeHubView.prototype, "slotList", {
        get: function() {
            return this._slotList
        },
        enumerable: !1,
        configurable: !0
    }),
    Object.defineProperty(UTCustomizeHubView.prototype, "tabMenu", {
        get: function() {
            return this._tabMenu
        },
        enumerable: !1,
        configurable: !0
    }),
    UTCustomizeHubView.prototype.setSlotRows = function(e) {
        this._slotList.rows = e
    }
    ,
    UTCustomizeHubView.prototype.initTabMenu = function() {
        this._tabMenu.init(),
        this._tabMenu.addTab(MyStadiumSlotCategory.NONE, services.Localization.localize("customize.tabTitle.all")),
        this._tabMenu.addTab(MyStadiumSlotCategory.CLUB, services.Localization.localize("customize.tabTitle.club")),
        this._tabMenu.addTab(MyStadiumSlotCategory.STADIUM, services.Localization.localize("customize.tabTitle.stadium")),
        this._tabMenu.addTab(MyStadiumSlotCategory.COSMETICS, services.Localization.localize("customize.tabTitle.cosmetics")),
        this._tabMenu.setActiveTab(MyStadiumSlotCategory.NONE),
        this._tabMenu.layoutSubviews(),
        this._tabMenu.addTarget(this, this.handleTabSelect, EventType.TAP)
    }
    ,
    UTCustomizeHubView.prototype.handleTabSelect = function(e, t, i) {
        this.isInteractionEnabled() && (this._triggerActions(UTCustomizeHubView.Events.TAB_SELECTED, i),
        this._tabMenu.setActiveTab(i.id))
    }
    ,
    UTCustomizeHubView.prototype.handleSlotSelect = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTCustomizeHubView.Events.SLOT_SELECTED, i)
    }
    ,
    UTCustomizeHubView.prototype._eResetButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTCustomizeHubView.Events.RESET)
    }
    ,
    UTCustomizeHubView.prototype._eSearchButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTCustomizeHubView.Events.SEARCH)
    }
    ,
    UTCustomizeHubView.prototype._eFilterChanged = function(e, t, i, o) {
        this.isInteractionEnabled() && this._triggerActions(UTCustomizeHubView.Events.FILTER_CHANGE, {
            id: i,
            setId: t,
            value: o
        })
    }
    ,
    UTCustomizeHubView.prototype._eSearchOptionChanged = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTCustomizeHubView.Events.SEARCH_OPTION_CHANGE, i)
    }
    ,
    UTCustomizeHubView.prototype._eDropDownChanged = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTCustomizeHubView.Events.SORT_CHANGE, i)
    }
    ,
    UTCustomizeHubView.Events = {
        TAB_SELECTED: "TAB_SELECTED",
        SLOT_SELECTED: "SLOT_SELECTED",
        RESET: "RESET",
        SEARCH: "SEARCH",
        FILTER_CHANGE: "FILTER_CHANGE",
        SEARCH_OPTION_CHANGE: "SEARCH_OPTION_CHANGE",
        SORT_CHANGE: "SORT_CHANGE"
    },
    UTCustomizeHubView
}(EATargetActionView);
UTCustomizeHubView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-customize-hub-view"),
        this._tabMenu = new EAFilterBarView,
        e.appendChild(this._tabMenu.getRootElement());
        var t = document.createElement("div");
        t.classList.add("ut-content-container"),
        this._searchFilters = new UTClubSearchFiltersView,
        t.appendChild(this._searchFilters.getRootElement()),
        this._slotList = new UTCustomSlotListView,
        t.appendChild(this._slotList.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTCustomizeHubView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._tabMenu.destroy(),
    this._searchFilters.destroy(),
    this._slotList.destroy()
}
,
UTCustomizeHubView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTCustomizeHubViewController = function(i) {
    function UTCustomizeHubViewController() {
        var e = i.call(this) || this;
        return e.goToLinkController = null,
        e.goToObjectivesCategory = null,
        e.searchViewModel = new UTItemSearchViewModel,
        e.viewmodel = null,
        e
    }
    return __extends(UTCustomizeHubViewController, i),
    UTCustomizeHubViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.customizeHub")
    }
    ,
    UTCustomizeHubViewController.prototype.init = function() {
        this.initialized || (i.prototype.init.call(this),
        this.searchViewModel.searchCategoryGroup = SearchCategoryGroup.CLUB,
        this.searchViewModel.searchCriteria.type = SearchType.CLUB_INFO,
        this.searchViewModel.defaultSearchCriteria.type = SearchType.CLUB_INFO,
        this.goToLinkController = new UTGoToLinkController,
        this.goToLinkController.init())
    }
    ,
    UTCustomizeHubViewController.prototype.dealloc = function() {
        this.goToLinkController && (this.goToLinkController.dealloc(),
        this.goToLinkController = null),
        this.goToObjectivesCategory = null,
        i.prototype.dealloc.call(this)
    }
    ,
    UTCustomizeHubViewController.prototype.setupStadium = function() {
        gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        services.MyStadium.getStadium().observe(this, function _onGetStadiumComplete(e, t) {
            var i, o, n;
            e.unobserve(this);
            var r = null === (i = t.data) || void 0 === i ? void 0 : i.stadium;
            if (t.success && r) {
                var s = null !== (n = null === (o = this.viewmodel) || void 0 === o ? void 0 : o.currentArea) && void 0 !== n ? n : MyStadiumSlotCategory.NONE;
                this.viewmodel = new UTMyStadiumViewModel(r),
                this.viewmodel.currentTierId = r.lastUsedTierLevel,
                this.viewmodel.currentArea = s,
                this.viewmodel.currentArea === MyStadiumSlotCategory.NONE ? this.setSearchCriteria() : this.setViewSlots(),
                gClickShield.isShowing() && gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
            } else
                services.Notification.queue([services.Localization.localize("notification.stadium.loadfail"), UINotificationType.NEGATIVE]),
                gClickShield.isShowing() && gClickShield.hideShield(EAClickShieldView.Shield.LOADING),
                this.getNavigationController().popToRootViewController()
        })
    }
    ,
    UTCustomizeHubViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this),
        this.setupStadium(),
        services.Club.getStats();
        var e = this.getNavigationController();
        e && e.setNavigationVisibility(!0, !0),
        e && this.goToLinkController && this.goToLinkController.setNavigationController(e);
        var t = this.getView();
        t.addTarget(this, this._eTabSelected, UTCustomizeHubView.Events.TAB_SELECTED),
        t.addTarget(this, this._eRowSelected, UTCustomizeHubView.Events.SLOT_SELECTED),
        t.addTarget(this, this._eResetSelected, UTCustomizeHubView.Events.RESET),
        t.addTarget(this, this._eSearchSelected, UTCustomizeHubView.Events.SEARCH),
        t.addTarget(this, this._eFilterChanged, UTCustomizeHubView.Events.FILTER_CHANGE),
        t.addTarget(this, this._eSearchOptionChanged, UTCustomizeHubView.Events.SEARCH_OPTION_CHANGE),
        t.addTarget(this, this._eDropDownChanged, UTCustomizeHubView.Events.SORT_CHANGE)
    }
    ,
    UTCustomizeHubViewController.prototype.viewWillDisappear = function() {
        i.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this._eTabSelected, UTCustomizeHubView.Events.TAB_SELECTED),
        e.removeTarget(this, this._eRowSelected, UTCustomizeHubView.Events.SLOT_SELECTED),
        e.removeTarget(this, this._eResetSelected, UTCustomizeHubView.Events.RESET),
        e.removeTarget(this, this._eSearchSelected, UTCustomizeHubView.Events.SEARCH),
        e.removeTarget(this, this._eFilterChanged, UTCustomizeHubView.Events.FILTER_CHANGE),
        e.removeTarget(this, this._eSearchOptionChanged, UTCustomizeHubView.Events.SEARCH_OPTION_CHANGE),
        e.removeTarget(this, this._eDropDownChanged, UTCustomizeHubView.Events.SORT_CHANGE)
    }
    ,
    UTCustomizeHubViewController.prototype.getItemNameString = function(e) {
        var t = services.Localization;
        if (!e.isValid())
            return t.localize("listImageLabel.none");
        var i = e.getStaticData();
        switch (e.type) {
        case ItemType.BADGE:
        case ItemType.KIT:
            return UTLocalizationUtil.teamIdToAbbr15(e.teamId, t);
        case ItemType.BALL:
            return t.localize(i.description);
        case ItemType.STADIUM:
            return i.description;
        case ItemType.VANITY:
        default:
            return t.localize(i.name)
        }
    }
    ,
    UTCustomizeHubViewController.prototype.setViewSlots = function() {
        var n = this;
        if (DebugUtils.Assert(JSUtils.isValid(this.viewmodel), "Executed slot assignment before the viewmodel is set."),
        this.viewmodel) {
            var r = this.viewmodel
              , e = this.getView()
              , t = r.getCurrentAreaSlots().map(function(e) {
                var t = new UTImageListView
                  , i = e.item;
                if (t.imageUri = r.getAssetUriForSlot(e),
                t.itemType = i.type,
                t.primaryText = services.Localization.localize(e.name),
                t.secondaryText = n.getItemNameString(i),
                i.authenticity && i.isVanityItem()) {
                    var o = AssetLocationUtils.getBadgeImageUri(i.teamId, enums.UIThemeVariation.DARK);
                    t.placeholderUrl = o
                }
                return t.setInteractionState(!e.locked),
                t
            });
            e.setSlotRows(t),
            e.render()
        }
    }
    ,
    UTCustomizeHubViewController.prototype._getViewInstanceFromData = function() {
        return new UTCustomizeHubView
    }
    ,
    UTCustomizeHubViewController.prototype.setSearchCriteria = function() {
        var e = this.getView();
        e.setFilters(this.searchViewModel),
        e.setFilterValue(enums.UISearchFilters.TYPE, SearchType.ANY),
        e.renderSearch()
    }
    ,
    UTCustomizeHubViewController.prototype._eRowSelected = function(e, t, i) {
        if (DebugUtils.Assert(JSUtils.isValid(this.viewmodel), "Row selected before the viewmodel is set."),
        this.viewmodel && i && JSUtils.isNumber(i.index)) {
            var o = this.viewmodel.getCurrentAreaSlots()[i.index]
              , n = new UTSearchCriteriaDTO;
            switch (this.viewmodel.currentSlotId = o.id,
            this.viewmodel.setSlotTierFromData(o),
            o.validSubTypes[0]) {
            case ItemSubType.BADGE:
                n.type = SearchType.CLUB_INFO,
                n.category = SearchCategory.BADGE;
                break;
            case ItemSubType.BALL:
                n.type = SearchType.BALL,
                n.category = SearchCategory.BALL;
                break;
            case ItemSubType.KIT:
                n.type = SearchType.CLUB_INFO,
                n.category = SearchCategory.KIT;
                break;
            case ItemSubType.STADIUM:
                n.type = SearchType.STADIUM,
                n.category = SearchCategory.STADIUM;
                break;
            default:
                n.type = SearchType.VANITY,
                n.category = SearchCategory.VANITY,
                n.subtypes = o.validSubTypes
            }
            this.gotoClubSearchResults(n, !0)
        }
    }
    ,
    UTCustomizeHubViewController.prototype._eTabSelected = function(e, t, i) {
        DebugUtils.Assert(JSUtils.isValid(this.viewmodel), "Tab selected before the viewmodel is set."),
        this.viewmodel && i && (this.viewmodel.currentArea = i.id,
        this.viewmodel.currentArea === MyStadiumSlotCategory.NONE ? this.setSearchCriteria() : this.setViewSlots())
    }
    ,
    UTCustomizeHubViewController.prototype.gotoClubSearchResults = function(e, t) {
        var i = this.getNavigationController();
        if (i) {
            var o = isPhone() ? new UTClubSearchResultsViewController : new controllers.club.ClubSearchResultsLandscape;
            o.initWithSearchCriteria(e),
            t && this.viewmodel && o.setStadiumViewModel(this.viewmodel),
            i.pushViewController(o)
        }
    }
    ,
    UTCustomizeHubViewController.prototype._eResetSelected = function(e, t, i) {
        var o = this.getView();
        this.searchViewModel.resetSearch(),
        o.setFilters(this.searchViewModel)
    }
    ,
    UTCustomizeHubViewController.prototype._eSearchSelected = function(e, t, i) {
        this.gotoClubSearchResults(this.searchViewModel.searchCriteria, !1)
    }
    ,
    UTCustomizeHubViewController.prototype._eFilterChanged = function(e, t, i) {
        JSUtils.isValid(i.setId) && JSUtils.isValid(i.id) && JSUtils.isValid(i.value) && (this.searchViewModel.updateFromFilterChange(i.setId, i.id, i.value),
        this.getView().setFilters(this.searchViewModel))
    }
    ,
    UTCustomizeHubViewController.prototype._eSearchOptionChanged = function(e, t, i) {
        var o = this;
        i.id === enums.UISortOptionType.UNTRADEABLE ? this.searchViewModel.searchCriteria.untradeables = i.checked ? SearchUntradeables.ONLY : SearchUntradeables.DEFAULT : i.id === enums.UISortOptionType.ACADEMY ? this.searchViewModel.searchCriteria.academyOnly = i.checked : i.id === enums.UISortOptionType.EXCLUDE_SQUAD && (i.checked ? this.searchViewModel.requestActiveSquadDefIds().observe(this, function(e, t) {
            e.unobserve(o),
            t.success && t.data && t.data.defIds && (o.searchViewModel.searchCriteria.excludeDefIds = t.data.defIds)
        }) : this.searchViewModel.searchCriteria.excludeDefIds = [])
    }
    ,
    UTCustomizeHubViewController.prototype._eDropDownChanged = function(e, t, i) {
        switch (this.searchViewModel.searchCriteria.sort = i.value,
        i.id) {
        case SearchSortID.VALUE_ASC:
        case SearchSortID.VALUE_DESC:
            this.searchViewModel.searchCriteria.sortBy = SearchSortType.VALUE;
            break;
        case SearchSortID.RECENCY_DESC:
            this.searchViewModel.searchCriteria.sortBy = SearchSortType.RECENCY;
            break;
        default:
            DebugUtils.Assert(!1, "Stadium ClubSearchFilters :: Passed an invalid SearchSort Enums.")
        }
    }
    ,
    UTCustomizeHubViewController.prototype._eGoToObjectivesSelected = function(e, t, i) {
        this.goToLinkController && this.goToObjectivesCategory ? this.goToLinkController.attemptObjectivesNavigation(this.goToObjectivesCategory.id) : DebugUtils.Assert(!1, "Controller and category must be valid to redirect")
    }
    ,
    UTCustomizeHubViewController
}(EAViewController)
  , UTBulkActionPopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTBulkActionPopupView(e) {
        var t = i.call(this) || this;
        return t.isSbcStorageEnabled = e,
        t.actionButtons = [],
        t
    }
    return __extends(UTBulkActionPopupView, i),
    UTBulkActionPopupView.prototype.init = function() {
        i.prototype.init.call(this),
        this._exitBtn.init()
    }
    ,
    UTBulkActionPopupView.prototype.dealloc = function() {
        this.actionButtons = [],
        i.prototype.dealloc.call(this)
    }
    ,
    UTBulkActionPopupView.prototype.getExitBtn = function() {
        return this._exitBtn
    }
    ,
    UTBulkActionPopupView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTBulkActionPopupView.prototype.appendActionButton = function(e) {
        this.__actionButtonContainer.appendChild(e.getRootElement()),
        this.actionButtons.push(e)
    }
    ,
    UTBulkActionPopupView.prototype.setupSendAllItemsButton = function() {
        var e = services.Localization;
        this._sendAllItemsButton = new UTGroupButtonControl,
        this._sendAllItemsButton.init(),
        this._sendAllItemsButton.setText(e.localize("bulkAction.itemspopup.sendAllToTradePile")),
        this._sendAllItemsButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this.appendActionButton(this._sendAllItemsButton)
    }
    ,
    UTBulkActionPopupView.prototype.setupStoreAllItemsButton = function() {
        var e = services.Localization;
        this._storeAllItemsButton = new UTGroupButtonControl,
        this._storeAllItemsButton.init(),
        this._storeAllItemsButton.setText(e.localize("bulkAction.itemspopup.storeAllInClub")),
        this._storeAllItemsButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this.appendActionButton(this._storeAllItemsButton)
    }
    ,
    UTBulkActionPopupView.prototype.setupSellAllItemsButton = function(e) {
        var t = services.Localization;
        this._sellAllItemsButton = new UTGroupButtonControl,
        this._sellAllItemsButton.init(),
        this._sellAllItemsButton.setText(t.localize("bulkAction.itemspopup.quickSell", [t.localizeNumber(e)])),
        this._sellAllItemsButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._sellAllItemsButton.displayCurrencyIconOnText(!0),
        this.appendActionButton(this._sellAllItemsButton)
    }
    ,
    UTBulkActionPopupView.prototype.setupSendAllDuplicatesButton = function() {
        var e = services.Localization;
        this._sendAllDuplicatesButton = new UTGroupButtonControl,
        this._sendAllDuplicatesButton.init(),
        this._sendAllDuplicatesButton.setText(e.localize("bulkAction.duplicatepopup.sendTradePile")),
        this._sendAllDuplicatesButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this.appendActionButton(this._sendAllDuplicatesButton)
    }
    ,
    UTBulkActionPopupView.prototype.setupSellAllTradeablesButton = function(e) {
        var t = services.Localization;
        this._sellAllTradeablesButton = new UTGroupButtonControl,
        this._sellAllTradeablesButton.init(),
        this._sellAllTradeablesButton.setText(t.localize("bulkAction.duplicatepopup.quickSellTradeable", [t.localizeNumber(e)])),
        this._sellAllTradeablesButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._sellAllTradeablesButton.displayCurrencyIconOnText(!0),
        this.appendActionButton(this._sellAllTradeablesButton)
    }
    ,
    UTBulkActionPopupView.prototype.setupSellAllUntradeablesButton = function(e) {
        var t = services.Localization;
        this._sellAllUntradeablesButton = new UTGroupButtonControl,
        this._sellAllUntradeablesButton.init(),
        this._sellAllUntradeablesButton.setText(t.localize("bulkAction.duplicatepopup.quickSellUntradeable", [t.localizeNumber(e)])),
        this._sellAllUntradeablesButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._sellAllUntradeablesButton.displayCurrencyIconOnText(!0),
        this.appendActionButton(this._sellAllUntradeablesButton)
    }
    ,
    UTBulkActionPopupView.prototype.setupStoreAllDuplicatesButton = function() {
        var e = services.Localization;
        this._storeAllUntradeablesButton = new UTGroupButtonControl,
        this._storeAllUntradeablesButton.init(),
        this._storeAllUntradeablesButton.setText(e.localize("bulkAction.duplicatepopup.storeUntradeable")),
        this._storeAllUntradeablesButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this.appendActionButton(this._storeAllUntradeablesButton)
    }
    ,
    UTBulkActionPopupView.prototype.setupSwapTradableDuplicatesButton = function() {
        var e = services.Localization;
        this._swapTradeableDuplicatesButton = new UTGroupButtonControl,
        this._swapTradeableDuplicatesButton.init(),
        this._swapTradeableDuplicatesButton.setText(e.localize("bulkAction.duplicatepopup.swapAllUntradeables")),
        this._swapTradeableDuplicatesButton.addTarget(this, this.eButtonSelected, EventType.TAP),
        this.appendActionButton(this._swapTradeableDuplicatesButton)
    }
    ,
    UTBulkActionPopupView.prototype.eButtonSelected = function(e, t, i) {
        e === this._sellAllItemsButton ? this._triggerActions(UTBulkActionPopupView.Events.ITEMS_SELL_ALL_TAPPED) : e === this._sellAllTradeablesButton ? this._triggerActions(UTBulkActionPopupView.Events.DUPLICATES_SELL_TRADEABLES_TAPPED) : e === this._sellAllUntradeablesButton ? this._triggerActions(UTBulkActionPopupView.Events.DUPLICATES_SELL_UNTRADEABLES_TAPPED) : e === this._sendAllDuplicatesButton ? this._triggerActions(UTBulkActionPopupView.Events.DUPLICATES_SEND_ALL_TAPPED) : e === this._sendAllItemsButton ? this._triggerActions(UTBulkActionPopupView.Events.ITEMS_SEND_ALL_TAPPED) : e === this._storeAllItemsButton ? this._triggerActions(UTBulkActionPopupView.Events.ITEMS_STORE_ALL_TAPPED) : e === this._swapTradeableDuplicatesButton ? this._triggerActions(UTBulkActionPopupView.Events.DUPLICATES_SWAP_ALL_TRADEABLES) : e === this._storeAllUntradeablesButton && this._triggerActions(UTBulkActionPopupView.Events.DUPLICATES_STORE_ALL_UNTRADEABLES)
    }
    ,
    UTBulkActionPopupView.prototype.setupItemsPopup = function(e, t, i, o) {
        var n = services.Localization;
        this.setTitle(n.localize("bulkAction.itemspopup.title")),
        this.setupStoreAllItemsButton(),
        e || this._storeAllItemsButton.setDisplay(!1),
        this.setupSendAllItemsButton(),
        i && e && t || this._sendAllItemsButton.setDisplay(!1),
        this.setupSellAllItemsButton(o)
    }
    ,
    UTBulkActionPopupView.prototype.setupDuplicatesPopup = function(e, t, i, o, n) {
        var r = services.Localization;
        this.setTitle(r.localize("bulkAction.duplicatepopup.title")),
        this.setupSendAllDuplicatesButton(),
        this.setupSwapTradableDuplicatesButton(),
        (!e || o <= 0) && this._sendAllDuplicatesButton.setDisplay(!1),
        this.setupSellAllTradeablesButton(t),
        0 === o && (this._sendAllDuplicatesButton.setDisplay(!1),
        this._sellAllTradeablesButton.setDisplay(!1)),
        this.setupSellAllUntradeablesButton(i),
        0 === n && this._sellAllUntradeablesButton.setDisplay(!1)
    }
    ,
    UTBulkActionPopupView.prototype.setupUntradeableDuplicatesPopup = function(e, t, i) {
        var o = services.Localization;
        this.setTitle(o.localize("bulkAction.untradeableduplicatepopup.title")),
        e && 0 <= i && this.setupStoreAllDuplicatesButton(),
        0 !== i && (this.setupSellAllUntradeablesButton(t),
        this.setupSwapTradableDuplicatesButton())
    }
    ,
    UTBulkActionPopupView.Events = {
        ITEMS_STORE_ALL_TAPPED: "STORE_ALL_TAPPED",
        ITEMS_SEND_ALL_TAPPED: "SEND_ALL_TAPPED",
        ITEMS_SELL_ALL_TAPPED: "SELL_ALL_TAPPED",
        DUPLICATES_SEND_ALL_TAPPED: "DUPLICATES_SEND_ALL_TAPPED",
        DUPLICATES_SELL_TRADEABLES_TAPPED: "DUPLICATES_SELL_TRADEABLES_TAPPED",
        DUPLICATES_SELL_UNTRADEABLES_TAPPED: "DUPLICATES_SELL_UNTRADEABLES_TAPPED",
        DUPLICATES_SWAP_ALL_TRADEABLES: "DUPLICATES_SWAP_ALL_TRADEABLES",
        DUPLICATES_STORE_ALL_UNTRADEABLES: "DUPLICATES_STORE_ALL_UNTRADEABLES",
        EXIT: "EXIT"
    },
    UTBulkActionPopupView
}(EATargetActionView));
UTBulkActionPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-bulk-action-popup-view");
        var t = document.createElement("header");
        this.__title = document.createElement("h1"),
        t.appendChild(this.__title),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t),
        this.__actionButtonContainer = document.createElement("div"),
        this.__actionButtonContainer.classList.add("ut-button-group"),
        e.appendChild(this.__actionButtonContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTBulkActionPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._exitBtn.destroy(),
    this.__actionButtonContainer = null
}
,
UTBulkActionPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTBulkActionPopupViewController = function(t) {
    function UTBulkActionPopupViewController() {
        return t.call(this) || this
    }
    return __extends(UTBulkActionPopupViewController, t),
    UTBulkActionPopupViewController.prototype._getViewInstanceFromData = function() {
        var e = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORAGE_PILE_ENABLED) || !1;
        return new UTBulkActionPopupView(e)
    }
    ,
    UTBulkActionPopupViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.ITEMS_SELL_ALL_TAPPED),
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.ITEMS_STORE_ALL_TAPPED),
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.ITEMS_SEND_ALL_TAPPED),
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SELL_TRADEABLES_TAPPED),
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SELL_UNTRADEABLES_TAPPED),
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SEND_ALL_TAPPED),
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SWAP_ALL_TRADEABLES),
        e.addTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_STORE_ALL_UNTRADEABLES),
        e.getExitBtn().addTarget(this, this.closePopup, EventType.TAP)
    }
    ,
    UTBulkActionPopupViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.removeTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.ITEMS_SELL_ALL_TAPPED),
        e.removeTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.ITEMS_STORE_ALL_TAPPED),
        e.removeTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.ITEMS_SEND_ALL_TAPPED),
        e.removeTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SELL_TRADEABLES_TAPPED),
        e.removeTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SELL_UNTRADEABLES_TAPPED),
        e.removeTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SEND_ALL_TAPPED),
        e.removeTarget(this, this.eActionButtonTapped, UTBulkActionPopupView.Events.DUPLICATES_SWAP_ALL_TRADEABLES),
        e.getExitBtn().removeTarget(this, this.closePopup, EventType.TAP)
    }
    ,
    UTBulkActionPopupViewController.prototype.eActionButtonTapped = function(e, t, i) {
        this.onExit.notify(t)
    }
    ,
    UTBulkActionPopupViewController.prototype.handleKeyUpEvent = function(e) {
        e.key === KeyboardKey.ENTER ? this.onExit.notify(enums.UIDialogOptions.OK) : e.key !== KeyboardKey.ESCAPE && e.key !== KeyboardKey.MS_ESCAPE || this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTBulkActionPopupViewController
}(BasePopupViewController)
  , UTUnassignedItemStatsDTO = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTUnassignedItemStatsDTO() {
        var e = t.call(this) || this;
        return e.entities = [],
        e.count = 0,
        e.value = 0,
        e
    }
    return __extends(UTUnassignedItemStatsDTO, t),
    UTUnassignedItemStatsDTO
}(EAObject))
  , UTUnassignedItemsViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(o) {
    function UTUnassignedItemsViewModel(e, t) {
        var i = o.call(this, e) || this;
        return i.storagePileEnabled = t,
        i.requests = [],
        i.setSection(UTUnassignedItemsViewModel.SECTION.ITEMS, function(e) {
            return e instanceof UTSquadSlotEntity && (e = e.item),
            i.isRegularSection.call(i, e)
        }, UTUnassignedItemsViewModel.SECTION.ITEMS),
        i.setSection(UTUnassignedItemsViewModel.SECTION.UNTRADABLEDUPLICATES, function(e) {
            return e instanceof UTSquadSlotEntity && (e = e.item),
            i.isStorableDuplicateSection.call(i, e)
        }, UTUnassignedItemsViewModel.SECTION.UNTRADABLEDUPLICATES),
        i.setSection(UTUnassignedItemsViewModel.SECTION.DUPLICATES, function(e) {
            return e instanceof UTSquadSlotEntity && (e = e.item),
            i.isDuplicatesSection.call(i, e)
        }, UTUnassignedItemsViewModel.SECTION.DUPLICATES),
        i.organizeItems(),
        i
    }
    return __extends(UTUnassignedItemsViewModel, o),
    UTUnassignedItemsViewModel.prototype.isDuplicateItem = function(e) {
        return !e.isMovable() && !e.isMiscItem()
    }
    ,
    UTUnassignedItemsViewModel.prototype.isRegularSection = function(e) {
        return e.isMovable() || e.isMiscItem()
    }
    ,
    UTUnassignedItemsViewModel.prototype.isStorableDuplicateSection = function(e) {
        return this.isDuplicateItem(e) && e.isStorable() && this.storagePileEnabled
    }
    ,
    UTUnassignedItemsViewModel.prototype.isDuplicatesSection = function(e) {
        return this.isDuplicateItem(e) && (e.isVanityItem() || !this.storagePileEnabled || this.storagePileEnabled && !e.isStorable())
    }
    ,
    UTUnassignedItemsViewModel.prototype.dealloc = function() {
        o.prototype.dealloc.call(this),
        this.cancelRequests()
    }
    ,
    UTUnassignedItemsViewModel.prototype.cancelRequests = function() {
        0 < this.requests.length && (this.requests.forEach(function(e) {
            e.clearObservers(),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        }),
        this.requests = [])
    }
    ,
    UTUnassignedItemsViewModel.prototype.completeRequest = function(e, t) {
        e.unobserve(this),
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING);
        var i = this.requests.indexOf(e);
        0 <= i && this.requests.splice(i, 1)
    }
    ,
    UTUnassignedItemsViewModel.prototype.getRegularItemsSection = function() {
        return this.getSectionItems(UTUnassignedItemsViewModel.SECTION.ITEMS)
    }
    ,
    UTUnassignedItemsViewModel.prototype.getDuplicateSection = function() {
        return this.getSectionItems(UTUnassignedItemsViewModel.SECTION.DUPLICATES)
    }
    ,
    UTUnassignedItemsViewModel.prototype.getUntradeableDuplicateSection = function() {
        return this.getSectionItems(UTUnassignedItemsViewModel.SECTION.UNTRADABLEDUPLICATES)
    }
    ,
    UTUnassignedItemsViewModel.prototype.hasMovableItems = function() {
        return -1 < this.indexOf(function(e) {
            return e.isMovable()
        })
    }
    ,
    UTUnassignedItemsViewModel.prototype.hasTradeableItems = function() {
        return -1 < this.indexOf(function(e) {
            return !e.untradeable
        })
    }
    ,
    UTUnassignedItemsViewModel.prototype.getMovableItems = function() {
        return this.values().filter(function(e) {
            return e.isMovable()
        })
    }
    ,
    UTUnassignedItemsViewModel.prototype.hasTradeableDuplicates = function() {
        return -1 < this.indexOf(function(e) {
            return e.isTradeableDuplicate()
        })
    }
    ,
    UTUnassignedItemsViewModel.prototype.getTradeableDuplicates = function() {
        return this.values().filter(function(e) {
            return e.isTradeableDuplicate()
        })
    }
    ,
    UTUnassignedItemsViewModel.prototype.getUntradeableDuplicates = function() {
        return this.values().filter(function(e) {
            return e.isUnTradeableDuplicate()
        })
    }
    ,
    UTUnassignedItemsViewModel.prototype.getDiscardableInfo = function() {
        var i = {
            items: new UTUnassignedItemStatsDTO,
            duplicates: new UTUnassignedItemStatsDTO,
            tradeableDuplicates: new UTUnassignedItemStatsDTO,
            untradeableDuplicates: new UTUnassignedItemStatsDTO
        };
        return this.values().forEach(function(e) {
            if (e.isDiscardable() && !e.isDuplicateLoanPlayer()) {
                var t = void 0;
                (t = e.isDuplicate() ? i.duplicates : i.items).entities.push(e),
                t.count++,
                t.value += e.discardValue,
                e.isUnTradeableDuplicate() ? ((t = i.untradeableDuplicates).entities.push(e),
                t.count++,
                t.value += e.discardValue) : e.isTradeableDuplicate() && ((t = i.tradeableDuplicates).entities.push(e),
                t.count++,
                t.value += e.discardValue)
            }
        }),
        i
    }
    ,
    UTUnassignedItemsViewModel.prototype.requestUnassignedItems = function() {
        var i = this
          , e = services.Item.requestUnassignedItems();
        return gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        this.requests.push(e.observe(this, function(e, t) {
            t.success && JSUtils.isObject(t.response) && (i.dataUpdated.clearObservers(),
            i.resetCollection([]),
            i.addArray(t.response.items)),
            i.completeRequest(e, t)
        })),
        e
    }
    ,
    UTUnassignedItemsViewModel.SECTION = {
        ITEMS: 0,
        DUPLICATES: 1,
        UNTRADABLEDUPLICATES: 2
    },
    UTUnassignedItemsViewModel
}(UTItemSectionListViewModel))
  , UTUnassignedItemsView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTUnassignedItemsView() {
        var e = t.call(this) || this;
        return e.sections = [],
        e.emptyListView = null,
        e
    }
    return __extends(UTUnassignedItemsView, t),
    UTUnassignedItemsView.prototype.dealloc = function() {
        this.cleanEmptyListView(),
        this.clearSections(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTUnassignedItemsView.prototype.selectListRow = function(t) {
        this.sections.forEach(function(e) {
            return e.selectRowByItemId(t)
        })
    }
    ,
    UTUnassignedItemsView.prototype.getSection = function(e) {
        var t;
        return null !== (t = this.sections[e]) && void 0 !== t ? t : null
    }
    ,
    UTUnassignedItemsView.prototype.clearSections = function() {
        this.sections.forEach(function(e) {
            return e.dealloc()
        }),
        this.sections = []
    }
    ,
    UTUnassignedItemsView.prototype.cleanEmptyListView = function() {
        this.emptyListView && (this.emptyListView.dealloc(),
        this.emptyListView = null)
    }
    ,
    UTUnassignedItemsView.prototype.renderSection = function(e, t, i) {
        var o = this.sections[t];
        if (o ? o.clearList() : ((o = new UTSectionedItemListView).init(),
        this.sections[t] = o),
        0 === e.length)
            DOMKit.remove(o.getRootElement());
        else {
            o.addItems(e, i, ListItemPriority.PLAYER_STATS),
            o.render();
            var n = this.getRootElement();
            DOMKit.empty(n),
            this.sections.forEach(function(e) {
                return n.appendChild(e.getRootElement())
            })
        }
        return o
    }
    ,
    UTUnassignedItemsView.prototype.renderEmptyView = function(e, t, i, o) {
        this.clearSections(),
        this.cleanEmptyListView(),
        this.emptyListView = new UTListNoResultsView,
        this.emptyListView.init(),
        this.emptyListView.setHeading(e),
        this.emptyListView.setDescription(t),
        o && i && this.emptyListView.setupButton(i, o),
        this.getRootElement().append(this.emptyListView.getRootElement())
    }
    ,
    UTUnassignedItemsView.prototype.removeItemsById = function(t) {
        this.sections.forEach(function(e) {
            return e.removeItemsById(t)
        })
    }
    ,
    UTUnassignedItemsView
}(EAView));
UTUnassignedItemsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("section");
        e.classList.add("ut-unassigned-view"),
        this.__root = e,
        this._generated = !0
    }
}
,
UTUnassignedItemsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTUnassignedItemsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var _this = this
  , UTUnassignedItemsViewController = function(t) {
    function UTUnassignedItemsViewController() {
        var e = t.call(this) || this;
        return e.itemListViewDelegate = null,
        e.viewmodel = null,
        e.onDataChange = new EAObservable,
        e
    }
    return __extends(UTUnassignedItemsViewController, t),
    UTUnassignedItemsViewController.prototype.init = function() {
        this.initialized || (t.prototype.init.call(this),
        this.viewmodel || this.updateViewModel([]))
    }
    ,
    UTUnassignedItemsViewController.prototype.initWithItems = function(e) {
        this.initialized || (this.updateViewModel(e),
        this.init())
    }
    ,
    UTUnassignedItemsViewController.prototype.dealloc = function() {
        t.prototype.dealloc.call(this),
        this.itemListViewDelegate && (this.itemListViewDelegate = null),
        this.viewmodel && (this.viewmodel = null),
        this.onDataChange && (this.onDataChange.dealloc(),
        this.onDataChange = null)
    }
    ,
    UTUnassignedItemsViewController.prototype._getViewInstanceFromData = function() {
        return new UTUnassignedItemsView
    }
    ,
    UTUnassignedItemsViewController.prototype._getTelemetryId = function() {
        return "Unassigned Items - List View"
    }
    ,
    UTUnassignedItemsViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.assigncards")
    }
    ,
    UTUnassignedItemsViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        this.getUnassignedItems(!1),
        services.User.requestCurrencies(),
        TelemetryManager.trackPage(TelemetryManager.Sections.MISC, "Unassigned List"),
        getDefaultDispatcher().addObserver(AppNotification.UNASSIGNED_ITEM_ADDED, this, this.nItemAdded)
    }
    ,
    UTUnassignedItemsViewController.prototype.viewWillDisappear = function() {
        t.prototype.viewWillDisappear.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.UNASSIGNED_ITEM_ADDED, this)
    }
    ,
    UTUnassignedItemsViewController.prototype.getViewModel = function() {
        return this.viewmodel
    }
    ,
    UTUnassignedItemsViewController.prototype.updateViewModel = function(e) {
        if (this.viewmodel)
            this.viewmodel.dataUpdated.clearObservers(),
            this.viewmodel.resetCollection([]),
            this.viewmodel.addArray(e);
        else {
            var t = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORAGE_PILE_ENABLED) || !1;
            this.viewmodel = new UTUnassignedItemsViewModel(e,!!t)
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.setItemListViewDelegate = function(e) {
        this.itemListViewDelegate = e
    }
    ,
    UTUnassignedItemsViewController.prototype.removeItemsById = function(e) {
        var t, i;
        this.renderView(),
        0 === (null === (t = this.viewmodel) || void 0 === t ? void 0 : t.length) && (null === (i = this.onDataChange) || void 0 === i || i.notify())
    }
    ,
    UTUnassignedItemsViewController.prototype.updateItemSectionOptions = function() {
        var e, t, o = this, n = null === (e = this.viewmodel) || void 0 === e ? void 0 : e.getRegularItemsSection(), i = this.getView().getSection(UTUnassignedItemsViewModel.SECTION.ITEMS);
        if (i && this.viewmodel) {
            var r = null === (t = this.viewmodel) || void 0 === t ? void 0 : t.getDiscardableInfo()
              , s = services.Localization;
            if (i.setBulkHeader(s.localize("dock.label.items"), s.localize("infopanel.label.storeAllInClub"), this.onBulkActionButtonTapped.bind(this, BulkActionPopupId.ITEMS)),
            (null == n ? void 0 : n.some(function(e) {
                return !e.isMiscItem()
            })) && i.showBulkActionButton(),
            r && 0 < r.items.count) {
                var a = 1 === r.items.count ? s.localize("unassigned.sectionFooter.quickSellItem") : s.localize("unassigned.sectionFooter.quickSellItems", [r.items.count.toString()]);
                i.setFooter(a, s.localizeNumber(r.items.value), !0, function(e, t, i) {
                    o.quickSell(null != n ? n : [], r.items.value)
                })
            } else
                i.removeFooter()
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.updateDuplicateSectionOptions = function() {
        var o = this
          , e = this.getView().getSection(UTUnassignedItemsViewModel.SECTION.DUPLICATES);
        if (e && this.viewmodel) {
            var n = this.viewmodel.getDiscardableInfo().tradeableDuplicates
              , t = this.viewmodel.getDuplicateSection()
              , i = services.Localization;
            if (e.setBulkHeader(i.localize("dock.label.duplicates"), i.localize("infopanel.label.sendTradePile"), this.onBulkActionButtonTapped.bind(this, BulkActionPopupId.DUPLICATES)),
            e.showBulkActionButton(),
            0 < t.length) {
                var r = 1 === t.length ? i.localize("unassigned.sectionFooter.quickSellDuplicate") : i.localize("unassigned.sectionFooter.quickSellDuplicates", [t.length.toString()]);
                e.setFooter(r, i.localizeNumber(n.value), !0, function(e, t, i) {
                    o.quickSell(n.entities, n.value)
                })
            } else
                e.removeFooter()
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.updateUntradeableDuplicateSectionOptions = function() {
        var e = this.getView().getSection(UTUnassignedItemsViewModel.SECTION.UNTRADABLEDUPLICATES);
        if (e && this.viewmodel) {
            var t = repositories.Item
              , i = t.getPileSize(ItemPile.STORAGE)
              , o = services.Localization;
            e.setBulkHeader(o.localize("dock.label.untradeableduplicates"), o.localize("infopanel.label.storeAllInStorage"), this.onBulkActionButtonTapped.bind(this, BulkActionPopupId.UNTRADEABLEDUPLICATES)),
            e.setBulkHeaderSubtitle(o.localize("dock.label.sbcStorageCounts", ["" + t.numItemsInCache(ItemPile.STORAGE), "" + i])),
            e.addClass("storage-duplicates"),
            e.showBulkActionButton()
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.onBulkActionButtonTapped = function(e) {
        if (this.viewmodel) {
            var t = repositories.Item
              , i = new UTBulkActionPopupViewController;
            i.init();
            var o = i.getView()
              , n = this.viewmodel.getDiscardableInfo();
            if (e === BulkActionPopupId.ITEMS) {
                var r = this.viewmodel.getRegularItemsSection()
                  , s = (this.viewmodel.getMovableItems(),
                t.numItemsInCache(ItemPile.TRANSFER) + r.length <= t.getPileSize(ItemPile.TRANSFER));
                o.setupItemsPopup(this.viewmodel.hasMovableItems(), this.viewmodel.hasTradeableItems(), s, n.items.value)
            } else if (e === BulkActionPopupId.DUPLICATES) {
                var a = this.viewmodel.getDuplicateSection()
                  , l = this.viewmodel.getTradeableDuplicates()
                  , c = this.viewmodel.getUntradeableDuplicates()
                  , u = t.numItemsInCache(ItemPile.TRANSFER) + a.length <= t.getPileSize(ItemPile.TRANSFER);
                o.setupDuplicatesPopup(u, n.tradeableDuplicates.value, n.untradeableDuplicates.value, l.length, c.length)
            } else if (e === BulkActionPopupId.UNTRADEABLEDUPLICATES) {
                var d = this.viewmodel.getUntradeableDuplicateSection()
                  , h = this.viewmodel.getUntradeableDuplicates();
                u = t.numItemsInCache(ItemPile.STORAGE) + h.length <= t.getPileSize(ItemPile.STORAGE);
                o.setupUntradeableDuplicatesPopup(u, n.untradeableDuplicates.value, d.length)
            }
            i.onExit.observe(this, this.onBulkActionPopupClosed),
            gPopupClickShield.setActivePopup(i)
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.confirmStoreUntradeablesTapped = function() {
        var i = this;
        if (this.viewmodel) {
            var o = services.UserSettings
              , e = o.getSessionItem(UserSettingsKey.BULK_ACTION_STORE_UNTRADEABLES)
              , t = JSUtils.isString(e) && "true" === e.toLowerCase()
              , n = "true" === o.getItem(UserSettingsKey.BULK_ACTION_STORE_UNTRADEABLES, "false").toLowerCase()
              , r = this.viewmodel.getUntradeableDuplicates();
            if (t || n)
                services.Item.move(r, ItemPile.STORAGE, !0).observe(this, this.onMoveToStorageComplete);
            else {
                var s = services.Localization
                  , a = new UTActionConfirmationPopupViewController;
                a.init(),
                a.modalDisplayStyle = "form",
                a.modalDisplayDimensions.width = "380px",
                a.modalCanDismissFromShield = !1,
                a.setTitleText(s.localize("bulkaction.confirmpopup.storeuntradeables.title")),
                a.setBodyText(s.localize("bulkaction.confirmpopup.storeuntradeables.body", ["" + r.length])),
                gPopupClickShield.setActivePopup(a),
                a.onExit.observe(this, function(e, t) {
                    e.unobserve(i),
                    t === enums.UIDialogOptions.OK && (a.getShowConfirmationPopup() ? o.setSessionItem(UserSettingsKey.BULK_ACTION_STORE_UNTRADEABLES, "true") : o.setItem(UserSettingsKey.BULK_ACTION_STORE_UNTRADEABLES, "true"),
                    services.Item.move(r, ItemPile.STORAGE, !0).observe(i, i.onMoveToStorageComplete))
                })
            }
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.confirmSwapUntradeablesTapped = function() {
        var i = this;
        if (this.viewmodel) {
            var o = services.UserSettings
              , e = (o.getSessionItem(UserSettingsKey.BULK_ACTION_SWAP_TRADEABLES),
            o.getSwapDuplicatesWarningSkip())
              , n = this.viewmodel.getUntradeableDuplicates();
            if (e)
                services.Item.move(n, ItemPile.CLUB, !0).observe(this, this.onMoveToClubComplete);
            else {
                var t = services.Localization
                  , r = new UTActionConfirmationPopupViewController;
                r.init(),
                r.modalDisplayStyle = "form",
                r.modalDisplayDimensions.width = "380px",
                r.modalCanDismissFromShield = !1,
                r.setTitleText(t.localize("bulkaction.confirmpopup.swaptradeables.title")),
                r.setBodyText(t.localize("bulkaction.confirmpopup.swaptradeables.body")),
                gPopupClickShield.setActivePopup(r),
                r.onExit.observe(this, function(e, t) {
                    e.unobserve(i),
                    t === enums.UIDialogOptions.OK && (o.setSwapDuplicatesWarningSkip(!r.getShowConfirmationPopup()),
                    services.Item.move(n, ItemPile.CLUB, !0).observe(i, i.onMoveToClubComplete))
                })
            }
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.onBulkActionPopupClosed = function(e, t) {
        if (e.unobserve(this),
        this.viewmodel) {
            var i = this.viewmodel.getRegularItemsSection()
              , o = this.viewmodel.getDiscardableInfo()
              , n = this.viewmodel.getUntradeableDuplicates()
              , r = repositories.Item;
            switch (t) {
            case UTBulkActionPopupView.Events.ITEMS_SELL_ALL_TAPPED:
                this.quickSell(i, o.items.value);
                break;
            case UTBulkActionPopupView.Events.ITEMS_SEND_ALL_TAPPED:
                var s = r.numItemsInCache(ItemPile.TRANSFER) + i.length <= r.getPileSize(ItemPile.TRANSFER);
                0 < i.length && s && this.sendStorablesToTransferList();
                break;
            case UTBulkActionPopupView.Events.ITEMS_STORE_ALL_TAPPED:
                this.viewmodel.hasMovableItems() && this.storeInClub();
                break;
            case UTBulkActionPopupView.Events.DUPLICATES_SELL_TRADEABLES_TAPPED:
                var a = this.viewmodel.getTradeableDuplicates();
                this.quickSell(a, o.tradeableDuplicates.value);
                break;
            case UTBulkActionPopupView.Events.DUPLICATES_SELL_UNTRADEABLES_TAPPED:
                this.quickSell(n, o.untradeableDuplicates.value);
                break;
            case UTBulkActionPopupView.Events.DUPLICATES_SEND_ALL_TAPPED:
                var l = this.viewmodel.getDuplicateSection()
                  , c = r.numItemsInCache(ItemPile.TRANSFER) + l.length <= r.getPileSize(ItemPile.TRANSFER);
                this.viewmodel.hasTradeableDuplicates() && 0 < l.length && c && this.sendDuplicatesToTransferList();
                break;
            case UTBulkActionPopupView.Events.DUPLICATES_SWAP_ALL_TRADEABLES:
                this.confirmSwapUntradeablesTapped();
                break;
            case UTBulkActionPopupView.Events.DUPLICATES_STORE_ALL_UNTRADEABLES:
                this.confirmStoreUntradeablesTapped()
            }
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.renderView = function() {
        var r = this
          , s = this.getView()
          , e = services.Localization;
        if (this.viewmodel)
            if (0 === this.viewmodel.length) {
                var t = hasConnection() ? e.localize("newitems.emptymessage") : e.localize("newitems.unavailable")
                  , i = hasConnection() ? e.localize("newitems.emptydescription") : e.localize("error.checkconnection");
                s.renderEmptyView(t, i)
            } else {
                function LZb() {
                    var e;
                    if (r.viewmodel) {
                        var t = r.viewmodel.getRegularItemsSection()
                          , i = r.viewmodel.getDuplicateSection()
                          , o = r.viewmodel.getUntradeableDuplicateSection();
                        s.clearSections(),
                        0 < t.length && (s.renderSection(t, UTUnassignedItemsViewModel.SECTION.ITEMS, r.eListRowSelected.bind(r)),
                        r.updateItemSectionOptions()),
                        0 < i.length && (s.renderSection(i, UTUnassignedItemsViewModel.SECTION.DUPLICATES, r.eListRowSelected.bind(r)),
                        r.updateDuplicateSectionOptions()),
                        0 < o.length && (s.renderSection(o, UTUnassignedItemsViewModel.SECTION.UNTRADABLEDUPLICATES, r.eListRowSelected.bind(r)),
                        r.updateUntradeableDuplicateSectionOptions());
                        var n = null === (e = r.viewmodel.current()) || void 0 === e ? void 0 : e.id;
                        !isPhone() && JSUtils.isNumber(n) && s.selectListRow(n)
                    }
                }
                if (services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORAGE_PILE_ENABLED)) {
                    var o = new UTSearchCriteriaDTO;
                    services.Item.searchStorageItems(o).observe(this, function(e, t) {
                        e.unobserve(r),
                        LZb()
                    })
                } else
                    LZb()
            }
    }
    ,
    UTUnassignedItemsViewController.prototype.storeInClub = function() {
        if (this.viewmodel) {
            TelemetryManager.trackEvent(TelemetryManager.Sections.MISC, TelemetryManager.Categories.BUTTON_PRESS, "Unassigned - Store All In Club"),
            this.getView().setInteractionState(!1);
            var e = this.viewmodel.getMovableItems();
            0 === e.length ? (utils.PopupManager.showAlert(utils.PopupManager.Alerts.ALL_NEED_TO_BE_CLAIMED),
            this.getView().setInteractionState(!0)) : services.Item.move(e, ItemPile.CLUB).observe(this, this.onMoveToClubComplete)
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.sendStorablesToTransferList = function() {
        var e = this;
        if (this.viewmodel) {
            TelemetryManager.trackEvent(TelemetryManager.Sections.MISC, TelemetryManager.Categories.BUTTON_PRESS, "Unassigned - Send Storables To Transfer List"),
            this.getView().setInteractionState(!1);
            var t = this.viewmodel.getRegularItemsSection()
              , i = 1 < t.length ? utils.PopupManager.Confirmations.SEND_ALL_TO_TRANSFER_LIST : utils.PopupManager.Confirmations.SEND_TO_TRANSFER_LIST;
            utils.PopupManager.showConfirmation(i, {
                params: []
            }, function() {
                services.Item.move(t, ItemPile.TRANSFER).observe(e, e.onMoveToTransferListComplete)
            }
            .bind(this), this.confirmationCancelled.bind(this))
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.sendDuplicatesToTransferList = function() {
        var e = this;
        if (this.viewmodel) {
            TelemetryManager.trackEvent(TelemetryManager.Sections.MISC, TelemetryManager.Categories.BUTTON_PRESS, "Unassigned - Send Duplicates To Transfer List"),
            this.getView().setInteractionState(!1);
            var t = this.viewmodel.getTradeableDuplicates()
              , i = 1 < t.length ? utils.PopupManager.Confirmations.SEND_ALL_TO_TRANSFER_LIST : utils.PopupManager.Confirmations.SEND_TO_TRANSFER_LIST;
            utils.PopupManager.showConfirmation(i, {
                params: []
            }, function() {
                services.Item.move(t, ItemPile.TRANSFER).observe(e, e.onMoveToTransferListComplete)
            }
            .bind(this), this.confirmationCancelled.bind(this))
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.getUnassignedItems = function(o) {
        var n = this;
        if (void 0 === o && (o = !0),
        this.viewmodel) {
            this.viewmodel.requestUnassignedItems().observe(this, function(e, t) {
                var i;
                e.unobserve(n),
                n.getView().setInteractionState(!0),
                t.success ? (n.renderView(),
                o && (null === (i = n.onDataChange) || void 0 === i || i.notify())) : NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : services.Notification.queue([services.Localization.localize("newitems.loaderror"), UINotificationType.NEGATIVE])
            })
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.onMoveToStorageComplete = function(e, t) {
        var i, o, n;
        e.unobserve(this);
        var r = services.Localization;
        if (t.success) {
            var s = null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.itemIds.length) && void 0 !== o ? o : 0
              , a = 1 < s ? r.localize("notification.item.allToStorage", [s.toString()]) : r.localize("notification.item.oneToStorage");
            this.getUnassignedItems(),
            services.Notification.queue([a, UINotificationType.NEUTRAL])
        } else
            (null === (n = t.data) || void 0 === n ? void 0 : n.untradeableSwap) ? services.Notification.queue([r.localize("notification.item.moveFailed"), UINotificationType.NEGATIVE]) : (services.Notification.queue([r.localize("notification.item.moveFailed"), UINotificationType.NEGATIVE]),
            NetworkErrorManager.handleStatus(t.status))
    }
    ,
    UTUnassignedItemsViewController.prototype.onMoveToClubComplete = function(e, t) {
        var i, o, n;
        e.unobserve(this);
        var r = services.Localization;
        if (t.success) {
            var s = null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.itemIds.length) && void 0 !== o ? o : 0
              , a = 1 < s ? r.localize("notification.item.allToClub", [s.toString()]) : r.localize("notification.item.oneToClub");
            this.getUnassignedItems(),
            services.Notification.queue([a, UINotificationType.NEUTRAL])
        } else
            (null === (n = t.data) || void 0 === n ? void 0 : n.untradeableSwap) ? services.Notification.queue([r.localize("notification.item.moveFailed"), UINotificationType.NEGATIVE]) : (services.Notification.queue([r.localize("notification.item.moveFailed"), UINotificationType.NEGATIVE]),
            NetworkErrorManager.handleStatus(t.status))
    }
    ,
    UTUnassignedItemsViewController.prototype.onMoveToTransferListComplete = function(e, t) {
        var i, o;
        e.unobserve(this);
        var n = services.Localization;
        if (t.success) {
            var r = null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.itemIds.length) && void 0 !== o ? o : 0
              , s = 1 < r ? n.localize("notification.item.allToTradePile", [r.toString()]) : n.localize("notification.item.oneToTradePile");
            this.getUnassignedItems(),
            services.Notification.queue([s, UINotificationType.NEUTRAL])
        } else
            services.Notification.queue([n.localize("notification.item.moveFailed"), UINotificationType.NEGATIVE]),
            NetworkErrorManager.handleStatus(t.status)
    }
    ,
    UTUnassignedItemsViewController.prototype.quickSell = function(e, t) {
        var r = this
          , s = services.Localization
          , a = services.Notification
          , l = JSUtils.isValid(e[0]) && e[0].isDuplicate()
          , i = "Unassigned - Quick Sell " + (l ? "Duplicates" : "Items");
        TelemetryManager.trackEvent(TelemetryManager.Sections.MISC, TelemetryManager.Categories.BUTTON_PRESS, i),
        this.getView().setInteractionState(!1);
        function N$b(e, t) {
            var i, o;
            if (e.unobserve(r),
            t.success) {
                var n = "notification." + (l ? "duplicate" : "item") + ((null === (i = t.data) || void 0 === i ? void 0 : i.itemIds) && 1 < (null === (o = t.data) || void 0 === o ? void 0 : o.itemIds.length) ? ".allQuickSold" : ".sold");
                a.queue([s.localize(n), UINotificationType.POSITIVE]),
                r.getUnassignedItems()
            } else
                a.queue([s.localize("notification.item.quickSellFailed"), UINotificationType.NEGATIVE])
        }
        utils.PopupManager.showConfirmation(1 < e.length ? utils.PopupManager.Confirmations.CONFIRM_DISCARD_ALL : utils.PopupManager.Confirmations.CONFIRM_DISCARD, {
            params: [s.localizeNumber(t)]
        }, function() {
            services.Item.discard(e).observe(r, N$b)
        }
        .bind(this), this.confirmationCancelled.bind(this))
    }
    ,
    UTUnassignedItemsViewController.prototype.confirmationCancelled = function() {
        this.getView().setInteractionState(!0)
    }
    ,
    UTUnassignedItemsViewController.prototype.eListRowSelected = function(t) {
        var e;
        if (this.viewmodel) {
            var i = this.viewmodel.indexOf(function(e) {
                return e.id === t.id
            })
              , o = i !== this.viewmodel.getIndex();
            if (o && this.viewmodel.setIndex(i),
            JSUtils.isValid(this.itemListViewDelegate))
                o && (null === (e = this.itemListViewDelegate) || void 0 === e || e.selectListRow(this, i, t));
            else {
                var n = this.getNavigationController();
                if (n) {
                    var r = new UTItemDetailsViewController;
                    r.initWithIterator(this.viewmodel),
                    n.pushViewController(r, !0)
                }
            }
        }
    }
    ,
    UTUnassignedItemsViewController.prototype.nItemAdded = function(e, t, i) {
        var o, n = this;
        if (this.viewmodel) {
            var r = this.viewmodel.current()
              , s = 0 < this.viewmodel.length && r ? r.id : -1
              , a = i.items.filter(function(e) {
                var t;
                return !(null === (t = n.viewmodel) || void 0 === t ? void 0 : t.getItemList().includes(e))
            });
            this.viewmodel.addArray(a),
            -1 < Number(s) && this.viewmodel.setIndex(this.viewmodel.indexOf(function(e) {
                return e.id === s
            })),
            this.renderView(),
            null === (o = this.onDataChange) || void 0 === o || o.notify()
        }
    }
    ,
    UTUnassignedItemsViewController
}(EAViewController);
services.URL.registerDeepLinkID(DeepLinkSection.UNASSIGNED, function(e) {
    gClickShield.showShield(EAClickShieldView.Shield.LOADING),
    services.Item.requestUnassignedItems().observe(_this, function(e, t) {
        var i;
        e.unobserve(_this);
        var o = isPhone() ? new UTUnassignedItemsViewController : new UTUnassignedItemsSplitViewController;
        t.success && JSUtils.isObject(t.response) ? o.initWithItems(null === (i = t.response) || void 0 === i ? void 0 : i.items) : o.init(),
        function(e) {
            var t = getAppMain().getRootViewController().getPresentedViewController();
            if (t instanceof UTTabBarController) {
                var i = t.getCurrentViewController();
                i instanceof UTNavigationController && (i.pushViewController(e),
                gClickShield.hideShield(EAClickShieldView.Shield.LOADING))
            }
        }(o)
    })
});
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTUnassignedItemsSplitViewController = function(i) {
    function UTUnassignedItemsSplitViewController() {
        var e = i.call(this) || this;
        return e.listViewController = new UTUnassignedItemsViewController,
        e.itemDetailsController = null,
        e
    }
    return __extends(UTUnassignedItemsSplitViewController, i),
    UTUnassignedItemsSplitViewController.prototype.init = function() {
        var e;
        if (!this.initialized) {
            i.prototype.init.call(this),
            this.listViewController.init(),
            null === (e = this.listViewController.onDataChange) || void 0 === e || e.observe(this, this.unassignedListChanged),
            this.addChildViewController(this.listViewController);
            var t = getDefaultDispatcher();
            t.addObserver(AppNotification.ITEM_ACTIVATE, this, this.nItemActivated),
            t.addObserver(AppNotification.ITEM_DISCARD, this, this.nItemDiscarded),
            t.addObserver(AppNotification.ITEM_LIST, this, this.nItemListed),
            t.addObserver(AppNotification.ITEM_MOVE, this, this.nItemMoved),
            t.addObserver(AppNotification.ITEM_REDEEM, this, this.nItemRedeemed)
        }
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.initWithItems = function(e) {
        if (!this.initialized) {
            if (this.listViewController.initWithItems(e),
            this.listViewController.setItemListViewDelegate(this),
            0 < e.length) {
                this.itemDetailsController = new UTItemDetailsNavigationController;
                var t = this.listViewController.getViewModel();
                t && this.itemDetailsController.initWithIterator(t),
                this.itemDetailsController.enableSwiping(!1),
                this.addChildViewController(this.itemDetailsController)
            }
            this.init()
        }
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.dealloc = function() {
        this.listViewController.dealloc(),
        this.itemDetailsController && (this.itemDetailsController.dealloc(),
        this.itemDetailsController = null);
        var e = getDefaultDispatcher();
        e.removeObserver(AppNotification.ITEM_ACTIVATE, this),
        e.removeObserver(AppNotification.ITEM_DISCARD, this),
        e.removeObserver(AppNotification.ITEM_LIST, this),
        e.removeObserver(AppNotification.ITEM_MOVE, this),
        e.removeObserver(AppNotification.ITEM_REDEEM, this),
        i.prototype.dealloc.call(this)
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.assigncards")
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this),
        this.setLeftController(this.listViewController),
        this.itemDetailsController && (this.setRightController(this.itemDetailsController),
        this.itemDetailsController.setNavigationStyle(UTNavigationBarView.Style.SECONDARY))
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.selectListRow = function(e, t, i) {
        var o;
        e === this.listViewController && (this.listViewController.getView().selectListRow(Number(i.id)),
        null === (o = this.itemDetailsController) || void 0 === o || o.setIndex(t))
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.unassignedListChanged = function(e) {
        var t, i, o = this.listViewController.getViewModel();
        0 === (null == o ? void 0 : o.length) ? this.removeRightController() : (!this.rightController && this.itemDetailsController && this.setRightController(this.itemDetailsController),
        null === (t = this.itemDetailsController) || void 0 === t || t.setIndex(null !== (i = null == o ? void 0 : o.getIndex()) && void 0 !== i ? i : 0))
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.nItemActivated = function(e, t, i) {
        this.listViewController.removeItemsById(i.itemIds || [])
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.nItemDiscarded = function(e, t, i) {
        this.listViewController.removeItemsById(i.itemIds || [])
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.nItemListed = function(e, t, i) {
        this.listViewController.removeItemsById(i.itemIds || [])
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.nItemMoved = function(e, t, i) {
        this.listViewController.removeItemsById(i.itemIds || [])
    }
    ,
    UTUnassignedItemsSplitViewController.prototype.nItemRedeemed = function(e, t, i) {
        this.listViewController.removeItemsById(i.itemIds || [])
    }
    ,
    UTUnassignedItemsSplitViewController
}(UTSplitViewController)
  , UTLeaderboardsViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTLeaderboardsViewModel() {
        var e = t.call(this) || this;
        return e.permutation = new UTLeaderboardPermutationDTO,
        e.requests = [],
        e
    }
    return __extends(UTLeaderboardsViewModel, t),
    UTLeaderboardsViewModel.prototype.dealloc = function() {
        t.prototype.dealloc.call(this),
        this.cancelRequests()
    }
    ,
    UTLeaderboardsViewModel.prototype.setCategory = function(e) {
        this.permutation.category = e
    }
    ,
    UTLeaderboardsViewModel.prototype.setPeriod = function(e) {
        this.permutation.period = e
    }
    ,
    UTLeaderboardsViewModel.prototype.setView = function(e) {
        this.permutation.view = e
    }
    ,
    UTLeaderboardsViewModel.prototype.setPlatform = function(e) {
        this.permutation.platform = e
    }
    ,
    UTLeaderboardsViewModel.prototype.setStateByPermutation = function(e) {
        this.setCategory(e.category),
        this.setPeriod(e.period),
        this.setView(e.view),
        this.setPlatform(e.platform)
    }
    ,
    UTLeaderboardsViewModel.prototype.cancelRequests = function() {
        0 < this.requests.length && (this.requests.forEach(function(e) {
            e.clearObservers(),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        }),
        this.requests = [])
    }
    ,
    UTLeaderboardsViewModel.prototype.requestLeaderboardOptions = function() {
        var e = services.Leaderboards.requestOptions();
        return gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        this.requests.push(e.observe(this, this.completeRequest)),
        e
    }
    ,
    UTLeaderboardsViewModel.prototype.requestLeaderboardData = function() {
        var e = services.Leaderboards.requestLeaderboardByPermutation(this.permutation);
        return gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        this.requests.push(e.observe(this, this.completeRequest)),
        e
    }
    ,
    UTLeaderboardsViewModel.prototype.completeRequest = function(e, t) {
        e.unobserve(this),
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING);
        var i = this.requests.indexOf(e);
        0 <= i && this.requests.splice(i, 1)
    }
    ,
    UTLeaderboardsViewModel
}(EAObject))
  , UTFloatingImageButtonControl = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTFloatingImageButtonControl() {
        return e.call(this) || this
    }
    return __extends(UTFloatingImageButtonControl, e),
    UTFloatingImageButtonControl
}(UTImageButtonControl));
UTFloatingImageButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("button");
        e.classList.add("ut-image-button-control"),
        e.classList.add("ut-floating-image-button"),
        this.__root = e,
        this._generated = !0
    }
}
,
UTFloatingImageButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTFloatingImageButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTLeaderboardsEntryView = function(e) {
    function UTLeaderboardsEntryView() {
        return e.call(this) || this
    }
    return __extends(UTLeaderboardsEntryView, e),
    UTLeaderboardsEntryView.prototype.setRank = function(e) {
        this.__rank.textContent = 0 < e ? e.toString() : BLANK_STR,
        DOMKit.toggleClass(this.__rank, "first", 1 === e),
        DOMKit.toggleClass(this.__rank, "second", 2 === e),
        DOMKit.toggleClass(this.__rank, "third", 3 === e)
    }
    ,
    UTLeaderboardsEntryView.prototype.setBadge = function(e) {
        var t = this
          , i = enums.UIThemeVariation.DARK;
        this._badge.onerror = function(e) {
            t._badge.onerror = null,
            t._badge.src = AssetLocationUtils.getBadgeImageUri(UTItemEntity.DEFAULT_ASSET_ID, i)
        }
        ,
        this._badge.src = AssetLocationUtils.getBadgeImageUri(e, i)
    }
    ,
    UTLeaderboardsEntryView.prototype.setGamerTag = function(e) {
        this.__gametag.textContent = e.toString()
    }
    ,
    UTLeaderboardsEntryView.prototype.setScore = function(e, t) {
        var i = services.Localization;
        this.__score.textContent = i.localizeNumber(Number(e)),
        this.__mobileScore.textContent = i.localizeNumber(Number(e)),
        DOMKit.removeClass(this.__score, UTLeaderboardsEntryView.ScoreType.COINS),
        DOMKit.removeClass(this.__mobileScore, UTLeaderboardsEntryView.ScoreType.COINS),
        JSUtils.isString(t) && t !== UTLeaderboardsEntryView.ScoreType.NONE && (DOMKit.addClass(this.__score, t),
        DOMKit.addClass(this.__mobileScore, t))
    }
    ,
    UTLeaderboardsEntryView.prototype.setPlatform = function(e, t, i) {
        var o, n;
        DOMKit.removeClass(this.__platform, JSUtils.getObjectValues(UTLeaderboardsEntryView.PlatformType).join(" "));
        var r = t ? UTLeaderboardsEntryView.PlatformType.GENERICPC : UTLeaderboardsEntryView.PlatformType.EA
          , s = ((o = {})[GamePlatform.PC] = r,
        o[GamePlatform.PSN] = UTLeaderboardsEntryView.PlatformType.GENERICCONSOLE,
        o[GamePlatform.XBL] = UTLeaderboardsEntryView.PlatformType.GENERICCONSOLE,
        o[GamePlatform.SWI] = UTLeaderboardsEntryView.PlatformType.GENERICCONSOLE,
        o[""] = UTLeaderboardsEntryView.PlatformType.GENERICCLOUDGAMING,
        o)
          , a = ((n = {})[GamePlatform.PC] = r,
        n[GamePlatform.PSN] = UTLeaderboardsEntryView.PlatformType.PLAYSTATION,
        n[GamePlatform.XBL] = UTLeaderboardsEntryView.PlatformType.XBOX,
        n[GamePlatform.SWI] = UTLeaderboardsEntryView.PlatformType.SWITCH,
        n[""] = UTLeaderboardsEntryView.PlatformType.GENERICCLOUDGAMING,
        n)
          , l = services.Authentication.getUtasSession()
          , c = l.user ? l.user.getSelectedPersona() : null
          , u = ((null == c ? void 0 : c.platform) == e ? a : s)[e];
        i && null != u && DOMKit.addClass(this.__platform, u)
    }
    ,
    UTLeaderboardsEntryView.PlatformType = Object.freeze({
        NONE: "",
        EA: "ea",
        GENERICCLOUDGAMING: "genericCloudGaming",
        GENERICCONSOLE: "genericConsole",
        GENERICPC: "genericPC",
        PLAYSTATION: "playstation",
        STEAM: "steam",
        XBOX: "xbox",
        SWITCH: "switch"
    }),
    UTLeaderboardsEntryView.ScoreType = Object.freeze({
        NONE: "",
        COINS: "currency-coins"
    }),
    UTLeaderboardsEntryView
}(EAView);
UTLeaderboardsEntryView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-leaderboards-entry"),
        this.__rank = document.createElement("div"),
        this.__rank.classList.add("ut-leaderboards-entry--rank"),
        e.appendChild(this.__rank),
        this._badge = new EAImageView,
        this._badge.getRootElement().classList.add("ut-leaderboards-entry--badge"),
        e.appendChild(this._badge.getRootElement());
        var t = document.createElement("div");
        t.classList.add("ut-leaderboards-entry--gametag"),
        this.__gametag = document.createElement("span"),
        this.__gametag.classList.add("ut-leaderboards-entry--tag"),
        t.appendChild(this.__gametag),
        this.__mobileScore = document.createElement("span"),
        this.__mobileScore.classList.add("ut-leaderboards-entry--mobile-score"),
        t.appendChild(this.__mobileScore),
        e.appendChild(t),
        this.__platform = document.createElement("div"),
        this.__platform.classList.add("ut-leaderboards-entry--platform"),
        e.appendChild(this.__platform),
        this.__score = document.createElement("div"),
        this.__score.classList.add("ut-leaderboards-entry--score"),
        e.appendChild(this.__score),
        this.__root = e,
        this._generated = !0
    }
}
,
UTLeaderboardsEntryView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__rank = null,
    this._badge.destroy(),
    this.__gametag = null,
    this.__mobileScore = null,
    this.__platform = null,
    this.__score = null
}
,
UTLeaderboardsEntryView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTLeaderboardsHubView = function(t) {
    function UTLeaderboardsHubView() {
        var e = t.call(this) || this;
        return e.pinnedEntryView = null,
        e.entryViews = [],
        e._showGlobalPlatforms = !1,
        e
    }
    return __extends(UTLeaderboardsHubView, t),
    UTLeaderboardsHubView.prototype.init = function() {
        t.prototype.init.call(this),
        this._filterBtn.init(),
        this._floatingFilterBtn.init();
        var e = services.Localization;
        this.__rankTitle.textContent = e.localize("LOC_LB_RANK"),
        this.__platformTitle.textContent = e.localize("leaderboard.filters.platform"),
        this.showGlobalPlatforms(!1)
    }
    ,
    UTLeaderboardsHubView.prototype.dealloc = function() {
        this.clearLeaderboardEntries(),
        this.pinnedEntryView && (this.pinnedEntryView.dealloc(),
        this.pinnedEntryView = null),
        t.prototype.dealloc.call(this)
    }
    ,
    UTLeaderboardsHubView.prototype.setInteractionState = function(e) {
        t.prototype.setInteractionState.call(this, e),
        this._tabMenu.setInteractionState(e)
    }
    ,
    UTLeaderboardsHubView.prototype.getTabMenu = function() {
        return this._tabMenu
    }
    ,
    UTLeaderboardsHubView.prototype.getFilterButton = function() {
        return this._filterBtn
    }
    ,
    UTLeaderboardsHubView.prototype.getFloatingFilterButton = function() {
        return this._floatingFilterBtn
    }
    ,
    UTLeaderboardsHubView.prototype.clearLeaderboardEntries = function() {
        this.entryViews && (this.entryViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.entryViews = [])
    }
    ,
    UTLeaderboardsHubView.prototype.setCategories = function(e) {
        var t = this;
        this._tabMenu.clearTabs(),
        e.forEach(function(e) {
            t._tabMenu.addTab(e.id, services.Localization.localize(e.display))
        }, this),
        this._tabMenu.layoutSubviews(),
        this.__contentContainer.style.height = "calc(100% - " + this._tabMenu.getRootElement().offsetHeight + "px)"
    }
    ,
    UTLeaderboardsHubView.prototype.setActiveCategory = function(e) {
        this._tabMenu.setActiveTab(e)
    }
    ,
    UTLeaderboardsHubView.prototype.setUserEntry = function(e) {
        if (e) {
            this.pinnedEntryView || (this.pinnedEntryView = new UTLeaderboardsEntryView,
            this.pinnedEntryView.init(),
            this.addSubview(this.pinnedEntryView, this.__pinnedEntry),
            this.layoutSubviews());
            var t = "builder" !== e.category ? UTLeaderboardsEntryView.ScoreType.COINS : UTLeaderboardsEntryView.ScoreType.NONE
              , i = "friends" !== e.view;
            this.pinnedEntryView.setRank(e.rank),
            this.pinnedEntryView.setBadge(e.badge),
            this.pinnedEntryView.setGamerTag(e.persona),
            this.pinnedEntryView.setScore(e.score, t),
            this.pinnedEntryView.setPlatform(e.platform, i, this._showGlobalPlatforms)
        } else
            this.pinnedEntryView && this.pinnedEntryView.removeFromSuperview()
    }
    ,
    UTLeaderboardsHubView.prototype.setLeaderboardEntries = function(e) {
        var n = this;
        this.clearLeaderboardEntries(),
        e.forEach(function(e) {
            var t = new UTLeaderboardsEntryView
              , i = "builder" !== e.category ? UTLeaderboardsEntryView.ScoreType.COINS : UTLeaderboardsEntryView.ScoreType.NONE
              , o = "friends" !== e.view;
            t.init(),
            t.setRank(e.rank),
            t.setBadge(e.teamId),
            t.setGamerTag(e.persona),
            t.setScore(e.score, i),
            t.setPlatform(e.platform, o, n._showGlobalPlatforms),
            n.addSubview(t, n.__leaderboardList),
            n.entryViews.push(t)
        }, this),
        this.layoutSubviews(),
        this.__leaderboardList.scrollTop = 0
    }
    ,
    UTLeaderboardsHubView.prototype.setCategoryIcon = function(e) {
        switch (DOMKit.removeClass(this.__leaderboardListHeader, JSUtils.getObjectValues(UTLeaderboardsHubView.Style).join(" ")),
        e) {
        case UTLeaderboardsHubView.CategoryIcon.TRADER:
            DOMKit.addClass(this.__leaderboardListHeader, UTLeaderboardsHubView.Style.TRADER);
            break;
        case UTLeaderboardsHubView.CategoryIcon.COLLECTOR:
            DOMKit.addClass(this.__leaderboardListHeader, UTLeaderboardsHubView.Style.COLLECTOR);
            break;
        case UTLeaderboardsHubView.CategoryIcon.COMPETITOR:
            DOMKit.addClass(this.__leaderboardListHeader, UTLeaderboardsHubView.Style.COMPETITOR);
            break;
        case UTLeaderboardsHubView.CategoryIcon.BUILDER:
        default:
            DOMKit.addClass(this.__leaderboardListHeader, UTLeaderboardsHubView.Style.BUILDER)
        }
    }
    ,
    UTLeaderboardsHubView.prototype.setCategoryTitle = function(e) {
        this.__categoryTitle.textContent = e
    }
    ,
    UTLeaderboardsHubView.prototype.setGameTagTitle = function(e) {
        this.__gametagTitle.textContent = e
    }
    ,
    UTLeaderboardsHubView.prototype.setScoreTitle = function(e) {
        this.__scoreTitle.textContent = e
    }
    ,
    UTLeaderboardsHubView.prototype.showGlobalPlatforms = function(e) {
        this._showGlobalPlatforms = e,
        this.__platformTitle.style.display = e ? "block" : "none"
    }
    ,
    UTLeaderboardsHubView.CategoryIcon = Object.freeze({
        BUILDER: 0,
        COLLECTOR: 1,
        COMPETITOR: 2,
        TRADER: 3
    }),
    UTLeaderboardsHubView.Style = Object.freeze({
        BUILDER: "ut-leaderboards-hub--builder",
        COLLECTOR: "ut-leaderboards-hub--collector",
        COMPETITOR: "ut-leaderboards-hub--competitor",
        TRADER: "ut-leaderboards-hub--trader"
    }),
    UTLeaderboardsHubView
}(EAView);
UTLeaderboardsHubView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-leaderboards-hub"),
        this._tabMenu = new EAFilterBarView,
        e.appendChild(this._tabMenu.getRootElement()),
        this.__contentContainer = document.createElement("div"),
        this.__contentContainer.classList.add("sm-ut-content-container"),
        this.__contentContainer.classList.add("ut-content-container"),
        this.__listContainer = document.createElement("div"),
        this.__listContainer.classList.add("ut-pinned-list-container"),
        this.__listContainer.classList.add("ut-content"),
        this.__leaderboardListHeader = document.createElement("header"),
        this.__leaderboardListHeader.classList.add("ut-leaderboards-hub--header"),
        this.__categoryTitle = document.createElement("h1"),
        this.__categoryTitle.classList.add("ut-leaderboards-hub--category"),
        this.__leaderboardListHeader.appendChild(this.__categoryTitle),
        this._filterBtn = new UTImageButtonControl,
        this._filterBtn.getRootElement().classList.add("filter-btn"),
        this.__leaderboardListHeader.appendChild(this._filterBtn.getRootElement()),
        this.__listContainer.appendChild(this.__leaderboardListHeader);
        var t = document.createElement("div");
        t.classList.add("ut-leaderboards-hub--titles"),
        this.__rankTitle = document.createElement("span"),
        this.__rankTitle.classList.add("ut-leaderboards-hub--title-rank"),
        t.appendChild(this.__rankTitle),
        this.__gametagTitle = document.createElement("span"),
        this.__gametagTitle.classList.add("ut-leaderboards-hub--title-gametag"),
        t.appendChild(this.__gametagTitle),
        this.__platformTitle = document.createElement("span"),
        this.__platformTitle.classList.add("ut-leaderboards-hub--title-platform"),
        t.appendChild(this.__platformTitle),
        this.__scoreTitle = document.createElement("span"),
        this.__scoreTitle.classList.add("ut-leaderboards-hub--title-score"),
        t.appendChild(this.__scoreTitle),
        this.__listContainer.appendChild(t),
        this.__pinnedEntry = document.createElement("div"),
        this.__pinnedEntry.classList.add("ut-pinned-item"),
        this.__listContainer.appendChild(this.__pinnedEntry),
        this._floatingFilterBtn = new UTFloatingImageButtonControl,
        this._floatingFilterBtn.getRootElement().classList.add("filter-btn"),
        this._floatingFilterBtn.getRootElement().classList.add("ut-leaderboards-hub--floating-filter-btn"),
        this.__listContainer.appendChild(this._floatingFilterBtn.getRootElement()),
        this.__leaderboardList = document.createElement("div"),
        this.__leaderboardList.classList.add("ut-pinned-list"),
        this.__listContainer.appendChild(this.__leaderboardList),
        this.__contentContainer.appendChild(this.__listContainer),
        e.appendChild(this.__contentContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTLeaderboardsHubView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._tabMenu.destroy(),
    this.__contentContainer = null,
    this.__listContainer = null,
    this.__leaderboardListHeader = null,
    this.__categoryTitle = null,
    this._filterBtn.destroy(),
    this.__rankTitle = null,
    this.__gametagTitle = null,
    this.__platformTitle = null,
    this.__scoreTitle = null,
    this.__pinnedEntry = null,
    this._floatingFilterBtn.destroy(),
    this.__leaderboardList = null
}
,
UTLeaderboardsHubView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTLeaderboardFiltersView = function(t) {
    function UTLeaderboardFiltersView() {
        return t.call(this) || this
    }
    return __extends(UTLeaderboardFiltersView, t),
    UTLeaderboardFiltersView.prototype.init = function() {
        t.prototype.init.call(this),
        this._ddViewOptions.init(),
        this._ddPlatformOptions.init(),
        this._ddPeriodOptions.init(),
        this._resetBtn.init(),
        this._submitBtn.init();
        var e = services.Localization;
        this.__viewOptionLabel.textContent = e.localize("LOC_LB_VIEW"),
        this.__periodOptionLabel.textContent = e.localize("LOC_LB_PERIOD"),
        this.__platformOptionLabel.textContent = e.localize("leaderboard.filters.platform"),
        this._resetBtn.addTarget(this, this._resetPressed, EventType.TAP),
        this._submitBtn.addTarget(this, this._submitPressed, EventType.TAP)
    }
    ,
    UTLeaderboardFiltersView.prototype.dealloc = function() {
        this._resetBtn.removeTarget(this, this._resetPressed, EventType.TAP),
        this._submitBtn.removeTarget(this, this._submitPressed, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTLeaderboardFiltersView.prototype._submitPressed = function(e, t, i) {
        this._triggerActions(UTLeaderboardFiltersView.Event.SUBMIT)
    }
    ,
    UTLeaderboardFiltersView.prototype._resetPressed = function(e, t, i) {
        this._triggerActions(UTLeaderboardFiltersView.Event.RESET)
    }
    ,
    UTLeaderboardFiltersView.prototype.render = function() {
        var e = services.Localization;
        this._submitBtn.setText(e.localize("search.filter.submit")),
        this._resetBtn.setText(e.localize("search.filter.reset"))
    }
    ,
    UTLeaderboardFiltersView.prototype.getSubmitBtn = function() {
        return this._submitBtn
    }
    ,
    UTLeaderboardFiltersView.prototype.getViewOptionDropDown = function() {
        return this._ddViewOptions
    }
    ,
    UTLeaderboardFiltersView.prototype.getPeriodOptionDropDown = function() {
        return this._ddPeriodOptions
    }
    ,
    UTLeaderboardFiltersView.prototype.getPlatformOptionDropDown = function() {
        return this._ddPlatformOptions
    }
    ,
    UTLeaderboardFiltersView.prototype.setPeriodOptions = function(e) {
        var t = e.map(function(e, t) {
            return new UTDataProviderEntryDTO(t,e.id,services.Localization.localize(e.display))
        });
        this._ddPeriodOptions.setOptions(t)
    }
    ,
    UTLeaderboardFiltersView.prototype.setViewOptions = function(e) {
        var t = e.map(function(e, t) {
            return new UTDataProviderEntryDTO(t,e.id,services.Localization.localize(e.display))
        });
        this._ddViewOptions.setOptions(t)
    }
    ,
    UTLeaderboardFiltersView.prototype.setPlatformOptions = function(e) {
        var t = e.map(function(e, t) {
            return new UTDataProviderEntryDTO(t,e.id,services.Localization.localize(e.display))
        });
        this._ddPlatformOptions.setOptions(t)
    }
    ,
    UTLeaderboardFiltersView.prototype.setSelectedView = function(e) {
        this._ddViewOptions.setIndexByValue(e)
    }
    ,
    UTLeaderboardFiltersView.prototype.setSelectedPeriod = function(e) {
        this._ddPeriodOptions.setIndexByValue(e)
    }
    ,
    UTLeaderboardFiltersView.prototype.setSelectedPlatform = function(e) {
        this._ddPlatformOptions.setIndexByValue(e)
    }
    ,
    UTLeaderboardFiltersView.Event = {
        SUBMIT: "UTLeaderboardFiltersView.SUBMIT",
        RESET: "UTLeaderboardFiltersView.RESET"
    },
    UTLeaderboardFiltersView
}(EATargetActionView);
UTLeaderboardFiltersView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-leaderboards-filter-view");
        var t = document.createElement("div");
        t.classList.add("ut-leaderboards-filter--dropdown-container"),
        this.__platformOptionLabel = document.createElement("span"),
        this.__platformOptionLabel.classList.add("ut-leaderboards-filter--dropdown-label"),
        t.appendChild(this.__platformOptionLabel),
        this._ddPlatformOptions = new UTDropDownControl,
        t.appendChild(this._ddPlatformOptions.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-leaderboards-filter--dropdown-container"),
        this.__viewOptionLabel = document.createElement("span"),
        this.__viewOptionLabel.classList.add("ut-leaderboards-filter--dropdown-label"),
        i.appendChild(this.__viewOptionLabel),
        this._ddViewOptions = new UTDropDownControl,
        i.appendChild(this._ddViewOptions.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-leaderboards-filter--dropdown-container"),
        this.__periodOptionLabel = document.createElement("span"),
        this.__periodOptionLabel.classList.add("ut-leaderboards-filter--dropdown-label"),
        o.appendChild(this.__periodOptionLabel),
        this._ddPeriodOptions = new UTDropDownControl,
        o.appendChild(this._ddPeriodOptions.getRootElement()),
        e.appendChild(o);
        var n = document.createElement("div");
        n.classList.add("ut-leaderboards-button-group"),
        this._resetBtn = new UTStandardButtonControl,
        n.appendChild(this._resetBtn.getRootElement()),
        this._submitBtn = new UTStandardButtonControl,
        this._submitBtn.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._submitBtn.getRootElement()),
        e.appendChild(n),
        this.__root = e,
        this._generated = !0
    }
}
,
UTLeaderboardFiltersView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__platformOptionLabel = null,
    this._ddPlatformOptions.destroy(),
    this.__viewOptionLabel = null,
    this._ddViewOptions.destroy(),
    this.__periodOptionLabel = null,
    this._ddPeriodOptions.destroy(),
    this._resetBtn.destroy(),
    this._submitBtn.destroy()
}
,
UTLeaderboardFiltersView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTLeaderboardFiltersViewController = function(t) {
    function UTLeaderboardFiltersViewController() {
        var e = t.call(this) || this;
        return e.onFilterSubmit = new EAObservable,
        e
    }
    return __extends(UTLeaderboardFiltersViewController, t),
    UTLeaderboardFiltersViewController.prototype.init = function() {
        t.prototype.init.call(this),
        this.onFilterSubmit.init()
    }
    ,
    UTLeaderboardFiltersViewController.prototype.dealloc = function() {
        this.onFilterSubmit.dealloc(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTLeaderboardFiltersViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        TelemetryManager.trackEvent(TelemetryManager.Sections.LEADERBOARDS, TelemetryManager.Categories.FILTER, "Leaderboard filters - Sheet opened");
        var e = this.getView();
        e.setSelectedView(this.lastSelection.view),
        e.setSelectedPeriod(this.lastSelection.period),
        e.setSelectedPlatform(this.lastSelection.platform),
        e.addTarget(this, this.submitTap, UTLeaderboardFiltersView.Event.SUBMIT),
        e.addTarget(this, this.resetTap, UTLeaderboardFiltersView.Event.RESET),
        e.getViewOptionDropDown().addTarget(this, this.eViewOptionChanged, EventType.CHANGE),
        e.getPeriodOptionDropDown().addTarget(this, this.ePeriodOptionChanged, EventType.CHANGE),
        e.getPlatformOptionDropDown().addTarget(this, this.ePlatformOptionChanged, EventType.CHANGE),
        e.render()
    }
    ,
    UTLeaderboardFiltersViewController.prototype.viewWillDisappear = function() {
        t.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.submitTap, UTLeaderboardFiltersView.Event.SUBMIT),
        e.removeTarget(this, this.resetTap, UTLeaderboardFiltersView.Event.RESET),
        e.getViewOptionDropDown().removeTarget(this, this.eViewOptionChanged, EventType.CHANGE),
        e.getPeriodOptionDropDown().removeTarget(this, this.ePeriodOptionChanged, EventType.CHANGE),
        e.getPlatformOptionDropDown().removeTarget(this, this.ePlatformOptionChanged, EventType.CHANGE)
    }
    ,
    UTLeaderboardFiltersViewController.prototype.update = function(e, t, i) {
        var o = this.getView();
        o.setViewOptions(t),
        o.setPeriodOptions(i),
        o.setPlatformOptions(factories.DataProvider.getLeaderboardPlatformFilterDP()),
        o.setSelectedView(e.view),
        o.setSelectedPeriod(e.period),
        o.setSelectedPlatform(e.platform),
        this.lastSelection = e
    }
    ,
    UTLeaderboardFiltersViewController.prototype._getViewInstanceFromData = function() {
        return new UTLeaderboardFiltersView
    }
    ,
    UTLeaderboardFiltersViewController.prototype.submitTap = function(e, t) {
        var i = new UTLeaderboardPermutationDTO;
        i.view = e.getViewOptionDropDown().value,
        i.period = e.getPeriodOptionDropDown().value,
        i.platform = e.getPlatformOptionDropDown().value,
        this.onFilterSubmit.notify(i),
        this.lastSelection = i,
        this.onExit.notify()
    }
    ,
    UTLeaderboardFiltersViewController.prototype.resetTap = function(e, t) {
        var i = new UTLeaderboardPermutationDTO;
        e.setSelectedView(i.view),
        e.setSelectedPeriod(i.period),
        e.setSelectedPlatform(i.platform)
    }
    ,
    UTLeaderboardFiltersViewController.prototype.eViewOptionChanged = function(e, t) {
        TelemetryManager.trackEvent(TelemetryManager.Sections.LEADERBOARDS, TelemetryManager.Categories.FILTER, "Leaderboard filters - View Option Changed")
    }
    ,
    UTLeaderboardFiltersViewController.prototype.ePeriodOptionChanged = function(e, t) {
        TelemetryManager.trackEvent(TelemetryManager.Sections.LEADERBOARDS, TelemetryManager.Categories.FILTER, "Leaderboard filters - Period Option Changed")
    }
    ,
    UTLeaderboardFiltersViewController.prototype.ePlatformOptionChanged = function(e, t) {
        TelemetryManager.trackEvent(TelemetryManager.Sections.LEADERBOARDS, TelemetryManager.Categories.FILTER, "Leaderboard filters - Platform Option Changed")
    }
    ,
    UTLeaderboardFiltersViewController
}(BasePopupViewController)
  , UTLeaderboardsHubViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(o) {
    function UTLeaderboardsHubViewController() {
        var e = o.call(this) || this;
        return e.viewModel = null,
        e
    }
    return __extends(UTLeaderboardsHubViewController, o),
    UTLeaderboardsHubViewController.prototype.init = function() {
        var e = this;
        if (!this.initialized) {
            o.prototype.init.call(this),
            this.viewModel = new UTLeaderboardsViewModel,
            this.viewModel.init();
            var t = services.Localization;
            this.filtersModal = new UTLeaderboardFiltersViewController,
            this.filtersModal.init(),
            this.filtersModal.modalDisplayStyle = "sheet",
            this.filtersModal.modalCanDismissFromShield = !0,
            this.filtersModal.modalSheetTitle = t.localize("leaderboard.filters.title"),
            this.filtersModal.onExit.observe(this, function() {
                return e.dismissViewController()
            }),
            this.filtersModal.onFilterSubmit.observe(this, this._onFilterSubmit);
            var i = this.getView();
            i.getTabMenu().addTarget(this, this.eTabSelected, EventType.TAP);
            function I3b() {
                return e.presentViewController(e.filtersModal)
            }
            i.getFilterButton().addTarget(this, I3b, EventType.TAP),
            i.getFloatingFilterButton().addTarget(this, I3b, EventType.TAP)
        }
    }
    ,
    UTLeaderboardsHubViewController.prototype.dealloc = function() {
        this.filtersModal.onFilterSubmit.unobserve(this),
        this.filtersModal.onExit.unobserve(this),
        this.filtersModal.dealloc(),
        o.prototype.dealloc.call(this),
        this.viewModel && (this.viewModel.dealloc(),
        this.viewModel = null)
    }
    ,
    UTLeaderboardsHubViewController.prototype._getViewInstanceFromData = function() {
        return new UTLeaderboardsHubView
    }
    ,
    UTLeaderboardsHubViewController.prototype._getTelemetryId = function() {
        return "Leaderboards - Hub"
    }
    ,
    UTLeaderboardsHubViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.leaderboards")
    }
    ,
    UTLeaderboardsHubViewController.prototype.viewDidAppear = function() {
        var e;
        o.prototype.viewDidAppear.call(this),
        null === (e = this.getNavigationController()) || void 0 === e || e.setNavigationVisibility(!0, !0),
        this.updateGameTagTitle(!1),
        this.retrieveLeaderboardsData(),
        TelemetryManager.trackPage(TelemetryManager.Sections.LEADERBOARDS, "Leaderboards - Hub")
    }
    ,
    UTLeaderboardsHubViewController.prototype.updateGameTagTitle = function(e) {
        var t, i = null === (t = services.User.getUser()) || void 0 === t ? void 0 : t.getSelectedPersona();
        if (i) {
            var o = services.Localization
              , n = this.getView();
            e ? n.setGameTagTitle(o.localize("leaderboard.players")) : i.isPC ? n.setGameTagTitle(o.localize("LOC_LB_PERSONA_PC")) : i.isPlaystation ? n.setGameTagTitle(o.localize("LOC_LB_PERSONA_PS3")) : i.isSwitch ? n.setGameTagTitle(o.localize("LOC_LB_PERSONA_SW")) : n.setGameTagTitle(o.localize("LOC_LB_PERSONA_360"))
        }
    }
    ,
    UTLeaderboardsHubViewController.prototype.viewWillDisappear = function() {
        var e;
        o.prototype.viewWillDisappear.call(this),
        null === (e = this.viewModel) || void 0 === e || e.cancelRequests()
    }
    ,
    UTLeaderboardsHubViewController.prototype.getIconTypeFromCategory = function(e) {
        switch (e) {
        case "builder":
            return UTLeaderboardsHubView.CategoryIcon.BUILDER;
        case "trader":
            return UTLeaderboardsHubView.CategoryIcon.TRADER;
        case "collector":
            return UTLeaderboardsHubView.CategoryIcon.COLLECTOR;
        case "competitor":
            return UTLeaderboardsHubView.CategoryIcon.COMPETITOR
        }
        return UTLeaderboardsHubView.CategoryIcon.COMPETITOR
    }
    ,
    UTLeaderboardsHubViewController.prototype.onRequestLeaderboardComplete = function(e, t) {
        e.unobserve(this),
        t.success && JSUtils.isObject(t.response) ? this.getView().setLeaderboardEntries(t.response.entries) : NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : (t.error && t.error.code === UtasErrorCode.SERVICE_IS_DISABLED ? (services.Notification.queue([services.Localization.localize("popup.error.LeaderboardsDown"), UINotificationType.NEGATIVE]),
        services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.LEADERBOARDS_ENABLED, !1)) : services.Notification.queue([services.Localization.localize("popup.body.genericError"), UINotificationType.NEGATIVE]),
        getAppMain().getRootViewController().setGameViewTab(UTGameTabBarController.TabTag.HOME))
    }
    ,
    UTLeaderboardsHubViewController.prototype.retrieveLeaderboardsData = function() {
        var e, l = this.getView();
        null === (e = this.viewModel) || void 0 === e || e.requestLeaderboardOptions().observe(this, function onRequestOptionsComplete(e, t) {
            var i;
            if (e.unobserve(this),
            t.success && t.response && !JSUtils.isString(t.response)) {
                var o = t.response.selection.category
                  , n = []
                  , r = []
                  , s = [];
                t.response.options.forEach(function(e) {
                    "category" === e.groupId ? n.push(e) : "view" === e.groupId ? r.push(e) : "period" === e.groupId && s.push(e)
                }, this);
                var a = services.Localization;
                l.setCategories(n),
                l.setActiveCategory(null === (i = t.response.selection) || void 0 === i ? void 0 : i.category),
                this.filtersModal.update(t.response.selection, r, s),
                l.setCategoryTitle(a.localize("LOC_LB_INSET_" + o.toUpperCase())),
                l.setScoreTitle(a.localize("LOC_LB_SCORE_" + o.toUpperCase())),
                l.setCategoryIcon(this.getIconTypeFromCategory(o)),
                this.viewModel.setStateByPermutation(t.response.selection),
                this.viewModel.requestLeaderboardData().observe(this, this.onRequestLeaderboardComplete)
            } else
                NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : (t.error && t.error.code === UtasErrorCode.SERVICE_IS_DISABLED ? (services.Notification.queue([services.Localization.localize("popup.error.LeaderboardsDown"), UINotificationType.NEGATIVE]),
                services.Configuration.setFeatureEnabled(UTServerSettingsRepository.KEY.LEADERBOARDS_ENABLED, !1)) : services.Notification.queue([services.Localization.localize("popup.body.genericError"), UINotificationType.NEGATIVE]),
                getAppMain().getRootViewController().setGameViewTab(UTGameTabBarController.TabTag.HOME))
        })
    }
    ,
    UTLeaderboardsHubViewController.prototype.eTabSelected = function(e, t, i) {
        var o, n, r = i.id.toString(), s = this.getView();
        null === (o = this.viewModel) || void 0 === o || o.setCategory(r),
        null === (n = this.viewModel) || void 0 === n || n.requestLeaderboardData().observe(this, this.onRequestLeaderboardComplete);
        var a = services.Localization;
        s.setCategoryTitle(a.localize("LOC_LB_INSET_" + r.toUpperCase())),
        s.setScoreTitle(a.localize("LOC_LB_SCORE_" + r.toUpperCase())),
        s.setCategoryIcon(this.getIconTypeFromCategory(r)),
        TelemetryManager.trackEvent(TelemetryManager.Sections.LEADERBOARDS, TelemetryManager.Categories.BUTTON_PRESS, "Leaderboard filters - Category Selected - " + r)
    }
    ,
    UTLeaderboardsHubViewController.prototype._updateViewGlobal = function(e) {
        this.getView().showGlobalPlatforms(e),
        this.updateGameTagTitle(e)
    }
    ,
    UTLeaderboardsHubViewController.prototype._onFilterSubmit = function(e, t) {
        var i, o, n, r;
        this._updateViewGlobal("global" == t.platform),
        null === (i = this.viewModel) || void 0 === i || i.setPlatform(t.platform),
        null === (o = this.viewModel) || void 0 === o || o.setPeriod(t.period),
        null === (n = this.viewModel) || void 0 === n || n.setView(t.view),
        null === (r = this.viewModel) || void 0 === r || r.requestLeaderboardData().observe(this, this.onRequestLeaderboardComplete),
        TelemetryManager.trackEvent(TelemetryManager.Sections.LEADERBOARDS, TelemetryManager.Categories.FILTER, "Leaderboard filters - Filters popup submit")
    }
    ,
    UTLeaderboardsHubViewController
}(EAViewController))
  , UTClaimCampaignRewardsView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTClaimCampaignRewardsView() {
        return e.call(this) || this
    }
    return __extends(UTClaimCampaignRewardsView, e),
    UTClaimCampaignRewardsView.prototype.init = function() {
        e.prototype.init.call(this),
        this._btnClaim.init(),
        this._btnClaim.addTarget(this, this.handleButtonEvent, EventType.TAP),
        this._crest.init(),
        this._crest.src = "images/objectives/generic.png"
    }
    ,
    UTClaimCampaignRewardsView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTClaimCampaignRewardsView.prototype.setDescription = function(e) {
        this.__desc.textContent = e
    }
    ,
    UTClaimCampaignRewardsView.prototype.setButtonLabel = function(e) {
        this._btnClaim.setText(e)
    }
    ,
    UTClaimCampaignRewardsView.prototype.setButtonInteractionState = function(e) {
        this._btnClaim.setInteractionState(e)
    }
    ,
    UTClaimCampaignRewardsView.prototype.handleButtonEvent = function(e, t, i) {
        t === EventType.TAP && this._triggerActions(UTClaimCampaignRewardsView.Event.CLAIM_REWARD)
    }
    ,
    UTClaimCampaignRewardsView.Event = {
        CLAIM_REWARD: "UTClaimCampaignRewardsView.CLAIM_REWARD"
    },
    UTClaimCampaignRewardsView
}(EATargetActionView));
UTClaimCampaignRewardsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-claim-campaign-rewards-view");
        var t = document.createElement("div");
        t.classList.add("ut-claim-campaign-rewards-view--container"),
        this._crest = new EAImageView,
        this._crest.getRootElement().classList.add("ut-claim-campaign-rewards-view--crest"),
        t.appendChild(this._crest.getRootElement()),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-claim-campaign-rewards-view--title"),
        t.appendChild(this.__title),
        this.__desc = document.createElement("p"),
        this.__desc.classList.add("ut-claim-campaign-rewards-view--description"),
        t.appendChild(this.__desc),
        this._btnClaim = new UTStandardButtonControl,
        this._btnClaim.getRootElement().classList.add("call-to-action"),
        t.appendChild(this._btnClaim.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTClaimCampaignRewardsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._crest.destroy(),
    this.__title = null,
    this.__desc = null,
    this._btnClaim.destroy()
}
,
UTClaimCampaignRewardsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTClaimCampaignRewardsViewController = function(r) {
    function UTClaimCampaignRewardsViewController(e) {
        var t = r.call(this) || this;
        return t.objectivesViewModel = e.objectivesViewModel,
        t
    }
    return __extends(UTClaimCampaignRewardsViewController, r),
    UTClaimCampaignRewardsViewController.prototype._getTelemetryId = function() {
        return "Objectives - Claim Campaign Rewards"
    }
    ,
    UTClaimCampaignRewardsViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.objectives")
    }
    ,
    UTClaimCampaignRewardsViewController.prototype._getViewInstanceFromData = function() {
        return new UTClaimCampaignRewardsView
    }
    ,
    UTClaimCampaignRewardsViewController.prototype.viewDidAppear = function() {
        var e;
        r.prototype.viewDidAppear.call(this);
        var t = this.objectivesViewModel.getCampaign()
          , i = null !== (e = null == t ? void 0 : t.title) && void 0 !== e ? e : BLANK_STR
          , o = services.Localization
          , n = this.getView();
        n.setTitle(o.localize("scmp.claimrewards.title", [i])),
        n.setDescription(o.localize("scmp.claimrewards.desc")),
        n.setButtonLabel(o.localize("objective.rewards.claim")),
        n.addTarget(this, this.handleViewEvent, UTClaimCampaignRewardsView.Event.CLAIM_REWARD)
    }
    ,
    UTClaimCampaignRewardsViewController.prototype.showCampaignRewards = function(e) {
        var t = services.Localization
          , i = new FCGameRewardsViewController(e)
          , o = i.getView();
        i.init(),
        i.modalDisplayDimensions.width = "24em",
        o.setTitle(t.localize("scmp.generic.rewards.title")),
        o.setDescription(t.localize(0 < e.length ? "objective.rewards.claimAlldescription" : "objective.rewards.autoclaimed")),
        o.setButtonText(t.localize("common.dialog.ok")),
        gPopupClickShield.setActivePopup(i)
    }
    ,
    UTClaimCampaignRewardsViewController.prototype.claimCampaignRewards = function() {
        var n = this;
        this.objectivesViewModel.claimExpiredSeasonRewards().observe(this, function(e, t) {
            var i, o;
            e.unobserve(n),
            t.success && t.data ? (n.showCampaignRewards(t.data.rewards),
            n.getView().setButtonInteractionState(!1)) : NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : (services.Notification.queue(["notification.scmp.claimrewards.error", UINotificationType.NEGATIVE]),
            (null === (i = t.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && (null === (o = n.getNavigationController()) || void 0 === o || o.popToRootViewController()))
        })
    }
    ,
    UTClaimCampaignRewardsViewController.prototype.handleViewEvent = function(e, t, i) {
        t === UTClaimCampaignRewardsView.Event.CLAIM_REWARD && this.claimCampaignRewards()
    }
    ,
    UTClaimCampaignRewardsViewController
}(EAViewController)
  , UTNoCampaignView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTNoCampaignView(e) {
        var t = i.call(this) || this;
        return t.loc = e.localization,
        t
    }
    return __extends(UTNoCampaignView, i),
    UTNoCampaignView.prototype.init = function() {
        i.prototype.init.call(this),
        this._crest.init(),
        this._crest.src = "images/objectives/generic.png",
        this.__title.textContent = this.loc.localize("scmp.nocampaign.title"),
        this.__desc.textContent = this.loc.localize("scmp.nocampaign.description")
    }
    ,
    UTNoCampaignView
}(EAView));
UTNoCampaignView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-no-campaign-view"),
        this._crest = new EAImageView,
        this._crest.getRootElement().classList.add("ut-no-campaign-view--crest"),
        e.appendChild(this._crest.getRootElement()),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-no-campaign-view--title"),
        e.appendChild(this.__title),
        this.__desc = document.createElement("p"),
        this.__desc.classList.add("ut-no-campaign-view--description"),
        e.appendChild(this.__desc),
        this.__root = e,
        this._generated = !0
    }
}
,
UTNoCampaignView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._crest.destroy(),
    this.__title = null,
    this.__desc = null
}
,
UTNoCampaignView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var GameRewardStyle, UTNoCampaignViewController = function(e) {
    function UTNoCampaignViewController() {
        return e.call(this) || this
    }
    return __extends(UTNoCampaignViewController, e),
    UTNoCampaignViewController.prototype._getTelemetryId = function() {
        return "Objectives - No Active Campaign"
    }
    ,
    UTNoCampaignViewController.prototype._getViewInstanceFromData = function() {
        return new UTNoCampaignView({
            localization: services.Localization
        })
    }
    ,
    UTNoCampaignViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.objectives")
    }
    ,
    UTNoCampaignViewController
}(EAViewController);
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
!function(e) {
    e.COIN = "coin-reward",
    e.CLUB_COIN = "club_coin-reward",
    e.COIN_BOOST = "coin_boost-reward",
    e.CHAMPION_POINTS = "champions_qualification_points-reward",
    e.CHAMPION_STAGE_ENTRY = "champions-stage-entry-reward",
    e.HIDDEN_REWARD = "hidden-reward",
    e.ITEM_REWARD = "item-reward",
    e.META_ITEM_REWARD = "meta_item-reward",
    e.MYSTADIUM_TIER = "reward--mystadium-tier",
    e.MYSTADIUM_SLOT = "reward--mystadium-slot",
    e.PACK_REWARD = "pack-reward",
    e.REWARD = "reward",
    e.TITLE = "reward-title",
    e.XP = "xp-reward",
    e.BUNDLE = "bundle"
}(GameRewardStyle = GameRewardStyle || {});
var UTRewardIconView = function(e) {
    function UTRewardIconView() {
        return e.call(this) || this
    }
    return __extends(UTRewardIconView, e),
    UTRewardIconView.prototype.setValue = function(e) {
        this.__value.textContent = services.Localization.localizeNumber(e) + " "
    }
    ,
    UTRewardIconView.prototype.setRewardTypeClass = function(e) {
        var t = [GameRewardStyle.CHAMPION_STAGE_ENTRY, RewardType.CHAMPION_QUALIFICATION_POINTS, RewardType.XP, RewardType.COIN, RewardType.PACK, RewardType.ITEM, RewardType.MYSTADIUM_SLOT, RewardType.MYSTADIUM_TIER].join(" ");
        switch (DOMKit.removeClass(this.__image, t),
        e) {
        case RewardType.CHAMPION_STAGE_ENTRY:
            DOMKit.addClass(this.__image, GameRewardStyle.CHAMPION_STAGE_ENTRY);
            break;
        default:
            DOMKit.addClass(this.__image, e)
        }
    }
    ,
    UTRewardIconView.prototype.setPackTierClass = function(e) {
        switch (DOMKit.removeClass(this.__image, "bronze silver gold"),
        e) {
        case PurchasePackTier.BRONZE:
            DOMKit.addClass(this.__image, "bronze");
            break;
        case PurchasePackTier.SILVER:
            DOMKit.addClass(this.__image, "silver");
            break;
        case PurchasePackTier.GOLD:
            DOMKit.addClass(this.__image, "gold");
            break;
        case PurchasePackTier.SPECIAL:
            DOMKit.addClass(this.__image, "special");
            break;
        case PurchasePackTier.ENCORE:
            DOMKit.addClass(this.__image, "encore");
            break;
        case PurchasePackTier.GENERIC:
        default:
            DOMKit.addClass(this.__image, "generic")
        }
    }
    ,
    UTRewardIconView.prototype.setItemClass = function(e) {
        if (e.isCoinBoost())
            DOMKit.addClass(this.__image, GameRewardStyle.COIN_BOOST);
        else if (e.isPlayerPickItem())
            DOMKit.addClass(this.__image, "player-pick");
        else if (!e.isSpecial()) {
            var t = void 0;
            t = e.isBronzeRating() ? "bronze" : e.isSilverRating() ? "silver" : "gold",
            DOMKit.addClass(this.__image, t)
        }
    }
    ,
    UTRewardIconView.prototype.render = function(e, t) {
        switch (void 0 === t && (t = !1),
        t || (this.__type.textContent = UTLocalizationUtil.buildRewardString(e, services.Localization)),
        this.setRewardTypeClass(e.type),
        e.type) {
        case RewardType.MYSTADIUM_SLOT:
        case RewardType.CHAMPION_QUALIFICATION_POINTS:
        case RewardType.CHAMPION_STAGE_ENTRY:
        case RewardType.XP:
        case RewardType.COIN:
            this.setValue(e.value);
            break;
        case RewardType.PACK:
            this.setPackTierClass(e.assetId);
            break;
        case RewardType.MYSTADIUM_TIER:
        case RewardType.ITEM:
            DebugUtils.Assert(JSUtils.isValid(e.item), "Missing item entity from item reward."),
            e.item && this.setItemClass(e.item)
        }
    }
    ,
    UTRewardIconView
}(EAView);
UTRewardIconView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("li");
        this.__image = document.createElement("div"),
        this.__image.classList.add("image"),
        e.appendChild(this.__image);
        var t = document.createElement("div");
        t.classList.add("reward-info");
        var i = document.createElement("div");
        i.classList.add("reward-container"),
        this.__value = document.createElement("span"),
        this.__value.classList.add("value"),
        i.appendChild(this.__value),
        this.__type = document.createElement("span"),
        this.__type.classList.add("type"),
        i.appendChild(this.__type),
        t.appendChild(i),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTRewardIconView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__image = null,
    this.__value = null,
    this.__type = null
}
,
UTRewardIconView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var BaseObjectiveTaskView = function(e) {
    function BaseObjectiveTaskView() {
        return e.call(this) || this
    }
    return __extends(BaseObjectiveTaskView, e),
    BaseObjectiveTaskView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    BaseObjectiveTaskView.prototype.setProgress = function(e, t) {
        this.__progress.textContent = services.Localization.localize("common.fraction", [e.toString(), t.toString()]),
        DOMKit.toggleClass(this.__progress, "done", e === t)
    }
    ,
    BaseObjectiveTaskView.prototype.clearStateStyles = function() {
        DOMKit.removeClass(this.__state, JSUtils.getObjectValues(BaseObjectiveTaskView.State).join(" "))
    }
    ,
    BaseObjectiveTaskView.prototype.setState = function(e) {
        this.clearStateStyles(),
        DOMKit.addClass(this.__state, e)
    }
    ,
    BaseObjectiveTaskView.prototype.setRedeemable = function() {
        this.setState(BaseObjectiveTaskView.State.REDEEM)
    }
    ,
    BaseObjectiveTaskView.prototype.setComplete = function() {
        this.setState(BaseObjectiveTaskView.State.COMPLETE)
    }
    ,
    BaseObjectiveTaskView.State = {
        NONE: "",
        COMPLETE: "complete",
        REDEEM: "redeem"
    },
    BaseObjectiveTaskView
}(EATargetActionView)
  , UTObjectiveTaskCondensedView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTObjectiveTaskCondensedView() {
        return e.call(this) || this
    }
    return __extends(UTObjectiveTaskCondensedView, e),
    UTObjectiveTaskCondensedView.prototype.setReward = function(e) {
        this._mainReward.render(e, !0)
    }
    ,
    UTObjectiveTaskCondensedView.prototype.hideIcon = function() {
        this._mainReward.hide()
    }
    ,
    UTObjectiveTaskCondensedView
}(BaseObjectiveTaskView));
UTObjectiveTaskCondensedView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-task-view--condensed"),
        e.classList.add("ut-objective-task-view"),
        this._mainReward = new UTRewardIconView,
        e.appendChild(this._mainReward.getRootElement()),
        this.__title = document.createElement("div"),
        this.__title.classList.add("ut-objective-task-view--title"),
        this.__title.classList.add("ut-objective-task-view--cell"),
        e.appendChild(this.__title),
        this.__progress = document.createElement("div"),
        this.__progress.classList.add("ut-objective-task-view--progress"),
        this.__progress.classList.add("ut-objective-task-view--cell"),
        e.appendChild(this.__progress),
        this.__state = document.createElement("div"),
        this.__state.classList.add("ut-objective-task-view--state"),
        this.__state.classList.add("ut-objective-task-view--cell"),
        e.appendChild(this.__state),
        this.__root = e,
        this._generated = !0
    }
}
,
UTObjectiveTaskCondensedView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainReward.destroy(),
    this.__title = null,
    this.__progress = null,
    this.__state = null
}
,
UTObjectiveTaskCondensedView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTObjectiveStatusLabelView = function(e) {
    function UTObjectiveStatusLabelView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTObjectiveStatusLabelView, e),
    UTObjectiveStatusLabelView.prototype.setType = function(e) {
        var t = JSUtils.getObjectValues(UTObjectiveStatusLabelView.Type).join(" ");
        this.removeClass(t),
        this.addClass(e)
    }
    ,
    UTObjectiveStatusLabelView.prototype.setText = function(e) {
        this.__text.textContent = e
    }
    ,
    UTObjectiveStatusLabelView.Type = Object.freeze({
        NON_REPEATABLE: "no-repeat",
        REFRESH: "refresh",
        REPEATABLE: "repeat"
    }),
    UTObjectiveStatusLabelView
}(EAView);
UTObjectiveStatusLabelView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-status-label-view"),
        this.__text = document.createElement("span"),
        this.__text.classList.add("text"),
        e.appendChild(this.__text),
        this.__root = e,
        this._generated = !0
    }
}
,
UTObjectiveStatusLabelView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__text = null
}
,
UTObjectiveStatusLabelView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var RewardDescriptionView = function(e) {
    function RewardDescriptionView() {
        return e.call(this) || this
    }
    return __extends(RewardDescriptionView, e),
    RewardDescriptionView.prototype.setValue = function(e) {
        this.__value.textContent = services.Localization.localizeNumber(e) + " "
    }
    ,
    RewardDescriptionView.prototype.render = function(e) {
        if (this.__type.textContent = UTLocalizationUtil.buildRewardString(e, services.Localization),
        e.isXP)
            this.setValue(e.value);
        else
            switch (e.type) {
            case RewardType.MYSTADIUM_SLOT:
            case RewardType.CHAMPION_QUALIFICATION_POINTS:
            case RewardType.CHAMPION_STAGE_ENTRY:
            case RewardType.COIN:
                this.setValue(e.value);
                break;
            case RewardType.PACK:
                break;
            case RewardType.MYSTADIUM_TIER:
            case RewardType.ITEM:
                DebugUtils.Assert(JSUtils.isValid(this.getRewardItem(e)), "Missing item entity from item reward.")
            }
    }
    ,
    RewardDescriptionView.prototype.getRewardItem = function(e) {
        return e instanceof UTRewardVO ? e.item : e.utItem
    }
    ,
    RewardDescriptionView
}(EAView);
RewardDescriptionView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("li")
          , t = document.createElement("div");
        t.classList.add("reward-info");
        var i = document.createElement("div");
        i.classList.add("reward-container"),
        this.__value = document.createElement("span"),
        this.__value.classList.add("value"),
        i.appendChild(this.__value),
        this.__type = document.createElement("span"),
        this.__type.classList.add("type"),
        i.appendChild(this.__type),
        t.appendChild(i),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
RewardDescriptionView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__value = null,
    this.__type = null
}
,
RewardDescriptionView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var TileRewardListView = function(t) {
    function TileRewardListView() {
        var e = t.call(this) || this;
        return e.rewardViews = [],
        e
    }
    return __extends(TileRewardListView, t),
    TileRewardListView.prototype.dealloc = function() {
        this.clearRewardViews(),
        t.prototype.dealloc.call(this)
    }
    ,
    TileRewardListView.prototype.render = function(e) {
        if (this.clearRewardViews(),
        DebugUtils.Assert(0 < e.length, "No rewards to render"),
        !(e.length <= 0)) {
            var t = this.getRootElement()
              , i = new RewardDescriptionView
              , o = e[0];
            if (i.init(),
            i.render(o),
            this.rewardViews.push(i),
            this.addSubview(i),
            this.layoutSubviews(),
            1 < e.length) {
                var n = (e.length - 1).toString()
                  , r = services.Localization.localize("sbc.rewards.more", [n])
                  , s = document.createElement("li");
                s.textContent = r,
                DOMKit.addClass(s, "more-rewards-label"),
                t.appendChild(s)
            }
        }
    }
    ,
    TileRewardListView.prototype.clearRewardViews = function() {
        this.rewardViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.rewardViews = []
    }
    ,
    TileRewardListView
}(EAView);
TileRewardListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("ul");
        e.classList.add("tile-reward-list-view"),
        this.__root = e,
        this._generated = !0
    }
}
,
TileRewardListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
TileRewardListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var ObjectiveTasksView = function(t) {
    function ObjectiveTasksView() {
        var e = t.call(this) || this;
        return e.tasksViews = [],
        e
    }
    return __extends(ObjectiveTasksView, t),
    ObjectiveTasksView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    ObjectiveTasksView.prototype.renderTasks = function(e, t) {
        void 0 === t && (t = 0),
        this.removeAllTasks();
        var i = services.Localization
          , o = 0 < t ? "scmp.objective.tasks.title.any" : "scmp.objective.tasks.title";
        this.__tasksLabel.textContent = i.localize(o, [t.toString()]),
        this.setTasks(e)
    }
    ,
    ObjectiveTasksView.prototype.setTasks = function(e) {
        var t = this;
        this.tasksViews = e,
        this.tasksViews.forEach(function(e) {
            return t.__tasks.append(e.getRootElement())
        })
    }
    ,
    ObjectiveTasksView.prototype.removeAllTasks = function() {
        this.tasksViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.__tasks.innerHTML = ""
    }
    ,
    ObjectiveTasksView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this.__tasks.classList.toggle("expanded"),
        this.__tasksLabel.classList.toggle("expanded")
    }
    ,
    ObjectiveTasksView.prototype.dealloc = function() {
        this.removeAllTasks(),
        t.prototype.dealloc.call(this)
    }
    ,
    ObjectiveTasksView
}(EATargetActionView);
ObjectiveTasksView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-group-view--tasks-container"),
        this.__tasksLabel = document.createElement("h2"),
        this.__tasksLabel.classList.add("task-label"),
        this.__tasksLabel.classList.add("ut-objective-group-view--subtitle"),
        e.appendChild(this.__tasksLabel),
        this.__tasks = document.createElement("div"),
        this.__tasks.classList.add("ut-objective-group-view--tasks"),
        e.appendChild(this.__tasks),
        this.__root = e,
        this._generated = !0
    }
}
,
ObjectiveTasksView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tasksLabel = null,
    this.__tasks = null
}
,
ObjectiveTasksView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var BaseObjectiveGroupView = function(t) {
    function BaseObjectiveGroupView() {
        var e = t.call(this) || this;
        return e.id = -1,
        e.lockedByGroups = [],
        e
    }
    return __extends(BaseObjectiveGroupView, t),
    BaseObjectiveGroupView.prototype.init = function() {
        t.prototype.init.call(this),
        this._tasks.init(),
        this._actionBtn.init(),
        this._actionBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._overlayActionBtn.init(),
        this._overlayActionBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this.addTarget(this, this.onButtonSelected, EventType.TAP),
        this.setInteractionState(!0),
        this._titleAsset.setDisplay(!1),
        this.__progressTitle.textContent = services.Localization.localize("scmp.objective.progress.title")
    }
    ,
    BaseObjectiveGroupView.prototype.setId = function(e) {
        this.id = e
    }
    ,
    BaseObjectiveGroupView.prototype.getId = function() {
        return this.id
    }
    ,
    BaseObjectiveGroupView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    BaseObjectiveGroupView.prototype.setHeaderImage = function(e, t) {
        var i = this;
        if (e) {
            var o = AssetLocationUtils.getObjectiveGroupAssetUri(e, "header");
            this._titleAsset.onload = function(e) {
                i.__title.style.display = "none",
                i._titleAsset.setDisplay(!0)
            }
            ,
            this._titleAsset.onerror = function(e) {
                i._titleAsset.setDisplay(!1),
                i.setTitle(t)
            }
            ,
            this._titleAsset.src = o
        }
    }
    ,
    BaseObjectiveGroupView.prototype.setBackgroundImage = function(e) {
        var t = this;
        if (e) {
            var i = AssetLocationUtils.getObjectiveGroupAssetUri(e, "background");
            this._backgroundAsset.onload = function(e) {
                t._backgroundAsset.getRootElement().style.display = "block"
            }
            ,
            this._backgroundAsset.onerror = function(e) {
                t._backgroundAsset.getRootElement().style.display = ""
            }
            ,
            this._backgroundAsset.src = i
        }
    }
    ,
    BaseObjectiveGroupView.prototype.setGroupType = function(e) {}
    ,
    BaseObjectiveGroupView.prototype.setLockedbyGroups = function(e) {
        this.lockedByGroups = e
    }
    ,
    BaseObjectiveGroupView.prototype.getLockedbyGroups = function() {
        return this.lockedByGroups
    }
    ,
    BaseObjectiveGroupView.prototype.setFocused = function() {
        var e = this;
        this.addClass(BaseObjectiveGroupView.Class.FOCUS),
        window.setTimeout(function() {
            return e.removeClass(BaseObjectiveGroupView.Class.FOCUS)
        }, 200)
    }
    ,
    BaseObjectiveGroupView.prototype.setOverlayText = function(e) {
        this.__overlayText.textContent = e
    }
    ,
    BaseObjectiveGroupView.prototype.updateRepeatableState = function(e) {
        this.setRepeatableLabels(e.repeatabilityMode, e.getRemainingRepeats(), e.getRefreshTimeRemaining())
    }
    ,
    BaseObjectiveGroupView.prototype.setRepeatableLabels = function(e, t, i) {
        var o = services.Localization
          , n = ""
          , r = UTObjectiveStatusLabelView.Type.NON_REPEATABLE;
        e === ObjectiveRepeatabilityMode.UNLIMITED ? (n = o.localize("tile.sbcSets.repeatable"),
        r = UTObjectiveStatusLabelView.Type.REPEATABLE) : e !== ObjectiveRepeatabilityMode.LIMITED && e !== ObjectiveRepeatabilityMode.REFRESH || (n = o.localize("tile.sbcSets.repeatable") + " " + t.toString(),
        r = UTObjectiveStatusLabelView.Type.REPEATABLE);
        var s = e !== ObjectiveRepeatabilityMode.NON_REPEATABLE;
        this._repeatableStatus.setDisplay(s),
        this._repeatableStatus.setType(r),
        this._repeatableStatus.setText(n);
        var a = e === ObjectiveRepeatabilityMode.REFRESH;
        if (a) {
            var l = o.localizeTimeRemaining(i);
            this._refreshStatus.setText(l)
        }
        this._refreshStatus.setType(UTObjectiveStatusLabelView.Type.REFRESH),
        this._refreshStatus.setDisplay(a)
    }
    ,
    BaseObjectiveGroupView.prototype.setCountdown = function(e) {
        this.__countdown.textContent = e
    }
    ,
    BaseObjectiveGroupView.prototype.toggleCountdown = function(e) {
        DOMKit.toggleDisplayStyle(this.__countdown, e)
    }
    ,
    BaseObjectiveGroupView.prototype.setProgress = function(e) {
        this._progressBar.setProgress(e)
    }
    ,
    BaseObjectiveGroupView.prototype.setProgressLabel = function(e) {
        this.__progressLabel.textContent = e
    }
    ,
    BaseObjectiveGroupView.prototype.setGroupLocked = function(e) {
        var i = this;
        e.forEach(function(e) {
            var t = new UTStandardButtonControl;
            t.init(),
            t.setText(e.title),
            t.addTarget(i, i.onLockedButtonSelected.bind(i, e), EventType.TAP),
            t.addClass("mini"),
            i.__lockedByGroups.appendChild(t.getRootElement())
        }, this),
        this.setObjectiveLockedState(!0)
    }
    ,
    BaseObjectiveGroupView.prototype.setGroupExpired = function() {
        this.setInteractionState(!1),
        this._actionBtn.setDisplay(!1)
    }
    ,
    BaseObjectiveGroupView.prototype.setGroupScheduled = function() {
        this.setObjectiveLockedState(!1)
    }
    ,
    BaseObjectiveGroupView.prototype.setGroupComingSoon = function() {
        this.toggleClass(BaseObjectiveGroupView.Class.COMING_SOON, !0),
        this._actionBtn.setDisplay(!0),
        this._actionBtn.setInteractionState(!1),
        this._actionBtn.setText(services.Localization.localize("scmp.group.comingsoon")),
        this.setInteractionState(!1)
    }
    ,
    BaseObjectiveGroupView.prototype.setClaimableRewardsBtn = function(e, t, i) {
        this.setActionButtonState(e, t, i)
    }
    ,
    BaseObjectiveGroupView.prototype.setOverlayClaimableRewardsBtn = function(e, t, i) {
        this.setActionButtonState(e, t, i, this._overlayActionBtn)
    }
    ,
    BaseObjectiveGroupView.prototype.setState = function(e, t, i) {
        var o = services.Localization
          , n = ""
          , r = JSUtils.getObjectValues(BaseObjectiveGroupView.Class).join(" ");
        switch (e) {
        case ObjectiveGroupStateEnum.UNDEFINED:
        case ObjectiveGroupStateEnum.IN_PROGRESS:
            n = BaseObjectiveGroupView.Class.IN_PROGRESS,
            this.setClaimableRewardsBtn(!1, t, i);
            break;
        case ObjectiveGroupStateEnum.COMPLETED:
        case ObjectiveGroupStateEnum.REDEEM_FAILURE:
            n = BaseObjectiveGroupView.Class.COMPLETED,
            this.setOverlayText(o.localize("scmp.objective.overlay.complete.title")),
            this.setInteractionState(!1),
            this.setOverlayClaimableRewardsBtn(!0, t, i);
            break;
        case ObjectiveGroupStateEnum.REWARDED:
            n = BaseObjectiveGroupView.Class.REDEEMED,
            this.setOverlayText(o.localize("scmp.campaign.claimed")),
            this._actionBtn.setDisplay(!1),
            this.setInteractionState(!1);
            break;
        default:
            this.setInteractionState(!1)
        }
        this.removeClass(r),
        this.addClass(n)
    }
    ,
    BaseObjectiveGroupView.prototype.renderRewardsList = function(e) {
        0 < e.length ? (this.__rewardsLabel.textContent = services.Localization.localize("objectives.group.rewards.label"),
        DOMKit.toggleDisplayStyle(this.__rewardsLabel, !0),
        this._rewardView.setDisplay(!0),
        this._rewardView.render(e[0], !0, !0, !0)) : (DOMKit.toggleDisplayStyle(this.__rewardsLabel, !1),
        this._rewardView.setDisplay(!1)),
        this._rewards.render(e)
    }
    ,
    BaseObjectiveGroupView.prototype.setObjectiveLockedState = function(e) {
        var t = e ? BaseObjectiveGroupView.Class.LOCKED : BaseObjectiveGroupView.Class.SCHEDULED
          , i = JSUtils.getObjectValues(BaseObjectiveGroupView.Class).join(" ");
        this.removeClass(i),
        this.addClass(t),
        this.setInteractionState(!1)
    }
    ,
    BaseObjectiveGroupView.prototype.setActionButtonState = function(e, t, i, o) {
        void 0 === o && (o = this._actionBtn);
        var n = e || t && 0 < i;
        if (o.setDisplay(n),
        o.setInteractionState(n),
        n) {
            var r = services.Localization.localize(t ? "objectives.group.claimall" : "objectives.group.claim");
            o.setText(r),
            o.addClass("call-to-action")
        }
    }
    ,
    BaseObjectiveGroupView.prototype.onButtonSelected = function(e, t, i) {
        if (this.isInteractionEnabled() || this._overlayActionBtn.isInteractionEnabled()) {
            var o = {
                id: this.id,
                title: this.__title.textContent
            };
            e === this ? this._triggerActions(BaseObjectiveGroupView.Event.GROUP_INFO, o) : e !== this._actionBtn && e !== this._overlayActionBtn || this._triggerActions(BaseObjectiveGroupView.Event.CLAIM_REWARD, o)
        }
    }
    ,
    BaseObjectiveGroupView.prototype.onLockedButtonSelected = function(e, t, i) {
        var o = {
            id: e.compositeId
        };
        this._triggerActions(BaseObjectiveGroupView.Event.LOCKED_BY, o)
    }
    ,
    BaseObjectiveGroupView.Class = {
        IN_PROGRESS: "in-progress",
        COMPLETED: "complete",
        XP_REDEEMED: "xp-redeemed",
        REDEEMED: "redeemed",
        LOCKED: "locked",
        SCHEDULED: "scheduled",
        COMING_SOON: "coming-soon",
        FOCUS: "focus"
    },
    BaseObjectiveGroupView.Event = {
        CLAIM_REWARD: "BaseObjectiveGroupView.CLAIM_REWARD",
        ENTRY_REWARDS_INFO: "BaseObjectiveGroupView.ENTRY_REWARDS_INFO",
        GROUP_INFO: "BaseObjectiveGroupView.GROUP_INFO",
        LOCKED_BY: "BaseObjectiveGroupView.LOCKED_BY"
    },
    BaseObjectiveGroupView
}(UTTileView)
  , UTObjectiveGroupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTObjectiveGroupView() {
        return e.call(this) || this
    }
    return __extends(UTObjectiveGroupView, e),
    UTObjectiveGroupView.prototype.renderTaskList = function(e, t) {
        var i = e.slice(0, 3).map(function(e) {
            var t = new UTObjectiveTaskCondensedView
              , i = e.rewards.rewards[0];
            return i && t.setReward(i),
            t.setProgress(e.progress, e.multiplier),
            t.setTitle(e.title),
            t
        });
        this._tasks.renderTasks(i, t)
    }
    ,
    UTObjectiveGroupView
}(BaseObjectiveGroupView));
UTObjectiveGroupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-group-view"),
        this._backgroundAsset = new EAImageView,
        this._backgroundAsset.getRootElement().classList.add("ut-objective-group-view--background-image"),
        e.appendChild(this._backgroundAsset.getRootElement());
        var t = document.createElement("div");
        t.classList.add("ut-objective-group-view--background-image-overlay"),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-objective-group-view--overlay"),
        this.__overlayText = document.createElement("span"),
        i.appendChild(this.__overlayText),
        this.__lockedByGroups = document.createElement("div"),
        this.__lockedByGroups.classList.add("ut-objective-group-view--locked-by"),
        i.appendChild(this.__lockedByGroups),
        this._overlayActionBtn = new UTStandardButtonControl,
        this._overlayActionBtn.getRootElement().classList.add("ut-objective-group-view--overlay-button"),
        i.appendChild(this._overlayActionBtn.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-objective-group-view--body");
        var n = document.createElement("div");
        n.classList.add("ut-objective-group-view--header");
        var r = document.createElement("div");
        r.classList.add("ut-objective-group-view--labels"),
        this.__countdown = document.createElement("div"),
        this.__countdown.classList.add("ut-objective-group-view--countdown"),
        r.appendChild(this.__countdown),
        this._repeatableStatus = new UTObjectiveStatusLabelView,
        r.appendChild(this._repeatableStatus.getRootElement()),
        this._refreshStatus = new UTObjectiveStatusLabelView,
        r.appendChild(this._refreshStatus.getRootElement()),
        n.appendChild(r),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-objective-group-view--title"),
        n.appendChild(this.__title),
        this._titleAsset = new EAImageView,
        this._titleAsset.getRootElement().classList.add("ut-objective-group-view--title-image"),
        n.appendChild(this._titleAsset.getRootElement()),
        o.appendChild(n);
        var s = document.createElement("div");
        s.classList.add("ut-objective-group-view--top-container");
        var a = document.createElement("div");
        a.classList.add("ut-objective-group-view--objective-info-column"),
        this.__progressTitle = document.createElement("p"),
        this.__progressTitle.classList.add("ut-objective-group-view--subtitle"),
        a.appendChild(this.__progressTitle);
        var l = document.createElement("div");
        l.classList.add("ut-objective-group-view--progress"),
        this._progressBar = new UTProgressBarView,
        this._progressBar.getRootElement().classList.add("rounded"),
        l.appendChild(this._progressBar.getRootElement()),
        this.__progressLabel = document.createElement("h2"),
        this.__progressLabel.classList.add("ut-objective-group-view--progress-label"),
        l.appendChild(this.__progressLabel),
        a.appendChild(l),
        this.__rewardsLabel = document.createElement("h2"),
        this.__rewardsLabel.classList.add("ut-objective-group-view--subtitle"),
        a.appendChild(this.__rewardsLabel),
        this._rewards = new TileRewardListView,
        a.appendChild(this._rewards.getRootElement()),
        s.appendChild(a);
        var c = document.createElement("div");
        c.classList.add("ut-objective-group-view--reward-asset-column"),
        this._rewardView = new FCRewardView,
        c.appendChild(this._rewardView.getRootElement()),
        s.appendChild(c),
        o.appendChild(s),
        this._tasks = new ObjectiveTasksView,
        o.appendChild(this._tasks.getRootElement()),
        e.appendChild(o);
        var u = document.createElement("div");
        u.classList.add("ut-objective-group-view--footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("ut-objective-group-view--button"),
        u.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(u),
        this.__root = e,
        this._generated = !0
    }
}
,
UTObjectiveGroupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._backgroundAsset.destroy(),
    this.__overlayText = null,
    this.__lockedByGroups = null,
    this._overlayActionBtn.destroy(),
    this.__countdown = null,
    this._repeatableStatus.destroy(),
    this._refreshStatus.destroy(),
    this.__title = null,
    this._titleAsset.destroy(),
    this.__progressTitle = null,
    this._progressBar.destroy(),
    this.__progressLabel = null,
    this.__rewardsLabel = null,
    this._rewards.destroy(),
    this._rewardView.destroy(),
    this._tasks.destroy(),
    this._actionBtn.destroy()
}
,
UTObjectiveGroupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTObjectiveCategoryView = function(t) {
    function UTObjectiveCategoryView() {
        var e = t.call(this) || this;
        return e.groups = [],
        e
    }
    return __extends(UTObjectiveCategoryView, t),
    UTObjectiveCategoryView.prototype.init = function() {
        t.prototype.init.call(this),
        this._floatingFilterBtn.setInteractionState(!0),
        this.setInteractionState(!0)
    }
    ,
    UTObjectiveCategoryView.prototype.dealloc = function() {
        this.clearViews(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTObjectiveCategoryView.prototype.clearViews = function() {
        this.groups.forEach(function(e) {
            return e.dealloc()
        }),
        this.groups = []
    }
    ,
    UTObjectiveCategoryView.prototype.setCategoryGroups = function(i, e, o, n) {
        var r = this;
        this.clearViews(),
        this.groups = e.map(function(e) {
            var t;
            return r.generateObjectiveGroupTile(i, e, null !== (t = o.get(e.id)) && void 0 !== t ? t : [], n)
        }),
        this.layoutSubviews()
    }
    ,
    UTObjectiveCategoryView.prototype.scrollToObjective = function(e) {
        var t = e.getRootElement().offsetTop - 16;
        this.__objectivesMainContainer.scrollTop = t,
        e.setFocused()
    }
    ,
    UTObjectiveCategoryView.prototype.focusTile = function(t) {
        var e = JSUtils.find(this.groups, function(e) {
            return e.getId() === t
        });
        e && this.scrollToObjective(e)
    }
    ,
    UTObjectiveCategoryView.prototype.updateGroupsTimeRemaining = function(i) {
        var o = services.Localization;
        this.groups.forEach(function(e) {
            var t = i.get(e.getId());
            t ? t.isComingSoon() ? e.setCountdown(o.localize("scmp.group.opens", [o.localizeTimeRemaining(t.getTimeUntilStart())])) : t.isMilestone() || (t.hasExpired() ? (e.setCountdown(o.localize("objectives.tile.expired")),
            (t.isInProgress() || t.isNotStarted()) && e.setGroupExpired()) : e.setCountdown(o.localize("scmp.group.countdown", [o.localizeTimeRemaining(t.getTimeRemaining())]))) : (e.setCountdown(o.localize("objectives.tile.expired")),
            e.setGroupExpired())
        }, this)
    }
    ,
    UTObjectiveCategoryView.prototype.updateGroupsTimeToRefresh = function(i) {
        this.groups.forEach(function(e) {
            var t = i.get(e.getId());
            t && e.updateRepeatableState(t)
        })
    }
    ,
    UTObjectiveCategoryView.prototype.setGroupTileInteractionState = function(t, e) {
        var i = JSUtils.find(this.groups, function(e) {
            return e.getId() === t
        });
        DebugUtils.Assert(JSUtils.isValid(i), "Cannot find objective tile associated with composite id: " + t),
        null == i || i.setInteractionState(e)
    }
    ,
    UTObjectiveCategoryView.prototype.generateObjectiveGroupTile = function(e, t, i, o) {
        var n = new UTObjectiveGroupView
          , r = services.Localization;
        n.init(),
        n.setGroupType(t.type),
        n.setId(t.compositeId),
        t.guidAssetId && t.hasBackgroundImage && n.setBackgroundImage(t.guidAssetId),
        t.guidAssetId && t.hasHeaderImage ? n.setHeaderImage(t.guidAssetId, t.title) : n.setTitle(t.title),
        n.setProgress(t.getProgress());
        var s = t.getMinRequiredObjectivesCount();
        if (n.setProgressLabel(r.localize("common.fraction", [t.getNumberOfCompletedObjectives().toString(), s.toString()])),
        n.updateRepeatableState(t),
        t.isMilestone() ? n.toggleCountdown(!1) : t.hasExpired() ? (n.setCountdown(r.localize("objectives.tile.expired")),
        (t.isInProgress() || t.isNotStarted()) && n.setGroupExpired()) : n.setCountdown(r.localize("scmp.group.countdown", [r.localizeTimeRemaining(t.getTimeRemaining())])),
        t.isComingSoon())
            n.setGroupComingSoon(),
            n.setCountdown(r.localize("scmp.group.opens", [r.localizeTimeRemaining(t.getTimeUntilStart())]));
        else {
            var a = e.getLockingGroups(t.compositeId);
            0 < a.length ? (n.setOverlayText(r.localize("scmp.group.description.lockedBy")),
            n.setGroupLocked(a),
            n.setLockedbyGroups(a.map(function(e) {
                return e.compositeId
            }))) : t.isLockedBehindStartTime() ? (n.setOverlayText(r.localize("scmp.group.description.locked")),
            n.setGroupScheduled()) : t.isRefresh() && t.isRedeemed() ? n.setState(ObjectiveGroupStateEnum.UNDEFINED, o, t.objectivesReadyToRedeem) : n.setState(t.state, o, t.objectivesReadyToRedeem),
            n.renderTaskList(i, t.requiredObjectivesCount),
            n.renderRewardsList(t.rewards.rewards)
        }
        return n.addTarget(this, this.onLockedGroupSelected, UTObjectiveGroupView.Event.LOCKED_BY),
        n.addTarget(this, this.onClaimSelected, UTObjectiveGroupView.Event.CLAIM_REWARD),
        n.addTarget(this, this.onRewardInfoSelected, UTObjectiveGroupView.Event.GROUP_INFO),
        this.addSubview(n, this.__groupsDetails),
        n
    }
    ,
    UTObjectiveCategoryView.prototype.getFloatingFilterButton = function() {
        return this._floatingFilterBtn
    }
    ,
    UTObjectiveCategoryView.prototype.onLockedGroupSelected = function(e, t, i) {
        this.isInteractionEnabled() && this.focusTile(i.id)
    }
    ,
    UTObjectiveCategoryView.prototype.onRewardInfoSelected = function(e, t, i) {
        this.isInteractionEnabled() && t === UTObjectiveGroupView.Event.GROUP_INFO && this._triggerActions(UTObjectiveCategoryView.Event.REWARD_INFO, i)
    }
    ,
    UTObjectiveCategoryView.prototype.onClaimSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTObjectiveCategoryView.Event.CLAIM_REWARD, i)
    }
    ,
    UTObjectiveCategoryView.Event = {
        FILTER_CHANGE: "UTObjectiveCategoryView.FILTER_CHANGE",
        SELECT_GROUP: "UTObjectiveCategoryView.SELECT_GROUP",
        CLAIM_REWARD: "UTObjectiveCategoryView.CLAIM_REWARD",
        REWARD_INFO: "UTObjectiveCategoryView.REWARD_INFO",
        SORT_CHANGE: "UTObjectiveCategoryView.SORT_CHANGE"
    },
    UTObjectiveCategoryView
}(EATargetActionView);
UTObjectiveCategoryView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-category"),
        this.__objectivesMainContainer = document.createElement("div"),
        this.__objectivesMainContainer.classList.add("ut-objective-category--content"),
        this.__objectivesDetailsContainer = document.createElement("div"),
        this.__objectivesDetailsContainer.classList.add("ut-objective-category--details"),
        this.__groupsDetails = document.createElement("div"),
        this.__groupsDetails.classList.add("ut-objective-category--groups"),
        this.__objectivesDetailsContainer.appendChild(this.__groupsDetails),
        this.__objectivesMainContainer.appendChild(this.__objectivesDetailsContainer),
        e.appendChild(this.__objectivesMainContainer);
        var t = document.createElement("div");
        t.classList.add("ut-objective-category--footer"),
        this._floatingFilterBtn = new UTFloatingImageButtonControl,
        this._floatingFilterBtn.getRootElement().classList.add("filter-btn"),
        this._floatingFilterBtn.getRootElement().classList.add("ut-objective-category--floating-filter-btn"),
        t.appendChild(this._floatingFilterBtn.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTObjectiveCategoryView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__objectivesMainContainer = null,
    this.__objectivesDetailsContainer = null,
    this.__groupsDetails = null,
    this._floatingFilterBtn.destroy()
}
,
UTObjectiveCategoryView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var _a, BaseRewardView = function(e) {
    function BaseRewardView() {
        return e.call(this) || this
    }
    return __extends(BaseRewardView, e),
    BaseRewardView.prototype.setValue = function(e) {
        this.__value.textContent = services.Localization.localizeNumber(e) + " "
    }
    ,
    BaseRewardView.prototype.getFCRewardIconClass = function(e) {
        return e.assetType == FCVanityItemAssetType.ASSET_TYPE_ACCESSORIES ? BaseRewardView.FC_ACCESSORY_ICON_CLASS[e.assetName] : BaseRewardView.FC_ICON_CLASS[e.assetType]
    }
    ,
    BaseRewardView.prototype.setRewardTypeClass = function(e, t) {
        var i = Object.values(GameRewardStyle).join(" ")
          , o = GameRewardStyle.REWARD;
        switch (e) {
        case FCRewardType.COIN:
        case RewardType.COIN:
            o = t === FCGameMode.CLUB ? GameRewardStyle.CLUB_COIN : GameRewardStyle.COIN;
            break;
        case FCRewardType.SEASON_XP:
        case RewardType.XP:
            o = GameRewardStyle.XP;
            break;
        case FCRewardType.PACK:
            o = GameRewardStyle.PACK_REWARD;
            break;
        case FCRewardType.CHAMPION_QUALIFICATION_POINTS:
            o = GameRewardStyle.CHAMPION_POINTS;
            break;
        case FCRewardType.ITEM:
            o = t == FCGameMode.FUT ? GameRewardStyle.ITEM_REWARD : GameRewardStyle.META_ITEM_REWARD
        }
        DOMKit.removeClass(this.__asset, i),
        DOMKit.addClass(this.__asset, o)
    }
    ,
    BaseRewardView.prototype.render = function(e, t) {
        void 0 === t && (t = !1),
        t || (this.__description.textContent = UTLocalizationUtil.buildRewardString(e, services.Localization))
    }
    ,
    BaseRewardView.FC_ICON_CLASS = ((_a = {})[FCVanityItemAssetType.ASSET_TYPE_ACCESSORIES] = "icon_meta_reward_glasses",
    _a[FCVanityItemAssetType.ASSET_TYPE_ANATOMY] = "icon_meta_reward_arm_sleeve",
    _a[FCVanityItemAssetType.ASSET_TYPE_BOOT] = "icon_meta_reward_shoe",
    _a[FCVanityItemAssetType.ASSET_TYPE_CLOTHING] = "icon_meta_reward_gloves",
    _a[FCVanityItemAssetType.ASSET_TYPE_FACIALHAIRSTYLE] = "icon_meta_reward_facial_hair",
    _a[FCVanityItemAssetType.ASSET_TYPE_GOAL_CELEBRATION] = "icon_meta_reward_celebration",
    _a[FCVanityItemAssetType.ASSET_TYPE_HAIRSTYLE] = "icon_meta_reward_hair",
    _a[FCVanityItemAssetType.ASSET_TYPE_TATTOO] = "icon_meta_reward_tattoo",
    _a),
    BaseRewardView.FC_ACCESSORY_ICON_CLASS = {
        outfitaccessory1: "icon_meta_reward_arm_sleeve",
        outfitaccessory2: "icon_meta_reward_arm_sleeve",
        outfitaccessory3: "icon_meta_reward_glasses",
        outfitaccessory4: "icon_meta_reward_gloves"
    },
    BaseRewardView
}(EAView), FCMetaRewardBundleView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function FCMetaRewardBundleView() {
        return e.call(this) || this
    }
    return __extends(FCMetaRewardBundleView, e),
    FCMetaRewardBundleView.prototype.render = function(e) {
        this.__title.textContent = e
    }
    ,
    FCMetaRewardBundleView
}(EAView));
FCMetaRewardBundleView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("reward"),
        e.classList.add("fc-meta-reward-bundle-view");
        var t = document.createElement("div");
        t.classList.add("fc-meta-reward-bundle-view--asset"),
        e.appendChild(t),
        this.__title = document.createElement("p"),
        this.__title.classList.add("fc-meta-reward-bundle-view--title"),
        e.appendChild(this.__title),
        this.__root = e,
        this._generated = !0
    }
}
,
FCMetaRewardBundleView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null
}
,
FCMetaRewardBundleView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCRewardView = function(_) {
    function FCRewardView() {
        var e, t = _.call(this) || this;
        return t.gameModeTranslationKeyMap = ((e = {})[FCRewardGameModeKey.CAREER_MANAGER] = FCGameMode.CAREER_MANAGER,
        e[FCRewardGameModeKey.CAREER_PLAYER] = FCGameMode.CAREER_PLAYER,
        e[FCRewardGameModeKey.CLUB] = FCGameMode.CLUB,
        e[FCRewardGameModeKey.FUT] = FCGameMode.FUT,
        e),
        t.playerItemView = null,
        t.packView = null,
        t.fcIconView = null,
        t.fcBundleView = null,
        t
    }
    return __extends(FCRewardView, _),
    FCRewardView.prototype.dealloc = function() {
        this.playerItemView && (this.playerItemView.dealloc(),
        this.playerItemView = null),
        this.packView && (this.packView.dealloc(),
        this.packView = null),
        this.fcIconView && (this.fcIconView.dealloc(),
        this.fcIconView = null),
        this.fcBundleView && (this.fcBundleView.dealloc(),
        this.fcBundleView = null),
        _.prototype.dealloc.call(this)
    }
    ,
    FCRewardView.prototype.renderBundle = function() {
        var e;
        null === (e = this.fcBundleView) || void 0 === e || e.dealloc(),
        this.fcBundleView = new FCMetaRewardBundleView,
        this.fcBundleView.render(services.Localization.localize("meta.reward.bundle")),
        this.addSubview(this.fcBundleView, this.__asset),
        this.layoutSubviews()
    }
    ,
    FCRewardView.prototype.render = function(e, t, i, o) {
        var n, r = this;
        void 0 === t && (t = !1),
        void 0 === i && (i = !1),
        void 0 === o && (o = !1),
        _.prototype.render.call(this, e, t);
        var s = e instanceof FCRewardVO
          , a = e instanceof FCRewardVO ? e : null
          , l = e instanceof UTRewardVO ? e : null
          , c = s ? null == a ? void 0 : a.utItem : null == l ? void 0 : l.item;
        if (e instanceof FCRewardVO ? this.setRewardTypeClass(e.type, e.gameMode) : this.setRewardTypeClass(e.type, FCGameMode.FUT),
        c ? (this.playerItemView = this.generateItemView(c, !0),
        this.addSubview(this.playerItemView, this.__asset)) : e.isPack ? (this.packView = this.generatePackGraphicView(e),
        this.addSubview(this.packView, this.__asset)) : a && a.isFcVanityItem && a.fcItem && (this.fcIconView = this.generateFcItemIcon(a.fcItem),
        this.addSubview(this.fcIconView, this.__asset)),
        e && !o && ((e.isXP || e.isCoin || e.isChampionQualificationPoints) && this.setValue(e.isXP ? e.xpValue : e.value),
        s && !i))
            if (null === (n = null == a ? void 0 : a.fcItem) || void 0 === n ? void 0 : n.gameModes) {
                var u = services.Localization.locale.toBCPString()
                  , d = services.Localization.locale.isRTL()
                  , h = new Intl.ListFormat(u,{
                    style: "narrow"
                })
                  , p = [];
                a.fcItem.gameModes.split("|").forEach(function(e) {
                    var t, i = null !== (t = r.gameModeTranslationKeyMap[e]) && void 0 !== t ? t : void 0;
                    i && p.push(services.Localization.localize("meta.gameMode." + i))
                }),
                d && p.reverse(),
                this.__gameMode.textContent = h.format(p)
            } else
                this.__gameMode.textContent = services.Localization.localize("meta.gameMode." + (null == a ? void 0 : a.gameMode));
        DOMKit.toggleDisplayStyle(this.__contentContainer, !(t && i && o)),
        this.layoutSubviews(),
        this.addClass(["reward", "small"].join(" "))
    }
    ,
    FCRewardView.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    FCRewardView.prototype.generatePackGraphicView = function(e) {
        var t = new UTPackGraphicView;
        return t.init(),
        e instanceof UTRewardVO ? (t.setPackBackground(e.assetId),
        t.setTradable(e.tradable)) : e instanceof FCRewardVO && e.packAssetId && (t.setPackBackground(e.packAssetId),
        t.setTradable(e.tradable)),
        t.setPromo(PurchaseDealType.REGULAR),
        t
    }
    ,
    FCRewardView.prototype.generateItemView = function(e, t) {
        var i = t ? factories.ItemView.createSmallItem(e) : factories.ItemView.createLargeItem(e);
        return i.init(),
        i.supportSecondaryViews = !0,
        i.render(e),
        i
    }
    ,
    FCRewardView.prototype.generateFcItemIcon = function(e) {
        var t = new EAView;
        return t.addClass(this.getFCRewardIconClass(e) + " meta-reward-icon"),
        t
    }
    ,
    FCRewardView
}(BaseRewardView);
FCRewardView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-meta-reward-view"),
        this.__asset = document.createElement("div"),
        this.__asset.classList.add("fc-meta-reward-view--asset"),
        e.appendChild(this.__asset),
        this.__contentContainer = document.createElement("div"),
        this.__contentContainer.classList.add("fc-meta-reward-view--content"),
        this.__label = document.createElement("p"),
        this.__label.classList.add("fc-meta-reward-view--label"),
        this.__contentContainer.appendChild(this.__label),
        this.__gameMode = document.createElement("p"),
        this.__gameMode.classList.add("fc-meta-reward-view--mode"),
        this.__contentContainer.appendChild(this.__gameMode);
        var t = document.createElement("p");
        t.classList.add("fc-meta-reward-view--title"),
        this.__value = document.createElement("span"),
        this.__value.classList.add("fc-reward-icon-view--value"),
        t.appendChild(this.__value),
        this.__description = document.createElement("span"),
        t.appendChild(this.__description),
        this.__contentContainer.appendChild(t),
        e.appendChild(this.__contentContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
FCRewardView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__asset = null,
    this.__contentContainer = null,
    this.__label = null,
    this.__gameMode = null,
    this.__value = null,
    this.__description = null
}
,
FCRewardView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCGroupRewardsRowView = function(t) {
    function FCGroupRewardsRowView() {
        var e = t.call(this) || this;
        return e.reward = null,
        e
    }
    return __extends(FCGroupRewardsRowView, t),
    FCGroupRewardsRowView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    FCGroupRewardsRowView.prototype.render = function(e) {
        this._description.render(e),
        this._asset.render(e, !0, !0, !0),
        this.setClickability(e),
        this.reward = e
    }
    ,
    FCGroupRewardsRowView.prototype.setClickability = function(e) {
        DOMKit.toggleClass(this.getRootElement(), "clickable", e.isPlayer)
    }
    ,
    FCGroupRewardsRowView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    FCGroupRewardsRowView
}(EATargetActionView);
FCGroupRewardsRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("group-rewards-row-view"),
        this._description = new RewardDescriptionView,
        this._description.getRootElement().classList.add("group-rewards-row-view--description"),
        e.appendChild(this._description.getRootElement()),
        this._asset = new FCRewardView,
        this._asset.getRootElement().classList.add("group-rewards-row-view--asset"),
        e.appendChild(this._asset.getRootElement());
        var t = document.createElement("span");
        t.classList.add("group-rewards-row-view--arrow"),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
FCGroupRewardsRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._description.destroy(),
    this._asset.destroy()
}
,
FCGroupRewardsRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCRewardIconView = function(i) {
    function FCRewardIconView() {
        return i.call(this) || this
    }
    return __extends(FCRewardIconView, i),
    FCRewardIconView.prototype.setPackTierClass = function(e) {
        switch (DOMKit.removeClass(this.__asset, "bronze silver gold special generic"),
        e) {
        case PurchasePackTier.BRONZE:
            DOMKit.addClass(this.__asset, "bronze");
            break;
        case PurchasePackTier.SILVER:
            DOMKit.addClass(this.__asset, "silver");
            break;
        case PurchasePackTier.GOLD:
            DOMKit.addClass(this.__asset, "gold");
            break;
        case PurchasePackTier.SPECIAL:
            DOMKit.addClass(this.__asset, "special");
            break;
        case PurchasePackTier.ENCORE:
            DOMKit.addClass(this.__asset, "encore");
            break;
        case PurchasePackTier.GENERIC:
        default:
            DOMKit.addClass(this.__asset, "generic")
        }
    }
    ,
    FCRewardIconView.prototype.setItemClass = function(e) {
        if (e.isPlayerPickItem())
            DOMKit.addClass(this.__asset, "player-pick");
        else if (!e.isSpecial()) {
            var t = void 0;
            t = e.isBronzeRating() ? "bronze" : e.isSilverRating() ? "silver" : "gold",
            DOMKit.addClass(this.__asset, t)
        }
    }
    ,
    FCRewardIconView.prototype.setFCVanityItemClass = function(e) {
        DOMKit.addClass(this.__asset, this.getFCRewardIconClass(e))
    }
    ,
    FCRewardIconView.prototype.render = function(e, t) {
        switch (void 0 === t && (t = !1),
        i.prototype.render.call(this, e, t),
        this.setRewardTypeClass(e.type, e.gameMode),
        e.type) {
        case FCRewardType.CHAMPION_QUALIFICATION_POINTS:
        case FCRewardType.XP:
        case FCRewardType.STARS:
        case FCRewardType.SEASON_XP:
        case FCRewardType.PROGRESSION_POINTS:
        case FCRewardType.COIN:
            this.setValue(e.value);
            break;
        case FCRewardType.POINTS_PACK:
        case FCRewardType.PACK:
            this.setPackTierClass(e.assetId);
            break;
        case FCRewardType.STADIUM_TIER:
        case FCRewardType.ITEM:
        case FCRewardType.LOANER:
        case FCRewardType.LEGEND_PLAYER:
            e.utItem ? this.setItemClass(e.utItem) : e.fcItem ? this.setFCVanityItemClass(e.fcItem) : DebugUtils.Assert(JSUtils.isValid(e.utItem), "Missing item entity from item reward.")
        }
    }
    ,
    FCRewardIconView
}(BaseRewardView);
FCRewardIconView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("li");
        e.classList.add("fc-reward-icon-view"),
        this.__asset = document.createElement("div"),
        this.__asset.classList.add("fc-reward-icon-view--image"),
        e.appendChild(this.__asset);
        var t = document.createElement("div");
        t.classList.add("reward-info");
        var i = document.createElement("div");
        i.classList.add("reward-container"),
        this.__value = document.createElement("span"),
        this.__value.classList.add("fc-reward-icon-view--value"),
        i.appendChild(this.__value),
        this.__description = document.createElement("span"),
        this.__description.classList.add("fc-reward-icon-view--description"),
        i.appendChild(this.__description),
        t.appendChild(i),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
FCRewardIconView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__asset = null,
    this.__value = null,
    this.__description = null
}
,
FCRewardIconView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var BaseTaskDetailsView = function(i) {
    function BaseTaskDetailsView() {
        var e = i.call(this) || this;
        return e._rewards = [],
        e
    }
    return __extends(BaseTaskDetailsView, i),
    BaseTaskDetailsView.prototype.dealloc = function() {
        this._claimBtn && this._claimBtn.dealloc(),
        this._takeMeThereBtn && this._takeMeThereBtn.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    BaseTaskDetailsView.prototype.setProgress = function(e, t) {
        this.__progressLabel.textContent = services.Localization.localize("objectives.task.progress.label"),
        DOMKit.toggleClass(this.__progressLabel, "done", e === t),
        i.prototype.setProgress.call(this, e, t)
    }
    ,
    BaseTaskDetailsView.prototype.setRedeemable = function() {
        this._takeMeThereBtn && this._takeMeThereBtn.dealloc(),
        this.setupClaimButton()
    }
    ,
    BaseTaskDetailsView.prototype.setComplete = function() {
        this._claimBtn && this._claimBtn.dealloc(),
        this._takeMeThereBtn && this._takeMeThereBtn.dealloc()
    }
    ,
    BaseTaskDetailsView.prototype.setupTakeMeThereButton = function(e) {
        var t = services.Localization;
        this._takeMeThereBtn && this._takeMeThereBtn.dealloc();
        var i = null;
        switch (e) {
        case RedirectId.AUCTION_SEARCH:
            i = "watchlist.button.gotoauctionsearch";
            break;
        case RedirectId.SBC:
        case RedirectId.SBC_SQUAD:
            i = "button.gotosbc";
            break;
        case RedirectId.SQUAD:
            i = "manage.squadlist.gotoactivequad";
            break;
        case RedirectId.TRADE_PILE:
            i = "button.gototransferlist"
        }
        null !== i ? (this._takeMeThereBtn = this._createButton(),
        this._takeMeThereBtn.addTarget(this, this.onTakeMeThereClicked, EventType.TAP),
        this._takeMeThereBtn.setText(t.localize(i)),
        this.__actions.appendChild(this._takeMeThereBtn.getRootElement())) : DebugUtils.Assert(!1, "Invalid link passed to Objective Task Details: " + e)
    }
    ,
    BaseTaskDetailsView.prototype.setupClaimButton = function() {
        this._claimBtn && this._claimBtn.dealloc(),
        this._claimBtn = this._createButton(),
        this._claimBtn.setText(services.Localization.localize("objectives.tasks.claim")),
        this._claimBtn.addTarget(this, this.onClaimClicked, EventType.TAP),
        this.__actions.appendChild(this._claimBtn.getRootElement())
    }
    ,
    BaseTaskDetailsView.prototype._createButton = function() {
        var e = new UTStandardButtonControl;
        return e.init(),
        e.addClass("call-to-action mini"),
        e
    }
    ,
    BaseTaskDetailsView.prototype.onClaimClicked = function(e, t, i) {
        this._triggerActions(BaseTaskDetailsView.Event.CLAIM_REWARD)
    }
    ,
    BaseTaskDetailsView.prototype.onTakeMeThereClicked = function(e, t, i) {
        this._triggerActions(BaseTaskDetailsView.Event.TAKE_ME_THERE)
    }
    ,
    BaseTaskDetailsView.Event = {
        CLAIM_REWARD: "BaseObjectiveGroupView.CLAIM_REWARD",
        TAKE_ME_THERE: "BaseObjectiveGroupView.TAKE_ME_THERE",
        REWARD_SELECTED: "BaseObjectiveGroupView.REWARD_SELECTED"
    },
    BaseTaskDetailsView
}(BaseObjectiveTaskView)
  , FCRewardIconListItemView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function FCRewardIconListItemView() {
        return t.call(this) || this
    }
    return __extends(FCRewardIconListItemView, t),
    FCRewardIconListItemView.prototype.init = function() {
        t.prototype.init.call(this),
        DOMKit.toggleDisplayStyle(this._FCRewardIcon.getRootElement(), !1),
        DOMKit.toggleDisplayStyle(this._UTRewardIcon.getRootElement(), !1),
        this.setInteractionState(!0)
    }
    ,
    FCRewardIconListItemView.prototype.render = function(e) {
        e instanceof FCRewardVO ? (this.showFCRewardIcon(),
        this._FCRewardIcon.render(e)) : e instanceof UTRewardVO && (this.showUTRewardIcon(),
        this._UTRewardIcon.render(e)),
        this.setClickability(e)
    }
    ,
    FCRewardIconListItemView.prototype.showFCRewardIcon = function() {
        DOMKit.toggleDisplayStyle(this._FCRewardIcon.getRootElement(), !0),
        DOMKit.toggleDisplayStyle(this._UTRewardIcon.getRootElement(), !1)
    }
    ,
    FCRewardIconListItemView.prototype.showUTRewardIcon = function() {
        DOMKit.toggleDisplayStyle(this._FCRewardIcon.getRootElement(), !1),
        DOMKit.toggleDisplayStyle(this._UTRewardIcon.getRootElement(), !0)
    }
    ,
    FCRewardIconListItemView.prototype.setClickability = function(e) {
        DOMKit.toggleClass(this.getRootElement(), "clickable", e.isPlayer)
    }
    ,
    FCRewardIconListItemView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    FCRewardIconListItemView
}(EATargetActionView));
FCRewardIconListItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("reward-icon-list-item-view"),
        this._UTRewardIcon = new UTRewardIconView,
        e.appendChild(this._UTRewardIcon.getRootElement()),
        this._FCRewardIcon = new FCRewardIconView,
        e.appendChild(this._FCRewardIcon.getRootElement());
        var t = document.createElement("span");
        t.classList.add("reward-icon-list-item-view--arrow"),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
FCRewardIconListItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._UTRewardIcon.destroy(),
    this._FCRewardIcon.destroy()
}
,
FCRewardIconListItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCTaskDetailsListItemView = function(t) {
    function FCTaskDetailsListItemView() {
        var e = t.call(this) || this;
        return e.rewardViews = [],
        e
    }
    return __extends(FCTaskDetailsListItemView, t),
    FCTaskDetailsListItemView.prototype.setRewards = function(e) {
        var i = this;
        this._reset(),
        0 < e.length ? this.__rewardsHeader.textContent = services.Localization.localize("objectives.task.reward.header") : this.__rewardsHeader.textContent = "",
        e.forEach(function(e) {
            var t = new FCRewardIconListItemView;
            t.init(),
            t.render(e),
            i.rewardViews.push(t),
            t.addTarget(i, i.onRewardSelected, EventType.TAP),
            i.__rewardsContainer.appendChild(t.getRootElement())
        }),
        this._rewards = e,
        this.layoutSubviews()
    }
    ,
    FCTaskDetailsListItemView.prototype.setDescription = function(e) {
        this.__description.innerHTML = e
    }
    ,
    FCTaskDetailsListItemView.prototype.dealloc = function() {
        this._reset(),
        t.prototype.dealloc.call(this)
    }
    ,
    FCTaskDetailsListItemView.prototype.setSelectedReward = function(e, t) {
        var i = this._rewards.indexOf(e);
        -1 < i && i < this.rewardViews.length && this.rewardViews[i].toggleClass("selected", t)
    }
    ,
    FCTaskDetailsListItemView.prototype._reset = function() {
        this.rewardViews.map(function(e) {
            return e.dealloc()
        }),
        this.rewardViews = [],
        this._rewards = [],
        this.__rewardsContainer.innerHTML = ""
    }
    ,
    FCTaskDetailsListItemView.prototype.onRewardSelected = function(e, t, i) {
        var o = this.rewardViews.indexOf(e);
        -1 < o && o < this._rewards.length && this._triggerActions(BaseTaskDetailsView.Event.REWARD_SELECTED, {
            reward: this._rewards[o]
        })
    }
    ,
    FCTaskDetailsListItemView
}(BaseTaskDetailsView);
FCTaskDetailsListItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-task-view--list-item"),
        e.classList.add("ut-objective-task-view");
        var t = document.createElement("div");
        t.classList.add("ut-objective-task-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-objective-task-view--title"),
        t.appendChild(this.__title);
        var i = document.createElement("div");
        i.classList.add("ut-objective-task-view--progress"),
        this.__progressLabel = document.createElement("span"),
        this.__progressLabel.classList.add("label"),
        i.appendChild(this.__progressLabel),
        this.__progress = document.createElement("span"),
        i.appendChild(this.__progress),
        t.appendChild(i),
        e.appendChild(t),
        this.__description = document.createElement("span"),
        this.__description.classList.add("ut-objective-task-view--description"),
        e.appendChild(this.__description);
        var o = document.createElement("div");
        o.classList.add("ut-objective-task-view--reward"),
        this.__rewardsHeader = document.createElement("h2"),
        this.__rewardsHeader.classList.add("ut-objective-task-view--reward-header"),
        o.appendChild(this.__rewardsHeader),
        this.__rewardsContainer = document.createElement("div"),
        this.__rewardsContainer.classList.add("ut-objective-task-view--reward-container"),
        o.appendChild(this.__rewardsContainer),
        e.appendChild(o);
        var n = document.createElement("div");
        n.classList.add("ut-objective-task-view--state"),
        this.__state = document.createElement("span"),
        n.appendChild(this.__state),
        e.appendChild(n),
        this.__actions = document.createElement("div"),
        this.__actions.classList.add("ut-objective-task-view--actions"),
        e.appendChild(this.__actions),
        this.__root = e,
        this._generated = !0
    }
}
,
FCTaskDetailsListItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__progressLabel = null,
    this.__progress = null,
    this.__description = null,
    this.__rewardsHeader = null,
    this.__rewardsContainer = null,
    this.__state = null,
    this.__actions = null
}
,
FCTaskDetailsListItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCTaskDetailsGridItemView = function(t) {
    function FCTaskDetailsGridItemView() {
        var e = t.call(this) || this;
        return e._carouselRewardViews = [],
        e
    }
    return __extends(FCTaskDetailsGridItemView, t),
    FCTaskDetailsGridItemView.prototype.setRewards = function(e) {
        var i = this;
        this._reset(),
        this._rewardsCarousel.setupMetaRewards(e.map(function(e) {
            var t = new FCRewardView;
            return t.render(e, !1, !0),
            i._carouselRewardViews.push(t),
            t
        }), 0, !1),
        this._rewards = e
    }
    ,
    FCTaskDetailsGridItemView.prototype.setSelectedReward = function(e, t) {}
    ,
    FCTaskDetailsGridItemView.prototype.dealloc = function() {
        this._reset(),
        t.prototype.dealloc.call(this)
    }
    ,
    FCTaskDetailsGridItemView.prototype._reset = function() {
        this._rewardsCarousel.reset(),
        this._carouselRewardViews.map(function(e) {
            return e.dealloc()
        }),
        this._carouselRewardViews = []
    }
    ,
    FCTaskDetailsGridItemView.prototype.renderCarousel = function() {
        this._rewardsCarousel.renderCarousel()
    }
    ,
    FCTaskDetailsGridItemView
}(BaseTaskDetailsView);
FCTaskDetailsGridItemView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-task-view--grid-item"),
        e.classList.add("ut-objective-task-view--list-item"),
        e.classList.add("ut-objective-task-view"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-objective-task-view--title"),
        e.appendChild(this.__title);
        var t = document.createElement("div");
        t.classList.add("ut-objective-task-view--progress"),
        this.__progressLabel = document.createElement("span"),
        this.__progressLabel.classList.add("label"),
        t.appendChild(this.__progressLabel),
        this.__progress = document.createElement("span"),
        t.appendChild(this.__progress),
        e.appendChild(t),
        this._rewardsCarousel = new FCRewardsCarouselView,
        e.appendChild(this._rewardsCarousel.getRootElement());
        var i = document.createElement("div");
        i.classList.add("ut-objective-task-view--state"),
        this.__state = document.createElement("span"),
        i.appendChild(this.__state),
        e.appendChild(i),
        this.__actions = document.createElement("div"),
        this.__actions.classList.add("ut-objective-task-view--actions"),
        e.appendChild(this.__actions),
        this.__root = e,
        this._generated = !0
    }
}
,
FCTaskDetailsGridItemView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__progressLabel = null,
    this.__progress = null,
    this._rewardsCarousel.destroy(),
    this.__state = null,
    this.__actions = null
}
,
FCTaskDetailsGridItemView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCObjectiveDetailsView = function(t) {
    function FCObjectiveDetailsView() {
        var e = t.call(this) || this;
        return e.groupRewardViews = [],
        e.tasksView = [],
        e
    }
    return __extends(FCObjectiveDetailsView, t),
    FCObjectiveDetailsView.prototype.init = function() {
        t.prototype.init.call(this),
        this._listTaskViewType.init(),
        this._listTaskViewType.setInteractionState(!0),
        this._listTaskViewType.addTarget(this, this._onViewTypeSelected, EventType.TAP),
        this._gridTaskViewType.init(),
        this._gridTaskViewType.setInteractionState(!0),
        this._gridTaskViewType.addTarget(this, this._onViewTypeSelected, EventType.TAP)
    }
    ,
    FCObjectiveDetailsView.prototype.setSubtitle = function(e) {
        this.__description.textContent = e
    }
    ,
    FCObjectiveDetailsView.prototype.setRepeatableStatus = function(e, t, i) {
        this._repeatableStatus.setDisplay(e),
        this._repeatableStatus.setType(t),
        this._repeatableStatus.setText(i)
    }
    ,
    FCObjectiveDetailsView.prototype.setRefreshStatus = function(e, t) {
        this._refreshStatus.setDisplay(e),
        this._refreshStatus.setText(null != t ? t : BLANK_STR),
        this._refreshStatus.setType(UTObjectiveStatusLabelView.Type.REFRESH)
    }
    ,
    FCObjectiveDetailsView.prototype.setCountdown = function(e, t) {
        void 0 === t && (t = null),
        DOMKit.toggleDisplayStyle(this.__countdown, e),
        this.__countdown.textContent = null != t ? t : BLANK_STR
    }
    ,
    FCObjectiveDetailsView.prototype.setGroupRewards = function(e, t) {
        var i = this;
        if (!t || t.length < 1)
            return DOMKit.toggleDisplayStyle(this.__groupRewardsContainer, !1),
            void DOMKit.toggleDisplayStyle(this.__groupRewardsTitle, !1);
        DOMKit.toggleDisplayStyle(this.__groupRewardsContainer, !0),
        DOMKit.toggleDisplayStyle(this.__groupRewardsTitle, !0),
        this.__groupRewardsTitle.textContent = e,
        this._clearGroupRewards(),
        t.forEach(function(e) {
            var t = new FCGroupRewardsRowView;
            t.init(),
            t.render(e),
            i.groupRewardViews.push(t),
            t.addTarget(i, function() {
                return i._onRewardSelected(t, EventType.TAP, {
                    reward: e
                })
            }, EventType.TAP),
            i.__groupRewardsContainer.appendChild(t.getRootElement())
        })
    }
    ,
    FCObjectiveDetailsView.prototype.setTasksTitle = function(e) {
        this.__tasksHeader.textContent = e
    }
    ,
    FCObjectiveDetailsView.prototype.setSelectedReward = function(t, i) {
        var e = this.groupRewardViews.find(function(e) {
            return e.reward === t
        });
        e ? e.toggleClass("selected", i) : this.tasksView.forEach(function(e) {
            return e.setSelectedReward(t, i)
        })
    }
    ,
    FCObjectiveDetailsView.prototype.renderTasksList = function(e) {
        var t = this;
        this._clearTasksView(),
        this._setGridViewDisplay(!1),
        this.tasksView = e.map(function(e) {
            return t._generateObjectiveTaskListView(e)
        }),
        this.tasksView.forEach(function(e) {
            t.__tasksListContainer.appendChild(e.getRootElement()),
            e.addTarget(t, t._onRewardSelected, BaseTaskDetailsView.Event.REWARD_SELECTED)
        }),
        this._setListViewDisplay(!0)
    }
    ,
    FCObjectiveDetailsView.prototype.renderTasksGrid = function(e) {
        var t = this;
        this._clearTasksView(),
        this._setListViewDisplay(!1),
        this.tasksView = e.map(function(e) {
            return t._generateObjectiveTaskGridView(e)
        }),
        this.tasksView.forEach(function(e) {
            return t.__tasksGridContainer.appendChild(e.getRootElement())
        }),
        this._setGridViewDisplay(!0),
        this.tasksView.forEach(function(e) {
            return e.renderCarousel()
        }),
        this._setGridViewDisplay(!0)
    }
    ,
    FCObjectiveDetailsView.prototype.dealloc = function() {
        this._clearGroupRewards(),
        this._clearTasksView()
    }
    ,
    FCObjectiveDetailsView.prototype._clearTasksView = function() {
        this.tasksView.forEach(function(e) {
            return e.dealloc()
        }),
        this.__tasksListContainer.innerHTML = "",
        this.__tasksGridContainer.innerHTML = ""
    }
    ,
    FCObjectiveDetailsView.prototype._clearGroupRewards = function() {
        this.groupRewardViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.groupRewardViews = []
    }
    ,
    FCObjectiveDetailsView.prototype._onViewTypeSelected = function(e, t, i) {
        e === this._listTaskViewType ? this._triggerActions(FCObjectiveDetailsView.Event.LIST_VIEW_SELECTED) : e === this._gridTaskViewType ? this._triggerActions(FCObjectiveDetailsView.Event.GRID_VIEW_SELECTED) : DebugUtils.Assert(!1, "Unknown View Type has been selected for FCObjectiveDetailsView")
    }
    ,
    FCObjectiveDetailsView.prototype._generateObjectiveTaskListView = function(e) {
        var t = new FCTaskDetailsListItemView;
        return t.init(),
        t.setDescription(TextUtils.convertTextWithLink(e.description)),
        this._applyObjectiveTaskViewProps(t, e),
        t
    }
    ,
    FCObjectiveDetailsView.prototype._generateObjectiveTaskGridView = function(e) {
        var t = new FCTaskDetailsGridItemView;
        return t.init(),
        this._applyObjectiveTaskViewProps(t, e),
        t
    }
    ,
    FCObjectiveDetailsView.prototype._applyObjectiveTaskViewProps = function(e, t) {
        var i = this;
        t instanceof FCCampaignObjectiveEntity ? e.setRewards(t.rewards[0].rewards) : t instanceof UTCampaignObjectiveEntity && e.setRewards(t.rewards.rewards),
        e.setTitle(t.title),
        e.setProgress(t.progress, t.multiplier),
        t.isClaimable() ? (e.setRedeemable(),
        e.addTarget(this, function() {
            return i._onClaimSelected(e, EventType.TAP, {
                objectiveId: t.id
            })
        }, BaseTaskDetailsView.Event.CLAIM_REWARD)) : t.isCompleted() ? e.setComplete() : (t.isNotStarted() || t.isInProgress()) && t.hasRedirectLink() && (e.setupTakeMeThereButton(t.link),
        e.addTarget(this, function() {
            return i._triggerActions(FCObjectiveDetailsView.Event.TAKE_ME_THERE, {
                link: t.link
            })
        }, BaseTaskDetailsView.Event.TAKE_ME_THERE))
    }
    ,
    FCObjectiveDetailsView.prototype._onClaimSelected = function(e, t, i) {
        this._triggerActions(FCObjectiveDetailsView.Event.CLAIM_OBJECTIVE_REWARD, i)
    }
    ,
    FCObjectiveDetailsView.prototype._onRewardSelected = function(e, t, i) {
        this._triggerActions(FCObjectiveDetailsView.Event.REWARD_SELECTED, i)
    }
    ,
    FCObjectiveDetailsView.prototype._setListViewDisplay = function(e) {
        DOMKit.toggleDisplayStyle(this.__tasksListContainer, e),
        this._listTaskViewType.toggleClass("selected", e)
    }
    ,
    FCObjectiveDetailsView.prototype._setGridViewDisplay = function(e) {
        DOMKit.toggleDisplayStyle(this.__tasksGridContainer, e),
        this._gridTaskViewType.toggleClass("selected", e)
    }
    ,
    FCObjectiveDetailsView.Event = Object.freeze({
        CLAIM_OBJECTIVE_REWARD: "FCObjectiveDetailsView.CLAIM_OBJECTIVE_REWARD",
        TAKE_ME_THERE: "FCObjectiveDetailsView.TAKE_ME_THERE",
        REWARD_SELECTED: "FCObjectiveDetailsView.REWARD_SELECTED",
        GRID_VIEW_SELECTED: "FCObjectiveDetailsView.GRID_VIEW_SELECTED",
        LIST_VIEW_SELECTED: "FCObjectiveDetailsView.LIST_VIEW_SELECTED"
    }),
    FCObjectiveDetailsView
}(EATargetActionView);
FCObjectiveDetailsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("objective-details-view"),
        this.__description = document.createElement("h2"),
        this.__description.classList.add("objective-details-view--description"),
        e.appendChild(this.__description);
        var t = document.createElement("div");
        t.classList.add("objective-details-view--labels"),
        this.__countdown = document.createElement("div"),
        this.__countdown.classList.add("objective-details-view--countdown"),
        t.appendChild(this.__countdown),
        this._repeatableStatus = new UTObjectiveStatusLabelView,
        t.appendChild(this._repeatableStatus.getRootElement()),
        this._refreshStatus = new UTObjectiveStatusLabelView,
        t.appendChild(this._refreshStatus.getRootElement()),
        e.appendChild(t),
        this.__groupRewardsTitle = document.createElement("h2"),
        this.__groupRewardsTitle.classList.add("objective-details-view--subtitle"),
        e.appendChild(this.__groupRewardsTitle),
        this.__groupRewardsContainer = document.createElement("div"),
        this.__groupRewardsContainer.classList.add("objective-details-view--group-rewards-container"),
        e.appendChild(this.__groupRewardsContainer);
        var i = document.createElement("div");
        i.classList.add("objective-details-view--tasks-header"),
        this.__tasksHeader = document.createElement("h2"),
        this.__tasksHeader.classList.add("objective-details-view--tasks-header--title"),
        i.appendChild(this.__tasksHeader),
        this._listTaskViewType = new UTImageButtonControl,
        this._listTaskViewType.getRootElement().classList.add("fut_icon"),
        this._listTaskViewType.getRootElement().classList.add("icon_list_v2"),
        this._listTaskViewType.getRootElement().classList.add("objective-details-view--tasks-header--view-type"),
        i.appendChild(this._listTaskViewType.getRootElement()),
        this._gridTaskViewType = new UTImageButtonControl,
        this._gridTaskViewType.getRootElement().classList.add("fut_icon"),
        this._gridTaskViewType.getRootElement().classList.add("icon_grid"),
        this._gridTaskViewType.getRootElement().classList.add("objective-details-view--tasks-header--view-type"),
        i.appendChild(this._gridTaskViewType.getRootElement()),
        e.appendChild(i),
        this.__tasksListContainer = document.createElement("div"),
        this.__tasksListContainer.classList.add("objective-details-view--tasks-list-container"),
        e.appendChild(this.__tasksListContainer),
        this.__tasksGridContainer = document.createElement("div"),
        this.__tasksGridContainer.classList.add("objective-details-view--tasks-grid-container"),
        e.appendChild(this.__tasksGridContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
FCObjectiveDetailsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__description = null,
    this.__countdown = null,
    this._repeatableStatus.destroy(),
    this._refreshStatus.destroy(),
    this.__groupRewardsTitle = null,
    this.__groupRewardsContainer = null,
    this.__tasksHeader = null,
    this._listTaskViewType.destroy(),
    this._gridTaskViewType.destroy(),
    this.__tasksListContainer = null,
    this.__tasksGridContainer = null
}
,
FCObjectiveDetailsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
var FCObjectiveDetailsViewControllerViewType;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
!function(e) {
    e[e.LIST = 0] = "LIST",
    e[e.GRID = 1] = "GRID"
}(FCObjectiveDetailsViewControllerViewType = FCObjectiveDetailsViewControllerViewType || {});
var FCObjectiveDetailsViewController = function(n) {
    function FCObjectiveDetailsViewController() {
        var e = n.call(this) || this;
        return e.INTERVAL_TIME = 1e4,
        e._lastChosenReward = null,
        e._selectedViewType = FCObjectiveDetailsViewControllerViewType.LIST,
        e._isInSplitView = !1,
        e._goToLinkController = new UTGoToLinkController,
        e._intervalController = new EAIntervalController(e.INTERVAL_TIME,e.handleEventTimer.bind(e)),
        e
    }
    return __extends(FCObjectiveDetailsViewController, n),
    FCObjectiveDetailsViewController.prototype.init = function() {
        DebugUtils.Assert(!1, "Use [initWithObjectives] instead")
    }
    ,
    FCObjectiveDetailsViewController.prototype.initWithObjectives = function(e, t, i) {
        if (void 0 === i && (i = !1),
        !this.initialized) {
            this._isInSplitView = i,
            this._objectiveGroup = t,
            this._objectivesViewModel = e;
            var o = this.getView();
            o.init(),
            o.setTasksTitle(services.Localization.localize("objectives.group.tasks.label")),
            this._intervalController.init(),
            this._goToLinkController.init(),
            n.prototype.init.call(this)
        }
    }
    ,
    FCObjectiveDetailsViewController.prototype.dealloc = function() {
        this._goToLinkController.dealloc(),
        this._intervalController.dealloc()
    }
    ,
    FCObjectiveDetailsViewController.prototype.renderObjectiveDetails = function() {
        var e, t = this.getView(), i = this._objectiveGroup;
        t.setSubtitle(null !== (e = i.subtitle) && void 0 !== e ? e : BLANK_STR),
        t.setGroupRewards(services.Localization.localize("objectives.popup.reward-toggle"), this._getGroupRewards(i)),
        this._selectedViewType === FCObjectiveDetailsViewControllerViewType.LIST ? this._renderTasksList() : this._renderTasksGrid(),
        this._setRepeatableLabels(i.repeatabilityMode, i.getRemainingRepeats(), i.getRefreshTimeRemaining()),
        this.setObjectiveGroupCountdown()
    }
    ,
    FCObjectiveDetailsViewController.prototype.setObjectiveGroupCountdown = function() {
        var e = this._objectiveGroup
          , t = this.getView();
        if (e instanceof UTCampaignGroupEntity && !e.isMilestone()) {
            var i, o = services.Localization;
            i = e.hasExpired() ? o.localize("objectives.tile.expired") : o.localize("scmp.group.countdown", [o.localizeTimeRemaining(e.getTimeRemaining())]),
            t.setCountdown(!0, i)
        } else
            t.setCountdown(!1)
    }
    ,
    FCObjectiveDetailsViewController.prototype._getTelemetryId = function() {
        return "Objectives - Full Screen Details View"
    }
    ,
    FCObjectiveDetailsViewController.prototype._getViewInstanceFromData = function() {
        return new FCObjectiveDetailsView
    }
    ,
    FCObjectiveDetailsViewController.prototype._trackPageView = function() {
        TelemetryManager.trackPage(TelemetryManager.Sections.OBJECTIVES, this._getTelemetryId())
    }
    ,
    FCObjectiveDetailsViewController.prototype.getNavigationTitle = function() {
        var e;
        return null !== (e = this._objectiveGroup.title) && void 0 !== e ? e : BLANK_STR
    }
    ,
    FCObjectiveDetailsViewController.prototype.viewDidAppear = function() {
        n.prototype.viewDidAppear.call(this),
        this._trackPageView(),
        this.renderObjectiveDetails(),
        this._intervalController.start();
        var e = this.getView();
        e.addTarget(this, this._onClaimButtonSelected, FCObjectiveDetailsView.Event.CLAIM_OBJECTIVE_REWARD),
        this._isInSplitView || (e.addTarget(this, this._onTakeMethereSelected, FCObjectiveDetailsView.Event.TAKE_ME_THERE),
        e.addTarget(this, this._onRewardSelected, FCObjectiveDetailsView.Event.REWARD_SELECTED),
        e.addTarget(this, this._onGridViewTypeSelected, FCObjectiveDetailsView.Event.GRID_VIEW_SELECTED),
        e.addTarget(this, this._onListViewTypeSelected, FCObjectiveDetailsView.Event.LIST_VIEW_SELECTED));
        var t = getDefaultDispatcher();
        t.addObserver(AppNotification.APP_PAUSE, this, this.onAppPaused),
        t.addObserver(AppNotification.APP_RESUME, this, this.onAppResumed),
        this._goToLinkController.setNavigationController(this.getNavigationController())
    }
    ,
    FCObjectiveDetailsViewController.prototype.viewWillDisappear = function() {
        n.prototype.viewWillDisappear.call(this);
        var e = getDefaultDispatcher();
        e.removeObserver(AppNotification.APP_PAUSE, this),
        e.removeObserver(AppNotification.APP_RESUME, this);
        var t = this.getView();
        t.removeTarget(this, this._onClaimButtonSelected, FCObjectiveDetailsView.Event.CLAIM_OBJECTIVE_REWARD),
        this._isInSplitView || (t.removeTarget(this, this._onTakeMethereSelected, FCObjectiveDetailsView.Event.TAKE_ME_THERE),
        t.removeTarget(this, this._onRewardSelected, FCObjectiveDetailsView.Event.REWARD_SELECTED),
        t.removeTarget(this, this._onGridViewTypeSelected, FCObjectiveDetailsView.Event.GRID_VIEW_SELECTED),
        t.removeTarget(this, this._onListViewTypeSelected, FCObjectiveDetailsView.Event.LIST_VIEW_SELECTED)),
        this._intervalController.stop()
    }
    ,
    FCObjectiveDetailsViewController.prototype._onClaimButtonSelected = function(e, t, i) {
        function Lgc(e, t) {
            if (e.unobserve(n),
            TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.OBJECTIVE_REWARDS_CLAIMED, "Claim Milestones Rewards"),
            t.success && t.response && !JSUtils.isString(t.response)) {
                services.Notification.queue([s.localize("notification.scmp.claimSuccess"), UINotificationType.POSITIVE]);
                var i = new FCGameRewardsViewController(t.response.rewards);
                i.init(),
                i.modalDisplayDimensions.width = "24em";
                var o = i.getView();
                o.setTitle(s.localize("scmp.objective.rewards.title")),
                o.setDescription(s.localize("scmp.objective.rewards.description", [r ? r.title : ""])),
                o.setButtonText(s.localize("objective.rewards.claim")),
                o.setClaimable(!0),
                gPopupClickShield.setActivePopup(i),
                n.renderObjectiveDetails()
            } else
                services.Notification.queue([s.localize("notification.scmp.claimFail"), UINotificationType.NEGATIVE])
        }
        var n = this
          , o = this._objectivesViewModel.getCurrentCategory()
          , r = this._objectiveGroup.getObjectiveById(i.objectiveId)
          , s = services.Localization;
        r instanceof UTCampaignObjectiveEntity && o ? this._objectivesViewModel.claimObjectiveRewards(o, this._objectiveGroup.compositeId, i.objectiveId).observe(this, Lgc) : r instanceof FCCampaignObjectiveEntity && this._objectiveGroup instanceof FCCampaignGroupEntity ? this._objectivesViewModel.claimMetaGroupTaskRewards(this._objectiveGroup, r).observe(this, Lgc) : DebugUtils.Assert(!1, "Unexpected invalid type or null objective")
    }
    ,
    FCObjectiveDetailsViewController.prototype._onTakeMethereSelected = function(e, t, i) {
        var o;
        (null === (o = this._goToLinkController) || void 0 === o ? void 0 : o.attemptNavigation(i.link)) && TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.BUTTON_PRESS, "Take Me There - " + i.link)
    }
    ,
    FCObjectiveDetailsViewController.prototype._onRewardSelected = function(e, t, i) {
        var o;
        if (i.reward.isPlayer) {
            var n = this.createBioViewController(i.reward);
            n ? null === (o = this.getNavigationController()) || void 0 === o || o.pushViewController(n) : services.Notification.queue([services.Localization.localize("playerbio.unavailable"), UINotificationType.NEGATIVE])
        }
    }
    ,
    FCObjectiveDetailsViewController.prototype.createBioViewController = function(e) {
        var t = this.getView();
        this._lastChosenReward && t.setSelectedReward(this._lastChosenReward, !1),
        this._lastChosenReward = e,
        t.setSelectedReward(e, !0);
        var i = null;
        if ((i = this._lastChosenReward instanceof FCRewardVO ? this._lastChosenReward.utItem : this._lastChosenReward.item) && i.isValid() && i.isPlayer() && JSUtils.isValid(i.getMetaData())) {
            var o = new UTPlayerBioViewController;
            return o.initWithItem(i),
            o
        }
        return null
    }
    ,
    FCObjectiveDetailsViewController.prototype._getGroupRewards = function(e) {
        return e instanceof UTCampaignGroupEntity ? e.rewards.rewards : e instanceof FCCampaignGroupEntity && 0 < e.rewards.length ? e.rewards[0].rewards : null
    }
    ,
    FCObjectiveDetailsViewController.prototype._setRepeatableLabels = function(e, t, i) {
        var o = this.getView()
          , n = services.Localization
          , r = ""
          , s = UTObjectiveStatusLabelView.Type.NON_REPEATABLE;
        e === ObjectiveRepeatabilityMode.UNLIMITED ? (r = n.localize("tile.sbcSets.repeatable"),
        s = UTObjectiveStatusLabelView.Type.REPEATABLE) : e !== ObjectiveRepeatabilityMode.LIMITED && e !== ObjectiveRepeatabilityMode.REFRESH || (r = n.localize("tile.sbcSets.repeatable") + " " + t.toString(),
        s = UTObjectiveStatusLabelView.Type.REPEATABLE);
        var a = e !== ObjectiveRepeatabilityMode.NON_REPEATABLE;
        o.setRepeatableStatus(a, s, r);
        var l = e === ObjectiveRepeatabilityMode.REFRESH
          , c = null;
        l && (c = n.localizeTimeRemaining(i)),
        o.setRefreshStatus(l, c)
    }
    ,
    FCObjectiveDetailsViewController.prototype._renderTasksList = function() {
        var e = this.getView();
        e.renderTasksList(this._objectiveGroup.getPrioritySortedObjectives()),
        this._lastChosenReward && e.setSelectedReward(this._lastChosenReward, !0)
    }
    ,
    FCObjectiveDetailsViewController.prototype._renderTasksGrid = function() {
        var e = this.getView();
        e.renderTasksGrid(this._objectiveGroup.getPrioritySortedObjectives()),
        this._lastChosenReward && e.setSelectedReward(this._lastChosenReward, !0)
    }
    ,
    FCObjectiveDetailsViewController.prototype._onListViewTypeSelected = function(e, t, i) {
        this._selectedViewType !== FCObjectiveDetailsViewControllerViewType.LIST && (this._selectedViewType = FCObjectiveDetailsViewControllerViewType.LIST,
        this._renderTasksList())
    }
    ,
    FCObjectiveDetailsViewController.prototype._onGridViewTypeSelected = function(e, t, i) {
        this._selectedViewType !== FCObjectiveDetailsViewControllerViewType.GRID && (this._selectedViewType = FCObjectiveDetailsViewControllerViewType.GRID,
        this._renderTasksGrid())
    }
    ,
    FCObjectiveDetailsViewController.prototype.handleEventTimer = function() {
        if (this._objectiveGroup) {
            var e = this._objectiveGroup
              , t = e && e.isRefresh()
              , i = e.getRefreshTimeRemaining() < Date.now();
            e && t && i ? (e.refresh(),
            this.renderObjectiveDetails()) : (this._setRepeatableLabels(e.repeatabilityMode, e.getRemainingRepeats(), e.getRefreshTimeRemaining()),
            this.setObjectiveGroupCountdown())
        }
    }
    ,
    FCObjectiveDetailsViewController.prototype.onAppPaused = function(e, t, i) {
        this._intervalController.stop()
    }
    ,
    FCObjectiveDetailsViewController.prototype.onAppResumed = function(e, t, i) {
        this._intervalController.start()
    }
    ,
    FCObjectiveDetailsViewController
}(EAViewController)
  , FCObjectiveDetailsSplitViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function FCObjectiveDetailsSplitViewController() {
        var e = i.call(this) || this;
        return e._staffbioVC = null,
        e._goToLinkController = new UTGoToLinkController,
        e._fcObjectiveDetailsViewController = new FCObjectiveDetailsViewController,
        e
    }
    return __extends(FCObjectiveDetailsSplitViewController, i),
    FCObjectiveDetailsSplitViewController.prototype.init = function() {
        DebugUtils.Assert(!1, "Use [initWithObjectives] instead")
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype.initWithObjectives = function(e, t) {
        this.initialized || (i.prototype.init.call(this),
        this._goToLinkController.init(),
        this._objectiveGroup = t,
        this._fcObjectiveDetailsViewController.initWithObjectives(e, t, !0),
        this.addChildViewController(this._fcObjectiveDetailsViewController),
        this._setRightPanelDefaultReward(),
        this.setLeftController(this._fcObjectiveDetailsViewController))
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype.dealloc = function() {
        this._goToLinkController.dealloc(),
        this._fcObjectiveDetailsViewController.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype.getNavigationTitle = function() {
        var e;
        return null !== (e = this._objectiveGroup.title) && void 0 !== e ? e : BLANK_STR
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this._fcObjectiveDetailsViewController.getView();
        e.addTarget(this, this._onTakeMethereSelected, FCObjectiveDetailsView.Event.TAKE_ME_THERE),
        e.addTarget(this, this._onRewardSelected, FCObjectiveDetailsView.Event.REWARD_SELECTED),
        this._goToLinkController.setNavigationController(this.getNavigationController())
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype.viewWillDisappear = function() {
        var e = this._fcObjectiveDetailsViewController.getView();
        e.removeTarget(this, this._onTakeMethereSelected, FCObjectiveDetailsView.Event.TAKE_ME_THERE),
        e.removeTarget(this, this._onRewardSelected, FCObjectiveDetailsView.Event.REWARD_SELECTED),
        i.prototype.viewWillDisappear.call(this)
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype._onTakeMethereSelected = function(e, t, i) {
        var o;
        (null === (o = this._goToLinkController) || void 0 === o ? void 0 : o.attemptNavigation(i.link)) && TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.BUTTON_PRESS, "Take Me There - " + i.link)
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype._onRewardSelected = function(e, t, i) {
        i.reward ? i.reward.isPlayer && (this._staffbioVC = this._fcObjectiveDetailsViewController.createBioViewController(i.reward),
        JSUtils.isValid(this._staffbioVC) ? (this.hideRightPanel(!1),
        this.setRightController(this._staffbioVC)) : (this.hideRightPanel(!0),
        services.Notification.queue([services.Localization.localize("playerbio.unavailable"), UINotificationType.NEGATIVE]))) : this.hideRightPanel(!0)
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype._getGroupRewards = function(e) {
        return e instanceof UTCampaignGroupEntity ? e.rewards.rewards : e instanceof FCCampaignGroupEntity && 0 < e.rewards.length ? e.rewards[0].rewards : null
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype._setRightPanelDefaultReward = function() {
        var e = this._getGroupRewards(this._objectiveGroup)
          , t = this._extractValidRewards(this._objectiveGroup.getPrioritySortedObjectives())
          , i = (null != e ? e : []).concat(t).filter(function(e) {
            var t = e instanceof FCRewardVO ? e.utItem : e.item;
            return t && t.isValid() && (t.isPlayer() && JSUtils.isValid(t.getMetaData()) || t.isManager())
        })
          , o = 0 < i.length ? i[0] : null;
        this._onRewardSelected(this, FCObjectiveDetailsView.Event.REWARD_SELECTED, {
            reward: o
        })
    }
    ,
    FCObjectiveDetailsSplitViewController.prototype._extractValidRewards = function(e) {
        var t;
        return null === (t = e.map(function(e) {
            return e instanceof FCCampaignObjectiveEntity ? e.rewards[0].rewards : e instanceof UTCampaignObjectiveEntity ? e.rewards.rewards : void 0
        })) || void 0 === t ? void 0 : t.filter(JSUtils.isValid).reduce(function(e, t) {
            return (null != e ? e : []).concat(null != t ? t : [])
        }, [])
    }
    ,
    FCObjectiveDetailsSplitViewController
}(UTSplitViewController))
  , UTObjectivesFiltersView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTObjectivesFiltersView() {
        return t.call(this) || this
    }
    return __extends(UTObjectivesFiltersView, t),
    UTObjectivesFiltersView.prototype.init = function() {
        t.prototype.init.call(this),
        this._sortGroupDD.init(),
        this._filterGroupDD.init(),
        this._resetBtn.init(),
        this._submitBtn.init();
        var e = services.Localization;
        this.__sortGroupLabel.textContent = e.localize("objectives.filters.orderby"),
        this.__filterGroupLabel.textContent = e.localize("objectives.filters.filterby"),
        this._resetBtn.addTarget(this, this._resetPressed, EventType.TAP),
        this._submitBtn.addTarget(this, this._submitPressed, EventType.TAP)
    }
    ,
    UTObjectivesFiltersView.prototype.dealloc = function() {
        this._resetBtn.removeTarget(this, this._resetPressed, EventType.TAP),
        this._submitBtn.removeTarget(this, this._submitPressed, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTObjectivesFiltersView.prototype._submitPressed = function(e, t, i) {
        var o = {
            sortOption: Number(this._sortGroupDD.value),
            filterOption: Number(this._filterGroupDD.value)
        };
        this._triggerActions(UTObjectivesFiltersView.Event.SUBMIT, o)
    }
    ,
    UTObjectivesFiltersView.prototype._resetPressed = function(e, t, i) {
        this._triggerActions(UTObjectivesFiltersView.Event.RESET)
    }
    ,
    UTObjectivesFiltersView.prototype.render = function() {
        var e = services.Localization;
        this._submitBtn.setText(e.localize("search.filter.submit")),
        this._resetBtn.setText(e.localize("search.filter.reset"))
    }
    ,
    UTObjectivesFiltersView.prototype.getSubmitBtn = function() {
        return this._submitBtn
    }
    ,
    UTObjectivesFiltersView.prototype.getSortOptionDD = function() {
        return this._sortGroupDD
    }
    ,
    UTObjectivesFiltersView.prototype.getFilterOptionDD = function() {
        return this._filterGroupDD
    }
    ,
    UTObjectivesFiltersView.prototype.setSortOptions = function(e) {
        this._sortGroupDD.setOptions(e)
    }
    ,
    UTObjectivesFiltersView.prototype.setFilterOptions = function(e) {
        this._filterGroupDD.setOptions(e)
    }
    ,
    UTObjectivesFiltersView.prototype.setSortOption = function(e) {
        this._sortGroupDD.setDefaultIndexByValue(e, !0)
    }
    ,
    UTObjectivesFiltersView.prototype.setFilterOption = function(e) {
        this._filterGroupDD.setDefaultIndexByValue(e, !0)
    }
    ,
    UTObjectivesFiltersView.Event = {
        SUBMIT: "UTObjectivesFiltersView.SUBMIT",
        RESET: "UTObjectivesFiltersView.RESET"
    },
    UTObjectivesFiltersView
}(EATargetActionView));
UTObjectivesFiltersView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objectives-filters-view");
        var t = document.createElement("div");
        t.classList.add("ut-objectives-filters-view--dropdown-container"),
        this.__sortGroupLabel = document.createElement("span"),
        this.__sortGroupLabel.classList.add("ut-objectives-filters-view--dropdown-label"),
        t.appendChild(this.__sortGroupLabel),
        this._sortGroupDD = new UTDropDownControl,
        t.appendChild(this._sortGroupDD.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-objectives-filters-view--dropdown-container"),
        this.__filterGroupLabel = document.createElement("span"),
        this.__filterGroupLabel.classList.add("ut-objectives-filters-view--dropdown-label"),
        i.appendChild(this.__filterGroupLabel),
        this._filterGroupDD = new UTDropDownControl,
        i.appendChild(this._filterGroupDD.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-objectives-filters-view--button-group"),
        this._resetBtn = new UTStandardButtonControl,
        o.appendChild(this._resetBtn.getRootElement()),
        this._submitBtn = new UTStandardButtonControl,
        this._submitBtn.getRootElement().classList.add("call-to-action"),
        o.appendChild(this._submitBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTObjectivesFiltersView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__sortGroupLabel = null,
    this._sortGroupDD.destroy(),
    this.__filterGroupLabel = null,
    this._filterGroupDD.destroy(),
    this._resetBtn.destroy(),
    this._submitBtn.destroy()
}
,
UTObjectivesFiltersView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var TierViewState, UTObjectivesFiltersViewController = function(o) {
    function UTObjectivesFiltersViewController(e, t) {
        var i = o.call(this) || this;
        return i.filterBy = t,
        i.sortBy = e,
        i
    }
    return __extends(UTObjectivesFiltersViewController, o),
    UTObjectivesFiltersViewController.prototype.viewDidAppear = function() {
        o.prototype.viewDidAppear.call(this),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.FILTER, "Objectives filters - Sheet opened");
        var e = this.getView();
        e.setSortOptions(factories.DataProvider.getObjectiveGroupSortDP()),
        e.setFilterOptions(factories.DataProvider.getObjectiveGroupFilterDP()),
        e.setSortOption(this.sortBy),
        e.setFilterOption(this.filterBy),
        e.addTarget(this, this.submitTap, UTObjectivesFiltersView.Event.SUBMIT),
        e.getSortOptionDD().addTarget(this, this.eSortOptionChanged, EventType.CHANGE),
        e.getFilterOptionDD().addTarget(this, this.eFilterOptionChanged, EventType.CHANGE),
        e.render()
    }
    ,
    UTObjectivesFiltersViewController.prototype.viewWillDisappear = function() {
        o.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.submitTap, UTObjectivesFiltersView.Event.SUBMIT),
        e.getSortOptionDD().removeTarget(this, this.eSortOptionChanged, EventType.CHANGE),
        e.getFilterOptionDD().removeTarget(this, this.eFilterOptionChanged, EventType.CHANGE)
    }
    ,
    UTObjectivesFiltersViewController.prototype._getViewInstanceFromData = function() {
        return new UTObjectivesFiltersView
    }
    ,
    UTObjectivesFiltersViewController.prototype.submitTap = function(e, t) {
        this.closePopup()
    }
    ,
    UTObjectivesFiltersViewController.prototype.eSortOptionChanged = function(e, t, i) {
        this.sortBy = Number(i.value),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.FILTER, "Objectives filters - Sort Option Changed")
    }
    ,
    UTObjectivesFiltersViewController.prototype.eFilterOptionChanged = function(e, t, i) {
        this.filterBy = Number(i.value),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.FILTER, "Objectives filters - Filter Option Changed")
    }
    ,
    UTObjectivesFiltersViewController
}(BasePopupViewController), UTObjectiveCategoryViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(o) {
    function UTObjectiveCategoryViewController(e) {
        var t = o.call(this) || this;
        return t.intervalController = new EAIntervalController(1e4,t.handleEventTimer.bind(t)),
        t.objectivesViewModel = e,
        t.groupRefreshMap = new EAHashTable,
        t
    }
    return __extends(UTObjectiveCategoryViewController, o),
    UTObjectiveCategoryViewController.prototype.init = function() {
        o.prototype.init.call(this),
        this.intervalController.init()
    }
    ,
    UTObjectiveCategoryViewController.prototype.dealloc = function() {
        this.intervalController.dealloc(),
        this.filtersModal && (this.filtersModal.onExit.unobserve(this),
        this.filtersModal.dealloc(),
        this.filtersModal = null),
        o.prototype.dealloc.call(this)
    }
    ,
    UTObjectiveCategoryViewController.prototype._getTelemetryId = function() {
        var e = this.objectivesViewModel.getCurrentCategory();
        return e ? "Objectives - " + e.name : null
    }
    ,
    UTObjectiveCategoryViewController.prototype._getViewInstanceFromData = function() {
        return new UTObjectiveCategoryView
    }
    ,
    UTObjectiveCategoryViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.objectives")
    }
    ,
    UTObjectiveCategoryViewController.prototype.viewDidAppear = function() {
        o.prototype.viewDidAppear.call(this),
        this.intervalController.start(),
        this.loadCategory();
        var e = getDefaultDispatcher();
        e.addObserver(AppNotification.APP_PAUSE, this, this.onAppPaused),
        e.addObserver(AppNotification.APP_RESUME, this, this.onAppResumed);
        var t = this.getView();
        t.addTarget(this, this.onClaimGroupReward, UTObjectiveCategoryView.Event.CLAIM_REWARD),
        t.addTarget(this, this.onGroupRewardsInfoSelected, UTObjectiveCategoryView.Event.REWARD_INFO),
        t.getFloatingFilterButton().addTarget(this, this.eFilterSelected, EventType.TAP);
        var i = this.objectivesViewModel.getCurrentCategory();
        i && TelemetryManager.trackPage(TelemetryManager.Sections.OBJECTIVES, "Objective Category - " + i.name)
    }
    ,
    UTObjectiveCategoryViewController.prototype.viewWillDisappear = function() {
        o.prototype.viewWillDisappear.call(this),
        this.intervalController.stop();
        var e = getDefaultDispatcher();
        e.removeObserver(AppNotification.APP_PAUSE, this),
        e.removeObserver(AppNotification.APP_RESUME, this);
        var t = this.getView();
        t.removeTarget(this, this.onClaimGroupReward, UTObjectiveCategoryView.Event.CLAIM_REWARD),
        t.removeTarget(this, this.onGroupRewardsInfoSelected, UTObjectiveCategoryView.Event.REWARD_INFO),
        t.getFloatingFilterButton().removeTarget(this, this.eFilterSelected, EventType.TAP)
    }
    ,
    UTObjectiveCategoryViewController.prototype.eFilterSelected = function(e, t, i) {
        var o = this;
        this.filtersModal = new UTObjectivesFiltersViewController(this.objectivesViewModel.sortBy,this.objectivesViewModel.filterBy),
        this.filtersModal.init(),
        this.filtersModal.modalDisplayStyle = "sheet",
        this.filtersModal.modalCanDismissFromShield = !0,
        this.filtersModal.modalSheetTitle = services.Localization.localize("objectives.filters.title"),
        this.filtersModal.getView().addTarget(this, this.onFilterModalEvent, UTObjectivesFiltersView.Event.RESET),
        this.filtersModal.getView().addTarget(this, this.onFilterModalEvent, UTObjectivesFiltersView.Event.SUBMIT);
        var n = this.filtersModal;
        this.filtersModal.onExit.observe(this, function() {
            n.getView().removeTarget(o, o.onFilterModalEvent, UTObjectivesFiltersView.Event.RESET),
            n.getView().removeTarget(o, o.onFilterModalEvent, UTObjectivesFiltersView.Event.SUBMIT)
        }),
        this.presentViewController(this.filtersModal)
    }
    ,
    UTObjectiveCategoryViewController.prototype.loadCategory = function() {
        var o = this;
        this.objectivesViewModel.requestCategories().observe(this, function(e, t) {
            e.unobserve(o);
            var i = o.objectivesViewModel.getCurrentCategory();
            t.success && i ? (o.populateCategoryGroups(),
            o.populateGroupRefreshMap(i)) : services.Notification.queue([services.Localization.localize("notification.scmp.categories.loadFailed"), UINotificationType.NEGATIVE])
        })
    }
    ,
    UTObjectiveCategoryViewController.prototype.populateGroupRefreshMap = function(e) {
        var t = this;
        this.groupRefreshMap.clear(),
        e.groups.forEach(function(e) {
            t.groupRefreshMap.set(e.compositeId, e.getNextRefreshTime())
        })
    }
    ,
    UTObjectiveCategoryViewController.prototype.updateRefreshGroups = function(r) {
        var s = this;
        this.groupRefreshMap.keys().forEach(function(e) {
            var t = r.getGroup(e)
              , i = t && t.isRefresh()
              , o = s.groupRefreshMap.get(e)
              , n = o && o < Date.now();
            t && i && n && (t.refresh(),
            s.refreshView())
        }),
        this.populateGroupRefreshMap(r)
    }
    ,
    UTObjectiveCategoryViewController.prototype.handleEventTimer = function() {
        var e = this.objectivesViewModel.getCurrentCategory();
        if (e) {
            this.updateRefreshGroups(e);
            var t = this.getView();
            t.updateGroupsTimeToRefresh(e.groups),
            t.updateGroupsTimeRemaining(e.groups)
        }
    }
    ,
    UTObjectiveCategoryViewController.prototype.populateCategoryGroups = function() {
        var t = this
          , e = this.objectivesViewModel.getCurrentCategory()
          , i = this.objectivesViewModel.getCurrentCategoryGroups()
          , o = this.getView();
        if (e) {
            var n = new EAHashTable;
            i.forEach(function(e) {
                n.set(e.id, t.objectivesViewModel.getGroupsSortedObjectives(e))
            }),
            this.objectivesViewModel.sortObjectiveGroupsByClaimableState(i),
            o.setCategoryGroups(e, i, n, services.Objectives.isObjectivesClaimAllEnabled())
        }
    }
    ,
    UTObjectiveCategoryViewController.prototype.refreshView = function() {
        this.populateCategoryGroups()
    }
    ,
    UTObjectiveCategoryViewController.prototype.claimGroupReward = function(e) {
        var l = this
          , t = this.objectivesViewModel.getCurrentCategory()
          , i = t ? t.getGroup(e) : null
          , c = services.Localization;
        t && i && this.objectivesViewModel.requestGroupDetails(t, i.compositeId).observe(this, function(e, r) {
            e.unobserve(l);
            var s = services.Objectives.isObjectivesClaimAllEnabled();
            if (r.success && r.data && r.data.group) {
                var a = r.data.group;
                s && (a.isClaimable() || a.hasUnclaimedObjectiveRewards()) || !s && a.isClaimable() && !a.hasUnclaimedObjectiveRewards() ? l.objectivesViewModel.claimGroupRewards(t, a.compositeId, s).observe(l, function(e, t) {
                    var i;
                    if (l.onRewardClaimed(e, t),
                    t.success && t.response && !JSUtils.isString(t.response) && 0 < t.response.rewards.length) {
                        var o = new UTGameRewardsViewController(t.response.rewards);
                        o.init(),
                        o.modalDisplayDimensions.width = "24em";
                        var n = o.getView();
                        n.setTitle(c.localize("scmp.group.rewards.title")),
                        n.setDescription(c.localize("scmp.group.rewards.description", [a.title])),
                        n.setButtonText(c.localize("common.dialog.ok")),
                        gPopupClickShield.setActivePopup(o)
                    } else
                        s && (null === (i = r.error) || void 0 === i ? void 0 : i.code) === UtasErrorCode.SERVICE_IS_DISABLED && (services.Objectives.setObjectivesClaimAllDisabled(),
                        services.Notification.queue([c.localize("notification.scmp.claim-all-disabled"), UINotificationType.NEGATIVE]),
                        l.refreshView())
                }) : a.isClaimable() && !s && a.hasUnclaimedObjectiveRewards() && l.navigateToObjectivesDetailView(a)
            } else
                services.Notification.queue([c.localize("notification.scmp.rewardsInfoFailed"), UINotificationType.NEGATIVE])
        })
    }
    ,
    UTObjectiveCategoryViewController.prototype.onClaimObjectiveReward = function(e, t, i) {
        this.claimObjectiveReward(i.group, i.id)
    }
    ,
    UTObjectiveCategoryViewController.prototype.claimObjectiveReward = function(e, t) {
        var n = this
          , i = this.objectivesViewModel.getCurrentCategory()
          , r = e ? e.getObjectiveById(t) : null
          , s = services.Localization;
        DebugUtils.Assert(JSUtils.isValid(i), "Missing category when attempting to claim objective rewards"),
        DebugUtils.Assert(JSUtils.isValid(e), "Missing group when attempting to claim objective rewards"),
        DebugUtils.Assert(JSUtils.isValid(r), "Missing objective when attempting to claim objective rewards"),
        i && e && r && this.objectivesViewModel.claimObjectiveRewards(i, e.compositeId, t).observe(this, function(e, t) {
            if (e.unobserve(n),
            TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.OBJECTIVE_REWARDS_CLAIMED, "Claim Milestones Rewards"),
            t.success && t.response && !JSUtils.isString(t.response)) {
                services.Notification.queue([s.localize("notification.scmp.claimSuccess"), UINotificationType.POSITIVE]);
                var i = new UTGameRewardsViewController(t.response.rewards);
                i.init(),
                i.modalDisplayDimensions.width = "24em";
                var o = i.getView();
                o.setTitle(s.localize("scmp.objective.rewards.title")),
                o.setDescription(s.localize("scmp.objective.rewards.description", [r ? r.title : ""])),
                o.setButtonText(s.localize("objective.rewards.claim")),
                gPopupClickShield.setActivePopup(i),
                n.refreshView()
            } else
                services.Notification.queue([s.localize("notification.scmp.claimFail"), UINotificationType.NEGATIVE])
        })
    }
    ,
    UTObjectiveCategoryViewController.prototype.onClaimGroupReward = function(e, t, i) {
        this.claimGroupReward(i.id)
    }
    ,
    UTObjectiveCategoryViewController.prototype.triggerConsolidatedRewardsPopup = function(e, t, i, o) {
        var n = new UTRewardSelectionChoiceViewController(e);
        n.setTitleText(t),
        n.setClaimableState(i),
        n.getView().addTarget(this, o, UTRewardSelectionChoiceView.Event.CONFIRM),
        gPopupClickShield.setActivePopup(n)
    }
    ,
    UTObjectiveCategoryViewController.prototype.onGroupRewardsInfoSelected = function(e, t, i) {
        DebugUtils.Assert(JSUtils.isString(i.id), "Expected a string for group composite ID.");
        var o = this.objectivesViewModel.getGroupByCompositeId(i.id);
        o && this.navigateToObjectivesDetailView(o)
    }
    ,
    UTObjectiveCategoryViewController.prototype.navigateToObjectivesDetailView = function(e) {
        var t, i = isPhone() ? new FCObjectiveDetailsViewController : new FCObjectiveDetailsSplitViewController;
        i.initWithObjectives(this.objectivesViewModel, e),
        null === (t = this.getNavigationController()) || void 0 === t || t.pushViewController(i)
    }
    ,
    UTObjectiveCategoryViewController.prototype.onFilterModalEvent = function(e, t, i) {
        this.objectivesViewModel && this.filtersModal && (t === UTObjectivesFiltersView.Event.RESET ? (this.filtersModal.getView().setSortOption(ObjectiveSortOption.NONE),
        this.filtersModal.getView().setFilterOption(ObjectiveFilterOption.NONE)) : t === UTObjectivesFiltersView.Event.SUBMIT && (this.dismissViewController(),
        this.objectivesViewModel.sortBy = i.sortOption,
        this.objectivesViewModel.filterBy = i.filterOption,
        this.refreshView())),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.FILTER, "Objectives filters - Filters popup submit")
    }
    ,
    UTObjectiveCategoryViewController.prototype.onRewardClaimed = function(e, t) {
        e.unobserve(this),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.OBJECTIVE_REWARDS_CLAIMED, "Claim Season Objectives Rewards"),
        t.success ? (services.Notification.queue([services.Localization.localize("notification.scmp.claimSuccess"), UINotificationType.POSITIVE]),
        this.refreshView()) : services.Notification.queue([services.Localization.localize("notification.scmp.claimFail"), UINotificationType.NEGATIVE])
    }
    ,
    UTObjectiveCategoryViewController.prototype.onAppPaused = function(e, t, i) {
        this.intervalController.stop()
    }
    ,
    UTObjectiveCategoryViewController.prototype.onAppResumed = function(e, t, i) {
        this.intervalController.start()
    }
    ,
    UTObjectiveCategoryViewController
}(EAViewController)), UTGameModesRewardsCarouselView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTGameModesRewardsCarouselView() {
        var e = t.call(this) || this;
        return e.defaultIndex = 0,
        e.showDots = !1,
        e
    }
    return __extends(UTGameModesRewardsCarouselView, t),
    UTGameModesRewardsCarouselView.prototype.hasDotsNavigation = function() {
        return this.showDots
    }
    ,
    UTGameModesRewardsCarouselView.prototype.setDefaultIndex = function(e) {
        this.defaultIndex = e
    }
    ,
    UTGameModesRewardsCarouselView.prototype.setupRewards = function(e) {
        var i = this;
        this.preSetup(e.length),
        e.forEach(function(e) {
            var t = i.generateCarouselElem(e);
            i._tnsCarousel.appendElem(t.elems, t.containerClass)
        }, this),
        1 < this.rewardsCount && (this.showDots = 1 === this.visibleItems,
        this.instantiateCarousel())
    }
    ,
    UTGameModesRewardsCarouselView.prototype.setupCampaignRewards = function(e) {
        var i = this;
        this.preSetup(e.length),
        e.forEach(function(e) {
            var t = i.generateCarouselElem(e.rewards[0], e.hidden);
            i._tnsCarousel.appendElem(t.elems, t.containerClass)
        }, this),
        1 < this.rewardsCount && (this.showDots = 1 === this.visibleItems,
        this.instantiateCarousel())
    }
    ,
    UTGameModesRewardsCarouselView.prototype.generateCarouselElem = function(e, t) {
        void 0 === t && (t = !1);
        var i = ["reward", "small"]
          , o = [];
        if (t)
            i.push(GameRewardStyle.HIDDEN_REWARD);
        else if (e.isStadiumSlotUnlock)
            i.push(GameRewardStyle.MYSTADIUM_SLOT);
        else if (e.isCoin)
            i.push(GameRewardStyle.COIN);
        else if (e.isChampionQualificationPoints)
            i.push(GameRewardStyle.CHAMPION_POINTS);
        else if (e.isXP)
            i.push(GameRewardStyle.XP);
        else if (e.item)
            if (e.item.isCoinBoost())
                i.push(GameRewardStyle.COIN_BOOST);
            else {
                var n = this.generateItemView(e.item, !0);
                o.push(n.getRootElement()),
                this.playerItems.push(n)
            }
        else if (e.isPack) {
            var r = this.generatePackGraphicView(e);
            o.push(r.getRootElement()),
            this.packs.push(r)
        } else
            e.isChampionStageEntry && i.push(GameRewardStyle.CHAMPION_STAGE_ENTRY);
        if (e && !t) {
            var s = ""
              , a = document.createElement("p");
            DOMKit.addClass(a, "objective-reward-label");
            var l = [RewardType.CHAMPION_QUALIFICATION_POINTS, RewardType.XP, RewardType.COIN]
              , c = UTLocalizationUtil.buildRewardString(e, services.Localization);
            0 <= l.indexOf(e.type) && (s = services.Localization.localizeNumber(e.value)),
            a.textContent = s + " " + c,
            a.textContent.length && o.push(a)
        }
        return 0 === o.length && o.push(document.createElement("div")),
        {
            elems: o,
            containerClass: i.join(" ")
        }
    }
    ,
    UTGameModesRewardsCarouselView.prototype.generateTNSPropertiesDTO = function() {
        var e = new TNSPropertiesDTO;
        return e.nav = this.showDots,
        e.touch = isPhone(),
        e.mouseDrag = isPhone(),
        e.startIndex = this.defaultIndex,
        e.speed = 600,
        e.prevButton = this.__tapAreaLeft,
        e.nextButton = this.__tapAreaRight,
        e.items = this.visibleItems,
        e.container = this._tnsCarousel.getRootElement(),
        e
    }
    ,
    UTGameModesRewardsCarouselView
}(UTRewardsCarouselView));
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
!function(e) {
    e[e.NONE = 0] = "NONE",
    e[e.IN_PROGRESS = 1] = "IN_PROGRESS",
    e[e.REDEEM_REWARDS = 2] = "REDEEM_REWARDS",
    e[e.COMPLETE = 3] = "COMPLETE",
    e[e.SURPASSED = 4] = "SURPASSED",
    e[e.OBTAINED = 5] = "OBTAINED",
    e[e.LOCKED = 6] = "LOCKED"
}(TierViewState = TierViewState || {});
var UTTierView = function(e) {
    function UTTierView() {
        return e.call(this) || this
    }
    return __extends(UTTierView, e),
    UTTierView.prototype.init = function() {
        e.prototype.init.call(this),
        this.__overlayText.textContent = services.Localization.localize("common.event.complete"),
        this.setInteractionState(!0)
    }
    ,
    UTTierView.prototype.dealloc = function() {
        this._rewardsCarousel && this.resetRewardsCarousel(),
        e.prototype.dealloc.call(this)
    }
    ,
    UTTierView.prototype.setId = function(e) {
        this.id = e
    }
    ,
    UTTierView.prototype.setStyle = function(e) {
        this.removeClass("horizontal vertical"),
        this.addClass(e)
    }
    ,
    UTTierView.prototype.setTierLevelRewardOptions = function(e) {}
    ,
    UTTierView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTierView.prototype.setState = function(e) {
        if (e === TierViewState.NONE)
            this.removeClass("in-progress redeem complete obtained");
        else {
            var t = e === TierViewState.REDEEM_REWARDS;
            services.Localization;
            this.toggleClass("in-progress", e === TierViewState.IN_PROGRESS),
            this.toggleClass("redeem", t),
            this.toggleClass("complete", e === TierViewState.COMPLETE),
            this.toggleClass("obtained", e === TierViewState.OBTAINED)
        }
    }
    ,
    UTTierView.prototype.resetRewardsCarousel = function() {
        this._rewardsCarousel.reset()
    }
    ,
    UTTierView.prototype.toggleRewardsInfoButton = function(e) {
        this._rewardsInfoBtn.setDisplay(e),
        this._rewardsInfoBtn.setInteractionState(e)
    }
    ,
    UTTierView.prototype.onButtonSelected = function(e, t, i) {}
    ,
    UTTierView
}(EATargetActionView);
UTTierView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tier-view"),
        this.__overlay = document.createElement("div"),
        this.__overlay.classList.add("ut-tier-view--overlay"),
        this.__overlayText = document.createElement("span"),
        this.__overlay.appendChild(this.__overlayText),
        e.appendChild(this.__overlay);
        var t = document.createElement("section");
        t.classList.add("ut-tier-view--meta"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tier-view--title"),
        t.appendChild(this.__title),
        this.__label = document.createElement("div"),
        this.__label.classList.add("ut-tier-view--label"),
        t.appendChild(this.__label),
        this._claimBtn = new UTStandardButtonControl,
        this._claimBtn.getRootElement().classList.add("call-to-action"),
        this._claimBtn.getRootElement().classList.add("mini"),
        this._claimBtn.getRootElement().classList.add("ut-tier-view--button"),
        t.appendChild(this._claimBtn.getRootElement()),
        e.appendChild(t),
        this._rewardsCarousel = new UTGameModesRewardsCarouselView,
        this._rewardsCarousel.getRootElement().classList.add("carousel"),
        e.appendChild(this._rewardsCarousel.getRootElement()),
        this.__choiceNumContainer = document.createElement("div"),
        this.__choiceNumContainer.classList.add("ut-tier-view--choices"),
        this.__choiceNum = document.createElement("span"),
        this.__choiceNumContainer.appendChild(this.__choiceNum),
        e.appendChild(this.__choiceNumContainer),
        this._rewardsInfoBtn = new UTImageButtonControl,
        this._rewardsInfoBtn.getRootElement().classList.add("ut-tier-view--button--info"),
        this._rewardsInfoBtn.getRootElement().classList.add("info-btn"),
        e.appendChild(this._rewardsInfoBtn.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTierView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__overlay = null,
    this.__overlayText = null,
    this.__title = null,
    this.__label = null,
    this._claimBtn.destroy(),
    this._rewardsCarousel.destroy(),
    this.__choiceNumContainer = null,
    this.__choiceNum = null,
    this._rewardsInfoBtn.destroy()
}
,
UTTierView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCRewardsCarouselView = function(e) {
    function FCRewardsCarouselView() {
        return e.call(this) || this
    }
    return __extends(FCRewardsCarouselView, e),
    FCRewardsCarouselView.prototype.hasDotsNavigation = function() {
        return this.showDots
    }
    ,
    FCRewardsCarouselView.prototype.setDefaultIndex = function(e) {
        this.defaultIndex = e
    }
    ,
    FCRewardsCarouselView.prototype.setupMetaRewards = function(e, t, i) {
        var o = this;
        void 0 === t && (t = 0),
        void 0 === i && (i = !0),
        0 < t && this.setDefaultIndex(t),
        this.preSetup(e.length),
        e.map(function(e) {
            return o._tnsCarousel.appendElem(e.getRootElement())
        }),
        i && this.renderCarousel()
    }
    ,
    FCRewardsCarouselView.prototype.renderCarousel = function() {
        0 < this.rewardsCount && (this.showDots = 1 === this.visibleItems,
        this.instantiateCarousel())
    }
    ,
    FCRewardsCarouselView
}(BaseRewardsCarouselView);
FCRewardsCarouselView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("section");
        e.classList.add("fc-rewards-carousel-view"),
        this.__tapAreaLeft = document.createElement("a"),
        this.__tapAreaLeft.classList.add("btn-flat"),
        this.__tapAreaLeft.classList.add("tapLeft"),
        e.appendChild(this.__tapAreaLeft),
        this._tnsCarousel = new TNSContainerView,
        this._tnsCarousel.getRootElement().classList.add("fc-rewards-carousel-view--slider"),
        e.appendChild(this._tnsCarousel.getRootElement()),
        this.__tapAreaRight = document.createElement("a"),
        this.__tapAreaRight.classList.add("btn-flat"),
        this.__tapAreaRight.classList.add("tapRight"),
        e.appendChild(this.__tapAreaRight),
        this.__root = e,
        this._generated = !0
    }
}
,
FCRewardsCarouselView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tapAreaLeft = null,
    this._tnsCarousel.destroy(),
    this.__tapAreaRight = null
}
,
FCRewardsCarouselView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCCampaignTierView = function(t) {
    function FCCampaignTierView() {
        var e = t.call(this) || this;
        return e.fcRewardViews = [],
        e.levelRewards = [],
        e.levelRewardType = FCRewardGrantType.BUNDLE,
        e
    }
    return __extends(FCCampaignTierView, t),
    FCCampaignTierView.prototype.dealloc = function() {
        this.fcRewardViews.forEach(function(e) {
            return e.dealloc()
        }),
        t.prototype.dealloc.call(this)
    }
    ,
    FCCampaignTierView.prototype.init = function() {
        t.prototype.init.call(this),
        this._rewardsInfoBtn.init(),
        this._rewardsInfoBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._rewardsInfoBtn.setInteractionState(!1),
        this._actionBtn.init(),
        this._actionBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._actionBtn.setInteractionState(!1),
        this.setInteractionState(!0)
    }
    ,
    FCCampaignTierView.prototype.setState = function(e) {
        if (e === TierViewState.NONE)
            this.removeClass("in-progress redeem complete locked");
        else {
            this.toggleClass("in-progress", e === TierViewState.IN_PROGRESS),
            this.toggleClass("redeem", e === TierViewState.REDEEM_REWARDS),
            this.toggleClass("complete", e === TierViewState.COMPLETE),
            this.toggleClass("locked", e === TierViewState.LOCKED);
            var t = e === TierViewState.REDEEM_REWARDS || e === TierViewState.LOCKED;
            this._actionBtn.setInteractionState(t)
        }
    }
    ,
    FCCampaignTierView.prototype.setBtnText = function(e) {
        this._actionBtn.setText(e)
    }
    ,
    FCCampaignTierView.prototype.toggleActionButtonDisplay = function(e) {
        this._actionBtn.setVisibility(e)
    }
    ,
    FCCampaignTierView.prototype.setTierRewardFlow = function(e) {
        this.levelRewardType = e
    }
    ,
    FCCampaignTierView.prototype.setTierLevelRewardOptions = function(e) {
        this.levelRewards = e
    }
    ,
    FCCampaignTierView.prototype.generateFCRewardBundleView = function() {
        var e = new FCRewardView;
        return e.init(),
        e.renderBundle(),
        e
    }
    ,
    FCCampaignTierView.prototype.generateFCRewardView = function(e, t, i) {
        void 0 === t && (t = !1),
        void 0 === i && (i = !1);
        var o = new FCRewardView;
        return o.render(e, t, i),
        o
    }
    ,
    FCCampaignTierView.prototype.setupRewardsCarousel = function() {
        var i = this;
        0 !== this.levelRewards.length ? (1 < this.levelRewards.length && this._rewardsCarousel.setAfterChangeFunction(this.onCarouselSlideChange.bind(this)),
        this.levelRewards.forEach(function(e) {
            if (i.levelRewardType === FCRewardGrantType.BUNDLE && 1 < e.rewards.length) {
                var t = e.isDisplayAward ? i.generateFCRewardView(e.rewards.reduce(function(e, t) {
                    return t.priority < e.priority ? t : e
                }), !0, !0) : i.generateFCRewardBundleView();
                t.setLabel(services.Localization.localize("meta.reward.bundle")),
                i.fcRewardViews.push(t)
            } else
                e.rewards.forEach(function(e) {
                    var t = i.generateFCRewardView(e);
                    i.fcRewardViews.push(t)
                })
        }),
        this._rewardsCarousel.setupMetaRewards(this.fcRewardViews)) : DebugUtils.Assert(!1, "Tried to setup rewards for a level that has no reward data.")
    }
    ,
    FCCampaignTierView.prototype.onCarouselSlideChange = function() {
        this.__choiceNum.textContent = services.Localization.localize("scmp.campaign.reward.optionNumber", [(this._rewardsCarousel.getCurrentSlide() + 1).toString()])
    }
    ,
    FCCampaignTierView.prototype.onButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && (e === this._rewardsInfoBtn && this._triggerActions(FCCampaignTierView.Event.REWARDS_INFO),
        e === this._actionBtn && this._triggerActions(FCCampaignTierView.Event.ACTION_BUTTON))
    }
    ,
    FCCampaignTierView.prototype.setProgress = function(e) {
        var t = services.Localization;
        this.__label.textContent = 0 < e ? t.localize("scmp.campaign.xpNeeded", [t.localizeNumber(e)]) : ""
    }
    ,
    FCCampaignTierView.prototype.setPremiumLabel = function() {
        var e = services.Localization;
        this.__label.textContent = e.localize("meta.premium")
    }
    ,
    FCCampaignTierView.Event = {
        ACTION_BUTTON: "FCCampaignTierView.Event.ACTION_BUTTON",
        REWARDS_INFO: "FCCampaignTierView.Event.REWARDS_INFO"
    },
    FCCampaignTierView
}(UTTierView);
FCCampaignTierView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-campaign-tier-view"),
        this.__overlay = document.createElement("div"),
        this.__overlay.classList.add("fc-campaign-tier-view--overlay"),
        this.__overlayText = document.createElement("span"),
        this.__overlay.appendChild(this.__overlayText),
        e.appendChild(this.__overlay);
        var t = document.createElement("div");
        t.classList.add("fc-campaign-tier-view--header"),
        this.__stateIcon = document.createElement("div"),
        this.__stateIcon.classList.add("fc-campaign-tier-view--state-icon"),
        t.appendChild(this.__stateIcon),
        this._rewardsInfoBtn = new UTImageButtonControl,
        this._rewardsInfoBtn.getRootElement().classList.add("fc-campaign-tier-view--button-info"),
        this._rewardsInfoBtn.getRootElement().classList.add("info-btn"),
        t.appendChild(this._rewardsInfoBtn.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("section");
        i.classList.add("fc-campaign-tier-view--meta"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("fc-campaign-tier-view--title"),
        i.appendChild(this.__title),
        this.__label = document.createElement("div"),
        this.__label.classList.add("fc-campaign-tier-view--label"),
        i.appendChild(this.__label),
        e.appendChild(i),
        this._rewardsCarousel = new FCRewardsCarouselView,
        this._rewardsCarousel.getRootElement().classList.add("carousel"),
        e.appendChild(this._rewardsCarousel.getRootElement()),
        this.__choiceNumContainer = document.createElement("div"),
        this.__choiceNumContainer.classList.add("fc-campaign-tier-view--choices"),
        this.__choiceNum = document.createElement("span"),
        this.__choiceNumContainer.appendChild(this.__choiceNum),
        e.appendChild(this.__choiceNumContainer);
        var o = document.createElement("footer");
        o.classList.add("fc-campaign-tier-view--footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        this._actionBtn.getRootElement().classList.add("mini"),
        this._actionBtn.getRootElement().classList.add("fc-campaign-tier-view--button"),
        o.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
FCCampaignTierView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__overlay = null,
    this.__overlayText = null,
    this.__stateIcon = null,
    this._rewardsInfoBtn.destroy(),
    this.__title = null,
    this.__label = null,
    this._rewardsCarousel.destroy(),
    this.__choiceNumContainer = null,
    this.__choiceNum = null,
    this._actionBtn.destroy()
}
,
FCCampaignTierView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
var TierProgressBarDirection;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
!function(e) {
    e[e.HORIZONTAL = 0] = "HORIZONTAL",
    e[e.VERTICAL = 1] = "VERTICAL"
}(TierProgressBarDirection = TierProgressBarDirection || {});
var UTTierProgressBarView = function(t) {
    function UTTierProgressBarView() {
        var e = t.call(this) || this;
        return e.direction = TierProgressBarDirection.HORIZONTAL,
        e
    }
    return __extends(UTTierProgressBarView, t),
    UTTierProgressBarView.prototype.setProgress = function(e) {
        (e = Math.max(Math.min(e, 100), 0)) !== this.progress && (this.progress = e,
        this.direction === TierProgressBarDirection.VERTICAL ? this.__fill.style.height = this.progress + "%" : this.__fill.style.width = this.progress + "%")
    }
    ,
    UTTierProgressBarView.prototype.setProgressMarker = function(e) {
        this.__progressLabel.textContent = JSUtils.isNumber(e) ? e.toString() : e
    }
    ,
    UTTierProgressBarView.prototype.addProgressMarkerClass = function(e) {
        this.__fill.className = this.__fill.className + " " + e
    }
    ,
    UTTierProgressBarView.prototype.setTierState = function(e) {
        this.removeClass("inprogress complete redeem"),
        "" !== e && this.addClass(e)
    }
    ,
    UTTierProgressBarView
}(UTProgressBarView);
UTTierProgressBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tier-progress-bar--section"),
        this.__fill = document.createElement("div"),
        this.__fill.classList.add("ut-tier-progress-bar--fill"),
        this.__progressLabel = document.createElement("span"),
        this.__fill.appendChild(this.__progressLabel),
        e.appendChild(this.__fill);
        var t = document.createElement("div");
        t.classList.add("ut-tier-progress-bar--label"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTierProgressBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__fill = null,
    this.__progressLabel = null,
    this.__label = null
}
,
UTTierProgressBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCMetaTierProgressBarView = function(e) {
    function FCMetaTierProgressBarView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(FCMetaTierProgressBarView, e),
    FCMetaTierProgressBarView
}(UTTierProgressBarView);
FCMetaTierProgressBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tier-progress-bar--section"),
        e.classList.add("fc-meta-tier-progress-bar-view"),
        this.__fill = document.createElement("div"),
        this.__fill.classList.add("ut-tier-progress-bar--fill"),
        this.__progressLabel = document.createElement("span"),
        this.__fill.appendChild(this.__progressLabel),
        e.appendChild(this.__fill);
        var t = document.createElement("div");
        t.classList.add("ut-tier-progress-bar--label"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
FCMetaTierProgressBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__fill = null,
    this.__progressLabel = null,
    this.__label = null
}
,
FCMetaTierProgressBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCObjectiveSeasonView = function(t) {
    function FCObjectiveSeasonView() {
        var e = t.call(this) || this;
        return e.activeProgressBar = null,
        e.levels = [],
        e.progressBars = [],
        e
    }
    return __extends(FCObjectiveSeasonView, t),
    FCObjectiveSeasonView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this._actionBtn.init(),
        this._actionBtn.addTarget(this, this.onClaimAllSelected, EventType.TAP)
    }
    ,
    FCObjectiveSeasonView.prototype.dealloc = function() {
        this.clearViews(),
        t.prototype.dealloc.call(this)
    }
    ,
    FCObjectiveSeasonView.prototype.clearViews = function() {
        this.levels.forEach(function(e) {
            return e.dealloc()
        }),
        this.progressBars.forEach(function(e) {
            return e.dealloc()
        }),
        this.levels = [],
        this.progressBars = [],
        this.activeProgressBar = null
    }
    ,
    FCObjectiveSeasonView.prototype.scrollToActiveCampaignTier = function() {
        this.activeProgressBar && (isPhone() ? this.getRootElement().scrollTop = this.activeProgressBar.getRootElement().offsetTop + this.__campaignHeader.clientHeight - 32 : this.__objectivesDetailsContainer.scrollLeft = this.activeProgressBar.getRootElement().offsetLeft)
    }
    ,
    FCObjectiveSeasonView.prototype.updateCampaignTimeRemaining = function(e) {
        this.__campaignTimeRemaining.textContent = services.Localization.localize("scmp.campaign.countdown", [services.Localization.localizeTimeRemaining(e)])
    }
    ,
    FCObjectiveSeasonView.prototype.generateCampaignTierProgress = function(e, t, i) {
        var o = new FCMetaTierProgressBarView;
        if (o.init(),
        o.setProgressLabel(e.id.toString()),
        o.direction = isPhone() ? TierProgressBarDirection.VERTICAL : TierProgressBarDirection.HORIZONTAL,
        t <= i) {
            var n = i < e.xp ? (i - t) / (e.xp - t) * 100 : 100;
            o.setProgress(n),
            o.setProgressMarker(i),
            o.setTierState(100 <= n ? "complete" : "inprogress")
        }
        return this.addSubview(o, this.__progressView),
        !this.activeProgressBar && (e.isClaimable(i) || t <= i && i < e.xp) && (this.activeProgressBar = o),
        o
    }
    ,
    FCObjectiveSeasonView.prototype.generateBaseTile = function(e, t, i, o) {
        var n = this
          , r = new FCCampaignTierView;
        r.init(),
        r.setId(e.id),
        r.setStyle(isPhone() ? "vertical" : "horizontal"),
        r.setTitle(e.title);
        var s = e.getClaimedReward();
        e.isClaimed() && s ? (r.setTierRewardFlow(FCRewardGrantType.SINGLE),
        r.setTierLevelRewardOptions([s])) : (r.setTierRewardFlow(e.rewardSetFlow),
        r.setTierLevelRewardOptions(e.getSortedRewards())),
        o && r.addClass("is-current-level");
        var a = t < e.xp && !i && (e.rewardSetFlow === FCRewardGrantType.BUNDLE && 1 < e.rewardSets[0].rewards.length || e.rewardSetFlow === FCRewardGrantType.CHOICE);
        return r.toggleRewardsInfoButton(a),
        a && r.addTarget(this, function() {
            return n.onRewardInfoSelected(r, FCCampaignTierView.Event.REWARDS_INFO, {
                level: e
            })
        }, FCCampaignTierView.Event.REWARDS_INFO),
        r
    }
    ,
    FCObjectiveSeasonView.prototype.generateFreemiumCampaignTierTile = function(e, t, i, o) {
        var n = this
          , r = e.isClaimable(i)
          , s = this.generateBaseTile(e, i, r, o)
          , a = TierViewState.NONE;
        t <= i && i < e.xp ? a = TierViewState.IN_PROGRESS : i >= e.xp && (a = r ? TierViewState.REDEEM_REWARDS : TierViewState.COMPLETE);
        var l = a === TierViewState.COMPLETE;
        s.setProgress(Math.max(e.xp - i, 0)),
        s.setState(a),
        s.toggleActionButtonDisplay(r || l);
        var c = services.Localization;
        if (a === TierViewState.REDEEM_REWARDS) {
            var u = "";
            e.rewardSetFlow === FCRewardGrantType.SINGLE || e.rewardSetFlow === FCRewardGrantType.BUNDLE && 1 === e.rewardSets[0].rewards.length ? u = c.localize("meta.campaign.claim-single") : e.rewardSetFlow === FCRewardGrantType.BUNDLE ? u = c.localize("meta.campaign.claim-bundle") : e.rewardSetFlow === FCRewardGrantType.CHOICE && (u = c.localize("meta.campaign.claim-option")),
            s.setBtnText(u)
        } else
            a === TierViewState.COMPLETE && s.setBtnText(c.localize("meta.campaign.complete"));
        return r && s.addTarget(this, function() {
            return n.onClaimSelected(s, FCCampaignTierView.Event.ACTION_BUTTON, {
                level: e
            })
        }, FCCampaignTierView.Event.ACTION_BUTTON),
        this.addSubview(s, this.__tierView),
        s
    }
    ,
    FCObjectiveSeasonView.prototype.generatePremiumCampaignTierTile = function(e, t, i, o, n) {
        var r = this
          , s = e.isClaimable(i) && o
          , a = t <= i && i < e.xp
          , l = t <= i
          , c = !o && l
          , u = this.generateBaseTile(e, i, s, n);
        u.addClass("premium"),
        u.setPremiumLabel();
        var d = TierViewState.NONE;
        o ? a ? d = TierViewState.IN_PROGRESS : l && (d = s ? TierViewState.REDEEM_REWARDS : TierViewState.COMPLETE) : d = TierViewState.LOCKED;
        var h = d === TierViewState.COMPLETE;
        u.setState(d),
        u.toggleActionButtonDisplay(c || s || h);
        var p = services.Localization;
        if (d === TierViewState.REDEEM_REWARDS) {
            var _ = "";
            e.rewardSetFlow === FCRewardGrantType.SINGLE || e.rewardSetFlow === FCRewardGrantType.BUNDLE && 1 === e.rewardSets[0].rewards.length ? _ = p.localize("meta.campaign.claim-single") : e.rewardSetFlow === FCRewardGrantType.BUNDLE && (_ = p.localize("meta.campaign.claim-bundle")),
            e.rewardSetFlow === FCRewardGrantType.CHOICE && (_ = p.localize("meta.campaign.claim-option")),
            u.setBtnText(_)
        } else
            d == TierViewState.LOCKED ? u.setBtnText(p.localize("meta.campaign.upgrade")) : d === TierViewState.COMPLETE && u.setBtnText(p.localize("meta.campaign.complete"));
        return s ? u.addTarget(this, function() {
            return r.onClaimSelected(u, FCCampaignTierView.Event.ACTION_BUTTON, {
                level: e
            })
        }, FCCampaignTierView.Event.ACTION_BUTTON) : o || u.addTarget(this, function() {
            return r.onUpgradeSelected(u, FCCampaignTierView.Event.ACTION_BUTTON, {
                level: e
            })
        }, FCCampaignTierView.Event.ACTION_BUTTON),
        this.addSubview(u, this.__tierView),
        u
    }
    ,
    FCObjectiveSeasonView.prototype.setCampaign = function(n) {
        var r = this;
        this.clearViews(),
        DOMKit.toggleDisplayStyle(this.__footer, !1),
        DOMKit.removeClass(this.__progressView, "horizontal vertical"),
        DOMKit.addClass(this.__progressView, isPhone() ? "vertical" : "horizontal"),
        this.__campaignTitle.textContent = n.title,
        this.__campaignDescription.textContent = n.subtitle,
        this.updateCampaignTimeRemaining(n.getTimeRemaining());
        var s = 0;
        this.toggleClass("hasPremium", n.hasPremiumLevels()),
        n.getLevels().forEach(function(e, t) {
            var i = 0 === t ? 0 : s + 1;
            s = e.xp,
            r.progressBars.push(r.generateCampaignTierProgress(e, i, n.xp)),
            r.levels.push(r.generateFreemiumCampaignTierTile(e, i, n.xp, n.currentLevel === e.id));
            var o = n.getPremiumLevelById(e.id);
            o && r.levels.push(r.generatePremiumCampaignTierTile(o, i, n.xp, n.hasPremium, n.currentLevel === e.id))
        }, this),
        this.layoutSubviews(),
        1 < n.getClaimableTierCount() && (DOMKit.toggleDisplayStyle(this.__footer, !0),
        this._actionBtn.setText(services.Localization.localize("meta.campaign.claim-all.entry")),
        this._actionBtn.setInteractionState(!0)),
        this.levels.forEach(function(e, t) {
            e.setupRewardsCarousel()
        }, this),
        this.scrollToActiveCampaignTier()
    }
    ,
    FCObjectiveSeasonView.prototype.onRewardInfoSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(FCObjectiveSeasonView.Event.REWARD_INFO, i)
    }
    ,
    FCObjectiveSeasonView.prototype.onClaimSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(FCObjectiveSeasonView.Event.CLAIM_REWARD, i)
    }
    ,
    FCObjectiveSeasonView.prototype.onUpgradeSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(FCObjectiveSeasonView.Event.UPGRADE, i)
    }
    ,
    FCObjectiveSeasonView.prototype.onClaimAllSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(FCObjectiveSeasonView.Event.CLAIM_ALL, i)
    }
    ,
    FCObjectiveSeasonView.Event = {
        UPGRADE: "FCObjectiveSeasonView.UPGRADE",
        CLAIM_REWARD: "FCObjectiveSeasonView.CLAIM_REWARD",
        REWARD_INFO: "FCObjectiveSeasonView.REWARD_INFO",
        CLAIM_ALL: "FCObjectiveSeasonView.CLAIM_ALL"
    },
    FCObjectiveSeasonView
}(EATargetActionView);
FCObjectiveSeasonView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-objective-season-view"),
        this.__campaignHeader = document.createElement("div"),
        this.__campaignHeader.classList.add("fc-objective-season-view--header");
        var t = document.createElement("div");
        t.classList.add("fc-objective-season-view--header-content");
        var i = document.createElement("div");
        i.classList.add("fc-objective-season-view--header-info"),
        this.__campaignTitle = document.createElement("h1"),
        this.__campaignTitle.classList.add("fc-objective-season-view--title"),
        i.appendChild(this.__campaignTitle),
        this.__campaignTimeRemaining = document.createElement("span"),
        this.__campaignTimeRemaining.classList.add("fc-objective-season-view--countdown"),
        i.appendChild(this.__campaignTimeRemaining),
        t.appendChild(i),
        this.__campaignDescription = document.createElement("p"),
        this.__campaignDescription.classList.add("fc-objective-season-view--description"),
        t.appendChild(this.__campaignDescription),
        this.__campaignHeader.appendChild(t),
        e.appendChild(this.__campaignHeader),
        this.__objectivesDetailsContainer = document.createElement("div"),
        this.__objectivesDetailsContainer.classList.add("fc-objective-season-view--details");
        var o = document.createElement("div");
        o.classList.add("fc-objective-season-view--campaign"),
        this.__progressView = document.createElement("div"),
        this.__progressView.classList.add("fc-meta-tier-progress-bar-view"),
        this.__progressView.classList.add("ut-tier-progress-bar"),
        o.appendChild(this.__progressView),
        this.__tierView = document.createElement("div"),
        this.__tierView.classList.add("fc-objective-season-view--tiers"),
        o.appendChild(this.__tierView),
        this.__objectivesDetailsContainer.appendChild(o),
        e.appendChild(this.__objectivesDetailsContainer),
        this.__footer = document.createElement("div"),
        this.__footer.classList.add("fc-objective-season-view--footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("mini"),
        this._actionBtn.getRootElement().classList.add("special-action"),
        this._actionBtn.getRootElement().classList.add("fc-objective-season-view--button"),
        this.__footer.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(this.__footer),
        this.__root = e,
        this._generated = !0
    }
}
,
FCObjectiveSeasonView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__campaignHeader = null,
    this.__campaignTitle = null,
    this.__campaignTimeRemaining = null,
    this.__campaignDescription = null,
    this.__objectivesDetailsContainer = null,
    this.__progressView = null,
    this.__tierView = null,
    this.__footer = null,
    this._actionBtn.destroy()
}
,
FCObjectiveSeasonView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCRewardOptionView = function(i) {
    function FCRewardOptionView(e) {
        var t = i.call(this) || this;
        return t.index = e,
        t.mainReward = null,
        t.rewards = [],
        t
    }
    return __extends(FCRewardOptionView, i),
    FCRewardOptionView.prototype.init = function() {
        this.setInteractionState(!0)
    }
    ,
    FCRewardOptionView.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.reset()
    }
    ,
    FCRewardOptionView.prototype.reset = function() {
        this.id = 0,
        this.rewards.forEach(function(e) {
            return e.dealloc()
        }),
        this.rewards = [],
        this.mainReward && (this.mainReward.dealloc(),
        this.mainReward = null)
    }
    ,
    FCRewardOptionView.prototype.setRewards = function(e) {
        this.id = e.id;
        var t = e.rewards.slice().sort(function(e, t) {
            return JSUtils.sortCompare(e.isChampionQualificationPoints, t.isChampionQualificationPoints)
        });
        this.setMainReward(t[0]),
        this.attachRewards(t),
        this.layoutSubviews()
    }
    ,
    FCRewardOptionView.prototype.setMainDescription = function(e) {
        this.__mainDescription.textContent = e
    }
    ,
    FCRewardOptionView.prototype.toggleRewardSelection = function(e) {
        this.toggleClass(enums.UIState.SELECTED, e)
    }
    ,
    FCRewardOptionView.prototype.attachRewards = function(e) {
        var o = this;
        e.forEach(function(e, t) {
            if (0 < t) {
                var i = new FCRewardIconView;
                i.init(),
                i.render(e, !0),
                o.rewards.push(i),
                o.addSubview(i, o.__rewardsList)
            }
        })
    }
    ,
    FCRewardOptionView.prototype.setMainReward = function(e) {
        this.mainReward = new FCRewardView,
        this.mainReward.render(e),
        this.mainReward.setLabel(services.Localization.localize("rivals.rewardset.title", [this.index.toString()])),
        this.addSubview(this.mainReward, this.__mainReward)
    }
    ,
    FCRewardOptionView.prototype._tapDetected = function(e) {
        i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP, {
            id: this.id
        })
    }
    ,
    FCRewardOptionView
}(EATargetActionView);
FCRewardOptionView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-reward-option-view"),
        this.__mainReward = document.createElement("div"),
        this.__mainReward.classList.add("fc-reward-option-view--main-reward"),
        e.appendChild(this.__mainReward);
        var t = document.createElement("div");
        t.classList.add("fc-reward-option-view--additional-rewards"),
        this.__rewardsList = document.createElement("ul"),
        this.__rewardsList.classList.add("rewards-list"),
        t.appendChild(this.__rewardsList),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
FCRewardOptionView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__mainReward = null,
    this.__rewardsList = null
}
,
FCRewardOptionView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCRewardSelectionChoiceView = function(i) {
    function FCRewardSelectionChoiceView(e) {
        var o = i.call(this) || this;
        return o.rewardOptions = new EAHashTable,
        e.forEach(function(e, t) {
            var i = new FCRewardOptionView(t + 1);
            i.setRewards(e),
            o.rewardOptions.set(e.id, i)
        }),
        o
    }
    return __extends(FCRewardSelectionChoiceView, i),
    FCRewardSelectionChoiceView.prototype.init = function() {
        var t = this;
        i.prototype.init.call(this),
        this.rewardOptions.forEach(function(e) {
            e.init(),
            e.addTarget(t, t.onSelectionChanged, EventType.TAP)
        }, this),
        this.addOptions(),
        this._actionBtn.init(),
        this._actionBtn.addTarget(this, this.onButtonTapped, EventType.TAP),
        this._actionBtn.setInteractionState(!1),
        this._exitBtn.init(),
        this._exitBtn.addTarget(this, this.onButtonTapped, EventType.TAP),
        this._exitBtn.setInteractionState(!0),
        this.setInteractionState(!0),
        this.layoutSubviews()
    }
    ,
    FCRewardSelectionChoiceView.prototype.dealloc = function() {
        this.rewardOptions.forEach(function(e) {
            return e.dealloc()
        }),
        this.rewardOptions.clear(),
        i.prototype.dealloc.call(this)
    }
    ,
    FCRewardSelectionChoiceView.prototype.getActionBtn = function() {
        return this._actionBtn
    }
    ,
    FCRewardSelectionChoiceView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    FCRewardSelectionChoiceView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    FCRewardSelectionChoiceView.prototype.setButtonText = function(e) {
        this._actionBtn.setText(e)
    }
    ,
    FCRewardSelectionChoiceView.prototype.clearSelectionClasses = function() {
        this.rewardOptions.forEach(function(e) {
            return e.toggleRewardSelection(!1)
        })
    }
    ,
    FCRewardSelectionChoiceView.prototype.selectRewardSet = function(e) {
        var t = this.rewardOptions.get(e);
        t && t.toggleRewardSelection(!0)
    }
    ,
    FCRewardSelectionChoiceView.prototype.expandRewardSet = function(e, t) {}
    ,
    FCRewardSelectionChoiceView.prototype.resetRewardList = function() {
        DOMKit.empty(this.__rewardsList)
    }
    ,
    FCRewardSelectionChoiceView.prototype.clearExpandedClasses = function() {
        this.removeClass("ui-collapsable-expanded")
    }
    ,
    FCRewardSelectionChoiceView.prototype.toggleFooter = function(e) {
        DOMKit.toggleDisplayStyle(this.__footer, e)
    }
    ,
    FCRewardSelectionChoiceView.prototype.addOptions = function() {
        var t = this;
        this.rewardOptions.values().sort(function(e, t) {
            return e.index - t.index
        }).forEach(function(e) {
            return t.addSubview(e, t.__rewardTiles)
        })
    }
    ,
    FCRewardSelectionChoiceView.prototype.onButtonTapped = function(e, t, i) {
        if (this.isInteractionEnabled()) {
            var o = {
                selectedId: this.selectedId
            };
            e === this._exitBtn ? this._triggerActions(FCRewardSelectionChoiceView.Event.EXIT, o) : e === this._actionBtn && (this._triggerActions(FCRewardSelectionChoiceView.Event.CONFIRM, o),
            this._actionBtn.setInteractionState(!1))
        }
    }
    ,
    FCRewardSelectionChoiceView.prototype.onSelectionChanged = function(e, t, i) {
        this.selectedId = i.id,
        this._triggerActions(FCRewardSelectionChoiceView.Event.OPTION_SELECT, i)
    }
    ,
    FCRewardSelectionChoiceView.Event = {
        EXIT: "FCRewardSelectionChoiceView.Event.EXIT",
        CONFIRM: "FCRewardSelectionChoiceView.Event.CONFIRM",
        OPTION_SELECT: "FCRewardSelectionChoiceView.Event.OPTION_SELECT"
    },
    FCRewardSelectionChoiceView
}(EATargetActionView);
FCRewardSelectionChoiceView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-reward-selection-choice-view");
        var t = document.createElement("header");
        t.classList.add("fc-reward-selection-choice-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("fc-reward-selection-choice-view--title"),
        t.appendChild(this.__title),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t),
        this.__rewardTiles = document.createElement("div"),
        this.__rewardTiles.classList.add("fc-reward-selection-choice-view--content"),
        e.appendChild(this.__rewardTiles),
        this.__footer = document.createElement("footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        this.__footer.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(this.__footer),
        this.__root = e,
        this._generated = !0
    }
}
,
FCRewardSelectionChoiceView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._exitBtn.destroy(),
    this.__rewardTiles = null,
    this.__footer = null,
    this._actionBtn.destroy()
}
,
FCRewardSelectionChoiceView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCRewardSelectionChoiceViewController = function(i) {
    function FCRewardSelectionChoiceViewController(e) {
        var t = i.call(this) || this;
        return t.claimable = !0,
        t.rewardSets = e,
        t.selectedRewardId = -1,
        t.titleText = "",
        t.descriptionText = "",
        t
    }
    return __extends(FCRewardSelectionChoiceViewController, i),
    FCRewardSelectionChoiceViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.getView().setButtonText(services.Localization.localize("common.dialog.confirm"))
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.addTarget(this, this.onExitSelected, FCRewardSelectionChoiceView.Event.EXIT),
        e.addTarget(this, this.onConfirmSelected, FCRewardSelectionChoiceView.Event.CONFIRM),
        e.addTarget(this, this.onSelectionViewChanged, FCRewardSelectionChoiceView.Event.OPTION_SELECT)
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.removeTarget(this, this.onExitSelected, FCRewardSelectionChoiceView.Event.EXIT),
        e.removeTarget(this, this.onConfirmSelected, FCRewardSelectionChoiceView.Event.CONFIRM),
        e.removeTarget(this, this.onSelectionViewChanged, FCRewardSelectionChoiceView.Event.OPTION_SELECT)
    }
    ,
    FCRewardSelectionChoiceViewController.prototype._getViewInstanceFromData = function() {
        return new FCRewardSelectionChoiceView(this.rewardSets)
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.setTitleText = function(e) {
        this.titleText = e,
        this.getView().setTitle(this.titleText)
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.setDescriptionText = function(e) {
        this.descriptionText = e,
        this.getView().setDescription(this.descriptionText)
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.setClaimableState = function(e) {
        this.claimable = e,
        this.getView().toggleFooter(e)
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.onConfirmSelected = function(e, t, i) {
        this.isViewDisplayed() && this.closePopup()
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.onExitSelected = function(e, t, i) {
        this.isViewDisplayed() && this.closePopup()
    }
    ,
    FCRewardSelectionChoiceViewController.prototype.onSelectionViewChanged = function(e, t, i) {
        var o = this;
        this.selectedRewardId = i.id,
        e.clearSelectionClasses(),
        this.claimable && e.selectRewardSet(this.selectedRewardId);
        var n = this.rewardSets.find(function(e) {
            return e.id === o.selectedRewardId
        });
        if (n) {
            var r = this.rewardSets.indexOf(n);
            e.getActionBtn().setInteractionState(this.claimable && 0 <= r)
        } else
            DebugUtils.Assert(!1, "Unable to retrieve rewardSet")
    }
    ,
    FCRewardSelectionChoiceViewController
}(BasePopupViewController)
  , FCGameRewardsView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function FCGameRewardsView() {
        var e = t.call(this) || this;
        return e.rewardViews = [],
        e
    }
    return __extends(FCGameRewardsView, t),
    FCGameRewardsView.prototype.init = function() {
        t.prototype.init.call(this),
        this._actionBtn.init(),
        this._exitBtn.init(),
        this._exitBtn.addTarget(this, this.onExitTapped, EventType.TAP)
    }
    ,
    FCGameRewardsView.prototype.dealloc = function() {
        this.rewardViews.forEach(function(e) {
            return e.dealloc()
        }),
        t.prototype.dealloc.call(this)
    }
    ,
    FCGameRewardsView.prototype.setClaimable = function(e) {
        this._actionBtn.removeTarget(this, e ? this.onExitTapped : this.onClaimTapped, EventType.TAP),
        this._actionBtn.addTarget(this, e ? this.onClaimTapped : this.onExitTapped, EventType.TAP)
    }
    ,
    FCGameRewardsView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    FCGameRewardsView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    FCGameRewardsView.prototype.setButtonText = function(e) {
        this._actionBtn.setText(e)
    }
    ,
    FCGameRewardsView.prototype.generateFCRewardView = function(e) {
        var t = new FCRewardView;
        return t.render(e),
        t
    }
    ,
    FCGameRewardsView.prototype.setupRewardsCarousel = function(e) {
        var t = this;
        0 < e.length && (this.rewardViews = e.map(function(e) {
            return t.generateFCRewardView(e)
        }),
        this._rewardsCarousel.setupMetaRewards(this.rewardViews))
    }
    ,
    FCGameRewardsView.prototype.resetRewardsCarousel = function() {
        this._rewardsCarousel.reset()
    }
    ,
    FCGameRewardsView.prototype.setRewardsDisplay = function(e) {
        this._rewardsCarousel.setDisplay(e)
    }
    ,
    FCGameRewardsView.prototype.onClaimTapped = function(e, t, i) {
        this._triggerActions(FCGameRewardsView.Event.CLAIM)
    }
    ,
    FCGameRewardsView.prototype.onExitTapped = function(e, t, i) {
        this._triggerActions(FCGameRewardsView.Event.EXIT)
    }
    ,
    FCGameRewardsView.Event = {
        CLAIM: "FCGameRewardsView.Event.CLAIM",
        EXIT: "FCGameRewardsView.Event.EXIT"
    },
    FCGameRewardsView
}(EATargetActionView));
FCGameRewardsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-game-rewards-view");
        var t = document.createElement("header");
        t.classList.add("fc-game-rewards-view--header"),
        this.__title = document.createElement("h1"),
        t.appendChild(this.__title),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("fc-game-rewards-view--content-container"),
        this.__description = document.createElement("div"),
        this.__description.classList.add("fc-game-rewards-view--description"),
        i.appendChild(this.__description);
        var o = document.createElement("section");
        o.classList.add("rewards-container"),
        this._rewardsCarousel = new FCRewardsCarouselView,
        o.appendChild(this._rewardsCarousel.getRootElement()),
        i.appendChild(o),
        e.appendChild(i);
        var n = document.createElement("footer");
        n.classList.add("fc-game-rewards-view--footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        n.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(n),
        this.__root = e,
        this._generated = !0
    }
}
,
FCGameRewardsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._exitBtn.destroy(),
    this.__description = null,
    this._rewardsCarousel.destroy(),
    this._actionBtn.destroy()
}
,
FCGameRewardsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCGameRewardsViewController = function(i) {
    function FCGameRewardsViewController(e) {
        var t = i.call(this) || this;
        return t.hasChampionsQualificationPoints = !1,
        t.hasCoinsReward = !1,
        t.hasItemReward = !1,
        t.hasPackReward = !1,
        t.rewards = e,
        t.rewardsCarouselSetup = !1,
        t
    }
    return __extends(FCGameRewardsViewController, i),
    FCGameRewardsViewController.prototype.checkRewards = function(e) {
        var i = this;
        e.forEach(function(e) {
            i.hasCoinsReward = i.hasCoinsReward || e.isCoin;
            var t = e instanceof UTRewardVO ? e.isItem : e.isUtItem;
            i.hasItemReward = i.hasItemReward || t,
            i.hasPackReward = i.hasPackReward || e.isPack,
            i.hasChampionsQualificationPoints = i.hasChampionsQualificationPoints || e.isChampionQualificationPoints,
            i.hasXpReward = i.hasXpReward || e.isXP
        })
    }
    ,
    FCGameRewardsViewController.prototype.dealloc = function() {
        this.rewards = [],
        i.prototype.dealloc.call(this)
    }
    ,
    FCGameRewardsViewController.prototype._getViewInstanceFromData = function() {
        return new FCGameRewardsView
    }
    ,
    FCGameRewardsViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.addTarget(this, this.onButtonTapped, FCGameRewardsView.Event.CLAIM),
        e.addTarget(this, this.onButtonTapped, FCGameRewardsView.Event.EXIT),
        !this.rewardsCarouselSetup && 0 < this.rewards.length ? (e.setupRewardsCarousel(this.rewards),
        this.checkRewards(this.rewards),
        this.rewardsCarouselSetup = !0) : e.setRewardsDisplay(!1)
    }
    ,
    FCGameRewardsViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.removeTarget(this, this.onButtonTapped, FCGameRewardsView.Event.CLAIM),
        e.removeTarget(this, this.onButtonTapped, FCGameRewardsView.Event.EXIT)
    }
    ,
    FCGameRewardsViewController.prototype.onButtonTapped = function(e, t, i) {
        if (this.closePopup(),
        t === FCGameRewardsView.Event.CLAIM) {
            if (this.hasItemReward) {
                services.Notification.queue([services.Localization.localize("notification.item.added"), UINotificationType.POSITIVE]),
                repositories.Item.setDirty(ItemPile.PURCHASED);
                var o = this.rewards.reduce(function(e, t) {
                    var i = t instanceof UTRewardVO ? t.item : t.utItem;
                    return i && e.push(i),
                    e
                }, []);
                getDefaultDispatcher().notify(AppNotification.UNASSIGNED_ITEM_ADDED, this, {
                    items: o
                })
            }
            if (this.hasPackReward) {
                services.Notification.queue([services.Localization.localize("notification.pack.added"), UINotificationType.POSITIVE]);
                var n = services.User.getUser();
                n && n.incrementNumUnopenedPacks()
            }
            this.hasCoinsReward && (services.Notification.queue([services.Localization.localize("notification.coins.added"), UINotificationType.POSITIVE]),
            services.User.requestCurrencies()),
            this.hasChampionsQualificationPoints && services.Notification.queue([services.Localization.localize("notification.championsPoints.added"), UINotificationType.POSITIVE]),
            this.hasXpReward && (services.Notification.queue([services.Localization.localize("notification.xp.added"), UINotificationType.POSITIVE]),
            services.Objectives.reset())
        }
    }
    ,
    FCGameRewardsViewController.prototype.handleKeyUpEvent = function(e) {
        e.key !== KeyboardKey.ESCAPE && e.key !== KeyboardKey.MS_ESCAPE && e.key !== KeyboardKey.ENTER || this.onExit.notify(enums.UIDialogOptions.OK)
    }
    ,
    FCGameRewardsViewController
}(BasePopupViewController)
  , UTCurrencyButtonControl = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTCurrencyButtonControl() {
        return e.call(this) || this
    }
    return __extends(UTCurrencyButtonControl, e),
    UTCurrencyButtonControl.prototype.setText = function(e) {
        this.__currencyAmount.textContent = e
    }
    ,
    UTCurrencyButtonControl.prototype.setSubText = function(e) {
        this.__currencyLabel.textContent = e
    }
    ,
    UTCurrencyButtonControl.prototype.setCurrencyType = function(e) {
        this.toggleClass("coins", e === GameCurrency.COINS),
        this.toggleClass("points", e === GameCurrency.POINTS)
    }
    ,
    UTCurrencyButtonControl
}(UTButtonControl));
UTCurrencyButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("button");
        e.classList.add("currency"),
        this.__currencyAmount = document.createElement("span"),
        this.__currencyAmount.classList.add("text"),
        e.appendChild(this.__currencyAmount),
        this.__currencyLabel = document.createElement("span"),
        this.__currencyLabel.classList.add("subtext"),
        e.appendChild(this.__currencyLabel),
        this.__root = e,
        this._generated = !0
    }
}
,
UTCurrencyButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__currencyAmount = null,
    this.__currencyLabel = null
}
,
UTCurrencyButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCPremiumPassPurchaseView = function(e) {
    function FCPremiumPassPurchaseView() {
        return e.call(this) || this
    }
    return __extends(FCPremiumPassPurchaseView, e),
    FCPremiumPassPurchaseView.prototype.init = function() {
        e.prototype.init.call(this),
        this._image.src = "images/objectives/premiumPassUpgradeRewards.png",
        this._coinsBtn.setDisplay(!1),
        this._coinsBtn.init(),
        this._coinsBtn.addTarget(this, this.onButtonTapped, EventType.TAP),
        this._pointsBtn.setDisplay(!1),
        this._pointsBtn.init(),
        this._pointsBtn.addTarget(this, this.onButtonTapped, EventType.TAP),
        this._exitBtn.init(),
        this._exitBtn.addTarget(this, this.onButtonTapped, EventType.TAP)
    }
    ,
    FCPremiumPassPurchaseView.prototype.render = function(e) {
        var t = services.Localization;
        this.__title.textContent = t.localize("meta.upgrade.title"),
        this.__description.textContent = t.localize("meta.upgrade.description");
        var i = e.get(GameCurrency.POINTS);
        i && 0 < i.amount ? (this._pointsBtn.setText(t.localizeNumber(i.amount)),
        this._pointsBtn.setCurrencyType(i.type),
        this._pointsBtn.setSubText(t.localize("currency.points")),
        this._pointsBtn.setDisplay(!0)) : this._pointsBtn.setDisplay(!1);
        var o = e.get(GameCurrency.COINS);
        o && 0 < o.amount ? (this._coinsBtn.setText(t.localizeNumber(o.amount)),
        this._coinsBtn.setCurrencyType(o.type),
        this._coinsBtn.setSubText(t.localize("currency.coins")),
        this._coinsBtn.setDisplay(!0)) : this._coinsBtn.setDisplay(!1)
    }
    ,
    FCPremiumPassPurchaseView.prototype.setPointsEnabled = function(e) {
        this._pointsBtn.setInteractionState(e)
    }
    ,
    FCPremiumPassPurchaseView.prototype.setCoinsEnabled = function(e) {
        this._coinsBtn.setInteractionState(e)
    }
    ,
    FCPremiumPassPurchaseView.prototype.onButtonTapped = function(e, t, i) {
        var o = FCPremiumPassPurchaseView.Event.EXIT;
        switch (e) {
        case this._coinsBtn:
            o = FCPremiumPassPurchaseView.Event.PURCHASE_COINS;
            break;
        case this._pointsBtn:
            o = FCPremiumPassPurchaseView.Event.PURCHASE_POINTS
        }
        this._triggerActions(o)
    }
    ,
    FCPremiumPassPurchaseView.Event = {
        PURCHASE_COINS: "FCPremiumPassPurchaseVie.Event.PURCHASE_COINS",
        PURCHASE_POINTS: "FCPremiumPassPurchaseVie.Event.PURCHASE_POINTS",
        EXIT: "FCPremiumPassPurchaseVie.Event.EXIT"
    },
    FCPremiumPassPurchaseView
}(EATargetActionView);
FCPremiumPassPurchaseView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-premium-pass-purchase-view");
        var t = document.createElement("header");
        t.classList.add("fc-premium-pass-purchase-view--header"),
        this.__title = document.createElement("h1"),
        t.appendChild(this.__title),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("fc-premium-pass-purchase-view--content-container"),
        this.__description = document.createElement("div"),
        this.__description.classList.add("fc-premium-pass-purchase-view--description"),
        i.appendChild(this.__description),
        this._image = new EAImageView,
        i.appendChild(this._image.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("footer");
        o.classList.add("fc-premium-pass-purchase-view--footer"),
        this._coinsBtn = new UTCurrencyButtonControl,
        this._coinsBtn.getRootElement().classList.add("call-to-action"),
        o.appendChild(this._coinsBtn.getRootElement()),
        this._pointsBtn = new UTCurrencyButtonControl,
        this._pointsBtn.getRootElement().classList.add("call-to-action"),
        o.appendChild(this._pointsBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
FCPremiumPassPurchaseView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._exitBtn.destroy(),
    this.__description = null,
    this._image.destroy(),
    this._coinsBtn.destroy(),
    this._pointsBtn.destroy()
}
,
FCPremiumPassPurchaseView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCPremiumPassPurchaseViewController = function(m) {
    function FCPremiumPassPurchaseViewController(e) {
        var t = m.call(this) || this;
        return t.vm = e,
        t
    }
    return __extends(FCPremiumPassPurchaseViewController, m),
    FCPremiumPassPurchaseViewController.prototype._getViewInstanceFromData = function() {
        return new FCPremiumPassPurchaseView
    }
    ,
    FCPremiumPassPurchaseViewController.prototype.viewDidAppear = function() {
        var e, t, i, o, n, r;
        m.prototype.viewDidAppear.call(this);
        var s = this.getView();
        s.addTarget(this, this.onButtonTapped, FCPremiumPassPurchaseView.Event.PURCHASE_COINS),
        s.addTarget(this, this.onButtonTapped, FCPremiumPassPurchaseView.Event.PURCHASE_POINTS),
        s.addTarget(this, this.onButtonTapped, FCPremiumPassPurchaseView.Event.EXIT),
        s.setPointsEnabled(!1);
        var a = this.vm.getCampaign();
        if (a) {
            s.render(a.premiumPrices);
            var l = services.User.getUser();
            if (!l)
                return DebugUtils.Assert(!1, "No user found"),
                void this.closePopup();
            var c = null !== (e = l.getCurrency(GameCurrency.POINTS).amount) && void 0 !== e ? e : 0
              , u = null !== (t = l.getCurrency(GameCurrency.COINS).amount) && void 0 !== t ? t : 0
              , d = null !== (o = null === (i = a.premiumPrices.get(GameCurrency.POINTS)) || void 0 === i ? void 0 : i.amount) && void 0 !== o ? o : 0
              , h = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.CURRENCY_POINTS_ENABLED) && !l.hasUnrecoveredFIFAPointsTransaction
              , p = 0 < d && d <= c && h;
            s.setPointsEnabled(p);
            var _ = null !== (r = null === (n = a.premiumPrices.get(GameCurrency.COINS)) || void 0 === n ? void 0 : n.amount) && void 0 !== r ? r : 0
              , f = 0 < _ && _ <= u && services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.CURRENCY_COINS_ENABLED);
            s.setCoinsEnabled(f)
        }
    }
    ,
    FCPremiumPassPurchaseViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.removeTarget(this, this.onButtonTapped, FCPremiumPassPurchaseView.Event.PURCHASE_COINS),
        e.removeTarget(this, this.onButtonTapped, FCPremiumPassPurchaseView.Event.PURCHASE_POINTS),
        e.removeTarget(this, this.onButtonTapped, FCPremiumPassPurchaseView.Event.EXIT)
    }
    ,
    FCPremiumPassPurchaseViewController.prototype.handlePurchase = function(e, t, i) {
        var o, n, r, s, a, l = this;
        e.unobserve(this);
        var c = services.Localization
          , u = services.Notification;
        t.success ? (getDefaultDispatcher().notify(AppNotification.OBJECTIVE_SEASON_PURCHASE, this),
        u.queue([c.localize("notification.meta.upgradeSuccess"), UINotificationType.POSITIVE]),
        services.User.requestCurrencies(),
        window.services.revenueSDK.logEvent(RevenueAnalytics.Event.PREMIUM_PASS_PURCHASED, ((o = {})[RevenueAnalytics.Key.CURRENCY] = i.type,
        o[RevenueAnalytics.Key.ID] = null !== (a = null === (s = null === (r = null === (n = t.data) || void 0 === n ? void 0 : n.campaign) || void 0 === r ? void 0 : r.id) || void 0 === s ? void 0 : s.toString()) && void 0 !== a ? a : "unknown",
        o)),
        gPopupClickShield.closeActivePopup()) : function(e) {
            if (hasConnection())
                switch (e) {
                case HttpStatusCode.FORBIDDEN:
                case HttpStatusCode.SERVICE_UNAVAILABLE_ERROR:
                case HttpStatusCode.SERVER_ERROR:
                    services.Notification.queue([c.localize("notification.meta.upgradeFailed"), UINotificationType.NEGATIVE]),
                    l.vm.resetFcasContent(),
                    getAppMain().getRootViewController().setGameViewTab(UTGameTabBarController.TabTag.HOME);
                    break;
                case HttpStatusCode.UNAUTHORIZED:
                    NetworkErrorManager.handleStatus(e);
                    break;
                default:
                    services.Notification.queue([c.localize("notification.meta.upgradeFailed"), UINotificationType.NEGATIVE]),
                    function() {
                        var e = l.getNavigationController();
                        e && e.popViewController()
                    }()
                }
            else
                utils.PopupManager.showAlert(utils.PopupManager.Alerts.NO_INTERNET_CONNECTION)
        }(t.status)
    }
    ,
    FCPremiumPassPurchaseViewController.prototype.onButtonTapped = function(e, t, i) {
        var o = this;
        if (t === FCPremiumPassPurchaseView.Event.PURCHASE_POINTS || t === FCPremiumPassPurchaseView.Event.PURCHASE_COINS) {
            var n = this.vm.getCampaign()
              , r = null == n ? void 0 : n.premiumPrices.get(t === FCPremiumPassPurchaseView.Event.PURCHASE_COINS ? GameCurrency.COINS : GameCurrency.POINTS);
            if (r) {
                var s = services.Localization
                  , a = s.localize("meta.upgrade.confirm-title")
                  , l = s.localize(r.type === GameCurrency.COINS ? "currency.coins" : "currency.points")
                  , c = s.localize("meta.upgrade.confirm-message", [r.amount.toString(), l])
                  , u = new EADialogViewController({
                    dialogOptions: [{
                        labelEnum: enums.UIDialogOptions.OK
                    }, {
                        labelEnum: enums.UIDialogOptions.CANCEL,
                        negativeActionFlag: !0
                    }],
                    message: c,
                    title: a
                });
                u.init(),
                u.modalDisplayDimensions.width = "380px",
                u.onExit.observe(this, function(e, t) {
                    e.unobserve(o),
                    t === enums.UIDialogOptions.OK ? o.vm.purchasePremiumPass(r.type).observe(o, function(e, t) {
                        return o.handlePurchase(e, t, r)
                    }) : o.closePopup()
                }),
                gPopupClickShield.setActivePopup(u),
                gPopupClickShield.closeActivePopup()
            }
        } else
            this.closePopup()
    }
    ,
    FCPremiumPassPurchaseViewController.prototype.handleKeyUpEvent = function(e) {
        e.key !== KeyboardKey.ESCAPE && e.key !== KeyboardKey.MS_ESCAPE && e.key !== KeyboardKey.ENTER || this.onExit.notify(enums.UIDialogOptions.OK)
    }
    ,
    FCPremiumPassPurchaseViewController
}(BasePopupViewController)
  , UTSPCapPopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTSPCapPopupView() {
        return e.call(this) || this
    }
    return __extends(UTSPCapPopupView, e),
    UTSPCapPopupView.prototype.init = function() {
        e.prototype.init.call(this);
        services.Localization;
        this._confirmBtn.init(),
        this._confirmBtn.setInteractionState(!0),
        this._confirmBtn.addTarget(this, this.handleTapEvent, EventType.TAP)
    }
    ,
    UTSPCapPopupView.prototype.setTitle = function(e) {
        this.__titleText.textContent = e
    }
    ,
    UTSPCapPopupView.prototype.setDescription = function(e) {
        this.__descriptionText.textContent = e
    }
    ,
    UTSPCapPopupView.prototype.setConfirmButtonLabel = function(e) {
        this._confirmBtn.setText(e)
    }
    ,
    UTSPCapPopupView.prototype.handleTapEvent = function(e, t, i) {
        this._triggerActions(UTSPCapPopupView.Event.CONFIRM)
    }
    ,
    UTSPCapPopupView.Event = Object.freeze({
        CONFIRM: "UTSPCapPopupView.CONFIRM"
    }),
    UTSPCapPopupView
}(EATargetActionView));
UTSPCapPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-sp-cap-popup-view");
        var t = document.createElement("header");
        t.classList.add("ut-sp-cap-popup-view--header"),
        this.__titleText = document.createElement("h1"),
        t.appendChild(this.__titleText),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("bodySection"),
        this.__descriptionText = document.createElement("span"),
        this.__descriptionText.classList.add("ut-sp-cap-popup-view--description"),
        i.appendChild(this.__descriptionText),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-button-group"),
        this._confirmBtn = new UTGroupButtonControl,
        o.appendChild(this._confirmBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSPCapPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleText = null,
    this.__descriptionText = null,
    this._confirmBtn.destroy()
}
,
UTSPCapPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSPCapPopupViewController = function(o) {
    function UTSPCapPopupViewController(e, t) {
        var i = o.call(this) || this;
        return i.isUtasCap = e,
        i.capType = t,
        i
    }
    return __extends(UTSPCapPopupViewController, o),
    UTSPCapPopupViewController.prototype.init = function() {
        o.prototype.init.call(this);
        var e = services.Localization
          , t = this.getView();
        t.init();
        var i = this.capType !== FcasCapType.HOURLY_CAP || this.isUtasCap ? "view.popup.spCap.title" : "view.popup.spCap.titleHourly";
        t.setTitle(e.localize(i)),
        t.setConfirmButtonLabel(e.localize("common.dialog.ok")),
        t.addTarget(this, this.handleConfirm, UTSPCapPopupView.Event.CONFIRM)
    }
    ,
    UTSPCapPopupViewController.prototype.dealloc = function() {
        var e;
        o.prototype.dealloc.call(this),
        null === (e = this.intervalController) || void 0 === e || e.dealloc()
    }
    ,
    UTSPCapPopupViewController.prototype.viewDidAppear = function() {
        o.prototype.viewDidAppear.call(this),
        this.isUtasCap && (this.setDescription(),
        this.intervalController = new EAIntervalController(1e3,this.setDescription.bind(this)),
        this.intervalController.start())
    }
    ,
    UTSPCapPopupViewController.prototype.setDescription = function() {
        var e = this.getView()
          , t = services.Localization
          , i = services.Objectives.getSpCapResetTime()
          , o = "";
        if (0 < i) {
            var n = Math.max(i - Math.round(Date.now() / MS_PER_SECOND), 0);
            o = t.localize("view.popup.spCap.timeRemain", [services.Localization.localizeTimeRemaining(n)])
        } else
            services.Objectives.resetUtasSpCap(),
            this.closePopup();
        e.setDescription(o)
    }
    ,
    UTSPCapPopupViewController.prototype.viewWillDisappear = function() {
        var e, t;
        o.prototype.viewWillDisappear.call(this);
        var i = this.getView();
        null === (e = this.intervalController) || void 0 === e || e.stop(),
        null === (t = this.intervalController) || void 0 === t || t.dealloc(),
        i.removeTarget(this, this.handleConfirm, UTSPCapPopupView.Event.CONFIRM)
    }
    ,
    UTSPCapPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTSPCapPopupView
    }
    ,
    UTSPCapPopupViewController.prototype.closePopup = function() {
        var e, t;
        this.isUtasCap || services.Objectives.setFCSpCapType(FcasCapType.NOT_SET),
        null === (e = this.intervalController) || void 0 === e || e.stop(),
        null === (t = this.intervalController) || void 0 === t || t.dealloc(),
        this.onExit.notify()
    }
    ,
    UTSPCapPopupViewController.prototype.handleConfirm = function(e, t, i) {
        this.closePopup()
    }
    ,
    UTSPCapPopupViewController
}(BasePopupViewController)
  , FCCampaignClaimAllView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function FCCampaignClaimAllView() {
        var e = t.call(this) || this;
        return e.fcRewardViews = [],
        e
    }
    return __extends(FCCampaignClaimAllView, t),
    FCCampaignClaimAllView.prototype.init = function() {
        t.prototype.init.call(this),
        this._actionBtn.init(),
        this._exitBtn.init(),
        this._exitBtn.addTarget(this, this.onExitTapped, EventType.TAP)
    }
    ,
    FCCampaignClaimAllView.prototype.dealloc = function() {
        this.reset(),
        t.prototype.dealloc.call(this)
    }
    ,
    FCCampaignClaimAllView.prototype.reset = function() {
        this._actionBtn.setInteractionState(!1),
        this._rewardsCarousel.reset(),
        this.fcRewardViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.fcRewardViews = [],
        this._actionBtn.removeTarget(this, this.onClaimTapped, EventType.TAP),
        this._actionBtn.removeTarget(this, this.onExitTapped, EventType.TAP)
    }
    ,
    FCCampaignClaimAllView.prototype.render = function(e, t, i) {
        this.reset();
        var o = services.Localization;
        this.__levelTag.textContent = e.title,
        this.__title.textContent = o.localize("meta.campaign.claim-all.title"),
        this.__description.textContent = o.localize("meta.campaign.claim-all.description");
        var n = o.localize("common.fraction", [(t + 1).toString(), i.toString()]);
        this.__progressLabel.textContent = o.localize("meta.campaign.claim-all.step", [n]),
        this.__levelType.textContent = e.isPremium ? o.localize("meta.premium") : "";
        var r = "meta.reward.single"
          , s = "meta.campaign.claim-all.button-single";
        switch (e.rewardSetFlow) {
        case FCRewardGrantType.BUNDLE:
            r = "meta.reward.bundle",
            s = "meta.campaign.claim-all.button-bundle";
            break;
        case FCRewardGrantType.CHOICE:
            r = "meta.reward.choice",
            s = "meta.campaign.claim-all.button-option"
        }
        this.__levelTitle.textContent = o.localize(r),
        this.setupRewardsCarousel(e.rewardSets, e.rewardSetFlow),
        this._actionBtn.setText(o.localize(s, ["1"])),
        this._actionBtn.addTarget(this, this.onClaimTapped, EventType.TAP),
        this._actionBtn.setInteractionState(!0)
    }
    ,
    FCCampaignClaimAllView.prototype.generateFCRewardView = function(e) {
        var t = new FCRewardView;
        return t.render(e),
        t
    }
    ,
    FCCampaignClaimAllView.prototype.setupRewardsCarousel = function(e, t) {
        var i = this;
        0 !== e.length ? (t === FCRewardGrantType.CHOICE && this._rewardsCarousel.setAfterChangeFunction(this.onCarouselSlideChange.bind(this)),
        e.forEach(function(e) {
            e.rewards.forEach(function(e) {
                var t = i.generateFCRewardView(e);
                i.fcRewardViews.push(t)
            })
        }),
        this._rewardsCarousel.setupMetaRewards(this.fcRewardViews)) : DebugUtils.Assert(!1, "Tried to setup rewards for a level that has no reward data.")
    }
    ,
    FCCampaignClaimAllView.prototype.onCarouselSlideChange = function() {
        this._actionBtn.setText(services.Localization.localize("meta.campaign.claim-all.button-option", [(this._rewardsCarousel.getCurrentSlide() + 1).toString()]))
    }
    ,
    FCCampaignClaimAllView.prototype.onClaimTapped = function(e, t, i) {
        this._actionBtn.setInteractionState(!1);
        var o = {
            rewardIndex: this._rewardsCarousel.getCurrentSlide()
        };
        this._triggerActions(FCCampaignClaimAllView.Event.CONFIRM, o)
    }
    ,
    FCCampaignClaimAllView.prototype.onExitTapped = function(e, t, i) {
        this._triggerActions(FCCampaignClaimAllView.Event.EXIT)
    }
    ,
    FCCampaignClaimAllView.Event = {
        CONFIRM: "FCCampaignClaimAllView.Event.CONFIRM",
        EXIT: "FCCampaignClaimAllView.Event.EXIT"
    },
    FCCampaignClaimAllView
}(EATargetActionView));
FCCampaignClaimAllView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("fc-campaign-claim-all-view"),
        this.__header = document.createElement("div"),
        this.__header.classList.add("fc-campaign-claim-all-view--header"),
        this.__title = document.createElement("h1"),
        this.__header.appendChild(this.__title),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        this.__header.appendChild(this._exitBtn.getRootElement()),
        this.__description = document.createElement("p"),
        this.__description.classList.add("fc-campaign-claim-all-view--description"),
        this.__header.appendChild(this.__description),
        this.__progressLabel = document.createElement("p"),
        this.__progressLabel.classList.add("label"),
        this.__header.appendChild(this.__progressLabel),
        e.appendChild(this.__header),
        this.__body = document.createElement("div"),
        this.__body.classList.add("fc-campaign-claim-all-view--body"),
        this.__levelTag = document.createElement("div"),
        this.__levelTag.classList.add("fc-campaign-claim-all-view--tag"),
        this.__body.appendChild(this.__levelTag),
        this.__reward = document.createElement("div"),
        this.__reward.classList.add("fc-campaign-claim-all-view--reward-meta"),
        this.__levelTitle = document.createElement("h2"),
        this.__reward.appendChild(this.__levelTitle),
        this.__levelType = document.createElement("div"),
        this.__levelType.classList.add("premium"),
        this.__reward.appendChild(this.__levelType),
        this.__body.appendChild(this.__reward),
        this._rewardsCarousel = new FCRewardsCarouselView,
        this.__body.appendChild(this._rewardsCarousel.getRootElement()),
        this.__footer = document.createElement("div"),
        this.__footer.classList.add("fc-campaign-claim-all-view--footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("mini"),
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        this._actionBtn.getRootElement().classList.add("fc-campaign-claim-all-view--button"),
        this.__footer.appendChild(this._actionBtn.getRootElement()),
        this.__body.appendChild(this.__footer),
        e.appendChild(this.__body),
        this.__root = e,
        this._generated = !0
    }
}
,
FCCampaignClaimAllView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__title = null,
    this._exitBtn.destroy(),
    this.__description = null,
    this.__progressLabel = null,
    this.__body = null,
    this.__levelTag = null,
    this.__reward = null,
    this.__levelTitle = null,
    this.__levelType = null,
    this._rewardsCarousel.destroy(),
    this.__footer = null,
    this._actionBtn.destroy()
}
,
FCCampaignClaimAllView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCCampaignClaimAllViewController = function(t) {
    function FCCampaignClaimAllViewController(e) {
        var i = t.call(this) || this;
        i.vm = e,
        i.currentStep = 0,
        i.claimableLevels = [];
        var o = i.vm.getCampaign();
        return o && o.getLevels().forEach(function(e) {
            if (e.isClaimable(o.xp) && i.claimableLevels.push(e),
            o.hasPremium) {
                var t = o.getPremiumLevelById(e.id);
                (null == t ? void 0 : t.isClaimable(o.xp)) && i.claimableLevels.push(t)
            }
        }),
        i
    }
    return __extends(FCCampaignClaimAllViewController, t),
    FCCampaignClaimAllViewController.prototype._getViewInstanceFromData = function() {
        return new FCCampaignClaimAllView
    }
    ,
    FCCampaignClaimAllViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.addTarget(this, this.onButtonTapped, FCCampaignClaimAllView.Event.CONFIRM),
        e.addTarget(this, this.onButtonTapped, FCCampaignClaimAllView.Event.EXIT),
        this.render()
    }
    ,
    FCCampaignClaimAllViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.removeTarget(this, this.onButtonTapped, FCCampaignClaimAllView.Event.CONFIRM),
        e.addTarget(this, this.onButtonTapped, FCCampaignClaimAllView.Event.EXIT)
    }
    ,
    FCCampaignClaimAllViewController.prototype.render = function() {
        var e = this.getView();
        this.claimableLevels[this.currentStep] && 0 !== this.claimableLevels.length ? e.render(this.claimableLevels[this.currentStep], this.currentStep, this.claimableLevels.length) : this.closePopup()
    }
    ,
    FCCampaignClaimAllViewController.prototype.handleFcasError = function(e) {
        if (hasConnection())
            switch (e) {
            case HttpStatusCode.FORBIDDEN:
            case HttpStatusCode.SERVICE_UNAVAILABLE_ERROR:
            case HttpStatusCode.SERVER_ERROR:
                this.vm.resetFcasContent(),
                getAppMain().getRootViewController().setGameViewTab(UTGameTabBarController.TabTag.HOME);
                break;
            case HttpStatusCode.UNAUTHORIZED:
                NetworkErrorManager.handleStatus(e);
                break;
            default:
                services.Notification.queue([services.Localization.localize("notification.meta.claimFail"), UINotificationType.NEGATIVE]),
                this.currentStep++,
                this.render()
            }
        else
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.NO_INTERNET_CONNECTION)
    }
    ,
    FCCampaignClaimAllViewController.prototype.claimCurrentReward = function(e, t) {
        var i = this;
        this.vm.claimLevelRewards(e.id, t).observe(this, function(e, t) {
            e.unobserve(i),
            t.success ? (services.Notification.queue([services.Localization.localize("notification.meta.claimSuccess"), UINotificationType.POSITIVE]),
            i.currentStep++,
            i.render()) : t.error && i.handleFcasError(t.status)
        })
    }
    ,
    FCCampaignClaimAllViewController.prototype.onButtonTapped = function(e, t, i) {
        if (t === FCCampaignClaimAllView.Event.CONFIRM) {
            var o = this.vm.getCampaign()
              , n = this.claimableLevels[this.currentStep];
            if (n.rewardSetFlow === FCRewardGrantType.CHOICE && (null == i ? void 0 : i.rewardIndex)) {
                var r = null == i ? void 0 : i.rewardIndex;
                n.userSelectedRewardId = n.rewardSets[r].id
            }
            this.claimCurrentReward(o, n)
        } else
            t === FCCampaignClaimAllView.Event.EXIT && this.closePopup()
    }
    ,
    FCCampaignClaimAllViewController
}(BasePopupViewController)
  , FCObjectiveSeasonViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function FCObjectiveSeasonViewController(e) {
        var t = i.call(this) || this;
        return t.intervalController = new EAIntervalController(1e4,t.handleEventTimer.bind(t)),
        t.objectivesViewModel = e,
        t
    }
    return __extends(FCObjectiveSeasonViewController, i),
    FCObjectiveSeasonViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.intervalController.init()
    }
    ,
    FCObjectiveSeasonViewController.prototype.dealloc = function() {
        this.intervalController.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    FCObjectiveSeasonViewController.prototype._getTelemetryId = function() {
        return "Objectives - Season Progress"
    }
    ,
    FCObjectiveSeasonViewController.prototype._getViewInstanceFromData = function() {
        return new FCObjectiveSeasonView
    }
    ,
    FCObjectiveSeasonViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.objectives")
    }
    ,
    FCObjectiveSeasonViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this),
        this.intervalController.start(),
        this.loadActiveSeasonCampaign();
        var e = this.getView();
        e.addTarget(this, this.onSelectRewardInfo, FCObjectiveSeasonView.Event.REWARD_INFO),
        e.addTarget(this, this.onClaimLevelReward, FCObjectiveSeasonView.Event.CLAIM_REWARD),
        e.addTarget(this, this.onUpgrade, FCObjectiveSeasonView.Event.UPGRADE),
        e.addTarget(this, this.onClaimAll, FCObjectiveSeasonView.Event.CLAIM_ALL);
        var t = getDefaultDispatcher();
        t.addObserver(AppNotification.APP_PAUSE, this, this.onAppPaused),
        t.addObserver(AppNotification.APP_RESUME, this, this.onAppResumed),
        TelemetryManager.trackPage(TelemetryManager.Sections.OBJECTIVES, "Season Progress")
    }
    ,
    FCObjectiveSeasonViewController.prototype.viewWillDisappear = function() {
        i.prototype.viewWillDisappear.call(this),
        this.intervalController.stop();
        var e = this.getView();
        e.removeTarget(this, this.onSelectRewardInfo, FCObjectiveSeasonView.Event.REWARD_INFO),
        e.removeTarget(this, this.onClaimLevelReward, FCObjectiveSeasonView.Event.CLAIM_REWARD),
        e.removeTarget(this, this.onUpgrade, FCObjectiveSeasonView.Event.UPGRADE),
        e.removeTarget(this, this.onClaimAll, FCObjectiveSeasonView.Event.CLAIM_ALL);
        var t = getDefaultDispatcher();
        t.removeObserver(AppNotification.APP_PAUSE, this),
        t.removeObserver(AppNotification.APP_RESUME, this)
    }
    ,
    FCObjectiveSeasonViewController.prototype.loadActiveSeasonCampaign = function() {
        var e, o = this, n = this.getView();
        n ? this.objectivesViewModel.requestActiveCampaignDetails().observe(this, function(e, t) {
            if (e.unobserve(o),
            t.success && JSUtils.isObject(t.data) && t.data.campaign) {
                var i = t.data.campaign;
                o.isViewDisplayed() && i.hasStarted() && n.setCampaign(i)
            } else
                services.Notification.queue([services.Localization.localize("notification.scmp.campaign.loadFailed"), UINotificationType.NEGATIVE]),
                o.handleFcasError(t.status)
        }) : null === (e = this.getNavigationController()) || void 0 === e || e.popToRootViewController()
    }
    ,
    FCObjectiveSeasonViewController.prototype.triggerConsolidatedRewardsPopup = function(e, t, i, o, n) {
        if (1 === e.length) {
            var r = (s = new FCGameRewardsViewController(e[0].rewards)).getView();
            r.setClaimable(o),
            r.setTitle(t),
            r.setDescription(i),
            r.setButtonText(services.Localization.localize(o ? "meta.campaign.claim" : "meta.reward-popup.continue")),
            r.addTarget(this, n, EventType.TAP),
            s.modalDisplayDimensions.width = "24em",
            gPopupClickShield.setActivePopup(s)
        } else {
            var s;
            (s = new FCRewardSelectionChoiceViewController(e)).setTitleText(t),
            s.setClaimableState(o),
            s.getView().addTarget(this, n, FCRewardSelectionChoiceView.Event.CONFIRM),
            gPopupClickShield.setActivePopup(s)
        }
    }
    ,
    FCObjectiveSeasonViewController.prototype.handleFcasError = function(e) {
        if (hasConnection())
            switch (e) {
            case HttpStatusCode.FORBIDDEN:
            case HttpStatusCode.SERVICE_UNAVAILABLE_ERROR:
            case HttpStatusCode.SERVER_ERROR:
                this.objectivesViewModel.resetFcasContent(),
                getAppMain().getRootViewController().setGameViewTab(UTGameTabBarController.TabTag.HOME);
                break;
            case HttpStatusCode.UNAUTHORIZED:
                NetworkErrorManager.handleStatus(e);
                break;
            default:
                services.Notification.queue([services.Localization.localize("popup.body.genericError"), UINotificationType.NEGATIVE])
            }
        else
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.NO_INTERNET_CONNECTION)
    }
    ,
    FCObjectiveSeasonViewController.prototype.handleEventTimer = function() {
        var e = this.objectivesViewModel.getCampaign();
        this.getView().updateCampaignTimeRemaining(e ? e.getTimeRemaining() : 0)
    }
    ,
    FCObjectiveSeasonViewController.prototype.onUpgrade = function(e, t, i) {
        getDefaultDispatcher().addObserver(AppNotification.OBJECTIVE_SEASON_PURCHASE, this, this.onSeasonPurchase);
        var o = this.objectivesViewModel.getCampaign();
        if (o) {
            var n = new FCPremiumPassPurchaseViewController(this.objectivesViewModel);
            n.init(),
            n.modalDisplayDimensions.width = "100%",
            n.getView().render(null == o ? void 0 : o.premiumPrices),
            gPopupClickShield.setActivePopup(n)
        } else
            DebugUtils.Assert(!1, "No campaign detected on upgrade")
    }
    ,
    FCObjectiveSeasonViewController.prototype.onSeasonPurchase = function() {
        getDefaultDispatcher().removeObserver(AppNotification.OBJECTIVE_SEASON_PURCHASE, this),
        this.loadActiveSeasonCampaign()
    }
    ,
    FCObjectiveSeasonViewController.prototype.onClaimAll = function(e, t, i) {
        var o = this
          , n = new FCCampaignClaimAllViewController(this.objectivesViewModel);
        n.init(),
        n.modalDisplayDimensions.width = "100%",
        gPopupClickShield.setActivePopup(n),
        n.onExit.observe(this, function(e) {
            e.unobserve(o),
            o.loadActiveSeasonCampaign()
        })
    }
    ,
    FCObjectiveSeasonViewController.prototype.onSelectRewardInfo = function(e, t, i) {
        if (this.objectivesViewModel && 0 < i.level.rewardSets.length) {
            var o = this.objectivesViewModel.getCampaign();
            if (this.objectivesViewModel.setSelectedLevelById(i.level.id, i.level.isPremium),
            i.level) {
                if (o) {
                    var n = i.level.isClaimable(o.xp);
                    this.triggerConsolidatedRewardsPopup(i.level.rewardSets, services.Localization.localize(n ? "meta.level.rewards.title-claimable" : "meta.level.rewards.title-preview", [i.level.id.toString()]), services.Localization.localize(n ? "meta.level.rewards.description-claimable" : "meta.level.rewards.description-preview", [i.level.id.toString()]), n, this.onCampaignRewardChosen)
                }
            } else
                services.Notification.queue([services.Localization.localize("notification.scmp.rewardsInfoFailed"), UINotificationType.NEGATIVE])
        }
    }
    ,
    FCObjectiveSeasonViewController.prototype.onClaimLevelReward = function(e, t, n) {
        var r = this;
        if (this.objectivesViewModel.setSelectedLevelById(n.level.id, n.level.isPremium),
        1 < n.level.rewardSets.length)
            this.onSelectRewardInfo(e, t, n);
        else {
            var s = services.Localization
              , i = this.objectivesViewModel.getCampaign();
            if (i) {
                var a = n.level.rewardSets[0];
                this.objectivesViewModel.claimLevelRewards(i.id, n.level).observe(this, function(e, t) {
                    var i = new FCGameRewardsViewController(a.rewards);
                    i.init(),
                    i.modalDisplayDimensions.width = "24em";
                    var o = i.getView();
                    o.setClaimable(!0),
                    o.setTitle(s.localize("meta.level.rewards.title-claimed", [n.level.title])),
                    o.setDescription(s.localize("meta.level.rewards.description-claimed", [n.level.title])),
                    o.setButtonText(services.Localization.localize("meta.reward-popup.continue")),
                    gPopupClickShield.setActivePopup(i),
                    i.onExit.observe(r, function(e) {
                        e.unobserve(r),
                        r.onRewardClaimed(e, t)
                    })
                })
            } else
                services.Notification.queue([s.localize("notification.scmp.rewardsInfoFailed"), UINotificationType.NEGATIVE])
        }
    }
    ,
    FCObjectiveSeasonViewController.prototype.onCampaignRewardChosen = function(e, t, i) {
        var c = this;
        e.removeTarget(this, this.onCampaignRewardChosen, FCRewardSelectionChoiceView.Event.CONFIRM);
        var o = this.objectivesViewModel.getCampaign();
        if (o) {
            var n = this.objectivesViewModel.selectedLevel;
            n ? (n.userSelectedRewardId = i.selectedId,
            this.objectivesViewModel.claimLevelRewards(o.id, n).observe(this, function(e, t) {
                var i = !1
                  , o = !1
                  , n = !1
                  , r = !1
                  , s = !1
                  , a = [];
                if (t.data && t.data.rewards.forEach(function(e) {
                    i = i || e.isCoin,
                    o = o || e.isUtItem,
                    n = n || e.isPack,
                    r = r || e.isChampionQualificationPoints,
                    s = s || e.isXP,
                    e.utItem && a.push(e.utItem)
                }, c),
                o && (services.Notification.queue([services.Localization.localize("notification.item.added"), UINotificationType.POSITIVE]),
                repositories.Item.setDirty(ItemPile.PURCHASED),
                getDefaultDispatcher().notify(AppNotification.UNASSIGNED_ITEM_ADDED, c, {
                    items: a
                })),
                n) {
                    services.Notification.queue([services.Localization.localize("notification.pack.added"), UINotificationType.POSITIVE]);
                    var l = services.User.getUser();
                    l && l.incrementNumUnopenedPacks()
                }
                i && (services.Notification.queue([services.Localization.localize("notification.coins.added"), UINotificationType.POSITIVE]),
                services.User.requestCurrencies()),
                r && services.Notification.queue([services.Localization.localize("notification.championsPoints.added"), UINotificationType.POSITIVE]),
                s && (services.Notification.queue([services.Localization.localize("notification.xp.added"), UINotificationType.POSITIVE]),
                services.Objectives.reset()),
                c.onRewardClaimed(e, t)
            })) : DebugUtils.Assert(!1, "Attempted to claim unknown level")
        } else
            DebugUtils.Assert(!1, "Attempted to claim a level with no campaign")
    }
    ,
    FCObjectiveSeasonViewController.prototype.onRewardClaimed = function(e, t) {
        e.unobserve(this),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.OBJECTIVE_REWARDS_CLAIMED, "Claim Seasonal Progress Rewards"),
        t.success ? (services.Notification.queue([services.Localization.localize("notification.meta.claimSuccess"), UINotificationType.POSITIVE]),
        this.loadActiveSeasonCampaign()) : (services.Notification.queue([services.Localization.localize("notification.meta.claimFail"), UINotificationType.NEGATIVE]),
        this.handleFcasError(t.status)),
        this.objectivesViewModel && this.objectivesViewModel.resetSelectedLevel()
    }
    ,
    FCObjectiveSeasonViewController.prototype.onAppPaused = function(e, t, i) {
        this.intervalController.stop()
    }
    ,
    FCObjectiveSeasonViewController.prototype.onAppResumed = function(e, t, i) {
        this.intervalController.start()
    }
    ,
    FCObjectiveSeasonViewController
}(EAViewController))
  , FCObjectiveTaskCondensedView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function FCObjectiveTaskCondensedView() {
        return e.call(this) || this
    }
    return __extends(FCObjectiveTaskCondensedView, e),
    FCObjectiveTaskCondensedView.prototype.setReward = function(e) {
        this._mainReward.render(e, !0)
    }
    ,
    FCObjectiveTaskCondensedView
}(BaseObjectiveTaskView));
FCObjectiveTaskCondensedView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-task-view--condensed"),
        e.classList.add("ut-objective-task-view"),
        this._mainReward = new FCRewardIconView,
        e.appendChild(this._mainReward.getRootElement()),
        this.__title = document.createElement("div"),
        this.__title.classList.add("ut-objective-task-view--title"),
        this.__title.classList.add("ut-objective-task-view--cell"),
        e.appendChild(this.__title),
        this.__progress = document.createElement("div"),
        this.__progress.classList.add("ut-objective-task-view--progress"),
        this.__progress.classList.add("ut-objective-task-view--cell"),
        e.appendChild(this.__progress),
        this.__state = document.createElement("div"),
        this.__state.classList.add("ut-objective-task-view--state"),
        this.__state.classList.add("ut-objective-task-view--cell"),
        e.appendChild(this.__state),
        this.__root = e,
        this._generated = !0
    }
}
,
FCObjectiveTaskCondensedView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._mainReward.destroy(),
    this.__title = null,
    this.__progress = null,
    this.__state = null
}
,
FCObjectiveTaskCondensedView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCObjectiveGroupView = function(e) {
    function FCObjectiveGroupView() {
        return e.call(this) || this
    }
    return __extends(FCObjectiveGroupView, e),
    FCObjectiveGroupView.prototype.renderTaskList = function(e) {
        var t = e.slice(0, 3).map(function(e) {
            var t = new FCObjectiveTaskCondensedView
              , i = e.rewards[0].rewards[0];
            return i && t.setReward(i),
            t.setProgress(e.progress, e.multiplier),
            t.setTitle(e.title),
            t
        });
        this._tasks.renderTasks(t)
    }
    ,
    FCObjectiveGroupView.prototype.setGameMode = function(e) {
        this.__gameMode.textContent = services.Localization.localize("meta.gameMode." + e)
    }
    ,
    FCObjectiveGroupView
}(BaseObjectiveGroupView);
FCObjectiveGroupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-group-view"),
        this._backgroundAsset = new EAImageView,
        this._backgroundAsset.getRootElement().classList.add("ut-objective-group-view--background-image"),
        e.appendChild(this._backgroundAsset.getRootElement());
        var t = document.createElement("div");
        t.classList.add("ut-objective-group-view--background-image-overlay"),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-objective-group-view--overlay"),
        this.__overlayText = document.createElement("span"),
        i.appendChild(this.__overlayText),
        this.__lockedByGroups = document.createElement("div"),
        this.__lockedByGroups.classList.add("ut-objective-group-view--locked-by"),
        i.appendChild(this.__lockedByGroups),
        this._overlayActionBtn = new UTStandardButtonControl,
        this._overlayActionBtn.getRootElement().classList.add("ut-objective-group-view--overlay-button"),
        i.appendChild(this._overlayActionBtn.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-objective-group-view--body");
        var n = document.createElement("div");
        n.classList.add("ut-objective-group-view--header");
        var r = document.createElement("div");
        r.classList.add("ut-objective-group-view--labels"),
        this.__countdown = document.createElement("div"),
        this.__countdown.classList.add("ut-objective-group-view--countdown"),
        r.appendChild(this.__countdown),
        this._repeatableStatus = new UTObjectiveStatusLabelView,
        r.appendChild(this._repeatableStatus.getRootElement()),
        this._refreshStatus = new UTObjectiveStatusLabelView,
        r.appendChild(this._refreshStatus.getRootElement()),
        n.appendChild(r),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-objective-group-view--title"),
        n.appendChild(this.__title),
        this._titleAsset = new EAImageView,
        this._titleAsset.getRootElement().classList.add("ut-objective-group-view--title-image"),
        n.appendChild(this._titleAsset.getRootElement()),
        o.appendChild(n);
        var s = document.createElement("div");
        s.classList.add("ut-objective-group-view--top-container");
        var a = document.createElement("div");
        a.classList.add("ut-objective-group-view--objective-info-column"),
        this.__gameMode = document.createElement("p"),
        this.__gameMode.classList.add("ut-objective-group-view--subtitle"),
        a.appendChild(this.__gameMode),
        this.__progressTitle = document.createElement("p"),
        this.__progressTitle.classList.add("ut-objective-group-view--subtitle"),
        a.appendChild(this.__progressTitle);
        var l = document.createElement("div");
        l.classList.add("ut-objective-group-view--progress"),
        this._progressBar = new UTProgressBarView,
        this._progressBar.getRootElement().classList.add("rounded"),
        l.appendChild(this._progressBar.getRootElement()),
        this.__progressLabel = document.createElement("h2"),
        this.__progressLabel.classList.add("ut-objective-group-view--progress-label"),
        l.appendChild(this.__progressLabel),
        a.appendChild(l),
        this.__rewardsLabel = document.createElement("h2"),
        this.__rewardsLabel.classList.add("ut-objective-group-view--subtitle"),
        a.appendChild(this.__rewardsLabel),
        this._rewards = new TileRewardListView,
        a.appendChild(this._rewards.getRootElement()),
        s.appendChild(a);
        var c = document.createElement("div");
        c.classList.add("ut-objective-group-view--reward-asset-column"),
        this._rewardView = new FCRewardView,
        c.appendChild(this._rewardView.getRootElement()),
        s.appendChild(c),
        o.appendChild(s),
        this._tasks = new ObjectiveTasksView,
        o.appendChild(this._tasks.getRootElement()),
        e.appendChild(o);
        var u = document.createElement("div");
        u.classList.add("ut-objective-group-view--footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("ut-objective-group-view--button"),
        u.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(u),
        this.__root = e,
        this._generated = !0
    }
}
,
FCObjectiveGroupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._backgroundAsset.destroy(),
    this.__overlayText = null,
    this.__lockedByGroups = null,
    this._overlayActionBtn.destroy(),
    this.__countdown = null,
    this._repeatableStatus.destroy(),
    this._refreshStatus.destroy(),
    this.__title = null,
    this._titleAsset.destroy(),
    this.__gameMode = null,
    this.__progressTitle = null,
    this._progressBar.destroy(),
    this.__progressLabel = null,
    this.__rewardsLabel = null,
    this._rewards.destroy(),
    this._rewardView.destroy(),
    this._tasks.destroy(),
    this._actionBtn.destroy()
}
,
FCObjectiveGroupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCMetaObjectivesView = function(t) {
    function FCMetaObjectivesView() {
        var e = t.call(this) || this;
        return e.groups = [],
        e
    }
    return __extends(FCMetaObjectivesView, t),
    FCMetaObjectivesView.prototype.init = function() {
        t.prototype.init.call(this),
        this._floatingFilterBtn.setInteractionState(!0),
        this.setInteractionState(!0)
    }
    ,
    FCMetaObjectivesView.prototype.dealloc = function() {
        this.clearViews(),
        t.prototype.dealloc.call(this)
    }
    ,
    FCMetaObjectivesView.prototype.clearViews = function() {
        this.groups.forEach(function(e) {
            return e.dealloc()
        }),
        this.groups = []
    }
    ,
    FCMetaObjectivesView.prototype.setMetaGroups = function(i, o) {
        var n = this;
        this.clearViews();
        this.groups = i.map(function(e) {
            var t;
            return n.generateFCObjectiveGroupTile(e, null !== (t = o.get(e.id)) && void 0 !== t ? t : [], function(o) {
                return i.filter(function(e) {
                    var t = 0 <= o.groupIdsToUnlock.indexOf(e.id)
                      , i = !(e.isNotStarted() || e.isInProgress());
                    return t && !i
                })
            }(e))
        }),
        this.layoutSubviews()
    }
    ,
    FCMetaObjectivesView.prototype.scrollToObjective = function(e) {
        var t = e.getRootElement().offsetTop - 16;
        this.__objectivesMainContainer.scrollTop = t,
        e.setFocused()
    }
    ,
    FCMetaObjectivesView.prototype.focusTile = function(t) {
        var e = JSUtils.find(this.groups, function(e) {
            return e.getId() === t
        });
        e && this.scrollToObjective(e)
    }
    ,
    FCMetaObjectivesView.prototype.setGroupTileInteractionState = function(t, e) {
        var i = JSUtils.find(this.groups, function(e) {
            return e.getId() === t
        });
        DebugUtils.Assert(JSUtils.isValid(i), "Cannot find objective tile associated with composite id: " + t),
        null == i || i.setInteractionState(e)
    }
    ,
    FCMetaObjectivesView.prototype.performCommonObjectiveGroupTileSetup = function(e, t, i, o) {
        var n = services.Localization;
        return e.init(),
        e.setGroupType(ObjectiveGroupType.MILESTONE),
        e.setId(t.compositeId),
        t.guidAssetId && t.hasBackgroundImage && e.setBackgroundImage(t.guidAssetId),
        t.guidAssetId && t.hasHeaderImage ? e.setHeaderImage(t.guidAssetId, t.title) : e.setTitle(t.title),
        e.setProgress(t.getProgress()),
        e.setProgressLabel(n.localize("common.fraction", [t.getNumberOfCompletedObjectives().toString(), t.getObjectives().length.toString()])),
        e.updateRepeatableState(t),
        e.toggleCountdown(!1),
        t.hasExpired() ? (e.setCountdown(n.localize("objectives.tile.expired")),
        (t.isInProgress() || t.isNotStarted()) && e.setGroupExpired()) : e.setCountdown(n.localize("scmp.group.countdown", [n.localizeTimeRemaining(t.getTimeRemaining())])),
        t.isComingSoon() ? (e.setGroupComingSoon(),
        e.setCountdown(n.localize("scmp.group.opens", [n.localizeTimeRemaining(t.getTimeUntilStart())]))) : (0 < o.length ? (e.setOverlayText(n.localize("scmp.group.description.lockedBy")),
        e.setGroupLocked(o),
        e.setLockedbyGroups(o.map(function(e) {
            return e.compositeId
        }))) : t.isLockedBehindStartTime() ? (e.setOverlayText(n.localize("scmp.group.description.locked")),
        e.setGroupScheduled()) : t.isRefresh() && t.isRedeemed() ? e.setState(ObjectiveGroupStateEnum.UNDEFINED, !1, 0) : e.setState(t.state, !1, 0),
        e.renderTaskList(i)),
        e.addTarget(this, this.onLockedGroupSelected, FCObjectiveGroupView.Event.LOCKED_BY),
        e.addTarget(this, this.onClaimSelected, FCObjectiveGroupView.Event.CLAIM_REWARD),
        e.addTarget(this, this.onRewardInfoSelected, FCObjectiveGroupView.Event.GROUP_INFO),
        this.addSubview(e, this.__groupsDetails),
        e
    }
    ,
    FCMetaObjectivesView.prototype.generateFCObjectiveGroupTile = function(e, t, i) {
        var o = new FCObjectiveGroupView;
        return this.performCommonObjectiveGroupTileSetup(o, e, t, i),
        o.setGameMode(e.gameMode),
        0 < e.rewards.length && o.renderRewardsList(e.rewards[0].rewards),
        o
    }
    ,
    FCMetaObjectivesView.prototype.getFloatingFilterButton = function() {
        return this._floatingFilterBtn
    }
    ,
    FCMetaObjectivesView.prototype.onLockedGroupSelected = function(e, t, i) {
        this.isInteractionEnabled() && this.focusTile(i.id)
    }
    ,
    FCMetaObjectivesView.prototype.onRewardInfoSelected = function(e, t, i) {
        this.isInteractionEnabled() && t === FCObjectiveGroupView.Event.GROUP_INFO && this._triggerActions(FCMetaObjectivesView.Event.REWARD_INFO, i)
    }
    ,
    FCMetaObjectivesView.prototype.onClaimSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(FCMetaObjectivesView.Event.CLAIM_REWARD, i)
    }
    ,
    FCMetaObjectivesView.Event = {
        FILTER_CHANGE: "FCMetaObjectivesView.FILTER_CHANGE",
        SELECT_GROUP: "FCMetaObjectivesView.SELECT_GROUP",
        CLAIM_REWARD: "FCMetaObjectivesView.CLAIM_REWARD",
        REWARD_INFO: "FCMetaObjectivesView.REWARD_INFO",
        SORT_CHANGE: "FCMetaObjectivesView.SORT_CHANGE"
    },
    FCMetaObjectivesView
}(EATargetActionView);
FCMetaObjectivesView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objective-category"),
        this.__objectivesMainContainer = document.createElement("div"),
        this.__objectivesMainContainer.classList.add("ut-objective-category--content"),
        this.__objectivesDetailsContainer = document.createElement("div"),
        this.__objectivesDetailsContainer.classList.add("ut-objective-category--details"),
        this.__groupsDetails = document.createElement("div"),
        this.__groupsDetails.classList.add("ut-objective-category--groups"),
        this.__objectivesDetailsContainer.appendChild(this.__groupsDetails),
        this.__objectivesMainContainer.appendChild(this.__objectivesDetailsContainer),
        e.appendChild(this.__objectivesMainContainer);
        var t = document.createElement("div");
        t.classList.add("ut-objective-category--footer"),
        this._floatingFilterBtn = new UTFloatingImageButtonControl,
        this._floatingFilterBtn.getRootElement().classList.add("filter-btn"),
        this._floatingFilterBtn.getRootElement().classList.add("ut-objective-category--floating-filter-btn"),
        t.appendChild(this._floatingFilterBtn.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
FCMetaObjectivesView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__objectivesMainContainer = null,
    this.__objectivesDetailsContainer = null,
    this.__groupsDetails = null,
    this._floatingFilterBtn.destroy()
}
,
FCMetaObjectivesView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var FCMetaObjectivesViewController = function(s) {
    function FCMetaObjectivesViewController(e) {
        var t = s.call(this) || this;
        return t.intervalController = new EAIntervalController(1e4,t.handleEventTimer.bind(t)),
        t.objectivesViewModel = e,
        t
    }
    return __extends(FCMetaObjectivesViewController, s),
    FCMetaObjectivesViewController.prototype.init = function() {
        s.prototype.init.call(this),
        this.intervalController.init()
    }
    ,
    FCMetaObjectivesViewController.prototype.dealloc = function() {
        this.intervalController.dealloc(),
        this.filtersModal && (this.filtersModal.onExit.unobserve(this),
        this.filtersModal.dealloc(),
        this.filtersModal = null),
        s.prototype.dealloc.call(this)
    }
    ,
    FCMetaObjectivesViewController.prototype._getTelemetryId = function() {
        return "Objectives - Meta"
    }
    ,
    FCMetaObjectivesViewController.prototype._getViewInstanceFromData = function() {
        return new FCMetaObjectivesView
    }
    ,
    FCMetaObjectivesViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.metaObjectives")
    }
    ,
    FCMetaObjectivesViewController.prototype.viewDidAppear = function() {
        var e;
        s.prototype.viewDidAppear.call(this),
        this.intervalController.start(),
        this.loadMetaGroups();
        var t = getDefaultDispatcher();
        t.addObserver(AppNotification.APP_PAUSE, this, this.onAppPaused),
        t.addObserver(AppNotification.APP_RESUME, this, this.onAppResumed);
        var i = this.getView();
        i.addTarget(this, this.onClaimGroupReward, FCMetaObjectivesView.Event.CLAIM_REWARD),
        i.addTarget(this, this.onGroupRewardsInfoSelected, FCMetaObjectivesView.Event.REWARD_INFO),
        i.getFloatingFilterButton().addTarget(this, this.eFilterSelected, EventType.TAP),
        TelemetryManager.trackPage(TelemetryManager.Sections.OBJECTIVES, "Objective Category - Meta");
        var o = null === (e = services.User.getUser()) || void 0 === e ? void 0 : e.getSelectedPersona();
        if (null == o ? void 0 : o.isShowcaseFreeToTry) {
            var n = services.Localization;
            if (!services.UserSettings.getSessionItem(UserSettingsKey.FTT_INFO_DISPLAYED)) {
                var r = new EADialogViewController({
                    dialogOptions: [{
                        labelEnum: enums.UIDialogOptions.OK
                    }],
                    message: n.localize("popup.freeToTryInfo.body"),
                    title: n.localize("popup.freeToTryInfo.title")
                });
                r.init(),
                r.modalDisplayDimensions.width = "380px",
                r.modalCanDismissFromShield = !1,
                gPopupClickShield.setActivePopup(r),
                services.UserSettings.setSessionItem(UserSettingsKey.FTT_INFO_DISPLAYED, "true")
            }
        }
    }
    ,
    FCMetaObjectivesViewController.prototype.viewWillDisappear = function() {
        s.prototype.viewWillDisappear.call(this),
        this.intervalController.stop();
        var e = getDefaultDispatcher();
        e.removeObserver(AppNotification.APP_PAUSE, this),
        e.removeObserver(AppNotification.APP_RESUME, this);
        var t = this.getView();
        t.removeTarget(this, this.onClaimGroupReward, FCMetaObjectivesView.Event.CLAIM_REWARD),
        t.removeTarget(this, this.onGroupRewardsInfoSelected, FCMetaObjectivesView.Event.REWARD_INFO),
        t.getFloatingFilterButton().removeTarget(this, this.eFilterSelected, EventType.TAP)
    }
    ,
    FCMetaObjectivesViewController.prototype.eFilterSelected = function(e, t, i) {
        var o = this;
        this.filtersModal = new UTObjectivesFiltersViewController(this.objectivesViewModel.sortBy,this.objectivesViewModel.filterBy),
        this.filtersModal.init(),
        this.filtersModal.modalDisplayStyle = "sheet",
        this.filtersModal.modalCanDismissFromShield = !0,
        this.filtersModal.modalSheetTitle = services.Localization.localize("objectives.filters.title"),
        this.filtersModal.getView().addTarget(this, this.onFilterModalEvent, UTObjectivesFiltersView.Event.RESET),
        this.filtersModal.getView().addTarget(this, this.onFilterModalEvent, UTObjectivesFiltersView.Event.SUBMIT);
        var n = this.filtersModal;
        this.filtersModal.onExit.observe(this, function() {
            n.getView().removeTarget(o, o.onFilterModalEvent, UTObjectivesFiltersView.Event.RESET),
            n.getView().removeTarget(o, o.onFilterModalEvent, UTObjectivesFiltersView.Event.SUBMIT)
        }),
        this.presentViewController(this.filtersModal)
    }
    ,
    FCMetaObjectivesViewController.prototype.loadMetaGroups = function() {
        var i = this;
        this.objectivesViewModel.requestMetaObjectiveGroups().observe(this, function(e, t) {
            e.unobserve(i),
            t.success ? i.populateMetaGroups() : (services.Notification.queue([services.Localization.localize("notification.scmp.categories.loadFailed"), UINotificationType.NEGATIVE]),
            i.handleFcasError(t.status))
        })
    }
    ,
    FCMetaObjectivesViewController.prototype.handleEventTimer = function() {
        var t = this;
        this.objectivesViewModel.hasUnclaimedExpiredGroups() && function() {
            t.intervalController.stop();
            var e = new UTSeasonalCampaignPopupViewController("group-rewards");
            e.onExit.observe(t, t.onSCMPInfoPopupClosed),
            e.getView().setCancelButtonDisplay(!1),
            gPopupClickShield.setActivePopup(e)
        }
        .call(this)
    }
    ,
    FCMetaObjectivesViewController.prototype.onSCMPInfoPopupClosed = function(e, t, i) {
        var n = this;
        e.unobserve(this);
        function EAc(e, t) {
            e.unobserve(n),
            t.success && n.isViewDisplayed() ? n.populateMetaGroups() : (services.Notification.queue([r.localize("notification.scmp.categories.loadFailed"), UINotificationType.NEGATIVE]),
            n.handleFcasError(t.status))
        }
        var r = services.Localization;
        services.Objectives.claimExpiredRewards().observe(this, function(e, t) {
            if (e.unobserve(n),
            t.success && t.data) {
                var i = new FCGameRewardsViewController(t.data.rewards);
                i.init(),
                i.modalDisplayDimensions.width = "24em";
                var o = i.getView();
                o.setTitle(r.localize("scmp.generic.rewards.title")),
                o.setDescription(r.localize(0 < t.data.rewards.length ? "objective.rewards.claimAlldescription" : "objective.rewards.autoclaimed")),
                o.setButtonText(r.localize("objective.rewards.claim")),
                gPopupClickShield.setActivePopup(i),
                n.objectivesViewModel.requestMetaObjectiveGroups().observe(n, EAc)
            }
        })
    }
    ,
    FCMetaObjectivesViewController.prototype.populateMetaGroups = function() {
        var t = this
          , e = this.getView()
          , i = this.objectivesViewModel.getMetaGroups()
          , o = new EAHashTable;
        i.forEach(function(e) {
            return o.set(e.id, t.objectivesViewModel.getMetaGroupsSortedObjectives(e))
        }),
        e.setMetaGroups(i, o)
    }
    ,
    FCMetaObjectivesViewController.prototype.refreshView = function() {
        this.populateMetaGroups()
    }
    ,
    FCMetaObjectivesViewController.prototype.claimGroupReward = function(t) {
        var n = this
          , r = this.objectivesViewModel.getMetaGroups().find(function(e) {
            return e.compositeId == t
        })
          , s = services.Localization;
        r && (r.isClaimable() || r.hasUnclaimedObjectiveRewards()) && this.objectivesViewModel.claimMetaGroupRewards(r).observe(this, function(e, t) {
            if (n.onRewardClaimed(e, t),
            TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.OBJECTIVE_REWARDS_CLAIMED, "Claim Meta Group Rewards"),
            t.success && t.data && 0 < t.data.rewards.length) {
                var i = new FCGameRewardsViewController(r.rewards[0].rewards)
                  , o = i.getView();
                o.setTitle(s.localize("scmp.group.rewards.title")),
                o.setDescription(s.localize("scmp.group.rewards.description", [r.title])),
                o.setButtonText(services.Localization.localize("meta.reward-popup.continue")),
                o.setClaimable(!0),
                i.modalDisplayDimensions.width = "24em",
                gPopupClickShield.setActivePopup(i)
            } else
                n.handleFcasError(t.status)
        })
    }
    ,
    FCMetaObjectivesViewController.prototype.onClaimObjectiveReward = function(e, t, i) {
        this.claimObjectiveReward(i.group, i.id)
    }
    ,
    FCMetaObjectivesViewController.prototype.claimObjectiveReward = function(e, t) {
        var n = this
          , r = e ? e.getObjectiveById(t) : null
          , s = services.Localization;
        if (r) {
            DebugUtils.Assert(JSUtils.isValid(e), "Missing group when attempting to claim objective rewards"),
            e && r && this.objectivesViewModel.claimMetaGroupTaskRewards(e, r).observe(this, function(e, t) {
                if (e.unobserve(n),
                TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.OBJECTIVE_REWARDS_CLAIMED, "Claim Meta Objective Rewards"),
                t.success && t.data) {
                    services.Notification.queue([s.localize("notification.scmp.claimSuccess"), UINotificationType.POSITIVE]);
                    var i = new FCGameRewardsViewController(r.rewards[0].rewards)
                      , o = i.getView();
                    o.setTitle(s.localize("scmp.objective.rewards.title")),
                    o.setDescription(s.localize("scmp.objective.rewards.description", [r ? r.title : ""])),
                    o.setButtonText(s.localize("objective.rewards.claim")),
                    o.setClaimable(!0),
                    i.modalDisplayDimensions.width = "24em",
                    gPopupClickShield.setActivePopup(i),
                    n.refreshView()
                } else
                    services.Notification.queue([s.localize("notification.scmp.claimFail"), UINotificationType.NEGATIVE]),
                    n.handleFcasError(t.status)
            })
        } else
            DebugUtils.Assert(JSUtils.isValid(r), "Missing objective when attempting to claim objective rewards")
    }
    ,
    FCMetaObjectivesViewController.prototype.onClaimGroupReward = function(e, t, i) {
        this.claimGroupReward(i.id)
    }
    ,
    FCMetaObjectivesViewController.prototype.onGroupRewardsInfoSelected = function(e, t, i) {
        DebugUtils.Assert(JSUtils.isString(i.id), "Expected a string for group composite ID.");
        var o = this.objectivesViewModel.getGroupByCompositeId(i.id);
        o && this.navigateToObjectivesDetailView(o)
    }
    ,
    FCMetaObjectivesViewController.prototype.navigateToObjectivesDetailView = function(e) {
        var t, i = isPhone() ? new FCObjectiveDetailsViewController : new FCObjectiveDetailsSplitViewController;
        i.initWithObjectives(this.objectivesViewModel, e),
        null === (t = this.getNavigationController()) || void 0 === t || t.pushViewController(i)
    }
    ,
    FCMetaObjectivesViewController.prototype.handleFcasError = function(e) {
        if (hasConnection())
            switch (e) {
            case HttpStatusCode.FORBIDDEN:
            case HttpStatusCode.SERVICE_UNAVAILABLE_ERROR:
            case HttpStatusCode.SERVER_ERROR:
                this.objectivesViewModel.resetFcasContent(),
                getAppMain().getRootViewController().setGameViewTab(UTGameTabBarController.TabTag.HOME);
                break;
            case HttpStatusCode.UNAUTHORIZED:
                NetworkErrorManager.handleStatus(e);
                break;
            default:
                services.Notification.queue([services.Localization.localize("popup.body.genericError"), UINotificationType.NEGATIVE])
            }
        else
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.NO_INTERNET_CONNECTION)
    }
    ,
    FCMetaObjectivesViewController.prototype.onFilterModalEvent = function(e, t, i) {
        this.objectivesViewModel && this.filtersModal && (t === UTObjectivesFiltersView.Event.RESET ? (this.filtersModal.getView().setSortOption(ObjectiveSortOption.NONE),
        this.filtersModal.getView().setFilterOption(ObjectiveFilterOption.NONE)) : t === UTObjectivesFiltersView.Event.SUBMIT && (this.dismissViewController(),
        this.objectivesViewModel.sortBy = i.sortOption,
        this.objectivesViewModel.filterBy = i.filterOption,
        this.refreshView())),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.FILTER, "Objectives filters - Filters popup submit")
    }
    ,
    FCMetaObjectivesViewController.prototype.onRewardClaimed = function(e, t) {
        e.unobserve(this),
        TelemetryManager.trackEvent(TelemetryManager.Sections.OBJECTIVES, TelemetryManager.Categories.OBJECTIVE_REWARDS_CLAIMED, "Claim Season Objectives Rewards"),
        t.success ? (services.Notification.queue([services.Localization.localize("notification.scmp.claimSuccess"), UINotificationType.POSITIVE]),
        this.refreshView()) : (services.Notification.queue([services.Localization.localize("notification.scmp.claimFail"), UINotificationType.NEGATIVE]),
        this.handleFcasError(t.status))
    }
    ,
    FCMetaObjectivesViewController.prototype.onAppPaused = function(e, t, i) {
        this.intervalController.stop()
    }
    ,
    FCMetaObjectivesViewController.prototype.onAppResumed = function(e, t, i) {
        this.intervalController.start()
    }
    ,
    FCMetaObjectivesViewController
}(EAViewController)
  , UTSeasonalCampaignPopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTSeasonalCampaignPopupView() {
        return e.call(this) || this
    }
    return __extends(UTSeasonalCampaignPopupView, e),
    UTSeasonalCampaignPopupView.prototype.init = function() {
        e.prototype.init.call(this),
        this._btnCancel.init(),
        this._btnCancel.addTarget(this, this.handleButtonEvent, EventType.TAP),
        this._btnConfirm.init(),
        this._btnConfirm.addTarget(this, this.handleButtonEvent, EventType.TAP)
    }
    ,
    UTSeasonalCampaignPopupView.prototype.setTitle = function(e) {
        this.__titleText.textContent = e
    }
    ,
    UTSeasonalCampaignPopupView.prototype.setContent = function(e) {
        this.__contentText.textContent = e
    }
    ,
    UTSeasonalCampaignPopupView.prototype.setConfirmButtonLabel = function(e) {
        this._btnConfirm.setText(e)
    }
    ,
    UTSeasonalCampaignPopupView.prototype.setCancelButtonLabel = function(e) {
        this._btnCancel.setText(e)
    }
    ,
    UTSeasonalCampaignPopupView.prototype.setCancelButtonDisplay = function(e) {
        this._btnCancel.setDisplay(e)
    }
    ,
    UTSeasonalCampaignPopupView.prototype.handleButtonEvent = function(e, t, i) {
        t === EventType.TAP && (e === this._btnConfirm ? this._triggerActions(UTSeasonalCampaignPopupView.Event.CONFIRM) : e === this._btnCancel && this._triggerActions(UTSeasonalCampaignPopupView.Event.CANCEL))
    }
    ,
    UTSeasonalCampaignPopupView.Event = {
        CANCEL: "UTSeasonalCampaignPopupView.CANCEL",
        CONFIRM: "UTSeasonalCampaignPopupView.CONFIRM"
    },
    UTSeasonalCampaignPopupView
}(EATargetActionView));
UTSeasonalCampaignPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-scmp-info");
        var t = document.createElement("header");
        this.__titleText = document.createElement("h1"),
        t.appendChild(this.__titleText),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("bodySection"),
        this.__contentText = document.createElement("p"),
        i.appendChild(this.__contentText),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-button-group"),
        this._btnCancel = new UTGroupButtonControl,
        this._btnCancel.getRootElement().classList.add("negative"),
        o.appendChild(this._btnCancel.getRootElement()),
        this._btnConfirm = new UTGroupButtonControl,
        o.appendChild(this._btnConfirm.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSeasonalCampaignPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleText = null,
    this.__contentText = null,
    this._btnCancel.destroy(),
    this._btnConfirm.destroy()
}
,
UTSeasonalCampaignPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSeasonalCampaignPopupViewController = function(r) {
    function UTSeasonalCampaignPopupViewController(e) {
        var t = r.call(this) || this;
        return t.type = e,
        t
    }
    return __extends(UTSeasonalCampaignPopupViewController, r),
    UTSeasonalCampaignPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTSeasonalCampaignPopupView
    }
    ,
    UTSeasonalCampaignPopupViewController.prototype.viewDidAppear = function() {
        r.prototype.viewDidAppear.call(this);
        var e, t, i, o = services.Localization, n = this.getView();
        switch (this.type) {
        case "season-campaign":
            e = o.localize("scmp.popup.campaignExpired.title"),
            t = o.localize("scmp.popup.campaignExpired.message"),
            i = o.localize("scmp.popup.campaignExpired.button");
            break;
        case "season-rewards":
            e = o.localize("scmp.popup.claimCampaignExpired.title"),
            t = o.localize("scmp.popup.claimCampaignExpired.message"),
            i = o.localize("scmp.popup.claimCampaignExpired.button");
            break;
        case "group-rewards":
            e = o.localize("scmp.popup.claimGroupExpired.title"),
            t = o.localize("scmp.popup.claimGroupExpired.message"),
            i = o.localize("scmp.popup.claimGroupExpired.button")
        }
        n.setTitle(e),
        n.setContent(t),
        n.setConfirmButtonLabel(i),
        n.setCancelButtonLabel(o.localize("common.dialog.cancel")),
        n.addTarget(this, this.onOptionButtonSelected, UTSeasonalCampaignPopupView.Event.CONFIRM),
        n.addTarget(this, this.onOptionButtonSelected, UTSeasonalCampaignPopupView.Event.CANCEL)
    }
    ,
    UTSeasonalCampaignPopupViewController.prototype.viewWillDisappear = function() {
        r.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.onOptionButtonSelected, UTSeasonalCampaignPopupView.Event.CONFIRM),
        e.removeTarget(this, this.onOptionButtonSelected, UTSeasonalCampaignPopupView.Event.CANCEL)
    }
    ,
    UTSeasonalCampaignPopupViewController.prototype.onOptionButtonSelected = function(e, t, i) {
        this.onExit.notify(this.type, t)
    }
    ,
    UTSeasonalCampaignPopupViewController
}(BasePopupViewController)
  , UTRewardSelectionView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTRewardSelectionView(e) {
        var t = i.call(this) || this;
        return t.index = e,
        t
    }
    return __extends(UTRewardSelectionView, i),
    UTRewardSelectionView.prototype.init = function() {
        this.setInteractionState(!0)
    }
    ,
    UTRewardSelectionView.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.id = 0,
        this.rewards.forEach(function(e) {
            return e.dealloc()
        }),
        this.rewards = []
    }
    ,
    UTRewardSelectionView.prototype.setRewards = function(e) {
        this.setTitle(services.Localization.localize("rivals.rewardset.title", [this.index.toString()])),
        this.setDetailedContent(services.Localization.localize("rewardset.view-x-rewards", [e.rewards.length.toString()])),
        this.id = e.id;
        var t = e.rewards.slice().sort(function(e, t) {
            return JSUtils.sortCompare(e.isChampionQualificationPoints, t.isChampionQualificationPoints)
        });
        this.rewards = t.map(function(e) {
            var t = new UTRewardIconView;
            return t.init(),
            t.render(e),
            t
        }),
        this.setMainReward(t[0]),
        this.attachRewards()
    }
    ,
    UTRewardSelectionView.prototype.setTitle = function(e) {
        this.__titleLandscape.textContent = e,
        this.__titlePhone.textContent = e
    }
    ,
    UTRewardSelectionView.prototype.setDetailedContent = function(e) {
        this.__expandRewardBtn.textContent = e
    }
    ,
    UTRewardSelectionView.prototype.setMainDescription = function(e) {
        this.__mainDescription.textContent = e
    }
    ,
    UTRewardSelectionView.prototype.toggleRewardSelection = function(e) {
        this.toggleClass(enums.UIState.SELECTED, e)
    }
    ,
    UTRewardSelectionView.prototype.attachRewards = function() {
        var i = this;
        this.rewards.forEach(function(e, t) {
            0 < t && i.__rewardsList.appendChild(e.getRootElement())
        }),
        DOMKit.toggleDisplayStyle(this.__expandRewardBtn, 1 < this.rewards.length)
    }
    ,
    UTRewardSelectionView.prototype.setMainReward = function(e) {
        var t = services.Localization
          , i = UTLocalizationUtil.buildRewardString(e, t);
        if (DOMKit.addClass(this.__mainImage, GameRewardStyle.REWARD),
        e.isCoin)
            DOMKit.addClass(this.__mainImage, GameRewardStyle.COIN),
            this.setMainDescription(t.localizeNumber(e.value));
        else if (e.isPack) {
            DOMKit.addClass(this.__mainImage, GameRewardStyle.PACK_REWARD);
            var o = new UTPackGraphicView;
            o.init(),
            o.setPackBackground(e.assetId),
            o.setPromo(PurchaseDealType.REGULAR),
            this.__mainImage.appendChild(o.getRootElement()),
            this.setMainDescription(i)
        } else if (e.isItem && e.item) {
            if (e.item.isCoinBoost())
                DOMKit.addClass(this.__mainImage, GameRewardStyle.COIN_BOOST),
                this.setMainDescription(t.localizeNumber(e.value));
            else {
                DOMKit.addClass(this.__mainImage, GameRewardStyle.ITEM_REWARD);
                var n = isPhone() ? factories.ItemView.createSmallItem(e.item) : factories.ItemView.createLargeItem(e.item);
                n.init(),
                n.supportSecondaryViews = !1,
                n.render(e.item),
                this.__mainImage.appendChild(n.getRootElement())
            }
            this.setMainDescription(i)
        } else if (e.isChampionQualificationPoints) {
            DOMKit.addClass(this.__mainImage, GameRewardStyle.CHAMPION_POINTS);
            var r = t.localizeNumber(e.value)
              , s = t.localize("rivals.rewardset.weekendleaguepoints");
            this.setMainDescription(r + " " + s)
        }
    }
    ,
    UTRewardSelectionView.prototype._tapDetected = function(e) {
        i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP, {
            id: this.id
        })
    }
    ,
    UTRewardSelectionView
}(EATargetActionView));
UTRewardSelectionView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-reward-selection"),
        this.__titleLandscape = document.createElement("h1"),
        this.__titleLandscape.classList.add("selection-title-landscape"),
        e.appendChild(this.__titleLandscape),
        this.__mainImage = document.createElement("div"),
        this.__mainImage.classList.add("image"),
        e.appendChild(this.__mainImage);
        var t = document.createElement("div");
        t.classList.add("rewards-details"),
        this.__titlePhone = document.createElement("h1"),
        this.__titlePhone.classList.add("selection-title-phone"),
        t.appendChild(this.__titlePhone),
        this.__mainDescription = document.createElement("span"),
        this.__mainDescription.classList.add("main-description"),
        t.appendChild(this.__mainDescription),
        this.__rewardsList = document.createElement("ul"),
        this.__rewardsList.classList.add("rewards-list"),
        t.appendChild(this.__rewardsList),
        e.appendChild(t),
        this.__expandRewardBtn = document.createElement("div"),
        this.__expandRewardBtn.classList.add("ut-reward-selection--expand"),
        e.appendChild(this.__expandRewardBtn),
        this.__root = e,
        this._generated = !0
    }
}
,
UTRewardSelectionView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleLandscape = null,
    this.__mainImage = null,
    this.__titlePhone = null,
    this.__mainDescription = null,
    this.__rewardsList = null,
    this.__expandRewardBtn = null
}
,
UTRewardSelectionView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTRewardSelectionChoiceView = function(i) {
    function UTRewardSelectionChoiceView(e) {
        var o = i.call(this) || this;
        return o.rewardViews = new EAHashTable,
        e.forEach(function(e, t) {
            var i = new UTRewardSelectionView(t + 1);
            i.setRewards(e),
            o.rewardViews.set(e.id, i)
        }),
        o
    }
    return __extends(UTRewardSelectionChoiceView, i),
    UTRewardSelectionChoiceView.prototype.init = function() {
        var t = this;
        i.prototype.init.call(this),
        this.rewardViews.forEach(function(e) {
            e.init(),
            e.addTarget(t, t.onSelectionChanged, EventType.TAP)
        }, this),
        this.attachCategoryAwards(),
        this._actionBtn.init(),
        this._actionBtn.addTarget(this, this.onButtonTapped, EventType.TAP),
        this._actionBtn.setInteractionState(!1),
        this._exitBtn.init(),
        this._exitBtn.addTarget(this, this.onButtonTapped, EventType.TAP),
        this._exitBtn.setInteractionState(!0),
        this._backBtn.init(),
        this._backBtn.addTarget(this, this.onButtonTapped, EventType.TAP),
        this._backBtn.setInteractionState(!0),
        this.setInteractionState(!0)
    }
    ,
    UTRewardSelectionChoiceView.prototype.dealloc = function() {
        this.rewardViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.rewardViews.clear(),
        this.resetRewardsCarousel(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTRewardSelectionChoiceView.prototype.getActionBtn = function() {
        return this._actionBtn
    }
    ,
    UTRewardSelectionChoiceView.prototype.getBackBtn = function() {
        return this._backBtn
    }
    ,
    UTRewardSelectionChoiceView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTRewardSelectionChoiceView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTRewardSelectionChoiceView.prototype.setButtonText = function(e) {
        this._actionBtn.setText(e)
    }
    ,
    UTRewardSelectionChoiceView.prototype.clearSelectionClasses = function() {
        this.rewardViews.forEach(function(e) {
            return e.toggleRewardSelection(!1)
        })
    }
    ,
    UTRewardSelectionChoiceView.prototype.selectRewardSet = function(e) {
        var t = this.rewardViews.get(e);
        t && t.toggleRewardSelection(!0)
    }
    ,
    UTRewardSelectionChoiceView.prototype.expandRewardSet = function(e, t) {
        var o = this;
        this.addClass("ui-collapsable-expanded");
        var i = services.Localization.localize("rivals.rewardset.title", [(e + 1).toString()]);
        if (0 < t.rewards.length) {
            if (isPhone() ? (t.rewards.forEach(function(e, t) {
                if (0 !== t) {
                    var i = new UTRewardIconView;
                    i.init(),
                    i.render(e),
                    o.__rewardsList.appendChild(i.getRootElement())
                }
            }),
            1 < this.rewardViews.length ? this._rewardsCarousel.setMobileTitle(i) : this._rewardsCarousel.addClass("rewards-carousel--single-reward")) : 1 < this.rewardViews.length && this.setTitle(i),
            t.rewards[0]) {
                var n = isPhone() ? [t.rewards[0]] : t.rewards;
                this.setupRewardsCarousel(n)
            }
        } else
            DebugUtils.Assert(!1, "Unable to retrieve rewards from.")
    }
    ,
    UTRewardSelectionChoiceView.prototype.setupRewardsCarousel = function(e) {
        0 < e.length && (this._rewardsCarousel.setNumVisibleItems(4),
        this._rewardsCarousel.setupRewards(e))
    }
    ,
    UTRewardSelectionChoiceView.prototype.resetRewardsCarousel = function() {
        this._rewardsCarousel.reset()
    }
    ,
    UTRewardSelectionChoiceView.prototype.resetRewardList = function() {
        DOMKit.empty(this.__rewardsList)
    }
    ,
    UTRewardSelectionChoiceView.prototype.clearExpandedClasses = function() {
        this.removeClass("ui-collapsable-expanded")
    }
    ,
    UTRewardSelectionChoiceView.prototype.toggleFooter = function(e) {
        DOMKit.toggleDisplayStyle(this.__footer, e)
    }
    ,
    UTRewardSelectionChoiceView.prototype.attachCategoryAwards = function() {
        var t = this;
        this.rewardViews.forEach(function(e) {
            return t.__rewardTiles.appendChild(e.getRootElement())
        })
    }
    ,
    UTRewardSelectionChoiceView.prototype.onButtonTapped = function(e, t, i) {
        if (this.isInteractionEnabled()) {
            var o = {
                selectedId: this.selectedId
            };
            e === this._backBtn ? this._triggerActions(UTRewardSelectionChoiceView.Event.BACK, o) : e === this._exitBtn ? this._triggerActions(UTRewardSelectionChoiceView.Event.EXIT, o) : e === this._actionBtn && (this._triggerActions(UTRewardSelectionChoiceView.Event.CONFIRM, o),
            this._actionBtn.setInteractionState(!1))
        }
    }
    ,
    UTRewardSelectionChoiceView.prototype.onSelectionChanged = function(e, t, i) {
        this.selectedId = i.id,
        this._triggerActions(UTRewardSelectionChoiceView.Event.OPTION_SELECT, i)
    }
    ,
    UTRewardSelectionChoiceView.Event = {
        BACK: "UTRewardSelectionChoiceView.Event.BACK",
        EXIT: "UTRewardSelectionChoiceView.Event.EXIT",
        CONFIRM: "UTRewardSelectionChoiceView.Event.CONFIRM",
        OPTION_SELECT: "UTRewardSelectionChoiceView.Event.OPTION_SELECT"
    },
    UTRewardSelectionChoiceView
}(EATargetActionView);
UTRewardSelectionChoiceView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-reward-selection-modal");
        var t = document.createElement("header");
        t.classList.add("ut-reward-selection-modal-header"),
        this._backBtn = new UTImageButtonControl,
        this._backBtn.getRootElement().classList.add("back-btn"),
        t.appendChild(this._backBtn.getRootElement()),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("reward-selector-title"),
        t.appendChild(this.__title),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t),
        this.__rewardTiles = document.createElement("div"),
        this.__rewardTiles.classList.add("ut-reward-selection-modal-content"),
        this.__expandedReward = document.createElement("div"),
        this.__expandedReward.classList.add("ut-reward-selection-detail"),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-reward-selection-description"),
        this.__expandedReward.appendChild(this.__description);
        var i = document.createElement("section");
        i.classList.add("rewards-container"),
        this._rewardsCarousel = new UTRewardsCarouselView,
        i.appendChild(this._rewardsCarousel.getRootElement()),
        this.__rewardsList = document.createElement("ul"),
        this.__rewardsList.classList.add("rewards-list"),
        i.appendChild(this.__rewardsList),
        this.__expandedReward.appendChild(i),
        this.__rewardTiles.appendChild(this.__expandedReward),
        e.appendChild(this.__rewardTiles),
        this.__footer = document.createElement("footer"),
        this._actionBtn = new UTStandardButtonControl,
        this._actionBtn.getRootElement().classList.add("call-to-action"),
        this.__footer.appendChild(this._actionBtn.getRootElement()),
        e.appendChild(this.__footer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTRewardSelectionChoiceView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._backBtn.destroy(),
    this.__title = null,
    this._exitBtn.destroy(),
    this.__rewardTiles = null,
    this.__expandedReward = null,
    this.__description = null,
    this._rewardsCarousel.destroy(),
    this.__rewardsList = null,
    this.__footer = null,
    this._actionBtn.destroy()
}
,
UTRewardSelectionChoiceView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTRewardSelectionChoiceViewController = function(i) {
    function UTRewardSelectionChoiceViewController(e) {
        var t = i.call(this) || this;
        return t.claimable = !0,
        t.rewardSets = e,
        t.selectedRewardId = -1,
        t.titleText = "",
        t.descriptionText = "",
        t
    }
    return __extends(UTRewardSelectionChoiceViewController, i),
    UTRewardSelectionChoiceViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.getView().setButtonText(services.Localization.localize("common.dialog.confirm"))
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.addTarget(this, this.onBackSelected, UTRewardSelectionChoiceView.Event.BACK),
        e.addTarget(this, this.onExitSelected, UTRewardSelectionChoiceView.Event.EXIT),
        e.addTarget(this, this.onConfirmSelected, UTRewardSelectionChoiceView.Event.CONFIRM),
        e.addTarget(this, this.onSelectionViewChanged, UTRewardSelectionChoiceView.Event.OPTION_SELECT),
        1 === this.rewardSets.length && (this.expandFirstReward(),
        e.getBackBtn().hide(),
        e.getActionBtn().setInteractionState(this.claimable && 0 <= this.selectedRewardId))
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.removeTarget(this, this.onBackSelected, UTRewardSelectionChoiceView.Event.BACK),
        e.removeTarget(this, this.onExitSelected, UTRewardSelectionChoiceView.Event.EXIT),
        e.removeTarget(this, this.onConfirmSelected, UTRewardSelectionChoiceView.Event.CONFIRM),
        e.removeTarget(this, this.onSelectionViewChanged, UTRewardSelectionChoiceView.Event.OPTION_SELECT)
    }
    ,
    UTRewardSelectionChoiceViewController.prototype._getViewInstanceFromData = function() {
        return new UTRewardSelectionChoiceView(this.rewardSets)
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.setTitleText = function(e) {
        this.titleText = e,
        this.getView().setTitle(this.titleText)
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.setDescriptionText = function(e) {
        this.descriptionText = e,
        this.getView().setDescription(this.descriptionText)
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.setClaimableState = function(e) {
        this.claimable = e,
        this.getView().toggleFooter(e)
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.expandFirstReward = function() {
        this.selectedRewardId = this.rewardSets[0].id,
        this.getView().expandRewardSet(this.selectedRewardId, this.rewardSets[0])
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.onConfirmSelected = function(e, t, i) {
        this.isViewDisplayed() && this.closePopup()
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.onExitSelected = function(e, t, i) {
        this.isViewDisplayed() && this.closePopup()
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.onBackSelected = function(e, t, i) {
        e.setTitle(this.titleText),
        e.resetRewardsCarousel(),
        e.resetRewardList(),
        e.clearExpandedClasses(),
        e.getActionBtn().setInteractionState(this.claimable && 0 <= this.selectedRewardId)
    }
    ,
    UTRewardSelectionChoiceViewController.prototype.onSelectionViewChanged = function(e, t, i) {
        var o = this;
        this.selectedRewardId = i.id,
        e.clearSelectionClasses(),
        this.claimable && e.selectRewardSet(this.selectedRewardId);
        var n = this.rewardSets.find(function(e) {
            return e.id === o.selectedRewardId
        });
        if (n) {
            var r = this.rewardSets.indexOf(n);
            0 < (null == n ? void 0 : n.rewards.length) && -1 < r && e.expandRewardSet(r, n),
            e.getActionBtn().setInteractionState(this.claimable && 0 <= r)
        } else
            DebugUtils.Assert(!1, "Unable to retrieve rewardSet")
    }
    ,
    UTRewardSelectionChoiceViewController
}(BasePopupViewController)
  , UTObjectivesViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTObjectivesViewModel(e) {
        var t = i.call(this) || this;
        return t.campaign = null,
        t.categories = [],
        t.currentCategoryId = UTObjectivesViewModel.TabId.SEASON,
        t.currentGroup = null,
        t.filterBy = ObjectiveFilterOption.NONE,
        t.metaGroups = [],
        t.objectiveService = e,
        t.selectedLevel = null,
        t.sortBy = ObjectiveSortOption.NONE,
        t
    }
    return __extends(UTObjectivesViewModel, i),
    UTObjectivesViewModel.prototype.resetFcasContent = function() {
        this.objectiveService.resetFcasContent()
    }
    ,
    UTObjectivesViewModel.prototype.setSelectedLevelById = function(e, t) {
        var i, o, n = t ? null === (i = this.campaign) || void 0 === i ? void 0 : i.getPremiumLevelById(e) : null === (o = this.campaign) || void 0 === o ? void 0 : o.getLevelById(e);
        this.selectedLevel = null != n ? n : null
    }
    ,
    UTObjectivesViewModel.prototype.resetSelectedLevel = function() {
        this.selectedLevel = null
    }
    ,
    UTObjectivesViewModel.prototype.getCurrentCategoryId = function() {
        return this.currentCategoryId
    }
    ,
    UTObjectivesViewModel.prototype.setCurrentCategoryId = function(e) {
        this.currentCategoryId = e
    }
    ,
    UTObjectivesViewModel.prototype.getMetaGroups = function() {
        var i = this;
        return this.metaGroups.sort(function(e, t) {
            return i.sortMetaGroups(e, t)
        })
    }
    ,
    UTObjectivesViewModel.prototype.getMetaGroupsClaimableRewardCount = function() {
        var t = 0;
        return this.metaGroups.forEach(function(e) {
            e.isClaimable() && t++,
            t += e.objectivesReadyToRedeem
        }),
        t
    }
    ,
    UTObjectivesViewModel.prototype.getCurrentCategory = function() {
        var t = this;
        if (0 === this.categories.length)
            return DebugUtils.Assert(!1, "Expected categories to have been already retrieved."),
            null;
        var e = JSUtils.find(this.categories, function(e) {
            return t.currentCategoryId === e.id
        });
        return DebugUtils.Assert(JSUtils.isValid(e), "Category " + this.currentCategoryId + " wasn't found."),
        e
    }
    ,
    UTObjectivesViewModel.prototype.sortObjectiveGroupsByClaimableState = function(e) {
        e.sort(function(e, t) {
            return Number(t.isAnyObjectiveClaimable()) - Number(e.isAnyObjectiveClaimable())
        })
    }
    ,
    UTObjectivesViewModel.prototype.getCurrentCategoryGroups = function() {
        var i = this
          , o = this.getCurrentCategory();
        if (o) {
            var e = o.getGroups();
            return this.filterBy === ObjectiveFilterOption.LOCKED ? e = o.getGroups().filter(function(e) {
                return !(o.isGroupLockedBehindGroups(e.compositeId) || e.isLockedBehindStartTime() || e.isComingSoon() || e.hasExpired())
            }) : this.filterBy === ObjectiveFilterOption.LOCKED_COMPLETE && (e = o.getGroups().filter(function(e) {
                return !(o.isGroupLockedBehindGroups(e.compositeId) || e.isLockedBehindStartTime() || e.isComingSoon() || e.isRedeemed() || e.hasExpired())
            })),
            e.sort(function(e, t) {
                return i.sortGroups(o, e, t)
            })
        }
        return []
    }
    ,
    UTObjectivesViewModel.prototype.getCampaign = function() {
        return this.campaign
    }
    ,
    UTObjectivesViewModel.prototype.getCategories = function() {
        return this.categories
    }
    ,
    UTObjectivesViewModel.prototype.getMilestonesCategory = function() {
        return JSUtils.find(this.categories, function(e) {
            return e.isMilestone() || e.isExpiringMilestone()
        })
    }
    ,
    UTObjectivesViewModel.prototype.getCategoryByGroup = function(t) {
        return JSUtils.find(this.categories, function(e) {
            return JSUtils.isValid(JSUtils.find(e.getGroups(), function(e) {
                return e === t
            }))
        })
    }
    ,
    UTObjectivesViewModel.prototype.getCurrentGroup = function() {
        return this.currentGroup
    }
    ,
    UTObjectivesViewModel.prototype.getCurrentGroupObjectives = function() {
        return this.currentGroup ? this.currentGroup.getObjectives().sort(this.sortObjectives.bind(this)) : []
    }
    ,
    UTObjectivesViewModel.prototype.getGroupByCompositeId = function(t) {
        return this.currentCategoryId === UTObjectivesViewModel.TabId.META ? this.getMetaGroups().find(function(e) {
            return e.compositeId == t
        }) : this.getCurrentCategoryGroups().find(function(e) {
            return e.compositeId === t
        })
    }
    ,
    UTObjectivesViewModel.prototype.getGroupsSortedObjectives = function(e) {
        return e.getObjectives().sort(this.sortObjectives.bind(this))
    }
    ,
    UTObjectivesViewModel.prototype.getMetaGroupsSortedObjectives = function(e) {
        return e.getObjectives().sort(this.sortObjectives.bind(this))
    }
    ,
    UTObjectivesViewModel.prototype.getCurrentGroupObjectiveById = function(e) {
        return this.currentGroup ? this.currentGroup.getObjectiveById(e) : null
    }
    ,
    UTObjectivesViewModel.prototype.hasUnclaimedGroupRewards = function() {
        return JSUtils.isValid(JSUtils.find(this.categories, function(e) {
            return e.hasUnclaimedGroupReward()
        }))
    }
    ,
    UTObjectivesViewModel.prototype.hasUnclaimedExpiredGroups = function() {
        return JSUtils.isValid(JSUtils.find(this.categories, function(e) {
            return e.hasUnclaimedExpiredGroup()
        }))
    }
    ,
    UTObjectivesViewModel.prototype.requestActiveCampaignDetails = function() {
        var i = this
          , e = this.objectiveService.requestCampaignDetails();
        return this._trackRequest(e, this.objectiveService.isFCCampaignCacheExpired(), function(e) {
            var t;
            i.campaign = JSUtils.isObject(e.data) ? e.data.campaign : null,
            i.campaign || i.currentCategoryId !== UTObjectivesViewModel.TabId.SEASON ? (null === (t = i.campaign) || void 0 === t ? void 0 : t.modified) && i.requestActiveCampaignProgress(i.campaign.id) : i.currentCategoryId = UTObjectivesViewModel.TabId.META
        }),
        e
    }
    ,
    UTObjectivesViewModel.prototype.requestActiveCampaignProgress = function(e) {
        var t = this
          , i = this.objectiveService.requestCampaignProgress(e);
        return this._trackRequest(i, !0, function(e) {
            t.campaign = JSUtils.isObject(e.data) ? e.data.campaign : null
        }),
        i
    }
    ,
    UTObjectivesViewModel.prototype.purchasePremiumPass = function(e) {
        var t = this
          , i = this.objectiveService.purchasePremiumPass(e);
        return this._trackRequest(i, !0, function(e) {
            t.campaign = e.data ? e.data.campaign : null
        }),
        i
    }
    ,
    UTObjectivesViewModel.prototype.requestMetaObjectiveGroups = function() {
        var i = this
          , e = this.objectiveService.requestMetaObjectiveGroups();
        return this._trackRequest(e, this.objectiveService.isFCCampaignCacheExpired() || 0 === this.metaGroups.length, function(e) {
            var t;
            t = e.success && e.data && !JSUtils.isString(e.data) ? e.data.metaGroups : [],
            i.metaGroups = t.sort(function(e, t) {
                return JSUtils.sortCompare(e.priority, t.priority)
            })
        }
        .bind(this)),
        e
    }
    ,
    UTObjectivesViewModel.prototype.requestCategories = function() {
        var i = this
          , e = this.objectiveService.requestCategories();
        return this._trackRequest(e, this.objectiveService.isUTObjectivesCacheExpired() || 0 === this.categories.length, function(e) {
            var t;
            t = e.success && JSUtils.isObject(e.response) ? e.response.categories : [],
            i.categories = t.sort(function(e, t) {
                return JSUtils.sortCompare(e.priority, t.priority)
            })
        }
        .bind(this)),
        e
    }
    ,
    UTObjectivesViewModel.prototype.requestGroupDetails = function(e, t) {
        var i = this.objectiveService.requestGroup(e, t);
        return this._trackRequest(i, !0),
        i
    }
    ,
    UTObjectivesViewModel.prototype.populateMetaRewards = function() {
        var e, t, i, o = null !== (t = null === (e = this.campaign) || void 0 === e ? void 0 : e.getUTItemRewards()) && void 0 !== t ? t : [], n = new EAHashTable;
        if (o.forEach(function(e) {
            n.set(e.id, e)
        }),
        this.metaGroups.forEach(function(e) {
            e.getUTItemRewards().forEach(function(e) {
                n.set(e.id, e)
            })
        }),
        0 < n.length)
            i = services.Objectives.populateMetaRewards(n),
            this._trackRequest(i, !0);
        else {
            i = new EAObservable;
            var r = new EAHttpResponseDTO;
            r.success = !0,
            r.status = HttpStatusCode.NOT_FOUND,
            i.notify(r)
        }
        return i
    }
    ,
    UTObjectivesViewModel.prototype.claimMetaUTRewards = function() {
        var e = this.objectiveService.claimMetaUTRewards();
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTObjectivesViewModel.prototype.claimLevelRewards = function(e, t) {
        function rGc(e, t) {
            e.unobserve(o)
        }
        var o = this
          , i = this.objectiveService.claimLevelReward(e, t).observe(this, function(e, t) {
            var i;
            e.unobserve(o),
            (null === (i = t.data) || void 0 === i ? void 0 : i.hasUTRewards) && o.objectiveService.claimMetaUTRewards().observe(o, rGc)
        });
        return this._trackRequest(i, !0),
        i
    }
    ,
    UTObjectivesViewModel.prototype.claimGroupRewards = function(e, t, i) {
        var o = i ? e.groupClaimAll(t) : e.claimGroupRewards(t);
        return this._trackRequest(o, !0),
        o
    }
    ,
    UTObjectivesViewModel.prototype.claimMetaGroupRewards = function(e) {
        function FGc(e, t) {
            e.unobserve(o)
        }
        var t, o = this, i = this.getCampaign();
        if (i)
            t = this.objectiveService.claimMetaGroupReward(i.id, e).observe(this, function(e, t) {
                var i;
                e.unobserve(o),
                (null === (i = t.data) || void 0 === i ? void 0 : i.hasUTRewards) && o.objectiveService.claimMetaUTRewards().observe(o, FGc)
            });
        else {
            t = new EAObservable;
            var n = new EAHttpResponseDTO;
            n.success = !0,
            n.status = HttpStatusCode.NOT_FOUND,
            t.notify(n)
        }
        return this._trackRequest(t, !0),
        t
    }
    ,
    UTObjectivesViewModel.prototype.claimMetaGroupTaskRewards = function(e, t) {
        function SGc(e, t) {
            e.unobserve(o)
        }
        var i, o = this, n = this.getCampaign();
        if (n)
            i = this.objectiveService.claimMetaGroupTaskReward(n.id, e, t).observe(this, function(e, t) {
                var i;
                e.unobserve(o),
                (null === (i = t.data) || void 0 === i ? void 0 : i.hasUTRewards) && o.objectiveService.claimMetaUTRewards().observe(o, SGc)
            });
        else {
            i = new EAObservable;
            var r = new EAHttpResponseDTO;
            r.success = !0,
            r.status = HttpStatusCode.NOT_FOUND,
            i.notify(r)
        }
        return this._trackRequest(i, !0),
        i
    }
    ,
    UTObjectivesViewModel.prototype.claimObjectiveRewards = function(e, t, i) {
        var o = e.claimObjectiveRewards(t, i);
        return this._trackRequest(o, !0),
        o
    }
    ,
    UTObjectivesViewModel.prototype.claimExpiredSeasonRewards = function() {
        var e = services.Objectives.claimExpiredRewards();
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTObjectivesViewModel.prototype.claimExpiredMilestoneRewards = function() {
        var e = services.Objectives.claimExpiredLearningRewards();
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTObjectivesViewModel.prototype.sortGroups = function(e, t, i) {
        if (this.sortBy === ObjectiveSortOption.EXPIRY)
            return t.endTime < i.endTime ? -1 : i.endTime < t.endTime ? 1 : 0;
        if (this.sortBy === ObjectiveSortOption.RECENT)
            return t.startTime > i.startTime ? -1 : i.startTime > t.startTime ? 1 : 0;
        if (!i.isClaimable() && t.isClaimable())
            return -1;
        if (!t.isClaimable() && i.isClaimable())
            return 1;
        if (!i.isCompleted() && t.isCompleted())
            return -1;
        if (!t.isCompleted() && i.isCompleted())
            return 1;
        if (!i.isInProgress() && t.isInProgress())
            return -1;
        if (!t.isInProgress() && i.isInProgress())
            return 1;
        if (!i.isNotStarted() && t.isNotStarted())
            return -1;
        if (!t.isNotStarted() && i.isNotStarted())
            return 1;
        if (i.isComingSoon() && !t.isComingSoon())
            return -1;
        if (t.isComingSoon() && !i.isComingSoon())
            return 1;
        var o = e.isGroupLockedBehindGroups(t.compositeId)
          , n = e.isGroupLockedBehindGroups(i.compositeId)
          , r = t.isLockedBehindStartTime()
          , s = i.isLockedBehindStartTime();
        return !n && !s || o || r ? !o && !r || n || s ? t.endTime < i.endTime ? -1 : i.endTime < t.endTime ? 1 : t.priority < i.priority ? -1 : i.priority < t.priority ? 1 : !i.isRedeemed() && t.isRedeemed() ? -1 : !t.isRedeemed() && i.isRedeemed() ? 1 : 0 : 1 : -1
    }
    ,
    UTObjectivesViewModel.prototype.sortObjectives = function(e, t) {
        if (!t.isClaimable() && e.isClaimable())
            return -1;
        if (!e.isClaimable() && t.isClaimable())
            return 1;
        if (!t.isInProgress() && e.isInProgress())
            return -1;
        if (!e.isInProgress() && t.isInProgress())
            return 1;
        if (!t.isNotStarted() && e.isNotStarted())
            return -1;
        if (!e.isNotStarted() && t.isNotStarted())
            return 1;
        if (e instanceof UTCampaignObjectiveEntity && t instanceof UTCampaignObjectiveEntity) {
            if (!t.hasRedirectLink() && e.hasRedirectLink())
                return -1;
            if (!e.hasRedirectLink() && t.hasRedirectLink())
                return 1
        }
        return !t.isRedeemed() && e.isRedeemed() ? -1 : !e.isRedeemed() && t.isRedeemed() ? 1 : e.priority < t.priority ? -1 : t.priority < e.priority ? 1 : 0
    }
    ,
    UTObjectivesViewModel.prototype.sortMetaGroups = function(e, t) {
        return this.sortBy === ObjectiveSortOption.EXPIRY ? e.endTime < t.endTime ? -1 : t.endTime < e.endTime ? 1 : 0 : this.sortBy === ObjectiveSortOption.RECENT ? e.startTime > t.startTime ? -1 : t.startTime > e.startTime ? 1 : 0 : !t.isClaimable() && e.isClaimable() ? -1 : !e.isClaimable() && t.isClaimable() ? 1 : !t.isCompleted() && e.isCompleted() ? -1 : !e.isCompleted() && t.isCompleted() ? 1 : !t.isInProgress() && e.isInProgress() ? -1 : !e.isInProgress() && t.isInProgress() ? 1 : !t.isNotStarted() && e.isNotStarted() ? -1 : !e.isNotStarted() && t.isNotStarted() ? 1 : t.isComingSoon() && !e.isComingSoon() ? -1 : e.isComingSoon() && !t.isComingSoon() ? 1 : e.endTime < t.endTime ? -1 : t.endTime < e.endTime ? 1 : e.priority < t.priority ? -1 : t.priority < e.priority ? 1 : !t.isRedeemed() && e.isRedeemed() ? -1 : !e.isRedeemed() && t.isRedeemed() ? 1 : 0
    }
    ,
    UTObjectivesViewModel.TabId = {
        SEASON: -2,
        META: -1
    },
    UTObjectivesViewModel
}(UTViewModel))
  , UTObjectivesHubView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTObjectivesHubView() {
        return e.call(this) || this
    }
    return __extends(UTObjectivesHubView, e),
    UTObjectivesHubView.prototype.init = function() {
        e.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTObjectivesHubView.prototype.dealloc = function() {
        this.objectiveSubview = null,
        e.prototype.dealloc.call(this)
    }
    ,
    UTObjectivesHubView.prototype.displaySubview = function(e) {
        this.objectiveSubview !== e && (this.dismissSubview(),
        this.objectiveSubview = e,
        this.addSubview(e, this.__subviewContainer),
        this.layoutSubviews())
    }
    ,
    UTObjectivesHubView.prototype.dismissSubview = function() {
        this.objectiveSubview && (this.objectiveSubview.removeFromSuperview(),
        this.objectiveSubview = null)
    }
    ,
    UTObjectivesHubView.prototype.setupNavigation = function(e) {
        var i = this;
        this._objectivesTM.clearTabs(),
        e.forEach(function(e, t) {
            i._objectivesTM.addTab(e.id, e.name),
            i._objectivesTM.toggleItemNotification(t, e.rewardCount)
        }),
        this._objectivesTM.layoutSubviews()
    }
    ,
    UTObjectivesHubView.prototype.updateNavigationNotifications = function(e) {
        var i = this;
        e.forEach(function(e, t) {
            i._objectivesTM.toggleItemNotification(t, e.rewardCount)
        }),
        this._objectivesTM.layoutSubviews()
    }
    ,
    UTObjectivesHubView.prototype.addNavigationTarget = function(e, t) {
        this._objectivesTM.addTarget(e, t, EventType.TAP)
    }
    ,
    UTObjectivesHubView.prototype.setTab = function(e) {
        this._objectivesTM.setActiveTab(e)
    }
    ,
    UTObjectivesHubView
}(EATargetActionView));
UTObjectivesHubView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-objectives-hub"),
        this._objectivesTM = new EAFilterBarView,
        e.appendChild(this._objectivesTM.getRootElement()),
        this.__subviewContainer = document.createElement("div"),
        this.__subviewContainer.classList.add("ut-objectives-hub--subview"),
        e.appendChild(this.__subviewContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTObjectivesHubView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._objectivesTM.destroy(),
    this.__subviewContainer = null
}
,
UTObjectivesHubView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTObjectivesHubViewController = function(o) {
    function UTObjectivesHubViewController() {
        var e = o.call(this) || this;
        return e.intervalController = new EAIntervalController(1e4,e.handleEventTimer.bind(e)),
        e
    }
    return __extends(UTObjectivesHubViewController, o),
    UTObjectivesHubViewController.prototype.init = function() {
        this.initialized || (o.prototype.init.call(this),
        this.objectivesViewModel || (this.objectivesViewModel = new UTObjectivesViewModel(services.Objectives)),
        this.objectivesViewModel.init(),
        this.getView().addNavigationTarget(this, this.onTabSelected),
        getDefaultDispatcher().addObserver(AppNotification.OBJECTIVE_AVAILABLE_REWARD_COUNT_CHANGE, this, this.nObjectivesCompleted))
    }
    ,
    UTObjectivesHubViewController.prototype.initWithViewmodel = function(e) {
        this.initialized || (this.objectivesViewModel = e,
        this.init())
    }
    ,
    UTObjectivesHubViewController.prototype.dealloc = function() {
        this.objectivesViewModel && (this.objectivesViewModel.dealloc(),
        this.objectivesViewModel = null),
        this.categoryController && (this.categoryController.dealloc(),
        this.categoryController = null),
        this.seasonController && (this.seasonController.dealloc(),
        this.seasonController = null),
        this.displayedViewController = null,
        this.intervalController.dealloc(),
        getDefaultDispatcher().removeObserver(AppNotification.OBJECTIVE_AVAILABLE_REWARD_COUNT_CHANGE, this),
        o.prototype.dealloc.call(this)
    }
    ,
    UTObjectivesHubViewController.prototype._getViewInstanceFromData = function() {
        return new UTObjectivesHubView
    }
    ,
    UTObjectivesHubViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.objectives")
    }
    ,
    UTObjectivesHubViewController.prototype.viewWillAppear = function() {
        var e;
        o.prototype.viewWillAppear.call(this),
        null === (e = this.displayedViewController) || void 0 === e || e.viewWillAppear()
    }
    ,
    UTObjectivesHubViewController.prototype.viewDidAppear = function() {
        var e, t;
        o.prototype.viewDidAppear.call(this),
        null === (e = this.displayedViewController) || void 0 === e || e.viewDidAppear(),
        null === (t = this.getNavigationController()) || void 0 === t || t.setNavigationVisibility(!0, !0),
        this.loadData();
        var i = getDefaultDispatcher();
        i.addObserver(AppNotification.APP_PAUSE, this, this.nAppPaused),
        i.addObserver(AppNotification.APP_RESUME, this, this.nAppResumed),
        i.addObserver(AppNotification.OBJECTIVE_CAMPAIGN_REWARDS_CLAIM, this, this.onCampaignRewardsClaimed),
        TelemetryManager.trackPage(TelemetryManager.Sections.OBJECTIVES, "Hub")
    }
    ,
    UTObjectivesHubViewController.prototype.viewWillDisappear = function() {
        var e;
        this.intervalController.stop();
        var t = getDefaultDispatcher();
        t.removeObserver(AppNotification.APP_PAUSE, this),
        t.removeObserver(AppNotification.APP_RESUME, this),
        t.removeObserver(AppNotification.OBJECTIVE_CAMPAIGN_REWARDS_CLAIM, this),
        null === (e = this.displayedViewController) || void 0 === e || e.viewWillDisappear(),
        o.prototype.viewWillDisappear.call(this)
    }
    ,
    UTObjectivesHubViewController.prototype.viewDidDisappear = function() {
        var e;
        o.prototype.viewDidDisappear.call(this),
        null === (e = this.displayedViewController) || void 0 === e || e.viewDidDisappear()
    }
    ,
    UTObjectivesHubViewController.prototype.loadData = function() {
        function lIc(e, t) {
            var i;
            if (e.unobserve(s),
            t.success) {
                s.setupFilterTabs(),
                s.renderCurrentFilter(),
                s.updateSelectedFilter();
                var o = services.Objectives;
                if (o.isUtasSpCapReached() || o.isFcSpCapReached()) {
                    var n = o.isUtasSpCapReached()
                      , r = o.getFcSpCapType();
                    s.renderSpCapPopup(n, n ? FcasCapType.NOT_SET : r)
                }
                s.intervalController.start()
            } else
                services.Notification.queue([services.Localization.localize("notification.scmp.categories.loadFailed"), UINotificationType.NEGATIVE]),
                null === (i = s.getNavigationController()) || void 0 === i || i.popViewController()
        }
        function mIc(e, t) {
            var i, o;
            e.unobserve(s),
            t.success ? null === (o = s.objectivesViewModel) || void 0 === o || o.requestCategories().observe(s, lIc) : (services.Notification.queue([services.Localization.localize("notification.meta.rewards.failToProcess"), UINotificationType.NEGATIVE]),
            null === (i = s.getNavigationController()) || void 0 === i || i.popViewController())
        }
        function nIc(e, t) {
            var i;
            e.unobserve(s),
            t.success || services.Notification.queue([services.Localization.localize("notification.meta.groups.loadFailed"), UINotificationType.NEGATIVE]),
            null === (i = s.objectivesViewModel) || void 0 === i || i.populateMetaRewards().observe(s, mIc)
        }
        var e, s = this;
        this.objectivesViewModel ? this.objectivesViewModel.requestActiveCampaignDetails().observe(this, function(e, t) {
            var i, o;
            e.unobserve(s),
            t.success ? null === (i = s.objectivesViewModel) || void 0 === i || i.requestMetaObjectiveGroups().observe(s, nIc) : (services.Notification.queue([services.Localization.localize("notification.meta.campaign.loadFailed"), UINotificationType.NEGATIVE]),
            null === (o = s.objectivesViewModel) || void 0 === o || o.requestCategories().observe(s, lIc))
        }) : null === (e = this.getNavigationController()) || void 0 === e || e.popToRootViewController()
    }
    ,
    UTObjectivesHubViewController.prototype.redirectToVMCategory = function() {
        this.objectivesViewModel && (this.updateSelectedFilter(),
        this.renderCurrentFilter())
    }
    ,
    UTObjectivesHubViewController.prototype.updateSelectedFilter = function() {
        this.objectivesViewModel && this.getView().setTab(this.objectivesViewModel.currentCategoryId)
    }
    ,
    UTObjectivesHubViewController.prototype.setupFilterTabs = function() {
        function HIc() {
            var e = services.Localization
              , t = new EADialogViewController({
                dialogOptions: [{
                    labelEnum: enums.UIDialogOptions.OK
                }],
                message: e.localize("objectives.hub.no-content.description"),
                title: e.localize("objectives.hub.no-content.title")
            });
            t.init(),
            t.modalDisplayDimensions.width = "380px",
            t.onExit.observe(o, function(e, t) {
                e.unobserve(o);
                var i = o.getNavigationController();
                i && i.popViewController()
            }),
            gPopupClickShield.setActivePopup(t)
        }
        var o = this;
        if (this.objectivesViewModel || (DebugUtils.Assert(!!this.objectivesViewModel, "No VM available"),
        HIc()),
        this.objectivesViewModel) {
            var e = []
              , t = this.objectivesViewModel.getCampaign();
            t && e.push({
                id: UTObjectivesViewModel.TabId.SEASON,
                name: services.Localization.localize("scmp.categories.season"),
                rewardCount: t.getClaimableTierCount()
            }),
            e.push({
                id: UTObjectivesViewModel.TabId.META,
                name: services.Localization.localize("scmp.categories.meta"),
                rewardCount: this.objectivesViewModel.getMetaGroupsClaimableRewardCount()
            }),
            0 === (e = e.concat(this.objectivesViewModel.getCategories().map(function(e) {
                return {
                    id: e.id,
                    name: e.name,
                    rewardCount: e.countNumberOfUnclaimedRewards()
                }
            }))).length && HIc(),
            this.getView().setupNavigation(e)
        }
    }
    ,
    UTObjectivesHubViewController.prototype.nObjectivesCompleted = function(e, t, i) {
        if (this.objectivesViewModel) {
            var o = []
              , n = this.objectivesViewModel.getCampaign();
            n && o.push({
                id: UTObjectivesViewModel.TabId.SEASON,
                rewardCount: n.getClaimableTierCount()
            }),
            o.push({
                id: UTObjectivesViewModel.TabId.META,
                rewardCount: this.objectivesViewModel.getMetaGroupsClaimableRewardCount()
            }),
            o = o.concat(this.objectivesViewModel.getCategories().map(function(e) {
                return {
                    id: e.id,
                    rewardCount: e.countNumberOfUnclaimedRewards()
                }
            })),
            this.getView().updateNavigationNotifications(o)
        }
    }
    ,
    UTObjectivesHubViewController.prototype.displayChildViewController = function(e) {
        e !== this.displayedViewController && (this.dismissDisplayedViewController(),
        e.viewWillAppear(),
        this.getView().displaySubview(e.getView()),
        e.viewDidAppear(),
        this.displayedViewController = e)
    }
    ,
    UTObjectivesHubViewController.prototype.dismissDisplayedViewController = function() {
        this.displayedViewController && (this.displayedViewController.viewWillDisappear(),
        this.getView().dismissSubview(),
        this.displayedViewController.viewDidDisappear(),
        this.displayedViewController = null)
    }
    ,
    UTObjectivesHubViewController.prototype.displayRewardClaimScreen = function(e) {
        DebugUtils.Assert(JSUtils.isValid(this.objectivesViewModel), "Missing objectives view model. Unable to display reward claim screen."),
        this.objectivesViewModel && (this.seasonController && this.seasonController.dealloc(),
        this.seasonController = new UTClaimCampaignRewardsViewController({
            objectivesViewModel: this.objectivesViewModel
        }),
        this.seasonController.init(),
        this.addChildViewController(this.seasonController),
        this.displayChildViewController(this.seasonController))
    }
    ,
    UTObjectivesHubViewController.prototype.displayNoCampaignScreen = function() {
        this.seasonController && this.seasonController.dealloc(),
        this.seasonController = new UTNoCampaignViewController,
        this.seasonController.init(),
        this.addChildViewController(this.seasonController),
        this.displayChildViewController(this.seasonController)
    }
    ,
    UTObjectivesHubViewController.prototype.displaySeasonCampaign = function() {
        if (!services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.META_FCAS_ENABLED))
            return this.displayObjectiveCategory();
        if (DebugUtils.Assert(JSUtils.isValid(this.objectivesViewModel), "Missing objectives view model. Unable to display season campaign."),
        this.objectivesViewModel) {
            var e = this.objectivesViewModel.getCampaign();
            e && e.hasEnded() ? e.hasExpiredCampaignUnclaimedReward() ? this.displayRewardClaimScreen(e) : this.displayNoCampaignScreen() : (this.seasonController || (this.seasonController = new FCObjectiveSeasonViewController(this.objectivesViewModel),
            this.seasonController.init(),
            this.addChildViewController(this.seasonController)),
            this.displayChildViewController(this.seasonController))
        }
    }
    ,
    UTObjectivesHubViewController.prototype.displayObjectiveCategory = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.objectivesViewModel), "Missing objectives view model. Unable to display objectives."),
        this.objectivesViewModel) {
            if (this.objectivesViewModel.currentCategoryId === UTObjectivesViewModel.TabId.SEASON) {
                var e = this.objectivesViewModel.getCategories()[0];
                e && (this.objectivesViewModel.currentCategoryId = e.id)
            }
            this.categoryController || (this.categoryController = new UTObjectiveCategoryViewController(this.objectivesViewModel),
            this.categoryController.init(),
            this.addChildViewController(this.categoryController)),
            this.categoryController === this.displayedViewController ? this.categoryController.refreshView() : this.displayChildViewController(this.categoryController)
        }
    }
    ,
    UTObjectivesHubViewController.prototype.displayMetaObjectives = function() {
        DebugUtils.Assert(JSUtils.isValid(this.objectivesViewModel), "Missing objectives view model. Unable to display objectives."),
        this.objectivesViewModel && (this.metaController || (this.metaController = new FCMetaObjectivesViewController(this.objectivesViewModel),
        this.metaController.init(),
        this.addChildViewController(this.metaController)),
        this.metaController === this.displayedViewController ? this.metaController.refreshView() : this.displayChildViewController(this.metaController))
    }
    ,
    UTObjectivesHubViewController.prototype.renderCurrentFilter = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.objectivesViewModel), "Missing objectives view model. Cannot change filter."),
        this.objectivesViewModel) {
            var e = this.objectivesViewModel.currentCategoryId;
            e === UTObjectivesViewModel.TabId.SEASON ? this.displaySeasonCampaign() : e === UTObjectivesViewModel.TabId.META ? this.displayMetaObjectives() : this.displayObjectiveCategory()
        }
    }
    ,
    UTObjectivesHubViewController.prototype.seasonCampaignUpdate = function() {
        var e, t, i = null === (e = this.objectivesViewModel) || void 0 === e ? void 0 : e.getCampaign();
        if (this.objectivesViewModel && i && i.hasEnded() && (i.hasNextCampaignStarted() || i.isLastCampaign())) {
            this.intervalController.stop();
            var o = i.hasExpiredCampaignUnclaimedReward() || null !== (t = this.objectivesViewModel.hasUnclaimedGroupRewards()) && void 0 !== t && t
              , n = new UTSeasonalCampaignPopupViewController(o ? "season-rewards" : "season-campaign");
            n.onExit.observe(this, this.onSCMPInfoPopupClosed),
            n.getView().setCancelButtonDisplay(!1),
            gPopupClickShield.setActivePopup(n)
        }
    }
    ,
    UTObjectivesHubViewController.prototype.renderSpCapPopup = function(e, t) {
        var i = new UTSPCapPopupViewController(e,t);
        i.init(),
        gPopupClickShield.setActivePopup(i)
    }
    ,
    UTObjectivesHubViewController.prototype.handleEventTimer = function() {
        this.seasonCampaignUpdate()
    }
    ,
    UTObjectivesHubViewController.prototype.onSCMPInfoPopupClosed = function(e, t, i) {
        e.unobserve(this),
        services.Objectives.reset(),
        i === UTSeasonalCampaignPopupView.Event.CONFIRM && (this.objectivesViewModel ? (this.objectivesViewModel.currentCategoryId = UTObjectivesViewModel.TabId.SEASON,
        this.loadData()) : getAppMain().getRootViewController().setGameViewTab(UTGameTabBarController.TabTag.HOME))
    }
    ,
    UTObjectivesHubViewController.prototype.onTabSelected = function(e, t, i) {
        this.objectivesViewModel && i.id !== this.objectivesViewModel.currentCategoryId && (this.objectivesViewModel.currentCategoryId = i.id,
        this.renderCurrentFilter())
    }
    ,
    UTObjectivesHubViewController.prototype.onCampaignRewardsClaimed = function(e, t, i) {
        var o;
        null === (o = this.objectivesViewModel) || void 0 === o || o.stopTrackingRequests(),
        this.displayedViewController && (this.displayedViewController = null),
        this.loadData()
    }
    ,
    UTObjectivesHubViewController.prototype.nAppPaused = function(e, t, i) {
        this.intervalController.stop()
    }
    ,
    UTObjectivesHubViewController.prototype.nAppResumed = function(e, t, i) {
        this.intervalController.start()
    }
    ,
    UTObjectivesHubViewController
}(EAViewController);
services.URL.registerDeepLinkID(DeepLinkSection.OBJECTIVES, function(e) {
    var t = getAppMain().getRootViewController();
    if (t.setGameViewTab(UTGameTabBarController.TabTag.HOME),
    services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.OBJECTIVES_ENABLED)) {
        var i = t.getPresentedViewController();
        if (i instanceof UTTabBarController) {
            var o = i.getCurrentViewController();
            if (o instanceof UTNavigationController) {
                var n = new UTObjectivesHubViewController
                  , r = new UTObjectivesViewModel(services.Objectives);
                0 < e.length && (r.currentCategoryId = Number(e[0])),
                n.initWithViewmodel(r),
                o.pushViewController(n)
            }
        }
    }
});
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadBuilderViewModel = function(t) {
    function UTSquadBuilderViewModel() {
        var e = t.call(this) || this;
        return e.preferredSubPositions = [PlayerPosition.GK, ZONE_DEFENDER_VALUE, ZONE_DEFENDER_VALUE, ZONE_MIDFIELDER_VALUE, ZONE_MIDFIELDER_VALUE, ZONE_ATTACKER_VALUE, ZONE_ATTACKER_VALUE],
        e.preferredResPositions = [ZONE_DEFENDER_VALUE, ZONE_DEFENDER_VALUE, ZONE_MIDFIELDER_VALUE, ZONE_MIDFIELDER_VALUE, ZONE_ATTACKER_VALUE],
        e
    }
    return __extends(UTSquadBuilderViewModel, t),
    UTSquadBuilderViewModel.prototype.containsVariationOfCard = function(e, t) {
        for (var i = 0; i < t.length; i++)
            if (t[i].compareResourceTo(e))
                return !0;
        return !1
    }
    ,
    UTSquadBuilderViewModel.prototype.filterDuplicates = function(e, r) {
        var s = this;
        return e.reduce(function(e, t) {
            var i, o = s.containsVariationOfCard(t, e), n = null !== (i = null == r ? void 0 : r.containsVariationOfCard(t)) && void 0 !== i && i;
            return o || n || e.push(t),
            e
        }, [])
    }
    ,
    UTSquadBuilderViewModel.prototype.findPartialFitForPos = function(e, t) {
        var i = -1;
        switch (e) {
        case PlayerPosition.ST:
            i = this.findBestFitByPosition(PlayerPosition.CF, t);
            break;
        case PlayerPosition.CF:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.ST, t)) && (i = this.findBestFitByPosition(PlayerPosition.CAM, t));
            break;
        case PlayerPosition.CAM:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.CM, t)) && (i = this.findBestFitByPosition(PlayerPosition.CF, t));
            break;
        case PlayerPosition.CM:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.CAM, t)) && (i = this.findBestFitByPosition(PlayerPosition.CDM, t));
            break;
        case PlayerPosition.CDM:
            i = this.findBestFitByPosition(PlayerPosition.CM, t);
            break;
        case PlayerPosition.LM:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.LF, t)) && (i = this.findBestFitByPosition(PlayerPosition.LW, t));
            break;
        case PlayerPosition.LF:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.LW, t)) && (i = this.findBestFitByPosition(PlayerPosition.LM, t));
            break;
        case PlayerPosition.LW:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.LF, t)) && (i = this.findBestFitByPosition(PlayerPosition.LM, t));
            break;
        case PlayerPosition.RM:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.RF, t)) && (i = this.findBestFitByPosition(PlayerPosition.RW, t));
            break;
        case PlayerPosition.RF:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.RW, t)) && (i = this.findBestFitByPosition(PlayerPosition.RM, t));
            break;
        case PlayerPosition.RW:
            -1 === (i = this.findBestFitByPosition(PlayerPosition.RF, t)) && (i = this.findBestFitByPosition(PlayerPosition.RM, t));
            break;
        case PlayerPosition.LB:
            i = this.findBestFitByPosition(PlayerPosition.LWB, t);
            break;
        case PlayerPosition.LWB:
            i = this.findBestFitByPosition(PlayerPosition.LB, t);
            break;
        case PlayerPosition.RB:
            i = this.findBestFitByPosition(PlayerPosition.RWB, t);
            break;
        case PlayerPosition.RWB:
            i = this.findBestFitByPosition(PlayerPosition.RB, t)
        }
        return i
    }
    ,
    UTSquadBuilderViewModel.prototype.findBestFitByPosition = function(e, t) {
        var i = t.length;
        if (0 === i)
            return -1;
        for (var o = 0; o < i; o++) {
            var n = t[o];
            if (e === ZONE_DEFENDER_VALUE && n.prefersDefensePosition() || e === ZONE_MIDFIELDER_VALUE && n.prefersMidfieldPosition() || e === ZONE_ATTACKER_VALUE && n.prefersAttackerPosition() || n.possiblePositions.includes(e))
                return o
        }
        return -1
    }
    ,
    UTSquadBuilderViewModel.prototype.getBestPlayerForPos = function(e, t) {
        var i = this.findBestFitByPosition(e, t);
        return -1 === i && (i = this.findPartialFitForPos(e, t)),
        0 <= i && t.splice(i, 1)[0] || null
    }
    ,
    UTSquadBuilderViewModel.prototype.generatePlayerCollection = function(e, o, n, r) {
        var s = this;
        return e.map(function(e, t) {
            var i = r ? r.getSlot(t) : null;
            return i && (i.isValid() || i.isBrick()) ? i.item : n ? o.shift() || null : s.getBestPlayerForPos(e, o)
        })
    }
    ,
    UTSquadBuilderViewModel.prototype.buildSquad = function(e, t, i, o) {
        var n = repositories.Squad.getFormation(e);
        if (DebugUtils.Assert(JSUtils.isValid(n), "Expected a valid formation."),
        DebugUtils.Assert(0 < t.length, "Expected a collection of players."),
        !n || 0 === t.length)
            return [];
        var r = n.generalPositions.concat(this.preferredSubPositions, this.preferredResPositions)
          , s = this.filterDuplicates(t, o);
        return this.generatePlayerCollection(r, s, i, o)
    }
    ,
    UTSquadBuilderViewModel
}(UTViewModel)
  , UTSquadBuilderView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadBuilderView() {
        var e = t.call(this) || this;
        return e.onFilterChange = new EAObservable,
        e.onSearchModeChange = new EAObservable,
        e
    }
    return __extends(UTSquadBuilderView, t),
    UTSquadBuilderView.prototype.init = function() {
        var e = services.Localization;
        this._btnReset.init(),
        this._btnReset.setText(e.localize("search.pagination.reset")),
        this._btnBuild.init(),
        this._btnBuild.setText(e.localize("button.build")),
        this._formationFilter = new UTSearchFilterControl,
        this._formationFilter.init(),
        this._formationFilter.setOptions(factories.DataProvider.getFormationDP()),
        this._formationFilter.setDefaultLabel(e.localize("search.pagination.formation")),
        this.setFormationFilterImage(this._formationFilter),
        this._formationFilter.addTarget(this, this.eFormationFilterChanged, EventType.CHANGE),
        this.__squadBuilderInfo.textContent = e.localize("squadbuilder.infoText"),
        this.__filterTitle.textContent = e.localize("search.sort.filterBy"),
        this._searchFilters.init(),
        this._searchFilters.addSubview(this._formationFilter),
        this._searchFilters.layoutSubviews(),
        this._searchFilters.togglePlayerNameRow(!1),
        this._searchFilters.onFilterChange.observe(this, this.eFilterChanged),
        this._searchFilters.onSearchModeChange.observe(this, this.onSearchModeChanged),
        this.__sortTitle.textContent = e.localize("search.sort.sortBy")
    }
    ,
    UTSquadBuilderView.prototype.dealloc = function() {
        this._formationFilter.removeTarget(this, this.eFormationFilterChanged, EventType.CHANGE),
        this._searchFilters.onFilterChange.unobserve(this),
        this._searchFilters.onSearchModeChange.unobserve(this),
        this.onFilterChange.dealloc(),
        this.onSearchModeChange.dealloc(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSquadBuilderView.prototype.setupSearchOptions = function(e, t, i, o, n) {
        var r = services.Localization;
        this._searchOptions.init(),
        this._searchOptions.addToggleCell(enums.UISortOptionType.CONCEPT, r.localize("squadbuilder.toggles.conceptSquad")),
        t && this._searchOptions.addToggleCell(enums.UISortOptionType.REPLACE, r.localize("squadbuilder.toggles.replacePlayersSquad")),
        e && this._searchOptions.addToggleCell(enums.UISortOptionType.UNTRADEABLE, r.localize("search.sort.header")),
        i && this._searchOptions.addToggleCell(enums.UISortOptionType.EXCLUDE_SQUAD, r.localize("search.sort.squadPlayers")),
        o && this._searchOptions.addToggleCell(enums.UISortOptionType.IGNORE_POSITION, r.localize("search.sort.ignorePosition")),
        n && this._searchOptions.addToggleCell(enums.UISortOptionType.ACADEMY, r.localize("search.sort.academy-only")),
        this._searchOptions.layoutSubviews(),
        this._sortDropDown.init(),
        this._sortDropDown.setOptions(factories.DataProvider.getSortTypeDP())
    }
    ,
    UTSquadBuilderView.prototype.setFilters = function(e, t) {
        this._searchFilters.setFilters(e, t)
    }
    ,
    UTSquadBuilderView.prototype.setFilterLock = function(e, t) {
        this._searchFilters.setFilterLock(e, t)
    }
    ,
    UTSquadBuilderView.prototype.toggleExcludeSquadSlider = function(e) {
        this._searchOptions.setCellInteractionState(enums.UISortOptionType.EXCLUDE_SQUAD, e),
        e || this._searchOptions.toggleById(enums.UISortOptionType.EXCLUDE_SQUAD, e)
    }
    ,
    UTSquadBuilderView.prototype.setPileFilter = function(e, t) {
        this._searchFilters.setPileFilter(e, t)
    }
    ,
    UTSquadBuilderView.prototype.setSearchTypeImage = function() {
        this._searchFilters.setPileFilterImage()
    }
    ,
    UTSquadBuilderView.prototype.toggleAcademyPlayers = function(e) {
        this._searchOptions.setCellInteractionState(enums.UISortOptionType.ACADEMY, e),
        e || this._searchOptions.toggleById(enums.UISortOptionType.ACADEMY, e)
    }
    ,
    UTSquadBuilderView.prototype.getFormationFilter = function() {
        return this._formationFilter
    }
    ,
    UTSquadBuilderView.prototype.getSortOptions = function() {
        return this._searchOptions
    }
    ,
    UTSquadBuilderView.prototype.getSortDropDown = function() {
        return this._sortDropDown
    }
    ,
    UTSquadBuilderView.prototype.getResetButton = function() {
        return this._btnReset
    }
    ,
    UTSquadBuilderView.prototype.getBuildButton = function() {
        return this._btnBuild
    }
    ,
    UTSquadBuilderView.prototype.toggleOvrRange = function(e, t) {
        this._searchFilters.toggleOvrRange(e, t)
    }
    ,
    UTSquadBuilderView.prototype.setFormationFilterImage = function(e) {
        e.image = AssetLocationUtils.getFilterImage(AssetLocationUtils.FILTER.FORMATION, e.id)
    }
    ,
    UTSquadBuilderView.prototype.eFormationFilterChanged = function(e, t) {
        this.setFormationFilterImage(e)
    }
    ,
    UTSquadBuilderView.prototype.onSearchModeChanged = function(e, t) {
        this.onSearchModeChange.notify(t)
    }
    ,
    UTSquadBuilderView.prototype.eFilterChanged = function(e, t, i, o) {
        this.onFilterChange.notify(t, i, o)
    }
    ,
    UTSquadBuilderView
}(EAView));
UTSquadBuilderView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-builder-view");
        var t = document.createElement("div");
        t.classList.add("ut-squad-builder-view--filters"),
        this.__squadBuilderInfo = document.createElement("p"),
        this.__squadBuilderInfo.classList.add("ut-squad-builder-view--info"),
        t.appendChild(this.__squadBuilderInfo),
        this.__sortContainer = document.createElement("div"),
        this.__sortContainer.classList.add("sort-filter-container"),
        this.__filterTitle = document.createElement("h4"),
        this.__sortContainer.appendChild(this.__filterTitle),
        this._searchOptions = new UTToggleControlGroupView,
        this.__sortContainer.appendChild(this._searchOptions.getRootElement()),
        this.__sortTitle = document.createElement("h4"),
        this.__sortContainer.appendChild(this.__sortTitle),
        this._sortDropDown = new UTDropDownControl,
        this.__sortContainer.appendChild(this._sortDropDown.getRootElement()),
        t.appendChild(this.__sortContainer),
        e.appendChild(t),
        this._searchFilters = new UTItemSearchView,
        e.appendChild(this._searchFilters.getRootElement());
        var i = document.createElement("div");
        i.classList.add("button-container"),
        this._btnReset = new UTStandardButtonControl,
        i.appendChild(this._btnReset.getRootElement()),
        this._btnBuild = new UTStandardButtonControl,
        this._btnBuild.getRootElement().classList.add("call-to-action"),
        i.appendChild(this._btnBuild.getRootElement()),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadBuilderView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__squadBuilderInfo = null,
    this.__sortContainer = null,
    this.__filterTitle = null,
    this._searchOptions.destroy(),
    this.__sortTitle = null,
    this._sortDropDown.destroy(),
    this._searchFilters.destroy(),
    this._btnReset.destroy(),
    this._btnBuild.destroy()
}
,
UTSquadBuilderView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var __spreadArrays = this && this.__spreadArrays || function() {
    for (var e = 0, t = 0, i = arguments.length; t < i; t++)
        e += arguments[t].length;
    var o = Array(e)
      , n = 0;
    for (t = 0; t < i; t++)
        for (var r = arguments[t], s = 0, a = r.length; s < a; s++,
        n++)
            o[n] = r[s];
    return o
}
  , UTSquadBuilderViewController = function(n) {
    function UTSquadBuilderViewController() {
        var e = n.call(this) || this;
        return e.squadBuilder = null,
        e.viewModel = null,
        e.formation = "",
        e.squad = null,
        e.challenge = null,
        e.useConceptPlayers = !1,
        e.replacePlayers = !1,
        e.ignorePosition = !1,
        e
    }
    return __extends(UTSquadBuilderViewController, n),
    UTSquadBuilderViewController.prototype.init = function() {
        if (!this.initialized) {
            n.prototype.init.call(this),
            this.squadBuilder = new UTSquadBuilderViewModel,
            this.viewModel = new UTItemSearchViewModel;
            var e = this.getView();
            e.getResetButton().addTarget(this, this.eResetSelected, EventType.TAP),
            e.getBuildButton().addTarget(this, this.eBuildSelected, EventType.TAP),
            e.getSortOptions().addTarget(this, this.eSortToggled, EventType.CHANGE),
            e.getSortDropDown().addTarget(this, this.eDropDownChanged, EventType.CHANGE),
            e.onFilterChange.observe(this, this.eFilterChanged),
            e.onSearchModeChange.observe(this, this.eSearchModeChanged);
            var t = !(this.challenge && !services.Configuration.getFeatureSetting(UTServerSettingsRepository.KEY.SBC_ALLOW_UNTRADEABLE))
              , i = !(!this.squad || this.squad.isSquadEmpty())
              , o = !(this.squad && this.squad.isActive());
            e.setupSearchOptions(t, i, o, JSUtils.isValid(this.challenge), !JSUtils.isValid(this.challenge)),
            e.getSortDropDown().setDefaultIndexById(SearchSortID.RATING_DESC, !0),
            this.challenge && (this.updateCriteriaFromChallenge(this.challenge),
            e.setPileFilter(factories.DataProvider.getSearchPileDPWithAny(this.hasStoragePileSearch()), ItemSearchFeature.ANY),
            this.viewModel.searchFeature = ItemSearchFeature.ANY),
            t || (this.viewModel.searchCriteria.untradeables = SearchUntradeables.EXCLUDE),
            this.updateOvrRangeVisibility(),
            this.viewModel.searchCriteria.count = 150,
            this.viewModel.searchCriteria.sortBy = SearchSortType.RATING
        }
    }
    ,
    UTSquadBuilderViewController.prototype.initWithSquad = function(e) {
        this.initialized || (DebugUtils.Assert(e instanceof UTSquadEntity, "Initialization expected a Squad entity."),
        this.squad = e,
        this.init())
    }
    ,
    UTSquadBuilderViewController.prototype.initWithChallenge = function(e) {
        this.initialized || (DebugUtils.Assert(e instanceof UTSBCChallengeEntity, "Initialization expected an SBC Challenge entity."),
        this.challenge = e,
        this.challenge && this.challenge.squad ? this.initWithSquad(this.challenge.squad) : this.init())
    }
    ,
    UTSquadBuilderViewController.prototype.dealloc = function() {
        if (this.hasLoaded) {
            var e = this.getView();
            e.getResetButton().removeTarget(this, this.eResetSelected, EventType.TAP),
            e.getBuildButton().removeTarget(this, this.eBuildSelected, EventType.TAP)
        }
        n.prototype.dealloc.call(this),
        this.formation = "",
        this.squad = null,
        this.challenge = null,
        this.viewModel = null,
        this.squadBuilder = null
    }
    ,
    UTSquadBuilderViewController.prototype._getViewInstanceFromData = function() {
        return new UTSquadBuilderView
    }
    ,
    UTSquadBuilderViewController.prototype._getTelemetryId = function() {
        return "Squad Builder"
    }
    ,
    UTSquadBuilderViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.squadbuilder")
    }
    ,
    UTSquadBuilderViewController.prototype.viewWillAppear = function() {
        var e;
        n.prototype.viewWillAppear.call(this),
        null === (e = this.getNavigationController()) || void 0 === e || e.setNavigationVisibility(!0, !0)
    }
    ,
    UTSquadBuilderViewController.prototype.viewDidAppear = function() {
        var e;
        n.prototype.viewDidAppear.call(this);
        var t = this.getView();
        t.setFilterLock(enums.UISearchFilters.POSITION, !0),
        t.setFilterLock(enums.UISearchFilters.PLAYSTYLE, !0),
        this.viewModel && t.setFilters(this.viewModel);
        var i = t.getFormationFilter();
        this.challenge && i.setDisplay(!1);
        var o = null === (e = this.squad) || void 0 === e ? void 0 : e.getFormation();
        o && i.setDefaultIndexById(o.id, !0)
    }
    ,
    UTSquadBuilderViewController.prototype.hasStoragePileSearch = function() {
        return services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.STORAGE_PILE_ENABLED) && this.isSbcSearch()
    }
    ,
    UTSquadBuilderViewController.prototype.isSbcSearch = function() {
        return JSUtils.isValid(this.challenge)
    }
    ,
    UTSquadBuilderViewController.prototype.updateCriteriaFromChallenge = function(e) {
        var n = this.viewModel;
        n && e.eligibilityRequirements.forEach(function(e) {
            var t = e.getFirstKey()
              , i = e.getFirstValue(t);
            switch (t) {
            case SBCEligibilityKey.CLUB_ID:
                n.defaultSearchCriteria.club = i,
                n.searchCriteria.club = i;
                break;
            case SBCEligibilityKey.LEAGUE_ID:
                n.defaultSearchCriteria.league = i,
                n.searchCriteria.league = i;
                break;
            case SBCEligibilityKey.NATION_ID:
                n.defaultSearchCriteria.nation = i,
                n.searchCriteria.nation = i;
                break;
            case SBCEligibilityKey.PLAYER_QUALITY:
                var o = SearchLevel.ANY;
                i === ItemRatingTier.BRONZE ? o = SearchLevel.BRONZE : i === ItemRatingTier.SILVER ? o = SearchLevel.SILVER : i === ItemRatingTier.GOLD && (o = SearchLevel.GOLD),
                n.defaultSearchCriteria.level = o,
                n.searchCriteria.level = o
            }
        }, this)
    }
    ,
    UTSquadBuilderViewController.prototype.eResetSelected = function(e, t, i) {
        var o;
        if (this.viewModel) {
            this.viewModel.resetSearch();
            var n = this.getView();
            if (n.setFilters(this.viewModel),
            !(null === (o = this.squad) || void 0 === o ? void 0 : o.isSBC())) {
                var r = n.getFormationFilter();
                r.setIndex(r.getDefaultIndex())
            }
        }
    }
    ,
    UTSquadBuilderViewController.prototype.eBuildSelected = function(e, t, i) {
        var o = this;
        if (this.viewModel) {
            var n = this.getView();
            if (this.formation = n.getFormationFilter().value,
            this.viewModel.searchCriteria.excludeTimeEvo = !0,
            this.useConceptPlayers)
                services.Item.searchConceptItems(this.viewModel.searchCriteria).observe(this, this.onConceptSearchComplete);
            else if (this.viewModel.searchFeature === ItemSearchFeature.STORAGE)
                services.Item.searchStorageItems(this.viewModel.searchCriteria).observe(this, this.onStorageSearchComplete);
            else if (this.viewModel.searchFeature === ItemSearchFeature.ANY) {
                function kMc() {
                    o.viewModel && services.Item.searchStorageItems(o.viewModel.searchCriteria).observe(o, function(e, t) {
                        if (e.unobserve(o),
                        t.success && JSUtils.isObject(t.response)) {
                            r = __spreadArrays(r, t.response.items),
                            s = t.response.endOfList;
                            var i = new UTHttpResponseDTO;
                            i.success = !0,
                            i.response = {
                                items: r,
                                endOfList: s
                            },
                            function(e) {
                                o.setAndBuildSquad(e)
                            }(i)
                        }
                    })
                }
                var r = []
                  , s = !1;
                o.viewModel && services.Club.search(o.viewModel.searchCriteria).observe(o, function(e, t) {
                    e.unobserve(o),
                    t.success && JSUtils.isObject(t.response) ? (r = __spreadArrays(r, t.response.items),
                    s = t.response.retrievedAll,
                    kMc()) : t.error && NetworkErrorManager.handleStatus(t.status)
                })
            } else
                services.Club.search(this.viewModel.searchCriteria).observe(this, this.onClubSearchComplete)
        }
    }
    ,
    UTSquadBuilderViewController.prototype.eFilterChanged = function(e, t, i, o) {
        this.viewModel && (this.viewModel.updateFromFilterChange(t, i, o),
        this.getView().setFilters(this.viewModel))
    }
    ,
    UTSquadBuilderViewController.prototype.eSortToggled = function(e, t, i) {
        var o = this
          , n = this.viewModel
          , r = this.getView();
        if (n)
            switch (i.id) {
            case enums.UISortOptionType.UNTRADEABLE:
                n.searchCriteria.untradeables = i.checked ? SearchUntradeables.ONLY : SearchUntradeables.DEFAULT;
                break;
            case enums.UISortOptionType.REPLACE:
                this.replacePlayers = i.checked;
                break;
            case enums.UISortOptionType.CONCEPT:
                this.useConceptPlayers = i.checked,
                r.toggleExcludeSquadSlider(!i.checked),
                r.toggleAcademyPlayers(!i.checked);
                break;
            case enums.UISortOptionType.EXCLUDE_SQUAD:
                i.checked ? n.requestActiveSquadDefIds().observe(this, function(e, t) {
                    e.unobserve(o),
                    t.data && (n.searchCriteria.excludeDefIds = t.data.defIds)
                }) : n.searchCriteria.excludeDefIds = [];
                break;
            case enums.UISortOptionType.IGNORE_POSITION:
                this.ignorePosition = i.checked
            }
    }
    ,
    UTSquadBuilderViewController.prototype.eSearchModeChanged = function(e, t) {
        var i;
        if (this.viewModel) {
            var o = null !== (i = JSUtils.enumFromStringValue(ItemSearchFeature, t)) && void 0 !== i ? i : ItemSearchFeature.ANY;
            this.viewModel.searchFeature = o,
            this.updateOvrRangeVisibility()
        }
    }
    ,
    UTSquadBuilderViewController.prototype.eDropDownChanged = function(e, t, i) {
        if (this.viewModel)
            switch (this.viewModel.searchCriteria.sort = e.value,
            e.id) {
            case SearchSortID.VALUE_DESC:
            case SearchSortID.VALUE_ASC:
                this.viewModel.searchCriteria.sortBy = SearchSortType.VALUE;
                break;
            case SearchSortID.RATING_DESC:
            case SearchSortID.RATING_ASC:
                this.viewModel.searchCriteria.sortBy = SearchSortType.RATING;
                break;
            case SearchSortID.RECENCY_DESC:
                this.viewModel.searchCriteria.sortBy = SearchSortType.RECENCY;
                break;
            default:
                DebugUtils.Assert(!1, "SquadBuilder :: Passed an invalid SearchSort Enums.")
            }
    }
    ,
    UTSquadBuilderViewController.prototype.onStorageSearchComplete = function(e, t) {
        e.unobserve(this),
        this.setAndBuildSquad(t)
    }
    ,
    UTSquadBuilderViewController.prototype.setAndBuildSquad = function(e) {
        var t;
        if (e.success && JSUtils.isObject(e.response)) {
            var i = e.response.items;
            (null === (t = this.squad) || void 0 === t ? void 0 : t.isSBC()) && (i = i.filter(function(e) {
                return !e.isLimitedUse()
            })),
            0 === i.length ? utils.PopupManager.showAlert(utils.PopupManager.Alerts.SQUAD_BUILDER_NO_RESULTS) : this.buildSquad(i)
        }
    }
    ,
    UTSquadBuilderViewController.prototype.onClubSearchComplete = function(e, t) {
        var i;
        if (e.unobserve(this),
        t.success && JSUtils.isObject(t.response)) {
            var o = t.response.items;
            (null === (i = this.squad) || void 0 === i ? void 0 : i.isSBC()) && (o = o.filter(function(e) {
                return !e.isLimitedUse()
            })),
            0 === o.length ? utils.PopupManager.showAlert(utils.PopupManager.Alerts.SQUAD_BUILDER_NO_RESULTS) : this.buildSquad(o)
        }
    }
    ,
    UTSquadBuilderViewController.prototype.onConceptSearchComplete = function(e, t) {
        var o = this;
        if (e.unobserve(this),
        JSUtils.isObject(t.response) && t.response.items) {
            var n = t.response.items;
            if (n && (!t.success || 0 === n.length))
                return void utils.PopupManager.showAlert(utils.PopupManager.Alerts.SQUAD_BUILDER_NO_RESULTS);
            var i = new UTSearchCriteriaDTO;
            i.type = SearchType.PLAYER,
            i.defId = n.map(function(e) {
                return e.id
            }),
            i.isExactSearch = !0,
            services.Club.search(i).observe(this, function(e, t) {
                if (e.unobserve(o),
                n) {
                    var i = t.response;
                    t.success && JSUtils.isObject(i) ? n = n.map(function(e) {
                        for (var t = i.items.length; 0 < t--; )
                            if (e.databaseId === i.items[t].databaseId)
                                return i.items[t];
                        return e
                    }) : t.error && NetworkErrorManager.handleStatus(t.error.code),
                    o.buildSquad(n)
                }
            })
        }
    }
    ,
    UTSquadBuilderViewController.prototype.buildSquad = function(s) {
        var e, t, i, o, a = this, n = new UTItemListViewModel([]), r = null === (e = this.viewModel) || void 0 === e ? void 0 : e.searchCriteria;
        if (r) {
            n.sortByRecency = r.sortBy === SearchSortType.RECENCY,
            n.sort = r.sort,
            n.sortType = r.sortBy,
            n.addArray(s),
            s = n.getItemList();
            var l = void 0;
            if (this.squad) {
                var c = repositories.Squad.getFormation(this.formation);
                c && (l = this.replacePlayers ? null === (i = this.squadBuilder) || void 0 === i ? void 0 : i.buildSquad(this.formation, s, this.ignorePosition) : null === (o = this.squadBuilder) || void 0 === o ? void 0 : o.buildSquad(this.formation, s, this.ignorePosition, this.squad),
                this.squad.setPlayers(l, this.replacePlayers),
                this.squad.setFormation(c),
                this.challenge ? services.SBC.saveChallenge(this.challenge).observe(this, this.onSBCSaveComplete) : this.squad.save().observe(this, this.onSquadSaveComplete))
            } else
                l = null === (t = this.squadBuilder) || void 0 === t ? void 0 : t.buildSquad(this.formation, s, this.ignorePosition),
                services.Squad.requestSquadList().observe(this, function(e, t) {
                    var i;
                    e.unobserve(a);
                    var o = null === (i = t.data) || void 0 === i ? void 0 : i.squads;
                    if (o) {
                        var n = services.Localization.localize("squad.builder.defaultname")
                          , r = TextUtils.squadNameExists(n, o) ? TextUtils.createSquadName(n, o) : n;
                        services.Squad.create(r, a.formation, s).observe(a, a.onSquadCreateComplete)
                    }
                })
        }
    }
    ,
    UTSquadBuilderViewController.prototype.onSquadCreateComplete = function(e, t) {
        var i;
        if (e.unobserve(this),
        t.success)
            services.Notification.queue([services.Localization.localize("notification.squad.created"), UINotificationType.NEUTRAL]),
            null === (i = this.getNavigationController()) || void 0 === i || i.popViewController(!0),
            TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.SQUAD_BUILDING, "Squad Builder Create");
        else {
            var o = t.error ? t.error.code : t.status;
            if (NetworkErrorManager.checkCriticalStatus(o))
                NetworkErrorManager.handleStatus(o);
            else {
                var n = void 0;
                switch (o) {
                case UtasErrorCode.NAME_EXISTS:
                    n = "popup.error.duplicateSquadName";
                    break;
                case UtasErrorCode.PERMISSION_DENIED:
                    n = "popup.error.squadsFull";
                    break;
                case UtasErrorCode.PROFANITY:
                    n = "popup.error.profanity";
                    break;
                default:
                    n = "popup.body.genericError"
                }
                services.Notification.queue([services.Localization.localize(n), UINotificationType.NEGATIVE])
            }
        }
    }
    ,
    UTSquadBuilderViewController.prototype.onSquadSaveComplete = function(e, t) {
        e.unobserve(this),
        t.success ? (services.Notification.queue([services.Localization.localize("notification.squad.updated"), UINotificationType.NEUTRAL]),
        TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.SQUAD_BUILDING, "Squad Builder Update")) : services.Notification.queue([services.Localization.localize("popup.error.activesquad.SaveFailed"), UINotificationType.NEGATIVE]),
        this.dismissSquadBuilder()
    }
    ,
    UTSquadBuilderViewController.prototype.onSBCSaveComplete = function(e, t) {
        var i;
        if (e.unobserve(this),
        t.success)
            services.Notification.queue([services.Localization.localize("notification.squad.updated"), UINotificationType.NEUTRAL]),
            TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.SQUAD_BUILDING, "SBC Squad Builder Update");
        else {
            var o = "notification.sbcChallenges.failedToSave";
            (null === (i = this.challenge) || void 0 === i ? void 0 : i.hasExpired()) ? o = "notification.sbcChallenges.expired" : t.error && t.error.code === UtasErrorCode.SERVICE_IS_DISABLED && (o = "sbc.notification.disabled"),
            services.Notification.queue([services.Localization.localize(o), UINotificationType.NEGATIVE])
        }
        this.dismissSquadBuilder()
    }
    ,
    UTSquadBuilderViewController.prototype.dismissSquadBuilder = function() {
        var e = this.getNavigationController();
        if (e) {
            var t = e.getPreviousController(2);
            isPhone() && t ? e.popToViewController(t) : e.popViewController()
        }
    }
    ,
    UTSquadBuilderViewController.prototype.updateOvrRangeVisibility = function() {
        if (JSUtils.isValid(this.viewModel)) {
            var e = this.getView()
              , t = this.viewModel.searchCriteria.type
              , i = this.viewModel.searchFeature;
            e.toggleOvrRange(t, i)
        }
    }
    ,
    UTSquadBuilderViewController
}(EAViewController);
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
NamespaceManager.Register("controllers.navigation");
var UTSquadDetailsNavigationController = function(n) {
    function UTSquadDetailsNavigationController(e, t, i) {
        var o = n.call(this, t, i) || this;
        return o._withSquadView = e,
        o.onDataChange = new EAObservable,
        o
    }
    return __extends(UTSquadDetailsNavigationController, n),
    UTSquadDetailsNavigationController.prototype.init = function() {
        if (!this.initialized) {
            n.prototype.init.call(this);
            var e = this.getRootController();
            e instanceof UTSquadActionsViewController && (e.onDataChange.observe(this.onDataChange, this.onDataChange.notify),
            e.setSquadContext(this._withSquadView))
        }
    }
    ,
    UTSquadDetailsNavigationController.prototype.dealloc = function() {
        this.onDataChange.dealloc(),
        n.prototype.dealloc.call(this)
    }
    ,
    UTSquadDetailsNavigationController.prototype._getRootControllerInstance = function() {
        return new UTSquadActionsViewController
    }
    ,
    UTSquadDetailsNavigationController.prototype.didPush = function(e) {
        e === this.getRootController() && this.setNavigationVisibility(!1, !0)
    }
    ,
    UTSquadDetailsNavigationController.prototype.setSquad = function(e) {
        var t = this.getRootController();
        t instanceof UTSquadActionsViewController && t.setSquad(e)
    }
    ,
    UTSquadDetailsNavigationController
}(UTNavigationController)
  , UTSquadComparePlayersViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadComparePlayersViewController() {
        var e = t.call(this) || this;
        return e.chemCalculator = new UTSquadChemCalculatorUtils(services.Chemistry,repositories.TeamConfig),
        e._panel = new UTCompareActionPanelViewController,
        e
    }
    return __extends(UTSquadComparePlayersViewController, t),
    UTSquadComparePlayersViewController.prototype.init = function() {
        t.prototype.init.call(this),
        this._panel && (this._panel.init(),
        this.addChildViewController(this._panel))
    }
    ,
    UTSquadComparePlayersViewController.prototype._getViewInstanceFromData = function() {
        return new UTCompareDetailsView
    }
    ,
    UTSquadComparePlayersViewController.prototype.setPrimaryItem = function(e, t) {
        this.getView().render(e),
        t ? (this._panel.setItems(e, void 0, t),
        this.setChemistryData(t, e, new UTNullItemEntity)) : this._panel.setItems(e)
    }
    ,
    UTSquadComparePlayersViewController.prototype.setComparisonItem = function(e, t, i) {
        this.getView().setComparisonItem(t),
        i ? (this._panel.setItems(e, t, i),
        this.setChemistryData(i, e, t)) : this._panel.setItems(e, t)
    }
    ,
    UTSquadComparePlayersViewController.prototype.setChemistryData = function(e, t, i) {
        var o = e.getFormation()
          , n = e.getFieldPlayers().find(function(e) {
            return e.item === t
        })
          , r = e.getFieldPlayers().find(function(e) {
            return e.item === i
        });
        if (n && o && i) {
            var s = this.chemCalculator.calculate(o, e.getPlayers().map(function(e) {
                return e.item
            }), e.getManager().item)
              , a = this.chemCalculator.calculate(o, e.getPlayers().map(function(e) {
                return e.index === n.index ? i : e.index === (null == r ? void 0 : r.index) ? t : e.item
            }), i.isManager() ? i : e.getManager().item);
            this.getView().renderChemistryComparison(a.getSlotChemistry(n.index), s.getSlotChemistry(n.index), n.inPossiblePosition)
        }
    }
    ,
    UTSquadComparePlayersViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this);
        var e = this.getView();
        this._panel && !this._panel.getView().isSubview(e) && (e.appendPanel(this._panel.getView()),
        e.layoutSubviews(),
        this._panel.viewDidAppear())
    }
    ,
    UTSquadComparePlayersViewController.prototype.setViewAsSBC = function(e) {
        this.getView().setAsSBC(e)
    }
    ,
    UTSquadComparePlayersViewController
}(EAViewController))
  , UTBaseSquadSplitViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTBaseSquadSplitViewController() {
        var e = t.call(this) || this;
        return e._compareItemsController = null,
        e._itemDetailController = null,
        e._overviewController = null,
        e._squad = null,
        e
    }
    return __extends(UTBaseSquadSplitViewController, t),
    UTBaseSquadSplitViewController.prototype.init = function() {
        this.initialized || (t.prototype.init.call(this),
        this.getView().addClass("full-width"),
        this._overviewController = this._generateSquadOverview(),
        this._overviewController.setSquadOverviewDelegate(this),
        this.addChildViewController(this._overviewController),
        this._setupSquadOverview())
    }
    ,
    UTBaseSquadSplitViewController.prototype.initWithSquad = function(e) {
        this.initialized || (this._squad = e,
        this.init())
    }
    ,
    UTBaseSquadSplitViewController.prototype.dealloc = function() {
        t.prototype.dealloc.call(this),
        this._overviewController && this._overviewController.dealloc(),
        this._itemDetailController && this._itemDetailController.dealloc(),
        this._compareItemsController && this._compareItemsController.dealloc(),
        this._overviewController = null,
        this._itemDetailController = null,
        this._compareItemsController = null,
        this._squad = null
    }
    ,
    UTBaseSquadSplitViewController.prototype.getNavigationTitle = function() {
        var e, t;
        return null !== (t = null === (e = this._overviewController) || void 0 === e ? void 0 : e.getNavigationTitle()) && void 0 !== t ? t : BLANK_STR
    }
    ,
    UTBaseSquadSplitViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        this.rightController || this.setRightController(this.getDefaultPanel()),
        this._overviewController && this.setLeftController(this._overviewController)
    }
    ,
    UTBaseSquadSplitViewController.prototype.selectSlotIndexForSquad = function(e, t, i) {
        var o;
        this._squad && this._squad.simpleBrickIndices.indexOf(i) < 0 && (null === (o = this._overviewController) || void 0 === o || o.selectSlot(i),
        e === this._overviewController && this._showSlotDetails(i))
    }
    ,
    UTBaseSquadSplitViewController.prototype._setupSquadOverview = function() {
        if (this._squad && this._overviewController) {
            var e = this._overviewController.getView();
            e.addTarget(this, this.onItemHover, enums.UISquadPitchEvent.DRAGDROPPABLE),
            e.getPitch().addTarget(this, this._ePitchTapped, EventType.TAP),
            this._overviewController.onItemMove.observe(this, this.onItemMove),
            this._overviewController.onItemSwap.observe(this, this.onItemSwap),
            this._overviewController.onDragEnd.observe(this, this.onDragEnd)
        }
    }
    ,
    UTBaseSquadSplitViewController.prototype._generateSquadOverview = function() {
        var e = new UTSquadOverviewViewController;
        return this._squad ? e.initWithSquad(this._squad) : e.init(),
        e
    }
    ,
    UTBaseSquadSplitViewController.prototype._generateItemDetails = function(e) {
        var t = new UTSquadItemDetailsNavigationController;
        return this._squad ? t.initWithSquad(this._squad, e) : t.init(),
        t
    }
    ,
    UTBaseSquadSplitViewController.prototype.generateCompareDetails = function() {
        var e = new UTSquadComparePlayersViewController;
        return e.init(),
        this._squad && e.setViewAsSBC(this._squad.isSBC()),
        e
    }
    ,
    UTBaseSquadSplitViewController.prototype._showSlotDetails = function(e) {
        var t;
        this._itemDetailController || (this._itemDetailController = this._generateItemDetails(e),
        this._itemDetailController.setNavigationStyle(UTNavigationBarView.Style.SECONDARY),
        this._itemDetailController.onSlotChange.observe(this, this.onDetailSlotChange),
        null === (t = this._itemDetailController.getRootPrimaryNavigationItem()) || void 0 === t || t.addTarget(this, this.onExitItemDetails, EventType.TAP),
        this.addChildViewController(this._itemDetailController)),
        this._itemDetailController.setSlot(e),
        this.setRightController(this._itemDetailController)
    }
    ,
    UTBaseSquadSplitViewController.prototype._showDefaultPanel = function() {
        var e, t = this.getDefaultPanel();
        this.setRightController(t),
        t instanceof UTNavigationController && t.popToRootViewController(),
        null === (e = this._overviewController) || void 0 === e || e.getView().clearSlotInteractionState(enums.UISlotInteractionState.SELECTED)
    }
    ,
    UTBaseSquadSplitViewController.prototype.showComparePlayersPanel = function(e, t) {
        this._compareItemsController || (this._compareItemsController = this.generateCompareDetails(),
        this.addChildViewController(this._compareItemsController)),
        this.setRightController(this._compareItemsController),
        t ? this._compareItemsController.setComparisonItem(e, t, this._squad) : this._compareItemsController.setPrimaryItem(e, this._squad)
    }
    ,
    UTBaseSquadSplitViewController.prototype.onDetailSlotChange = function(e, t) {
        var i;
        DebugUtils.Assert(this._squad instanceof UTSquadEntity, "Squad entity has gone missing."),
        t.slot && (null === (i = this._overviewController) || void 0 === i || i.selectSlot(t.slot.index))
    }
    ,
    UTBaseSquadSplitViewController.prototype.onItemSwap = function(e, t, i) {
        this._showDefaultPanel()
    }
    ,
    UTBaseSquadSplitViewController.prototype.onDragEnd = function(e, t) {
        var i, o;
        this._showSlotDetails(null !== (o = null === (i = this._squad) || void 0 === i ? void 0 : i.getSlot(t).index) && void 0 !== o ? o : 0)
    }
    ,
    UTBaseSquadSplitViewController.prototype.onItemMove = function(e, t) {
        this.showComparePlayersPanel(t)
    }
    ,
    UTBaseSquadSplitViewController.prototype.onExitItemDetails = function(e, t, i) {
        this._showDefaultPanel()
    }
    ,
    UTBaseSquadSplitViewController.prototype.onItemHover = function(e, t, i) {
        if (this._squad) {
            var o = this._squad.getSlot(i.dragging).item
              , n = this._squad.getSlot(i.target).item;
            this.showComparePlayersPanel(o, n)
        }
    }
    ,
    UTBaseSquadSplitViewController.prototype._ePitchTapped = function(e, t, i) {
        this._showDefaultPanel()
    }
    ,
    UTBaseSquadSplitViewController
}(UTSplitViewController))
  , UTSquadSplitViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadSplitViewController() {
        var e = t.call(this) || this;
        return e._panelController = new UTSquadDetailsNavigationController(!0,new UTNavigationBarView),
        e
    }
    return __extends(UTSquadSplitViewController, t),
    UTSquadSplitViewController.prototype.init = function() {
        this.initialized || (t.prototype.init.call(this),
        this._panelController.init(),
        this._overviewController && this._panelController.onDataChange.observe(this._overviewController, this._overviewController.applyDataChange),
        this._panelController.setNavigationStyle(UTNavigationBarView.Style.SECONDARY),
        this.addChildViewController(this._panelController))
    }
    ,
    UTSquadSplitViewController.prototype.dealloc = function() {
        this._panelController.dealloc(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSquadSplitViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        this._squad && this._panelController.setSquad(this._squad)
    }
    ,
    UTSquadSplitViewController.prototype.getDefaultPanel = function() {
        return this._panelController
    }
    ,
    UTSquadSplitViewController
}(UTBaseSquadSplitViewController))
  , UTActionConfirmationPopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTActionConfirmationPopupView() {
        return t.call(this) || this
    }
    return __extends(UTActionConfirmationPopupView, t),
    UTActionConfirmationPopupView.prototype.init = function() {
        var e = services.Localization;
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this._btnCancel.setInteractionState(!0),
        this._btnConfirm.setInteractionState(!0),
        this._btnConfirmAlways.setInteractionState(!0),
        this._btnCancel.addTarget(this, this.handleButtonSelect, EventType.TAP),
        this._btnConfirm.addTarget(this, this.handleButtonSelect, EventType.TAP),
        this._btnConfirmAlways.addTarget(this, this.handleButtonSelect, EventType.TAP),
        this._btnCancel.setText(e.localize("popup.no")),
        this._btnConfirm.setText(e.localize("popup.yes")),
        this._btnConfirmAlways.setText(e.localize("popup.yes.always")),
        this.__checkboxLabel.textContent = e.localize("view.popup.formation.dontShow")
    }
    ,
    UTActionConfirmationPopupView.prototype.dealloc = function() {
        this._btnCancel.removeTarget(this, this.handleButtonSelect, EventType.TAP),
        this._btnConfirm.removeTarget(this, this.handleButtonSelect, EventType.TAP),
        this._btnConfirmAlways.removeTarget(this, this.handleButtonSelect, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTActionConfirmationPopupView.prototype.setTitleText = function(e) {
        this.__title.textContent = e
    }
    ,
    UTActionConfirmationPopupView.prototype.setBodyText = function(e) {
        this.__body.textContent = e
    }
    ,
    UTActionConfirmationPopupView.prototype.toggleConfirmAlwaysButton = function(e) {
        this._btnConfirmAlways.setDisplay(e)
    }
    ,
    UTActionConfirmationPopupView.prototype.handleButtonSelect = function(e, t, i) {
        e === this._btnCancel ? this._triggerActions(UTActionConfirmationPopupView.Event.CANCEL) : e === this._btnConfirm && (this._btnConfirmAlways.getChecked() ? this._triggerActions(UTActionConfirmationPopupView.Event.CONFIRM_ALWAYS) : this._triggerActions(UTActionConfirmationPopupView.Event.CONFIRM))
    }
    ,
    UTActionConfirmationPopupView.Event = Object.freeze({
        CANCEL: "UTActionConfirmationPopupView.Event.CANCEL",
        CONFIRM: "UTActionConfirmationPopupView.Event.CONFIRM",
        CONFIRM_ALWAYS: "UTActionConfirmationPopupView.Event.CONFIRM_ALWAYS"
    }),
    UTActionConfirmationPopupView
}(EATargetActionView));
UTActionConfirmationPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-action-confirmation-popup-view");
        var t = document.createElement("header");
        this.__title = document.createElement("h1"),
        t.appendChild(this.__title),
        e.appendChild(t),
        this.__body = document.createElement("p"),
        this.__body.classList.add("ut-action-confirmation-popup-view--body"),
        e.appendChild(this.__body);
        var i = document.createElement("div");
        i.classList.add("underline"),
        i.classList.add("ut-st-button-group"),
        this._btnConfirm = new UTStandardButtonControl,
        this._btnConfirm.getRootElement().classList.add("call-to-action"),
        i.appendChild(this._btnConfirm.getRootElement()),
        this._btnCancel = new UTStandardButtonControl,
        i.appendChild(this._btnCancel.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-action-confirmation-popup-view--toggle-container"),
        this._btnConfirmAlways = new UTToggleButtonControl,
        this._btnConfirmAlways.getRootElement().classList.add("checkmark"),
        o.appendChild(this._btnConfirmAlways.getRootElement()),
        this.__checkboxLabel = document.createElement("p"),
        this.__checkboxLabel.classList.add("ut-action-confirmation-popup-view--checkbox-label"),
        o.appendChild(this.__checkboxLabel),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTActionConfirmationPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__body = null,
    this._btnConfirm.destroy(),
    this._btnCancel.destroy(),
    this._btnConfirmAlways.destroy(),
    this.__checkboxLabel = null
}
,
UTActionConfirmationPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTActionConfirmationPopupViewController = function(t) {
    function UTActionConfirmationPopupViewController() {
        var e = t.call(this) || this;
        return e.titleText = "",
        e.bodyText = "",
        e.showConfirmationPopup = !0,
        e
    }
    return __extends(UTActionConfirmationPopupViewController, t),
    UTActionConfirmationPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTActionConfirmationPopupView
    }
    ,
    UTActionConfirmationPopupViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.addTarget(this, this.handleViewEvent, UTActionConfirmationPopupView.Event.CANCEL),
        e.addTarget(this, this.handleViewEvent, UTActionConfirmationPopupView.Event.CONFIRM),
        e.addTarget(this, this.handleViewEvent, UTActionConfirmationPopupView.Event.CONFIRM_ALWAYS)
    }
    ,
    UTActionConfirmationPopupViewController.prototype.setTitleText = function(e) {
        this.titleText = e,
        this.getView().setTitleText(this.titleText)
    }
    ,
    UTActionConfirmationPopupViewController.prototype.setBodyText = function(e) {
        this.bodyText = e,
        this.getView().setBodyText(this.bodyText)
    }
    ,
    UTActionConfirmationPopupViewController.prototype.toggleConfirmAlwaysDisplay = function(e) {
        this.getView().toggleConfirmAlwaysButton(e)
    }
    ,
    UTActionConfirmationPopupViewController.prototype.getShowConfirmationPopup = function() {
        return this.showConfirmationPopup
    }
    ,
    UTActionConfirmationPopupViewController.prototype.viewWillDisappear = function() {
        t.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.handleViewEvent, UTActionConfirmationPopupView.Event.CANCEL),
        e.removeTarget(this, this.handleViewEvent, UTActionConfirmationPopupView.Event.CONFIRM),
        e.removeTarget(this, this.handleViewEvent, UTActionConfirmationPopupView.Event.CONFIRM_ALWAYS)
    }
    ,
    UTActionConfirmationPopupViewController.prototype.handleKeyUpEvent = function(e) {
        e.key === KeyboardKey.ESCAPE || e.key === KeyboardKey.MS_ESCAPE ? this.onExit.notify(enums.UIDialogOptions.CANCEL) : e.key === KeyboardKey.ENTER && this.onExit.notify(enums.UIDialogOptions.OK)
    }
    ,
    UTActionConfirmationPopupViewController.prototype.handleViewEvent = function(e, t, i) {
        t === UTActionConfirmationPopupView.Event.CANCEL ? this.onExit.notify(enums.UIDialogOptions.CANCEL) : t === UTActionConfirmationPopupView.Event.CONFIRM ? this.onExit.notify(enums.UIDialogOptions.OK) : t === UTActionConfirmationPopupView.Event.CONFIRM_ALWAYS && (this.showConfirmationPopup = !1,
        this.onExit.notify(enums.UIDialogOptions.OK))
    }
    ,
    UTActionConfirmationPopupViewController
}(BasePopupViewController)
  , UTDragDropUtils = function() {
    function UTDragDropUtils(e) {
        this.__draggablesContainer = e,
        this.dropContainers = {},
        this.droppablesContainer = "",
        this.__currentItem = null,
        this.__dropTarget = null,
        this._droppables = [],
        this.draggables = [],
        this.droppables = [],
        this.dropCache = {},
        this.collisonData = [],
        this.moveDistanceThreshold = 5,
        this.dragging = !1,
        this.moved = !1,
        this.validDrop = !1,
        this.enabled = !1,
        this.currentTouch = null,
        this.onTouchStartEventDelegate = this.onTouchStart.bind(this),
        this.onTouchEndEventDelegate = this.onTouchEnd.bind(this),
        this.onMoveEventDelegate = JSUtils.throttle(this.onMove.bind(this), 16)
    }
    return UTDragDropUtils.prototype.isTouchEvent = function(e) {
        return window.TouchEvent && e instanceof TouchEvent
    }
    ,
    UTDragDropUtils.prototype.enable = function() {
        this.addAllEventListeners(),
        this.updateInteractiveContainer(),
        this.updateDropSlotCache(),
        this.enabled = !0
    }
    ,
    UTDragDropUtils.prototype.disable = function() {
        this.removeAllEventListeners(),
        this._droppables = [],
        this.dropCache = {},
        this.collisonData = [],
        this.enabled = !1
    }
    ,
    UTDragDropUtils.prototype.updateInteractiveContainer = function() {
        var e = this.__draggablesContainer.getBoundingClientRect();
        this._containerCollisionBoundaries = {
            top: e.top,
            right: e.right,
            bottom: e.bottom,
            left: e.left
        }
    }
    ,
    UTDragDropUtils.prototype.setDraggable = function(e, t) {
        var i = this.draggables.indexOf(e)
          , o = 0 <= i;
        !o && t ? this.draggables.push(e) : o && !t && this.draggables.splice(i, 1),
        e.toggleClass(UTDragDropUtils.STYLES.dragSlot, t)
    }
    ,
    UTDragDropUtils.prototype.setDroppable = function(e, t) {
        var i = this.droppables.indexOf(e)
          , o = 0 <= i;
        !o && t ? this.droppables.push(e) : o && !t && this.droppables.splice(i, 1),
        e.toggleClass(UTDragDropUtils.STYLES.dropSlot, t)
    }
    ,
    UTDragDropUtils.prototype.setSwapAnimation = function(e, t) {
        e.toggleClass(UTDragDropUtils.STYLES.swapAnimate, t)
    }
    ,
    UTDragDropUtils.prototype.getSlotIndex = function(e) {
        var t, i = null == e ? void 0 : e.parentElement;
        return null !== (t = Number(null == i ? void 0 : i.getAttribute("index"))) && void 0 !== t ? t : -1
    }
    ,
    UTDragDropUtils.prototype.addDropContainer = function(e, t, i) {
        this.dropContainers[e] = t,
        i && (this.droppablesContainer = e)
    }
    ,
    UTDragDropUtils.prototype.updateDropSlotCache = function() {
        var t = this
          , i = this.dropContainers;
        this.dropCache = {},
        Object.keys(i).forEach(function(e) {
            i.hasOwnProperty(e) && (t.dropCache[e] = DOMKit.findElements(i[e].getRootElement(), ".droppable"))
        }),
        this.refreshDroppables()
    }
    ,
    UTDragDropUtils.prototype.setDroppablesContainer = function(e) {
        DebugUtils.Assert(JSUtils.isValid(this.dropContainers[e]), "Attempted to set droppables container to a non-existent container."),
        e && this.dropContainers[e] && (this.droppablesContainer = e,
        this.refreshDroppables())
    }
    ,
    UTDragDropUtils.prototype.refreshDroppables = function() {
        var e = this.droppablesContainer;
        this.dropCache[e] ? this._droppables = this.dropCache[e] : this._droppables = DOMKit.findElements(this.dropContainers[e].getRootElement(), ".droppable")
    }
    ,
    UTDragDropUtils.prototype.clearActiveCollisions = function() {
        this.collisonData.forEach(function(e) {
            if (e.hover) {
                e.hover = !1;
                var t = e.droppable.parentElement;
                t && DOMKit.removeClass(t, UTDragDropUtils.STYLES.droppable)
            }
        }, this)
    }
    ,
    UTDragDropUtils.prototype.updateCollisionData = function() {
        this.clearActiveCollisions(),
        this.collisonData = this._droppables.map(function(e) {
            var t = e.getBoundingClientRect();
            return {
                top: t.top,
                right: t.right,
                bottom: t.bottom,
                left: t.left,
                droppable: e,
                hover: !1
            }
        }, this)
    }
    ,
    UTDragDropUtils.prototype.isDragging = function() {
        return this.dragging && this.moved
    }
    ,
    UTDragDropUtils.prototype.updateDroppables = function(t) {
        var i = this
          , o = !1;
        this.collisonData.forEach(function(e) {
            e.droppable !== i.__currentItem && (t && t.clientX >= e.left && t.clientX <= e.right && t.clientY >= e.top && t.clientY <= e.bottom ? (o = !0,
            i.validDrop = !0,
            e.hover || (e.hover = !0,
            i.__dropTarget = e.droppable,
            requestAnimationFrame(function() {
                return function(e) {
                    var t = e.parentElement;
                    t && DOMKit.addClass(t, UTDragDropUtils.STYLES.droppable)
                }(e.droppable)
            }))) : e.hover && (e.hover = !1,
            requestAnimationFrame(function() {
                return function(e) {
                    var t = e.parentElement;
                    t && DOMKit.removeClass(t, UTDragDropUtils.STYLES.droppable)
                }(e.droppable)
            })))
        }, this),
        o || (this.validDrop = !1,
        this.__dropTarget = null)
    }
    ,
    UTDragDropUtils.prototype.onMove = function(e) {
        var t, i = this;
        if (this.enabled && JSUtils.isValid(this.currentTouch) && this.__currentItem) {
            var o = null;
            if (this.isTouchEvent(e))
                for (var n = e.touches.length; 0 < n--; ) {
                    var r = e.touches[n];
                    if (r.identifier === (null === (t = this.currentTouch) || void 0 === t ? void 0 : t.id)) {
                        o = r;
                        break
                    }
                }
            else
                e && (o = e);
            if (o) {
                if (e.preventDefault(),
                !this.moved && this.currentTouch) {
                    var s = Math.abs(o.clientX - this.currentTouch.clientX)
                      , a = Math.abs(o.clientY - this.currentTouch.clientY)
                      , l = this.moveDistanceThreshold;
                    if (this.moved = l < s || l < a,
                    !this.moved)
                        return;
                    var c = new CustomEvent("eadragstart",{
                        detail: {
                            index: this.getSlotIndex(this.__currentItem)
                        }
                    });
                    this.__draggablesContainer.dispatchEvent(c)
                }
                var u = this.__dropTarget;
                this.updateDroppables(o);
                var d = this.__currentItem.getBoundingClientRect()
                  , h = d.width
                  , p = d.height
                  , _ = o.clientX - h / 2
                  , f = o.clientY - p / 2;
                _ < this._containerCollisionBoundaries.left ? _ = this._containerCollisionBoundaries.left : _ + h >= this._containerCollisionBoundaries.right && (_ = this._containerCollisionBoundaries.right - h),
                f < this._containerCollisionBoundaries.top ? f = this._containerCollisionBoundaries.top : f + p >= this._containerCollisionBoundaries.bottom && (f = this._containerCollisionBoundaries.bottom - p),
                requestAnimationFrame(function() {
                    if (i.__currentItem && (i.__currentItem.style.left = _ + "px",
                    i.__currentItem.style.top = f + "px"),
                    o) {
                        var e = new CustomEvent("eadragmove",{
                            detail: {
                                touch: o
                            }
                        });
                        i.__draggablesContainer.dispatchEvent(e)
                    }
                    if (i.validDrop && u !== i.__dropTarget) {
                        var t = new CustomEvent("eadragover",{
                            detail: {
                                dragging: i.getSlotIndex(i.__currentItem),
                                target: i.getSlotIndex(i.__dropTarget)
                            }
                        });
                        i.__draggablesContainer.dispatchEvent(t)
                    }
                })
            }
        }
    }
    ,
    UTDragDropUtils.prototype.startDrag = function(e) {
        var t, i, o, n;
        if (JSUtils.isValid(e.draggable) && (this.currentTouch = e,
        this.__currentItem = e.draggable,
        this.__currentItem)) {
            this.updateCollisionData(),
            this.__currentItem.addEventListener(EventType.MOUSEUP, this.onTouchEndEventDelegate),
            this.__currentItem.addEventListener(EventType.TOUCHEND, this.onTouchEndEventDelegate),
            this.__currentItem.addEventListener(EventType.TOUCHCANCEL, this.onTouchEndEventDelegate),
            this.__draggablesContainer.addEventListener(EventType.MOUSEMOVE, this.onMoveEventDelegate),
            this.__draggablesContainer.addEventListener(EventType.TOUCHMOVE, this.onMoveEventDelegate);
            var r = null === (i = null === (t = this.__currentItem) || void 0 === t ? void 0 : t.parentElement) || void 0 === i ? void 0 : i.getBoundingClientRect();
            r && (this.__currentItem.style.left = r.left + "px",
            this.__currentItem.style.top = r.top + "px"),
            (null === (o = this.__currentItem) || void 0 === o ? void 0 : o.parentElement) && DOMKit.addClass(null === (n = this.__currentItem) || void 0 === n ? void 0 : n.parentElement, UTDragDropUtils.STYLES.slotInteraction),
            DOMKit.addClass(this.__currentItem, UTDragDropUtils.STYLES.dragging),
            this.dragging = !0
        }
    }
    ,
    UTDragDropUtils.prototype.cancelDrag = function() {
        this.dragging && this.onTouchEnd()
    }
    ,
    UTDragDropUtils.prototype.onTouchStart = function(e) {
        var t = null;
        if (this.isTouchEvent(e)) {
            var i = e.touches[0];
            t = {
                clientX: i.clientX,
                clientY: i.clientY,
                draggable: e.currentTarget,
                id: i.identifier
            }
        } else if (e instanceof MouseEvent) {
            var o = e;
            t = {
                clientX: o.clientX,
                clientY: o.clientY,
                draggable: o.currentTarget
            }
        }
        t && this.enabled && !this.dragging && this.startDrag(t)
    }
    ,
    UTDragDropUtils.prototype.resetDrag = function() {
        this.__currentItem && (this.__currentItem.style.left = "",
        this.__currentItem.style.top = "",
        DOMKit.removeClass(this.__currentItem, UTDragDropUtils.STYLES.dragging)),
        this.dragDropEnd()
    }
    ,
    UTDragDropUtils.prototype.onTouchEnd = function(e) {
        var t, i, o, n, r, s;
        if (e && this.isTouchEvent(e))
            for (var a = e.touches.length; 0 < a--; )
                if (e.touches[a].identifier === (null === (t = this.currentTouch) || void 0 === t ? void 0 : t.id))
                    return;
        if (null === (i = this.__currentItem) || void 0 === i || i.removeEventListener(EventType.MOUSEUP, this.onTouchEndEventDelegate),
        null === (o = this.__currentItem) || void 0 === o || o.removeEventListener(EventType.TOUCHEND, this.onTouchEndEventDelegate),
        null === (n = this.__currentItem) || void 0 === n || n.removeEventListener(EventType.TOUCHCANCEL, this.onTouchEndEventDelegate),
        this.__draggablesContainer.removeEventListener(EventType.MOUSEMOVE, this.onMoveEventDelegate),
        this.__draggablesContainer.removeEventListener(EventType.TOUCHMOVE, this.onMoveEventDelegate),
        (null === (r = this.__currentItem) || void 0 === r ? void 0 : r.parentElement) && DOMKit.removeClass(null === (s = this.__currentItem) || void 0 === s ? void 0 : s.parentElement, UTDragDropUtils.STYLES.slotInteraction),
        this.dragging && this.__currentItem)
            if (this.validDrop && this.__dropTarget) {
                var l = this.__dropTarget.parentElement;
                l && DOMKit.removeClass(l, UTDragDropUtils.STYLES.droppable);
                var c = new CustomEvent("eadrop",{
                    detail: {
                        dragging: this.getSlotIndex(this.__currentItem),
                        target: this.getSlotIndex(this.__dropTarget)
                    }
                });
                this.__draggablesContainer.dispatchEvent(c)
            } else {
                var u = new CustomEvent("eadragend",{
                    detail: {
                        index: this.getSlotIndex(this.__currentItem)
                    }
                });
                this.__draggablesContainer.dispatchEvent(u)
            }
    }
    ,
    UTDragDropUtils.prototype.dragDropEnd = function() {
        this.validDrop && this.updateDropSlotCache(),
        this.updateDroppables(),
        this.__dropTarget = null,
        this.__currentItem = null,
        this.dragging = !1,
        this.moved = !1
    }
    ,
    UTDragDropUtils.prototype.removeAllEventListeners = function() {
        var t = this.onTouchStartEventDelegate;
        this.draggables.map(function(e) {
            return e.getRootElement()
        }).forEach(function(e) {
            null == e || e.removeEventListener(EventType.MOUSEDOWN, t),
            null == e || e.removeEventListener(EventType.TOUCHSTART, t)
        })
    }
    ,
    UTDragDropUtils.prototype.addAllEventListeners = function() {
        var t = this.onTouchStartEventDelegate;
        this.draggables.map(function(e) {
            return e.getRootElement()
        }).forEach(function(e) {
            null == e || e.addEventListener(EventType.MOUSEDOWN, t),
            null == e || e.addEventListener(EventType.TOUCHSTART, t)
        })
    }
    ,
    UTDragDropUtils.STYLES = {
        droppable: "isDroppable",
        dragging: "isDragging",
        dropSlot: "droppable",
        dragSlot: "draggable",
        swapAnimate: "animateReplace",
        slotInteraction: "drag-in-progress"
    },
    UTDragDropUtils.DRAG = {
        START: "UTDragDropUtils.DRAG.START",
        MOVE: "UTDragDropUtils.DRAG.MOVE",
        DROPPABLE: "UTDragDropUtils.DRAG.DROPPABLE",
        END: "UTDragDropUtils.DRAG.END",
        DROP: "UTDragDropUtils.DRAG.DROP"
    },
    UTDragDropUtils.EVENT_NAMESPACE = "dragdrop",
    UTDragDropUtils
}()
  , UTSquadSlotPedestalView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadSlotPedestalView() {
        var e = t.call(this) || this;
        return e._currentState = UTSquadSlotPedestalView.STATES.NONE,
        e
    }
    return __extends(UTSquadSlotPedestalView, t),
    UTSquadSlotPedestalView.prototype.renderPlusRoleBonus = function() {
        this.__roleBonus.textContent = "+",
        DOMKit.toggleDisplayStyle(this.__roleBonus, !0)
    }
    ,
    UTSquadSlotPedestalView.prototype.renderPlusPlusRoleBonus = function() {
        this.__roleBonus.textContent = "++",
        DOMKit.toggleDisplayStyle(this.__roleBonus, !0)
    }
    ,
    UTSquadSlotPedestalView.prototype.clearRoleBonus = function() {
        this.__roleBonus.textContent = "",
        DOMKit.toggleDisplayStyle(this.__roleBonus, !1)
    }
    ,
    UTSquadSlotPedestalView.prototype.render = function(e, t) {
        var i = services.Localization
          , o = e.item.isManager() ? i.localize("extendedPlayerInfo.positions.manager") : UTLocalizationUtil.positionIdToName(e.generalPosition, i, e.item.gender)
          , n = UTSquadSlotPedestalView.STATES.NONE;
        if (t && e.inPossiblePosition ? n = UTSquadSlotPedestalView.STATES.CORRECTLY_POSITIONED : t && !e.inPossiblePosition && (n = UTSquadSlotPedestalView.STATES.INCORRECTLY_POSITIONED),
        this.removeClass(this._currentState),
        this.addClass(n),
        this.clearRoleBonus(),
        e.playerRole) {
            var r = e.item.hasPlusRolesForPositionRole(e.playerRole, e.generalPosition)
              , s = e.item.hasPlusPlusRolesForPositionRole(e.playerRole, e.generalPosition);
            r ? this.renderPlusRoleBonus() : s && this.renderPlusPlusRoleBonus()
        }
        this.__label.textContent = o,
        this._currentState = n
    }
    ,
    UTSquadSlotPedestalView.STATES = {
        NONE: "state-none",
        CORRECTLY_POSITIONED: "state-positioned",
        INCORRECTLY_POSITIONED: "state-incorrectly-positioned"
    },
    UTSquadSlotPedestalView
}(EAView));
UTSquadSlotPedestalView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("state-none"),
        e.classList.add("ut-squad-slot-pedestal-view"),
        this.__label = document.createElement("span"),
        this.__label.classList.add("label"),
        e.appendChild(this.__label),
        this.__roleBonus = document.createElement("span"),
        this.__roleBonus.classList.add("role-bonus"),
        e.appendChild(this.__roleBonus),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadSlotPedestalView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__roleBonus = null
}
,
UTSquadSlotPedestalView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadSlotView = function(t) {
    function UTSquadSlotView() {
        var e = t.call(this) || this;
        return e._itemView = null,
        e._slotIndex = -1,
        e._uniquePosition = -1,
        e
    }
    return __extends(UTSquadSlotView, t),
    UTSquadSlotView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this._chemistryPoints.init(),
        this._chemistryPoints.setDisplay(!1)
    }
    ,
    UTSquadSlotView.prototype.dealloc = function() {
        this._itemView && (this._itemView.dealloc(),
        this._itemView = null),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSquadSlotView.prototype.render = function(e, t, i, o) {
        void 0 === t && (t = !0),
        void 0 === i && (i = !0),
        void 0 === o && (o = !0),
        this.getRootElement().setAttribute("index", e.index.toString()),
        this._slotIndex = e.index,
        this._uniquePosition = e.uniquePosition;
        var n = this._renderItem(e, t, i, o);
        this.renderPedestal(e, i),
        i && this.renderChemistryPoints(e),
        n && this._itemView && this.getRootElement().appendChild(this._itemView.getRootElement())
    }
    ,
    UTSquadSlotView.prototype.renderTactical = function(e, t) {
        this.getRootElement().setAttribute("index", e.index.toString()),
        this._slotIndex = e.index,
        this._uniquePosition = e.uniquePosition,
        this._renderTacticalItem(e, t) && this._itemView && this.getRootElement().appendChild(this._itemView.getRootElement())
    }
    ,
    UTSquadSlotView.prototype._renderItem = function(e, t, i, o, n) {
        void 0 === n && (n = !1);
        var r = e.item
          , s = !1;
        return this._itemView && !this._itemView.canRender(r) && (this._itemView.dealloc(),
        this._itemView = null),
        this._itemView || (this._itemView = factories.ItemView.createSmallItem(r),
        this._itemView.init(),
        s = !0),
        n ? (this._itemView = factories.ItemView.createTacticalItem(r),
        this._itemView.init()) : (this._itemView.renderConcept = t,
        this._itemView.renderRestrictions = o,
        this._itemView.render(r, e),
        i && this._itemView.renderChemistryBreakdown(e.chemistry, e.nationChemistryPoints, e.leagueChemistryPoints, e.clubChemistryPoints)),
        s
    }
    ,
    UTSquadSlotView.prototype._renderTacticalItem = function(e, t) {
        var i = e.item
          , o = !1;
        return this._itemView && !this._itemView.canRender(i) && (this._itemView.dealloc(),
        this._itemView = null),
        this._itemView || (this._itemView = factories.ItemView.createTacticalItem(i),
        this._itemView.init(),
        o = !0),
        this._itemView.render(i, e),
        this._itemView instanceof UTSmallTacticsPlayerItemView && (this._itemView.setRole(t.type, i.hasPlusRolesForPositionRole(t.type, e.generalPosition), i.hasPlusPlusRolesForPositionRole(t.type, e.generalPosition), i.gender),
        this._itemView.setVariation(t.variation, i.gender),
        this._itemView.setOutOfPosition(i.isValid() && !e.inPossiblePosition)),
        o
    }
    ,
    UTSquadSlotView.prototype.renderPedestal = function(e, t) {
        this._pedestal.render(e, t)
    }
    ,
    UTSquadSlotView.prototype.renderChemistryPoints = function(e) {
        e.item.isPlayer() && e.item.isValid() || e.isCustomBrick() ? this._chemistryPoints.render(e.chemistry, 0, e.inPossiblePosition) : (this._chemistryPoints.reset(),
        this._chemistryPoints.setDisplay(!1))
    }
    ,
    UTSquadSlotView.prototype.setLockedState = function(e) {
        this.toggleClass("locked", e)
    }
    ,
    UTSquadSlotView.prototype.getIndex = function() {
        return this._slotIndex
    }
    ,
    UTSquadSlotView.prototype.getUniquePosition = function() {
        return this._uniquePosition
    }
    ,
    UTSquadSlotView.prototype.getItemView = function() {
        return this._itemView
    }
    ,
    UTSquadSlotView.prototype.setItemView = function(e) {
        this._itemView = e
    }
    ,
    UTSquadSlotView.prototype._tapDetected = function(e) {
        this._triggerActions(EventType.TAP)
    }
    ,
    UTSquadSlotView.prototype._mouseLeave = function(e) {
        this._triggerActions(EventType.MOUSELEAVE)
    }
    ,
    UTSquadSlotView.prototype._mouseEnter = function(e) {
        this._triggerActions(EventType.MOUSEENTER)
    }
    ,
    UTSquadSlotView
}(EATargetActionView);
UTSquadSlotView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-slot-view"),
        this._pedestal = new UTSquadSlotPedestalView,
        e.appendChild(this._pedestal.getRootElement()),
        this._chemistryPoints = new UTSquadSlotChemistryPointsView,
        this._chemistryPoints.getRootElement().classList.add("item"),
        e.appendChild(this._chemistryPoints.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadSlotView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._pedestal.destroy(),
    this._chemistryPoints.destroy()
}
,
UTSquadSlotView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadPitchView = function(t) {
    function UTSquadPitchView() {
        var e = t.call(this) || this;
        return e._slots = [],
        e._currentTheme = "standard",
        e._currentType = "standard",
        e._currentMode = "standard",
        e._currentFormation = "",
        e._animationDuration = 400,
        e._animationTimeout = 0,
        e.renderChemistry = !0,
        e
    }
    return __extends(UTSquadPitchView, t),
    UTSquadPitchView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        window.addEventListener(EventType.RESIZE, this._windowResizeCallback, !1)
    }
    ,
    UTSquadPitchView.prototype.dealloc = function() {
        this._clearSlotViews(),
        clearTimeout(this._animationTimeout),
        window.removeEventListener(EventType.RESIZE, this._windowResizeCallback, !1),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSquadPitchView.prototype.setTheme = function(e) {
        this.removeClass(this._currentTheme),
        "standard" !== e && this.addClass("theme-" + e),
        this._currentTheme = e
    }
    ,
    UTSquadPitchView.prototype.setType = function(e) {
        this.removeClass(this._currentType),
        "standard" !== e && this.addClass(e),
        this._currentType = e
    }
    ,
    UTSquadPitchView.prototype.setMode = function(e) {
        this.removeClass(this._currentMode),
        "standard" !== e && this.addClass(e),
        this._currentMode = e
    }
    ,
    UTSquadPitchView.prototype.setFormation = function(e, t) {
        var i = this;
        this._updateCanvasSize(),
        this._currentFormation !== e ? (this._isAnimating = !0,
        "" !== this._currentFormation && this.removeClass(this._currentFormation),
        this.addClass(e),
        this._animationTimeout = window.setTimeout(function() {
            clearTimeout(i._animationTimeout),
            i._isAnimating = !1,
            t && t()
        }, this._animationDuration),
        this._currentFormation = e) : !this._isAnimating && t && t()
    }
    ,
    UTSquadPitchView.prototype._clearSlotViews = function() {
        this._slots.forEach(function(e) {
            return e.dealloc()
        }),
        this._slots = []
    }
    ,
    UTSquadPitchView.prototype.getSlotViews = function() {
        return this._slots
    }
    ,
    UTSquadPitchView.prototype.setSlots = function(e, i) {
        var o = this;
        this._clearSlotViews(),
        e.forEach(function(e) {
            if (!(e.index < 0)) {
                var t = new UTSquadSlotView;
                t.init(),
                t.render(e, i.renderConcept, i.renderChemistry, i.renderRestrictions),
                t.addTarget(o, o._eSlotTapped, EventType.TAP),
                o.addSubview(t),
                o._slots.push(t)
            }
        }, this),
        this.layoutSubviews()
    }
    ,
    UTSquadPitchView.prototype.updateSlot = function(t, e, i, o) {
        void 0 === e && (e = !0),
        void 0 === i && (i = !0),
        void 0 === o && (o = !0);
        var n = JSUtils.find(this._slots, function(e) {
            return e.getIndex() === t.index
        });
        null == n || n.render(t, e, i, o)
    }
    ,
    UTSquadPitchView.prototype.setLockedSlots = function(t) {
        this._slots.forEach(function(e) {
            return e.setLockedState(0 <= t.indexOf(e.getIndex()))
        })
    }
    ,
    UTSquadPitchView.prototype.updateChemistry = function(o) {
        this._slots.forEach(function(t) {
            var e = JSUtils.find(o, function(e) {
                return e.index === t.getIndex()
            })
              , i = t.getItemView();
            e && t.renderChemistryPoints(e),
            e && i && (t.renderPedestal(e, !0),
            i.renderChemistryBreakdown(e.chemistry, e.nationChemistryPoints, e.leagueChemistryPoints, e.clubChemistryPoints))
        }, this),
        this._updateCanvasSize()
    }
    ,
    UTSquadPitchView.prototype._updateCanvasSize = function() {
        var e = this.getRootElement();
        this.__squadCanvas.setAttribute("width", e.clientWidth.toString()),
        this.__squadCanvas.setAttribute("height", e.clientHeight.toString())
    }
    ,
    UTSquadPitchView.prototype._getSlotViewByUniquePosition = function(t) {
        return JSUtils.find(this._slots, function(e) {
            return e.getUniquePosition() === t
        })
    }
    ,
    UTSquadPitchView.prototype._eSlotTapped = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(enums.UISquadPitchEvent.SLOT_SELECT, {
            slot: e,
            slotIndex: e.getIndex()
        })
    }
    ,
    UTSquadPitchView.prototype._tapDetected = function(e) {
        this.isInteractionEnabled() && e.target === this.__squadCanvas && this._triggerActions(EventType.TAP)
    }
    ,
    UTSquadPitchView
}(EATargetActionView);
UTSquadPitchView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-pitch-view"),
        this.__squadCanvas = document.createElement("canvas"),
        this.__squadCanvas.setAttribute("width", "400"),
        this.__squadCanvas.setAttribute("height", "300"),
        this.__squadCanvas.classList.add("ut-squad-pitch-view--canvas"),
        e.appendChild(this.__squadCanvas),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadPitchView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__squadCanvas = null
}
,
UTSquadPitchView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsPositionAdjustmentView = function(i) {
    function UTTacticsPositionAdjustmentView() {
        var t = i.call(this) || this;
        return t.animationDuration = 500,
        t.dragEndHandler = function(e) {
            return t.onDragEnd(e)
        }
        ,
        t.dragStartHandler = function(e) {
            return t.onDragStart(e)
        }
        ,
        t.dropHandler = function(e) {
            return t.onDrop(e)
        }
        ,
        t.utilDragDrop = null,
        t.windowResizeCb = t.onWindowResize.bind(t),
        t
    }
    return __extends(UTTacticsPositionAdjustmentView, i),
    UTTacticsPositionAdjustmentView.prototype.init = function() {
        i.prototype.init.call(this),
        this._pitch.init(),
        this._pitch.setType("standard"),
        this._pitch.renderChemistry = !1,
        this.setInteractionState(!0),
        window.addEventListener(EventType.RESIZE, this.windowResizeCb, !1)
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.dealloc = function() {
        var e = this.getRootElement();
        window.removeEventListener(EventType.RESIZE, this.windowResizeCb, !1),
        e.removeEventListener("eadragstart", this.dragStartHandler),
        e.removeEventListener("eadragend", this.dragEndHandler),
        e.removeEventListener("eadrop", this.dropHandler),
        this.utilDragDrop = null,
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.setInteractionState = function(e) {
        i.prototype.setInteractionState.call(this, e),
        this._pitch.setInteractionState(e)
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.setFormation = function(e) {
        var t = this
          , i = this.isInteractionEnabled();
        this.setInteractionState(!1),
        requestAnimationFrame(function() {
            return t._pitch.setFormation(e.name, function() {
                return t.setInteractionState(i)
            })
        })
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.setSlots = function(e) {
        this._pitch.setSlots(e, {
            renderConcept: !0,
            renderChemistry: !1
        })
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.initDragDrop = function(r, s) {
        var a = this
          , e = this.getRootElement();
        this.utilDragDrop || (this.utilDragDrop = new UTDragDropUtils(e)),
        this.utilDragDrop.addDropContainer("pitch", this._pitch, !0),
        this._pitch.getSlotViews().forEach(function(e) {
            var t = e.getItemView();
            if (a.utilDragDrop && t) {
                var i = e.getIndex()
                  , o = 0 <= r.indexOf(i)
                  , n = 0 <= s.indexOf(i);
                a.utilDragDrop.setDraggable(t, o),
                a.utilDragDrop.setDroppable(t, n),
                a.utilDragDrop.setSwapAnimation(t, o)
            }
        }),
        this.utilDragDrop.enabled ? this.utilDragDrop.updateDropSlotCache() : (this.utilDragDrop.enable(),
        e.removeEventListener("eadragstart", this.dragStartHandler),
        e.removeEventListener("eadragend", this.dragEndHandler),
        e.removeEventListener("eadrop", this.dropHandler),
        e.addEventListener("eadragstart", this.dragStartHandler),
        e.addEventListener("eadragend", this.dragEndHandler),
        e.addEventListener("eadrop", this.dropHandler))
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.getSlotByIndex = function(t) {
        return this._pitch.getSlotViews().filter(function(e) {
            return e.getIndex() === t
        })[0]
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.onDragStart = function(e) {
        var t = this.getSlotByIndex(e.detail.index);
        this._triggerActions(enums.UISquadPitchEvent.DRAGSTART, e.detail),
        t.addClass("empty")
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.onDragEnd = function(e) {
        var t, i = this, o = this.getSlotByIndex(e.detail.index), n = o.getItemView();
        if (n)
            if (null === (t = this.utilDragDrop) || void 0 === t ? void 0 : t.moved) {
                var r = n.getRootElement()
                  , s = o.getBoundingClientRect()
                  , a = [{
                    top: s.top + "px",
                    left: s.left + "px"
                }];
                this.setInteractionState(!1),
                this._triggerActions(enums.UISquadPitchEvent.DRAGEND, e.detail),
                r.animate(a, {
                    duration: this.animationDuration
                }).onfinish = function(e) {
                    return i.onDragReset(o)
                }
            } else
                this.onDragReset(o)
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.onDrop = function(e) {
        var t;
        this.setInteractionState(!1),
        this.swapElements(e.detail.dragging, e.detail.target),
        null === (t = this.utilDragDrop) || void 0 === t || t.updateDropSlotCache(),
        this._triggerActions(enums.UISquadPitchEvent.DRAGDROP, e.detail)
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.onDragReset = function(e) {
        var t;
        e.removeClass("empty"),
        null === (t = this.utilDragDrop) || void 0 === t || t.resetDrag(),
        this.setInteractionState(!0)
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.swapElements = function(e, t) {
        var i, o = this, n = this.getSlotByIndex(e), r = this.getSlotByIndex(t), s = n.getBoundingClientRect(), a = r.getBoundingClientRect(), l = n.getItemView(), c = r.getItemView(), u = null === (i = null == c ? void 0 : c.hasClass("empty")) || void 0 === i || i, d = null == c ? void 0 : c.getRootElement(), h = null == l ? void 0 : l.getRootElement(), p = [{
            top: a.top + "px",
            left: a.left + "px"
        }], _ = [{
            top: s.top + "px",
            left: s.left + "px"
        }];
        if (c && l && (!u && d && (c.addClass("dropTarget"),
        d.style.left = a.left + "px",
        d.style.top = a.top + "px"),
        r.addClass("empty"),
        n.getRootElement().appendChild(c.getRootElement()),
        r.getRootElement().appendChild(l.getRootElement()),
        h && (h.animate(p, {
            duration: this.animationDuration
        }).onfinish = function(e) {
            return o.onDragReset(r)
        }
        ),
        d)) {
            function sVc() {
                n.removeClass("empty"),
                n.setItemView(c),
                r.setItemView(l),
                o._triggerActions(enums.UISquadPitchEvent.ITEM_SWAP, {
                    swapFrom: e,
                    swapTo: t
                })
            }
            u ? sVc() : (n.addClass("noBackground"),
            d.animate(_, {
                duration: this.animationDuration
            }).onfinish = function(e) {
                c.removeClass("dropTarget"),
                d.style.removeProperty("left"),
                d.style.removeProperty("top"),
                n.removeClass("noBackground"),
                sVc()
            }
            )
        }
    }
    ,
    UTTacticsPositionAdjustmentView.prototype.onWindowResize = function(e) {
        var t;
        null === (t = this.utilDragDrop) || void 0 === t || t.updateInteractiveContainer()
    }
    ,
    UTTacticsPositionAdjustmentView
}(EATargetActionView);
UTTacticsPositionAdjustmentView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-position-adjustment-view"),
        this._pitch = new UTSquadPitchView,
        e.appendChild(this._pitch.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsPositionAdjustmentView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._pitch.destroy()
}
,
UTTacticsPositionAdjustmentView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsPositionAdjustmentViewController = function(s) {
    function UTTacticsPositionAdjustmentViewController() {
        var e = s.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsPositionAdjustmentViewController, s),
    UTTacticsPositionAdjustmentViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsPositionAdjustmentViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        s.prototype.dealloc.call(this)
    }
    ,
    UTTacticsPositionAdjustmentViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsPositionAdjustmentView
    }
    ,
    UTTacticsPositionAdjustmentViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("tactics.label.positioning")
    }
    ,
    UTTacticsPositionAdjustmentViewController.prototype.viewDidAppear = function() {
        var e = this.getView();
        if (s.prototype.viewDidAppear.call(this),
        this.tacticsViewModel) {
            var t = this.tacticsViewModel.getSquad()
              , i = this.tacticsViewModel.getSelectedMentality();
            if (t && i) {
                var o = i.getFormation()
                  , n = t.getTacticSlotsByMentalityId(i.getId())
                  , r = n.filter(function(e) {
                    return 0 < e.index
                }).map(function(e) {
                    return e.index
                });
                e.setSlots(n),
                o && e.setFormation(o),
                e.initDragDrop(r, r)
            }
        }
        e.addTarget(this, this.onItemSwap, enums.UISquadPitchEvent.ITEM_SWAP)
    }
    ,
    UTTacticsPositionAdjustmentViewController.prototype.viewWillDisappear = function() {
        s.prototype.viewWillDisappear.call(this),
        this.getView().removeTarget(this, this.onItemSwap, enums.UISquadPitchEvent.ITEM_SWAP)
    }
    ,
    UTTacticsPositionAdjustmentViewController.prototype.onItemSwap = function(e, t, i) {
        var o, n;
        null === (n = null === (o = this.tacticsViewModel) || void 0 === o ? void 0 : o.getSelectedMentality()) || void 0 === n || n.swapPositionsByIndex(i.swapFrom, i.swapTo)
    }
    ,
    UTTacticsPositionAdjustmentViewController
}(EAViewController)
  , UTSquadTacticsViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadTacticsViewModel(e) {
        var t = i.call(this) || this;
        return t.onDataUpdated = new EAObservable,
        t.selectedSlotPlayerVO = new UTPlayerRoleVO(PlayerPosition.GK),
        t.selectedMentalityId = TacticsProfileSlot.TACTICS_SLOT_1,
        t.selectedSlotId = 0,
        t.selectedStyleId = SquadMentalityStyle.BUILD_UP_PLAY,
        t.squad = null,
        t.service = e,
        t
    }
    return __extends(UTSquadTacticsViewModel, i),
    UTSquadTacticsViewModel.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.squad && (this.squad.onDataUpdated.unobserve(this),
        this.squad = null),
        this.onDataUpdated.clearObservers()
    }
    ,
    UTSquadTacticsViewModel.prototype.getDefaultProfiles = function() {
        return this.service.getTacticsDefaultProfiles()
    }
    ,
    UTSquadTacticsViewModel.prototype.requestManagerProfile = function(e) {
        return this.service.getManagerPresetById(e)
    }
    ,
    UTSquadTacticsViewModel.prototype.setSquad = function(e) {
        this.squad !== e && (this.squad && this.squad.onDataUpdated.unobserve(this),
        this.squad = e,
        this.squad.onDataUpdated.observe(this, this.onSquadUpdated),
        this.onDataUpdated.notify({
            squad: this.squad
        }))
    }
    ,
    UTSquadTacticsViewModel.prototype.getSlotById = function(e) {
        var t, i;
        return null !== (i = null === (t = this.squad) || void 0 === t ? void 0 : t.getTacticMentalityById(e)) && void 0 !== i ? i : null
    }
    ,
    UTSquadTacticsViewModel.prototype.setSelectedMentalityById = function(e) {
        this.selectedMentalityId !== e && (this.selectedMentalityId = e,
        this.onDataUpdated.notify({
            selectedMentality: this.getSelectedMentality()
        }))
    }
    ,
    UTSquadTacticsViewModel.prototype.setSelectedStyleId = function(e) {
        this.selectedStyleId !== e && (this.selectedStyleId = e,
        this.onDataUpdated.notify({
            selectedStyle: this.selectedStyleId
        }))
    }
    ,
    UTSquadTacticsViewModel.prototype.setSelectedSlotId = function(e) {
        var t = this.getSelectedMentality();
        if (this.selectedSlotId !== e && t && this.squad) {
            this.selectedSlotId = e;
            var i = this.squad.getSlot(this.selectedSlotId)
              , o = t.getRoleBySlotIndex(i.index, i.generalPosition);
            this.selectedSlotPlayerVO = new UTPlayerRoleVO(i.generalPosition),
            o && this.selectedSlotPlayerVO.setRoleVariation(o.type, o.variation),
            this.onDataUpdated.notify({
                selectedSlot: this.selectedSlotId
            })
        }
    }
    ,
    UTSquadTacticsViewModel.prototype.setSelectedRoleVariation = function(e, t) {
        var i, o = null === (i = this.squad) || void 0 === i ? void 0 : i.getSlot(this.selectedSlotId);
        if (o) {
            var n = t === TacticPlayerVariation.INVALID ? UTPlayerRoleVO.getDefaultVariationForPosition(o.generalPosition, e) : t;
            this.selectedSlotPlayerVO.setRoleVariation(e, n),
            o.playerRole = e;
            var r = this.getSelectedMentality();
            null == r || r.setModified(!0),
            this.onDataUpdated.notify({
                selectedSlotPlayerVO: this.selectedSlotPlayerVO
            })
        }
    }
    ,
    UTSquadTacticsViewModel.prototype.getSquad = function() {
        return this.squad
    }
    ,
    UTSquadTacticsViewModel.prototype.getSelectedSlotPlayerVO = function() {
        return this.selectedSlotPlayerVO
    }
    ,
    UTSquadTacticsViewModel.prototype.setSlotAsActive = function(e) {
        var t, i = null === (t = this.squad) || void 0 === t ? void 0 : t.getTacticMentalityById(e);
        i && (i.setState(TacticState.ACTIVE),
        this.onDataUpdated.notify({
            activeSlot: i.id
        }))
    }
    ,
    UTSquadTacticsViewModel.prototype.getActiveMentality = function() {
        var e, t;
        return null !== (t = null === (e = this.squad) || void 0 === e ? void 0 : e.getTacticMentalities().find(function(e) {
            return e.getState() === TacticState.ACTIVE
        })) && void 0 !== t ? t : null
    }
    ,
    UTSquadTacticsViewModel.prototype.getSelectedMentality = function() {
        var e, t, i, o = null === (e = this.squad) || void 0 === e ? void 0 : e.getTacticMentalityById(this.selectedMentalityId);
        return DebugUtils.Assert(JSUtils.isValid(o), "Squad mentality cannot be found for ID: " + this.selectedMentalityId + ". Defaulting to BALANCED."),
        o || (null !== (i = null === (t = this.squad) || void 0 === t ? void 0 : t.getTacticMentalityById(TacticsProfileSlot.TACTICS_SLOT_1)) && void 0 !== i ? i : null)
    }
    ,
    UTSquadTacticsViewModel.prototype.getMentalities = function() {
        var e, t;
        return null !== (t = null === (e = this.squad) || void 0 === e ? void 0 : e.getTacticMentalities()) && void 0 !== t ? t : []
    }
    ,
    UTSquadTacticsViewModel.prototype.getSlotByIndex = function(e) {
        var t, i;
        return null !== (i = null === (t = this.squad) || void 0 === t ? void 0 : t.getTacticMentalities()[e]) && void 0 !== i ? i : null
    }
    ,
    UTSquadTacticsViewModel.prototype.hasEmptySlots = function() {
        var e, t;
        return null !== (t = null === (e = this.squad) || void 0 === e ? void 0 : e.hasEmptyTacticSlots()) && void 0 !== t && t
    }
    ,
    UTSquadTacticsViewModel.prototype.getCustomizedSlots = function() {
        var e, t;
        return null !== (t = null === (e = this.squad) || void 0 === e ? void 0 : e.getCustomizedTacticSlots()) && void 0 !== t ? t : []
    }
    ,
    UTSquadTacticsViewModel.prototype.getFirstEmptySlot = function() {
        var e, t;
        return null !== (t = null === (e = this.squad) || void 0 === e ? void 0 : e.getFirstEmptyTacticSlot()) && void 0 !== t ? t : null
    }
    ,
    UTSquadTacticsViewModel.prototype.getSelectedStyleId = function() {
        return this.selectedStyleId
    }
    ,
    UTSquadTacticsViewModel.prototype.getSelectedSlotId = function() {
        return this.selectedSlotId
    }
    ,
    UTSquadTacticsViewModel.prototype.getRolesForSelectedSlotPosition = function() {
        var e, t = null === (e = this.squad) || void 0 === e ? void 0 : e.getSlot(this.selectedSlotId);
        return t ? this.service.getRoleIdsForPosition(t.generalPosition) : (DebugUtils.Assert(!1, "No selected slot found"),
        [])
    }
    ,
    UTSquadTacticsViewModel.prototype.getVariationsForSelectedSlotPosition = function() {
        var e, t, i = null === (e = this.squad) || void 0 === e ? void 0 : e.getSlot(this.selectedSlotId);
        if (i) {
            var o = this.getSelectedSlotPlayerVO()
              , n = null !== (t = UTPlayerRoleVO.getVariationsForRoleAndPositionId(i.generalPosition, o.type)) && void 0 !== t ? t : []
              , r = this.service.getTacticRoles();
            return n.filter(function(t) {
                return r.some(function(e) {
                    return e.positionGroup === o.positionGroup && e.type === o.type && e.variation === t
                })
            })
        }
        return DebugUtils.Assert(!1, "No selected slot found"),
        []
    }
    ,
    UTSquadTacticsViewModel.prototype.deleteTacticSlot = function(e) {
        var t, i = this.getSquad();
        if (i)
            return t = this.service.deleteTacticsSlot(e, i.getId()),
            this._trackRequest(t, !0),
            t;
        var o = new UTServiceResponseDTO;
        return o.data = {
            newActiveProfile: null
        },
        (t = new EAObservable).notify(o),
        t
    }
    ,
    UTSquadTacticsViewModel.prototype.saveModifiedMentalities = function() {
        var e = new EAObservable
          , t = this.getSquad();
        if (t)
            (e = services.Squad.saveTactics(t)) && this._trackRequest(e, !0);
        else {
            DebugUtils.Assert(JSUtils.isValid(t), "Missing squad context.");
            var i = new UTHttpResponseDTO;
            i.response = {
                tactics: null
            },
            e.notify(i)
        }
        return e
    }
    ,
    UTSquadTacticsViewModel.prototype.onSquadUpdated = function(e, t) {
        var i = {};
        t.chemistry && (i.chemistry = t.chemistry),
        t.rating && (i.rating = t.rating),
        t.slots && (i.slots = t.slots),
        t.type && (i.type = t.type),
        t.tactics && (i.tactics = t.tactics),
        this.onDataUpdated.notify(i)
    }
    ,
    UTSquadTacticsViewModel.prototype.copyTacticsSlot = function(e, t) {
        var i = this.squad;
        if (i) {
            var o = i.getTacticMentalityById(e)
              , n = i.getTacticMentalityById(t);
            o && n && (n.copyFrom(o),
            i.setTacticMentality(n),
            this.onDataUpdated.notify({
                tactics: {
                    mentality: n
                }
            }))
        }
    }
    ,
    UTSquadTacticsViewModel.prototype.overrideTacticSlot = function(e, t) {
        var i = this.squad;
        if (i) {
            var o = i.getTacticMentalityById(e);
            o && (o.copyFrom(t),
            i.setTacticMentality(o),
            this.onDataUpdated.notify({
                tactics: {
                    mentality: o
                }
            }))
        }
    }
    ,
    UTSquadTacticsViewModel
}(UTViewModel))
  , UTTacticsFormationSelectView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTTacticsFormationSelectView() {
        var e = i.call(this) || this;
        return e.formationDropDown = null,
        e
    }
    return __extends(UTTacticsFormationSelectView, i),
    UTTacticsFormationSelectView.prototype.init = function() {
        var e = services.Localization;
        i.prototype.init.call(this),
        this.setInteractionState(!0),
        this.__title.textContent = e.localize("tactics.label.formation"),
        this._btnSave.init(),
        this._btnSave.setText(e.localize("tactics.label.save")),
        isPhone() ? this._btnSave.addTarget(this, this.onButtonSelected, EventType.TAP) : DOMKit.toggleDisplayStyle(this.__header, !1),
        this._btnEditPositions.init(),
        this._btnEditPositions.setText(e.localize("tactics.label.positioning")),
        this._btnEditPositions.addTarget(this, this.onButtonSelected, EventType.TAP)
    }
    ,
    UTTacticsFormationSelectView.prototype.dealloc = function() {
        this.formationDropDown && (this.formationDropDown.dealloc(),
        this.formationDropDown = null),
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsFormationSelectView.prototype.setInteractionState = function(e) {
        var t;
        i.prototype.setInteractionState.call(this, e),
        null === (t = this.formationDropDown) || void 0 === t || t.setInteractionState(e)
    }
    ,
    UTTacticsFormationSelectView.prototype.setCurrentFormation = function(e) {
        var t;
        DebugUtils.Assert(JSUtils.isValid(this.formationDropDown), "Expected formation drop down to be instantiated before assigning value."),
        null === (t = this.formationDropDown) || void 0 === t || t.setIndexById(e)
    }
    ,
    UTTacticsFormationSelectView.prototype.setFormationImage = function(e) {
        this._imgFormation.src = AssetLocationUtils.getTacticFormationImageUri(e)
    }
    ,
    UTTacticsFormationSelectView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTTacticsFormationSelectView.prototype.setFormationOptions = function(e) {
        this.formationDropDown || (this.formationDropDown = new UTDropDownControl,
        this.formationDropDown.init(),
        this.formationDropDown.addTarget(this, this.onDropDownControlChange, EventType.CHANGE),
        this.addSubview(this.formationDropDown, this.__adjustmentArea),
        this.layoutSubviews()),
        this.formationDropDown.setOptions(e)
    }
    ,
    UTTacticsFormationSelectView.prototype.setSaveButtonInteractionState = function(e) {
        this._btnSave.setInteractionState(e)
    }
    ,
    UTTacticsFormationSelectView.prototype.onDropDownControlChange = function(e, t, i) {
        this.isInteractionEnabled() && (this.setFormationImage(i.id),
        this._triggerActions(UTTacticsFormationSelectView.Event.FORMATION_CHANGE, {
            id: i.id,
            value: i.value
        }))
    }
    ,
    UTTacticsFormationSelectView.prototype.onButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && (e === this._btnSave ? this._triggerActions(UTTacticsFormationSelectView.Event.SAVE_TACTICS) : e === this._btnEditPositions && this._triggerActions(UTTacticsFormationSelectView.Event.SELECT_POSITIONING))
    }
    ,
    UTTacticsFormationSelectView.Event = Object.freeze({
        FORMATION_CHANGE: "UTTacticsFormationSelectView.Event.FORMATION_CHANGE",
        SAVE_TACTICS: "UTTacticsFormationSelectView.Event.SAVE_TACTICS",
        SELECT_POSITIONING: "UTTacticsFormationSelectView.Event.SELECT_POSITIONING"
    }),
    UTTacticsFormationSelectView
}(EATargetActionView));
UTTacticsFormationSelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-formation-select-view"),
        this.__header = document.createElement("header"),
        this.__header.classList.add("ut-tactics-formation-select-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-formation-select-view--title"),
        this.__header.appendChild(this.__title),
        this._btnSave = new UTStandardButtonControl,
        this._btnSave.getRootElement().classList.add("mini"),
        this._btnSave.getRootElement().classList.add("call-to-action"),
        this.__header.appendChild(this._btnSave.getRootElement()),
        e.appendChild(this.__header),
        this.__adjustmentArea = document.createElement("div"),
        this.__adjustmentArea.classList.add("ut-tactics-formation-select-view--formation-container"),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-tactics-formation-select-view--description"),
        this.__adjustmentArea.appendChild(this.__description),
        this._imgFormation = new EAImageView,
        this.__adjustmentArea.appendChild(this._imgFormation.getRootElement()),
        e.appendChild(this.__adjustmentArea);
        var t = document.createElement("div");
        t.classList.add("ut-button-group"),
        this._btnEditPositions = new UTGroupButtonControl,
        this._btnEditPositions.getRootElement().classList.add("more"),
        t.appendChild(this._btnEditPositions.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsFormationSelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__title = null,
    this._btnSave.destroy(),
    this.__adjustmentArea = null,
    this.__description = null,
    this._imgFormation.destroy(),
    this._btnEditPositions.destroy()
}
,
UTTacticsFormationSelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsFormationSelectViewController = function(a) {
    function UTTacticsFormationSelectViewController() {
        var e = a.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsFormationSelectViewController, a),
    UTTacticsFormationSelectViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsFormationSelectViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        a.prototype.dealloc.call(this)
    }
    ,
    UTTacticsFormationSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsFormationSelectView
    }
    ,
    UTTacticsFormationSelectViewController.prototype.getNavigationTitle = function() {
        if (isPhone() && this.tacticsViewModel) {
            var e = this.tacticsViewModel.getSquad();
            if (e)
                return e.getName()
        }
        return services.Localization.localize("tactics.label.formation")
    }
    ,
    UTTacticsFormationSelectViewController.prototype.viewDidAppear = function() {
        var e, t;
        a.prototype.viewDidAppear.call(this);
        var i = this.getView()
          , o = this.getNavigationController();
        if (o && (o.setNavigationVisibility(!0, !1),
        isPhone() || o.setNavigationStyle(UTNavigationBarView.Style.SECONDARY)),
        this.tacticsViewModel) {
            var n = this.tacticsViewModel.getSquad()
              , r = this.tacticsViewModel.getSelectedMentality();
            if (n && r) {
                var s = null !== (t = null === (e = r.getFormation()) || void 0 === e ? void 0 : e.id) && void 0 !== t ? t : 0;
                i.setSaveButtonInteractionState(n.hasModifiedTactics()),
                i.setFormationOptions(factories.DataProvider.getFormationDP()),
                i.setCurrentFormation(s),
                i.setFormationImage(s),
                i.setDescription(services.Localization.localize("tactics.formation.description"))
            }
            this.tacticsViewModel.onDataUpdated.observe(this, this.onTacticsViewModelUpdated)
        }
        i.addTarget(this, this.onSaveMentality, UTTacticsFormationSelectView.Event.SAVE_TACTICS),
        i.addTarget(this, this.onChangeFormation, UTTacticsFormationSelectView.Event.FORMATION_CHANGE),
        i.addTarget(this, this.onSelectPositioning, UTTacticsFormationSelectView.Event.SELECT_POSITIONING)
    }
    ,
    UTTacticsFormationSelectViewController.prototype.viewWillDisappear = function() {
        a.prototype.viewWillDisappear.call(this),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.unobserve(this);
        var e = this.getView();
        e.removeTarget(this, this.onSaveMentality, UTTacticsFormationSelectView.Event.SAVE_TACTICS),
        e.removeTarget(this, this.onChangeFormation, UTTacticsFormationSelectView.Event.FORMATION_CHANGE),
        e.removeTarget(this, this.onSelectPositioning, UTTacticsFormationSelectView.Event.SELECT_POSITIONING),
        services.UserSettings.removeSessionItem(UserSettingsKey.TACTICS_FORMATION_MESSAGE_DISPLAYED)
    }
    ,
    UTTacticsFormationSelectViewController.prototype.onSaveMentality = function(i, e, t) {
        var o = this;
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to save mentality."),
        this.tacticsViewModel && this.tacticsViewModel.saveModifiedMentalities().observe(this, function(e, t) {
            e.unobserve(o),
            i.setSaveButtonInteractionState(!t.success)
        })
    }
    ,
    UTTacticsFormationSelectViewController.prototype.onSelectPositioning = function(e, t, i) {
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load position adjustment view."),
        this.tacticsViewModel) {
            var o = this.getNavigationController();
            if (o) {
                var n = new UTTacticsPositionAdjustmentViewController;
                n.initWithTacticsViewModel(this.tacticsViewModel),
                o.pushViewController(n)
            }
        }
    }
    ,
    UTTacticsFormationSelectViewController.prototype.onChangeFormation = function(e, t, i) {
        var r = this;
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to change mentality formation."),
        this.tacticsViewModel) {
            function MYc() {
                var e = repositories.Squad.getFormation(i.value);
                DebugUtils.Assert(JSUtils.isValid(e), "Could not find formation with name: " + i.value),
                e && (null == s || s.setFormation(e))
            }
            var s = this.tacticsViewModel.getSelectedMentality()
              , o = services.UserSettings.getSessionItem(UserSettingsKey.TACTICS_FORMATION_MESSAGE_DISPLAYED)
              , n = JSUtils.isString(o) && "true" === o.toLowerCase()
              , a = "true" === services.UserSettings.getItem(UserSettingsKey.TACTICS_FORMATION_MESSAGE_DISPLAYED, "false").toLowerCase();
            if (n || a)
                MYc();
            else {
                var l = services.Localization
                  , c = new UTActionConfirmationPopupViewController;
                c.modalDisplayStyle = "form",
                c.modalDisplayDimensions.width = "380px",
                c.modalCanDismissFromShield = !1,
                c.setTitleText(l.localize("tactics.formation.popup.title")),
                c.setBodyText(l.localize("tactics.formation.popup.body")),
                c.onExit.observe(this, function(e, t) {
                    var i, o;
                    if (e.unobserve(r),
                    r.dismissViewController(),
                    t === enums.UIDialogOptions.OK)
                        c.getShowConfirmationPopup() ? services.UserSettings.setSessionItem(UserSettingsKey.TACTICS_FORMATION_MESSAGE_DISPLAYED, "true") : services.UserSettings.setItem(UserSettingsKey.TACTICS_FORMATION_MESSAGE_DISPLAYED, "true"),
                        MYc();
                    else {
                        var n = r.getView();
                        n.removeTarget(r, r.onChangeFormation, UTTacticsFormationSelectView.Event.FORMATION_CHANGE),
                        n.setCurrentFormation(null !== (o = null === (i = null == s ? void 0 : s.getFormation()) || void 0 === i ? void 0 : i.id) && void 0 !== o ? o : 0),
                        n.addTarget(r, r.onChangeFormation, UTTacticsFormationSelectView.Event.FORMATION_CHANGE)
                    }
                }),
                this.presentViewController(c)
            }
        }
    }
    ,
    UTTacticsFormationSelectViewController.prototype.onTacticsViewModelUpdated = function(e, t) {
        var i, o;
        if (JSUtils.isObject(t) && t.tactics && t.tactics.formation) {
            var n = this.getView()
              , r = null === (i = this.tacticsViewModel) || void 0 === i ? void 0 : i.getSquad();
            n.setSaveButtonInteractionState(null !== (o = null == r ? void 0 : r.hasModifiedTactics()) && void 0 !== o && o)
        }
    }
    ,
    UTTacticsFormationSelectViewController
}(EAViewController)
  , UTPlayerRoleTableCellView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerRoleTableCellView() {
        var e = i.call(this) || this;
        return e.id = -1,
        e
    }
    return __extends(UTPlayerRoleTableCellView, i),
    UTPlayerRoleTableCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTPlayerRoleTableCellView.prototype.setInteractionState = function(e) {
        var t = this._interactionState;
        i.prototype.setInteractionState.call(this, e),
        this._interactionState !== t && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTPlayerRoleTableCellView.prototype.setId = function(e) {
        this.id = e
    }
    ,
    UTPlayerRoleTableCellView.prototype.getId = function() {
        return this.id
    }
    ,
    UTPlayerRoleTableCellView.prototype.setRoleNameById = function(e, t) {
        void 0 === t && (t = GrammaticalGender.NEUTER),
        this.__name.textContent = services.Localization.localize("tactics.roles.role" + e, [], {
            gender: t
        })
    }
    ,
    UTPlayerRoleTableCellView.prototype.setRoleDescriptionById = function(e, t) {
        void 0 === t && (t = GrammaticalGender.NEUTER),
        this.__description.textContent = services.Localization.localize("tactics.roles.role" + e + ".description", [], {
            gender: t
        })
    }
    ,
    UTPlayerRoleTableCellView.prototype.setPlusRole = function(e) {
        DOMKit.toggleClass(this.__name, "plus", e)
    }
    ,
    UTPlayerRoleTableCellView.prototype.setPlusPlusRole = function(e) {
        DOMKit.toggleClass(this.__name, "plusplus", e)
    }
    ,
    UTPlayerRoleTableCellView.prototype._mouseEnter = function(e) {
        i.prototype._mouseEnter.call(this, e),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerRoleTableCellView.prototype._mouseLeave = function(e) {
        i.prototype._mouseLeave.call(this, e),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerRoleTableCellView.prototype._touchStarted = function(e) {
        i.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerRoleTableCellView.prototype._touchMoved = function(e) {
        i.prototype._touchMoved.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerRoleTableCellView.prototype._touchEnded = function(e) {
        i.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerRoleTableCellView.prototype._tapDetected = function(e) {
        i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTPlayerRoleTableCellView
}(EATargetActionView));
UTPlayerRoleTableCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-player-role-table-cell-view"),
        this.__name = document.createElement("h1"),
        this.__name.classList.add("ut-player-role-table-cell-view--name"),
        e.appendChild(this.__name),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-player-role-table-cell-view--description"),
        e.appendChild(this.__description),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerRoleTableCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__name = null,
    this.__description = null
}
,
UTPlayerRoleTableCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsBaseSelectView = function(e) {
    function UTTacticsBaseSelectView() {
        return e.call(this) || this
    }
    return __extends(UTTacticsBaseSelectView, e),
    UTTacticsBaseSelectView.prototype.init = function() {
        e.prototype.init.call(this),
        this.setInteractionState(!0),
        this._btnCancel.setText(services.Localization.localize("common.dialog.cancel"))
    }
    ,
    UTTacticsBaseSelectView.prototype.toggleOutOfPositionIcon = function(e) {
        this.__outOfPositionIcon.classList.toggle("hidden", !e)
    }
    ,
    UTTacticsBaseSelectView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTacticsBaseSelectView
}(EATargetActionView)
  , UTTacticsRoleSelectView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsRoleSelectView() {
        var e = t.call(this) || this;
        return e.roleCellViews = [],
        e
    }
    return __extends(UTTacticsRoleSelectView, t),
    UTTacticsRoleSelectView.prototype.init = function() {
        t.prototype.init.call(this),
        this._btnCancel.init(),
        this._btnCancel.addTarget(this, this.onDismissButtonSelected, EventType.TAP)
    }
    ,
    UTTacticsRoleSelectView.prototype.dealloc = function() {
        this.clearRoleCells(),
        this._btnCancel.removeTarget(this, this.onDismissButtonSelected, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsRoleSelectView.prototype.clearRoleCells = function() {
        this.roleCellViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.roleCellViews = []
    }
    ,
    UTTacticsRoleSelectView.prototype.generateRoleCell = function(e, t, i) {
        var o = new UTPlayerRoleTableCellView;
        o.init(),
        o.setId(e),
        o.setRoleNameById(e, t.gender),
        o.setRoleDescriptionById(e, t.gender),
        t.hasPlusPlusRolesForPositionRole(e, i) ? o.setPlusPlusRole(!0) : t.hasPlusRolesForPositionRole(e, i) && o.setPlusRole(!0),
        o.addTarget(this, this.onRoleSelected, EventType.TAP),
        this.roleCellViews.push(o),
        this.addSubview(o, this.__table)
    }
    ,
    UTTacticsRoleSelectView.prototype.setRoleGroup = function(e, t, i) {
        var o = this;
        this.clearRoleCells(),
        e.forEach(function(e) {
            return o.generateRoleCell(e, t, i)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsRoleSelectView.prototype.onDismissButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsRoleSelectView.Event.DISMISS)
    }
    ,
    UTTacticsRoleSelectView.prototype.onRoleSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsRoleSelectView.Event.ROLE_SELECTED, {
            id: e.getId()
        })
    }
    ,
    UTTacticsRoleSelectView.Event = Object.freeze({
        DISMISS: "UTTacticsRoleSelectView.DISMISS",
        ROLE_SELECTED: "UTTacticsRoleSelectView.ROLE_SELECTED"
    }),
    UTTacticsRoleSelectView
}(UTTacticsBaseSelectView));
UTTacticsRoleSelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-role-select-view");
        var t = document.createElement("header");
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-role-select-view--title"),
        t.appendChild(this.__title),
        this.__outOfPositionIcon = document.createElement("span"),
        this.__outOfPositionIcon.classList.add("ut-tactics-role-select-view--oop-icon"),
        t.appendChild(this.__outOfPositionIcon),
        e.appendChild(t),
        this.__table = document.createElement("div"),
        this.__table.classList.add("ut-tactics-role-select-view--table"),
        e.appendChild(this.__table);
        var i = document.createElement("div");
        i.classList.add("ut-button-group"),
        this._btnCancel = new UTGroupButtonControl,
        this._btnCancel.getRootElement().classList.add("negative"),
        i.appendChild(this._btnCancel.getRootElement()),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsRoleSelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__outOfPositionIcon = null,
    this.__table = null,
    this._btnCancel.destroy()
}
,
UTTacticsRoleSelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsRoleSelectViewController = function(a) {
    function UTTacticsRoleSelectViewController() {
        var e = a.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsRoleSelectViewController, a),
    UTTacticsRoleSelectViewController.prototype.initWithTacticsViewModel = function(e) {
        DebugUtils.Assert(!this.initialized, "Attempted to re-initialise the view controller."),
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsRoleSelectViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        a.prototype.dealloc.call(this)
    }
    ,
    UTTacticsRoleSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsRoleSelectView
    }
    ,
    UTTacticsRoleSelectViewController.prototype.viewDidAppear = function() {
        var e;
        a.prototype.viewDidAppear.call(this);
        var t = this.getView();
        if (this.tacticsViewModel) {
            var i = services.Localization
              , o = null === (e = this.tacticsViewModel.getSquad()) || void 0 === e ? void 0 : e.getSlot(this.tacticsViewModel.getSelectedSlotId())
              , n = this.tacticsViewModel.getRolesForSelectedSlotPosition()
              , r = null == o ? void 0 : o.item.gender;
            if (n && o) {
                var s = o.item.possiblePositions.includes(o.generalPosition);
                t.toggleOutOfPositionIcon(!s),
                t.setTitle(i.localize("tactics.label.roles-for-position", [i.localize("extendedPlayerInfo.positions.position" + o.generalPosition, [], {
                    gender: null != r ? r : GrammaticalGender.NEUTER
                })])),
                t.setRoleGroup(n, o.item, o.generalPosition)
            }
        }
        t.addTarget(this, this.onDismissSelected, UTTacticsRoleSelectView.Event.DISMISS),
        t.addTarget(this, this.onRoleSelected, UTTacticsRoleSelectView.Event.ROLE_SELECTED)
    }
    ,
    UTTacticsRoleSelectViewController.prototype.viewWillDisappear = function() {
        a.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.onDismissSelected, UTTacticsRoleSelectView.Event.DISMISS),
        e.removeTarget(this, this.onRoleSelected, UTTacticsRoleSelectView.Event.ROLE_SELECTED)
    }
    ,
    UTTacticsRoleSelectViewController.prototype.onDismissSelected = function(e, t, i) {
        var o = this.getParentViewController();
        o && o.getPresentedViewController() === this && o.dismissViewController(!0)
    }
    ,
    UTTacticsRoleSelectViewController.prototype.onRoleSelected = function(e, t, i) {
        var o = this.getParentViewController();
        this.tacticsViewModel && this.tacticsViewModel.setSelectedRoleVariation(i.id, TacticPlayerVariation.INVALID),
        o && o.getPresentedViewController() === this && o.dismissViewController(!0)
    }
    ,
    UTTacticsRoleSelectViewController
}(EAViewController)
  , UTPlayerVariationTableCellView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerVariationTableCellView() {
        var e = i.call(this) || this;
        return e.id = -1,
        e
    }
    return __extends(UTPlayerVariationTableCellView, i),
    UTPlayerVariationTableCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTPlayerVariationTableCellView.prototype.setInteractionState = function(e) {
        var t = this._interactionState;
        i.prototype.setInteractionState.call(this, e),
        this._interactionState !== t && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTPlayerVariationTableCellView.prototype.setId = function(e) {
        this.id = e
    }
    ,
    UTPlayerVariationTableCellView.prototype.getId = function() {
        return this.id
    }
    ,
    UTPlayerVariationTableCellView.prototype.setVariationNameById = function(e, t) {
        void 0 === t && (t = GrammaticalGender.NEUTER),
        this.__name.textContent = services.Localization.localize("tactics.roles.variation" + e, [], {
            gender: t
        })
    }
    ,
    UTPlayerVariationTableCellView.prototype.setVariationDescriptionById = function(e, t, i) {
        void 0 === i && (i = GrammaticalGender.NEUTER),
        this.__description.textContent = services.Localization.localize("tactics.roles.role" + e + ".variation" + t + ".description", [], {
            gender: i
        })
    }
    ,
    UTPlayerVariationTableCellView.prototype._mouseEnter = function(e) {
        i.prototype._mouseEnter.call(this, e),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerVariationTableCellView.prototype._mouseLeave = function(e) {
        i.prototype._mouseLeave.call(this, e),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerVariationTableCellView.prototype._touchStarted = function(e) {
        i.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerVariationTableCellView.prototype._touchMoved = function(e) {
        i.prototype._touchMoved.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerVariationTableCellView.prototype._touchEnded = function(e) {
        i.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerVariationTableCellView.prototype._tapDetected = function(e) {
        i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTPlayerVariationTableCellView
}(EATargetActionView));
UTPlayerVariationTableCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-player-variation-table-cell-view"),
        this.__name = document.createElement("h1"),
        this.__name.classList.add("ut-player-variation-table-cell-view--name"),
        e.appendChild(this.__name),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-player-variation-table-cell-view--description"),
        e.appendChild(this.__description),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerVariationTableCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__name = null,
    this.__description = null
}
,
UTPlayerVariationTableCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsVariationSelectView = function(t) {
    function UTTacticsVariationSelectView() {
        var e = t.call(this) || this;
        return e.variationCellViews = [],
        e
    }
    return __extends(UTTacticsVariationSelectView, t),
    UTTacticsVariationSelectView.prototype.init = function() {
        t.prototype.init.call(this),
        this._btnCancel.init(),
        this._btnCancel.addTarget(this, this.onDismissButtonSelected, EventType.TAP)
    }
    ,
    UTTacticsVariationSelectView.prototype.dealloc = function() {
        this.clearVariationCells(),
        this._btnCancel.removeTarget(this, this.onDismissButtonSelected, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsVariationSelectView.prototype.clearVariationCells = function() {
        this.variationCellViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.variationCellViews = []
    }
    ,
    UTTacticsVariationSelectView.prototype.generateVariationCell = function(e, t, i) {
        var o = new UTPlayerVariationTableCellView;
        o.init(),
        o.setId(t),
        o.setVariationNameById(t, i.gender),
        o.addTarget(this, this.onVariationSelected, EventType.TAP),
        o.setVariationDescriptionById(e, t, i.gender),
        this.variationCellViews.push(o),
        this.addSubview(o, this.__table)
    }
    ,
    UTTacticsVariationSelectView.prototype.setVariationGroup = function(e, t, i) {
        var o = this;
        this.clearVariationCells(),
        e.forEach(function(e) {
            return o.generateVariationCell(t, e, i)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsVariationSelectView.prototype.onDismissButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsVariationSelectView.Event.DISMISS)
    }
    ,
    UTTacticsVariationSelectView.prototype.onVariationSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsVariationSelectView.Event.VARIATION_SELECTED, {
            id: e.getId()
        })
    }
    ,
    UTTacticsVariationSelectView.Event = Object.freeze({
        DISMISS: "UTTacticsVariationSelectView.DISMISS",
        VARIATION_SELECTED: "UTTacticsVariationSelectView.VARIATION_SELECTED"
    }),
    UTTacticsVariationSelectView
}(UTTacticsBaseSelectView);
UTTacticsVariationSelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-variation-select-view");
        var t = document.createElement("header");
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-variation-select-view--title"),
        t.appendChild(this.__title),
        this.__outOfPositionIcon = document.createElement("span"),
        this.__outOfPositionIcon.classList.add("ut-tactics-variation-select-view--oop-icon"),
        t.appendChild(this.__outOfPositionIcon),
        e.appendChild(t),
        this.__table = document.createElement("div"),
        this.__table.classList.add("ut-tactics-variation-select-view--table"),
        e.appendChild(this.__table);
        var i = document.createElement("div");
        i.classList.add("ut-button-group"),
        this._btnCancel = new UTGroupButtonControl,
        this._btnCancel.getRootElement().classList.add("negative"),
        i.appendChild(this._btnCancel.getRootElement()),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsVariationSelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this.__outOfPositionIcon = null,
    this.__table = null,
    this._btnCancel.destroy()
}
,
UTTacticsVariationSelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsVariationSelectViewController = function(l) {
    function UTTacticsVariationSelectViewController() {
        var e = l.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsVariationSelectViewController, l),
    UTTacticsVariationSelectViewController.prototype.initWithTacticsViewModel = function(e) {
        DebugUtils.Assert(!this.initialized, "Attempted to re-initialise the view controller."),
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsVariationSelectViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        l.prototype.dealloc.call(this)
    }
    ,
    UTTacticsVariationSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsVariationSelectView
    }
    ,
    UTTacticsVariationSelectViewController.prototype.viewDidAppear = function() {
        var e;
        l.prototype.viewDidAppear.call(this);
        var t = this.getView();
        if (this.tacticsViewModel) {
            var i = services.Localization
              , o = null === (e = this.tacticsViewModel.getSquad()) || void 0 === e ? void 0 : e.getSlot(this.tacticsViewModel.getSelectedSlotId())
              , n = this.tacticsViewModel.getVariationsForSelectedSlotPosition()
              , r = this.tacticsViewModel.getSelectedSlotPlayerVO()
              , s = null == o ? void 0 : o.item.gender;
            if (n && o) {
                var a = o.item.possiblePositions.includes(o.generalPosition);
                t.toggleOutOfPositionIcon(!a),
                t.setTitle(services.Localization.localize("tactics.label.variations-for-role", [i.localize("tactics.roles.role" + r.type, [], {
                    gender: null != s ? s : GrammaticalGender.NEUTER
                })])),
                t.setVariationGroup(n, r.type, o.item)
            }
        }
        t.addTarget(this, this.onDismissSelected, UTTacticsVariationSelectView.Event.DISMISS),
        t.addTarget(this, this.onVariationSelected, UTTacticsVariationSelectView.Event.VARIATION_SELECTED)
    }
    ,
    UTTacticsVariationSelectViewController.prototype.viewWillDisappear = function() {
        l.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.onDismissSelected, UTTacticsVariationSelectView.Event.DISMISS),
        e.removeTarget(this, this.onVariationSelected, UTTacticsVariationSelectView.Event.VARIATION_SELECTED)
    }
    ,
    UTTacticsVariationSelectViewController.prototype.onDismissSelected = function(e, t, i) {
        var o = this.getParentViewController();
        o && o.getPresentedViewController() === this && o.dismissViewController(!0)
    }
    ,
    UTTacticsVariationSelectViewController.prototype.onVariationSelected = function(e, t, i) {
        var o = this.getParentViewController();
        this.tacticsViewModel && this.tacticsViewModel.setSelectedRoleVariation(this.tacticsViewModel.getSelectedSlotPlayerVO().type, i.id),
        o && o.getPresentedViewController() === this && o.dismissViewController(!0)
    }
    ,
    UTTacticsVariationSelectViewController
}(EAViewController)
  , UTPlayerRoleCellView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTPlayerRoleCellView() {
        return i.call(this) || this
    }
    return __extends(UTPlayerRoleCellView, i),
    UTPlayerRoleCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTPlayerRoleCellView.prototype.setInteractionState = function(e) {
        var t = this._interactionState;
        i.prototype.setInteractionState.call(this, e),
        this._interactionState !== t && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTPlayerRoleCellView.prototype.setRoleNameById = function(e, t) {
        void 0 === t && (t = GrammaticalGender.NEUTER),
        this.__roleName.textContent = services.Localization.localize("tactics.roles.role" + e, [], {
            gender: t
        })
    }
    ,
    UTPlayerRoleCellView.prototype.setRoleDescriptionById = function(e, t) {
        void 0 === t && (t = GrammaticalGender.NEUTER),
        this.__roleDescription.textContent = services.Localization.localize("tactics.roles.role" + e + ".description", [], {
            gender: t
        })
    }
    ,
    UTPlayerRoleCellView.prototype.setPlusRole = function(e) {
        DOMKit.toggleClass(this.__roleName, "plus", e)
    }
    ,
    UTPlayerRoleCellView.prototype.setPlusPlusRole = function(e) {
        DOMKit.toggleClass(this.__roleName, "plusplus", e)
    }
    ,
    UTPlayerRoleCellView.prototype.toggleOutOfPositionIcon = function(e) {
        this.__icon.classList.toggle("hidden", !e)
    }
    ,
    UTPlayerRoleCellView.prototype._mouseEnter = function(e) {
        i.prototype._mouseEnter.call(this, e),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerRoleCellView.prototype._mouseLeave = function(e) {
        i.prototype._mouseLeave.call(this, e),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerRoleCellView.prototype._touchStarted = function(e) {
        i.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerRoleCellView.prototype._touchMoved = function(e) {
        i.prototype._touchMoved.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerRoleCellView.prototype._touchEnded = function(e) {
        i.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerRoleCellView.prototype._tapDetected = function(e) {
        i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTPlayerRoleCellView
}(EATargetActionView));
UTPlayerRoleCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-player-role-cell-view");
        var t = document.createElement("div");
        t.classList.add("ut-player-role-cell-view--content");
        var i = document.createElement("div");
        i.classList.add("ut-player-role-cell-view--name-container"),
        this.__roleName = document.createElement("span"),
        this.__roleName.classList.add("name"),
        i.appendChild(this.__roleName),
        this.__icon = document.createElement("span"),
        this.__icon.classList.add("ut-player-role-cell-view--oop-icon"),
        i.appendChild(this.__icon),
        t.appendChild(i),
        this.__roleDescription = document.createElement("span"),
        this.__roleDescription.classList.add("description"),
        t.appendChild(this.__roleDescription),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerRoleCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__roleName = null,
    this.__icon = null,
    this.__roleDescription = null
}
,
UTPlayerRoleCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTPlayerVariationCellView = function(i) {
    function UTPlayerVariationCellView() {
        return i.call(this) || this
    }
    return __extends(UTPlayerVariationCellView, i),
    UTPlayerVariationCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTPlayerVariationCellView.prototype.setInteractionState = function(e) {
        var t = this._interactionState;
        i.prototype.setInteractionState.call(this, e),
        this._interactionState !== t && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTPlayerVariationCellView.prototype.toggleOutOfPositionIcon = function(e) {
        this.__icon.classList.toggle("hidden", !e)
    }
    ,
    UTPlayerVariationCellView.prototype.setVariationNameById = function(e, t) {
        void 0 === t && (t = GrammaticalGender.NEUTER),
        this.__variationName.textContent = services.Localization.localize("tactics.roles.variation" + e, [], {
            gender: t
        })
    }
    ,
    UTPlayerVariationCellView.prototype.setVariationDescriptionById = function(e, t, i) {
        void 0 === i && (i = GrammaticalGender.NEUTER),
        this.__variationDescription.textContent = services.Localization.localize("tactics.roles.role" + t + ".variation" + e + ".description", [], {
            gender: i
        })
    }
    ,
    UTPlayerVariationCellView.prototype._mouseEnter = function(e) {
        i.prototype._mouseEnter.call(this, e),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerVariationCellView.prototype._mouseLeave = function(e) {
        i.prototype._mouseLeave.call(this, e),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTPlayerVariationCellView.prototype._touchStarted = function(e) {
        i.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerVariationCellView.prototype._touchMoved = function(e) {
        i.prototype._touchMoved.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerVariationCellView.prototype._touchEnded = function(e) {
        i.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTPlayerVariationCellView.prototype._tapDetected = function(e) {
        i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTPlayerVariationCellView
}(EATargetActionView);
UTPlayerVariationCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-player-variation-cell-view");
        var t = document.createElement("div");
        t.classList.add("ut-player-variation-cell-view--content");
        var i = document.createElement("div");
        i.classList.add("ut-player-variation-cell-view--name-container"),
        this.__variationName = document.createElement("span"),
        this.__variationName.classList.add("name"),
        i.appendChild(this.__variationName),
        this.__icon = document.createElement("span"),
        this.__icon.classList.add("ut-player-variation-cell-view--oop-icon"),
        i.appendChild(this.__icon),
        t.appendChild(i),
        this.__variationDescription = document.createElement("span"),
        this.__variationDescription.classList.add("description"),
        t.appendChild(this.__variationDescription),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerVariationCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__variationName = null,
    this.__icon = null,
    this.__variationDescription = null
}
,
UTPlayerVariationCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTWarningCardView = function(e) {
    function UTWarningCardView() {
        return e.call(this) || this
    }
    return __extends(UTWarningCardView, e),
    UTWarningCardView.prototype.setWarningText = function(e) {
        this.__text.textContent = e
    }
    ,
    UTWarningCardView
}(EAView);
UTWarningCardView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-warning-card-view");
        var t = document.createElement("div");
        t.classList.add("ut-warning-card-view--icon"),
        e.appendChild(t),
        this.__text = document.createElement("p"),
        this.__text.classList.add("ut-warning-card-view--text"),
        e.appendChild(this.__text),
        this.__root = e,
        this._generated = !0
    }
}
,
UTWarningCardView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__text = null
}
,
UTWarningCardView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsRoleMenuView = function(o) {
    function UTTacticsRoleMenuView() {
        var e = o.call(this) || this;
        return e.selectedRole = null,
        e.selectedVariation = null,
        e.item = null,
        e.warningCard = null,
        e.roles = [],
        e
    }
    return __extends(UTTacticsRoleMenuView, o),
    UTTacticsRoleMenuView.prototype.init = function() {
        var e = services.Localization;
        o.prototype.init.call(this),
        this.setInteractionState(!0),
        this.__subtitleRole.textContent = e.localize("tactics.label.primary_role"),
        this.__subtitleVariation.textContent = e.localize("tactics.label.variation"),
        this._btnSave.init(),
        this._btnSave.setText(e.localize("tactics.label.save")),
        isPhone() ? this._btnSave.addTarget(this, this.onSaveButtonSelected, EventType.TAP) : DOMKit.toggleDisplayStyle(this.__header, !1)
    }
    ,
    UTTacticsRoleMenuView.prototype.dealloc = function() {
        var e, t, i;
        null === (e = this.selectedRole) || void 0 === e || e.dealloc(),
        (this.selectedRole = null) === (t = this.selectedVariation) || void 0 === t || t.dealloc(),
        (this.selectedVariation = null) === (i = this.warningCard) || void 0 === i || i.dealloc(),
        this.warningCard = null,
        this.roles = [],
        this.clearPlayerItem(),
        o.prototype.dealloc.call(this)
    }
    ,
    UTTacticsRoleMenuView.prototype.clearPlayerItem = function() {
        this.item && (this.item.dealloc(),
        this.item = null)
    }
    ,
    UTTacticsRoleMenuView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTacticsRoleMenuView.prototype.setSelectedRole = function(e, t, i) {
        var o;
        this.selectedRole && (null === (o = this.selectedRole) || void 0 === o || o.dealloc(),
        this.selectedRole = null);
        var n = new UTPlayerRoleCellView;
        n.init(),
        n.addTarget(this, this.onCellSelected, EventType.TAP),
        n.setRoleNameById(e, t.gender),
        n.setRoleDescriptionById(e, t.gender),
        t.hasPlusPlusRolesForPositionRole(e, i) ? n.setPlusPlusRole(!0) : t.hasPlusRolesForPositionRole(e, i) && n.setPlusRole(!0),
        this.selectedRole = n,
        this.selectedRole.toggleOutOfPositionIcon(!1),
        this.addSubview(n, this.__menuRole),
        this.layoutSubviews()
    }
    ,
    UTTacticsRoleMenuView.prototype.toggleOutOfPositionState = function(e) {
        var t, i, o, n;
        e ? (null === (t = this.selectedRole) || void 0 === t || t.toggleOutOfPositionIcon(!0),
        null === (i = this.selectedVariation) || void 0 === i || i.toggleOutOfPositionIcon(!0),
        this.warningCard || (this.warningCard = new UTWarningCardView,
        this.warningCard.init(),
        this.warningCard.setWarningText(services.Localization.localize("tactics.warning.out_of_position"))),
        (isPhone() ? this.__detailsContainer : this.__metaContainer).appendChild(this.warningCard.getRootElement())) : (null === (o = this.selectedRole) || void 0 === o || o.toggleOutOfPositionIcon(!1),
        null === (n = this.selectedVariation) || void 0 === n || n.toggleOutOfPositionIcon(!1))
    }
    ,
    UTTacticsRoleMenuView.prototype.setSelectedVariation = function(e, t, i, o) {
        var n;
        this.selectedVariation && (null === (n = this.selectedVariation) || void 0 === n || n.dealloc(),
        this.selectedVariation = null);
        var r = new UTPlayerVariationCellView;
        r.init(),
        r.addTarget(this, this.onCellSelected, EventType.TAP),
        r.setVariationNameById(e, i),
        r.setVariationDescriptionById(e, t, i),
        r.setInteractionState(o),
        this.selectedVariation = r,
        this.addSubview(r, this.__menuVariation),
        this.layoutSubviews()
    }
    ,
    UTTacticsRoleMenuView.prototype.setPlayerItem = function(e) {
        this.clearPlayerItem(),
        this.__name.textContent = e.getStaticData().firstName + " " + e.getStaticData().lastName,
        this.item = factories.ItemView.createLargeItem(e),
        this.item.init(),
        this.item.render(e);
        var t = e.isValid();
        t && (this._flag.src = AssetLocationUtils.getFlagImageUri(e.nationId, enums.UIThemeVariation.DARK)),
        this._flag.setDisplay(t),
        this.addSubview(this.item, this.__itemContainer),
        this.layoutSubviews()
    }
    ,
    UTTacticsRoleMenuView.prototype.setPlayerPositions = function(e, o, n) {
        var r = this;
        DOMKit.empty(this.__positions),
        this.roles = [],
        e.forEach(function(e, t) {
            var i = document.createElement("span");
            i.textContent = UTLocalizationUtil.positionIdToName(e, services.Localization, o),
            n && 0 === t && DOMKit.addClass(i, "current-position"),
            r.roles.push(i),
            r.__positions.appendChild(i)
        })
    }
    ,
    UTTacticsRoleMenuView.prototype.renderEmptyPreferredPosition = function() {
        this.__positions.textContent = BLANK_STR
    }
    ,
    UTTacticsRoleMenuView.prototype.setPlayerRole = function(e, t, i, o) {
        void 0 === o && (o = GrammaticalGender.NEUTER),
        DOMKit.removeClass(this.__role, "plus plusplus"),
        i ? DOMKit.addClass(this.__role, "plusplus") : t && DOMKit.addClass(this.__role, "plus"),
        this.__role.textContent = services.Localization.localize("tactics.roles.role" + e, [], {
            gender: o
        })
    }
    ,
    UTTacticsRoleMenuView.prototype.setSaveButtonInteractionState = function(e) {
        this._btnSave.setInteractionState(e)
    }
    ,
    UTTacticsRoleMenuView.prototype.onCellSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(e instanceof UTPlayerRoleCellView ? UTTacticsRoleMenuView.Event.SELECT_ROLE : UTTacticsRoleMenuView.Event.SELECT_VARIATION, null)
    }
    ,
    UTTacticsRoleMenuView.prototype.onSaveButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsRoleMenuView.Event.SAVE_TACTICS)
    }
    ,
    UTTacticsRoleMenuView.Event = Object.freeze({
        SAVE_TACTICS: "UTTacticsRoleMenuView.SAVE_TACTICS",
        SELECT_ROLE: "UTTacticsRoleMenuView.SELECT_ROLE",
        SELECT_VARIATION: "UTTacticsRoleMenuView.SELECT_VARIATION"
    }),
    UTTacticsRoleMenuView
}(EATargetActionView);
UTTacticsRoleMenuView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-role-menu-view"),
        this.__header = document.createElement("header"),
        this.__header.classList.add("ut-tactics-role-menu-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-role-menu-view--title"),
        this.__header.appendChild(this.__title),
        this._btnSave = new UTStandardButtonControl,
        this._btnSave.getRootElement().classList.add("mini"),
        this._btnSave.getRootElement().classList.add("call-to-action"),
        this.__header.appendChild(this._btnSave.getRootElement()),
        e.appendChild(this.__header),
        this.__detailsContainer = document.createElement("div"),
        this.__detailsContainer.classList.add("ut-tactics-role-menu-view--details"),
        this.__itemContainer = document.createElement("div"),
        this.__itemContainer.classList.add("ut-tactics-role-menu-view--item-container"),
        this.__detailsContainer.appendChild(this.__itemContainer),
        this.__metaContainer = document.createElement("div"),
        this.__metaContainer.classList.add("ut-tactics-role-menu-view--meta-container"),
        this.__positions = document.createElement("div"),
        this.__positions.classList.add("ut-tactics-role-menu-view--positions"),
        this.__metaContainer.appendChild(this.__positions);
        var t = document.createElement("div");
        t.classList.add("name"),
        this.__name = document.createElement("span"),
        t.appendChild(this.__name),
        this._flag = new EAImageView,
        this._flag.getRootElement().classList.add("flag"),
        t.appendChild(this._flag.getRootElement()),
        this.__metaContainer.appendChild(t),
        this.__role = document.createElement("div"),
        this.__role.classList.add("role"),
        this.__metaContainer.appendChild(this.__role),
        this.__detailsContainer.appendChild(this.__metaContainer),
        e.appendChild(this.__detailsContainer),
        this.__subtitleRole = document.createElement("h2"),
        this.__subtitleRole.classList.add("ut-tactics-role-menu-view--subtitle"),
        e.appendChild(this.__subtitleRole),
        this.__menuRole = document.createElement("div"),
        this.__menuRole.classList.add("ut-button-group"),
        e.appendChild(this.__menuRole),
        this.__subtitleVariation = document.createElement("h2"),
        this.__subtitleVariation.classList.add("ut-tactics-role-menu-view--subtitle"),
        e.appendChild(this.__subtitleVariation),
        this.__menuVariation = document.createElement("div"),
        this.__menuVariation.classList.add("ut-button-group"),
        e.appendChild(this.__menuVariation),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsRoleMenuView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__title = null,
    this._btnSave.destroy(),
    this.__detailsContainer = null,
    this.__itemContainer = null,
    this.__metaContainer = null,
    this.__positions = null,
    this.__name = null,
    this._flag.destroy(),
    this.__role = null,
    this.__subtitleRole = null,
    this.__menuRole = null,
    this.__subtitleVariation = null,
    this.__menuVariation = null
}
,
UTTacticsRoleMenuView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
__spreadArrays = this && this.__spreadArrays || function() {
    for (var e = 0, t = 0, i = arguments.length; t < i; t++)
        e += arguments[t].length;
    var o = Array(e)
      , n = 0;
    for (t = 0; t < i; t++)
        for (var r = arguments[t], s = 0, a = r.length; s < a; s++,
        n++)
            o[n] = r[s];
    return o
}
;
var UTTacticsRoleMenuViewController = function(n) {
    function UTTacticsRoleMenuViewController() {
        var e = n.call(this) || this;
        return e.roleSelectViewController = null,
        e.squadSlots = [],
        e.tacticsViewModel = null,
        e.variationSelectViewController = null,
        e
    }
    return __extends(UTTacticsRoleMenuViewController, n),
    UTTacticsRoleMenuViewController.prototype.initWithTacticsViewModel = function(e) {
        if (DebugUtils.Assert(!this.initialized, "Attempted to re-initialise the view controller."),
        !this.initialized) {
            this.tacticsViewModel = e;
            var t = this.tacticsViewModel.getSquad()
              , i = this.tacticsViewModel.getSelectedMentality();
            t && i && (this.squadSlots = t.getTacticSlotsByMentalityId(i.getId())),
            this.init()
        }
    }
    ,
    UTTacticsRoleMenuViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        this.squadSlots = [],
        this.roleSelectViewController && (this.roleSelectViewController.dealloc(),
        this.roleSelectViewController = null),
        this.variationSelectViewController && (this.variationSelectViewController.dealloc(),
        this.variationSelectViewController = null),
        n.prototype.dealloc.call(this)
    }
    ,
    UTTacticsRoleMenuViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsRoleMenuView
    }
    ,
    UTTacticsRoleMenuViewController.prototype.getNavigationTitle = function() {
        var e = this.tacticsViewModel ? this.squadSlots[this.tacticsViewModel.getSelectedSlotId()] : null;
        return !e || e.generalPosition < 0 ? services.Localization.localize("tactics.label.roles") : services.Localization.localize("tactics.label.roles_and_variations", [UTLocalizationUtil.positionIdToName(e.generalPosition, services.Localization, e.item.gender)])
    }
    ,
    UTTacticsRoleMenuViewController.prototype.viewDidAppear = function() {
        n.prototype.viewDidAppear.call(this),
        this.render();
        var e = this.getView()
          , t = services.Localization;
        if (e.addTarget(this, this.onRoleGroupSelected, UTTacticsRoleMenuView.Event.SELECT_ROLE),
        e.addTarget(this, this.onVariationGroupSelected, UTTacticsRoleMenuView.Event.SELECT_VARIATION),
        e.addTarget(this, this.onSaveMentality, UTTacticsRoleMenuView.Event.SAVE_TACTICS),
        this.tacticsViewModel) {
            this.tacticsViewModel.onDataUpdated.observe(this, this.onTacticsViewModelUpdated);
            var i = this.squadSlots[this.tacticsViewModel.getSelectedSlotId()];
            if (i.generalPosition < 0)
                e.setTitle(t.localize("tactics.label.roles"));
            else {
                var o = UTLocalizationUtil.positionIdToName(i.generalPosition, t, i.item.gender);
                e.setTitle(t.localize("tactics.label.roles_and_variations", [o]))
            }
        }
    }
    ,
    UTTacticsRoleMenuViewController.prototype.viewWillDisappear = function() {
        n.prototype.viewWillDisappear.call(this),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.unobserve(this);
        var e = this.getView();
        e.removeTarget(this, this.onRoleGroupSelected, UTTacticsRoleMenuView.Event.SELECT_ROLE),
        e.removeTarget(this, this.onVariationGroupSelected, UTTacticsRoleMenuView.Event.SELECT_VARIATION),
        e.removeTarget(this, this.onSaveMentality, UTTacticsRoleMenuView.Event.SAVE_TACTICS)
    }
    ,
    UTTacticsRoleMenuViewController.prototype.didDismiss = function(e) {
        if (n.prototype.didDismiss.call(this, e),
        this.tacticsViewModel && (e instanceof UTTacticsRoleSelectViewController || e instanceof UTTacticsVariationSelectViewController)) {
            var t = this.tacticsViewModel.getSquad()
              , i = this.tacticsViewModel.getSelectedMentality()
              , o = null == t ? void 0 : t.getSlot(this.tacticsViewModel.getSelectedSlotId());
            o && i && (null == i || i.setInstructionsBySlotIndex(o.index, this.tacticsViewModel.getSelectedSlotPlayerVO()))
        }
        e.dealloc()
    }
    ,
    UTTacticsRoleMenuViewController.prototype.render = function() {
        if (this.tacticsViewModel) {
            var e = this.tacticsViewModel.getSquad();
            if (e) {
                var t = this.squadSlots[this.tacticsViewModel.getSelectedSlotId()];
                if (t) {
                    var i = this.getView();
                    if (i.setPlayerItem(t.item),
                    t.isValid())
                        if (t.inPossiblePosition) {
                            var o = t.item.possiblePositions.filter(function(e) {
                                return e !== t.generalPosition
                            });
                            i.setPlayerPositions(__spreadArrays([t.generalPosition], o), t.item.gender, t.inPossiblePosition)
                        } else {
                            o = t.item.possiblePositions.filter(function(e) {
                                return e !== t.item.preferredPosition
                            });
                            i.setPlayerPositions(__spreadArrays([t.item.preferredPosition], o), t.item.gender, t.inPossiblePosition)
                        }
                    else
                        i.renderEmptyPreferredPosition();
                    var n = this.tacticsViewModel.getSelectedSlotPlayerVO();
                    i.setPlayerRole(n.type, t.item.hasPlusRolesForPositionRole(n.type, t.generalPosition), t.item.hasPlusPlusRolesForPositionRole(n.type, t.generalPosition), t.item.gender),
                    i.setSaveButtonInteractionState(e.hasModifiedTactics()),
                    i.setSelectedRole(n.type, t.item, t.generalPosition);
                    var r = 1 < this.tacticsViewModel.getVariationsForSelectedSlotPosition().length;
                    i.setSelectedVariation(n.variation, n.type, t.item.gender, r);
                    var s = t.item.possiblePositions.includes(n.position);
                    i.toggleOutOfPositionState(t.isValid() && !s)
                } else {
                    DebugUtils.Assert(!1, "No selected slot detected - exiting flow");
                    var a = this.getNavigationController();
                    null == a || a.popToRootViewController()
                }
            }
        }
    }
    ,
    UTTacticsRoleMenuViewController.prototype.onRoleGroupSelected = function(e, t, i) {
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tacticProfile selection view."),
        this.tacticsViewModel && (this.roleSelectViewController = new UTTacticsRoleSelectViewController,
        this.roleSelectViewController.initWithTacticsViewModel(this.tacticsViewModel),
        this.roleSelectViewController.modalDisplayStyle = "form",
        this.presentViewController(this.roleSelectViewController, !0))
    }
    ,
    UTTacticsRoleMenuViewController.prototype.onVariationGroupSelected = function(e, t, i) {
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tacticProfile selection view."),
        this.tacticsViewModel && (this.variationSelectViewController = new UTTacticsVariationSelectViewController,
        this.variationSelectViewController.initWithTacticsViewModel(this.tacticsViewModel),
        this.variationSelectViewController.modalDisplayStyle = "form",
        this.presentViewController(this.variationSelectViewController, !0))
    }
    ,
    UTTacticsRoleMenuViewController.prototype.onSaveMentality = function(e, t, i) {
        var o = this;
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to save tacticProfile."),
        this.tacticsViewModel && this.tacticsViewModel.saveModifiedMentalities().observe(this, function(e, t) {
            e.unobserve(o),
            o.getView().setSaveButtonInteractionState(!t.success)
        })
    }
    ,
    UTTacticsRoleMenuViewController.prototype.onTacticsViewModelUpdated = function(e, t) {
        JSUtils.isObject(t) && t.selectedSlotPlayerVO && this.render()
    }
    ,
    UTTacticsRoleMenuViewController
}(EAViewController)
  , UTTacticsSquadPitchView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsSquadPitchView() {
        var e = t.call(this) || this;
        return e._slots = [],
        e._currentFormation = "",
        e._animationDuration = 400,
        e._animationTimeout = 0,
        e
    }
    return __extends(UTTacticsSquadPitchView, t),
    UTTacticsSquadPitchView.prototype.init = function() {
        t.prototype.init.call(this),
        this.toggleHeader(!1),
        this.setInteractionState(!0),
        window.addEventListener(EventType.RESIZE, this._windowResizeCallback, !1)
    }
    ,
    UTTacticsSquadPitchView.prototype.dealloc = function() {
        this._clearSlotViews(),
        clearTimeout(this._animationTimeout),
        window.removeEventListener(EventType.RESIZE, this._windowResizeCallback, !1),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsSquadPitchView.prototype.setHeader = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTacticsSquadPitchView.prototype.toggleHeader = function(e) {
        DOMKit.toggleDisplayStyle(this.__header, e)
    }
    ,
    UTTacticsSquadPitchView.prototype.setInteractionState = function(e) {
        t.prototype.setInteractionState.call(this, e),
        this.toggleClass("readonly", !e)
    }
    ,
    UTTacticsSquadPitchView.prototype.setFormation = function(e, t) {
        var i = this;
        this._currentFormation !== e ? (this._isAnimating = !0,
        "" !== this._currentFormation && DOMKit.removeClass(this.__pitch, this._currentFormation),
        DOMKit.addClass(this.__pitch, e),
        this._animationTimeout = window.setTimeout(function() {
            clearTimeout(i._animationTimeout),
            i._isAnimating = !1,
            t && t()
        }, this._animationDuration),
        this._currentFormation = e) : !this._isAnimating && t && t()
    }
    ,
    UTTacticsSquadPitchView.prototype._clearSlotViews = function() {
        this._slots.forEach(function(e) {
            return e.dealloc()
        }),
        this._slots = []
    }
    ,
    UTTacticsSquadPitchView.prototype.getSlotViews = function() {
        return this._slots
    }
    ,
    UTTacticsSquadPitchView.prototype.setSlots = function(e, i) {
        var o = this;
        this._clearSlotViews(),
        e.forEach(function(e) {
            if (!(e.index < 0)) {
                var t = new UTSquadSlotView;
                t.init(),
                t.renderTactical(e, i[e.index]),
                t.addTarget(o, o._eSlotTapped, EventType.TAP),
                o.addSubview(t, o.__pitch),
                o._slots.push(t)
            }
        }, this),
        this.layoutSubviews()
    }
    ,
    UTTacticsSquadPitchView.prototype.updateSlot = function(t, e) {
        var i = JSUtils.find(this._slots, function(e) {
            return e.getIndex() === t.index
        });
        null == i || i.renderTactical(t, e)
    }
    ,
    UTTacticsSquadPitchView.prototype.setLockedSlots = function(t) {
        this._slots.forEach(function(e) {
            return e.setLockedState(0 <= t.indexOf(e.getIndex()))
        })
    }
    ,
    UTTacticsSquadPitchView.prototype._eSlotTapped = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(enums.UISquadPitchEvent.SLOT_SELECT, {
            slot: e,
            slotIndex: e.getIndex()
        })
    }
    ,
    UTTacticsSquadPitchView
}(EATargetActionView));
UTTacticsSquadPitchView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-squad-pitch-view"),
        this.__header = document.createElement("div"),
        this.__header.classList.add("ut-tactics-squad-pitch-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-squad-pitch-view--title"),
        this.__header.appendChild(this.__title),
        e.appendChild(this.__header),
        this.__pitch = document.createElement("div"),
        this.__pitch.classList.add("ut-squad-pitch-view"),
        e.appendChild(this.__pitch),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsSquadPitchView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__title = null,
    this.__pitch = null
}
,
UTTacticsSquadPitchView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsRoleSlotSelectViewController = function(i) {
    function UTTacticsRoleSlotSelectViewController() {
        var e = i.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsRoleSlotSelectViewController, i),
    UTTacticsRoleSlotSelectViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init(),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.observe(this, this.onTacticsViewModelUpdated))
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.unobserve(this),
        this.tacticsViewModel = null
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsSquadPitchView
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype.getNavigationTitle = function() {
        if (isPhone() && this.tacticsViewModel) {
            var e = this.tacticsViewModel.getSquad();
            if (e)
                return e.getName()
        }
        return services.Localization.localize("tactics.label.rolevariations")
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype.viewDidAppear = function() {
        var e = this.getNavigationController()
          , t = this.getView();
        t.toggleHeader(isPhone()),
        isPhone() && t.setHeader(services.Localization.localize("tactics.label.rolevariations")),
        t.setInteractionState(!0),
        i.prototype.viewDidAppear.call(this),
        e && (e.setNavigationVisibility(!0, !1),
        isPhone() || e.setNavigationStyle(UTNavigationBarView.Style.SECONDARY)),
        t.addTarget(this, this.onSlotSelected, enums.UISquadPitchEvent.SLOT_SELECT),
        this.render()
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        i.prototype.viewWillDisappear.call(this),
        e.removeTarget(this, this.onSlotSelected, enums.UISquadPitchEvent.SLOT_SELECT)
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype.render = function() {
        if (this.tacticsViewModel) {
            var i = this.getView()
              , e = this.tacticsViewModel.getSquad()
              , o = this.tacticsViewModel.getSelectedMentality();
            if (e && o) {
                var n = i.isInteractionEnabled()
                  , t = e.getTacticSlotsByMentalityId(o.getId())
                  , r = t.map(function(e) {
                    return o.getRoleBySlotIndex(e.index, e.generalPosition)
                });
                i.setInteractionState(!1),
                i.setSlots(t, r),
                requestAnimationFrame(function() {
                    var e, t;
                    i.setFormation(null !== (t = null === (e = o.getFormation()) || void 0 === e ? void 0 : e.name) && void 0 !== t ? t : "", function() {
                        return i.setInteractionState(n)
                    })
                })
            }
        }
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype.onSlotSelected = function(e, t, i) {
        var o;
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tactic."),
        this.tacticsViewModel) {
            var n = null !== (o = null == i ? void 0 : i.slotIndex) && void 0 !== o ? o : 0
              , r = this.getNavigationController();
            if (this.tacticsViewModel.setSelectedSlotId(n),
            r) {
                var s = new UTTacticsRoleMenuViewController;
                s.initWithTacticsViewModel(this.tacticsViewModel),
                r.pushViewController(s)
            }
        }
    }
    ,
    UTTacticsRoleSlotSelectViewController.prototype.onTacticsViewModelUpdated = function(e, t) {
        JSUtils.isObject(t) && (t.selectedMentality || t.tactics && t.tactics.instructions) && this.render()
    }
    ,
    UTTacticsRoleSlotSelectViewController
}(EAViewController)
  , UTMentalityTableCellView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTMentalityTableCellView() {
        var e = i.call(this) || this;
        return e.id = -1,
        e
    }
    return __extends(UTMentalityTableCellView, i),
    UTMentalityTableCellView.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0),
        this.__titleBuildUpPlayStyle.textContent = services.Localization.localize("tactics.label.offensivestyle.buildup"),
        this.__titleChanceCreationStyle.textContent = services.Localization.localize("tactics.label.offensivestyle.chancecreation"),
        this.__titleDefensiveStyle.textContent = services.Localization.localize("tactics.label.defensivestyle"),
        this.__titleFormation.textContent = services.Localization.localize("squads.formation")
    }
    ,
    UTMentalityTableCellView.prototype.setInteractionState = function(e) {
        var t = this._interactionState;
        i.prototype.setInteractionState.call(this, e),
        this._interactionState !== t && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTMentalityTableCellView.prototype.setId = function(e) {
        this.id = e
    }
    ,
    UTMentalityTableCellView.prototype.getId = function() {
        return this.id
    }
    ,
    UTMentalityTableCellView.prototype.setMentalityNameById = function(e) {
        this.__name.textContent = services.Localization.localize("tactics.mentality.type." + e)
    }
    ,
    UTMentalityTableCellView.prototype.setBuildUpPlayStyleById = function(e) {
        this.__valueBuildUpPlayStyle.textContent = services.Localization.localize("tactics.style.offensive." + e)
    }
    ,
    UTMentalityTableCellView.prototype.setDefensiveStyleById = function(e) {
        this.__valueDefensiveStyle.textContent = services.Localization.localize("tactics.style.defensive." + e)
    }
    ,
    UTMentalityTableCellView.prototype.setFormationName = function(e) {
        this.__valueFormation.textContent = e
    }
    ,
    UTMentalityTableCellView.prototype._mouseEnter = function(e) {
        i.prototype._mouseEnter.call(this, e),
        this.addClass(enums.UIState.HOVER)
    }
    ,
    UTMentalityTableCellView.prototype._mouseLeave = function(e) {
        i.prototype._mouseLeave.call(this, e),
        this.removeClass(enums.UIState.HOVER)
    }
    ,
    UTMentalityTableCellView.prototype._touchStarted = function(e) {
        i.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTMentalityTableCellView.prototype._touchMoved = function(e) {
        i.prototype._touchMoved.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTMentalityTableCellView.prototype._touchEnded = function(e) {
        i.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTMentalityTableCellView.prototype._tapDetected = function(e) {
        i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTMentalityTableCellView
}(EATargetActionView));
UTMentalityTableCellView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-mentality-table-cell-view"),
        this.__name = document.createElement("h1"),
        this.__name.classList.add("ut-mentality-table-cell-view--name"),
        e.appendChild(this.__name);
        var t = document.createElement("div");
        t.classList.add("ut-mentality-table-cell-view--info");
        var i = document.createElement("div");
        i.classList.add("info-item"),
        this.__titleBuildUpPlayStyle = document.createElement("span"),
        this.__titleBuildUpPlayStyle.classList.add("title"),
        i.appendChild(this.__titleBuildUpPlayStyle),
        this.__valueBuildUpPlayStyle = document.createElement("span"),
        this.__valueBuildUpPlayStyle.classList.add("value"),
        i.appendChild(this.__valueBuildUpPlayStyle),
        t.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("info-item"),
        this.__titleChanceCreationStyle = document.createElement("span"),
        this.__titleChanceCreationStyle.classList.add("title"),
        o.appendChild(this.__titleChanceCreationStyle),
        this.__valueChanceCreationStyle = document.createElement("span"),
        this.__valueChanceCreationStyle.classList.add("value"),
        o.appendChild(this.__valueChanceCreationStyle),
        t.appendChild(o);
        var n = document.createElement("div");
        n.classList.add("info-item"),
        this.__titleFormation = document.createElement("span"),
        this.__titleFormation.classList.add("title"),
        n.appendChild(this.__titleFormation),
        this.__valueFormation = document.createElement("span"),
        this.__valueFormation.classList.add("value"),
        n.appendChild(this.__valueFormation),
        t.appendChild(n);
        var r = document.createElement("div");
        r.classList.add("info-item"),
        this.__titleDefensiveStyle = document.createElement("span"),
        this.__titleDefensiveStyle.classList.add("title"),
        r.appendChild(this.__titleDefensiveStyle),
        this.__valueDefensiveStyle = document.createElement("span"),
        this.__valueDefensiveStyle.classList.add("value"),
        r.appendChild(this.__valueDefensiveStyle),
        t.appendChild(r),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTMentalityTableCellView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__name = null,
    this.__titleBuildUpPlayStyle = null,
    this.__valueBuildUpPlayStyle = null,
    this.__titleChanceCreationStyle = null,
    this.__valueChanceCreationStyle = null,
    this.__titleFormation = null,
    this.__valueFormation = null,
    this.__titleDefensiveStyle = null,
    this.__valueDefensiveStyle = null
}
,
UTMentalityTableCellView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsMentalitySelectView = function(t) {
    function UTTacticsMentalitySelectView() {
        var e = t.call(this) || this;
        return e.mentalityCellViews = [],
        e
    }
    return __extends(UTTacticsMentalitySelectView, t),
    UTTacticsMentalitySelectView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this._btnExit.init(),
        this._btnExit.addTarget(this, this.onDismissButtonSelected, EventType.TAP),
        this.__title.textContent = services.Localization.localize("tactics.label.changementality")
    }
    ,
    UTTacticsMentalitySelectView.prototype.dealloc = function() {
        this.clearMentalityCells(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsMentalitySelectView.prototype.clearMentalityCells = function() {
        this.mentalityCellViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.mentalityCellViews = []
    }
    ,
    UTTacticsMentalitySelectView.prototype.generateMentalityCell = function(e) {
        var t, i, o = new UTMentalityTableCellView;
        o.init(),
        o.setId(e.getId()),
        o.setMentalityNameById(e.getId()),
        o.setBuildUpPlayStyleById(e.getBuildUpPlayStyle()),
        o.setDefensiveStyleById(e.getDefensiveStyle()),
        o.setFormationName(null !== (i = null === (t = e.getFormation()) || void 0 === t ? void 0 : t.displayName) && void 0 !== i ? i : ""),
        o.addTarget(this, this.onMentalitySelected, EventType.TAP),
        this.mentalityCellViews.push(o),
        this.addSubview(o, this.__table)
    }
    ,
    UTTacticsMentalitySelectView.prototype.setMentalities = function(e) {
        this.clearMentalityCells(),
        e.forEach(this.generateMentalityCell, this),
        this.layoutSubviews()
    }
    ,
    UTTacticsMentalitySelectView.prototype.setMentalityCellInteractionStateById = function(t, e) {
        var i = JSUtils.find(this.mentalityCellViews, function(e) {
            return e.getId() === t
        });
        null == i || i.setInteractionState(e)
    }
    ,
    UTTacticsMentalitySelectView.prototype.onDismissButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsMentalitySelectView.Event.DISMISS)
    }
    ,
    UTTacticsMentalitySelectView.prototype.onMentalitySelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsMentalitySelectView.Event.MENTALITY_SELECTED, {
            id: e.getId()
        })
    }
    ,
    UTTacticsMentalitySelectView.Event = Object.freeze({
        DISMISS: "UTTacticsMentalitySelectView.DISMISS",
        MENTALITY_SELECTED: "UTTacticsMentalitySelectView.MENTALITY_SELECTED"
    }),
    UTTacticsMentalitySelectView
}(EATargetActionView);
UTTacticsMentalitySelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-mentality-select-view");
        var t = document.createElement("header");
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-mentality-select-view--title"),
        t.appendChild(this.__title),
        this._btnExit = new UTImageButtonControl,
        this._btnExit.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._btnExit.getRootElement()),
        e.appendChild(t),
        this.__table = document.createElement("div"),
        this.__table.classList.add("ut-tactics-mentality-select-view--table"),
        e.appendChild(this.__table),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsMentalitySelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._btnExit.destroy(),
    this.__table = null
}
,
UTTacticsMentalitySelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsMentalitySelectViewController = function(i) {
    function UTTacticsMentalitySelectViewController() {
        var e = i.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsMentalitySelectViewController, i),
    UTTacticsMentalitySelectViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsMentalitySelectViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsMentalitySelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsMentalitySelectView
    }
    ,
    UTTacticsMentalitySelectViewController.prototype.viewDidAppear = function() {
        var e = this.getView();
        if (i.prototype.viewDidAppear.call(this),
        this.tacticsViewModel) {
            var t = this.tacticsViewModel.getSelectedMentality();
            e.setMentalities(this.tacticsViewModel.getMentalities()),
            t && e.setMentalityCellInteractionStateById(t.getId(), !1)
        }
        e.addTarget(this, this.onDismissSelected, UTTacticsMentalitySelectView.Event.DISMISS),
        e.addTarget(this, this.onMentalitySelected, UTTacticsMentalitySelectView.Event.MENTALITY_SELECTED)
    }
    ,
    UTTacticsMentalitySelectViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        i.prototype.viewWillDisappear.call(this),
        e.removeTarget(this, this.onDismissSelected, UTTacticsMentalitySelectView.Event.DISMISS),
        e.removeTarget(this, this.onMentalitySelected, UTTacticsMentalitySelectView.Event.MENTALITY_SELECTED)
    }
    ,
    UTTacticsMentalitySelectViewController.prototype.onDismissSelected = function(e, t, i) {
        var o = this.getParentViewController();
        (null == o ? void 0 : o.getPresentedViewController()) === this && o.dismissViewController(!0)
    }
    ,
    UTTacticsMentalitySelectViewController.prototype.onMentalitySelected = function(e, t, i) {
        var o, n = this.getParentViewController();
        null === (o = this.tacticsViewModel) || void 0 === o || o.setSelectedMentalityById(i.id),
        (null == n ? void 0 : n.getPresentedViewController()) === this && n.dismissViewController(!0)
    }
    ,
    UTTacticsMentalitySelectViewController
}(EAViewController)
  , UTTacticsManageSettingsRowView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsManageSettingsRowView() {
        var e = t.call(this) || this;
        return e.cellViews = [],
        e
    }
    return __extends(UTTacticsManageSettingsRowView, t),
    UTTacticsManageSettingsRowView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this._optionsBtn.init(),
        this._optionsBtn.addTarget(this, this.eSlotOptionsSelected, EventType.TAP),
        this.setOverlayText(services.Localization.localize("tactics.label.manageSettings.createNew")),
        this.toggleOverlayDisplay(!1)
    }
    ,
    UTTacticsManageSettingsRowView.prototype.dealloc = function() {
        this.clearCellViews(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsManageSettingsRowView.prototype.clearCellViews = function() {
        this.cellViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.cellViews = []
    }
    ,
    UTTacticsManageSettingsRowView.prototype.toggleActive = function(e) {
        this.toggleClass("active", e),
        DOMKit.toggleDisplayStyle(this.__checkmark, e)
    }
    ,
    UTTacticsManageSettingsRowView.prototype.toggleOverlayDisplay = function(e) {
        this.__createOverlay.style.display = e ? "flex" : "none"
    }
    ,
    UTTacticsManageSettingsRowView.prototype.setOverlayText = function(e) {
        this.__createOverlayText.textContent = e
    }
    ,
    UTTacticsManageSettingsRowView.prototype.renderTacticSlot = function(e) {
        var o = this;
        this.clearCellViews(),
        this.setName(e.name);
        function h7c(e, t) {
            var i = new UTTacticsInfoCellView;
            return i.init(),
            i.setLabel(n.localize(e)),
            i.setName(t),
            o.cellViews.push(i),
            i
        }
        var n = services.Localization;
        h7c("tactics.label.presetStyle", n.localize("tactics.label.presetStyle.custom"));
        var t = e.getFormation();
        t && h7c("tactics.label.formation", UTLocalizationUtil.formationDbNameToName(t.name, n)),
        h7c("tactics.label.offensive", n.localize("tactics.style.offensive." + e.getBuildUpPlayStyle())),
        h7c("tactics.label.defensive", n.localize("tactics.style.defensive." + e.getDefensiveStyle())),
        this.toggleOverlayDisplay(!1),
        this.cellViews.forEach(function(e) {
            return o.addSubview(e, o.__cellContainer)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsManageSettingsRowView.prototype.renderEmptySlot = function() {
        var i = this;
        this.clearCellViews(),
        this.addClass("empty"),
        this.setName("---");
        function p7c(e) {
            var t = new UTTacticsInfoCellView;
            return t.init(),
            t.setEmptyCell(o.localize(e)),
            i.cellViews.push(t),
            t
        }
        var o = services.Localization;
        p7c("tactics.label.presetStyle"),
        p7c("tactics.label.formation"),
        p7c("tactics.label.offensive"),
        p7c("tactics.label.defensive"),
        this.cellViews.forEach(function(e) {
            return i.addSubview(e, i.__cellContainer)
        }),
        this.toggleOverlayDisplay(!0),
        this.layoutSubviews()
    }
    ,
    UTTacticsManageSettingsRowView.prototype.setName = function(e) {
        this.__slotName.textContent = e
    }
    ,
    UTTacticsManageSettingsRowView.prototype.eSlotOptionsSelected = function(e, t, i) {
        this._triggerActions(UTTacticsManageSettingsRowView.Events.SLOT_OPTIONS)
    }
    ,
    UTTacticsManageSettingsRowView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTTacticsManageSettingsRowView.Events = {
        SLOT_OPTIONS: "SLOT_OPTIONS",
        CREATE_NEW_SLOT: "CREATE_NEW_SLOT"
    },
    UTTacticsManageSettingsRowView
}(EATargetActionView));
UTTacticsManageSettingsRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-manage-settings-row-view"),
        this._optionsBtn = new UTImageButtonControl,
        this._optionsBtn.getRootElement().classList.add("ellipsis-btn"),
        this._optionsBtn.getRootElement().classList.add("ut-image-button-control"),
        e.appendChild(this._optionsBtn.getRootElement());
        var t = document.createElement("span");
        t.classList.add("ut-tactics-manage-settings-row-view--title"),
        this.__slotName = document.createElement("h1"),
        this.__slotName.classList.add("ut-tactics-manage-settings-row-view--slot-name"),
        t.appendChild(this.__slotName),
        this.__checkmark = document.createElement("div"),
        this.__checkmark.classList.add("ut-tactics-manage-settings-row-view--checkmark"),
        t.appendChild(this.__checkmark),
        e.appendChild(t),
        this.__cellContainer = document.createElement("div"),
        this.__cellContainer.classList.add("ut-tactics-manage-settings-row-view--container"),
        e.appendChild(this.__cellContainer),
        this.__createOverlay = document.createElement("span"),
        this.__createOverlay.classList.add("ut-tactics-manage-settings-row-view--overlay");
        var i = document.createElement("div");
        i.classList.add("ut-tactics-manage-settings-row-view--overlay-icon"),
        this.__createOverlay.appendChild(i),
        this.__createOverlayText = document.createElement("p"),
        this.__createOverlay.appendChild(this.__createOverlayText),
        e.appendChild(this.__createOverlay),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsManageSettingsRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._optionsBtn.destroy(),
    this.__slotName = null,
    this.__checkmark = null,
    this.__cellContainer = null,
    this.__createOverlay = null,
    this.__createOverlayText = null
}
,
UTTacticsManageSettingsRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsManageSettingsView = function(t) {
    function UTTacticsManageSettingsView() {
        var e = t.call(this) || this;
        return e.rowViews = [],
        e
    }
    return __extends(UTTacticsManageSettingsView, t),
    UTTacticsManageSettingsView.prototype.dealloc = function() {
        this.clearRowViews(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsManageSettingsView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setHeaderText(services.Localization.localize("tactics.label.manageSettings.header"))
    }
    ,
    UTTacticsManageSettingsView.prototype.clearRowViews = function() {
        var t = this;
        this.rowViews.forEach(function(e) {
            e.removeTarget(t, t.onOptionsTapped, UTTacticsManageSettingsRowView.Events.SLOT_OPTIONS),
            e.dealloc()
        }),
        this.rowViews = []
    }
    ,
    UTTacticsManageSettingsView.prototype.setHeaderText = function(e) {
        this.__headerRow.textContent = e
    }
    ,
    UTTacticsManageSettingsView.prototype.toggleHeaderDisplay = function(e) {
        this.__headerRow.style.display = e ? "block" : "none"
    }
    ,
    UTTacticsManageSettingsView.prototype.render = function(e) {
        var i = this;
        this.removeSubviews(),
        this.clearRowViews(),
        e.forEach(function(e) {
            var t = new UTTacticsManageSettingsRowView;
            t.init(),
            e.isCustomized() ? (t.renderTacticSlot(e),
            e.getState() === TacticState.ACTIVE && t.toggleActive(!0),
            t.addTarget(i, i.onOptionsTapped, UTTacticsManageSettingsRowView.Events.SLOT_OPTIONS)) : (t.renderEmptySlot(),
            t.addTarget(i, i.onCreateNewSlot, EventType.TAP)),
            i.rowViews.push(t),
            i.addSubview(t, i.__container)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsManageSettingsView.prototype.onOptionsTapped = function(e, t, i) {
        this._triggerActions(UTTacticsManageSettingsRowView.Events.SLOT_OPTIONS, {
            index: this.rowViews.indexOf(e)
        })
    }
    ,
    UTTacticsManageSettingsView.prototype.onCreateNewSlot = function(e, t, i) {
        this._triggerActions(UTTacticsManageSettingsRowView.Events.CREATE_NEW_SLOT, {
            index: this.rowViews.indexOf(e)
        })
    }
    ,
    UTTacticsManageSettingsView.Event = Object.freeze({
        SLOT_OPTIONS_TAPPED: "UTTacticsManageSettingsView.Event.SLOT_OPTIONS_TAPPED"
    }),
    UTTacticsManageSettingsView
}(EATargetActionView);
UTTacticsManageSettingsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-content-container"),
        e.classList.add("ut-tactics-manage-settings-view"),
        this.__container = document.createElement("div"),
        this.__container.classList.add("ut-content"),
        this.__container.classList.add("ut-tactics-manage-settings-view--content"),
        this.__headerRow = document.createElement("div"),
        this.__headerRow.classList.add("ut-tactics-manage-settings-view--header-row"),
        this.__container.appendChild(this.__headerRow),
        e.appendChild(this.__container),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsManageSettingsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__container = null,
    this.__headerRow = null
}
,
UTTacticsManageSettingsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsEditSlotPopupRowView = function(t) {
    function UTTacticsEditSlotPopupRowView() {
        return t.call(this) || this
    }
    return __extends(UTTacticsEditSlotPopupRowView, t),
    UTTacticsEditSlotPopupRowView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTTacticsEditSlotPopupRowView.prototype.setLabelText = function(e) {
        this.__label.textContent = e
    }
    ,
    UTTacticsEditSlotPopupRowView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTTacticsEditSlotPopupRowView
}(EATargetActionView);
UTTacticsEditSlotPopupRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-edit-slot-popup-row-view");
        var t = document.createElement("div");
        t.classList.add("ut-tactics-edit-slot-popup-row-view--icon"),
        e.appendChild(t),
        this.__label = document.createElement("p"),
        this.__label.classList.add("ut-tactics-edit-slot-popup-row-view--label"),
        e.appendChild(this.__label),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsEditSlotPopupRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null
}
,
UTTacticsEditSlotPopupRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsEditSlotPopupView = function(e) {
    function UTTacticsEditSlotPopupView() {
        return e.call(this) || this
    }
    return __extends(UTTacticsEditSlotPopupView, e),
    UTTacticsEditSlotPopupView.prototype.init = function() {
        var e = services.Localization;
        this._renameRow.init(),
        this._deleteRow.init(),
        this._duplicateRow.init(),
        this._exportCodeRow.init(),
        this._importCodeRow.init(),
        this._exitBtn.init(),
        this._renameRow.setLabelText(e.localize("tactics.button.renameTactic")),
        this._deleteRow.setLabelText(e.localize("tactics.button.deleteTactic")),
        this._duplicateRow.setLabelText(e.localize("tactics.button.duplicateTactic")),
        this._exportCodeRow.setLabelText(e.localize("tactics.button.exportTacticCode")),
        this._importCodeRow.setLabelText(e.localize("tactics.button.importTacticCode")),
        this._renameRow.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._deleteRow.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._duplicateRow.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._exportCodeRow.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._importCodeRow.addTarget(this, this.eButtonSelected, EventType.TAP)
    }
    ,
    UTTacticsEditSlotPopupView.prototype.getExitBtn = function() {
        return this._exitBtn
    }
    ,
    UTTacticsEditSlotPopupView.prototype.eButtonSelected = function(e, t, i) {
        var o = UTTacticsEditSlotPopupView.Events.RENAME;
        e === this._renameRow ? o = UTTacticsEditSlotPopupView.Events.RENAME : e === this._deleteRow ? o = UTTacticsEditSlotPopupView.Events.DELETE : e === this._duplicateRow ? o = UTTacticsEditSlotPopupView.Events.DUPLICATE : e === this._exportCodeRow ? o = UTTacticsEditSlotPopupView.Events.EXPORT : e === this._importCodeRow && (o = UTTacticsEditSlotPopupView.Events.IMPORT),
        this._triggerActions(o)
    }
    ,
    UTTacticsEditSlotPopupView.Events = {
        RENAME: "UTTacticsEditSlotPopupView.RENAME",
        DUPLICATE: "UTTacticsEditSlotPopupView.DUPLICATE",
        DELETE: "UTTacticsEditSlotPopupView.DELETE",
        EXPORT: "UTTacticsEditSlotPopupView.EXPORT",
        IMPORT: "UTTacticsEditSlotPopupView.IMPORT"
    },
    UTTacticsEditSlotPopupView
}(EATargetActionView);
UTTacticsEditSlotPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-edit-slot-popup-view");
        var t = document.createElement("header");
        t.classList.add("ut-tactics-edit-slot-popup-view--header"),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t),
        this._renameRow = new UTTacticsEditSlotPopupRowView,
        this._renameRow.getRootElement().classList.add("rename"),
        e.appendChild(this._renameRow.getRootElement()),
        this._duplicateRow = new UTTacticsEditSlotPopupRowView,
        this._duplicateRow.getRootElement().classList.add("duplicate"),
        e.appendChild(this._duplicateRow.getRootElement()),
        this._exportCodeRow = new UTTacticsEditSlotPopupRowView,
        this._exportCodeRow.getRootElement().classList.add("export-code"),
        e.appendChild(this._exportCodeRow.getRootElement()),
        this._importCodeRow = new UTTacticsEditSlotPopupRowView,
        this._importCodeRow.getRootElement().classList.add("import-code"),
        e.appendChild(this._importCodeRow.getRootElement()),
        this._deleteRow = new UTTacticsEditSlotPopupRowView,
        this._deleteRow.getRootElement().classList.add("delete"),
        e.appendChild(this._deleteRow.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsEditSlotPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._exitBtn.destroy(),
    this._renameRow.destroy(),
    this._duplicateRow.destroy(),
    this._exportCodeRow.destroy(),
    this._importCodeRow.destroy(),
    this._deleteRow.destroy()
}
,
UTTacticsEditSlotPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsExportCodePopupView = function(t) {
    function UTTacticsExportCodePopupView() {
        return t.call(this) || this
    }
    return __extends(UTTacticsExportCodePopupView, t),
    UTTacticsExportCodePopupView.prototype.init = function() {
        var e = services.Localization;
        t.prototype.init.call(this),
        this._cancelBtn.init(),
        this._cancelBtn.setText(e.localize("common.dialog.cancel")),
        this._cancelBtn.setInteractionState(!0),
        this._copyCodeBtn.init(),
        this._copyCodeBtn.setInteractionState(!0),
        this._copyCodeBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._cancelBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._nameInput.init(),
        this._nameInput.toggleReadOnly(!0)
    }
    ,
    UTTacticsExportCodePopupView.prototype.setTitle = function(e) {
        this.__titleText.textContent = e
    }
    ,
    UTTacticsExportCodePopupView.prototype.setConfirmButtonLabel = function(e) {
        this._copyCodeBtn.setText(e)
    }
    ,
    UTTacticsExportCodePopupView.prototype.render = function(e, t) {
        this.setTitle(e),
        this.setConfirmButtonLabel(t)
    }
    ,
    UTTacticsExportCodePopupView.prototype.getInputValue = function() {
        return this._nameInput.value
    }
    ,
    UTTacticsExportCodePopupView.prototype.setInputValue = function(e) {
        this._nameInput.value = e
    }
    ,
    UTTacticsExportCodePopupView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTTacticsExportCodePopupView.prototype.onButtonSelected = function(e, t, i) {
        e === this._copyCodeBtn ? this._triggerActions(UTTacticsExportCodePopupView.Event.COPY) : e === this._cancelBtn && this._triggerActions(UTTacticsExportCodePopupView.Event.CANCEL)
    }
    ,
    UTTacticsExportCodePopupView.Event = Object.freeze({
        CANCEL: "UTTacticsExportCodePopupView.CANCEL",
        COPY: "UTTacticsExportCodePopupView.COPY"
    }),
    UTTacticsExportCodePopupView
}(EATargetActionView);
UTTacticsExportCodePopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-export-code-popup-view");
        var t = document.createElement("header");
        this.__titleText = document.createElement("h1"),
        t.appendChild(this.__titleText),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("bodySection"),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-tactics-export-code-popup-view--description"),
        i.appendChild(this.__description),
        this._nameInput = new UTTextInputControl,
        this._nameInput.getRootElement().classList.add("round"),
        i.appendChild(this._nameInput.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-button-group"),
        this._copyCodeBtn = new UTGroupButtonControl,
        o.appendChild(this._copyCodeBtn.getRootElement()),
        this._cancelBtn = new UTGroupButtonControl,
        this._cancelBtn.getRootElement().classList.add("negative"),
        o.appendChild(this._cancelBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsExportCodePopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleText = null,
    this.__description = null,
    this._nameInput.destroy(),
    this._copyCodeBtn.destroy(),
    this._cancelBtn.destroy()
}
,
UTTacticsExportCodePopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsExportCodePopupViewController = function(i) {
    function UTTacticsExportCodePopupViewController(e) {
        var t = i.call(this) || this;
        return t.tacticCode = e.tacticCode,
        t
    }
    return __extends(UTTacticsExportCodePopupViewController, i),
    UTTacticsExportCodePopupViewController.prototype.viewDidAppear = function() {
        var e = this.getView()
          , t = services.Localization;
        i.prototype.viewDidAppear.call(this),
        e.setTitle(t.localize("tactics.button.exportTacticCode")),
        e.setConfirmButtonLabel(t.localize("tactics.button.copyTacticsCode")),
        e.setDescription(t.localize("tactics.exportCodePopup.description")),
        e.setInputValue(this.tacticCode),
        e.addTarget(this, this.handleCancel, UTTacticsExportCodePopupView.Event.CANCEL),
        e.addTarget(this, this.handleCopy, UTTacticsExportCodePopupView.Event.COPY)
    }
    ,
    UTTacticsExportCodePopupViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        i.prototype.viewWillDisappear.call(this),
        e.removeTarget(this, this.handleCancel, UTTacticsExportCodePopupView.Event.CANCEL),
        e.removeTarget(this, this.handleCopy, UTTacticsExportCodePopupView.Event.COPY)
    }
    ,
    UTTacticsExportCodePopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsExportCodePopupView
    }
    ,
    UTTacticsExportCodePopupViewController.prototype.handleCancel = function(e, t, i) {
        this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTTacticsExportCodePopupViewController.prototype.handleCopy = function(e, t, i) {
        var o = services.Localization;
        navigator.clipboard.writeText(this.tacticCode).then(function() {
            services.Notification.queue([o.localize("notification.tactics.exportCode.success"), UINotificationType.POSITIVE])
        })
    }
    ,
    UTTacticsExportCodePopupViewController.prototype.handleKeyUpEvent = function(e) {
        if (e.key === KeyboardKey.ESCAPE || e.key === KeyboardKey.MS_ESCAPE)
            this.onExit.notify(enums.UIDialogOptions.CANCEL);
        else if (e.key === KeyboardKey.ENTER) {
            var t = services.Localization;
            navigator.clipboard.writeText(this.tacticCode).then(function() {
                services.Notification.queue([t.localize("notification.tactics.exportCode.success"), UINotificationType.POSITIVE])
            })
        }
    }
    ,
    UTTacticsExportCodePopupViewController
}(BasePopupViewController)
  , UTTacticsInfoRowView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTTacticsInfoRowView() {
        return e.call(this) || this
    }
    return __extends(UTTacticsInfoRowView, e),
    UTTacticsInfoRowView.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    UTTacticsInfoRowView.prototype.setValue = function(e) {
        this.__value.textContent = e
    }
    ,
    UTTacticsInfoRowView
}(EAView));
UTTacticsInfoRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-info-row-view"),
        this.__label = document.createElement("p"),
        this.__label.classList.add("ut-tactics-info-row-view--label"),
        e.appendChild(this.__label),
        this.__value = document.createElement("p"),
        this.__value.classList.add("ut-tactics-info-row-view--value"),
        e.appendChild(this.__value),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsInfoRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__value = null
}
,
UTTacticsInfoRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsImportCodePopupView = function(i) {
    function UTTacticsImportCodePopupView() {
        var e = i.call(this) || this;
        return e.infoCells = [],
        e
    }
    return __extends(UTTacticsImportCodePopupView, i),
    UTTacticsImportCodePopupView.prototype.init = function() {
        var e = services.Localization;
        i.prototype.init.call(this),
        this._cancelBtn.init(),
        this._cancelBtn.setText(e.localize("common.dialog.cancel")),
        this._cancelBtn.setInteractionState(!0),
        this._continueBtn.init(),
        this._continueBtn.setInteractionState(!0),
        this._continueBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._cancelBtn.addTarget(this, this.onButtonSelected, EventType.TAP);
        var t = new UTTextInputControl;
        t.init(),
        t.addTarget(this, this.onInput, EventType.INPUT),
        t.setMaxLength(12),
        t.setPlaceholder(e.localize("tactics.label.enterCode")),
        t.addClass("round"),
        this.nameInput = t,
        this.addSubview(this.nameInput, this.__content),
        this.layoutSubviews()
    }
    ,
    UTTacticsImportCodePopupView.prototype.dealloc = function() {
        this.infoCells.forEach(function(e) {
            return e.dealloc()
        }),
        this.infoCells = [],
        this.nameInput.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsImportCodePopupView.prototype.setTitle = function(e) {
        this.__titleText.textContent = e
    }
    ,
    UTTacticsImportCodePopupView.prototype.setConfirmButtonLabel = function(e) {
        this._continueBtn.setText(e)
    }
    ,
    UTTacticsImportCodePopupView.prototype.render = function(e, t) {
        this.setTitle(e),
        this.setConfirmButtonLabel(t)
    }
    ,
    UTTacticsImportCodePopupView.prototype.getInputValue = function() {
        return this.nameInput.value
    }
    ,
    UTTacticsImportCodePopupView.prototype.setInputValue = function(e) {
        this.nameInput.value = e
    }
    ,
    UTTacticsImportCodePopupView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTTacticsImportCodePopupView.prototype.renderInput = function() {
        this.removeSubviews()
    }
    ,
    UTTacticsImportCodePopupView.prototype.renderTacticsInfo = function(e) {
        var t = this;
        this.removeSubviews();
        var i = e.formation;
        if (i) {
            var o = services.Localization;
            this.setDescription(o.localize("tactics.importCodePopup.description2"));
            var n = new UTTacticsInfoRowView;
            n.init(),
            n.setLabel(o.localize("tactics.presetpopup.label.formation")),
            n.setValue(i.displayName);
            var r = new UTTacticsInfoRowView;
            r.init(),
            r.setLabel(o.localize("tactics.presetpopup.label.offensive")),
            r.setValue(o.localize("tactics.style.offensive." + e.buildup));
            var s = new UTTacticsInfoRowView;
            s.init(),
            s.setLabel(o.localize("tactics.presetpopup.label.defensive")),
            s.setValue(o.localize("tactics.style.defensive." + e.defensive)),
            this.infoCells.push(n),
            this.infoCells.push(r),
            this.infoCells.push(s),
            this.infoCells.forEach(function(e) {
                t.addSubview(e, t.__content)
            }),
            this.layoutSubviews()
        } else
            DebugUtils.Assert(!1, "No formation found")
    }
    ,
    UTTacticsImportCodePopupView.prototype.setConfirmButtonEnabled = function(e) {
        this._continueBtn.setInteractionState(e)
    }
    ,
    UTTacticsImportCodePopupView.prototype.onButtonSelected = function(e, t, i) {
        e === this._continueBtn ? this._triggerActions(UTTacticsImportCodePopupView.Event.CONTINUE, {
            code: this.getInputValue()
        }) : e === this._cancelBtn && this._triggerActions(UTTacticsImportCodePopupView.Event.CANCEL)
    }
    ,
    UTTacticsImportCodePopupView.prototype.onInput = function(e, t, i) {
        this._triggerActions(UTTacticsImportCodePopupView.Event.CHANGE, {
            code: i.value
        })
    }
    ,
    UTTacticsImportCodePopupView.Event = Object.freeze({
        CONTINUE: "UTTacticsImportCodePopupView.CONTINUE",
        CANCEL: "UTTacticsImportCodePopupView.CANCEL",
        IMPORT: "UTTacticsImportCodePopupView.IMPORT",
        CHANGE: "UTTacticsImportCodePopupView.CHANGE"
    }),
    UTTacticsImportCodePopupView
}(EATargetActionView);
UTTacticsImportCodePopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-import-code-popup-view");
        var t = document.createElement("header");
        this.__titleText = document.createElement("h1"),
        t.appendChild(this.__titleText),
        e.appendChild(t),
        this.__content = document.createElement("div"),
        this.__content.classList.add("bodySection"),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-tactics-import-code-popup-view--description"),
        this.__content.appendChild(this.__description),
        e.appendChild(this.__content);
        var i = document.createElement("div");
        i.classList.add("ut-button-group"),
        this._continueBtn = new UTGroupButtonControl,
        i.appendChild(this._continueBtn.getRootElement()),
        this._cancelBtn = new UTGroupButtonControl,
        this._cancelBtn.getRootElement().classList.add("negative"),
        i.appendChild(this._cancelBtn.getRootElement()),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsImportCodePopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleText = null,
    this.__content = null,
    this.__description = null,
    this._continueBtn.destroy(),
    this._cancelBtn.destroy()
}
,
UTTacticsImportCodePopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsImportCodePopupViewController = function(i) {
    function UTTacticsImportCodePopupViewController() {
        var e = i.call(this) || this;
        return e.currentStep = 1,
        e.onConfirm = new EAObservable,
        e
    }
    return __extends(UTTacticsImportCodePopupViewController, i),
    UTTacticsImportCodePopupViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.onConfirm.init()
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.dealloc = function() {
        this.onConfirm.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.viewDidAppear = function() {
        var e = this.getView()
          , t = services.Localization;
        i.prototype.viewDidAppear.call(this),
        e.setTitle(t.localize("tactics.button.importTacticCode")),
        e.setConfirmButtonLabel(t.localize("tactics.button.confirmImportCode")),
        e.setDescription(t.localize("tactics.importCodePopup.description1")),
        e.addTarget(this, this.handleCancel, UTTacticsImportCodePopupView.Event.CANCEL),
        e.addTarget(this, this.handleContinue, UTTacticsImportCodePopupView.Event.CONTINUE),
        e.addTarget(this, this.handleInput, UTTacticsImportCodePopupView.Event.CHANGE),
        e.setConfirmButtonEnabled(!1)
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        i.prototype.viewWillDisappear.call(this),
        e.removeTarget(this, this.handleCancel, UTTacticsImportCodePopupView.Event.CANCEL),
        e.removeTarget(this, this.handleContinue, UTTacticsImportCodePopupView.Event.CONTINUE),
        e.removeTarget(this, this.handleInput, UTTacticsImportCodePopupView.Event.CHANGE)
    }
    ,
    UTTacticsImportCodePopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsImportCodePopupView
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.handleInput = function(e, t, i) {
        this.getView().setInputValue(i.code),
        this.updateConfirmButtonState(i.code)
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.updateConfirmButtonState = function(e) {
        this.getView().setConfirmButtonEnabled(e.length === UTSquadTacticsEntity.SHARE_CODE_LENGTH)
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.handleContinue = function(e, t, i) {
        var o = UTSquadTacticsEntity.decodeCode(i.code);
        if (!o)
            return services.Notification.queue([services.Localization.localize("notification.tactics.shareCodeInvalid"), UINotificationType.NEGATIVE]),
            void this.getView().setInputValue("");
        if (1 === this.currentStep) {
            var n = this.getView();
            o && n.renderTacticsInfo(o),
            this.currentStep = 2
        } else
            this.onConfirm.notify(o),
            this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.handleCancel = function(e, t, i) {
        this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTTacticsImportCodePopupViewController.prototype.handleKeyUpEvent = function(e) {
        e.key !== KeyboardKey.ESCAPE && e.key !== KeyboardKey.MS_ESCAPE || this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTTacticsImportCodePopupViewController
}(BasePopupViewController)
  , UTTacticsEditSlotPopupViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(o) {
    function UTTacticsEditSlotPopupViewController(e, t) {
        var i = o.call(this) || this;
        return i.selectedSlotIndex = e,
        i.tacticsViewModel = t,
        i
    }
    return __extends(UTTacticsEditSlotPopupViewController, o),
    UTTacticsEditSlotPopupViewController.prototype.viewDidAppear = function() {
        o.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.getExitBtn().addTarget(this, this.closePopup, EventType.TAP),
        e.addTarget(this, this._onRenameSlot, UTTacticsEditSlotPopupView.Events.RENAME),
        e.addTarget(this, this._onDeleteSlot, UTTacticsEditSlotPopupView.Events.DELETE),
        e.addTarget(this, this._onDuplicateSlot, UTTacticsEditSlotPopupView.Events.DUPLICATE),
        e.addTarget(this, this._onExportCode, UTTacticsEditSlotPopupView.Events.EXPORT),
        e.addTarget(this, this._onImportCode, UTTacticsEditSlotPopupView.Events.IMPORT)
    }
    ,
    UTTacticsEditSlotPopupViewController.prototype.viewWillDisappear = function() {
        o.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.getExitBtn().removeTarget(this, this.closePopup, EventType.TAP),
        e.removeTarget(this, this._onRenameSlot, UTTacticsEditSlotPopupView.Events.RENAME),
        e.removeTarget(this, this._onDeleteSlot, UTTacticsEditSlotPopupView.Events.DELETE),
        e.removeTarget(this, this._onDuplicateSlot, UTTacticsEditSlotPopupView.Events.DUPLICATE),
        e.removeTarget(this, this._onExportCode, UTTacticsEditSlotPopupView.Events.EXPORT),
        e.removeTarget(this, this._onImportCode, UTTacticsEditSlotPopupView.Events.IMPORT)
    }
    ,
    UTTacticsEditSlotPopupViewController.prototype._onDeleteSlot = function(e, t, i) {
        var o = this
          , n = services.Localization
          , r = this.tacticsViewModel.getSlotByIndex(this.selectedSlotIndex);
        if (r)
            if (this.tacticsViewModel.getCustomizedSlots().length <= 1)
                services.Notification.queue([n.localize("notification.tactics.error.deleteLastSlot"), UINotificationType.NEGATIVE]);
            else {
                var s = new UTActionConfirmationPopupViewController;
                s.init(),
                s.modalDisplayStyle = "form",
                s.modalDisplayDimensions.width = "380px",
                s.modalCanDismissFromShield = !1,
                s.setTitleText(n.localize("tactics.popup.deleteTactic.title")),
                s.setBodyText(n.localize("tactics.popup.deleteTactic.body")),
                s.toggleConfirmAlwaysDisplay(!1),
                s.onExit.observe(this, function(e, t) {
                    e.unobserve(o),
                    t === enums.UIDialogOptions.OK && (r.setCustomized(!1),
                    o.tacticsViewModel.deleteTacticSlot(r.id).observe(o, function(e, t) {
                        e.unobserve(o),
                        t.success && JSUtils.isObject(t.data) && JSUtils.isNumber(t.data.newActiveProfile) ? (o.tacticsViewModel.setSlotAsActive(t.data.newActiveProfile),
                        services.Notification.queue([n.localize("notification.tactics.deleteSlot"), UINotificationType.POSITIVE])) : services.Notification.queue([n.localize("notification.tactics.deleteSlotFailed"), UINotificationType.NEGATIVE])
                    }))
                }),
                gPopupClickShield.setActivePopup(s),
                gPopupClickShield.closeActivePopup()
            }
        else
            DebugUtils.Assert(!1, "The slot to delete does not exist in the tactics view model.")
    }
    ,
    UTTacticsEditSlotPopupViewController.prototype._onRenameSlot = function(e, t, i) {
        var o = this
          , n = services.Localization
          , r = this.tacticsViewModel.getSlotByIndex(this.selectedSlotIndex);
        if (r) {
            var s = Object.assign("", r.name)
              , a = new UTRenamePopupViewController({
                defaultName: r.name,
                title: n.localize("popup.tactics.renameSlot"),
                buttonLabel: n.localize("tactics.button.renameTactic")
            });
            a.init(),
            a.modalDisplayDimensions.width = "24em",
            a.onConfirm.observe(this, function(e, t) {
                o.tacticsViewModel && (e.unobserve(o),
                r.setCustomName(t),
                gClickShield.showShield(EAClickShieldView.Shield.LOADING),
                o.tacticsViewModel.saveModifiedMentalities().observe(o, function(e, t) {
                    e.unobserve(o),
                    t.success ? JSUtils.isObject(t.response) && JSUtils.isValid(t.response.tactics) ? services.Notification.queue([n.localize("notification.tactics.profanity"), UINotificationType.NEUTRAL]) : services.Notification.queue([n.localize("notification.tactics.renameSlot"), UINotificationType.POSITIVE]) : (r.setCustomName(s),
                    services.Notification.queue([n.localize("notification.tactics.renameSlotFailed"), UINotificationType.NEGATIVE])),
                    gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
                }))
            }),
            gPopupClickShield.setActivePopup(a),
            gPopupClickShield.closeActivePopup()
        } else
            DebugUtils.Assert(!1, "The slot to edit does not exist in the tactics view model.")
    }
    ,
    UTTacticsEditSlotPopupViewController.prototype._onDuplicateSlot = function(e, t, i) {
        var o, n, r = this, s = services.Localization, a = null === (o = this.tacticsViewModel) || void 0 === o ? void 0 : o.getSlotByIndex(this.selectedSlotIndex);
        if (a)
            if (null === (n = this.tacticsViewModel) || void 0 === n ? void 0 : n.hasEmptySlots()) {
                var l = new UTRenamePopupViewController({
                    defaultName: a.name,
                    title: s.localize("popup.tactics.renameSlot"),
                    buttonLabel: s.localize("tactics.button.duplicateTactic")
                });
                l.init(),
                l.modalDisplayDimensions.width = "24em",
                l.onConfirm.observe(this, function(e, t) {
                    if (r.tacticsViewModel) {
                        e.unobserve(r);
                        var i = r.tacticsViewModel.getSlotByIndex(r.selectedSlotIndex)
                          , o = r.tacticsViewModel.getFirstEmptySlot()
                          , n = Object.assign({}, o);
                        i && o && (r.tacticsViewModel.copyTacticsSlot(i.id, o.id),
                        o.setCustomName(t),
                        gClickShield.showShield(EAClickShieldView.Shield.LOADING),
                        r.tacticsViewModel.saveModifiedMentalities().observe(r, function(e, t) {
                            e.unobserve(r),
                            t.success ? services.Notification.queue([s.localize("notification.tactics.copySlot"), UINotificationType.POSITIVE]) : (r.tacticsViewModel.overrideTacticSlot(o.id, n),
                            services.Notification.queue([s.localize("notification.tactics.copyFailed"), UINotificationType.NEGATIVE])),
                            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
                        }))
                    }
                }),
                gPopupClickShield.setActivePopup(l),
                gPopupClickShield.closeActivePopup()
            } else
                services.Notification.queue([s.localize("popup.tactics.error.noEmptySlots"), UINotificationType.NEGATIVE]);
        else
            DebugUtils.Assert(!1, "The slot to edit does not exist in the tactics view model.")
    }
    ,
    UTTacticsEditSlotPopupViewController.prototype._onExportCode = function(e, t, i) {
        var o = this.tacticsViewModel.getSlotByIndex(this.selectedSlotIndex);
        if (o) {
            var n = new UTTacticsExportCodePopupViewController({
                tacticCode: o.getCode()
            });
            n.init(),
            n.modalDisplayDimensions.width = "24em",
            gPopupClickShield.setActivePopup(n),
            gPopupClickShield.closeActivePopup()
        } else
            DebugUtils.Assert(!1, "No active tactics")
    }
    ,
    UTTacticsEditSlotPopupViewController.prototype._onImportCode = function(e, t, i) {
        var n = this
          , o = new UTTacticsImportCodePopupViewController;
        o.init(),
        o.modalDisplayDimensions.width = "24em",
        o.onConfirm.observe(this, function(e, t) {
            var i;
            e.unobserve(n);
            var o = null === (i = n.tacticsViewModel) || void 0 === i ? void 0 : i.getSlotByIndex(n.selectedSlotIndex);
            o && (null == t ? void 0 : t.formation) && (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
            o.setBuildUpPlayStyle(t.buildup),
            o.setDefensiveStyle(t.defensive),
            o.setDefensiveLineHeight(UTSquadTacticsEntity.getLineHeightFromDefensiveStyle(t.defensive)),
            o.setFormation(t.formation),
            t.instructions.map(function(e, t) {
                o.setInstructionsBySlotIndex(t, e)
            }),
            n.tacticsViewModel.saveModifiedMentalities().observe(n, function(e, t) {
                e.unobserve(n);
                var i = services.Localization;
                t.success ? services.Notification.queue([i.localize("notification.tactics.importSuccess"), UINotificationType.POSITIVE]) : services.Notification.queue([i.localize("notification.tactics.importFailed"), UINotificationType.NEGATIVE]),
                gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
            }))
        }),
        gPopupClickShield.setActivePopup(o),
        gPopupClickShield.closeActivePopup()
    }
    ,
    UTTacticsEditSlotPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsEditSlotPopupView
    }
    ,
    UTTacticsEditSlotPopupViewController
}(BasePopupViewController))
  , UTTacticsManageSettingsViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTTacticsManageSettingsViewController() {
        var e = i.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsManageSettingsViewController, i),
    UTTacticsManageSettingsViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsManageSettingsViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsManageSettingsViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsManageSettingsView
    }
    ,
    UTTacticsManageSettingsViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("tactics.title.manageSettings")
    }
    ,
    UTTacticsManageSettingsViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this.getView();
        if (e.init(),
        e.addTarget(this, this.onSlotOptionsTapped, UTTacticsManageSettingsRowView.Events.SLOT_OPTIONS),
        e.addTarget(this, this.onCreateSlotTapped, UTTacticsManageSettingsRowView.Events.CREATE_NEW_SLOT),
        isPhone() && e.toggleHeaderDisplay(!1),
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Tactics view model is not set."),
        this.tacticsViewModel) {
            var t = this.tacticsViewModel.getMentalities();
            this.tacticsViewModel.onDataUpdated.observe(this, this.onTacticsViewModelUpdated),
            e.render(t)
        }
    }
    ,
    UTTacticsManageSettingsViewController.prototype.viewWillDisappear = function() {
        i.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this.onSlotOptionsTapped, UTTacticsManageSettingsRowView.Events.SLOT_OPTIONS),
        e.removeTarget(this, this.onCreateSlotTapped, UTTacticsManageSettingsRowView.Events.CREATE_NEW_SLOT),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.unobserve(this)
    }
    ,
    UTTacticsManageSettingsViewController.prototype.onTacticsViewModelUpdated = function(e, t) {
        JSUtils.isObject(t) && this.tacticsViewModel && this.getView().render(this.tacticsViewModel.getMentalities())
    }
    ,
    UTTacticsManageSettingsViewController.prototype.onSlotOptionsTapped = function(e, t, i) {
        if (this.tacticsViewModel) {
            var o = new UTTacticsEditSlotPopupViewController(i.index,this.tacticsViewModel);
            o.init(),
            o.modalDisplayDimensions.width = "20em",
            o.modalCanDismissFromShield = !0,
            o.getView().init(),
            gPopupClickShield.setActivePopup(o)
        } else
            DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model when attempting to edit a tactics slot.")
    }
    ,
    UTTacticsManageSettingsViewController.prototype.onCreateSlotTapped = function(e, t, r) {
        var s = this;
        if (this.tacticsViewModel) {
            var a = services.Localization
              , i = new UTRenamePopupViewController({
                defaultName: "",
                title: a.localize("popup.tactics.nameNewSlot")
            });
            i.init(),
            i.modalDisplayDimensions.width = "24em",
            i.onConfirm.observe(this, function(e, t) {
                var i;
                if (s.tacticsViewModel) {
                    e.unobserve(s);
                    var o = s.tacticsViewModel.getSlotByIndex(r.index)
                      , n = s.tacticsViewModel.getActiveMentality();
                    o && (o.setCustomName(t),
                    n || o.setState(TacticState.ACTIVE),
                    gClickShield.showShield(EAClickShieldView.Shield.LOADING),
                    null === (i = s.tacticsViewModel) || void 0 === i || i.saveModifiedMentalities().observe(s, function(e, t) {
                        e.unobserve(s),
                        t.success ? (JSUtils.isObject(t.response) && JSUtils.isValid(t.response.tactics) && services.Notification.queue([a.localize("notification.tactics.profanity"), UINotificationType.NEUTRAL]),
                        services.Notification.queue([a.localize("notification.tactics.createSlot"), UINotificationType.POSITIVE])) : services.Notification.queue([a.localize("notification.applyPreset.createFailed"), UINotificationType.NEGATIVE]),
                        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
                    }))
                }
            }),
            gPopupClickShield.setActivePopup(i)
        } else
            DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model when attempting to edit a tactics slot.")
    }
    ,
    UTTacticsManageSettingsViewController
}(EAViewController))
  , UTTacticsProfileSelectPopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTTacticsProfileSelectPopupView() {
        var e = i.call(this) || this;
        return e.rows = [],
        e
    }
    return __extends(UTTacticsProfileSelectPopupView, i),
    UTTacticsProfileSelectPopupView.prototype.init = function() {
        i.prototype.init.call(this),
        this._exitBtn.init()
    }
    ,
    UTTacticsProfileSelectPopupView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTacticsProfileSelectPopupView.prototype.dealloc = function() {
        var t = this;
        this.rows.forEach(function(e) {
            e.removeTarget(t, t.onPresetSelected, EventType.TAP),
            e.dealloc()
        }),
        this.rows = [],
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsProfileSelectPopupView.prototype.getExitBtn = function() {
        return this._exitBtn
    }
    ,
    UTTacticsProfileSelectPopupView.prototype.renderTacticsApplyPresetRows = function(e, o, n) {
        var r = this
          , s = services.Localization;
        e.forEach(function(e, t) {
            var i = new UTTacticsApplyPresetRowView;
            i.init(),
            i.setTitle(e.name),
            i.setFormationName(o[t]),
            i.setBuildupStyle(s.localize("tactics.style.offensive." + e.offensiveStyleId)),
            i.setDefensiveStyle(s.localize("tactics.style.defensive." + e.defensiveStyleId)),
            i.setInteractionState(!0),
            i.addTarget(r, r.onPresetSelected, EventType.TAP),
            n && 0 === t ? i.setManagerItem(n) : i.renderPresetShell(),
            r.rows.push(i),
            r.addSubview(i, r.__container)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsProfileSelectPopupView.prototype.onPresetSelected = function(e, t, i) {
        e.isInteractionEnabled() && this._triggerActions(EventType.TAP, {
            index: this.rows.indexOf(e)
        })
    }
    ,
    UTTacticsProfileSelectPopupView
}(EATargetActionView));
UTTacticsProfileSelectPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-profile-select-popup-view");
        var t = document.createElement("header");
        t.classList.add("ut-tactics-profile-select-popup-view--header"),
        this.__title = document.createElement("h1"),
        t.appendChild(this.__title),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._exitBtn.getRootElement()),
        e.appendChild(t),
        this.__container = document.createElement("div"),
        this.__container.classList.add("ut-tactics-profile-select-popup-view--container"),
        e.appendChild(this.__container),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsProfileSelectPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._exitBtn.destroy(),
    this.__container = null
}
,
UTTacticsProfileSelectPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
__spreadArrays = this && this.__spreadArrays || function() {
    for (var e = 0, t = 0, i = arguments.length; t < i; t++)
        e += arguments[t].length;
    var o = Array(e)
      , n = 0;
    for (t = 0; t < i; t++)
        for (var r = arguments[t], s = 0, a = r.length; s < a; s++,
        n++)
            o[n] = r[s];
    return o
}
;
var UTTacticsProfileSelectPopupViewController = function(t) {
    function UTTacticsProfileSelectPopupViewController() {
        var e = t.call(this) || this;
        return e.profiles = [],
        e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsProfileSelectPopupViewController, t),
    UTTacticsProfileSelectPopupViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsProfileSelectPopupViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.getExitBtn().addTarget(this, this.closePopup, EventType.TAP),
        e.addTarget(this, this.onPresetSelect, EventType.TAP)
    }
    ,
    UTTacticsProfileSelectPopupViewController.prototype.viewWillDisappear = function() {
        t.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.getExitBtn().removeTarget(this, this.closePopup, EventType.TAP),
        e.removeTarget(this, this.onPresetSelect, EventType.TAP),
        services.UserSettings.removeSessionItem(UserSettingsKey.TACTICS_APPLY_PRESET_MESSAGE_DISPLAYED)
    }
    ,
    UTTacticsProfileSelectPopupViewController.prototype.dealloc = function() {
        this.profiles = [],
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsProfileSelectPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsProfileSelectPopupView
    }
    ,
    UTTacticsProfileSelectPopupViewController.prototype.onPresetSelect = function(e, t, i) {
        var o = this;
        if (this.tacticsViewModel) {
            var n = this.tacticsViewModel.getSelectedMentality()
              , r = this.profiles[i.index]
              , s = services.UserSettings.getSessionItem(UserSettingsKey.TACTICS_APPLY_PRESET_MESSAGE_DISPLAYED)
              , a = JSUtils.isString(s) && "true" === s.toLowerCase()
              , l = "true" === services.UserSettings.getItem(UserSettingsKey.TACTICS_APPLY_PRESET_MESSAGE_DISPLAYED, "false").toLowerCase();
            if (n)
                if (a || l)
                    this.applyPresetToMentality(n, r),
                    gPopupClickShield.closeActivePopup();
                else {
                    var c = services.Localization
                      , u = new UTActionConfirmationPopupViewController;
                    u.modalDisplayStyle = "form",
                    u.modalDisplayDimensions.width = "380px",
                    u.modalCanDismissFromShield = !1,
                    u.setTitleText(c.localize("tactics.applyPreset.popup.title")),
                    u.setBodyText(c.localize("tactics.applyPreset.popup.body")),
                    u.onExit.observe(this, function(e, t) {
                        e.unobserve(o),
                        t === enums.UIDialogOptions.OK && (u.getShowConfirmationPopup() ? services.UserSettings.setSessionItem(UserSettingsKey.TACTICS_APPLY_PRESET_MESSAGE_DISPLAYED, "true") : services.UserSettings.setItem(UserSettingsKey.TACTICS_APPLY_PRESET_MESSAGE_DISPLAYED, "true"),
                        o.applyPresetToMentality(n, r))
                    }),
                    gPopupClickShield.closeActivePopup(),
                    gPopupClickShield.setActivePopup(u)
                }
        }
    }
    ,
    UTTacticsProfileSelectPopupViewController.prototype.applyPresetToMentality = function(i, e) {
        var t = repositories.Squad.getFormationById(e.formation.id);
        t ? (i.setFormation(t),
        i.setDefensiveStyle(e.defensiveStyleId),
        i.setBuildUpPlayStyle(e.offensiveStyleId),
        e.formation.roles.forEach(function(e, t) {
            i.setInstructionsBySlotIndex(t, e)
        }),
        services.Notification.queue([services.Localization.localize("tactics.applyPreset.popup.applied"), UINotificationType.POSITIVE])) : DebugUtils.Assert(null !== t, "Expected a valid squad formation to be found.")
    }
    ,
    UTTacticsProfileSelectPopupViewController.prototype.setupPopup = function() {
        var e;
        if (this.tacticsViewModel) {
            var t = services.Localization
              , i = this.getView();
            i.setTitle(t.localize("tactics.applyPreset.popup.title"));
            var o = null === (e = this.tacticsViewModel.getSquad()) || void 0 === e ? void 0 : e.getManager().item
              , n = this.tacticsViewModel.getDefaultProfiles()
              , r = []
              , s = null;
            if (o && (s = this.tacticsViewModel.requestManagerProfile(o.id))) {
                this.profiles = [s];
                var a = repositories.Squad.getFormationById(s.formation.id);
                a && r.push(a.name)
            }
            n.forEach(function(e) {
                var t = repositories.Squad.getFormationById(e.formation.id);
                t && r.push(t.name)
            }),
            this.profiles = __spreadArrays(this.profiles, n),
            i.renderTacticsApplyPresetRows(this.profiles, r, o)
        }
    }
    ,
    UTTacticsProfileSelectPopupViewController
}(BasePopupViewController)
  , UTTacticsSelectSlotPopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsSelectSlotPopupView() {
        var e = t.call(this) || this;
        return e.tacticSlotRows = [],
        e
    }
    return __extends(UTTacticsSelectSlotPopupView, t),
    UTTacticsSelectSlotPopupView.prototype.init = function() {
        t.prototype.init.call(this),
        this._exitBtn.init(),
        this._settingsBtn.init(),
        this._settingsBtn.setText(services.Localization.localize("label.button.moreSettings")),
        this._settingsBtn.addTarget(this, this._onSelectSettings, EventType.TAP)
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.dealloc = function() {
        this._settingsBtn.removeTarget(this, this._onSelectSettings, EventType.TAP),
        this.clearTacticSlotRows(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.clearTacticSlotRows = function() {
        this.tacticSlotRows.forEach(function(e) {
            return e.dealloc()
        }),
        this.tacticSlotRows = []
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.getExitBtn = function() {
        return this._exitBtn
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.getSettingsBtn = function() {
        return this._settingsBtn
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.setSelectedTacticSlotRow = function(e) {
        this.tacticSlotRows.forEach(function(e) {
            return e.toggleSelected(!1)
        }),
        this.tacticSlotRows[e].toggleSelected(!0)
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.renderTacticSlots = function(e) {
        var o = this;
        this.removeSubviews(),
        this.clearTacticSlotRows(),
        e.forEach(function(e, t) {
            var i = o.generateTacticSlotRow(e, t);
            o.tacticSlotRows.push(i),
            o.addSubview(i, o.__content)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsSelectSlotPopupView.prototype.generateTacticSlotRow = function(e, t) {
        var i = this
          , o = services.Localization
          , n = new UTTacticsPresetInfoRowView;
        if (n.init(),
        n.setTacticNameLabel(o.localize("popup.applyPreset.tacticLabel", [(t + 1).toString()])),
        n.toggleClass("empty", !e.isCustomized()),
        e.isCustomized()) {
            n.toggleActive(e.getState() === TacticState.ACTIVE),
            n.setTacticName(e.name),
            n.setBuildUpStyle(e.getBuildUpPlayStyle()),
            n.setDefensiveStyle(e.getDefensiveStyle());
            var r = e.getFormation();
            n.setFormationName(r ? r.name : BLANK_STR),
            n.addTarget(this, function() {
                return i._eTacticSlotSelected(e.id, t)
            }, EventType.TAP)
        } else
            n.toggleOverlayDisplay(!0),
            n.addTarget(this, function() {
                return i._eNewTacticsSlotSelected(e.id, t)
            }, EventType.TAP);
        return n
    }
    ,
    UTTacticsSelectSlotPopupView.prototype._eTacticSlotSelected = function(e, t) {
        this.setSelectedTacticSlotRow(t),
        this._triggerActions(UTTacticsSelectSlotPopupView.Events.SELECT_TACTICS_SLOT, {
            slotId: e
        })
    }
    ,
    UTTacticsSelectSlotPopupView.prototype._eNewTacticsSlotSelected = function(e, t) {
        this.setSelectedTacticSlotRow(t),
        this._triggerActions(UTTacticsSelectSlotPopupView.Events.CREATE_NEW_TACTICS_SLOT, {
            slotId: e
        })
    }
    ,
    UTTacticsSelectSlotPopupView.prototype._onSelectSettings = function(e, t, i) {
        e.isInteractionEnabled() && this._triggerActions(UTTacticsSelectSlotPopupView.Events.MANAGE_TACTICS_SLOTS)
    }
    ,
    UTTacticsSelectSlotPopupView.Events = {
        SELECT_TACTICS_SLOT: "SELECT_TACTICS_SLOT",
        CREATE_NEW_TACTICS_SLOT: "CREATE_NEW_TACTICS_SLOT",
        MANAGE_TACTICS_SLOTS: "MANAGE_TACTICS_SLOTS"
    },
    UTTacticsSelectSlotPopupView
}(EATargetActionView));
UTTacticsSelectSlotPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-select-slot-popup-view"),
        this._exitBtn = new UTImageButtonControl,
        this._exitBtn.getRootElement().classList.add("exit-btn"),
        e.appendChild(this._exitBtn.getRootElement());
        var t = document.createElement("header");
        t.classList.add("ut-tactics-select-slot-popup-view--header"),
        this.__title = document.createElement("p"),
        t.appendChild(this.__title),
        e.appendChild(t),
        this.__content = document.createElement("div"),
        this.__content.classList.add("ut-tactics-select-slot-popup-view--content"),
        e.appendChild(this.__content);
        var i = document.createElement("footer");
        this._settingsBtn = new UTImageButtonControl,
        this._settingsBtn.getRootElement().classList.add("settings-btn"),
        i.appendChild(this._settingsBtn.getRootElement()),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsSelectSlotPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._exitBtn.destroy(),
    this.__title = null,
    this.__content = null,
    this._settingsBtn.destroy()
}
,
UTTacticsSelectSlotPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsSelectSlotPopupViewController = function(t) {
    function UTTacticsSelectSlotPopupViewController() {
        var e = t.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsSelectSlotPopupViewController, t),
    UTTacticsSelectSlotPopupViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsSelectSlotPopupViewController.prototype.init = function() {
        t.prototype.init.call(this)
    }
    ,
    UTTacticsSelectSlotPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsSelectSlotPopupView
    }
    ,
    UTTacticsSelectSlotPopupViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.addTarget(this, this._onSelectSlot, UTTacticsSelectSlotPopupView.Events.SELECT_TACTICS_SLOT),
        e.addTarget(this, this._onCreateNewSlot, UTTacticsSelectSlotPopupView.Events.CREATE_NEW_TACTICS_SLOT),
        e.getExitBtn().addTarget(this, this.closePopup, EventType.TAP),
        e.getSettingsBtn().addTarget(this, this._onSelectSettings, EventType.TAP)
    }
    ,
    UTTacticsSelectSlotPopupViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        e.removeTarget(this, this._onSelectSlot, UTTacticsSelectSlotPopupView.Events.SELECT_TACTICS_SLOT),
        e.removeTarget(this, this._onCreateNewSlot, UTTacticsSelectSlotPopupView.Events.CREATE_NEW_TACTICS_SLOT),
        e.getExitBtn().removeTarget(this, this.closePopup, EventType.TAP),
        e.getSettingsBtn().removeTarget(this, this._onSelectSettings, EventType.TAP)
    }
    ,
    UTTacticsSelectSlotPopupViewController.prototype._onCreateNewSlot = function(e, t, a) {
        var l = this;
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model when creating a new tactic slot");
        var c = services.Localization
          , i = new UTRenamePopupViewController({
            defaultName: "",
            title: c.localize("popup.applyPreset.tacticName")
        });
        i.init(),
        i.modalDisplayDimensions.width = "24em",
        i.onConfirm.observe(this, function(e, t) {
            var i;
            if (l.tacticsViewModel) {
                e.unobserve(l);
                var n = null === (i = l.tacticsViewModel.getSelectedMentality()) || void 0 === i ? void 0 : i.id
                  , r = l.tacticsViewModel.getSlotById(a.slotId);
                if (r) {
                    var s = UTSquadTacticsEntity.clone(r);
                    r.setCustomName(t),
                    gClickShield.showShield(EAClickShieldView.Shield.LOADING),
                    l.tacticsViewModel.saveModifiedMentalities().observe(l, function(e, t) {
                        var i, o;
                        e.unobserve(l),
                        t.success ? (JSUtils.isObject(t.response) && JSUtils.isValid(t.response.tactics) && services.Notification.queue([c.localize("notification.tactics.profanity"), UINotificationType.NEUTRAL]),
                        null === (i = l.tacticsViewModel) || void 0 === i || i.setSelectedMentalityById(a.slotId),
                        services.Notification.queue([c.localize("notification.applyPreset.createAndApplied"), UINotificationType.POSITIVE])) : (r.copyFrom(s),
                        r.onDataUpdated.notify(r, {
                            name: r.name
                        }),
                        n && (null === (o = l.tacticsViewModel) || void 0 === o || o.setSelectedMentalityById(n)),
                        services.Notification.queue([c.localize("notification.applyPreset.createFailed"), UINotificationType.NEGATIVE])),
                        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
                    })
                }
            }
        }),
        gPopupClickShield.setActivePopup(i),
        gPopupClickShield.closeActivePopup()
    }
    ,
    UTTacticsSelectSlotPopupViewController.prototype._onSelectSlot = function(e, t, i) {
        var o;
        this.tacticsViewModel && (null === (o = this.tacticsViewModel) || void 0 === o || o.setSelectedMentalityById(i.slotId)),
        this.closePopup()
    }
    ,
    UTTacticsSelectSlotPopupViewController.prototype._onSelectSettings = function(e, t, i) {
        this.closePopup()
    }
    ,
    UTTacticsSelectSlotPopupViewController
}(BasePopupViewController)
  , UTTacticsProfileMenuView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsProfileMenuView() {
        return t.call(this) || this
    }
    return __extends(UTTacticsProfileMenuView, t),
    UTTacticsProfileMenuView.prototype.init = function() {
        var e = services.Localization;
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this._btnSave.init(),
        this._btnSave.setText(e.localize("tactics.label.save")),
        this._btnSave.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._btnApplyPreset.init(),
        this._btnApplyPreset.setText(e.localize("tactics.label.applyPreset")),
        this._btnApplyPreset.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._btnOffensiveStyle.init(),
        this._btnOffensiveStyle.setText(e.localize("tactics.label.offensive")),
        this._btnOffensiveStyle.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._btnDefensiveStyle.init(),
        this._btnDefensiveStyle.setText(e.localize("tactics.label.defensive")),
        this._btnDefensiveStyle.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._btnChangeProfile.init(),
        this._btnChangeProfile.setText(e.localize("tactics.label.changeSelectedSlot")),
        this._btnChangeProfile.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._btnSetActiveProfile.init(),
        this._btnSetActiveProfile.setText(e.localize("tactics.label.setActive")),
        this._btnSetActiveProfile.addTarget(this, this.onButtonSelected, EventType.TAP),
        isPhone() || this._btnRoleVariations.addClass(enums.UIState.SELECTED),
        this._btnRoleVariations.init(),
        this._btnRoleVariations.setText(e.localize("tactics.label.rolevariations")),
        this._btnRoleVariations.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._btnFormation.init(),
        this._btnFormation.setText(e.localize("tactics.label.formation")),
        this._btnFormation.addTarget(this, this.onButtonSelected, EventType.TAP),
        this.__title.textContent = e.localize("tactics.menu.title"),
        this.__titleTacticalPreset.textContent = e.localize("tactics.label.tacticalpreset"),
        this.__titleOffensiveStyle.textContent = e.localize("tactics.label.offensive"),
        this.__titleDefensiveStyle.textContent = e.localize("tactics.label.defensive"),
        this.__titleFormation.textContent = e.localize("squads.formation"),
        this._imgPresetShell.init(),
        this._imgPresetShell.src = "images/tactics/presets/preset_shell.png"
    }
    ,
    UTTacticsProfileMenuView.prototype.dealloc = function() {
        var e;
        null === (e = this.itemView) || void 0 === e || e.dealloc(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsProfileMenuView.prototype.setActive = function(e) {
        this.__meta.classList.toggle("active", e)
    }
    ,
    UTTacticsProfileMenuView.prototype.setRolesButtonAsSelected = function() {
        this._btnRoleVariations.addClass(enums.UIState.SELECTED)
    }
    ,
    UTTacticsProfileMenuView.prototype.setMentalityName = function(e) {
        this.__valueTacticalPreset.textContent = e
    }
    ,
    UTTacticsProfileMenuView.prototype.setOffensiveStyleStyleById = function(e) {
        this.__valueOffensiveStyle.textContent = services.Localization.localize("tactics.style.offensive." + e)
    }
    ,
    UTTacticsProfileMenuView.prototype.setDefensiveStyleById = function(e) {
        this.__valueDefensiveStyle.textContent = services.Localization.localize("tactics.style.defensive." + e)
    }
    ,
    UTTacticsProfileMenuView.prototype.setFormationName = function(e) {
        this.__valueFormation.textContent = e
    }
    ,
    UTTacticsProfileMenuView.prototype.setShareCode = function(e) {
        this.__shareCode.textContent = e
    }
    ,
    UTTacticsProfileMenuView.prototype.setSaveButtonInteractionState = function(e) {
        this._btnSave.setInteractionState(e)
    }
    ,
    UTTacticsProfileMenuView.prototype.setSetActiveButtonInteractionState = function(e) {
        this._btnSetActiveProfile.setInteractionState(e)
    }
    ,
    UTTacticsProfileMenuView.prototype.resetSelectedButtonState = function() {
        isPhone() || (this._btnOffensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnFormation.removeClass(enums.UIState.SELECTED),
        this._btnDefensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnApplyPreset.removeClass(enums.UIState.SELECTED))
    }
    ,
    UTTacticsProfileMenuView.prototype.onButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && (e === this._btnSave ? this._triggerActions(UTTacticsProfileMenuView.Event.SAVE_TACTICS) : e === this._btnOffensiveStyle ? (this._triggerActions(UTTacticsProfileMenuView.Event.SELECT_OFFENSIVE_STYLES),
        isPhone() || (this._btnDefensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnFormation.removeClass(enums.UIState.SELECTED),
        this._btnOffensiveStyle.addClass(enums.UIState.SELECTED),
        this._btnRoleVariations.removeClass(enums.UIState.SELECTED))) : e === this._btnDefensiveStyle ? (this._triggerActions(UTTacticsProfileMenuView.Event.SELECT_DEFENSIVE_STYLES),
        isPhone() || (this._btnDefensiveStyle.addClass(enums.UIState.SELECTED),
        this._btnFormation.removeClass(enums.UIState.SELECTED),
        this._btnOffensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnRoleVariations.removeClass(enums.UIState.SELECTED))) : e === this._btnRoleVariations ? (this._triggerActions(UTTacticsProfileMenuView.Event.SELECT_ROLEVARIATIONS),
        isPhone() || (this._btnDefensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnFormation.removeClass(enums.UIState.SELECTED),
        this._btnOffensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnRoleVariations.addClass(enums.UIState.SELECTED))) : e === this._btnFormation ? (this._triggerActions(UTTacticsProfileMenuView.Event.SELECT_FORMATION),
        isPhone() || (this._btnDefensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnFormation.addClass(enums.UIState.SELECTED),
        this._btnOffensiveStyle.removeClass(enums.UIState.SELECTED),
        this._btnRoleVariations.removeClass(enums.UIState.SELECTED))) : e === this._btnChangeProfile ? this._triggerActions(UTTacticsProfileMenuView.Event.CHANGE_SLOT) : e === this._btnSetActiveProfile ? this._triggerActions(UTTacticsProfileMenuView.Event.SET_ACTIVE) : e === this._btnApplyPreset && this._triggerActions(UTTacticsProfileMenuView.Event.APPLY_PRESET))
    }
    ,
    UTTacticsProfileMenuView.Event = Object.freeze({
        SAVE_TACTICS: "UTTacticsProfileMenuView.SAVE_TACTICS",
        SELECT_FORMATION: "UTTacticsProfileMenuView.SELECT_FORMATION",
        SELECT_ROLEVARIATIONS: "UTTacticsProfileMenuView.SELECT_ROLEVARIATIONS",
        SELECT_OFFENSIVE_STYLES: "UTTacticsProfileMenuView.SELECT_OFFENSIVE_STYLES",
        SELECT_DEFENSIVE_STYLES: "UTTacticsProfileMenuView.SELECT_DEFENSIVE_STYLES",
        SET_ACTIVE: "UTTacticsProfileMenuView.SET_ACTIVE",
        CHANGE_SLOT: "UTTacticsProfileMenuView.CHANGE_SLOT",
        APPLY_PRESET: "UTTacticsProfileMenuView.APPLY_PRESET"
    }),
    UTTacticsProfileMenuView
}(EATargetActionView));
UTTacticsProfileMenuView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-profile-menu-view");
        var t = document.createElement("header");
        t.classList.add("ut-tactics-profile-menu-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-profile-menu-view--title"),
        t.appendChild(this.__title),
        this._btnSave = new UTStandardButtonControl,
        this._btnSave.getRootElement().classList.add("mini"),
        this._btnSave.getRootElement().classList.add("call-to-action"),
        t.appendChild(this._btnSave.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-tactics-profile-menu-view--details"),
        this._imgPresetShell = new EAImageView,
        this._imgPresetShell.getRootElement().classList.add("ut-tactics-profile-menu-view--shell"),
        i.appendChild(this._imgPresetShell.getRootElement()),
        this.__meta = document.createElement("div"),
        this.__meta.classList.add("ut-tactics-profile-menu-view--meta");
        var o = document.createElement("span");
        o.classList.add("ut-tactics-profile-menu-view--title-container"),
        this.__titleTacticalPreset = document.createElement("h2"),
        this.__titleTacticalPreset.classList.add("title"),
        o.appendChild(this.__titleTacticalPreset),
        this.__shareCode = document.createElement("p"),
        this.__shareCode.classList.add("ut-tactics-profile-menu-view--share-code"),
        o.appendChild(this.__shareCode),
        this.__meta.appendChild(o),
        this.__valueTacticalPreset = document.createElement("p"),
        this.__valueTacticalPreset.classList.add("value"),
        this.__valueTacticalPreset.classList.add("ut-tactics-profile-menu-view--meta-preset-title"),
        this.__meta.appendChild(this.__valueTacticalPreset),
        this.__titleOffensiveStyle = document.createElement("h2"),
        this.__titleOffensiveStyle.classList.add("title"),
        this.__meta.appendChild(this.__titleOffensiveStyle),
        this.__valueOffensiveStyle = document.createElement("p"),
        this.__valueOffensiveStyle.classList.add("value"),
        this.__meta.appendChild(this.__valueOffensiveStyle),
        this.__titleDefensiveStyle = document.createElement("h2"),
        this.__titleDefensiveStyle.classList.add("title"),
        this.__meta.appendChild(this.__titleDefensiveStyle),
        this.__valueDefensiveStyle = document.createElement("p"),
        this.__valueDefensiveStyle.classList.add("value"),
        this.__meta.appendChild(this.__valueDefensiveStyle),
        this.__titleFormation = document.createElement("h2"),
        this.__titleFormation.classList.add("title"),
        this.__meta.appendChild(this.__titleFormation),
        this.__valueFormation = document.createElement("p"),
        this.__valueFormation.classList.add("value"),
        this.__meta.appendChild(this.__valueFormation),
        i.appendChild(this.__meta),
        e.appendChild(i);
        var n = document.createElement("div");
        n.classList.add("ut-tactics-profile-menu-view--action-button-container"),
        this._btnChangeProfile = new UTStandardButtonControl,
        n.appendChild(this._btnChangeProfile.getRootElement()),
        this._btnSetActiveProfile = new UTStandardButtonControl,
        n.appendChild(this._btnSetActiveProfile.getRootElement()),
        e.appendChild(n);
        var r = document.createElement("div");
        r.classList.add("ut-button-group"),
        this._btnApplyPreset = new UTGroupButtonControl,
        r.appendChild(this._btnApplyPreset.getRootElement()),
        this._btnRoleVariations = new UTGroupButtonControl,
        this._btnRoleVariations.getRootElement().classList.add("more"),
        r.appendChild(this._btnRoleVariations.getRootElement()),
        this._btnFormation = new UTGroupButtonControl,
        this._btnFormation.getRootElement().classList.add("more"),
        r.appendChild(this._btnFormation.getRootElement()),
        this._btnOffensiveStyle = new UTGroupButtonControl,
        this._btnOffensiveStyle.getRootElement().classList.add("more"),
        r.appendChild(this._btnOffensiveStyle.getRootElement()),
        this._btnDefensiveStyle = new UTGroupButtonControl,
        this._btnDefensiveStyle.getRootElement().classList.add("more"),
        r.appendChild(this._btnDefensiveStyle.getRootElement()),
        this.__subheaderRole = document.createElement("div"),
        this.__subheaderRole.classList.add("ut-button-group--section"),
        r.appendChild(this.__subheaderRole),
        e.appendChild(r),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsProfileMenuView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._btnSave.destroy(),
    this._imgPresetShell.destroy(),
    this.__meta = null,
    this.__titleTacticalPreset = null,
    this.__shareCode = null,
    this.__valueTacticalPreset = null,
    this.__titleOffensiveStyle = null,
    this.__valueOffensiveStyle = null,
    this.__titleDefensiveStyle = null,
    this.__valueDefensiveStyle = null,
    this.__titleFormation = null,
    this.__valueFormation = null,
    this._btnChangeProfile.destroy(),
    this._btnSetActiveProfile.destroy(),
    this._btnApplyPreset.destroy(),
    this._btnRoleVariations.destroy(),
    this._btnFormation.destroy(),
    this._btnOffensiveStyle.destroy(),
    this._btnDefensiveStyle.destroy(),
    this.__subheaderRole = null
}
,
UTTacticsProfileMenuView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsApplyPresetRowView = function(i) {
    function UTTacticsApplyPresetRowView() {
        var e = i.call(this) || this;
        return e.imageView = null,
        e.itemView = null,
        e
    }
    return __extends(UTTacticsApplyPresetRowView, i),
    UTTacticsApplyPresetRowView.prototype.dealloc = function() {
        var e, t;
        null === (e = this.itemView) || void 0 === e || e.dealloc(),
        null === (t = this.imageView) || void 0 === t || t.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsApplyPresetRowView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTacticsApplyPresetRowView.prototype.setFormationName = function(e) {
        var t = services.Localization
          , i = UTLocalizationUtil.formationDbNameToName(e, t);
        this.__formation.textContent = t.localize("tactics.label.formation") + ": " + i
    }
    ,
    UTTacticsApplyPresetRowView.prototype.setBuildupStyle = function(e) {
        var t = services.Localization;
        this.__buildupStyle.textContent = t.localize("tactics.label.offensive") + ": " + e
    }
    ,
    UTTacticsApplyPresetRowView.prototype.setDefensiveStyle = function(e) {
        var t = services.Localization;
        this.__defensiveStyle.textContent = t.localize("tactics.label.defensive") + ": " + e
    }
    ,
    UTTacticsApplyPresetRowView.prototype.setManagerItem = function(e) {
        var t;
        null === (t = this.itemView) || void 0 === t || t.dealloc(),
        this.itemView = factories.ItemView.createSmallItem(e),
        this.itemView && (this.itemView.init(),
        this.itemView.render(e),
        this.__item.appendChild(this.itemView.getRootElement()))
    }
    ,
    UTTacticsApplyPresetRowView.prototype.renderPresetShell = function() {
        this.imageView = new EAImageView,
        this.imageView.src = "images/tactics/presets/preset_shell.png",
        this.addSubview(this.imageView, this.__item),
        this.layoutSubviews()
    }
    ,
    UTTacticsApplyPresetRowView.prototype._tapDetected = function(e) {
        this.isInteractionEnabled() && (i.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP))
    }
    ,
    UTTacticsApplyPresetRowView
}(EATargetActionView);
UTTacticsApplyPresetRowView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-apply-preset-row-view"),
        this.__item = document.createElement("div"),
        this.__item.classList.add("ut-tactics-apply-preset-row-view--item"),
        e.appendChild(this.__item);
        var t = document.createElement("div");
        t.classList.add("ut-tactics-apply-preset-row-view--info"),
        this.__title = document.createElement("p"),
        this.__title.classList.add("ut-tactics-apply-preset-row-view--title"),
        t.appendChild(this.__title),
        this.__formation = document.createElement("p"),
        this.__formation.classList.add("ut-tactics-apply-preset-row-view--formation"),
        t.appendChild(this.__formation),
        this.__buildupStyle = document.createElement("p"),
        this.__buildupStyle.classList.add("ut-tactics-apply-preset-row-view--buildup"),
        t.appendChild(this.__buildupStyle),
        this.__defensiveStyle = document.createElement("p"),
        this.__defensiveStyle.classList.add("ut-tactics-apply-preset-row-view--defensive"),
        t.appendChild(this.__defensiveStyle),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsApplyPresetRowView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__item = null,
    this.__title = null,
    this.__formation = null,
    this.__buildupStyle = null,
    this.__defensiveStyle = null
}
,
UTTacticsApplyPresetRowView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsProfileMenuViewController = function(i) {
    function UTTacticsProfileMenuViewController() {
        var e = i.call(this) || this;
        return e.mentalitySelectViewController = null,
        e.menuDelegate = null,
        e.tacticsViewModel = null,
        e.popupView = null,
        e
    }
    return __extends(UTTacticsProfileMenuViewController, i),
    UTTacticsProfileMenuViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsProfileMenuViewController.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.mentalitySelectViewController && (this.mentalitySelectViewController.dealloc(),
        this.mentalitySelectViewController = null),
        this.menuDelegate && (this.menuDelegate = null),
        this.popupView && (this.popupView.removeTarget(this, this.onManageSettings, UTTacticsSelectSlotPopupView.Events.MANAGE_TACTICS_SLOTS),
        this.popupView = null)
    }
    ,
    UTTacticsProfileMenuViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsProfileMenuView
    }
    ,
    UTTacticsProfileMenuViewController.prototype.getNavigationTitle = function() {
        var e, t, i;
        return null !== (i = null === (t = null === (e = this.tacticsViewModel) || void 0 === e ? void 0 : e.getSquad()) || void 0 === t ? void 0 : t.getName()) && void 0 !== i ? i : ""
    }
    ,
    UTTacticsProfileMenuViewController.prototype.viewDidAppear = function() {
        if (i.prototype.viewDidAppear.call(this),
        this.tacticsViewModel) {
            var e = this.getView()
              , t = this.tacticsViewModel.getActiveMentality();
            t && (this.tacticsViewModel.setSelectedMentalityById(t.id),
            this.setDisplayedMentality(t),
            e.setSetActiveButtonInteractionState(!1)),
            e.addTarget(this, this.onSaveMentality, UTTacticsProfileMenuView.Event.SAVE_TACTICS),
            e.addTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_FORMATION),
            e.addTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_ROLEVARIATIONS),
            e.addTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_OFFENSIVE_STYLES),
            e.addTarget(this, this.onSelectButtonOption, UTTacticsProfileMenuView.Event.CHANGE_SLOT),
            e.addTarget(this, this.onSelectButtonOption, UTTacticsProfileMenuView.Event.SET_ACTIVE),
            e.addTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_DEFENSIVE_STYLES),
            e.addTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.APPLY_PRESET),
            this.tacticsViewModel.onDataUpdated.observe(this, this.onTacticsViewModelUpdated)
        }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        i.prototype.viewWillDisappear.call(this),
        e.removeTarget(this, this.onSaveMentality, UTTacticsProfileMenuView.Event.SAVE_TACTICS),
        e.removeTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_FORMATION),
        e.removeTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_ROLEVARIATIONS),
        e.removeTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_OFFENSIVE_STYLES),
        e.removeTarget(this, this.onSelectMenuOption, UTTacticsProfileMenuView.Event.SELECT_DEFENSIVE_STYLES),
        e.removeTarget(this, this.onSelectButtonOption, UTTacticsProfileMenuView.Event.CHANGE_SLOT),
        e.removeTarget(this, this.onSelectButtonOption, UTTacticsProfileMenuView.Event.SET_ACTIVE),
        e.removeTarget(this, this.onSelectButtonOption, UTTacticsProfileMenuView.Event.APPLY_PRESET),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.unobserve(this)
    }
    ,
    UTTacticsProfileMenuViewController.prototype.setMentalityMenuDelegate = function(e) {
        this.menuDelegate = e
    }
    ,
    UTTacticsProfileMenuViewController.prototype.setDisplayedMentality = function(e) {
        var t, i, o, n, r, s = this.getView();
        s.setActive(e.getState() === TacticState.ACTIVE),
        s.setSetActiveButtonInteractionState(e.getState() !== TacticState.ACTIVE),
        s.setMentalityName(e.name),
        s.setOffensiveStyleStyleById(e.getBuildUpPlayStyle()),
        s.setDefensiveStyleById(e.getDefensiveStyle()),
        s.setFormationName(null !== (i = null === (t = e.getFormation()) || void 0 === t ? void 0 : t.displayName) && void 0 !== i ? i : ""),
        s.setSaveButtonInteractionState(null !== (r = null === (n = null === (o = this.tacticsViewModel) || void 0 === o ? void 0 : o.getSquad()) || void 0 === n ? void 0 : n.hasModifiedTactics()) && void 0 !== r && r),
        s.setShareCode(e.getCode()),
        isPhone() || s.setRolesButtonAsSelected()
    }
    ,
    UTTacticsProfileMenuViewController.prototype.loadManageSettingsMenu = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load manage tactics settings."),
        this.tacticsViewModel)
            if (this.menuDelegate)
                this.menuDelegate.showSettingsMenu();
            else {
                var e = new UTTacticsManageSettingsViewController;
                e.initWithTacticsViewModel(this.tacticsViewModel);
                var t = this.getNavigationController();
                t && t.pushViewController(e)
            }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.loadOffensiveStyleMenu = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tactic styles."),
        this.tacticsViewModel)
            if (this.menuDelegate)
                this.menuDelegate.showOffensiveStyleMenu();
            else {
                var e = this.getNavigationController();
                if (e) {
                    var t = new UTTacticsOffensiveStyleSelectViewController;
                    t.initWithTacticsViewModel(this.tacticsViewModel),
                    e.pushViewController(t)
                }
            }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.loadInstructionsSelection = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tactic styles."),
        this.tacticsViewModel)
            if (this.menuDelegate)
                this.menuDelegate.showInstructionsSelection();
            else {
                var e = this.getNavigationController();
                if (e) {
                    var t = new UTTacticsRoleSlotSelectViewController;
                    t.initWithTacticsViewModel(this.tacticsViewModel),
                    e.pushViewController(t)
                }
            }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.loadFormationSelection = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tactic styles."),
        this.tacticsViewModel)
            if (this.menuDelegate)
                this.menuDelegate.showFormationSelection();
            else {
                var e = this.getNavigationController();
                if (e) {
                    var t = new UTTacticsFormationSelectViewController;
                    t.initWithTacticsViewModel(this.tacticsViewModel),
                    e.pushViewController(t)
                }
            }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.loadDefensiveStyleSelection = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tactic styles."),
        this.tacticsViewModel)
            if (this.menuDelegate)
                this.menuDelegate.showDefensiveStyleMenu();
            else {
                var e = this.getNavigationController();
                if (e) {
                    var t = new UTTacticsDefensiveStyleSelectViewController;
                    t.initWithTacticsViewModel(this.tacticsViewModel),
                    e.pushViewController(t)
                }
            }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.loadSlotSelectPopup = function() {
        var e = services.Localization;
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tactic styles."),
        this.tacticsViewModel) {
            var t = new UTTacticsSelectSlotPopupViewController;
            if (t.initWithTacticsViewModel(this.tacticsViewModel),
            this.popupView = t.getView(),
            t.modalDisplayDimensions.width = "24em",
            this.popupView.setTitle(e.localize("tactics.selectslot.popup.title")),
            this.popupView.renderTacticSlots(this.tacticsViewModel.getMentalities()),
            this.popupView.addTarget(this, this.onManageSettings, UTTacticsSelectSlotPopupView.Events.MANAGE_TACTICS_SLOTS),
            this.tacticsViewModel.getActiveMentality() === this.tacticsViewModel.getSelectedMentality())
                this.getView().setSetActiveButtonInteractionState(!1);
            gPopupClickShield.setActivePopup(t)
        }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.loadPresetSelection = function() {
        if (DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load tactic styles."),
        this.tacticsViewModel) {
            var e = new UTTacticsProfileSelectPopupViewController;
            e.initWithTacticsViewModel(this.tacticsViewModel),
            e.modalDisplayDimensions.width = "24em",
            e.setupPopup(),
            gPopupClickShield.setActivePopup(e)
        }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.onSaveMentality = function(e, t, i) {
        var o = this;
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to save mentality."),
        this.tacticsViewModel && this.tacticsViewModel.saveModifiedMentalities().observe(this, function(e, t) {
            e.unobserve(o),
            o.getView().setSaveButtonInteractionState(!t.success)
        })
    }
    ,
    UTTacticsProfileMenuViewController.prototype.onSelectMenuOption = function(e, t, i) {
        t === UTTacticsProfileMenuView.Event.SELECT_OFFENSIVE_STYLES ? this.loadOffensiveStyleMenu() : t === UTTacticsProfileMenuView.Event.SELECT_ROLEVARIATIONS ? this.loadInstructionsSelection() : t === UTTacticsProfileMenuView.Event.SELECT_FORMATION ? this.loadFormationSelection() : t === UTTacticsProfileMenuView.Event.APPLY_PRESET ? this.loadPresetSelection() : t === UTTacticsProfileMenuView.Event.SELECT_DEFENSIVE_STYLES && this.loadDefensiveStyleSelection()
    }
    ,
    UTTacticsProfileMenuViewController.prototype.onSelectButtonOption = function(e, t, i) {
        var o = this;
        if (this.tacticsViewModel) {
            var n = services.Localization;
            t === UTTacticsProfileMenuView.Event.SET_ACTIVE ? (this.setSelectedMentalityAsActive(),
            gClickShield.showShield(EAClickShieldView.Shield.LOADING),
            this.tacticsViewModel.saveModifiedMentalities().observe(this, function(e, t) {
                e.unobserve(o),
                t.success && (gClickShield.hideShield(EAClickShieldView.Shield.LOADING),
                services.Notification.queue([n.localize("notification.activeslot.changed"), UINotificationType.POSITIVE]))
            })) : t === UTTacticsProfileMenuView.Event.CHANGE_SLOT && this.loadSlotSelectPopup()
        }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.onManageSettings = function(e, t, i) {
        this.loadManageSettingsMenu()
    }
    ,
    UTTacticsProfileMenuViewController.prototype.setSelectedMentalityAsActive = function() {
        if (this.tacticsViewModel) {
            var e = this.tacticsViewModel.getSelectedMentality()
              , t = this.tacticsViewModel.getActiveMentality();
            t && t.setState(TacticState.INACTIVE),
            e && this.tacticsViewModel.setSlotAsActive(e.id)
        }
    }
    ,
    UTTacticsProfileMenuViewController.prototype.onTacticsViewModelUpdated = function(e, t) {
        var i;
        if (JSUtils.isObject(t) && null !== this.tacticsViewModel) {
            var o = this.getView();
            if (t.selectedMentality)
                return this.setDisplayedMentality(t.selectedMentality),
                void o.resetSelectedButtonState();
            var n = this.tacticsViewModel.getActiveMentality();
            if (n) {
                var r = n.id === (null === (i = this.tacticsViewModel.getSelectedMentality()) || void 0 === i ? void 0 : i.id);
                o.setSetActiveButtonInteractionState(!r),
                o.setActive(r)
            }
            if (t.selectedSlotPlayerVO && o.setSaveButtonInteractionState(!0),
            t.tactics && t.tactics.mentality) {
                var s = this.tacticsViewModel.getSquad()
                  , a = this.tacticsViewModel.getSelectedMentality()
                  , l = t.tactics.mentality
                  , c = l.getFormation();
                a && a.id === l.id && (s && o.setSaveButtonInteractionState(s.hasModifiedTactics()),
                o.setMentalityName(l.name),
                o.setShareCode(l.getCode()),
                o.setOffensiveStyleStyleById(l.getBuildUpPlayStyle()),
                o.setDefensiveStyleById(l.getDefensiveStyle()),
                c && o.setFormationName(c.displayName))
            }
        }
    }
    ,
    UTTacticsProfileMenuViewController
}(EAViewController)
  , UTRangeControl = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTRangeControl() {
        return i.call(this) || this
    }
    return __extends(UTRangeControl, i),
    UTRangeControl.prototype.init = function() {
        i.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTRangeControl.prototype.setInteractionState = function(e) {
        var t = this._interactionState;
        i.prototype.setInteractionState.call(this, e),
        this._interactionState !== t && this.toggleClass(enums.UIState.DISABLED, !this._interactionState)
    }
    ,
    UTRangeControl.prototype._startHandlingEvents = function(e) {
        i.prototype._startHandlingEvents.call(this, e),
        this.eventElement && (this._addListener(EventType.CHANGE, this.eventElement, this.handleChangeEvent.bind(this)),
        this._addListener(EventType.INPUT, this.eventElement, this.handleInputEvent.bind(this)))
    }
    ,
    UTRangeControl.prototype.setMin = function(e) {
        var t = this.getRootElement()
          , i = e.toString();
        i !== t.getAttribute("min") && t.setAttribute("min", i)
    }
    ,
    UTRangeControl.prototype.getMin = function() {
        return Number(this.getRootElement().getAttribute("min"))
    }
    ,
    UTRangeControl.prototype.setMax = function(e) {
        var t = this.getRootElement()
          , i = e.toString();
        i !== t.getAttribute("max") && t.setAttribute("max", i)
    }
    ,
    UTRangeControl.prototype.getMax = function() {
        return Number(this.getRootElement().getAttribute("max"))
    }
    ,
    UTRangeControl.prototype.setStep = function(e) {
        var t = this.getRootElement()
          , i = e.toString();
        i !== t.getAttribute("step") && t.setAttribute("step", i)
    }
    ,
    UTRangeControl.prototype.getStep = function() {
        return Number(this.getRootElement().getAttribute("step"))
    }
    ,
    UTRangeControl.prototype.setValue = function(e) {
        this.getRootElement().value = e.toString()
    }
    ,
    UTRangeControl.prototype.getValue = function() {
        return Number(this.getRootElement().value)
    }
    ,
    UTRangeControl.prototype._touchStarted = function(e) {
        i.prototype._touchStarted.call(this, e),
        this.addClass(enums.UIState.ACTIVE)
    }
    ,
    UTRangeControl.prototype._touchEnded = function(e) {
        i.prototype._touchEnded.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTRangeControl.prototype._touchCancelled = function(e) {
        i.prototype._touchCancelled.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTRangeControl.prototype._mouseLeave = function(e) {
        i.prototype._mouseLeave.call(this, e),
        this.removeClass(enums.UIState.ACTIVE)
    }
    ,
    UTRangeControl.prototype.handleChangeEvent = function(e) {
        this._triggerActions(EventType.CHANGE, {
            value: Number(this.getRootElement().value)
        })
    }
    ,
    UTRangeControl.prototype.handleInputEvent = function(e) {
        this._triggerActions(EventType.INPUT, {
            value: Number(this.getRootElement().value)
        })
    }
    ,
    UTRangeControl
}(UTControl));
UTRangeControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("input");
        e.setAttribute("type", "range"),
        e.classList.add("ut-range-control"),
        this.__root = e,
        this._generated = !0
    }
}
,
UTRangeControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTRangeControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsEditRangeControl = function(t) {
    function UTTacticsEditRangeControl() {
        return t.call(this) || this
    }
    return __extends(UTTacticsEditRangeControl, t),
    UTTacticsEditRangeControl.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0),
        this._range.init(),
        this._range.addTarget(this, this.handleRangeEvent, EventType.CHANGE),
        this._range.addTarget(this, this.handleRangeEvent, EventType.INPUT)
    }
    ,
    UTTacticsEditRangeControl.prototype.setInteractionState = function(e) {
        t.prototype.setInteractionState.call(this, e),
        this._range.setInteractionState(e)
    }
    ,
    UTTacticsEditRangeControl.prototype.setMin = function(e) {
        this._range.setMin(e)
    }
    ,
    UTTacticsEditRangeControl.prototype.setMax = function(e) {
        this._range.setMax(e)
    }
    ,
    UTTacticsEditRangeControl.prototype.setStep = function(e) {
        this._range.setStep(e)
    }
    ,
    UTTacticsEditRangeControl.prototype.setValue = function(e) {
        this._range.setValue(e),
        this.paintTrackProgress()
    }
    ,
    UTTacticsEditRangeControl.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    UTTacticsEditRangeControl.prototype.paintStepTicks = function() {
        var e = this._range.getMax() / this._range.getStep()
          , t = this._range.getRootElement().offsetWidth
          , i = 9 / t * 100
          , o = 11 / t * 100
          , n = (t - 20) / (e - 1) / t * 100;
        this.__pseudoTrackInner.style.backgroundImage = "repeating-linear-gradient(90deg, transparent, transparent " + i + "%, #30312f " + i + "%, #30312f " + o + "%, transparent " + o + "%, transparent " + n + "%)"
    }
    ,
    UTTacticsEditRangeControl.prototype.paintTrackProgress = function() {
        var e = this._range.getValue()
          , t = this._range.getStep()
          , i = this._range.getMax() / t
          , o = this._range.getRootElement().offsetWidth
          , n = (e - t) * ((o - 20) / (i - 1) / o * 100);
        if ("rtl" === getAppRoot().getAttribute("dir")) {
            var r = 100 - n;
            this.__pseudoTrack.style.backgroundImage = "linear-gradient(90deg, #30312f " + r + "%, #0b96ff " + r + "%)"
        } else
            this.__pseudoTrack.style.backgroundImage = "linear-gradient(90deg, #0b96ff " + n + "%, #30312f " + n + "%)"
    }
    ,
    UTTacticsEditRangeControl.prototype.handleRangeEvent = function(e, t, i) {
        this.isInteractionEnabled() && (t === EventType.INPUT && this.paintTrackProgress(),
        this._triggerActions(t, i))
    }
    ,
    UTTacticsEditRangeControl
}(EATargetActionView);
UTTacticsEditRangeControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-edit-range-control"),
        this.__label = document.createElement("div"),
        e.appendChild(this.__label),
        this.__pseudoTrack = document.createElement("div"),
        this.__pseudoTrack.classList.add("ut-tactics-edit-range-control--track"),
        this.__pseudoTrackInner = document.createElement("div"),
        this.__pseudoTrackInner.classList.add("inner"),
        this.__pseudoTrack.appendChild(this.__pseudoTrackInner),
        this._range = new UTRangeControl,
        this.__pseudoTrack.appendChild(this._range.getRootElement()),
        e.appendChild(this.__pseudoTrack),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsEditRangeControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__label = null,
    this.__pseudoTrack = null,
    this.__pseudoTrackInner = null,
    this._range.destroy()
}
,
UTTacticsEditRangeControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsStyleSelectCardView = function(t) {
    function UTTacticsStyleSelectCardView() {
        return t.call(this) || this
    }
    return __extends(UTTacticsStyleSelectCardView, t),
    UTTacticsStyleSelectCardView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTTacticsStyleSelectCardView.prototype.initWithFormation = function(e, t) {
        this.init();
        var i = services.Localization;
        this.setTitle(e.label);
        var o = t ? "offensive" : "defensive";
        this.setDescription(i.localize("tactics.description." + o + "." + e.id)),
        this.setIcon("icon_tactics_" + o + "_" + e.id)
    }
    ,
    UTTacticsStyleSelectCardView.prototype.toggleActive = function(e) {
        this.toggleClass("active", e)
    }
    ,
    UTTacticsStyleSelectCardView.prototype.setIcon = function(e) {
        this.__icon.classList.value = "",
        this.__icon.classList.add("ut-tactics-style-select-card-view--icon", e)
    }
    ,
    UTTacticsStyleSelectCardView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTTacticsStyleSelectCardView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTTacticsStyleSelectCardView.prototype._tapDetected = function(e) {
        t.prototype._tapDetected.call(this, e),
        this._triggerActions(EventType.TAP)
    }
    ,
    UTTacticsStyleSelectCardView
}(EATargetActionView);
UTTacticsStyleSelectCardView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-style-select-card-view"),
        this.__checkmark = document.createElement("div"),
        this.__checkmark.classList.add("ut-tactics-style-select-card-view--checkmark"),
        e.appendChild(this.__checkmark);
        var t = document.createElement("div");
        t.classList.add("ut-tactics-style-select-card-view--content");
        var i = document.createElement("div");
        i.classList.add("ut-tactics-style-select-card-view--header"),
        this.__icon = document.createElement("span"),
        this.__icon.classList.add("ut-tactics-style-select-card-view--icon"),
        i.appendChild(this.__icon),
        this.__title = document.createElement("p"),
        this.__title.classList.add("ut-tactics-style-select-card-view--title"),
        i.appendChild(this.__title),
        t.appendChild(i),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-tactics-style-select-card-view--description"),
        t.appendChild(this.__description),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsStyleSelectCardView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__checkmark = null,
    this.__icon = null,
    this.__title = null,
    this.__description = null
}
,
UTTacticsStyleSelectCardView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsDefensiveStyleSelectView = function(i) {
    function UTTacticsDefensiveStyleSelectView() {
        var e = i.call(this) || this;
        return e.styleCards = [],
        e
    }
    return __extends(UTTacticsDefensiveStyleSelectView, i),
    UTTacticsDefensiveStyleSelectView.prototype.init = function() {
        var e = services.Localization;
        i.prototype.init.call(this),
        this.setInteractionState(!0),
        this.__title.textContent = e.localize("tactics.label.defensive"),
        this._btnSave.init(),
        this._btnSave.setText(e.localize("tactics.label.save")),
        this._styleRange.init(),
        this._styleRange.addTarget(this, this.onRangeControlChange, EventType.INPUT),
        isPhone() ? this._btnSave.addTarget(this, this.onButtonSelected, EventType.TAP) : this._btnSave.setDisplay(!1),
        this.setDescription(e.localize("tactics.defensiveApproach.description"))
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.dealloc = function() {
        this.clearStyleCards(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setStyleRange = function(e, t, i, o) {
        this.setValueLabel(o),
        this._styleRange.setLabel(services.Localization.localize("tactics.label.lineHeight")),
        this._styleRange.setMin(e),
        this._styleRange.setMax(t),
        this._styleRange.setStep(i),
        this._styleRange.setValue(o)
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setStyleRangeValue = function(e) {
        var t;
        null === (t = this._styleRange) || void 0 === t || t.setValue(e)
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setInteractionState = function(t) {
        i.prototype.setInteractionState.call(this, t),
        this.styleCards.forEach(function(e) {
            return e.setInteractionState(t)
        })
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setActiveCard = function(i) {
        this.styleCards.forEach(function(e, t) {
            e.toggleActive(t === i)
        })
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.clearStyleCards = function() {
        var t = this;
        this.styleCards.forEach(function(e) {
            e.removeTarget(t, t.onCardSelected, EventType.TAP),
            e.dealloc()
        }),
        this.styleCards = []
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setDefensiveOptions = function(e) {
        var i = this;
        this.clearStyleCards(),
        e.forEach(function(e) {
            var t = new UTTacticsStyleSelectCardView;
            t.initWithFormation(e, !1),
            i.styleCards.push(t),
            i.addSubview(t, i.__styleCardContainer),
            t.addTarget(i, i.onCardSelected, EventType.TAP)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setValueLabel = function(e) {
        this.__valueLabel.textContent = e.toString()
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.setSaveButtonInteractionState = function(e) {
        this._btnSave.setInteractionState(e)
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.onCardSelected = function(e, t, i) {
        if (this.isInteractionEnabled()) {
            var o = this.styleCards.indexOf(e);
            this.setActiveCard(o),
            this._triggerActions(UTTacticsDefensiveStyleSelectView.Event.STYLE_CHANGE, {
                id: o
            })
        }
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.onRangeControlChange = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTTacticsDefensiveStyleSelectView.Event.RANGE_CHANGED, {
            defLineWidth: i.value
        })
    }
    ,
    UTTacticsDefensiveStyleSelectView.prototype.onButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && e === this._btnSave && this._triggerActions(UTTacticsDefensiveStyleSelectView.Event.SAVE_TACTICS)
    }
    ,
    UTTacticsDefensiveStyleSelectView.Event = Object.freeze({
        STYLE_CHANGE: "UTTacticsfensiveStyleSelectView.Event.STYLE_CHANGE",
        RANGE_CHANGED: "UTTacticsDefensiveStyleSelectView.Event.RANGE_CHANGED",
        SAVE_TACTICS: "UTTacticsDefensiveStyleSelectView.Event.SAVE_TACTICS"
    }),
    UTTacticsDefensiveStyleSelectView
}(EATargetActionView);
UTTacticsDefensiveStyleSelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-defensive-style-select-view"),
        this.__header = document.createElement("header"),
        this.__header.classList.add("ut-tactics-defensive-style-select-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-defensive-style-select-view--title"),
        this.__header.appendChild(this.__title),
        this._btnSave = new UTStandardButtonControl,
        this._btnSave.getRootElement().classList.add("mini"),
        this._btnSave.getRootElement().classList.add("call-to-action"),
        this.__header.appendChild(this._btnSave.getRootElement()),
        e.appendChild(this.__header),
        this.__contentContainer = document.createElement("div"),
        this.__contentContainer.classList.add("ut-tactics-defensive-style-select-view--container"),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-tactics-defensive-style-select-view--description"),
        this.__contentContainer.appendChild(this.__description);
        var t = document.createElement("div");
        t.classList.add("ut-tactics-defensive-style-select-view--pitch-controls"),
        this._styleRange = new UTTacticsEditRangeControl,
        t.appendChild(this._styleRange.getRootElement()),
        this.__valueLabel = document.createElement("div"),
        this.__valueLabel.classList.add("ut-tactics-defensive-style-select-view--label"),
        t.appendChild(this.__valueLabel),
        this.__contentContainer.appendChild(t),
        this.__styleCardContainer = document.createElement("div"),
        this.__styleCardContainer.classList.add("ut-tactics-defensive-style-select-view--card-container"),
        this.__contentContainer.appendChild(this.__styleCardContainer),
        e.appendChild(this.__contentContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsDefensiveStyleSelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__title = null,
    this._btnSave.destroy(),
    this.__contentContainer = null,
    this.__description = null,
    this._styleRange.destroy(),
    this.__valueLabel = null,
    this.__styleCardContainer = null
}
,
UTTacticsDefensiveStyleSelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsDefensiveStyleSelectViewController = function(s) {
    function UTTacticsDefensiveStyleSelectViewController() {
        var e = s.call(this) || this;
        return e.skipNextRangeUpdate = !1,
        e.tacticsViewModel = null,
        e.currentStyle = 0,
        e
    }
    return __extends(UTTacticsDefensiveStyleSelectViewController, s),
    UTTacticsDefensiveStyleSelectViewController.prototype.initWithTacticsViewModel = function(e) {
        var t;
        if (!this.initialized) {
            this.tacticsViewModel = e;
            var i = this.tacticsViewModel.getSelectedMentality();
            this.currentStyle = null !== (t = null == i ? void 0 : i.getDefensiveStyle()) && void 0 !== t ? t : 0,
            this.init()
        }
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        s.prototype.dealloc.call(this)
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsDefensiveStyleSelectView
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.getNavigationTitle = function() {
        if (this.tacticsViewModel) {
            var e = this.tacticsViewModel.getSquad();
            if (e && isPhone())
                return e.getName()
        }
        return services.Localization.localize("tactics.label.defensive")
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.viewDidAppear = function() {
        s.prototype.viewDidAppear.call(this);
        var e = this.getView()
          , t = this.getNavigationController();
        if (t && (t.setNavigationVisibility(!0, !1),
        isPhone() || t.setNavigationStyle(UTNavigationBarView.Style.SECONDARY)),
        this.tacticsViewModel) {
            var i = this.tacticsViewModel.getSquad()
              , o = this.tacticsViewModel.getSelectedMentality();
            if (i && o) {
                var n = o.getDefensiveLineHeight()
                  , r = o.getDefensiveStyle();
                e.setSaveButtonInteractionState(i.hasModifiedTactics()),
                e.setDefensiveOptions(factories.DataProvider.getTacticDefensiveStyleDP()),
                e.setActiveCard(r),
                e.setStyleRange(UTSquadTacticsEntity.MIN_DEFENSIVE_LINE_HEIGHT, UTSquadTacticsEntity.MAX_DEFENSIVE_LINE_HEIGHT, 1, n)
            }
            this.tacticsViewModel.onDataUpdated.observe(this, this.onTacticsViewModelUpdated)
        }
        e.addTarget(this, this.onSaveMentality, UTTacticsDefensiveStyleSelectView.Event.SAVE_TACTICS),
        e.addTarget(this, this.onSelectDefensiveStyle, UTTacticsDefensiveStyleSelectView.Event.STYLE_CHANGE),
        e.addTarget(this, this.onLineHeightChanged, UTTacticsDefensiveStyleSelectView.Event.RANGE_CHANGED)
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.viewWillDisappear = function() {
        s.prototype.viewWillDisappear.call(this),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.unobserve(this);
        var e = this.getView();
        e.removeTarget(this, this.onSaveMentality, UTTacticsDefensiveStyleSelectView.Event.SAVE_TACTICS),
        e.removeTarget(this, this.onSelectDefensiveStyle, UTTacticsDefensiveStyleSelectView.Event.STYLE_CHANGE),
        e.removeTarget(this, this.onLineHeightChanged, UTTacticsDefensiveStyleSelectView.Event.RANGE_CHANGED)
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.onSaveMentality = function(i, e, t) {
        var o = this;
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to save mentality."),
        this.tacticsViewModel && this.tacticsViewModel.saveModifiedMentalities().observe(this, function(e, t) {
            e.unobserve(o),
            i.setSaveButtonInteractionState(!t.success)
        })
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.onLineHeightChanged = function(e, t, i) {
        if (this.tacticsViewModel) {
            var o = this.tacticsViewModel.getSelectedMentality()
              , n = this.getView()
              , r = UTSquadTacticsEntity.getDefensiveStyleFromLineHeight(i.defLineWidth);
            null == o || o.setDefensiveLineHeight(i.defLineWidth),
            null == o || o.setDefensiveStyle(r),
            this.skipNextRangeUpdate = r != this.currentStyle,
            this.currentStyle = r,
            n.setActiveCard(r),
            n.setValueLabel(i.defLineWidth)
        } else
            DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load defensive styles.")
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.onSelectDefensiveStyle = function(e, t, i) {
        if (this.tacticsViewModel) {
            this.currentStyle = i.id;
            var o = this.getView()
              , n = this.tacticsViewModel.getSelectedMentality()
              , r = DefensiveLineHeightBreakpoint.DEEP_START;
            i.id === SquadTacticDefensiveStyle.DEEP ? r = DefensiveLineHeightBreakpoint.DEEP_DEFAULT : i.id === SquadTacticDefensiveStyle.BALANCED ? r = DefensiveLineHeightBreakpoint.BALANCED_DEFAULT : i.id === SquadTacticDefensiveStyle.HIGH ? r = DefensiveLineHeightBreakpoint.HIGH_DEFAULT : i.id === SquadTacticDefensiveStyle.AGGRESSIVE && (r = DefensiveLineHeightBreakpoint.AGGRESSIVE_DEFAULT),
            o.setValueLabel(r),
            this.skipNextRangeUpdate ? this.skipNextRangeUpdate = !1 : (o.setStyleRangeValue(r),
            null == n || n.setDefensiveLineHeight(r)),
            null == n || n.setDefensiveStyle(i.id)
        } else
            DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load defensive styles.")
    }
    ,
    UTTacticsDefensiveStyleSelectViewController.prototype.onTacticsViewModelUpdated = function(e, t) {
        var i, o;
        if (JSUtils.isObject(t) && t.tactics) {
            var n = this.getView()
              , r = null === (i = this.tacticsViewModel) || void 0 === i ? void 0 : i.getSquad();
            n.setSaveButtonInteractionState(null !== (o = null == r ? void 0 : r.hasModifiedTactics()) && void 0 !== o && o)
        }
    }
    ,
    UTTacticsDefensiveStyleSelectViewController
}(EAViewController)
  , UTTacticsOffensiveStyleSelectView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTTacticsOffensiveStyleSelectView() {
        var e = i.call(this) || this;
        return e.styleCards = [],
        e
    }
    return __extends(UTTacticsOffensiveStyleSelectView, i),
    UTTacticsOffensiveStyleSelectView.prototype.init = function() {
        var e = services.Localization;
        i.prototype.init.call(this),
        this.setInteractionState(!0),
        this.__title.textContent = e.localize("tactics.label.offensive"),
        this._btnSave.init(),
        this._btnSave.setText(e.localize("tactics.label.save")),
        isPhone() ? this._btnSave.addTarget(this, this.onButtonSelected, EventType.TAP) : this._btnSave.setDisplay(!1),
        this.setDescription(e.localize("tactics.buildUpStyle.description"))
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.dealloc = function() {
        this.clearStyleCards(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.setInteractionState = function(t) {
        i.prototype.setInteractionState.call(this, t),
        this.styleCards.forEach(function(e) {
            return e.setInteractionState(t)
        })
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.setActiveCard = function(i) {
        this.styleCards.forEach(function(e, t) {
            e.toggleActive(t === i)
        })
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.clearStyleCards = function() {
        var t = this;
        this.styleCards.forEach(function(e) {
            e.removeTarget(t, t.onCardSelected, EventType.TAP),
            e.dealloc()
        }),
        this.styleCards = []
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.setOffensiveOptions = function(e) {
        var i = this;
        this.clearStyleCards();
        services.Localization;
        e.forEach(function(e) {
            var t = new UTTacticsStyleSelectCardView;
            t.initWithFormation(e, !0),
            i.styleCards.push(t),
            i.addSubview(t, i.__styleCardContainer),
            t.addTarget(i, i.onCardSelected, EventType.TAP)
        }),
        this.layoutSubviews()
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.setSaveButtonInteractionState = function(e) {
        this._btnSave.setInteractionState(e)
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.onCardSelected = function(e, t, i) {
        if (this.isInteractionEnabled()) {
            var o = this.styleCards.indexOf(e);
            this.setActiveCard(o),
            this._triggerActions(UTTacticsOffensiveStyleSelectView.Event.STYLE_CHANGE, {
                id: o
            })
        }
    }
    ,
    UTTacticsOffensiveStyleSelectView.prototype.onButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && e === this._btnSave && this._triggerActions(UTTacticsOffensiveStyleSelectView.Event.SAVE_TACTICS)
    }
    ,
    UTTacticsOffensiveStyleSelectView.Event = Object.freeze({
        STYLE_CHANGE: "UTTacticsOffensiveStyleSelectView.Event.STYLE_CHANGE",
        SAVE_TACTICS: "UTTacticsOffensiveStyleSelectView.Event.SAVE_TACTICS"
    }),
    UTTacticsOffensiveStyleSelectView
}(EATargetActionView));
UTTacticsOffensiveStyleSelectView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tactics-offensive-style-select-view"),
        this.__header = document.createElement("header"),
        this.__header.classList.add("ut-tactics-offensive-style-select-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tactics-offensive-style-select-view--title"),
        this.__header.appendChild(this.__title),
        this._btnSave = new UTStandardButtonControl,
        this._btnSave.getRootElement().classList.add("mini"),
        this._btnSave.getRootElement().classList.add("call-to-action"),
        this.__header.appendChild(this._btnSave.getRootElement()),
        e.appendChild(this.__header);
        var t = document.createElement("div");
        t.classList.add("ut-tactics-offensive-style-select-view--container"),
        this.__description = document.createElement("p"),
        this.__description.classList.add("ut-tactics-offensive-style-select-view--description"),
        t.appendChild(this.__description),
        this.__styleCardContainer = document.createElement("div"),
        this.__styleCardContainer.classList.add("ut-tactics-offensive-style-select-view--card-container"),
        t.appendChild(this.__styleCardContainer),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTacticsOffensiveStyleSelectView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__title = null,
    this._btnSave.destroy(),
    this.__description = null,
    this.__styleCardContainer = null
}
,
UTTacticsOffensiveStyleSelectView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTacticsOffensiveStyleSelectViewController = function(r) {
    function UTTacticsOffensiveStyleSelectViewController() {
        var e = r.call(this) || this;
        return e.tacticsViewModel = null,
        e
    }
    return __extends(UTTacticsOffensiveStyleSelectViewController, r),
    UTTacticsOffensiveStyleSelectViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype.dealloc = function() {
        this.tacticsViewModel = null,
        r.prototype.dealloc.call(this)
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype._getViewInstanceFromData = function() {
        return new UTTacticsOffensiveStyleSelectView
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype.getNavigationTitle = function() {
        if (this.tacticsViewModel) {
            var e = this.tacticsViewModel.getSquad();
            if (e && isPhone())
                return e.getName()
        }
        return services.Localization.localize("tactics.label.offensive")
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype.viewDidAppear = function() {
        r.prototype.viewDidAppear.call(this);
        var e = this.getView()
          , t = this.getNavigationController();
        if (t && (t.setNavigationVisibility(!0, !1),
        isPhone() || t.setNavigationStyle(UTNavigationBarView.Style.SECONDARY)),
        this.tacticsViewModel) {
            services.Localization;
            var i = this.tacticsViewModel.getSquad()
              , o = this.tacticsViewModel.getSelectedMentality();
            if (i && o) {
                var n = o.getBuildUpPlayStyle();
                e.setSaveButtonInteractionState(i.hasModifiedTactics()),
                e.setOffensiveOptions(factories.DataProvider.getTacticBuildUpStyleDP()),
                e.setActiveCard(n)
            }
            this.tacticsViewModel.onDataUpdated.observe(this, this.onTacticsViewModelUpdated)
        }
        e.addTarget(this, this.onSaveMentality, UTTacticsOffensiveStyleSelectView.Event.SAVE_TACTICS),
        e.addTarget(this, this.onSelectOffensiveStyle, UTTacticsOffensiveStyleSelectView.Event.STYLE_CHANGE)
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype.viewWillDisappear = function() {
        r.prototype.viewWillDisappear.call(this),
        this.tacticsViewModel && this.tacticsViewModel.onDataUpdated.unobserve(this);
        var e = this.getView();
        e.removeTarget(this, this.onSaveMentality, UTTacticsOffensiveStyleSelectView.Event.SAVE_TACTICS),
        e.removeTarget(this, this.onSelectOffensiveStyle, UTTacticsOffensiveStyleSelectView.Event.STYLE_CHANGE)
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype.onSaveMentality = function(i, e, t) {
        var o = this;
        DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to save mentality."),
        this.tacticsViewModel && this.tacticsViewModel.saveModifiedMentalities().observe(this, function(e, t) {
            e.unobserve(o),
            i.setSaveButtonInteractionState(!t.success)
        })
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype.onSelectOffensiveStyle = function(e, t, i) {
        if (this.tacticsViewModel) {
            services.Localization,
            this.getView();
            var o = this.tacticsViewModel.getSelectedMentality();
            null == o || o.setBuildUpPlayStyle(i.id)
        } else
            DebugUtils.Assert(JSUtils.isValid(this.tacticsViewModel), "Missing tactics view model. Unable to load offensive styles.")
    }
    ,
    UTTacticsOffensiveStyleSelectViewController.prototype.onTacticsViewModelUpdated = function(e, t) {
        var i, o;
        if (JSUtils.isObject(t) && t.tactics) {
            var n = this.getView()
              , r = null === (i = this.tacticsViewModel) || void 0 === i ? void 0 : i.getSquad();
            n.setSaveButtonInteractionState(null !== (o = null == r ? void 0 : r.hasModifiedTactics()) && void 0 !== o && o)
        }
    }
    ,
    UTTacticsOffensiveStyleSelectViewController
}(EAViewController)
  , UTTacticsSplitViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTacticsSplitViewController() {
        var e = t.call(this) || this;
        return e.formationNavigationController = null,
        e.instructionsNavigationController = null,
        e.tacticsMenuController = new UTTacticsProfileMenuViewController,
        e.profileMenuController = new UTTacticsMentalitySelectViewController,
        e.tacticalRoleSelectViewController = new UTTacticsRoleSlotSelectViewController,
        e.tacticsViewModel = null,
        e.defensiveStyleSelectController = new UTTacticsDefensiveStyleSelectViewController,
        e.offensiveStyleSelectController = new UTTacticsOffensiveStyleSelectViewController,
        e
    }
    return __extends(UTTacticsSplitViewController, t),
    UTTacticsSplitViewController.prototype.init = function() {
        this.initialized || (this.setLayout(UTSplitViewController.Layout.SIDEBAR_LEFT),
        t.prototype.init.call(this),
        this.tacticsViewModel ? (this.tacticsMenuController.initWithTacticsViewModel(this.tacticsViewModel),
        this.tacticalRoleSelectViewController.initWithTacticsViewModel(this.tacticsViewModel),
        this.defensiveStyleSelectController.initWithTacticsViewModel(this.tacticsViewModel),
        this.offensiveStyleSelectController.initWithTacticsViewModel(this.tacticsViewModel)) : (this.tacticsMenuController.init(),
        this.profileMenuController.init(),
        this.defensiveStyleSelectController.init(),
        this.offensiveStyleSelectController.init(),
        this.tacticalRoleSelectViewController.init()),
        this.tacticsMenuController.setMentalityMenuDelegate(this))
    }
    ,
    UTTacticsSplitViewController.prototype.initWithTacticsViewModel = function(e) {
        this.initialized || (this.tacticsViewModel = e,
        this.init())
    }
    ,
    UTTacticsSplitViewController.prototype.dealloc = function() {
        this.tacticsMenuController.dealloc(),
        this.tacticalRoleSelectViewController.dealloc(),
        this.profileMenuController.dealloc(),
        this.instructionsNavigationController && (this.instructionsNavigationController.dealloc(),
        this.instructionsNavigationController = null),
        this.formationNavigationController && (this.formationNavigationController.dealloc(),
        this.formationNavigationController = null),
        this.offensiveStyleSelectController.dealloc(),
        this.defensiveStyleSelectController.dealloc(),
        this.tacticsViewModel = null,
        t.prototype.dealloc.call(this)
    }
    ,
    UTTacticsSplitViewController.prototype.getNavigationTitle = function() {
        return this.tacticsMenuController.getNavigationTitle()
    }
    ,
    UTTacticsSplitViewController.prototype.viewDidAppear = function() {
        var e;
        t.prototype.viewDidAppear.call(this),
        this.setLeftController(this.tacticsMenuController),
        this.showInstructionsSelection(),
        null === (e = this.tacticsViewModel) || void 0 === e || e.onDataUpdated.observe(this, this._eTacticsViewModelUpdated)
    }
    ,
    UTTacticsSplitViewController.prototype.viewWillDisappear = function() {
        var e;
        t.prototype.viewWillDisappear.call(this),
        null === (e = this.tacticsViewModel) || void 0 === e || e.onDataUpdated.unobserve(this)
    }
    ,
    UTTacticsSplitViewController.prototype.showProfileMenu = function() {
        this.setRightController(this.profileMenuController)
    }
    ,
    UTTacticsSplitViewController.prototype.showInstructionsSelection = function() {
        if (!this.instructionsNavigationController) {
            var e = new UTTacticsRoleSlotSelectViewController;
            this.tacticsViewModel ? e.initWithTacticsViewModel(this.tacticsViewModel) : e.init(),
            this.instructionsNavigationController = new UTNavigationController,
            this.instructionsNavigationController.initWithRootController(e)
        }
        this.setRightController(this.instructionsNavigationController),
        this.instructionsNavigationController.popToRootViewController()
    }
    ,
    UTTacticsSplitViewController.prototype.showSettingsMenu = function() {
        var e = new UTTacticsManageSettingsViewController
          , t = this.getNavigationController();
        t && this.tacticsViewModel && (e.initWithTacticsViewModel(this.tacticsViewModel),
        t.pushViewController(e))
    }
    ,
    UTTacticsSplitViewController.prototype.showFormationSelection = function() {
        if (!this.formationNavigationController) {
            var e = new UTTacticsFormationSelectViewController;
            this.tacticsViewModel ? e.initWithTacticsViewModel(this.tacticsViewModel) : e.init(),
            this.formationNavigationController = new UTNavigationController,
            this.formationNavigationController.initWithRootController(e)
        }
        this.setRightController(this.formationNavigationController),
        this.formationNavigationController.popToRootViewController()
    }
    ,
    UTTacticsSplitViewController.prototype.showDefensiveStyleMenu = function() {
        this.setRightController(this.defensiveStyleSelectController)
    }
    ,
    UTTacticsSplitViewController.prototype.showOffensiveStyleMenu = function() {
        this.setRightController(this.offensiveStyleSelectController)
    }
    ,
    UTTacticsSplitViewController.prototype._eTacticsViewModelUpdated = function(e, t) {
        JSUtils.isObject(t) && t.selectedMentality && this.showInstructionsSelection()
    }
    ,
    UTTacticsSplitViewController
}(UTSplitViewController))
  , UTRenamePopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTRenamePopupView() {
        return t.call(this) || this
    }
    return __extends(UTRenamePopupView, t),
    UTRenamePopupView.prototype.init = function() {
        var e = services.Localization;
        t.prototype.init.call(this),
        this._cancelBtn.init(),
        this._cancelBtn.setText(e.localize("common.dialog.cancel")),
        this._cancelBtn.setInteractionState(!0),
        this._confirmBtn.init(),
        this._confirmBtn.setInteractionState(!1),
        this._confirmBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._cancelBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._nameInput.init(),
        this._nameInput.addTarget(this, this.onInput, EventType.INPUT),
        this._nameInput.setMaxLength(15)
    }
    ,
    UTRenamePopupView.prototype.focus = function() {
        this._nameInput.focus()
    }
    ,
    UTRenamePopupView.prototype.dealloc = function() {
        this._confirmBtn.removeTarget(this, this.onButtonSelected, EventType.TAP),
        this._cancelBtn.removeTarget(this, this.onButtonSelected, EventType.TAP),
        t.prototype.dealloc.call(this)
    }
    ,
    UTRenamePopupView.prototype.setTitle = function(e) {
        this.__titleText.textContent = e
    }
    ,
    UTRenamePopupView.prototype.setConfirmButtonLabel = function(e) {
        this._confirmBtn.setText(e)
    }
    ,
    UTRenamePopupView.prototype.setHintText = function(e) {
        this.__hint.textContent = e
    }
    ,
    UTRenamePopupView.prototype.setDisclaimerText = function(e) {
        this.__disclaimer.innerHTML = e
    }
    ,
    UTRenamePopupView.prototype.render = function(e, t) {
        this.setTitle(e),
        this.setConfirmButtonLabel(t)
    }
    ,
    UTRenamePopupView.prototype.getInputValue = function() {
        return this._nameInput.value
    }
    ,
    UTRenamePopupView.prototype.setInputValue = function(e) {
        this._nameInput.value = e
    }
    ,
    UTRenamePopupView.prototype.setConfirmButtonEnabled = function(e) {
        this._confirmBtn.setInteractionState(e)
    }
    ,
    UTRenamePopupView.prototype.onButtonSelected = function(e, t, i) {
        e === this._confirmBtn ? this._triggerActions(UTRenamePopupView.Event.CONFIRM, {
            name: this._nameInput.value
        }) : e === this._cancelBtn && this._triggerActions(UTRenamePopupView.Event.CANCEL)
    }
    ,
    UTRenamePopupView.prototype.onInput = function(e, t, i) {
        this._triggerActions(UTRenamePopupView.Event.CHANGE, {
            name: i.value
        })
    }
    ,
    UTRenamePopupView.Event = Object.freeze({
        CANCEL: "UTRenamePopupView.CANCEL",
        CHANGE: "UTRenamePopupView.CHANGE",
        CONFIRM: "UTRenamePopupView.CONFIRM"
    }),
    UTRenamePopupView
}(EATargetActionView));
UTRenamePopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-rename-popup-view");
        var t = document.createElement("header");
        this.__titleText = document.createElement("h1"),
        t.appendChild(this.__titleText),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("bodySection"),
        this._nameInput = new UTTextInputControl,
        this._nameInput.getRootElement().classList.add("round"),
        i.appendChild(this._nameInput.getRootElement()),
        this.__hint = document.createElement("span"),
        this.__hint.classList.add("ut-rename-popup-view--hint"),
        i.appendChild(this.__hint),
        this.__disclaimer = document.createElement("span"),
        this.__disclaimer.classList.add("ut-rename-popup-view--disclaimer"),
        i.appendChild(this.__disclaimer),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-st-button-group"),
        this._confirmBtn = new UTStandardButtonControl,
        this._confirmBtn.getRootElement().classList.add("call-to-action"),
        o.appendChild(this._confirmBtn.getRootElement()),
        this._cancelBtn = new UTStandardButtonControl,
        this._cancelBtn.getRootElement().classList.add("negative"),
        o.appendChild(this._cancelBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTRenamePopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleText = null,
    this._nameInput.destroy(),
    this.__hint = null,
    this.__disclaimer = null,
    this._confirmBtn.destroy(),
    this._cancelBtn.destroy()
}
,
UTRenamePopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTRenamePopupViewController = function(s) {
    function UTRenamePopupViewController(e) {
        var t, i, o, n = this, r = services.Localization;
        return (n = s.call(this) || this).buttonLabel = null !== (t = null == e ? void 0 : e.buttonLabel) && void 0 !== t ? t : r.localize("infopanel.button.create"),
        n.defaultName = null !== (i = null == e ? void 0 : e.defaultName) && void 0 !== i ? i : "",
        n.onConfirm = new EAObservable,
        n.title = null !== (o = null == e ? void 0 : e.title) && void 0 !== o ? o : r.localize("manage.squadlist.createsquad"),
        n
    }
    return __extends(UTRenamePopupViewController, s),
    UTRenamePopupViewController.prototype.init = function() {
        s.prototype.init.call(this),
        this.onConfirm.init()
    }
    ,
    UTRenamePopupViewController.prototype.dealloc = function() {
        this.onConfirm.dealloc(),
        s.prototype.dealloc.call(this)
    }
    ,
    UTRenamePopupViewController.prototype.viewDidAppear = function() {
        var e = this.getView();
        s.prototype.viewDidAppear.call(this),
        this.updateConfirmButtonState(this.defaultName),
        e.setTitle(this.title),
        e.setConfirmButtonLabel(this.buttonLabel),
        e.setInputValue(this.defaultName),
        e.setHintText(services.Localization.localize("renamesquad.hint", ["15"])),
        e.setDisclaimerText(services.Localization.localize("renamesquad.disclaimer")),
        e.addTarget(this, this.handleCancel, UTRenamePopupView.Event.CANCEL),
        e.addTarget(this, this.handleInput, UTRenamePopupView.Event.CHANGE),
        e.addTarget(this, this.handleConfirm, UTRenamePopupView.Event.CONFIRM),
        this.decorateLinks(e.getRootElement())
    }
    ,
    UTRenamePopupViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        s.prototype.viewWillDisappear.call(this),
        e.removeTarget(this, this.handleCancel, UTRenamePopupView.Event.CANCEL),
        e.removeTarget(this, this.handleInput, UTRenamePopupView.Event.CHANGE),
        e.removeTarget(this, this.handleConfirm, UTRenamePopupView.Event.CONFIRM),
        this.stripLinks(e.getRootElement())
    }
    ,
    UTRenamePopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTRenamePopupView
    }
    ,
    UTRenamePopupViewController.prototype.confirmName = function(e) {
        var t = this.getView()
          , i = TextUtils.cleanString(e);
        i.length < 3 || (t.setInteractionState(!1),
        this.onConfirm.notify(i),
        this.onExit.notify(enums.UIDialogOptions.OK))
    }
    ,
    UTRenamePopupViewController.prototype.updateConfirmButtonState = function(e) {
        var t = this.getView()
          , i = TextUtils.restrictSpecialCharacters(e);
        i !== e && t.setInputValue(i),
        t.setConfirmButtonEnabled(TextUtils.isValidNameSquad(i))
    }
    ,
    UTRenamePopupViewController.prototype.handleCancel = function(e, t, i) {
        this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTRenamePopupViewController.prototype.handleConfirm = function(e, t, i) {
        this.confirmName(i.name)
    }
    ,
    UTRenamePopupViewController.prototype.handleInput = function(e, t, i) {
        this.updateConfirmButtonState(i.name)
    }
    ,
    UTRenamePopupViewController.prototype.handleKeyUpEvent = function(e) {
        if (e.key === KeyboardKey.ESCAPE || e.key === KeyboardKey.MS_ESCAPE)
            this.onExit.notify(enums.UIDialogOptions.CANCEL);
        else if (e.key === KeyboardKey.ENTER) {
            var t = this.getView();
            this.confirmName(t.getInputValue())
        }
    }
    ,
    UTRenamePopupViewController
}(BasePopupViewController)
  , UTRenameSquadPopupViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTRenameSquadPopupViewController() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTRenameSquadPopupViewController, e),
    UTRenameSquadPopupViewController.prototype.confirmName = function(e) {
        var r = this
          , s = this.getView()
          , a = TextUtils.cleanString(e);
        a.length < 3 || (s.setInteractionState(!1),
        services.Squad.requestSquadList().observe(this, function(e, t) {
            var i, o, n = null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.squads) && void 0 !== o ? o : [];
            e.unobserve(r),
            TextUtils.squadNameExists(a, n) ? (isWeb() && r.onExit.notify(enums.UIDialogOptions.CANCEL),
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.DUPLICATE_SQUAD_NAME),
            s.setInteractionState(!0)) : (r.onConfirm.notify(a),
            r.onExit.notify(enums.UIDialogOptions.OK))
        }))
    }
    ,
    UTRenameSquadPopupViewController
}(UTRenamePopupViewController))
  , UTSquadViewModel = function() {
    function UTSquadViewModel(e) {
        this.squad = e,
        this.sections = new EAHashTable,
        this.iterator = new EAIterator(e.getPlayers().concat(e.getManager())),
        this._initSections()
    }
    return UTSquadViewModel.prototype._initSections = function() {
        this.setSection(UTSquadViewModel.SECTION.PITCH, function(e) {
            return e.index < UTSquadEntity.FIELD_PLAYERS
        }, 0),
        this.setSection(UTSquadViewModel.SECTION.SUBS, function(e) {
            return e.index >= UTSquadEntity.FIELD_PLAYERS && e.index < UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS
        }, 1),
        this.setSection(UTSquadViewModel.SECTION.RESERVES, function(e) {
            return e.index >= UTSquadEntity.FIELD_PLAYERS + UTSquadEntity.SUB_PLAYERS && e.index < UTSquadEntity.MANAGER_SLOT_INDEX
        }, 2),
        this.setSection(UTSquadViewModel.SECTION.MANAGER, function(e) {
            return e.index === UTSquadEntity.MANAGER_SLOT_INDEX
        }, 3)
    }
    ,
    UTSquadViewModel.prototype.setSection = function(e, t, i) {
        this.sections.set(e, {
            filter: t,
            priority: i
        })
    }
    ,
    UTSquadViewModel.prototype.getItemList = function() {
        return this.iterator.values().slice().sort(function(e, t) {
            return JSUtils.sortCompare(e.index, t.index)
        }).map(function(e) {
            return e.item
        })
    }
    ,
    UTSquadViewModel.prototype.values = function() {
        return this.iterator.values()
    }
    ,
    UTSquadViewModel.SECTION = Object.freeze({
        PITCH: 0,
        SUBS: 1,
        RESERVES: 2,
        WORKBENCH: 3,
        MANAGER: 4
    }),
    UTSquadViewModel
}()
  , UTSquadActionsView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadActionsView() {
        var e = t.call(this) || this;
        return e.imgLoaders = [],
        e.formationsAdded = !1,
        e
    }
    return __extends(UTSquadActionsView, t),
    UTSquadActionsView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this._makeActiveBtn.init(),
        this._makeActiveBtn.setText(e.localize("infopanel.button.setActive")),
        this._makeActiveBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._openBtn.init(),
        this._openBtn.setText(e.localize("store.mypack.open")),
        this._openBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._btnTactics.init(),
        this._btnTactics.setText(e.localize("infopanel.button.tactics")),
        this._btnTactics.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._squadBuilderBtn.init(),
        this._squadBuilderBtn.setText(e.localize("infopanel.button.squadbuilder")),
        this._squadBuilderBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._renameBtn.init(),
        this._renameBtn.setText(e.localize("infopanel.button.rename")),
        this._renameBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._duplicateBtn.init(),
        this._duplicateBtn.setText(e.localize("infopanel.button.copy")),
        this._duplicateBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._deleteBtn.init(),
        this._deleteBtn.setText(e.localize("infopanel.button.delete")),
        this._deleteBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._clearBtn.init(),
        this._clearBtn.setText(e.localize("infopanel.button.clear")),
        this._clearBtn.addTarget(this, this.eButtonSelected, EventType.TAP),
        this._formationDropDown.init(),
        this._formationDropDown.addTarget(this, this.eFormationChanged, EventType.CHANGE),
        this.__tapAreaLeft.style.opacity = "1",
        this.__tapAreaRight.style.opacity = "1"
    }
    ,
    UTSquadActionsView.prototype.dealloc = function() {
        this.clearFormationImages(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSquadActionsView.prototype.setInteractionState = function(e) {
        t.prototype.setInteractionState.call(this, e),
        e ? (this.__tapAreaLeft.setAttribute("aria-disabled", "false"),
        this.__tapAreaRight.setAttribute("aria-disabled", "false")) : (this.__tapAreaLeft.setAttribute("aria-disabled", "true"),
        this.__tapAreaRight.setAttribute("aria-disabled", "true"))
    }
    ,
    UTSquadActionsView.prototype.getFormationDropdown = function() {
        return this._formationDropDown
    }
    ,
    UTSquadActionsView.prototype.displayMakeActiveButton = function(e) {
        DOMKit.toggleDisplayStyle(this._makeActiveBtn.getRootElement(), e)
    }
    ,
    UTSquadActionsView.prototype.displayOpenButton = function(e) {
        DOMKit.toggleDisplayStyle(this._openBtn.getRootElement(), e)
    }
    ,
    UTSquadActionsView.prototype.displayTacticsButton = function(e) {
        this._btnTactics.setDisplay(e)
    }
    ,
    UTSquadActionsView.prototype.displaySquadBuilderButton = function(e) {
        DOMKit.toggleDisplayStyle(this._squadBuilderBtn.getRootElement(), e)
    }
    ,
    UTSquadActionsView.prototype.displayRenameButton = function(e) {
        DOMKit.toggleDisplayStyle(this._renameBtn.getRootElement(), e)
    }
    ,
    UTSquadActionsView.prototype.displayCopyButton = function(e) {
        DOMKit.toggleDisplayStyle(this._duplicateBtn.getRootElement(), e)
    }
    ,
    UTSquadActionsView.prototype.displayClearButton = function(e) {
        DOMKit.toggleDisplayStyle(this._clearBtn.getRootElement(), e)
    }
    ,
    UTSquadActionsView.prototype.displayDeleteButton = function(e) {
        DOMKit.toggleDisplayStyle(this._deleteBtn.getRootElement(), e)
    }
    ,
    UTSquadActionsView.prototype.clearFormationImages = function() {
        this.imgLoaders.forEach(function(e) {
            e.dealloc()
        }),
        this.imgLoaders = []
    }
    ,
    UTSquadActionsView.prototype.handleFormationCarousel = function() {
        var t = this;
        this._formationCarousel.afterChange(function(e) {
            t._formationDropDown.setIndex(e),
            t.setInteractionState(!1),
            setTimeout(function() {
                t.getRootElement() && t.setInteractionState(!0)
            }, 750)
        })
    }
    ,
    UTSquadActionsView.prototype.setCurrentFormation = function(e) {
        this._formationCarousel.getCurrentSlide() !== e && this._formationCarousel.goTo(e),
        DOMKit.toggleDisplayStyle(this.__tapAreaLeft, 0 < e),
        DOMKit.toggleDisplayStyle(this.__tapAreaRight, e < this.imgLoaders.length - 1)
    }
    ,
    UTSquadActionsView.prototype.setFormations = function(e) {
        this._formationCarousel.isOn() || this.formationsAdded || (this.clearFormationImages(),
        e.forEach(function _generateFormationImage(e) {
            var t = new EAImageView;
            t.src = AssetLocationUtils.getFormationImageUri(e.id),
            this.imgLoaders.push(t),
            this._formationCarousel.appendElem(t.getRootElement())
        }, this),
        this._formationDropDown.setOptions(e),
        this.formationsAdded = !0)
    }
    ,
    UTSquadActionsView.prototype.setupCarousel = function(e) {
        if (!this._formationCarousel.isOn()) {
            DOMKit.toggleDisplayStyle(this._formationCarousel.getRootElement(), !0);
            var t = new TNSPropertiesDTO;
            t.prevButton = this.__tapAreaLeft,
            t.nextButton = this.__tapAreaRight,
            t.preventActionWhenRunning = e,
            t.speed = 600,
            t.container = this._formationCarousel.getRootElement(),
            this._formationCarousel.setup(t)
        }
    }
    ,
    UTSquadActionsView.prototype.destroyCarousel = function() {
        if (this._formationCarousel.isOn()) {
            var e = this.getRootElement();
            DOMKit.toggleDisplayStyle(this._formationCarousel.getRootElement(), !1),
            this._formationCarousel.teardown(e),
            this.__tapAreaLeft = this.getRootElement().getElementsByClassName("tapLeft")[0],
            this.__tapAreaRight = this.getRootElement().getElementsByClassName("tapRight")[0],
            this.formationsAdded = !1
        }
    }
    ,
    UTSquadActionsView.prototype.toggleClearState = function(e) {
        this._clearBtn.setInteractionState(e)
    }
    ,
    UTSquadActionsView.prototype.toggleCopyState = function(e) {
        this._duplicateBtn.setInteractionState(!e)
    }
    ,
    UTSquadActionsView.prototype.toggleMakeActiveState = function(e) {
        this._makeActiveBtn.setInteractionState(!e)
    }
    ,
    UTSquadActionsView.prototype.eFormationChanged = function(e, t) {
        var i = e.getIndex();
        this.setCurrentFormation(i),
        this._triggerActions(UTSquadActionsView.Event.FORMATION_CHANGE, {
            index: i
        })
    }
    ,
    UTSquadActionsView.prototype.eButtonSelected = function(e, t, i) {
        if (this.isInteractionEnabled()) {
            var o = void 0;
            e === this._btnTactics ? o = UTSquadActionsView.Event.SELECT_TACTICS : e === this._makeActiveBtn ? o = UTSquadActionsView.Event.MAKE_SQUAD_ACTIVE : e === this._openBtn ? o = UTSquadActionsView.Event.OPEN_SQUAD : e === this._squadBuilderBtn ? o = UTSquadActionsView.Event.SELECT_SQUAD_BUILDER : e === this._renameBtn ? o = UTSquadActionsView.Event.RENAME_SQUAD : e === this._duplicateBtn ? o = UTSquadActionsView.Event.DUPLICATE_SQUAD : e === this._deleteBtn ? o = UTSquadActionsView.Event.DELETE_SQUAD : e === this._clearBtn && (o = UTSquadActionsView.Event.CLEAR_SQUAD),
            o && this._triggerActions(o)
        }
    }
    ,
    UTSquadActionsView.Event = Object.freeze({
        CLEAR_SQUAD: "UTSquadActionsView.Event.CLEAR_SQUAD",
        DELETE_SQUAD: "UTSquadActionsView.Event.DELETE_SQUAD",
        DUPLICATE_SQUAD: "UTSquadActionsView.Event.DUPLICATE_SQUAD",
        FORMATION_CHANGE: "UTSquadActionsView.Event.FORMATION_CHANGE",
        MAKE_SQUAD_ACTIVE: "UTSquadActionsView.Event.MAKE_SQUAD_ACTIVE",
        OPEN_SQUAD: "UTSquadActionsView.Event.OPEN_SQUAD",
        RENAME_SQUAD: "UTSquadActionsView.Event.RENAME_SQUAD",
        SELECT_SQUAD_BUILDER: "UTSquadActionsView.Event.SELECT_SQUAD_BUILDER",
        SELECT_TACTICS: "UTSquadActionsView.Event.SELECT_TACTICS"
    }),
    UTSquadActionsView
}(EATargetActionView));
UTSquadActionsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-actions-view");
        var t = document.createElement("section");
        t.classList.add("formation-carousel"),
        this.__tapAreaLeft = document.createElement("a"),
        this.__tapAreaLeft.classList.add("alt"),
        this.__tapAreaLeft.classList.add("btn-flat"),
        this.__tapAreaLeft.classList.add("tapLeft"),
        t.appendChild(this.__tapAreaLeft),
        this.__tapAreaRight = document.createElement("a"),
        this.__tapAreaRight.classList.add("alt"),
        this.__tapAreaRight.classList.add("btn-flat"),
        this.__tapAreaRight.classList.add("tapRight"),
        t.appendChild(this.__tapAreaRight),
        this._formationCarousel = new TNSContainerView,
        t.appendChild(this._formationCarousel.getRootElement()),
        this._formationDropDown = new UTDropDownControl,
        this._formationDropDown.getRootElement().classList.add("isolated-section"),
        t.appendChild(this._formationDropDown.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("section");
        i.classList.add("ut-squad-actions-view--panel"),
        this._makeActiveBtn = new UTStandardButtonControl,
        this._makeActiveBtn.getRootElement().classList.add("call-to-action"),
        i.appendChild(this._makeActiveBtn.getRootElement()),
        this._openBtn = new UTStandardButtonControl,
        i.appendChild(this._openBtn.getRootElement());
        var o = document.createElement("div");
        o.classList.add("ut-button-group"),
        this._btnTactics = new UTGroupButtonControl,
        this._btnTactics.getRootElement().classList.add("more"),
        o.appendChild(this._btnTactics.getRootElement()),
        this._squadBuilderBtn = new UTGroupButtonControl,
        this._squadBuilderBtn.getRootElement().classList.add("more"),
        o.appendChild(this._squadBuilderBtn.getRootElement()),
        this._renameBtn = new UTGroupButtonControl,
        o.appendChild(this._renameBtn.getRootElement()),
        this._duplicateBtn = new UTGroupButtonControl,
        o.appendChild(this._duplicateBtn.getRootElement()),
        this._clearBtn = new UTGroupButtonControl,
        o.appendChild(this._clearBtn.getRootElement()),
        this._deleteBtn = new UTGroupButtonControl,
        o.appendChild(this._deleteBtn.getRootElement()),
        i.appendChild(o),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadActionsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tapAreaLeft = null,
    this.__tapAreaRight = null,
    this._formationCarousel.destroy(),
    this._formationDropDown.destroy(),
    this._makeActiveBtn.destroy(),
    this._openBtn.destroy(),
    this._btnTactics.destroy(),
    this._squadBuilderBtn.destroy(),
    this._renameBtn.destroy(),
    this._duplicateBtn.destroy(),
    this._clearBtn.destroy(),
    this._deleteBtn.destroy()
}
,
UTSquadActionsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadActionsViewController = function(i) {
    function UTSquadActionsViewController() {
        var e = i.call(this) || this;
        return e._formations = factories.DataProvider.getFormationDP(),
        e._inSquadContext = !1,
        e.onDataChange = new EAObservable,
        e._squad = null,
        e
    }
    return __extends(UTSquadActionsViewController, i),
    UTSquadActionsViewController.prototype.initWithSquad = function(e) {
        this.initialized || (this._squad = e,
        this.init())
    }
    ,
    UTSquadActionsViewController.prototype.dealloc = function() {
        this.onDataChange.dealloc(),
        this._squad = null,
        i.prototype.dealloc.call(this)
    }
    ,
    UTSquadActionsViewController.prototype._getViewInstanceFromData = function() {
        return new UTSquadActionsView
    }
    ,
    UTSquadActionsViewController.prototype._getTelemetryId = function() {
        return "Squad Details"
    }
    ,
    UTSquadActionsViewController.prototype.getNavigationTitle = function() {
        var e, t, i = services.Localization;
        return null !== (t = null === (e = this._squad) || void 0 === e ? void 0 : e.getName()) && void 0 !== t ? t : i.localize("squads.detail.title")
    }
    ,
    UTSquadActionsViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this.getView();
        e.setFormations(this._formations),
        e.setupCarousel(this._inSquadContext && !isPhone()),
        this._setViewButtonStates(),
        !isPhone() && this._inSquadContext || this._checkSquadListFull(),
        this._squad && (this._inSquadContext || isPhone()) && this.setSquad(this._squad);
        var t = this._getFormationDPIndex();
        e.setCurrentFormation(t),
        e.getFormationDropdown().setIndex(t),
        e.handleFormationCarousel(),
        e.addTarget(this, this._onFormationChange, UTSquadActionsView.Event.FORMATION_CHANGE),
        e.addTarget(this, this._onMakeActive, UTSquadActionsView.Event.MAKE_SQUAD_ACTIVE),
        e.addTarget(this, this._onOpen, UTSquadActionsView.Event.OPEN_SQUAD),
        e.addTarget(this, this._onRename, UTSquadActionsView.Event.RENAME_SQUAD),
        e.addTarget(this, this._onCopy, UTSquadActionsView.Event.DUPLICATE_SQUAD),
        e.addTarget(this, this._onClear, UTSquadActionsView.Event.CLEAR_SQUAD),
        e.addTarget(this, this._onDelete, UTSquadActionsView.Event.DELETE_SQUAD),
        e.addTarget(this, this._onSquadBuilder, UTSquadActionsView.Event.SELECT_SQUAD_BUILDER),
        e.addTarget(this, this._eTacticsSelected, UTSquadActionsView.Event.SELECT_TACTICS)
    }
    ,
    UTSquadActionsViewController.prototype.viewWillDisappear = function() {
        i.prototype.viewWillDisappear.call(this);
        var e = this.getView();
        e.removeTarget(this, this._onFormationChange, UTSquadActionsView.Event.FORMATION_CHANGE),
        e.removeTarget(this, this._onMakeActive, UTSquadActionsView.Event.MAKE_SQUAD_ACTIVE),
        e.removeTarget(this, this._onOpen, UTSquadActionsView.Event.OPEN_SQUAD),
        e.removeTarget(this, this._onRename, UTSquadActionsView.Event.RENAME_SQUAD),
        e.removeTarget(this, this._onCopy, UTSquadActionsView.Event.DUPLICATE_SQUAD),
        e.removeTarget(this, this._onClear, UTSquadActionsView.Event.CLEAR_SQUAD),
        e.removeTarget(this, this._onDelete, UTSquadActionsView.Event.DELETE_SQUAD),
        e.removeTarget(this, this._onSquadBuilder, UTSquadActionsView.Event.SELECT_SQUAD_BUILDER),
        e.removeTarget(this, this._eTacticsSelected, UTSquadActionsView.Event.SELECT_TACTICS),
        e.destroyCarousel(),
        this._squad && (this._squad.onDataUpdated.unobserve(this),
        this._squad.isModified() && this._squad.save().observe(this, this._handleSquadSave))
    }
    ,
    UTSquadActionsViewController.prototype.setSquadContext = function(e) {
        this._inSquadContext = e
    }
    ,
    UTSquadActionsViewController.prototype.setSquad = function(e) {
        var t = this.getView();
        t.setInteractionState(!1),
        this._squad && this._squad.getName() === e.getName() || (this._squad && (this._squad.onDataUpdated.unobserve(this),
        this._squad.isModified() && this._squad.save().observe(this, this._handleSquadSave)),
        this._squad = e,
        this._squad.onDataUpdated.observe(this, this._eSquadUpdate)),
        this._setViewButtonStates(),
        this._checkSquadListFull();
        var i = this._getFormationDPIndex();
        t.setCurrentFormation(i),
        t.getFormationDropdown().setIndex(i),
        t.setInteractionState(!0)
    }
    ,
    UTSquadActionsViewController.prototype._setViewButtonStates = function() {
        var e, t, i, o, n, r, s = this.getView(), a = JSUtils.isValid(this._squad), l = null !== (t = null === (e = this._squad) || void 0 === e ? void 0 : e.getId()) && void 0 !== t ? t : -1, c = null !== (o = null === (i = this._squad) || void 0 === i ? void 0 : i.isDream()) && void 0 !== o && o, u = null === (r = null === (n = this._squad) || void 0 === n ? void 0 : n.isSquadEmpty()) || void 0 === r || r, d = l === services.Squad.getActiveSquadId();
        s.displayMakeActiveButton(a),
        s.displayDeleteButton(!d && !this._inSquadContext),
        s.displayRenameButton(a),
        s.displayCopyButton(a),
        s.displaySquadBuilderButton(a && this._inSquadContext),
        s.displayClearButton(a && this._inSquadContext),
        s.displayOpenButton(a && !this._inSquadContext),
        s.displayTacticsButton(a && !c),
        s.toggleMakeActiveState(d),
        s.toggleClearState(a && !u)
    }
    ,
    UTSquadActionsViewController.prototype._getFormationDPIndex = function() {
        var e, t;
        if (this._squad) {
            var i = null !== (t = null === (e = this._squad.getFormation()) || void 0 === e ? void 0 : e.name) && void 0 !== t ? t : "";
            if (!JSUtils.isEmpty(i))
                return Math.max(this._formations.findIndex(function(e) {
                    return e.value === i
                }), 0)
        }
        return 0
    }
    ,
    UTSquadActionsViewController.prototype._checkSquadListFull = function() {
        var i = this;
        services.Squad.requestSquadList().observe(this, function(e, t) {
            e.unobserve(i),
            t.success && t.data && i.isViewDisplayed() && i.getView().toggleCopyState(t.data.listFull)
        })
    }
    ,
    UTSquadActionsViewController.prototype._onMakeActive = function() {
        function hrd(e, t) {
            e.unobserve(i),
            t.success ? (i.onDataChange.notify(),
            i._setViewButtonStates(),
            services.Notification.queue([o.localize("notification.squad.setActive"), UINotificationType.NEUTRAL])) : NetworkErrorManager.handleStatus(t.status)
        }
        var i = this
          , o = services.Localization;
        if (TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.BUTTON_PRESS, "Squads - Set Active"),
        DebugUtils.Assert(JSUtils.isValid(this._squad), "Cannot find squad entity for active assignment."),
        this._squad)
            if (this._squad.isModified()) {
                var n = this._squad;
                n.save().observe(this, function(e, t) {
                    e.unobserve(i),
                    t.success ? services.Squad.setActiveSquad(n.getId()).observe(i, hrd) : services.Notification.queue([o.localize("popup.error.activesquad.SaveFailed"), UINotificationType.NEGATIVE])
                })
            } else
                services.Squad.setActiveSquad(this._squad.getId()).observe(this, hrd)
    }
    ,
    UTSquadActionsViewController.prototype._onSquadBuilder = function() {
        var e, t = new UTSquadBuilderViewController;
        this._squad ? t.initWithSquad(this._squad) : t.init(),
        null === (e = this.getNavigationController()) || void 0 === e || e.pushViewController(t),
        TelemetryManager.trackPage(TelemetryManager.Sections.SQUADS, "Squad Builder")
    }
    ,
    UTSquadActionsViewController.prototype._onRename = function() {
        var e, a = this, t = services.Localization, l = this._squad, i = null !== (e = null == l ? void 0 : l.getName()) && void 0 !== e ? e : BLANK_STR, o = new UTRenameSquadPopupViewController({
            defaultName: i,
            title: t.localize("renamesquad.title", [i]),
            buttonLabel: services.Localization.localize("common.dialog.ok")
        });
        o.init(),
        o.modalDisplayDimensions.width = "24em",
        o.onConfirm.observe(this, function(e, t) {
            e.unobserve(a),
            l && services.Squad.rename(l.getId(), t).observe(a, function(e, t) {
                var i, o, n;
                if (e.unobserve(a),
                t.success) {
                    (null === (i = t.data) || void 0 === i ? void 0 : i.squad) && l.setName(t.data.squad.getName(), []);
                    var r = a.getNavigationController();
                    r && r.setNavigationTitle(l.getName()),
                    services.Notification.queue([services.Localization.localize("notification.squad.renamed"), UINotificationType.NEUTRAL])
                } else {
                    var s = "popup.body.genericError";
                    (null === (o = t.error) || void 0 === o ? void 0 : o.code) === UtasErrorCode.NAME_EXISTS ? s = "popup.error.duplicateSquadName" : (null === (n = t.error) || void 0 === n ? void 0 : n.code) === UtasErrorCode.PROFANITY && (s = "popup.error.profanity"),
                    services.Notification.queue([services.Localization.localize(s), UINotificationType.NEGATIVE])
                }
            })
        }),
        gPopupClickShield.setActivePopup(o)
    }
    ,
    UTSquadActionsViewController.prototype._onCopy = function() {
        var n = this
          , r = this._squad;
        TelemetryManager.trackPage(TelemetryManager.Sections.SQUADS, "Squad List - Copy Squad"),
        r && services.Squad.requestSquadList().observe(this, function(e, t) {
            var i, o;
            e.unobserve(n),
            n.copySquad(r, null !== (o = null === (i = t.data) || void 0 === i ? void 0 : i.squads) && void 0 !== o ? o : [])
        })
    }
    ,
    UTSquadActionsViewController.prototype.copySquad = function(i, e) {
        var t, n = this, o = null !== (t = i.getName()) && void 0 !== t ? t : BLANK_STR, r = TextUtils.createSquadNameCopy(o, e), s = new UTRenameSquadPopupViewController({
            defaultName: r
        });
        s.init(),
        s.modalDisplayDimensions.width = "24em",
        s.onConfirm.observe(this, function(e, t) {
            e.unobserve(n),
            services.Squad.copy(i.getId(), t).observe(n, function(e, t) {
                if (e.unobserve(n),
                t.success)
                    n._checkSquadListFull(),
                    services.Notification.queue([services.Localization.localize("notification.squad.copied"), UINotificationType.NEUTRAL]);
                else {
                    var i = t.error ? t.error.code : t.status;
                    if (NetworkErrorManager.checkCriticalStatus(i))
                        NetworkErrorManager.handleStatus(i);
                    else {
                        var o = void 0;
                        switch (i) {
                        case UtasErrorCode.NAME_EXISTS:
                            o = "popup.error.duplicateSquadName";
                            break;
                        case UtasErrorCode.PERMISSION_DENIED:
                            o = "popup.error.squadsFull";
                            break;
                        case UtasErrorCode.PROFANITY:
                            o = "popup.error.profanity";
                            break;
                        default:
                            o = "popup.body.genericError"
                        }
                        services.Notification.queue([services.Localization.localize(o), UINotificationType.NEGATIVE])
                    }
                }
            })
        }),
        gPopupClickShield.setActivePopup(s)
    }
    ,
    UTSquadActionsViewController.prototype._onClear = function() {
        var o = this;
        utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.CLEAR_SQUAD, {
            params: []
        }, function() {
            var e, t, i;
            null !== (t = null === (e = o._squad) || void 0 === e ? void 0 : e.removeAllItems()) && void 0 !== t && t && (null === (i = o._squad) || void 0 === i || i.save().observe(o, function(e, t) {
                var i = services.Localization;
                e.unobserve(o),
                t.success ? (o.getView().toggleClearState(!1),
                services.Notification.queue([i.localize("notification.squad.cleared"), UINotificationType.NEUTRAL])) : services.Notification.queue([i.localize("popup.error.activesquad.SaveFailed"), UINotificationType.NEGATIVE])
            }))
        })
    }
    ,
    UTSquadActionsViewController.prototype._onDelete = function() {
        var o = this;
        TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.BUTTON_PRESS, "Squads - Delete Squad");
        var e = this._squad;
        if (e) {
            e.getId() === services.Squad.getActiveSquadId() ? utils.PopupManager.showAlert(utils.PopupManager.Alerts.CANNOT_DELETE_SQUAD) : utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.DELETE_SQUAD, {
                params: [e.getName()]
            }, function() {
                services.Squad.remove(e.getId()).observe(o, function(e, t) {
                    if (e.unobserve(o),
                    t.success) {
                        if (services.Notification.queue([services.Localization.localize("notification.squad.deleted"), UINotificationType.NEUTRAL]),
                        isPhone()) {
                            var i = o.getNavigationController();
                            i && i.popViewController(!0)
                        }
                    } else
                        NetworkErrorManager.handleStatus(t.status)
                })
            }, function() {})
        }
    }
    ,
    UTSquadActionsViewController.prototype._onOpen = function() {
        function lsd() {
            var e = o.getNavigationController();
            if (e) {
                var t = isPhone() ? new UTSquadOverviewViewController : new UTSquadSplitViewController;
                o._squad ? t.initWithSquad(o._squad) : t.init(),
                e.pushViewController(t)
            }
        }
        var o = this
          , n = this.getView();
        this._squad && (this._squad.isSquadLoaded() ? lsd() : (n.setInteractionState(!1),
        services.Squad.requestSquadById(this._squad.getId()).observe(this, function(e, t) {
            var i;
            e.unobserve(o),
            t.success && (null === (i = t.data) || void 0 === i ? void 0 : i.squad) && (o._squad = t.data.squad),
            n.setInteractionState(!0),
            lsd()
        })))
    }
    ,
    UTSquadActionsViewController.prototype._onFormationChange = function(e, t, i) {
        var o = this
          , n = this._squad;
        DebugUtils.Assert(JSUtils.isValid(n), "Missing squad entity when changing formation.");
        var r = this._formations[i.index].value.toString()
          , s = repositories.Squad.getFormation(r);
        if (DebugUtils.Assert(JSUtils.isValid(s), "Could not find formation."),
        n && s) {
            var a = this.getView();
            this._inSquadContext || n.isSquadLoaded() ? (n.setFormation(s),
            this._inSquadContext || this.onDataChange.notify()) : (a.setInteractionState(!1),
            services.Squad.requestSquadById(n.getId()).observe(this, function(e, t) {
                var i;
                e.unobserve(o),
                t.success && (null === (i = t.data) || void 0 === i ? void 0 : i.squad) && (t.data.squad.setFormation(s),
                o.setSquad(t.data.squad),
                o._inSquadContext || o.onDataChange.notify(),
                a.toggleClearState(!n.isSquadEmpty())),
                a.setInteractionState(!0)
            }))
        }
    }
    ,
    UTSquadActionsViewController.prototype._eTacticsSelected = function(e, t, i) {
        function Gsd() {
            var e = isPhone() ? new UTTacticsProfileMenuViewController : new UTTacticsSplitViewController
              , t = new UTSquadTacticsViewModel(services.Squad)
              , i = services.UserSettings.getSessionItem(UserSettingsKey.SAVE_TACTICS_MESSAGE_DISPLAYED);
            o._squad && t.setSquad(o._squad),
            e.initWithTacticsViewModel(t),
            o.getRootNavigationController().pushViewController(e),
            i || (utils.PopupManager.showAlert(utils.PopupManager.Alerts.SAVE_TACTICS),
            services.UserSettings.setSessionItem(UserSettingsKey.SAVE_TACTICS_MESSAGE_DISPLAYED, "true"))
        }
        var o = this;
        if (TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.BUTTON_PRESS, "Squads - Modify Tactics"),
        this._squad)
            if (this._squad.isSquadLoaded())
                Gsd.call(this);
            else {
                var n = this.getView();
                n.setInteractionState(!1),
                services.Squad.requestSquadById(this._squad.getId()).observe(this, function(e, t) {
                    var i;
                    e.unobserve(o),
                    t.success && (null === (i = t.data) || void 0 === i ? void 0 : i.squad) && (o._squad = t.data.squad),
                    n.setInteractionState(!0),
                    Gsd.call(o)
                })
            }
    }
    ,
    UTSquadActionsViewController.prototype._eSquadUpdate = function(e, o) {
        function Tsd() {
            var e, t;
            if (o.slots && n.isViewDisplayed()) {
                var i = null !== (t = null === (e = n._squad) || void 0 === e ? void 0 : e.isSquadEmpty()) && void 0 !== t && t;
                r.toggleClearState(!i)
            }
        }
        var t, n = this, r = this.getView();
        if (o)
            if (this._inSquadContext)
                Tsd(),
                r.setCurrentFormation(this._getFormationDPIndex());
            else if (this._squad) {
                var i = this._squad;
                (o.chemistry && o.chemistry !== i.getChemistry() || o.rating && o.rating !== i.getRating() || o.type && o.type !== i.getType() || o.formation && o.formation.id !== (null === (t = i.getFormation()) || void 0 === t ? void 0 : t.id) || o.name && o.name !== i.getName()) && (Tsd(),
                this.onDataChange.notify())
            }
    }
    ,
    UTSquadActionsViewController.prototype._handleSquadSave = function(e, t) {
        e.unobserve(this),
        t.success || services.Notification.queue([services.Localization.localize("popup.error.activesquad.SaveFailed"), UINotificationType.NEGATIVE])
    }
    ,
    UTSquadActionsViewController
}(EAViewController);
NamespaceManager.Register("interfaces"),
interfaces.SquadViewDelegate = function ISquadViewDelegate() {}
,
interfaces.SquadViewDelegate.prototype.updateSlot = function updateSlot() {}
,
interfaces.SquadViewDelegate.prototype.selectSlot = function selectSlot() {}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadTabButtonControl = function(e) {
    function UTSquadTabButtonControl() {
        return e.call(this) || this
    }
    return __extends(UTSquadTabButtonControl, e),
    UTSquadTabButtonControl.prototype.setText = function(e) {
        this.__text.textContent = e
    }
    ,
    UTSquadTabButtonControl.prototype.assignLeft = function() {
        this.removeClass("right"),
        this.addClass("left")
    }
    ,
    UTSquadTabButtonControl.prototype.setArrowDirection = function(e) {
        this.removeClass(["ui-direction-up", "ui-direction-down", "ui-direction-left", "ui-direction-right"].join(" ")),
        this.addClass("ui-direction-" + e)
    }
    ,
    UTSquadTabButtonControl.prototype.setType = function(e) {
        var t = [enums.UISquadTabTypes.WORK_AREA, enums.UISquadTabTypes.DOCK_TAB, enums.UISquadTabTypes.DEFAULT].join(" ");
        this.removeClass(t),
        this.addClass(e)
    }
    ,
    UTSquadTabButtonControl.prototype.assignRight = function() {
        this.removeClass("left"),
        this.addClass("right")
    }
    ,
    UTSquadTabButtonControl
}(UTButtonControl);
UTSquadTabButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("button");
        e.classList.add("ut-squad-tab-button-control");
        var t = document.createElement("div");
        t.classList.add("icon"),
        e.appendChild(t),
        this.__text = document.createElement("span"),
        e.appendChild(this.__text),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadTabButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__text = null
}
,
UTSquadTabButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadSlotDockView = function(t) {
    function UTSquadSlotDockView() {
        var e = t.call(this) || this;
        return e.isAnimating = !1,
        e.isVisible = !1,
        e.slots = [],
        e
    }
    return __extends(UTSquadSlotDockView, t),
    UTSquadSlotDockView.prototype.init = function() {
        t.prototype.init.call(this),
        this.setInteractionState(!0)
    }
    ,
    UTSquadSlotDockView.prototype.dealloc = function() {
        this.animationFrameId && cancelAnimationFrame(this.animationFrameId),
        this.getRootElement().removeEventListener(EventType.TRANSITIONEND, this.onTransitionEnd),
        this.clearSlotViews(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSquadSlotDockView.prototype.clearSlotViews = function() {
        this.slots.forEach(function(e) {
            return e.dealloc()
        }),
        this.slots = []
    }
    ,
    UTSquadSlotDockView.prototype.getSlotViews = function() {
        return this.slots
    }
    ,
    UTSquadSlotDockView.prototype.setSlots = function(e, i, o) {
        var n = this;
        void 0 === i && (i = !0),
        void 0 === o && (o = !0),
        this.clearSlotViews(),
        e.forEach(function(e) {
            if (!(e.index < 0)) {
                var t = new UTSquadSlotView;
                t.init(),
                t.render(e, i, !1, o),
                n.addSubview(t, n.__slotContainer),
                n.slots.push(t)
            }
        }, this),
        this.layoutSubviews()
    }
    ,
    UTSquadSlotDockView.prototype.updateSlot = function(t, e, i) {
        void 0 === e && (e = !0),
        void 0 === i && (i = !0);
        var o = JSUtils.find(this.slots, function(e) {
            return e.getIndex() === t.index
        });
        null == o || o.render(t, e, !1, i)
    }
    ,
    UTSquadSlotDockView.prototype.updateChemistry = function(o) {
        this.slots.forEach(function(t) {
            var e = JSUtils.find(o, function(e) {
                return e.index === t.getIndex()
            })
              , i = t.getItemView();
            e && i && i.renderChemistryBreakdown(e.chemistry, e.nationChemistryPoints, e.leagueChemistryPoints, e.clubChemistryPoints)
        }, this)
    }
    ,
    UTSquadSlotDockView.prototype.setInstructions = function(e) {
        this.__instructions || (this.__instructions = document.createElement("p"),
        DOMKit.addClass(this.__instructions, "dock-instructions"),
        this.__content.appendChild(this.__instructions)),
        this.__instructions.innerHTML = e
    }
    ,
    UTSquadSlotDockView.prototype.setViewState = function(t, i) {
        var o = this;
        this.isAnimating = !0,
        this.animationFrameId = requestAnimationFrame(function() {
            var e = o.getRootElement();
            o.onTransitionEnd = function() {
                o.isVisible = t,
                o.isAnimating = !1,
                DOMKit.isInDOM(e) ? (e.removeEventListener(EventType.TRANSITIONEND, o.onTransitionEnd),
                i && i()) : cancelAnimationFrame(o.animationFrameId)
            }
            ,
            e.addEventListener(EventType.TRANSITIONEND, o.onTransitionEnd),
            e.style.bottom = t ? o.__content.clientHeight + "px" : ""
        })
    }
    ,
    UTSquadSlotDockView.prototype.setIsSBC = function(e) {
        this.toggleClass("sbc", e)
    }
    ,
    UTSquadSlotDockView.prototype.getContentHeight = function() {
        return this.__content.clientHeight
    }
    ,
    UTSquadSlotDockView.prototype.open = function(e) {
        this.isAnimating || this.setViewState(!0, e)
    }
    ,
    UTSquadSlotDockView.prototype.close = function(e) {
        this.isAnimating || this.setViewState(!1, e)
    }
    ,
    UTSquadSlotDockView.prototype.toggle = function() {
        this.isAnimating || (this.isVisible ? this.close() : this.open())
    }
    ,
    UTSquadSlotDockView
}(EAView);
UTSquadSlotDockView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-slot-dock-view"),
        this.__content = document.createElement("div"),
        this.__content.classList.add("content-container"),
        this.__slotContainer = document.createElement("div"),
        this.__slotContainer.classList.add("ut-squad-slot-dock-view--slot-container"),
        this.__content.appendChild(this.__slotContainer),
        e.appendChild(this.__content),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadSlotDockView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__content = null,
    this.__slotContainer = null
}
,
UTSquadSlotDockView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryBarView = function(e) {
    function UTSquadChemistryBarView() {
        return e.call(this) || this
    }
    return __extends(UTSquadChemistryBarView, e),
    UTSquadChemistryBarView.prototype.init = function() {
        e.prototype.init.call(this),
        this._progressBar.init(),
        this.__chemistryValue.textContent = "0"
    }
    ,
    UTSquadChemistryBarView.prototype.setChemistry = function(e, t, i) {
        void 0 === t && (t = 100),
        void 0 === i && (i = !1),
        this.__chemistryValue.textContent = e.toString();
        var o = e / t * 100;
        this._progressBar.setProgress(o)
    }
    ,
    UTSquadChemistryBarView
}(EAView);
UTSquadChemistryBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("progress-bar-container"),
        this._progressBar = new UTProgressBarView,
        this._progressBar.getRootElement().classList.add("rounded"),
        this._progressBar.getRootElement().classList.add("chemistryRatingBars"),
        e.appendChild(this._progressBar.getRootElement()),
        this.__chemistryValue = document.createElement("span"),
        this.__chemistryValue.classList.add("ut-squad-summary-value"),
        e.appendChild(this.__chemistryValue),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistryBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._progressBar.destroy(),
    this.__chemistryValue = null
}
,
UTSquadChemistryBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTStarRatingView = function(e) {
    function UTStarRatingView() {
        return e.call(this) || this
    }
    return __extends(UTStarRatingView, e),
    UTStarRatingView.prototype.setRatingPercent = function(e) {
        var t = Math.min(Math.max(0, e), 100);
        this.__fill.style.width = t + "%"
    }
    ,
    UTStarRatingView
}(EAView);
UTStarRatingView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-star-rating"),
        this.__fill = document.createElement("div"),
        this.__fill.classList.add("ut-star-rating--fill"),
        e.appendChild(this.__fill),
        this.__root = e,
        this._generated = !0
    }
}
,
UTStarRatingView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__fill = null
}
,
UTStarRatingView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadStarRatingView = function(e) {
    function UTSquadStarRatingView() {
        return e.call(this) || this
    }
    return __extends(UTSquadStarRatingView, e),
    UTSquadStarRatingView.prototype.init = function() {
        e.prototype.init.call(this),
        this.__ratingValue.textContent = "0"
    }
    ,
    UTSquadStarRatingView.prototype.calculateFillWidthFromRating = function(e) {
        for (var t = 0; t < STAR_RATING_THRESHOLDS.length; t++)
            if (e <= STAR_RATING_THRESHOLDS[t])
                return 10 * t;
        return 100
    }
    ,
    UTSquadStarRatingView.prototype.setRating = function(e, t) {
        void 0 === t && (t = !1);
        var i = Math.min(Math.max(0, e), 99);
        this.__ratingValue.textContent = i.toString(),
        this._ratingStars.setRatingPercent(this.calculateFillWidthFromRating(i))
    }
    ,
    UTSquadStarRatingView
}(EAView);
UTSquadStarRatingView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-star-rating-view"),
        this._ratingStars = new UTStarRatingView,
        e.appendChild(this._ratingStars.getRootElement()),
        this.__ratingValue = document.createElement("span"),
        this.__ratingValue.classList.add("ut-squad-summary-value"),
        e.appendChild(this.__ratingValue),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadStarRatingView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._ratingStars.destroy(),
    this.__ratingValue = null
}
,
UTSquadStarRatingView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTChemistryButtonControl = function(e) {
    function UTChemistryButtonControl() {
        return e.call(this) || this
    }
    return __extends(UTChemistryButtonControl, e),
    UTChemistryButtonControl
}(UTImageButtonControl);
UTChemistryButtonControl.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("button");
        e.classList.add("chemistry-btn"),
        e.classList.add("ut-image-button-control");
        var t = document.createElement("span");
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTChemistryButtonControl.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTChemistryButtonControl.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryBaseEntryView = function(e) {
    function UTSquadChemistryBaseEntryView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTSquadChemistryBaseEntryView, e),
    UTSquadChemistryBaseEntryView.prototype.init = function() {
        e.prototype.init.call(this),
        this._badge.init(),
        this._entryPointsView.init()
    }
    ,
    UTSquadChemistryBaseEntryView.prototype.getAssetUri = function(e, t) {
        var i = enums.UIThemeVariation.DARK;
        switch (e) {
        case ChemistryParamId.CLUB:
            return AssetLocationUtils.getBadgeImageUri(t, i);
        case ChemistryParamId.LEAGUE:
            return AssetLocationUtils.getLeagueImageUri(t, i);
        case ChemistryParamId.NATION:
            return AssetLocationUtils.getFlagImageUri(t, i)
        }
    }
    ,
    UTSquadChemistryBaseEntryView.prototype.loadAsset = function(i, e) {
        var o = this;
        this._badge.onerror = function(e) {
            var t = UTItemEntity.DEFAULT_ASSET_ID;
            o._badge.onerror = null,
            o._badge.src = o.getAssetUri(i, t)
        }
        ,
        this._badge.src = this.getAssetUri(i, e)
    }
    ,
    UTSquadChemistryBaseEntryView
}(EAView)
  , UTSquadChemistrySummaryEntryView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTSquadChemistrySummaryEntryView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTSquadChemistrySummaryEntryView, e),
    UTSquadChemistrySummaryEntryView.prototype.render = function(e) {
        this.loadAsset(e.typeId, e.metaId),
        this._entryPointsView.render(e.points, e.potentialPoints)
    }
    ,
    UTSquadChemistrySummaryEntryView.prototype.renderEmpty = function() {
        this.__fallback.textContent = "--",
        this._badge.setDisplay(!1)
    }
    ,
    UTSquadChemistrySummaryEntryView
}(UTSquadChemistryBaseEntryView));
UTSquadChemistrySummaryEntryView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-chemistry-entry");
        var t = document.createElement("div");
        t.classList.add("ut-squad-chemistry--badge-container"),
        this.__fallback = document.createElement("span"),
        t.appendChild(this.__fallback),
        this._badge = new EAImageView,
        this._badge.getRootElement().classList.add("ut-squad-chemistry-entry--badge"),
        t.appendChild(this._badge.getRootElement()),
        e.appendChild(t),
        this._entryPointsView = new UTSquadSlotChemistryPointsView,
        this._entryPointsView.getRootElement().classList.add("ut-squad-chemistry-entry-points"),
        e.appendChild(this._entryPointsView.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistrySummaryEntryView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__fallback = null,
    this._badge.destroy(),
    this._entryPointsView.destroy()
}
,
UTSquadChemistrySummaryEntryView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
__spreadArrays = this && this.__spreadArrays || function() {
    for (var e = 0, t = 0, i = arguments.length; t < i; t++)
        e += arguments[t].length;
    var o = Array(e)
      , n = 0;
    for (t = 0; t < i; t++)
        for (var r = arguments[t], s = 0, a = r.length; s < a; s++,
        n++)
            o[n] = r[s];
    return o
}
;
var UTSquadStatsView = function(t) {
    function UTSquadStatsView() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(UTSquadStatsView, t),
    UTSquadStatsView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this.__chemistryLabel.textContent = e.localize("squad.chemistry.label"),
        this._showChemistryBtn.init()
    }
    ,
    UTSquadStatsView.prototype.set = function(e, t) {
        this.setChemistry(e)
    }
    ,
    UTSquadStatsView.prototype.setChemistry = function(e) {
        var t = services.Localization
          , i = t.localize("squad.chemistry.fraction", [e.toString(), UTSquadEntity.TOTAL_MAX_CHEM.toString()])
          , o = t.localize("squad.chemistry.label") + " " + i;
        this.__chemistryLabel.textContent = o
    }
    ,
    UTSquadStatsView.prototype.setChemistryEntries = function(e) {
        var i = this
          , t = __spreadArrays(e, [null, null, null]).slice(0, 3);
        this.removeSubviews(),
        t.forEach(function(e) {
            var t = new UTSquadChemistrySummaryEntryView;
            t.init(),
            null != e ? t.render(e) : t.renderEmpty(),
            i.addSubview(t, i.__chemistryContainer)
        }),
        this.layoutSubviews()
    }
    ,
    UTSquadStatsView.prototype.getShowChemistryButton = function() {
        return this._showChemistryBtn
    }
    ,
    UTSquadStatsView
}(EAView);
UTSquadStatsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-summary-info--right"),
        e.classList.add("ut-squad-summary-info");
        var t = document.createElement("div");
        t.classList.add("chemistry-inline"),
        t.classList.add("chemistry");
        var i = document.createElement("div");
        i.classList.add("chemistry-summary"),
        this.__chemistryLabel = document.createElement("span"),
        this.__chemistryLabel.classList.add("ut-squad-summary-label"),
        i.appendChild(this.__chemistryLabel),
        this.__chemistryContainer = document.createElement("div"),
        this.__chemistryContainer.classList.add("chemistry-container"),
        i.appendChild(this.__chemistryContainer),
        t.appendChild(i),
        e.appendChild(t);
        var o = document.createElement("div");
        o.classList.add("chemistry-button"),
        this._showChemistryBtn = new UTChemistryButtonControl,
        o.appendChild(this._showChemistryBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadStatsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__chemistryLabel = null,
    this.__chemistryContainer = null,
    this._showChemistryBtn.destroy()
}
,
UTSquadStatsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSBCSquadStatsView = function(e) {
    function UTSBCSquadStatsView() {
        return e.call(this) || this
    }
    return __extends(UTSBCSquadStatsView, e),
    UTSBCSquadStatsView.prototype.init = function() {
        e.prototype.init.call(this),
        this.__ratingLabel.textContent = services.Localization.localize("squads.rating")
    }
    ,
    UTSBCSquadStatsView.prototype.set = function(e, t) {
        var i = services.Localization
          , o = e.toString()
          , n = UTSquadEntity.TOTAL_MAX_CHEM.toString()
          , r = i.localize("squad.chemistry.fraction", [o, n]);
        this.__chemistryValue.textContent = r,
        this._ratingStars.setRating(t)
    }
    ,
    UTSBCSquadStatsView.prototype.setChemistry = function(e) {
        var t = services.Localization
          , i = e.toString()
          , o = UTSquadEntity.TOTAL_MAX_CHEM.toString()
          , n = t.localize("squad.chemistry.fraction", [i, o]);
        this.__chemistryValue.textContent = n
    }
    ,
    UTSBCSquadStatsView.prototype.setRating = function(e, t) {
        void 0 === t && (t = !1),
        this._ratingStars.setRating(e, t)
    }
    ,
    UTSBCSquadStatsView
}(UTSquadStatsView);
UTSBCSquadStatsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-summary-info--right"),
        e.classList.add("ut-squad-summary-info");
        var t = document.createElement("div");
        t.classList.add("rating"),
        this.__ratingLabel = document.createElement("span"),
        this.__ratingLabel.classList.add("ut-squad-summary-label"),
        t.appendChild(this.__ratingLabel),
        this._ratingStars = new UTSquadStarRatingView,
        t.appendChild(this._ratingStars.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("chemistry"),
        this.__chemistryLabel = document.createElement("div"),
        this.__chemistryLabel.classList.add("ut-squad-summary-label"),
        i.appendChild(this.__chemistryLabel);
        var o = document.createElement("div");
        o.classList.add("ut-squad-summary-value-button"),
        this.__chemistryValue = document.createElement("span"),
        this.__chemistryValue.classList.add("ut-squad-summary-value"),
        o.appendChild(this.__chemistryValue),
        this._showChemistryBtn = new UTImageButtonControl,
        this._showChemistryBtn.getRootElement().classList.add("chevron-btn"),
        o.appendChild(this._showChemistryBtn.getRootElement()),
        i.appendChild(o),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSBCSquadStatsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__ratingLabel = null,
    this._ratingStars.destroy(),
    this.__chemistryLabel = null,
    this.__chemistryValue = null,
    this._showChemistryBtn.destroy()
}
,
UTSBCSquadStatsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadSummaryBannerView = function(t) {
    function UTSquadSummaryBannerView() {
        return t.call(this) || this
    }
    return __extends(UTSquadSummaryBannerView, t),
    UTSquadSummaryBannerView.prototype.init = function() {
        if (t.prototype.init.call(this),
        this._squadStats.init(),
        this._ratingStars.init(),
        this.__formationTitle) {
            var e = services.Localization;
            this.__formationTitle.textContent = e.localize("squads.formation"),
            this.__labelRating.textContent = e.localize("squads.rating")
        }
    }
    ,
    UTSquadSummaryBannerView.prototype.setChemistryAndRating = function(e, t, i) {
        this.setChemistry(e),
        this.setRating(t, i)
    }
    ,
    UTSquadSummaryBannerView.prototype.setChemistry = function(e) {
        this._squadStats.setChemistry(e)
    }
    ,
    UTSquadSummaryBannerView.prototype.setChemistryEntries = function(e) {
        this._squadStats.setChemistryEntries(e)
    }
    ,
    UTSquadSummaryBannerView.prototype.setRating = function(e, t) {
        this._ratingStars.setRating(e, t)
    }
    ,
    UTSquadSummaryBannerView.prototype.setFormation = function(e) {
        this.__formationTitle && (this.__formationTitle.textContent = services.Localization.localize("squads.formation.label", [e]))
    }
    ,
    UTSquadSummaryBannerView.prototype.show = function() {
        this.setDisplay(!0)
    }
    ,
    UTSquadSummaryBannerView.prototype.hide = function() {
        this.setDisplay(!1)
    }
    ,
    UTSquadSummaryBannerView.prototype.getShowChemistryButton = function() {
        return this._squadStats.getShowChemistryButton()
    }
    ,
    UTSquadSummaryBannerView
}(EAView);
UTSquadSummaryBannerView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-summary");
        var t = document.createElement("div");
        t.classList.add("ut-squad-summary-info"),
        this.__formationTitle = document.createElement("h1"),
        this.__formationTitle.classList.add("ut-squad-summary-label"),
        t.appendChild(this.__formationTitle);
        var i = document.createElement("div");
        i.classList.add("rating-inline"),
        this.__labelRating = document.createElement("span"),
        this.__labelRating.classList.add("ut-squad-summary-label"),
        i.appendChild(this.__labelRating),
        this._ratingStars = new UTSquadStarRatingView,
        i.appendChild(this._ratingStars.getRootElement()),
        t.appendChild(i),
        e.appendChild(t),
        this._squadStats = new UTSquadStatsView,
        e.appendChild(this._squadStats.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadSummaryBannerView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__formationTitle = null,
    this.__labelRating = null,
    this._ratingStars.destroy(),
    this._squadStats.destroy()
}
,
UTSquadSummaryBannerView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadOverviewView = function(s) {
    function UTSquadOverviewView() {
        var t = s.call(this) || this;
        return t.animationDuration = 500,
        t._detailsButton = null,
        t.dragEndHandler = function(e) {
            return t.onDragEnd(e)
        }
        ,
        t.dragMoveHandler = function(e) {
            return t.onDragMove(e)
        }
        ,
        t.dragOverHandler = function(e) {
            return t.onDroppable(e)
        }
        ,
        t.dragStartHandler = function(e) {
            return t.onDragStart(e)
        }
        ,
        t.dropHandler = function(e) {
            return t.onDrop(e)
        }
        ,
        t.leftDockClientRect = null,
        t.leftTabClientRect = null,
        t.rightDockClientRect = null,
        t.rightTabClientRect = null,
        t.slotViews = [],
        t.swapCallback = null,
        t._summaryPanel = null,
        t.utilDragDrop = null,
        t.renderConcepts = !0,
        t.renderManager = !0,
        t.renderRestrictions = !0,
        t
    }
    return __extends(UTSquadOverviewView, s),
    Object.defineProperty(UTSquadOverviewView.prototype, "renderChemistry", {
        get: function() {
            return !this._pitch || this._pitch.renderChemistry
        },
        set: function(e) {
            this._pitch && (this._pitch.renderChemistry = e)
        },
        enumerable: !1,
        configurable: !0
    }),
    UTSquadOverviewView.prototype.init = function() {
        s.prototype.init.call(this),
        this._pitch.init();
        var e = this.getSummaryPanel();
        e.init(),
        this.getRootElement().prepend(e.getRootElement()),
        this._initTabViews(),
        this.setInteractionState(!0),
        window.addEventListener(EventType.RESIZE, this.onWindowResize.bind(this), !1)
    }
    ,
    UTSquadOverviewView.prototype.dealloc = function() {
        var e, t, i, o, n, r;
        this.__draggableArea.removeEventListener("eadragstart", this.dragStartHandler),
        this.__draggableArea.removeEventListener("eadragmove", this.dragMoveHandler),
        this.__draggableArea.removeEventListener("eadragover", this.dragOverHandler),
        this.__draggableArea.removeEventListener("eadragend", this.dragEndHandler),
        this.__draggableArea.removeEventListener("eadrop", this.dropHandler),
        s.prototype.dealloc.call(this),
        window.removeEventListener(EventType.RESIZE, this.onWindowResize.bind(this), !1),
        null === (e = this._detailsButton) || void 0 === e || e.dealloc(),
        (this._detailsButton = null) === (t = this.leftTab) || void 0 === t || t.dealloc(),
        null === (i = this.rightTab) || void 0 === i || i.dealloc(),
        null === (o = this.leftDock) || void 0 === o || o.dealloc(),
        null === (n = this.rightDock) || void 0 === n || n.dealloc(),
        this.slotViews = [],
        (this.swapCallback = null) === (r = this._summaryPanel) || void 0 === r || r.dealloc(),
        this._summaryPanel = null,
        this.utilDragDrop = null
    }
    ,
    UTSquadOverviewView.prototype.getSummaryPanel = function() {
        return this._summaryPanel || (this._summaryPanel = new UTSquadSummaryBannerView),
        this._summaryPanel
    }
    ,
    UTSquadOverviewView.prototype.setInteractionState = function(e) {
        s.prototype.setInteractionState.call(this, e),
        this._pitch.setInteractionState(e)
    }
    ,
    UTSquadOverviewView.prototype.setTheme = function(e) {
        this._pitch.setTheme(e)
    }
    ,
    UTSquadOverviewView.prototype.setType = function(e) {
        this._pitch.setType(e)
    }
    ,
    UTSquadOverviewView.prototype.setMode = function(e) {
        this._pitch.setMode(e)
    }
    ,
    UTSquadOverviewView.prototype.setChemistry = function(e) {
        var t;
        null === (t = this._summaryPanel) || void 0 === t || t.setChemistry(e)
    }
    ,
    UTSquadOverviewView.prototype.setChemistryEntries = function(e) {
        var t;
        null === (t = this._summaryPanel) || void 0 === t || t.setChemistryEntries(e)
    }
    ,
    UTSquadOverviewView.prototype.setRating = function(e, t) {
        var i;
        null === (i = this._summaryPanel) || void 0 === i || i.setRating(e, t)
    }
    ,
    UTSquadOverviewView.prototype.setFormation = function(e) {
        var t, i = this, o = this.isInteractionEnabled();
        this.setInteractionState(!1),
        null === (t = this._summaryPanel) || void 0 === t || t.setFormation(e.displayName),
        requestAnimationFrame(function() {
            i._pitch.setFormation(e.name, function() {
                return i.setInteractionState(o)
            })
        })
    }
    ,
    UTSquadOverviewView.prototype.setSquad = function(e) {
        var t, i, o, n = this;
        this._summaryPanel && (this._summaryPanel.setRating(e.getRating()),
        this._summaryPanel.setChemistry(e.getChemistry()));
        var r = this.getSelectedSlot()
          , s = null !== (t = null == r ? void 0 : r.getIndex()) && void 0 !== t ? t : -1
          , a = this.renderManager ? e.getFieldPlayers().concat(e.getManager()) : e.getFieldPlayers();
        this._pitch.setSlots(a, {
            renderConcept: this.renderConcepts,
            renderChemistry: this.renderChemistry,
            renderRestrictions: this.renderRestrictions
        }),
        null === (i = this.leftDock) || void 0 === i || i.setSlots(e.getSubPlayers(), this.renderConcepts, this.renderRestrictions),
        null === (o = this.rightDock) || void 0 === o || o.setSlots(e.getReservePlayers(), this.renderConcepts, this.renderRestrictions),
        this.slotViews = this.getDropSlotViews(),
        this.slotViews.forEach(function(e) {
            e.addTarget(n, n.onSlotTapped, EventType.TAP),
            e.addTarget(n, n.onSlotMouseEnter, EventType.MOUSEENTER),
            e.addTarget(n, n.onSlotMouseLeave, EventType.MOUSELEAVE)
        }),
        0 <= s && this.selectSlot(s);
        var l = e.getFormation();
        l && this.setFormation(l)
    }
    ,
    UTSquadOverviewView.prototype.setSlotInteractionState = function(t, i) {
        this.slotViews.forEach(function(e) {
            return e.toggleClass(i, e.getIndex() === t)
        })
    }
    ,
    UTSquadOverviewView.prototype.removeSlotInteractionState = function(t, e) {
        var i = JSUtils.find(this.slotViews, function(e) {
            return e.getIndex() === t
        });
        null == i || i.removeClass(e)
    }
    ,
    UTSquadOverviewView.prototype.clearSlotInteractionState = function(t) {
        this.slotViews.forEach(function(e) {
            return e.removeClass(t)
        })
    }
    ,
    UTSquadOverviewView.prototype.selectSlot = function(e) {
        this.setSlotInteractionState(e, enums.UISlotInteractionState.SELECTED)
    }
    ,
    UTSquadOverviewView.prototype.getSelectedSlot = function() {
        return JSUtils.find(this.slotViews, function(e) {
            return e.hasClass(enums.UISlotInteractionState.SELECTED)
        })
    }
    ,
    UTSquadOverviewView.prototype.updatePitchChemistry = function(e) {
        this.renderChemistry && this._pitch.updateChemistry(e)
    }
    ,
    UTSquadOverviewView.prototype.updateDocksChemistry = function(e) {
        var t, i;
        this.renderChemistry && (null === (t = this.leftDock) || void 0 === t || t.updateChemistry(e),
        null === (i = this.rightDock) || void 0 === i || i.updateChemistry(e))
    }
    ,
    UTSquadOverviewView.prototype.updateSlot = function(e) {
        var t, i;
        this._pitch.updateSlot(e, this.renderConcepts, this.renderChemistry),
        null === (t = this.leftDock) || void 0 === t || t.updateSlot(e, this.renderConcepts),
        null === (i = this.rightDock) || void 0 === i || i.updateSlot(e, this.renderConcepts)
    }
    ,
    UTSquadOverviewView.prototype.setDockLocalization = function() {
        var e, t, i;
        if (null === (e = this.utilDragDrop) || void 0 === e ? void 0 : e.enabled) {
            var o = services.Localization;
            null === (t = this.leftDock) || void 0 === t || t.setInstructions(o.localize("dock.label.dragSubsIntoPitchToSwap")),
            null === (i = this.rightDock) || void 0 === i || i.setInstructions(o.localize("dock.label.dragResIntoPitchToSwap"))
        }
    }
    ,
    UTSquadOverviewView.prototype._initTabViews = function() {
        var e = this
          , t = services.Localization;
        this.leftDock = new UTSquadSlotDockView,
        this.rightDock = new UTSquadSlotDockView,
        this.leftTab = new UTSquadTabButtonControl,
        this.rightTab = new UTSquadTabButtonControl,
        this.leftTab.init(),
        this.rightTab.init(),
        this.leftDock.init(),
        this.rightDock.init(),
        this.leftTab.addTarget(this, function() {
            return e.onDockBtnPressed(e.leftDock, e.leftTab, UTSquadOverviewView.DropAreas.LEFT_DOCK, e.rightDock)
        }, EventType.TAP),
        this.rightTab.addTarget(this, function() {
            return e.onDockBtnPressed(e.rightDock, e.rightTab, UTSquadOverviewView.DropAreas.RIGHT_DOCK, e.leftDock)
        }, EventType.TAP),
        this.leftTab.setText(t.localize("extendedPlayerInfo.sub")),
        this.leftTab.assignLeft(),
        this.rightTab.setText(t.localize("extendedPlayerInfo.res")),
        this.rightTab.assignRight(),
        this.leftTab.setType(enums.UISquadTabTypes.DOCK_TAB),
        this.rightTab.setType(enums.UISquadTabTypes.DOCK_TAB),
        this.setDockLocalization(),
        this.addSubview(this.leftTab, this.__draggableArea),
        this.addSubview(this.rightTab, this.__draggableArea),
        this.addSubview(this.leftDock, this.__draggableArea),
        this.addSubview(this.rightDock, this.__draggableArea),
        this.layoutSubviews()
    }
    ,
    UTSquadOverviewView.prototype.initDragDrop = function(e, t) {
        this.utilDragDrop ? this.utilDragDrop.disable() : (this.utilDragDrop = new UTDragDropUtils(this.__draggableArea),
        this.__draggableArea.addEventListener("eadragstart", this.dragStartHandler),
        this.__draggableArea.addEventListener("eadragmove", this.dragMoveHandler),
        this.__draggableArea.addEventListener("eadragover", this.dragOverHandler),
        this.__draggableArea.addEventListener("eadragend", this.dragEndHandler),
        this.__draggableArea.addEventListener("eadrop", this.dropHandler),
        this.setupDropContainers()),
        this.setupDropSlots(e, t),
        this.utilDragDrop.enable(),
        this.setDockLocalization()
    }
    ,
    UTSquadOverviewView.prototype.updateDropContainer = function(e) {
        this.utilDragDrop && (this.utilDragDrop.setDroppablesContainer(e),
        this.utilDragDrop.updateCollisionData())
    }
    ,
    UTSquadOverviewView.prototype.getDropSlotViews = function() {
        var e = this._pitch.getSlotViews();
        return this.leftDock && (e = e.concat(this.leftDock.getSlotViews())),
        this.rightDock && (e = e.concat(this.rightDock.getSlotViews())),
        e
    }
    ,
    UTSquadOverviewView.prototype.setupDropSlots = function(s, a) {
        var l = this;
        this.getDropSlotViews().forEach(function(e) {
            var t = e.getItemView();
            if (l.utilDragDrop && t) {
                var i = e.getIndex()
                  , o = 0 <= s.indexOf(i)
                  , n = 0 <= a.indexOf(i)
                  , r = i < UTSquadEntity.FIELD_PLAYERS;
                l.utilDragDrop.setDraggable(t, o),
                l.utilDragDrop.setDroppable(t, n),
                l.utilDragDrop.setSwapAnimation(t, o && r)
            }
        })
    }
    ,
    UTSquadOverviewView.prototype.setupDropContainers = function() {
        var e, t, i;
        null === (e = this.utilDragDrop) || void 0 === e || e.addDropContainer(UTSquadOverviewView.DropAreas.FIELD, this._pitch, !0),
        this.leftDock && (null === (t = this.utilDragDrop) || void 0 === t || t.addDropContainer(UTSquadOverviewView.DropAreas.LEFT_DOCK, this.leftDock)),
        this.rightDock && (null === (i = this.utilDragDrop) || void 0 === i || i.addDropContainer(UTSquadOverviewView.DropAreas.RIGHT_DOCK, this.rightDock))
    }
    ,
    UTSquadOverviewView.prototype.updateDockLayers = function(e) {
        var t, i, o, n, r = e.getRootElement().closest(".ut-squad-slot-dock-view"), s = null !== (i = null === (t = this.leftDock) || void 0 === t ? void 0 : t.getRootElement()) && void 0 !== i ? i : null, a = null !== (n = null === (o = this.rightDock) || void 0 === o ? void 0 : o.getRootElement()) && void 0 !== n ? n : null;
        r && s && r === s ? (s.style.zIndex = "3",
        a && (a.style.zIndex = "2")) : r && a && r === a && (s && (s.style.zIndex = "2"),
        a.style.zIndex = "3")
    }
    ,
    UTSquadOverviewView.prototype.resetDockLayers = function() {
        var e = this.leftDock ? this.leftDock.getRootElement() : null
          , t = this.rightDock ? this.rightDock.getRootElement() : null;
        e && (e.style.zIndex = "2"),
        t && (t.style.zIndex = "2")
    }
    ,
    UTSquadOverviewView.prototype.onWindowResize = function(e) {
        var t;
        this.closeDocks(),
        null === (t = this.utilDragDrop) || void 0 === t || t.updateInteractiveContainer()
    }
    ,
    UTSquadOverviewView.prototype.getSlotByIndex = function(t) {
        var e = this._pitch.getSlotViews();
        return this.leftDock && (e = e.concat(this.leftDock.getSlotViews())),
        this.rightDock && (e = e.concat(this.rightDock.getSlotViews())),
        e.filter(function(e) {
            return e.getIndex() === t
        })[0]
    }
    ,
    UTSquadOverviewView.prototype.onDragStart = function(e) {
        var l = this
          , t = this.getSlotByIndex(e.detail.index);
        this._triggerActions(enums.UISquadPitchEvent.DRAGSTART, e.detail),
        t.addClass("empty"),
        isPhone() || this.setSlotInteractionState(t.getIndex(), enums.UISlotInteractionState.SELECTED),
        this.updateDockLayers(t),
        requestAnimationFrame(function() {
            var e, t, i, o, n, r, s, a;
            l.leftTabClientRect = null !== (t = null === (e = l.leftTab) || void 0 === e ? void 0 : e.getBoundingClientRect()) && void 0 !== t ? t : null,
            l.rightTabClientRect = null !== (o = null === (i = l.rightTab) || void 0 === i ? void 0 : i.getBoundingClientRect()) && void 0 !== o ? o : null,
            l.leftDockClientRect = null !== (r = null === (n = l.leftDock) || void 0 === n ? void 0 : n.getBoundingClientRect()) && void 0 !== r ? r : null,
            l.rightDockClientRect = null !== (a = null === (s = l.rightDock) || void 0 === s ? void 0 : s.getBoundingClientRect()) && void 0 !== a ? a : null
        })
    }
    ,
    UTSquadOverviewView.prototype.onDragMove = function(e) {
        function Gzd(e, t) {
            return !!t && (e.clientY >= t.top && e.clientY <= t.bottom && e.clientX >= t.left && e.clientX <= t.right)
        }
        function Kzd() {
            var e, t, i, o, n;
            r.leftTabClientRect = null !== (t = null === (e = r.leftTab) || void 0 === e ? void 0 : e.getBoundingClientRect()) && void 0 !== t ? t : null,
            r.leftDockClientRect = null !== (o = null === (i = r.leftDock) || void 0 === i ? void 0 : i.getBoundingClientRect()) && void 0 !== o ? o : null,
            null === (n = r.utilDragDrop) || void 0 === n || n.updateCollisionData()
        }
        function Lzd() {
            var e, t, i, o, n;
            r.rightTabClientRect = null !== (t = null === (e = r.rightTab) || void 0 === e ? void 0 : e.getBoundingClientRect()) && void 0 !== t ? t : null,
            r.rightDockClientRect = null !== (o = null === (i = r.rightDock) || void 0 === i ? void 0 : i.getBoundingClientRect()) && void 0 !== o ? o : null,
            null === (n = r.utilDragDrop) || void 0 === n || n.updateCollisionData()
        }
        var t, i, r = this, o = e.detail.touch;
        !function() {
            return !(!r.leftDock && !r.rightDock) && (!function() {
                var e, t, i;
                return null !== (i = (null === (e = r.leftDock) || void 0 === e ? void 0 : e.isAnimating) || (null === (t = r.rightDock) || void 0 === t ? void 0 : t.isAnimating)) && void 0 !== i && i
            }() && !function() {
                var e, t, i;
                return null !== (i = (null === (e = r.leftDock) || void 0 === e ? void 0 : e.isVisible) || (null === (t = r.rightDock) || void 0 === t ? void 0 : t.isVisible)) && void 0 !== i && i
            }())
        }
        .call(this) ? this.leftDockClientRect && (null === (t = this.leftDock) || void 0 === t ? void 0 : t.isVisible) && !this.leftDock.isAnimating && o.clientY < this.leftDockClientRect.top ? this.closeLeftDock(function() {
            return Kzd()
        }) : this.rightDockClientRect && (null === (i = this.rightDock) || void 0 === i ? void 0 : i.isVisible) && !this.rightDock.isAnimating && o.clientY < this.rightDockClientRect.top && this.closeRightDock(function() {
            return Lzd()
        }) : this.leftDock && Gzd(o, this.leftTabClientRect) ? this.openLeftDock(Kzd) : this.rightDock && Gzd(o, this.rightTabClientRect) && this.openRightDock(Lzd)
    }
    ,
    UTSquadOverviewView.prototype.onDroppable = function(e) {
        this._triggerActions(enums.UISquadPitchEvent.DRAGDROPPABLE, e.detail)
    }
    ,
    UTSquadOverviewView.prototype.onDragEnd = function(e) {
        var t, i = this, o = this.getSlotByIndex(e.detail.index), n = o.getItemView();
        if (n)
            if (null === (t = this.utilDragDrop) || void 0 === t ? void 0 : t.moved) {
                var r = n.getRootElement()
                  , s = o.getBoundingClientRect()
                  , a = [{
                    top: s.top + "px",
                    left: s.left + "px"
                }];
                this.setInteractionState(!1),
                this._triggerActions(enums.UISquadPitchEvent.DRAGEND, e.detail),
                r.animate(a, {
                    duration: this.animationDuration
                }).onfinish = function(e) {
                    return i.onDragReset(o)
                }
            } else
                this.onDragReset(o)
    }
    ,
    UTSquadOverviewView.prototype.onDrop = function(e) {
        var t;
        this.clearSlotInteractionState(enums.UISlotInteractionState.SELECTED),
        this.setInteractionState(!1),
        this.swapElements(e.detail.dragging, e.detail.target),
        null === (t = this.utilDragDrop) || void 0 === t || t.updateDropSlotCache(),
        this._triggerActions(enums.UISquadPitchEvent.DRAGDROP, e.detail)
    }
    ,
    UTSquadOverviewView.prototype.onDragReset = function(e) {
        var t, i, o;
        e.removeClass("empty"),
        null === (t = this.utilDragDrop) || void 0 === t || t.resetDrag(),
        (null === (i = this.rightDock) || void 0 === i ? void 0 : i.isVisible) ? this.updateDropContainer(UTSquadOverviewView.DropAreas.RIGHT_DOCK) : (null === (o = this.leftDock) || void 0 === o ? void 0 : o.isVisible) && this.updateDropContainer(UTSquadOverviewView.DropAreas.LEFT_DOCK),
        this.resetDockLayers(),
        this.setInteractionState(!0)
    }
    ,
    UTSquadOverviewView.prototype.swapElements = function(e, t) {
        var i, o = this, n = this.getSlotByIndex(e), r = this.getSlotByIndex(t), s = n.getBoundingClientRect(), a = r.getBoundingClientRect(), l = n.getItemView(), c = r.getItemView(), u = null === (i = null == c ? void 0 : c.hasClass("empty")) || void 0 === i || i, d = null == c ? void 0 : c.getRootElement(), h = null == l ? void 0 : l.getRootElement(), p = [{
            top: a.top + "px",
            left: a.left + "px"
        }], _ = [{
            top: s.top + "px",
            left: s.left + "px"
        }];
        if (c && l && (!u && d && (c.addClass("dropTarget"),
        d.style.left = a.left + "px",
        d.style.top = a.top + "px"),
        r.addClass("empty"),
        n.getRootElement().appendChild(c.getRootElement()),
        r.getRootElement().appendChild(l.getRootElement()),
        h && (h.animate(p, {
            duration: this.animationDuration
        }).onfinish = function(e) {
            return o.onDragReset(r)
        }
        ),
        d)) {
            function HAd() {
                n.removeClass("empty"),
                n.setItemView(c),
                r.setItemView(l),
                o._triggerActions(enums.UISquadPitchEvent.ITEM_SWAP, {
                    swapFrom: e,
                    swapTo: t
                })
            }
            u ? HAd() : (n.addClass("noBackground"),
            d.animate(_, {
                duration: this.animationDuration
            }).onfinish = function(e) {
                c.removeClass("dropTarget"),
                d.style.removeProperty("left"),
                d.style.removeProperty("top"),
                n.removeClass("noBackground"),
                HAd()
            }
            )
        }
    }
    ,
    UTSquadOverviewView.prototype.closeDocks = function(e) {
        this.closeLeftDock(e),
        this.closeRightDock(e)
    }
    ,
    UTSquadOverviewView.prototype.onDockBtnPressed = function(e, t, i, o) {
        !e || !t || null != o && o.isVisible || null != o && o.isAnimating || (e.isVisible ? this.closeDock(e, t) : this.openDock(e, t, i))
    }
    ,
    UTSquadOverviewView.prototype.closeDock = function(e, t, i) {
        DebugUtils.Assert(JSUtils.isValid(e), "variable 'dock' must be valid"),
        DebugUtils.Assert(JSUtils.isValid(t), "variable 'dockTab' must be valid"),
        e.isVisible && !e.isAnimating && (t.setArrowDirection("up"),
        this.updateDropContainer(UTSquadOverviewView.DropAreas.FIELD),
        e.close(i),
        requestAnimationFrame(function() {
            t.getRootElement().style.bottom = "0px"
        }))
    }
    ,
    UTSquadOverviewView.prototype.openDock = function(e, t, i, o) {
        DebugUtils.Assert(JSUtils.isValid(e), "variable 'dock' must be valid"),
        DebugUtils.Assert(JSUtils.isValid(t), "variable 'dockTab' must be valid"),
        e.isVisible || e.isAnimating || (t.setArrowDirection("down"),
        e.open(o),
        requestAnimationFrame(function() {
            t.getRootElement().style.bottom = e.getContentHeight() + "px"
        }),
        this.updateDropContainer(i))
    }
    ,
    UTSquadOverviewView.prototype.closeRightDock = function(e) {
        this.rightDock && this.rightTab && this.closeDock(this.rightDock, this.rightTab, e)
    }
    ,
    UTSquadOverviewView.prototype.closeLeftDock = function(e) {
        this.leftDock && this.leftTab && this.closeDock(this.leftDock, this.leftTab, e)
    }
    ,
    UTSquadOverviewView.prototype.openRightDock = function(e) {
        this.rightDock && this.rightTab && this.openDock(this.rightDock, this.rightTab, UTSquadOverviewView.DropAreas.RIGHT_DOCK, e)
    }
    ,
    UTSquadOverviewView.prototype.openLeftDock = function(e) {
        this.leftDock && this.leftTab && this.openDock(this.leftDock, this.leftTab, UTSquadOverviewView.DropAreas.LEFT_DOCK, e)
    }
    ,
    UTSquadOverviewView.prototype.setSwapCallback = function(e) {
        this.swapCallback = e
    }
    ,
    UTSquadOverviewView.prototype.getPitch = function() {
        return this._pitch
    }
    ,
    UTSquadOverviewView.prototype.getRightTab = function() {
        return this.rightTab
    }
    ,
    UTSquadOverviewView.prototype.getLeftTab = function() {
        return this.leftTab
    }
    ,
    UTSquadOverviewView.prototype.getLeftDock = function() {
        return this.leftDock
    }
    ,
    UTSquadOverviewView.prototype.getRightDock = function() {
        return this.rightDock
    }
    ,
    UTSquadOverviewView.prototype.getDetailsButton = function() {
        return this._detailsButton || (this._detailsButton = new UTFlatButtonControl,
        this._detailsButton.init(),
        this._detailsButton.addClass("pitch-icon"),
        this.addSubview(this._detailsButton, this.__draggableArea),
        this.layoutSubviews()),
        this._detailsButton
    }
    ,
    UTSquadOverviewView.prototype.onSlotTapped = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(enums.UISquadPitchEvent.SLOT_SELECT, {
            slot: e,
            slotIndex: e.getIndex()
        })
    }
    ,
    UTSquadOverviewView.prototype.onSlotMouseEnter = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(EventType.MOUSEENTER, {
            slot: e,
            slotIndex: e.getIndex()
        })
    }
    ,
    UTSquadOverviewView.prototype.onSlotMouseLeave = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(EventType.MOUSELEAVE, {
            slot: e,
            slotIndex: e.getIndex()
        })
    }
    ,
    UTSquadOverviewView.prototype.getShowChemistryButton = function() {
        var e, t;
        return null !== (t = null === (e = this._summaryPanel) || void 0 === e ? void 0 : e.getShowChemistryButton()) && void 0 !== t ? t : null
    }
    ,
    UTSquadOverviewView.DropAreas = Object.freeze({
        FIELD: "field",
        LEFT_DOCK: "leftDock",
        RIGHT_DOCK: "rightDock"
    }),
    UTSquadOverviewView
}(EATargetActionView);
UTSquadOverviewView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-overview"),
        this.__draggableArea = document.createElement("div"),
        this.__draggableArea.classList.add("ut-draggable"),
        this._pitch = new UTSquadPitchView,
        this.__draggableArea.appendChild(this._pitch.getRootElement()),
        e.appendChild(this.__draggableArea),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadOverviewView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__draggableArea = null,
    this._pitch.destroy()
}
,
UTSquadOverviewView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryCondensedEntryView = function(e) {
    function UTSquadChemistryCondensedEntryView() {
        return e.call(this) || this
    }
    return __extends(UTSquadChemistryCondensedEntryView, e),
    UTSquadChemistryCondensedEntryView.prototype.init = function() {
        e.prototype.init.call(this),
        this._badge.init(),
        this._currentPoints.init(),
        this._nextPoints.init()
    }
    ,
    UTSquadChemistryCondensedEntryView.prototype.render = function(e) {
        this.renderIcons(e),
        this.loadAsset(e.typeId, e.metaId),
        this._currentPoints.render(e.points),
        this._nextPoints.render(e.points + 1);
        var t = e.currentThresholdIndex
          , i = e.getThresholdContributionCount(t) - e.getThresholdContributions(t);
        this.__progress.innerHTML = services.Localization.localize("chemistry.nextpoint", [i.toString(), '<span class="fut_icon icon_player_faction counted"></span>'])
    }
    ,
    UTSquadChemistryCondensedEntryView.prototype.renderWithDiff = function(e, t) {
        var i = null;
        if (e ? i = e : t && (i = t),
        i) {
            this.loadAsset(i.typeId, i.metaId),
            this.renderIconsWithDiff(i, e, t),
            this._currentPoints.render(i.points),
            this._nextPoints.render(i.points + 1);
            var o = i.currentThresholdIndex
              , n = i.getThresholdContributionCount(o) - i.getThresholdContributions(o);
            this.__progress.innerHTML = services.Localization.localize("chemistry.nextpoint", [n.toString(), '<span class="fut_icon icon_player_faction counted"></span>'])
        } else
            DebugUtils.Assert(!1, "Asset was called with two null params")
    }
    ,
    UTSquadChemistryCondensedEntryView.prototype.renderIcons = function(e) {
        var t = e.potentialThresholdIndex
          , i = e.currentThresholdIndex
          , o = e.getThresholdContributionCount(i);
        DOMKit.empty(this.__threshold);
        for (var n = 0; n < o; n++) {
            var r = document.createElement("span");
            DOMKit.addClass(r, "fut_icon icon_player_faction"),
            e.getThresholdContributions(i) > n ? DOMKit.addClass(r, "counted") : e.getThresholdPotentialContributions(t) > n && DOMKit.addClass(r, "potential"),
            this.__threshold.appendChild(r)
        }
    }
    ,
    UTSquadChemistryCondensedEntryView.prototype.renderIconsWithDiff = function(e, t, i) {
        var o, n, r = e.potentialThresholdIndex, s = e.getThresholdContributionCount(r);
        DOMKit.empty(this.__threshold);
        for (var a = null !== (o = null == t ? void 0 : t.getThresholdContributions(r)) && void 0 !== o ? o : 0, l = null !== (n = null == i ? void 0 : i.getThresholdContributions(r)) && void 0 !== n ? n : 0, c = 0; c < s; c++) {
            var u = document.createElement("span");
            DOMKit.addClass(u, "fut_icon icon_player_faction"),
            c < a ? l <= c ? DOMKit.addClass(u, "positive") : DOMKit.addClass(u, "counted") : c < l && (a <= l ? DOMKit.addClass(u, "negative") : l < a && DOMKit.addClass(u, "counted")),
            this.__threshold.appendChild(u)
        }
    }
    ,
    UTSquadChemistryCondensedEntryView.prototype.getAssetUri = function(e, t) {
        var i = enums.UIThemeVariation.DARK;
        switch (e) {
        case ChemistryParamId.CLUB:
            return AssetLocationUtils.getBadgeImageUri(t, i);
        case ChemistryParamId.LEAGUE:
            return AssetLocationUtils.getLeagueImageUri(t, i);
        case ChemistryParamId.NATION:
            return AssetLocationUtils.getFlagImageUri(t, i)
        }
    }
    ,
    UTSquadChemistryCondensedEntryView.prototype.loadAsset = function(i, e) {
        var o = this;
        this._badge.onerror = function(e) {
            var t = UTItemEntity.DEFAULT_ASSET_ID;
            o._badge.onerror = null,
            o._badge.src = o.getAssetUri(i, t)
        }
        ,
        this._badge.src = this.getAssetUri(i, e)
    }
    ,
    UTSquadChemistryCondensedEntryView
}(EAView);
UTSquadChemistryCondensedEntryView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-chemistry-condensed-entry");
        var t = document.createElement("div");
        t.classList.add("ut-squad-chemistry-condensed-entry-column"),
        this._badge = new EAImageView,
        this._badge.getRootElement().classList.add("ut-squad-chemistry-condensed-entry--badge"),
        t.appendChild(this._badge.getRootElement()),
        this.__threshold = document.createElement("div"),
        this.__threshold.classList.add("ut-squad-chemistry-condensed-entry--threshold"),
        t.appendChild(this.__threshold),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("ut-squad-chemistry-condensed-entry-column"),
        this._currentPoints = new UTSquadSlotChemistryPointsView,
        this._currentPoints.getRootElement().classList.add("current"),
        this._currentPoints.getRootElement().classList.add("ut-squad-chemistry-condensed-entry--points"),
        i.appendChild(this._currentPoints.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-squad-chemistry-condensed-entry-column"),
        this.__progress = document.createElement("div"),
        this.__progress.classList.add("ut-squad-chemistry-condensed-entry--progress"),
        o.appendChild(this.__progress),
        this._nextPoints = new UTSquadSlotChemistryPointsView,
        this._nextPoints.getRootElement().classList.add("next"),
        this._nextPoints.getRootElement().classList.add("ut-squad-chemistry-condensed-entry--points"),
        o.appendChild(this._nextPoints.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistryCondensedEntryView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._badge.destroy(),
    this.__threshold = null,
    this._currentPoints.destroy(),
    this.__progress = null,
    this._nextPoints.destroy()
}
,
UTSquadChemistryCondensedEntryView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryFullEntryView = function(e) {
    function UTSquadChemistryFullEntryView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTSquadChemistryFullEntryView, e),
    UTSquadChemistryFullEntryView.prototype.render = function(e) {
        this.loadAsset(e.typeId, e.metaId),
        this.renderIcons(e),
        this._entryPointsView.render(e.points, e.potentialPoints)
    }
    ,
    UTSquadChemistryFullEntryView.prototype.renderWithDiff = function(e, t) {
        var i = null;
        e ? i = e : t && (i = t),
        i ? (this.loadAsset(i.typeId, i.metaId),
        this.renderIconsWithDiff(e, t),
        this._entryPointsView.render(i.points, 0)) : DebugUtils.Assert(!1, "Asset was called with two null params")
    }
    ,
    UTSquadChemistryFullEntryView.prototype.renderIcons = function(o) {
        var n = this
          , r = o.contributionThresholds
          , e = [this.__firstThreshold, this.__secondThreshold, this.__thirdThreshold]
          , s = 0;
        this.playerIcons = [],
        e.forEach(function(e, t) {
            for (; s < r[t]; s++) {
                var i = document.createElement("span");
                DOMKit.addClass(i, "fut_icon icon_player_faction"),
                o.contributions > s ? DOMKit.addClass(i, "counted") : o.potentialContributions > s && DOMKit.addClass(i, "potential"),
                e.appendChild(i),
                n.playerIcons.push(i)
            }
        })
    }
    ,
    UTSquadChemistryFullEntryView.prototype.renderIconsWithDiff = function(a, l) {
        var c = this
          , u = [];
        a ? u = a.contributionThresholds : l && (u = l.contributionThresholds);
        var e = [this.__firstThreshold, this.__secondThreshold, this.__thirdThreshold]
          , d = 0;
        this.playerIcons = [],
        e.forEach(function(e, t) {
            for (var i, o; d < u[t]; d++) {
                var n = document.createElement("span");
                DOMKit.addClass(n, "fut_icon icon_player_faction");
                var r = null !== (i = null == a ? void 0 : a.contributions) && void 0 !== i ? i : 0
                  , s = null !== (o = null == l ? void 0 : l.contributions) && void 0 !== o ? o : 0;
                d < r ? s <= d ? DOMKit.addClass(n, "positive") : DOMKit.addClass(n, "counted") : d < s && (r < s ? DOMKit.addClass(n, "negative") : s <= r && DOMKit.addClass(n, "counted")),
                e.appendChild(n),
                c.playerIcons.push(n)
            }
        })
    }
    ,
    UTSquadChemistryFullEntryView.prototype.renderDiamond = function(e, t, i) {
        t <= i && DOMKit.addClass(e, "obtained")
    }
    ,
    UTSquadChemistryFullEntryView
}(UTSquadChemistryBaseEntryView);
UTSquadChemistryFullEntryView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-chemistry-full-entry");
        var t = document.createElement("span");
        t.classList.add("ut-squad-chemistry-full-entry--column");
        var i = document.createElement("div");
        i.classList.add("ut-squad-chemistry-full-entry--badge-container"),
        this._badge = new EAImageView,
        this._badge.getRootElement().classList.add("ut-squad-chemistry-full-entry--badge"),
        i.appendChild(this._badge.getRootElement()),
        t.appendChild(i),
        this.__firstThreshold = document.createElement("span"),
        this.__firstThreshold.classList.add("ut-squad-chemistry-full-entry--threshold"),
        t.appendChild(this.__firstThreshold),
        e.appendChild(t),
        this.__secondThreshold = document.createElement("span"),
        this.__secondThreshold.classList.add("ut-squad-chemistry-full-entry--column"),
        e.appendChild(this.__secondThreshold),
        this.__thirdThreshold = document.createElement("span"),
        this.__thirdThreshold.classList.add("ut-squad-chemistry-full-entry--column"),
        e.appendChild(this.__thirdThreshold),
        this._entryPointsView = new UTSquadSlotChemistryPointsView,
        this._entryPointsView.getRootElement().classList.add("ut-squad-chemistry-full-entry--points"),
        e.appendChild(this._entryPointsView.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistryFullEntryView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._badge.destroy(),
    this.__firstThreshold = null,
    this.__secondThreshold = null,
    this.__thirdThreshold = null,
    this._entryPointsView.destroy()
}
,
UTSquadChemistryFullEntryView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryTutorialView = function(t) {
    function UTSquadChemistryTutorialView() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(UTSquadChemistryTutorialView, t),
    UTSquadChemistryTutorialView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this.__title.textContent = e.localize("squads.chemistry.tutorial.title"),
        this.__content.textContent = e.localize("squads.chemistry.tutorial.description"),
        this.__contributing.textContent = e.localize("squads.chemistry.tutorial.contributing"),
        this.__outOfPosition.textContent = e.localize("squads.chemistry.tutorial.outofposition"),
        this.__noContribution.textContent = e.localize("squads.chemistry.tutorial.nocontribution"),
        this._btnToggle.init(),
        this._btnToggle.addTarget(this, this._eToggle, EventType.TAP),
        this.setOpenState(!0)
    }
    ,
    UTSquadChemistryTutorialView.prototype._eToggle = function(e, t, i) {
        this.setOpenState(!this.isOpen)
    }
    ,
    UTSquadChemistryTutorialView.prototype.setOpenState = function(e) {
        this.isOpen = e,
        this._btnToggle.toggleClass("open", e),
        DOMKit.toggleClass(this.__shelf, "open", e)
    }
    ,
    UTSquadChemistryTutorialView.prototype.setCollapsibleState = function(e) {
        this._btnToggle.setInteractionState(e),
        this._btnToggle.setDisplay(e)
    }
    ,
    UTSquadChemistryTutorialView
}(EATargetActionView);
UTSquadChemistryTutorialView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-chemistry-tutorial-view");
        var t = document.createElement("div");
        t.classList.add("ut-squad-chemistry-tutorial-view--header"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-squad-chemistry-tutorial-view--title"),
        t.appendChild(this.__title),
        this._btnToggle = new UTImageButtonControl,
        t.appendChild(this._btnToggle.getRootElement()),
        e.appendChild(t),
        this.__shelf = document.createElement("div"),
        this.__shelf.classList.add("ut-squad-chemistry-tutorial-view--shelf"),
        this.__content = document.createElement("p"),
        this.__content.classList.add("ut-squad-chemistry-tutorial-view--body"),
        this.__shelf.appendChild(this.__content),
        e.appendChild(this.__shelf);
        var i = document.createElement("div")
          , o = document.createElement("span");
        o.classList.add("counted"),
        o.classList.add("icon_player_faction"),
        o.classList.add("fut_icon"),
        i.appendChild(o),
        this.__contributing = document.createElement("span"),
        i.appendChild(this.__contributing),
        e.appendChild(i);
        var n = document.createElement("div")
          , r = document.createElement("span");
        r.classList.add("potential"),
        r.classList.add("icon_player_faction"),
        r.classList.add("fut_icon"),
        n.appendChild(r),
        this.__outOfPosition = document.createElement("span"),
        n.appendChild(this.__outOfPosition),
        e.appendChild(n);
        var s = document.createElement("div")
          , a = document.createElement("span");
        a.classList.add("icon_player_faction"),
        a.classList.add("fut_icon"),
        s.appendChild(a),
        this.__noContribution = document.createElement("span"),
        s.appendChild(this.__noContribution),
        e.appendChild(s),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistryTutorialView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._btnToggle.destroy(),
    this.__shelf = null,
    this.__content = null,
    this.__contributing = null,
    this.__outOfPosition = null,
    this.__noContribution = null
}
,
UTSquadChemistryTutorialView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryCondensedHeaderView = function(e) {
    function UTSquadChemistryCondensedHeaderView() {
        return e.call(this) || this
    }
    return __extends(UTSquadChemistryCondensedHeaderView, e),
    UTSquadChemistryCondensedHeaderView.prototype.render = function() {
        var e = services.Localization;
        this.__firstColumn.textContent = e.localize("squad.chemistry.condensed.amount-in-squad"),
        this.__secondColumn.textContent = e.localize("squad.chemistry.condensed.current-points"),
        this.__thirdColumn.textContent = e.localize("squad.chemistry.condensed.next-threshold")
    }
    ,
    UTSquadChemistryCondensedHeaderView
}(EAView);
UTSquadChemistryCondensedHeaderView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("condensed"),
        e.classList.add("ut-squad-chemistry-header-view"),
        this.__firstColumn = document.createElement("span"),
        this.__firstColumn.classList.add("ut-squad-chemistry-header-view-column"),
        e.appendChild(this.__firstColumn),
        this.__secondColumn = document.createElement("span"),
        this.__secondColumn.classList.add("ut-squad-chemistry-header-view-column"),
        e.appendChild(this.__secondColumn),
        this.__thirdColumn = document.createElement("span"),
        this.__thirdColumn.classList.add("ut-squad-chemistry-header-view-column"),
        e.appendChild(this.__thirdColumn),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistryCondensedHeaderView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__firstColumn = null,
    this.__secondColumn = null,
    this.__thirdColumn = null
}
,
UTSquadChemistryCondensedHeaderView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryFullHeaderView = function(e) {
    function UTSquadChemistryFullHeaderView() {
        return e.call(this) || this
    }
    return __extends(UTSquadChemistryFullHeaderView, e),
    UTSquadChemistryFullHeaderView.prototype.render = function() {
        this._pointsView1.render(1),
        this._pointsView2.render(2),
        this._pointsView3.render(3)
    }
    ,
    UTSquadChemistryFullHeaderView
}(EAView);
UTSquadChemistryFullHeaderView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("full"),
        e.classList.add("ut-squad-chemistry-header-view");
        var t = document.createElement("span");
        t.classList.add("ut-squad-chemistry-header-view-column"),
        this._pointsView1 = new UTSquadSlotChemistryPointsView,
        this._pointsView1.getRootElement().classList.add("ut-squad-chemistry-header-view-column--points"),
        t.appendChild(this._pointsView1.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("span");
        i.classList.add("ut-squad-chemistry-header-view-column"),
        this._pointsView2 = new UTSquadSlotChemistryPointsView,
        this._pointsView2.getRootElement().classList.add("ut-squad-chemistry-header-view-column--points"),
        i.appendChild(this._pointsView2.getRootElement()),
        e.appendChild(i);
        var o = document.createElement("span");
        o.classList.add("ut-squad-chemistry-header-view-column"),
        this._pointsView3 = new UTSquadSlotChemistryPointsView,
        this._pointsView3.getRootElement().classList.add("ut-squad-chemistry-header-view-column--points"),
        o.appendChild(this._pointsView3.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistryFullHeaderView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._pointsView1.destroy(),
    this._pointsView2.destroy(),
    this._pointsView3.destroy()
}
,
UTSquadChemistryFullHeaderView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryPopupView = function(t) {
    function UTSquadChemistryPopupView() {
        var e = t.call(this) || this;
        return e.entryViews = [],
        e
    }
    return __extends(UTSquadChemistryPopupView, t),
    UTSquadChemistryPopupView.prototype.init = function() {
        t.prototype.init.call(this),
        this._tutorialView.init(),
        this._setupChemToggle(),
        this._closeBtn.init(),
        this._closeBtn.addTarget(this, this.onButtonSelected, EventType.TAP)
    }
    ,
    UTSquadChemistryPopupView.prototype.dealloc = function() {
        this.entryViews.forEach(function(e) {
            return e.dealloc()
        }),
        t.prototype.dealloc.call(this)
    }
    ,
    UTSquadChemistryPopupView.prototype.clearHeaderAndEntries = function() {
        this.entryViews.forEach(function(e) {
            return e.dealloc()
        }),
        this.entryViews = [],
        this.removeSubviews()
    }
    ,
    UTSquadChemistryPopupView.prototype.setChemistry = function(e) {
        var t = services.Localization
          , i = e.toString()
          , o = UTSquadEntity.TOTAL_MAX_CHEM.toString()
          , n = t.localize("squad.chemistry.fraction", [i, o])
          , r = t.localize("squad.chemistry.label") + " " + n;
        this.__titleText.textContent = r
    }
    ,
    UTSquadChemistryPopupView.prototype.setParameterChemistry = function(e, t) {
        var i = this;
        this._fullViewChemToggle.setDisplay(0 < e.length),
        0 == e.length ? this._tutorialView.setCollapsibleState(!1) : (this._tutorialView.setCollapsibleState(!0),
        this.entryViews.forEach(function(e) {
            return e.dealloc()
        }),
        t ? (this.entryViews = e.map(this.generateFullEntryView),
        this.addSubview(this.generateFullHeaderView(), this.__entries)) : (this.entryViews = e.map(this.generateCollapsedEntryView),
        this.addSubview(this.generateCondensedHeaderView(), this.__entries)),
        this.entryViews.forEach(function(e) {
            return i.addSubview(e, i.__entries)
        }),
        this.layoutSubviews())
    }
    ,
    UTSquadChemistryPopupView.prototype.generateCondensedHeaderView = function() {
        var e = new UTSquadChemistryCondensedHeaderView;
        return e.init(),
        e.render(),
        e
    }
    ,
    UTSquadChemistryPopupView.prototype.generateFullHeaderView = function() {
        var e = new UTSquadChemistryFullHeaderView;
        return e.init(),
        e.render(),
        e
    }
    ,
    UTSquadChemistryPopupView.prototype.generateCollapsedEntryView = function(e) {
        var t = new UTSquadChemistryCondensedEntryView;
        return t.init(),
        t.render(e),
        t
    }
    ,
    UTSquadChemistryPopupView.prototype.generateFullEntryView = function(e) {
        var t = new UTSquadChemistryFullEntryView;
        return t.init(),
        t.render(e),
        t
    }
    ,
    UTSquadChemistryPopupView.prototype._setupChemToggle = function() {
        this._fullViewChemToggle.init(),
        this._fullViewChemToggle.addToggleCell(UTSquadChemistryPopupView.CHEM_FULLVIEW_SLIDER, services.Localization.localize("squad.chemistry.fullview.title")),
        this._fullViewChemToggle.setDisplay(!1)
    }
    ,
    UTSquadChemistryPopupView.prototype.onButtonSelected = function(e, t, i) {
        e === this._closeBtn && this._triggerActions(UTSquadChemistryPopupView.Event.CLOSE)
    }
    ,
    UTSquadChemistryPopupView.prototype.getCollapsedChemToggle = function() {
        return this._fullViewChemToggle
    }
    ,
    UTSquadChemistryPopupView.Event = Object.freeze({
        CLOSE: "UTSquadChemistryPopupView.CLOSE"
    }),
    UTSquadChemistryPopupView.CHEM_FULLVIEW_SLIDER = "chemFullEnabled",
    UTSquadChemistryPopupView
}(EATargetActionView);
UTSquadChemistryPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-chemistry-popup-view");
        var t = document.createElement("header");
        this.__titleText = document.createElement("h1"),
        t.appendChild(this.__titleText),
        this._closeBtn = new UTImageButtonControl,
        this._closeBtn.getRootElement().classList.add("exit-btn"),
        t.appendChild(this._closeBtn.getRootElement()),
        e.appendChild(t),
        this.__body = document.createElement("div"),
        this.__body.classList.add("bodySection");
        var i = document.createElement("div");
        i.classList.add("tutorialSection"),
        this._tutorialView = new UTSquadChemistryTutorialView,
        i.appendChild(this._tutorialView.getRootElement()),
        this._fullViewChemToggle = new UTToggleControlGroupView,
        i.appendChild(this._fullViewChemToggle.getRootElement()),
        this.__body.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("entriesSection"),
        this.__entries = document.createElement("div"),
        this.__entries.classList.add("ut-squad-chemistry-popup-view--entries"),
        o.appendChild(this.__entries),
        this.__body.appendChild(o),
        e.appendChild(this.__body),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadChemistryPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__titleText = null,
    this._closeBtn.destroy(),
    this.__body = null,
    this._tutorialView.destroy(),
    this._fullViewChemToggle.destroy(),
    this.__entries = null
}
,
UTSquadChemistryPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadChemistryPopupViewController = function(t) {
    function UTSquadChemistryPopupViewController() {
        var e = t.call(this) || this;
        return e.isFullViewToggled = !1,
        e
    }
    return __extends(UTSquadChemistryPopupViewController, t),
    UTSquadChemistryPopupViewController.prototype.viewDidAppear = function() {
        var e = this.getView();
        t.prototype.viewDidAppear.call(this),
        e.getCollapsedChemToggle().layoutSubviews(),
        e.getCollapsedChemToggle().addTarget(this, this.eChemFullViewToggled, EventType.CHANGE),
        e.getCollapsedChemToggle().toggleById(UTSquadChemistryPopupView.CHEM_FULLVIEW_SLIDER, !1),
        e.layoutSubviews(),
        e.addTarget(this, this.handleClose, UTSquadChemistryPopupView.Event.CLOSE)
    }
    ,
    UTSquadChemistryPopupViewController.prototype.viewWillDisappear = function() {
        var e = this.getView();
        t.prototype.viewWillDisappear.call(this),
        e.getCollapsedChemToggle().removeTarget(this, this.eChemFullViewToggled, EventType.CHANGE),
        e.removeTarget(this, this.handleClose, UTSquadChemistryPopupView.Event.CLOSE)
    }
    ,
    UTSquadChemistryPopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTSquadChemistryPopupView
    }
    ,
    UTSquadChemistryPopupViewController.prototype.handleClose = function(e, t, i) {
        this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTSquadChemistryPopupViewController.prototype.handleKeyUpEvent = function(e) {
        e.key !== KeyboardKey.ESCAPE && e.key !== KeyboardKey.MS_ESCAPE || this.onExit.notify(enums.UIDialogOptions.CANCEL)
    }
    ,
    UTSquadChemistryPopupViewController.prototype.setChemistry = function(e) {
        var t = e.getChemistry()
          , i = e.getSortedParameterChemistry();
        this.currentSquadParameterVO = i;
        var o = this.getView();
        o.setChemistry(t),
        o.setParameterChemistry(i, this.isFullViewToggled)
    }
    ,
    UTSquadChemistryPopupViewController.prototype.eChemFullViewToggled = function(e, t, i) {
        if (i.id === UTSquadChemistryPopupView.CHEM_FULLVIEW_SLIDER) {
            var o = this.getView();
            o.clearHeaderAndEntries(),
            i.checked ? this.isFullViewToggled = !0 : this.isFullViewToggled = !1,
            o.setParameterChemistry(this.currentSquadParameterVO, this.isFullViewToggled)
        }
    }
    ,
    UTSquadChemistryPopupViewController
}(BasePopupViewController)
  , UTSquadOverviewViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
_this = this,
function(r) {
    function UTSquadOverviewViewController() {
        var e = r.call(this) || this;
        return e.onDragEnd = new EAObservable,
        e.onItemMove = new EAObservable,
        e.onItemSwap = new EAObservable,
        e._squad = null,
        e._squadOverviewDelegate = null,
        e
    }
    return __extends(UTSquadOverviewViewController, r),
    UTSquadOverviewViewController.prototype.init = function() {
        if (!this.initialized) {
            r.prototype.init.call(this);
            var e = this.getView();
            getAppMain().getConfigRepository().getConfigBoolean(EAConfigurationRepository.KEY_WINTER_THEME) && e.setTheme("winter")
        }
    }
    ,
    UTSquadOverviewViewController.prototype.initWithSquad = function(e) {
        this.initialized || (this._squad = e,
        this._squad.onDataUpdated.observe(this, this._eSquadDataChange),
        this.init())
    }
    ,
    UTSquadOverviewViewController.prototype.dealloc = function() {
        this.onItemMove.dealloc(),
        this.onItemSwap.dealloc(),
        this.onDragEnd.dealloc(),
        this._squad && (this._squad.onDataUpdated.unobserve(this),
        this._squad = null),
        this._squadOverviewDelegate = null,
        r.prototype.dealloc.call(this)
    }
    ,
    UTSquadOverviewViewController.prototype._getViewInstanceFromData = function() {
        return new UTSquadOverviewView
    }
    ,
    UTSquadOverviewViewController.prototype._getTelemetryId = function() {
        return "Squads - Squad Overview"
    }
    ,
    UTSquadOverviewViewController.prototype._trackPageView = function() {
        TelemetryManager.trackPage(TelemetryManager.Sections.SQUADS, this._getTelemetryId())
    }
    ,
    UTSquadOverviewViewController.prototype.getNavigationTitle = function() {
        var e, t;
        return null !== (t = null === (e = this._squad) || void 0 === e ? void 0 : e.getName()) && void 0 !== t ? t : BLANK_STR
    }
    ,
    UTSquadOverviewViewController.prototype.viewDidAppear = function() {
        var e, t, i, o = this.getView(), n = null !== (t = null === (e = this._squad) || void 0 === e ? void 0 : e.isTOTW()) && void 0 !== t && t;
        r.prototype.viewDidAppear.call(this),
        DebugUtils.Assert(this._squad instanceof UTSquadEntity, "View appearing on screen without a squad to display."),
        this._squad && this._pushSquadToView(this._squad),
        isPhone() && !n && o.getDetailsButton().addTarget(this, this._eDetailsButtonSelected, EventType.TAP),
        o.getPitch().addTarget(this, this._ePitchTapped, EventType.TAP),
        null === (i = o.getShowChemistryButton()) || void 0 === i || i.addTarget(this, this._showChemistry, EventType.TAP),
        o.addTarget(this, this._eItemTap, enums.UISquadPitchEvent.SLOT_SELECT),
        o.addTarget(this, this._eItemSwap, enums.UISquadPitchEvent.ITEM_SWAP),
        o.addTarget(this, this._eDragStart, enums.UISquadPitchEvent.DRAGSTART),
        o.addTarget(this, this._eDragEnd, enums.UISquadPitchEvent.DRAGEND),
        o.addTarget(this, this._eItemMouseEnter, EventType.MOUSEENTER),
        o.addTarget(this, this._eItemMouseLeave, EventType.MOUSELEAVE),
        getDefaultDispatcher().addObserver(AppNotification.UI_ITEM_STATE_CHANGE, this, this._nInfoStateChanged),
        this._trackPageView()
    }
    ,
    UTSquadOverviewViewController.prototype.viewWillDisappear = function() {
        var e, t, i, o = this.getView(), n = null !== (t = null === (e = this._squad) || void 0 === e ? void 0 : e.isTOTW()) && void 0 !== t && t;
        r.prototype.viewWillDisappear.call(this),
        getDefaultDispatcher().removeObserver(AppNotification.UI_ITEM_STATE_CHANGE, this),
        o.getPitch().removeTarget(this, this._ePitchTapped, EventType.TAP),
        isPhone() && !n && o.getDetailsButton().removeTarget(this, this._eDetailsButtonSelected, EventType.TAP),
        null === (i = o.getShowChemistryButton()) || void 0 === i || i.removeTarget(this, this._showChemistry, EventType.TAP),
        o.removeTarget(this, this._eItemTap, enums.UISquadPitchEvent.SLOT_SELECT),
        o.removeTarget(this, this._eItemSwap, enums.UISquadPitchEvent.ITEM_SWAP),
        o.removeTarget(this, this._eDragStart, enums.UISquadPitchEvent.DRAGSTART),
        o.removeTarget(this, this._eDragEnd, enums.UISquadPitchEvent.DRAGEND),
        o.removeTarget(this, this._eItemMouseEnter, EventType.MOUSEENTER),
        o.removeTarget(this, this._eItemMouseLeave, EventType.MOUSELEAVE)
    }
    ,
    UTSquadOverviewViewController.prototype.onWindowSizeChange = function() {
        this.getView().closeDocks()
    }
    ,
    UTSquadOverviewViewController.prototype._updateDragDrop = function() {
        var e, t, i = null !== (t = null === (e = this._squad) || void 0 === e ? void 0 : e.getNonBrickSlots(!0)) && void 0 !== t ? t : [];
        this.getView().initDragDrop(i.filter(function(e) {
            return e.isValid()
        }).map(function(e) {
            return e.index
        }), i.map(function(e) {
            return e.index
        }))
    }
    ,
    UTSquadOverviewViewController.prototype._pushSquadToView = function(e) {
        var t = this.getView();
        t.setType(e.isDream() ? "concept" : "standard"),
        t.setSquad(e),
        t.setChemistryEntries(e.getSortedParameterChemistry()),
        this._updateDragDrop()
    }
    ,
    UTSquadOverviewViewController.prototype._showChemistry = function(e, t, i) {
        if (this._squad) {
            var o = new UTSquadChemistryPopupViewController;
            o.modalDisplayDimensions.width = "360px",
            o.init(),
            o.setChemistry(this._squad),
            gPopupClickShield.setActivePopup(o)
        }
    }
    ,
    UTSquadOverviewViewController.prototype.setSquadOverviewDelegate = function(e) {
        this._squadOverviewDelegate = e
    }
    ,
    UTSquadOverviewViewController.prototype.setSquadById = function(e) {
        var n = this;
        services.Squad.requestSquadById(e).observe(this, function(e, t) {
            var i, o;
            e.unobserve(n),
            DebugUtils.Assert((null === (i = t.data) || void 0 === i ? void 0 : i.squad)instanceof UTSquadEntity, "Missing squad entity."),
            t.success && (null === (o = t.data) || void 0 === o ? void 0 : o.squad) && n.setSquad(t.data.squad)
        })
    }
    ,
    UTSquadOverviewViewController.prototype._setSquad = function(e) {
        this._squad && this._squad.onDataUpdated.unobserve(this),
        this._squad = e,
        this._squad.onDataUpdated.observe(this, this._eSquadDataChange)
    }
    ,
    UTSquadOverviewViewController.prototype.setSquad = function(e) {
        this._setSquad(e),
        this._pushSquadToView(e)
    }
    ,
    UTSquadOverviewViewController.prototype.selectSlot = function(e) {
        this.getView().selectSlot(e)
    }
    ,
    UTSquadOverviewViewController.prototype.updateSlot = function(e) {
        this.getView().updateSlot(e)
    }
    ,
    UTSquadOverviewViewController.prototype._gotoDetailsView = function(e) {
        var t = this.getNavigationController();
        if (t) {
            var i = new UTSquadItemDetailsNavigationController;
            this._squad ? i.initWithSquad(this._squad, e) : i.init(),
            i.setNavigationStyle(UTNavigationBarView.Style.SECONDARY),
            t.pushViewController(i)
        }
    }
    ,
    UTSquadOverviewViewController.prototype.applyDataChange = function() {
        this._squad && this._pushSquadToView(this._squad)
    }
    ,
    UTSquadOverviewViewController.prototype._eSquadDataChange = function(e, t) {
        var i;
        if (this._squad && this.isViewDisplayed()) {
            var o = this.getView();
            if (t.type && o.setType(t.type === SquadType.CONCEPT ? "concept" : "standard"),
            JSUtils.isNumber(t.chemistry) && (o.setChemistry(t.chemistry),
            o.setChemistryEntries(this._squad.getSortedParameterChemistry())),
            JSUtils.isNumber(t.rating) && o.setRating(t.rating, !0),
            Array.isArray(t.slots))
                if (t.slots.forEach(this.updateSlot, this),
                this._updateDragDrop(),
                !t.formation)
                    o.updatePitchChemistry(this._squad.getFieldPlayers()),
                    JSUtils.isValid(JSUtils.find(t.slots, function(e) {
                        return e.item.isManager()
                    })) && o.updateDocksChemistry(this._squad.getSubAndReservePlayers());
            if (t.formation && o.setFormation(t.formation),
            t.name && (null === (i = this.getNavigationController()) || void 0 === i || i.setNavigationTitle(t.name)),
            t.tactics)
                t.tactics.mentality.getState() === TacticState.ACTIVE && this._squad.getPlayers().forEach(function(e) {
                    o.updateSlot(e)
                })
        }
    }
    ,
    UTSquadOverviewViewController.prototype._eItemTap = function(e, t, i) {
        var o = i.slotIndex;
        this._squad && 0 <= this._squad.simpleBrickIndices.indexOf(o) || (this._squad && this._squadOverviewDelegate ? this._squadOverviewDelegate.selectSlotIndexForSquad(this, this._squad, o) : this._gotoDetailsView(o))
    }
    ,
    UTSquadOverviewViewController.prototype._eItemSwap = function(e, t, i) {
        var o = i.swapFrom
          , n = i.swapTo
          , r = e;
        if (r.removeSlotInteractionState(o, enums.UISlotInteractionState.HOVER),
        r.removeSlotInteractionState(n, enums.UISlotInteractionState.HOVER),
        this._squad) {
            var s = this._squad.getSlot(o)
              , a = this._squad.getSlot(n)
              , l = s.generalPosition == PlayerPosition.GK
              , c = a.generalPosition == PlayerPosition.GK
              , u = s.item.isCarson()
              , d = a.item.isCarson();
            if (l && d || c && u)
                return utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.PLAYER_NOT_ELIGIBLE, {
                    params: []
                }),
                this.updateSlot(s),
                this.updateSlot(a),
                void this._updateDragDrop();
            this._squad.swapPlayersByIndex(o, n),
            this._squad.save(),
            this.onItemSwap.notify(o, n),
            r.updatePitchChemistry(this._squad.getFieldPlayers())
        }
    }
    ,
    UTSquadOverviewViewController.prototype._eDragStart = function(e, t, i) {
        this._squad && this.onItemMove.notify(this._squad.getSlot(i.index).item)
    }
    ,
    UTSquadOverviewViewController.prototype._eDragEnd = function(e, t, i) {
        this._squad && this.onDragEnd.notify(this._squad.getSlot(i.index).item)
    }
    ,
    UTSquadOverviewViewController.prototype._ePitchTapped = function(e, t, i) {
        var o = this.getView();
        o.clearSlotInteractionState(enums.UISlotInteractionState.SELECTED),
        o.closeDocks()
    }
    ,
    UTSquadOverviewViewController.prototype._eItemMouseEnter = function(e, t, i) {
        this.getView().setSlotInteractionState(i.slotIndex, enums.UISlotInteractionState.HOVER)
    }
    ,
    UTSquadOverviewViewController.prototype._eItemMouseLeave = function(e, t, i) {
        this.getView().removeSlotInteractionState(i.slotIndex, enums.UISlotInteractionState.HOVER)
    }
    ,
    UTSquadOverviewViewController.prototype._eDetailsButtonSelected = function(e, t, i) {
        var o = this.getNavigationController();
        if (o) {
            var n = new UTSquadActionsViewController;
            this._squad ? n.initWithSquad(this._squad) : n.init(),
            n.setSquadContext(!0),
            o.pushViewController(n)
        }
    }
    ,
    UTSquadOverviewViewController.prototype._nInfoStateChanged = function(e, t, i) {
        TelemetryManager.trackEvent(TelemetryManager.Sections.SQUADS, TelemetryManager.Categories.BUTTON_PRESS, "Item Info Switch Button - Squad")
    }
    ,
    UTSquadOverviewViewController
}(EAViewController));
services.URL.registerDeepLinkID(DeepLinkSection.ACTIVE_SQUAD, function(e) {
    var t, i = getAppMain().getRootViewController();
    i.setGameViewTab(UTGameTabBarController.TabTag.SQUADS);
    var n = null === (t = i.getPresentedViewController()) || void 0 === t ? void 0 : t.getCurrentViewController();
    n && (gClickShield.showShield(EAClickShieldView.Shield.LOADING),
    services.Squad.requestSquadByType("active").observe(_this, function(e, t) {
        var i;
        if (e.unobserve(_this),
        t.success && (null === (i = t.data) || void 0 === i ? void 0 : i.squad)) {
            var o = isPhone() ? new UTSquadOverviewViewController : new UTSquadSplitViewController;
            o.initWithSquad(t.data.squad),
            null == n || n.pushViewController(o)
        } else
            services.Notification.queue([services.Localization.localize("notification.squad.failedToLoad"), UINotificationType.NEGATIVE]);
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
    }))
});
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTransferSectionListViewModel = function(i) {
    function UTTransferSectionListViewModel(e) {
        var t = i.call(this, e) || this;
        return t.refreshActiveTrades = !1,
        t.setSection(UTTransferSectionListViewModel.SECTION.SOLD, function(e) {
            return e.getAuctionData().isSold()
        }, UTTransferSectionListViewModel.SECTION.SOLD),
        t.setSection(UTTransferSectionListViewModel.SECTION.UNSOLD, function(e) {
            var t = e.getAuctionData();
            return t.isExpired() || t.isValid() && t.isInactive()
        }, UTTransferSectionListViewModel.SECTION.UNSOLD),
        t.setSection(UTTransferSectionListViewModel.SECTION.AVAILABLE, function(e) {
            return !e.getAuctionData().isValid()
        }, UTTransferSectionListViewModel.SECTION.AVAILABLE),
        t.setSection(UTTransferSectionListViewModel.SECTION.ACTIVE, function(e) {
            return e.getAuctionData().isActiveTrade()
        }, UTTransferSectionListViewModel.SECTION.ACTIVE),
        t.organizeItems(),
        t
    }
    return __extends(UTTransferSectionListViewModel, i),
    UTTransferSectionListViewModel.prototype.startAuctionUpdates = function() {
        this.refreshActiveTrades && (this.values().forEach(function(e) {
            var t = e.getAuctionData();
            t.isActiveTrade() && t.setStale(!0)
        }, this),
        this.refreshActiveTrades = !1),
        i.prototype.startAuctionUpdates.call(this)
    }
    ,
    UTTransferSectionListViewModel.prototype.hasSoldItems = function() {
        return -1 < this.indexOf(function(e) {
            return e.getAuctionData().isSold()
        })
    }
    ,
    UTTransferSectionListViewModel.prototype.getSoldItems = function() {
        return this.values().filter(function(e) {
            return e.getAuctionData().isSold()
        })
    }
    ,
    UTTransferSectionListViewModel.prototype.hasUnsoldItems = function() {
        return -1 < this.indexOf(function(e) {
            var t = e.getAuctionData();
            return t.isExpired() || t.isValid() && t.isInactive()
        })
    }
    ,
    UTTransferSectionListViewModel.prototype.getUnsoldItems = function() {
        return this.values().filter(function(e) {
            var t = e.getAuctionData();
            return t.isExpired() || t.isValid() && t.isInactive()
        })
    }
    ,
    UTTransferSectionListViewModel.prototype.getActiveItems = function() {
        return this.values().filter(function(e) {
            return e.getAuctionData().isActiveTrade()
        })
    }
    ,
    UTTransferSectionListViewModel.SECTION = {
        SOLD: 0,
        UNSOLD: 1,
        AVAILABLE: 2,
        ACTIVE: 3
    },
    UTTransferSectionListViewModel
}(UTItemSectionListViewModel)
  , UTTransferListView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTTransferListView() {
        var e = t.call(this) || this;
        return e.sections = [],
        e.emptyListView = null,
        e
    }
    return __extends(UTTransferListView, t),
    UTTransferListView.prototype.dealloc = function() {
        var e;
        this.emptyListView && (null === (e = this.emptyListView) || void 0 === e || e.dealloc(),
        this.emptyListView = null),
        this.clearSections(),
        t.prototype.dealloc.call(this)
    }
    ,
    UTTransferListView.prototype.clearSections = function() {
        this.sections.forEach(function(e) {
            return e.dealloc()
        }),
        this.sections = []
    }
    ,
    UTTransferListView.prototype.renderSection = function(e, t, i) {
        var o = this.sections[t];
        o ? o.clearList() : ((o = new UTSectionedItemListView).init(),
        this.sections[t] = o),
        o.addItems(e, i),
        o.render();
        var n = this.getRootElement();
        return DOMKit.empty(n),
        this.sections.forEach(function(e) {
            return n.appendChild(e.getRootElement())
        }),
        o
    }
    ,
    UTTransferListView.prototype.getSection = function(e) {
        return this.sections[e] || null
    }
    ,
    UTTransferListView.prototype.renderEmptyView = function(e, t, i) {
        this.clearSections(),
        this.emptyListView = new UTListNoResultsView,
        this.emptyListView.init(),
        this.emptyListView.setHeading(e),
        this.emptyListView.setDescription(services.Localization.localize("popup.error.noresults.description")),
        JSUtils.isFunction(i) && this.emptyListView.setupButton(t, i),
        this.getRootElement().appendChild(this.emptyListView.getRootElement())
    }
    ,
    UTTransferListView.prototype.onTimedUpdate = function() {
        this.sections.forEach(function(e) {
            return e.onTimedUpdate()
        })
    }
    ,
    UTTransferListView.prototype.selectListRow = function(t) {
        this.sections.forEach(function(e) {
            return e.selectRowByItemId(t)
        })
    }
    ,
    UTTransferListView.prototype.removeItemsById = function(t) {
        this.sections.forEach(function(e) {
            return e.removeItemsById(t)
        })
    }
    ,
    UTTransferListView
}(EAView));
function UTTransferListViewController() {
    EAViewController.call(this),
    this.selectedIndex = -1,
    this._viewmodel = new UTTransferSectionListViewModel([]),
    this.onDataChange = new EAObservable,
    Object.defineProperty(this, "onDataChange", {
        writable: !1,
        enumerable: !0
    }),
    this.onItemSelected = new EAObservable,
    Object.defineProperty(this, "onItemSelected", {
        writable: !1,
        enumerable: !0
    }),
    this.onSearchClub = new EAObservable,
    Object.defineProperty(this, "onSearchClub", {
        writable: !1,
        enumerable: !0
    })
}
UTTransferListView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-transfer-list-view"),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTransferListView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null
}
,
UTTransferListView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
,
JSUtils.inherits(UTTransferListViewController, EAViewController),
UTTransferListViewController.prototype.dealloc = function dealloc() {
    this.onDataChange.dealloc(),
    this.onItemSelected.dealloc(),
    this.superclass()
}
,
UTTransferListViewController.prototype._getViewInstanceFromData = function _getViewInstanceFromData() {
    return new UTTransferListView
}
,
UTTransferListViewController.prototype._getTelemetryId = function _getTelemetryId() {
    return "Transfer List - List View"
}
,
UTTransferListViewController.prototype.getNavigationTitle = function getNavigationTitle() {
    return services.Localization.localize("nav.label.transferList")
}
,
UTTransferListViewController.prototype.viewDidAppear = function viewDidAppear() {
    this.superclass(),
    getDefaultDispatcher().addObserver(AppNotification.UI_ITEM_STATE_CHANGE, this, this._nInfoStateChanged),
    this._viewmodel.dataUpdated.observe(this, this._eViewmodelDataUpdated),
    this._requestItems(isPhone()),
    TelemetryManager.trackPage(TelemetryManager.Sections.AUCTIONS, "Transfer List")
}
,
UTTransferListViewController.prototype.viewWillDisappear = function viewWillDisappear() {
    this.superclass(),
    getDefaultDispatcher().removeObserver(AppNotification.UI_ITEM_STATE_CHANGE, this),
    this._viewmodel && (this._viewmodel.dataUpdated.unobserve(this),
    this._viewmodel.stopAuctionUpdates())
}
,
UTTransferListViewController.prototype.getIterator = function getIterator() {
    return this._viewmodel
}
,
UTTransferListViewController.prototype._requestItems = function _requestItems(e) {
    var n = this.getView()
      , r = !JSUtils.isBoolean(e) || e
      , s = services.User.getUser().hasTradeAccess();
    r && s && this._viewmodel.stopAuctionUpdates(),
    n.setInteractionState(!1),
    services.Item.requestTransferItems().observe(this, function _onRequestItemsComplete(e, t) {
        e.unobserve(this);
        var i = 0 < this._viewmodel.values().length;
        if (t.success) {
            var o = this._viewmodel.getIndex();
            this._viewmodel.resetCollection([]),
            this._viewmodel.addArray(t.response.items),
            0 <= o && 0 <= this._viewmodel.getLastIndex() && this._viewmodel.setIndex(Math.min(o, this._viewmodel.getLastIndex())),
            this.onDataChange.notify({
                items: this._viewmodel.values()
            }),
            this._renderView(),
            0 < this._viewmodel.values().length && !isPhone() && n.selectListRow(this._viewmodel.current().id),
            n.setInteractionState(!0)
        } else
            services.Notification.queue([services.Localization.localize("notification.transferList.failedToLoad"), UINotificationType.NEGATIVE]),
            this.getNavigationController().popViewController(!0);
        this._viewmodel.refreshActiveTrades = !i && s,
        r && s && this._viewmodel.startAuctionUpdates()
    })
}
,
UTTransferListViewController.prototype.removeItemsById = function removeItemsById(e) {
    if (0 < this._viewmodel.length) {
        var t = this.getView();
        t.removeItemsById(e),
        t.selectListRow(this._viewmodel.current().id),
        this._updateSectionHeaders()
    } else
        this._renderView()
}
,
UTTransferListViewController.prototype.refreshList = function refreshList() {
    repositories.Item.setDirty(ItemPile.TRANSFER),
    this._requestItems()
}
,
UTTransferListViewController.prototype._updateSectionHeaders = function _updateSectionHeaders() {
    var e = this.getView()
      , t = e.getSection(UTTransferSectionListViewModel.SECTION.SOLD)
      , i = e.getSection(UTTransferSectionListViewModel.SECTION.UNSOLD)
      , o = e.getSection(UTTransferSectionListViewModel.SECTION.AVAILABLE)
      , n = this._viewmodel.hasSoldItems()
      , r = this._viewmodel.hasUnsoldItems()
      , s = repositories.Item.isPileFull(ItemPile.TRANSFER);
    if (t && (t.setActionHeader(services.Localization.localize("tradepile.dock.categories.expired.sold"), services.Localization.localize("tradepile.label.clearsolditems"), n ? this._clearSold.bind(this) : null),
    t.toggleHeaderButton(n)),
    i) {
        var a = services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED) && services.User.getUser().hasTradeAccess();
        i.setActionHeader(services.Localization.localize("tradepile.dock.categories.expired.notsold"), services.Localization.localize("tradepile.button.relistall"), a && r ? this._relistAll.bind(this) : null),
        i.toggleHeaderButton(a && r)
    }
    o && o.toggleHeaderButtonEnabled(!s)
}
,
UTTransferListViewController.prototype._renderView = function _renderView() {
    var r = this.getView();
    function _rowTapCallback(t) {
        var e = this._viewmodel.indexOf(function(e) {
            return e.id === t.id
        });
        if (this._viewmodel.setIndex(e),
        isPhone()) {
            var i = t.getAuctionData();
            if (!services.Configuration.checkFeatureEnabled(UTServerSettingsRepository.KEY.TRADING_ENABLED) && (i.isActiveTrade() || i.isClosedTrade()))
                return void utils.PopupManager.showAlert(utils.PopupManager.Alerts.TRADING_DISABLED);
            var o = this.getNavigationController();
            if (o) {
                var n = new UTItemDetailsViewController;
                n.initWithIterator(this._viewmodel),
                o.pushViewController(n, !0)
            }
        } else
            r.selectListRow(t.id),
            e != this.selectedIndex && (this.selectedIndex = e,
            this.onItemSelected.notify(e))
    }
    r.clearSections(),
    this.selectedIndex = -1,
    r.renderSection(this._viewmodel.getSectionItems(UTTransferSectionListViewModel.SECTION.SOLD), UTTransferSectionListViewModel.SECTION.SOLD, _rowTapCallback.bind(this)).setEmptyMessage(services.Localization.localize("tradepile.sold.empty.header"), services.Localization.localize("tradepile.sold.empty.body")),
    r.renderSection(this._viewmodel.getSectionItems(UTTransferSectionListViewModel.SECTION.UNSOLD), UTTransferSectionListViewModel.SECTION.UNSOLD, _rowTapCallback.bind(this)).setEmptyMessage(services.Localization.localize("tradepile.unsold.empty.header"), services.Localization.localize("tradepile.unsold.empty.body"));
    var e = r.renderSection(this._viewmodel.getSectionItems(UTTransferSectionListViewModel.SECTION.AVAILABLE), UTTransferSectionListViewModel.SECTION.AVAILABLE, _rowTapCallback.bind(this));
    e.setActionHeader(services.Localization.localize("tradepile.dock.categories.available"), services.Localization.localize("infopanel.label.addplayer"), function _eOnAddAvailableItems() {
        if (isPhone()) {
            var e = this.getNavigationController();
            if (e) {
                var t = new UTTransferListNavigationController;
                t.init(),
                t.setNavigationStyle(UTNavigationBarView.Style.SECONDARY),
                e.pushViewController(t, !0)
            }
        } else
            this.onSearchClub.notify()
    }
    .bind(this)),
    e.setEmptyMessage(services.Localization.localize("tradepile.availableitems.empty.header"), services.Localization.localize("tradepile.availableitems.empty.body"));
    var t = repositories.Item.isPileFull(ItemPile.TRANSFER);
    e.toggleHeaderButtonEnabled(!t);
    var i = r.renderSection(this._viewmodel.getSectionItems(UTTransferSectionListViewModel.SECTION.ACTIVE), UTTransferSectionListViewModel.SECTION.ACTIVE, _rowTapCallback.bind(this));
    i.setActionHeader(services.Localization.localize("tradepile.dock.categories.current"), "", null),
    i.setEmptyMessage(services.Localization.localize("tradepile.availabletransfers.empty.header"), services.Localization.localize("tradepile.availabletransfers.empty.body")),
    this._updateSectionHeaders(),
    0 < this._viewmodel.values().length && !isPhone() && r.selectListRow(this._viewmodel.current().id)
}
,
UTTransferListViewController.prototype._clearSold = function _clearSold() {
    this.getView().setInteractionState(!1),
    services.Item.clearSoldItems().observe(this, function _clearSoldComplete(e, t) {
        e.unobserve(this),
        this.refreshList()
    })
}
,
UTTransferListViewController.prototype._relistAll = function _relistAll() {
    function _relistAllComplete(e, t) {
        e.unobserve(this),
        NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : (t.status === HttpStatusCode.FORBIDDEN ? services.Notification.queue([services.Localization.localize("popup.error.relistall.forbidden.message"), UINotificationType.NEGATIVE]) : t.success || services.Notification.queue([services.Localization.localize("popup.error.relistall"), UINotificationType.NEGATIVE]),
        this.refreshList())
    }
    TelemetryManager.trackEvent(TelemetryManager.Sections.AUCTIONS, TelemetryManager.Categories.BUTTON_PRESS, "Transfer List - Re-List All"),
    this.getView().setInteractionState(!1),
    utils.PopupManager.showConfirmation(utils.PopupManager.Confirmations.CONFIRM_RELIST_ALL, {
        params: []
    }, function _relistAllConfirmed() {
        services.Item.relistExpiredAuctions().observe(this, _relistAllComplete)
    }
    .bind(this), function _relistAllCancelled() {
        this.getView().setInteractionState(!0)
    }
    .bind(this))
}
,
UTTransferListViewController.prototype._eViewmodelDataUpdated = function _eViewmodelDataUpdated() {
    var e = this.getView();
    e.onTimedUpdate(),
    this._viewmodel.getActiveItems().length !== e.getSection(UTTransferSectionListViewModel.SECTION.ACTIVE).getNumOfRows() && this.refreshList()
}
,
UTTransferListViewController.prototype._nInfoStateChanged = function _nInfoStateChanged() {
    TelemetryManager.trackEvent(TelemetryManager.Sections.AUCTIONS, TelemetryManager.Categories.BUTTON_PRESS, "Item Info Switch Button - Transfer List")
}
,
services.URL.registerDeepLinkID(DeepLinkSection.TRADE_PILE, function(e) {
    var t = getAppMain().getRootViewController();
    if (t.setGameViewTab(UTGameTabBarController.TabTag.TRANSFERS),
    !getAppMain().getConfigRepository().getConfigBoolean(EAConfigurationRepository.KEY_HIDE_TRANSFER_MARKET)) {
        var i = t.getPresentedViewController().getCurrentViewController();
        if (i) {
            var o = isPhone() ? new UTTransferListViewController : new UTTransferListSplitViewController;
            o.init(),
            i.pushViewController(o)
        }
    }
});
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTransferClubResultsViewController = function(t) {
    function UTTransferClubResultsViewController() {
        var e = t.call(this) || this;
        return e.searchCriteria = null,
        e.viewModel = new UTClubViewModel([]),
        e.transferClubSearchDelegate = null,
        e
    }
    return __extends(UTTransferClubResultsViewController, t),
    UTTransferClubResultsViewController.prototype.init = function() {
        this.initialized || (t.prototype.init.call(this),
        TelemetryManager.trackPage(TelemetryManager.Sections.CLUB, "TransferList Club Results"))
    }
    ,
    UTTransferClubResultsViewController.prototype.initWithSearchCriteria = function(e) {
        this.initialized || (this.searchCriteria = e,
        this.searchCriteria.count = this.viewModel.numItemsPerPage + 1,
        this.init())
    }
    ,
    UTTransferClubResultsViewController.prototype.dealloc = function() {
        this.searchCriteria = null,
        t.prototype.dealloc.call(this)
    }
    ,
    UTTransferClubResultsViewController.prototype._getViewInstanceFromData = function() {
        return new UTClubSearchResultsView
    }
    ,
    UTTransferClubResultsViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("infopanel.label.sendTradePile")
    }
    ,
    UTTransferClubResultsViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        this.requestItems();
        var e = this.getView();
        e.updateListTopPosition(),
        e.toggleSubTypesOptions(!1),
        e.onSearch.observe(this, this.eModifySearchSelected),
        e.addTarget(this, this.eRowActionSelected, enums.UIListEvent.ROW_ACTION),
        e.addTarget(this, this.eNextPage, enums.UIPaginationEvent.NEXT),
        e.addTarget(this, this.ePrevPage, enums.UIPaginationEvent.PREVIOUS)
    }
    ,
    UTTransferClubResultsViewController.prototype.viewWillDisappear = function() {
        t.prototype.viewWillDisappear.call(this),
        this.viewModel.resetCollection([]);
        var e = this.getView();
        e.removeTarget(this, this.eRowActionSelected, enums.UIListEvent.ROW_ACTION),
        e.removeTarget(this, this.eNextPage, enums.UIPaginationEvent.NEXT),
        e.removeTarget(this, this.ePrevPage, enums.UIPaginationEvent.PREVIOUS)
    }
    ,
    UTTransferClubResultsViewController.prototype.pruneDuplicates = function(e) {
        return e.reduce(function(e, t) {
            return e.find(function(e) {
                return e.id === t.id
            }) || e.push(t),
            e
        }, [])
    }
    ,
    UTTransferClubResultsViewController.prototype.setTransferClubSearchDelegate = function(e) {
        e.conforms(interfaces.TransferClubSearch) && (this.transferClubSearchDelegate = e)
    }
    ,
    UTTransferClubResultsViewController.prototype.updateItemList = function(e) {
        var t, i, o = this.getView();
        0 < e.length ? o.setItems(e) : o.setEmptyListMessage(null === (i = null === (t = this.searchCriteria) || void 0 === t ? void 0 : t.isModified()) || void 0 === i || i),
        o.setPaginationState(this.viewModel.hasPreviousPage(), this.viewModel.hasNextPage()),
        o.setRowActionCallback()
    }
    ,
    UTTransferClubResultsViewController.prototype.handleItemRetrieval = function(e, t) {
        var i = this.viewModel.getIndex()
          , o = this.pruneDuplicates(this.viewModel.values().concat(e));
        if (this.searchCriteria) {
            var n = this.searchCriteria.sortBy === SearchSortType.RECENCY;
            this.viewModel.sortByRecency = n,
            this.viewModel.sort = this.searchCriteria.sort,
            this.viewModel.sortType = this.searchCriteria.sortBy
        }
        this.viewModel.removeArray(o),
        this.viewModel.addArray(o),
        this.viewModel.isFull = t,
        this.viewModel.setIndex(i),
        !this.searchCriteria || this.viewModel.canShowPage(this.viewModel.getCurrentPage()) && !this.viewModel.shouldRequestItems() ? this.updateItemList(this.viewModel.getPageItems()) : (this.searchCriteria.offset += this.searchCriteria.count,
        this.requestItems())
    }
    ,
    UTTransferClubResultsViewController.prototype.onClubItemRetrievalComplete = function(e, t) {
        e.unobserve(this),
        t.success && JSUtils.isObject(t.response) ? this.handleItemRetrieval(t.response.items, t.response.retrievedAll) : t.error && NetworkErrorManager.handleStatus(t.error.code)
    }
    ,
    UTTransferClubResultsViewController.prototype.requestItems = function() {
        this.viewModel.canShowPage() && !this.viewModel.shouldRequestItems() ? this.updateItemList(this.viewModel.getPageItems()) : this.searchCriteria && services.Club.search(this.searchCriteria).observe(this, this.onClubItemRetrievalComplete)
    }
    ,
    UTTransferClubResultsViewController.prototype.eRowActionSelected = function(e, t, i) {
        var s = this
          , o = i.item;
        o && services.Item.move(o, ItemPile.TRANSFER).observe(this, function(e, t) {
            if (e.unobserve(s),
            t.success && JSUtils.isObject(t.data)) {
                var i = s.viewModel.getIndex()
                  , o = t.data
                  , n = s.viewModel.values().filter(function(e) {
                    return o.itemIds.indexOf(e.id) < 0
                })
                  , r = Math.max(n.length - 1, 0);
                r < i && (i = r),
                s.viewModel.resetCollection(n),
                s.viewModel.setIndex(i),
                s.searchCriteria && (s.searchCriteria.offset = i,
                services.Club.search(s.searchCriteria).observe(s, s.onClubItemRetrievalComplete)),
                s.transferClubSearchDelegate && s.transferClubSearchDelegate.addPlayer()
            } else
                t.status !== HttpStatusCode.UNKNOWN && NetworkErrorManager.handleStatus(t.status),
                services.Notification.queue([services.Localization.localize("notification.item.moveFailed"), UINotificationType.NEGATIVE]),
                s.requestItems()
        })
    }
    ,
    UTTransferClubResultsViewController.prototype.eModifySearchSelected = function(e) {
        var t = this.getNavigationController();
        t && t.popViewController(!0)
    }
    ,
    UTTransferClubResultsViewController.prototype.eNextPage = function(e, t, i) {
        this.viewModel.hasNextPage() && (this.viewModel.nextPage(),
        this.viewModel.shouldRequestItems() ? (this.searchCriteria && (this.searchCriteria.offset += this.searchCriteria.count),
        this.requestItems()) : this.updateItemList(this.viewModel.getPageItems()))
    }
    ,
    UTTransferClubResultsViewController.prototype.ePrevPage = function(e, t, i) {
        this.viewModel.hasPreviousPage() && this.updateItemList(this.viewModel.previousPage())
    }
    ,
    UTTransferClubResultsViewController
}(EAViewController)
  , UTTransferClubSearchViewController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTTransferClubSearchViewController() {
        var e = i.call(this) || this;
        return e.viewmodel = new UTItemSearchViewModel,
        e.transferClubSearchDelegate = null,
        e
    }
    return __extends(UTTransferClubSearchViewController, i),
    UTTransferClubSearchViewController.prototype.init = function() {
        if (!this.initialized) {
            i.prototype.init.call(this),
            TelemetryManager.trackPage(TelemetryManager.Sections.AUCTIONS, "Transfer List Club Search");
            var e = this.getView();
            e.getSearchButton().addTarget(this, this._eSearchSelected, EventType.TAP),
            e.getResetButton().addTarget(this, this._eResetSelected, EventType.TAP),
            e.getPlayerNameSearch().addTarget(this, this._ePlayerNameChange, EventType.CHANGE),
            e.getSortOptions().addTarget(this, this._eSortToggled, EventType.CHANGE),
            e.getSortDropDown().addTarget(this, this._eDropDownChanged, EventType.CHANGE),
            e.onFilterChange.observe(this, this._eFilterChanged),
            e.setupSearchOptions({
                includeEvolutionsToggle: !1,
                includeLimitedUseToggle: !1,
                includeSquadPlayersToggle: !0,
                includeUntradeableToggle: !1
            }),
            e.setSortOptions(this.viewmodel.searchCriteria.type === SearchType.STAFF ? factories.DataProvider.getStaffSortTypeDP() : factories.DataProvider.getSortTypeDP()),
            e.getSortDropDown().setDefaultIndexById(SearchSortID.RATING_DESC, !0),
            this.viewmodel.searchCriteria.untradeables = SearchUntradeables.EXCLUDE,
            this.updateOvrRangeVisibility()
        }
    }
    ,
    UTTransferClubSearchViewController.prototype.dealloc = function() {
        i.prototype.dealloc.call(this)
    }
    ,
    UTTransferClubSearchViewController.prototype._getViewInstanceFromData = function() {
        return new UTClubSearchFiltersView
    }
    ,
    UTTransferClubSearchViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this.getView()
          , t = this.getNavigationController();
        t && t.setNavigationVisibility(!0, !0),
        this.viewmodel.searchCriteria.excludeDefIds = [],
        e.getSortOptions().toggleById(enums.UISortOptionType.EXCLUDE_SQUAD, !1),
        this.viewmodel.updateSearchCriteria(this.viewmodel.searchCriteria),
        e.setFilters(this.viewmodel),
        services.Club.getStats()
    }
    ,
    UTTransferClubSearchViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.clubsearch")
    }
    ,
    UTTransferClubSearchViewController.prototype.setSearchCriteria = function(e) {
        this.viewmodel.updateSearchCriteria(e)
    }
    ,
    UTTransferClubSearchViewController.prototype.setTransferClubSearchDelegate = function(e) {
        e.conforms(interfaces.TransferClubSearch) && (this.transferClubSearchDelegate = e)
    }
    ,
    UTTransferClubSearchViewController.prototype._eSortToggled = function(e, t, i) {
        var o = this;
        i.id === enums.UISortOptionType.EXCLUDE_SQUAD && (i.checked ? this.viewmodel.requestActiveSquadDefIds().observe(this, function(e, t) {
            e.unobserve(o),
            t.data && JSUtils.isObject(t.data) && (o.viewmodel.searchCriteria.excludeDefIds = t.data.defIds)
        }) : this.viewmodel.searchCriteria.excludeDefIds = [])
    }
    ,
    UTTransferClubSearchViewController.prototype._eDropDownChanged = function(e, t, i) {
        var o = "Club Search Filters - Sort By DropDown changed to: ";
        switch (e.id) {
        case SearchSortID.VALUE_DESC:
            this.viewmodel.searchCriteria.sort = SearchSortOrder.DESCENDING,
            this.viewmodel.searchCriteria.sortBy = SearchSortType.VALUE,
            o += "'Highest Quick Sell'";
            break;
        case SearchSortID.VALUE_ASC:
            this.viewmodel.searchCriteria.sort = SearchSortOrder.ASCENDING,
            this.viewmodel.searchCriteria.sortBy = SearchSortType.VALUE,
            o += "'Lowest Quick Sell'";
            break;
        case SearchSortID.RATING_DESC:
            this.viewmodel.searchCriteria.sort = SearchSortOrder.DESCENDING,
            this.viewmodel.searchCriteria.sortBy = SearchSortType.RATING,
            o += "'Rating High to Low'";
            break;
        case SearchSortID.RATING_ASC:
            this.viewmodel.searchCriteria.sort = SearchSortOrder.ASCENDING,
            this.viewmodel.searchCriteria.sortBy = SearchSortType.RATING,
            o += "'Rating Low to High'";
            break;
        case SearchSortID.RECENCY_DESC:
            this.viewmodel.searchCriteria.sort = SearchSortOrder.DESCENDING,
            this.viewmodel.searchCriteria.sortBy = SearchSortType.RECENCY,
            o += "'Most Recent'";
            break;
        default:
            DebugUtils.Assert(!1, "ClubSearchFilters :: Passed an invalid SearchSort Enums.")
        }
        TelemetryManager.trackEvent(TelemetryManager.Sections.CLUB, TelemetryManager.Categories.FILTER, o)
    }
    ,
    UTTransferClubSearchViewController.prototype._eFilterChanged = function(e, t, i, o) {
        this.viewmodel.updateFromFilterChange(t, i, o),
        this.getView().setFilters(this.viewmodel)
    }
    ,
    UTTransferClubSearchViewController.prototype._eResetSelected = function(e, t) {
        this.viewmodel.resetSearch();
        var i = this.getView()
          , o = i.getSortDropDown();
        i.setFilters(this.viewmodel),
        i.getSortOptions().reset(),
        o.setIndex(o.getDefaultIndex())
    }
    ,
    UTTransferClubSearchViewController.prototype._ePlayerNameChange = function(e, t) {
        var i = this.getView().getPlayerNameSearch().getSelected()
          , o = this.getView();
        i ? this.viewmodel.setPlayerData(i) : this.viewmodel.clearPlayerData(),
        o.setFilters(this.viewmodel),
        JSUtils.isValid(i) && (o.setFilterValue(enums.UISearchFilters.NATION, -1),
        o.setFilterValue(enums.UISearchFilters.LEAGUE, -1),
        o.setFilterValue(enums.UISearchFilters.CLUB, -1))
    }
    ,
    UTTransferClubSearchViewController.prototype._eSearchSelected = function(e, t, i) {
        if (hasConnection()) {
            var o = new UTTransferClubResultsViewController
              , n = this.viewmodel.searchCriteria;
            this.transferClubSearchDelegate && o.setTransferClubSearchDelegate(this.transferClubSearchDelegate),
            n.offset = 0,
            o.initWithSearchCriteria(n);
            var r = this.getNavigationController();
            r && r.pushViewController(o)
        } else
            utils.PopupManager.showAlert(utils.PopupManager.Alerts.NO_INTERNET_CONNECTION)
    }
    ,
    UTTransferClubSearchViewController.prototype.updateOvrRangeVisibility = function() {
        var e = this.getView()
          , t = this.viewmodel.searchCriteria.type
          , i = this.viewmodel.searchFeature;
        e.toggleOvrRange(t, i)
    }
    ,
    UTTransferClubSearchViewController
}(EAViewController))
  , UTTransferListNavigationController = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTTransferListNavigationController() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTTransferListNavigationController, e),
    UTTransferListNavigationController.prototype._getRootControllerInstance = function() {
        return new UTTransferClubSearchViewController
    }
    ,
    UTTransferListNavigationController.prototype.setTransferClubSearchDelegate = function(e) {
        e.conforms(interfaces.TransferClubSearch) && this.getRootController().setTransferClubSearchDelegate(e)
    }
    ,
    UTTransferListNavigationController
}(UTNavigationController));
function UTTransferListSplitViewController() {
    UTSplitViewController.call(this),
    this._listController = new UTTransferListViewController,
    this._itemDetailController = new UTItemDetailsNavigationController,
    this._clubSearchController = null
}
NamespaceManager.Register("interfaces"),
interfaces.TransferClubSearch = function ITransferClubSearch() {}
,
interfaces.TransferClubSearch.prototype.conforms = function conforms() {}
,
interfaces.TransferClubSearch.prototype.addPlayer = function addPlayer() {}
,
JSUtils.inherits(UTTransferListSplitViewController, UTSplitViewController),
UTTransferListSplitViewController.prototype.init = function init() {
    if (!this.initialized) {
        this.superclass(),
        this._listController.init(),
        this._listController.onDataChange.observe(this, this._eListDataChanged),
        this._listController.onItemSelected.observe(this, this._eItemSelected),
        this._listController.onSearchClub.observe(this, this._eAddPlayerSelected),
        this._itemDetailController.initWithIterator(this._listController.getIterator()),
        this._itemDetailController.enableSwiping(!1),
        this.addChildViewController(this._listController),
        this.addChildViewController(this._itemDetailController);
        var e = getDefaultDispatcher();
        e.addObserver(AppNotification.ITEM_ACTIVATE, this, this._nItemActivated),
        e.addObserver(AppNotification.ITEM_DISCARD, this, this._nItemDiscarded),
        e.addObserver(AppNotification.ITEM_LIST, this, this._nItemListed),
        e.addObserver(AppNotification.ITEM_MOVE, this, this._nItemMoved),
        e.addObserver(AppNotification.ITEM_CLEARSOLD, this, this._nClearSold)
    }
}
,
UTTransferListSplitViewController.prototype.dealloc = function dealloc() {
    this._itemDetailController.dealloc(),
    this._itemDetailController = null,
    this._listController.dealloc(),
    this._listController = null,
    this._clubSearchController && (this._clubSearchController.dealloc(),
    this._clubSearchController = null);
    var e = getDefaultDispatcher();
    e.removeObserver(AppNotification.ITEM_ACTIVATE, this),
    e.removeObserver(AppNotification.ITEM_DISCARD, this),
    e.removeObserver(AppNotification.ITEM_LIST, this),
    e.removeObserver(AppNotification.ITEM_MOVE, this),
    e.removeObserver(AppNotification.ITEM_CLEARSOLD, this),
    this.superclass()
}
,
UTTransferListSplitViewController.prototype.getNavigationTitle = function getNavigationTitle() {
    return this._listController.getNavigationTitle()
}
,
UTTransferListSplitViewController.prototype.viewDidAppear = function viewDidAppear() {
    this.superclass(),
    this.setLeftController(this._listController),
    this._itemDetailController.setNavigationStyle(UTNavigationBarView.Style.SECONDARY)
}
,
UTTransferListSplitViewController.prototype._eItemSelected = function _eItemSelected(e, t) {
    this._itemDetailController.setIndex(t),
    this.setRightController(this._itemDetailController),
    this._resetSearch()
}
,
UTTransferListSplitViewController.prototype._eAddPlayerSelected = function _eAddPlayerSelected() {
    this._clubSearchController || (this._clubSearchController = new UTTransferListNavigationController,
    this._clubSearchController.setTransferClubSearchDelegate(this),
    this._clubSearchController.init(),
    this.addChildViewController(this._clubSearchController)),
    this.setRightController(this._clubSearchController)
}
,
UTTransferListSplitViewController.prototype.addPlayer = function addPLayer() {
    this._listController.refreshList()
}
,
UTTransferListSplitViewController.prototype._eListDataChanged = function _eListDataChanged(e, t) {
    t.items && (0 < t.items.length ? (repositories.Item.isPileFull(ItemPile.TRANSFER) && this._resetSearch(),
    this.rightController instanceof UTTransferListNavigationController || this.setRightController(this._itemDetailController),
    this._itemDetailController.setIndex(this._listController.getIterator().getIndex())) : (this._resetSearch(),
    this.removeRightController()))
}
,
UTTransferListSplitViewController.prototype._nItemActivated = function _nItemActivated(e, t, i) {
    this._listController.removeItemsById(i.itemIds || [])
}
,
UTTransferListSplitViewController.prototype._nItemDiscarded = function _nItemDiscarded(e, t, i) {
    this._listController.removeItemsById(i.itemIds || []),
    this._listController.getIterator().length || (this._resetSearch(),
    this.removeRightController())
}
,
UTTransferListSplitViewController.prototype._nClearSold = function _nClearSold(e, t, i) {
    this._listController.removeItemsById(i.itemIds || [])
}
,
UTTransferListSplitViewController.prototype._nItemListed = function _nItemListed() {
    this._listController.refreshList(),
    this._resetSearch()
}
,
UTTransferListSplitViewController.prototype._nItemMoved = function _nItemMoved() {
    this._listController.refreshList()
}
,
UTTransferListSplitViewController.prototype._resetSearch = function _resetSearch() {
    this._clubSearchController && this._clubSearchController.popToRootViewController()
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTDailyGiftPopupView = function(i) {
    function UTDailyGiftPopupView() {
        var e = i.call(this) || this;
        return e.onComplete = new EAObservable,
        e
    }
    return __extends(UTDailyGiftPopupView, i),
    UTDailyGiftPopupView.prototype.init = function() {
        var e = this
          , t = services.Localization;
        this._claimButton.init(),
        this._claimButton.setText(t.localize("common.dialog.accept")),
        this._claimButton.addTarget(this, function() {
            return e.onComplete.notify()
        }, EventType.TAP),
        this.__textInfo.textContent = t.localize("dailyreward.popupInfo"),
        i.prototype.init.call(this)
    }
    ,
    UTDailyGiftPopupView.prototype.dealloc = function() {
        this.onComplete.dealloc(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTDailyGiftPopupView.prototype.render = function(e, t) {
        var i = services.Localization
          , o = 0;
        e === RewardType.COIN ? (DOMKit.toggleDisplayStyle(this.__packGiftImage, !1),
        DOMKit.toggleDisplayStyle(this.__coinGiftImage, !0),
        this._coinGiftBackground.hide(),
        this._coinGiftBackground.src = AssetLocationUtils.getMiscImageUri(ItemSubType.FREE_COINS, 1),
        this.__giftType.textContent = i.localizeNumber(t) + " " + i.localize("card.title.coins")) : e === RewardType.PACK && (o = PurchaseDisplayGroupId.MYPACKS,
        DOMKit.toggleDisplayStyle(this.__packGiftImage, !0),
        DOMKit.toggleDisplayStyle(this.__coinGiftImage, !1),
        this._packBackgroundImage.src = AssetLocationUtils.getPackBackgroundImageUri(o),
        this._packForegroundImage.src = AssetLocationUtils.getPackForegroundImageUri(o, 0),
        this.__giftType.textContent = i.localize("FUT_STORE_PACK_" + t.toString() + "_NAME_MOBILE")),
        this.__popupTitle.textContent = i.localize("dailyreward.popupheader").toUpperCase()
    }
    ,
    UTDailyGiftPopupView.DailyGift = Object.freeze({
        COIN_ASSET_ID: 99
    }),
    UTDailyGiftPopupView
}(EAView);
UTDailyGiftPopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("daily-gift");
        var t = document.createElement("header");
        this.__popupTitle = document.createElement("h1"),
        this.__popupTitle.classList.add("daily-gift-title"),
        t.appendChild(this.__popupTitle),
        e.appendChild(t),
        this.__textInfo = document.createElement("p"),
        this.__textInfo.classList.add("text-info"),
        e.appendChild(this.__textInfo);
        var i = document.createElement("div");
        i.classList.add("daily-gift-body"),
        this.__packGiftImage = document.createElement("div"),
        this.__packGiftImage.classList.add("pack-gift-image"),
        this._packBackgroundImage = new EAImageView,
        this._packBackgroundImage.getRootElement().classList.add("pack-background-image"),
        this.__packGiftImage.appendChild(this._packBackgroundImage.getRootElement()),
        this._packForegroundImage = new EAImageView,
        this._packForegroundImage.getRootElement().classList.add("pack-foreground-image"),
        this.__packGiftImage.appendChild(this._packForegroundImage.getRootElement()),
        i.appendChild(this.__packGiftImage),
        this.__coinGiftImage = document.createElement("div"),
        this.__coinGiftImage.classList.add("coin-gift-image"),
        this._coinGiftBackground = new EAImageView,
        this._coinGiftBackground.getRootElement().classList.add("pack-background-image"),
        this.__coinGiftImage.appendChild(this._coinGiftBackground.getRootElement()),
        this._coinGiftForeground = new EAImageView,
        this._coinGiftForeground.getRootElement().classList.add("pack-foreground-image"),
        this.__coinGiftImage.appendChild(this._coinGiftForeground.getRootElement()),
        i.appendChild(this.__coinGiftImage),
        this.__giftType = document.createElement("p"),
        this.__giftType.classList.add("daily-gift-award"),
        i.appendChild(this.__giftType),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("daily-gift-footer"),
        this._claimButton = new UTStandardButtonControl,
        this._claimButton.getRootElement().classList.add("call-to-action"),
        o.appendChild(this._claimButton.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTDailyGiftPopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__popupTitle = null,
    this.__textInfo = null,
    this.__packGiftImage = null,
    this._packBackgroundImage.destroy(),
    this._packForegroundImage.destroy(),
    this.__coinGiftImage = null,
    this._coinGiftBackground.destroy(),
    this._coinGiftForeground.destroy(),
    this.__giftType = null,
    this._claimButton.destroy()
}
,
UTDailyGiftPopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTDailyGiftViewController = function(i) {
    function UTDailyGiftViewController(e) {
        var t = i.call(this) || this;
        return t._rewardType = e.rewardType || "",
        t._rewardValue = e.rewardValue || -1,
        t
    }
    return __extends(UTDailyGiftViewController, i),
    UTDailyGiftViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.getView().render(this._rewardType, this._rewardValue),
        this.getView().onComplete.observe(this, this.onExit.notify.bind(this.onExit)),
        TelemetryManager.trackPage(TelemetryManager.Sections.MISC, "Daily Gift")
    }
    ,
    UTDailyGiftViewController.prototype._getViewInstanceFromData = function() {
        return new UTDailyGiftPopupView
    }
    ,
    UTDailyGiftViewController
}(BasePopupViewController)
  , UTLiveMessagePopupView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTLiveMessagePopupView() {
        var e = t.call(this) || this;
        return e.isRendered = !1,
        e
    }
    return __extends(UTLiveMessagePopupView, t),
    UTLiveMessagePopupView.prototype.init = function() {
        t.prototype.init.call(this),
        this._continueBtn.init(),
        this._continueBtn.setText(services.Localization.localize("common.dialog.continue")),
        this.setInteractionState(!0)
    }
    ,
    UTLiveMessagePopupView.prototype.setInteractionState = function(e) {
        this._setInteractionStateFlag(e),
        this._continueBtn.setInteractionState(e)
    }
    ,
    UTLiveMessagePopupView.prototype.renderImages = function(e, t) {
        var i = this;
        this._image.onerror = function(e) {
            i._image.onerror = null,
            i._image.src = "images/tile/liveMessageDefault.png"
        }
        ,
        this._image.src = e,
        this.getRootElement().style.backgroundImage = JSUtils.isEmpty(t) ? "" : "url(" + t + ")"
    }
    ,
    UTLiveMessagePopupView.prototype.renderHeader = function(e, t) {
        this.renderTitleText(e.title),
        this.__title.style.color = e.titleColor,
        this.renderSubtitleText(e.subtitle),
        this.__subtitle.style.color = e.subtitleColor,
        this.renderInfoText(e.info),
        this.__info.style.backgroundColor = e.infoColor,
        this.__info.style.color = JSUtils.isEmpty(e.infoColor) ? "" : "#fff",
        this.__numMessages.textContent = t
    }
    ,
    UTLiveMessagePopupView.prototype.renderTitleText = function(e) {
        this.__title.textContent = e
    }
    ,
    UTLiveMessagePopupView.prototype.renderSubtitleText = function(e) {
        this.__subtitle.textContent = e
    }
    ,
    UTLiveMessagePopupView.prototype.renderInfoText = function(e) {
        this.__info.textContent = e
    }
    ,
    UTLiveMessagePopupView.prototype.renderContent = function(e, t) {
        this.renderContentText(e),
        this.__content.style.color = t
    }
    ,
    UTLiveMessagePopupView.prototype.renderContentText = function(e) {
        this.__content.innerHTML = e
    }
    ,
    UTLiveMessagePopupView.prototype.render = function(t, i) {
        var o = this;
        if (this.isRendered) {
            var n = this._image.getRootElement()
              , r = [{
                opacity: "0%"
            }, {
                opacity: "100%"
            }]
              , e = [{
                opacity: "100%"
            }, {
                opacity: "0%"
            }];
            this.__header.animate(e, {
                duration: 200
            }).onfinish = function(e) {
                o.renderHeader(t, i),
                o.__header.animate(r, {
                    duration: 200
                })
            }
            ,
            this.__content.animate(e, {
                duration: 200
            }).onfinish = function(e) {
                o.renderContent(t.body, t.bodyColor),
                o.__content.animate(r, {
                    duration: 200
                })
            }
            ,
            n.animate(e, {
                duration: 200
            }).onfinish = function(e) {
                o.renderImages(t.bodyImagePath, t.backgroundImagePath),
                n.animate(r, {
                    duration: 200
                })
            }
        } else
            this.renderHeader(t, i),
            this.renderImages(t.bodyImagePath, t.backgroundImagePath),
            this.renderContent(t.body, t.bodyColor),
            this.isRendered = !0
    }
    ,
    UTLiveMessagePopupView.prototype.getContinueButton = function() {
        return this._continueBtn
    }
    ,
    UTLiveMessagePopupView
}(EAView));
UTLiveMessagePopupView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-livemessage"),
        this.__header = document.createElement("header"),
        this.__header.classList.add("ut-livemessage-header");
        var t = document.createElement("div");
        t.classList.add("ut-livemessage-header--meta"),
        this.__numMessages = document.createElement("p"),
        this.__numMessages.classList.add("ut-livemessage-header--counter"),
        t.appendChild(this.__numMessages),
        this.__header.appendChild(t),
        this.__title = document.createElement("h1"),
        this.__header.appendChild(this.__title),
        this.__subtitle = document.createElement("h2"),
        this.__header.appendChild(this.__subtitle),
        this.__info = document.createElement("h3"),
        this.__header.appendChild(this.__info),
        this.__date = document.createElement("p"),
        this.__date.classList.add("ut-livemessage-header--date"),
        this.__header.appendChild(this.__date),
        e.appendChild(this.__header);
        var i = document.createElement("div");
        i.classList.add("ut-livemessage-content"),
        this._image = new EAImageView,
        this._image.getRootElement().classList.add("ut-livemessage-content--image"),
        i.appendChild(this._image.getRootElement()),
        this.__content = document.createElement("div"),
        this.__content.classList.add("ut-livemessage-content--body"),
        i.appendChild(this.__content),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-livemessage-footer"),
        this._continueBtn = new UTStandardButtonControl,
        this._continueBtn.getRootElement().classList.add("call-to-action"),
        o.appendChild(this._continueBtn.getRootElement()),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTLiveMessagePopupView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__numMessages = null,
    this.__title = null,
    this.__subtitle = null,
    this.__info = null,
    this.__date = null,
    this._image.destroy(),
    this.__content = null,
    this._continueBtn.destroy()
}
,
UTLiveMessagePopupView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTLiveMessagePopupViewController = function(i) {
    function UTLiveMessagePopupViewController(e) {
        var t = i.call(this) || this;
        return t.viewModel = new EAIterator(e),
        t.countdownTimer = null,
        t
    }
    return __extends(UTLiveMessagePopupViewController, i),
    UTLiveMessagePopupViewController.prototype.init = function() {
        i.prototype.init.call(this),
        this.getView().getContinueButton().addTarget(this, this.onContinue, EventType.TAP)
    }
    ,
    UTLiveMessagePopupViewController.prototype.dealloc = function() {
        this.viewModel.dealloc(),
        this.stopCountdownTimer(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTLiveMessagePopupViewController.prototype._getViewInstanceFromData = function() {
        return new UTLiveMessagePopupView
    }
    ,
    UTLiveMessagePopupViewController.prototype.viewDidAppear = function() {
        i.prototype.viewDidAppear.call(this);
        var e = this.getView()
          , t = this.viewModel.current();
        t && (e.render(t, this.getMessageCounter()),
        t.hasCountdowns() && this.startCountdownTimer(),
        this.startButtonCountdown(t.duration))
    }
    ,
    UTLiveMessagePopupViewController.prototype.getMessageCounter = function() {
        return services.Localization.localize("common.fraction", [(this.viewModel.getIndex() + 1).toString(), this.viewModel.length.toString()])
    }
    ,
    UTLiveMessagePopupViewController.prototype.onBackButton = function() {
        return !1
    }
    ,
    UTLiveMessagePopupViewController.prototype.startCountdownTimer = function() {
        this.countdownTimer || (this.updateCountdownTimer(),
        this.countdownTimer = new EAIntervalController(1e3,this.updateCountdownTimer.bind(this)),
        this.countdownTimer.start())
    }
    ,
    UTLiveMessagePopupViewController.prototype.stopCountdownTimer = function() {
        this.countdownTimer && (this.countdownTimer.dealloc(),
        this.countdownTimer = null)
    }
    ,
    UTLiveMessagePopupViewController.prototype.updateCountdownTimer = function() {
        var e = this.viewModel.current()
          , t = this.getView()
          , i = services.Localization;
        e && (0 <= e.titleCountdown && t.renderTitleText(e.title.replace(ArubaPlaceholderEnum.COUNTDOWN, i.localizeTimeRemaining(Math.max(0, e.titleCountdown - Date.now())))),
        0 <= e.subtitleCountdown && t.renderSubtitleText(e.subtitle.replace(ArubaPlaceholderEnum.COUNTDOWN, i.localizeTimeRemaining(Math.max(0, e.subtitleCountdown - Date.now())))),
        0 <= e.infoCountdown && t.renderInfoText(e.info.replace(ArubaPlaceholderEnum.COUNTDOWN, i.localizeTimeRemaining(Math.max(0, e.infoCountdown - Date.now())))),
        0 <= e.bodyCountdown && t.renderContentText(e.body.replace(ArubaPlaceholderEnum.COUNTDOWN, i.localizeTimeRemaining(Math.max(0, e.bodyCountdown - Date.now())))))
    }
    ,
    UTLiveMessagePopupViewController.prototype.startButtonCountdown = function(e) {
        var t = this.getView();
        t.setInteractionState(!1),
        window.setTimeout(function() {
            return t.setInteractionState(!0)
        }, e)
    }
    ,
    UTLiveMessagePopupViewController.prototype.continue = function() {
        var e = this.viewModel.current();
        if (e)
            if (e.hasCountdowns() && this.stopCountdownTimer(),
            services.Messages.readLiveMessage(e.id),
            this.viewModel.endOfList)
                this.closePopup();
            else {
                var t = this.viewModel.next();
                t && (t.hasCountdowns() && this.startCountdownTimer(),
                this.getView().render(t, this.getMessageCounter()),
                this.startButtonCountdown(t.duration))
            }
    }
    ,
    UTLiveMessagePopupViewController.prototype.handleKeyUpEvent = function(e) {
        !this.getView().isInteractionEnabled() || e.key !== KeyboardKey.ESCAPE && e.key !== KeyboardKey.MS_ESCAPE && e.key !== KeyboardKey.ENTER || this.continue()
    }
    ,
    UTLiveMessagePopupViewController.prototype.onContinue = function(e, t, i) {
        this.continue()
    }
    ,
    UTLiveMessagePopupViewController
}(BasePopupViewController)
  , UTHomeHubViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTHomeHubViewModel() {
        var e = t.call(this) || this;
        return e.requests = [],
        e
    }
    return __extends(UTHomeHubViewModel, t),
    UTHomeHubViewModel.prototype.dealloc = function() {
        t.prototype.dealloc.call(this),
        this.cancelRequests()
    }
    ,
    UTHomeHubViewModel.prototype.cancelRequests = function() {
        0 < this.requests.length && (this.requests.forEach(function(e) {
            e.clearObservers(),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        }, this),
        this.requests = [])
    }
    ,
    UTHomeHubViewModel.prototype.completeRequest = function(e, t) {
        e.unobserve(this),
        gClickShield.hideShield(EAClickShieldView.Shield.LOADING);
        var i = this.requests.indexOf(e);
        0 <= i && this.requests.splice(i, 1)
    }
    ,
    UTHomeHubViewModel
}(EAObject))
  , UTGraphicalInfoTileContentView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTGraphicalInfoTileContentView() {
        return e.call(this) || this
    }
    return __extends(UTGraphicalInfoTileContentView, e),
    UTGraphicalInfoTileContentView.prototype.setDescription = function(e) {
        this.__description.textContent = e.toString()
    }
    ,
    UTGraphicalInfoTileContentView
}(EAView));
UTGraphicalInfoTileContentView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tile-content-graphic-info");
        var t = document.createElement("div");
        t.classList.add("image"),
        e.appendChild(t),
        this.__description = document.createElement("p"),
        this.__description.classList.add("description"),
        e.appendChild(this.__description),
        this.__root = e,
        this._generated = !0
    }
}
,
UTGraphicalInfoTileContentView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__description = null
}
,
UTGraphicalInfoTileContentView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTGraphicalInfoTileView = function(e) {
    function UTGraphicalInfoTileView() {
        return e.call(this) || this
    }
    return __extends(UTGraphicalInfoTileView, e),
    UTGraphicalInfoTileView.prototype._getContentViewInstance = function() {
        return new UTGraphicalInfoTileContentView
    }
    ,
    UTGraphicalInfoTileView.prototype.setDescription = function(e) {
        var t = this.getContentView();
        t && (null == t || t.setDescription(e))
    }
    ,
    UTGraphicalInfoTileView
}(UTTileView)
  , UTAcademyHubTileView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTAcademyHubTileView() {
        return e.call(this) || this
    }
    return __extends(UTAcademyHubTileView, e),
    UTAcademyHubTileView.prototype.setDescription = function(e) {
        var t = this.getContentView();
        e && t && t.setDescription(e)
    }
    ,
    UTAcademyHubTileView.prototype.setUnreadCount = function(e) {
        this.__unread.textContent = e.toString(),
        this.__unread.style.display = 0 < e ? "block" : "none"
    }
    ,
    UTAcademyHubTileView
}(UTGraphicalInfoTileView));
UTAcademyHubTileView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tile-hub-academy"),
        e.classList.add("tile");
        var t = document.createElement("header");
        this.__tileTitle = document.createElement("h1"),
        this.__tileTitle.classList.add("tileHeader"),
        t.appendChild(this.__tileTitle),
        e.appendChild(t),
        this.__tileContent = document.createElement("div"),
        this.__tileContent.classList.add("tileContent"),
        this.__unread = document.createElement("div"),
        this.__unread.classList.add("ut-numeric-notification-bubble"),
        this.__tileContent.appendChild(this.__unread),
        e.appendChild(this.__tileContent),
        this.__root = e,
        this._generated = !0
    }
}
,
UTAcademyHubTileView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tileTitle = null,
    this.__tileContent = null,
    this.__unread = null
}
,
UTAcademyHubTileView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTileSquadStatsView = function(t) {
    function UTTileSquadStatsView() {
        return null !== t && t.apply(this, arguments) || this
    }
    return __extends(UTTileSquadStatsView, t),
    UTTileSquadStatsView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this.__ratingLabel.textContent = e.localize("squads.rating"),
        this.__chemistryLabel.textContent = e.localize("squad.chemistry.label"),
        this._ratingStars.init()
    }
    ,
    UTTileSquadStatsView.prototype.set = function(e, t) {
        this.setChemistry(e),
        this._ratingStars.setRating(t)
    }
    ,
    UTTileSquadStatsView.prototype.setChemistry = function(e) {
        var t = services.Localization.localize("squad.chemistry.fraction", [e.toString(), UTSquadEntity.TOTAL_MAX_CHEM.toString()]);
        this.__chemistryValue.textContent = t
    }
    ,
    UTTileSquadStatsView
}(EAView);
UTTileSquadStatsView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-summary-info");
        var t = document.createElement("div");
        t.classList.add("rating"),
        this.__ratingLabel = document.createElement("span"),
        this.__ratingLabel.classList.add("ut-squad-summary-label"),
        t.appendChild(this.__ratingLabel),
        this._ratingStars = new UTSquadStarRatingView,
        t.appendChild(this._ratingStars.getRootElement()),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("chemistry"),
        this.__chemistryLabel = document.createElement("span"),
        this.__chemistryLabel.classList.add("ut-squad-summary-label"),
        i.appendChild(this.__chemistryLabel),
        this.__chemistryValue = document.createElement("span"),
        this.__chemistryValue.classList.add("ut-squad-summary-value"),
        i.appendChild(this.__chemistryValue),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTileSquadStatsView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__ratingLabel = null,
    this._ratingStars.destroy(),
    this.__chemistryLabel = null,
    this.__chemistryValue = null
}
,
UTTileSquadStatsView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadTileContentView = function(e) {
    function UTSquadTileContentView() {
        return e.call(this) || this
    }
    return __extends(UTSquadTileContentView, e),
    UTSquadTileContentView.prototype.init = function() {
        e.prototype.init.call(this),
        this._squadStats.init()
    }
    ,
    UTSquadTileContentView.prototype.setSquad = function(e) {
        var t, i;
        this.__squadName.textContent = e.getName(),
        this._squadStats.set(e.getChemistry(), e.getRating()),
        this.__formation.textContent = null !== (i = null === (t = null == e ? void 0 : e.getFormation()) || void 0 === t ? void 0 : t.displayName) && void 0 !== i ? i : "",
        e.isDream() ? this.addClass("concept") : this.removeClass("concept")
    }
    ,
    UTSquadTileContentView
}(EAView);
UTSquadTileContentView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tile-content-squad");
        var t = document.createElement("div");
        t.classList.add("pitch-image"),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("info-container"),
        this.__squadName = document.createElement("div"),
        this.__squadName.classList.add("squad-name"),
        i.appendChild(this.__squadName),
        this.__formation = document.createElement("div"),
        this.__formation.classList.add("formation"),
        i.appendChild(this.__formation),
        e.appendChild(i),
        this._squadStats = new UTTileSquadStatsView,
        e.appendChild(this._squadStats.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadTileContentView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__squadName = null,
    this.__formation = null,
    this._squadStats.destroy()
}
,
UTSquadTileContentView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadTileView = function(e) {
    function UTSquadTileView() {
        return e.call(this) || this
    }
    return __extends(UTSquadTileView, e),
    UTSquadTileView.prototype._getContentViewInstance = function() {
        return new UTSquadTileContentView
    }
    ,
    UTSquadTileView.prototype.setSquad = function(e) {
        var t = this.getContentView();
        t && t.setSquad(e)
    }
    ,
    UTSquadTileView
}(UTTileView)
  , UTObjectivesHubTileContentView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTObjectivesHubTileContentView() {
        return e.call(this) || this
    }
    return __extends(UTObjectivesHubTileContentView, e),
    UTObjectivesHubTileContentView.prototype.setUnclaimedTagText = function(e) {
        this._unclaimedRewardsTag.setRoundedCorner(isPhone() ? UTLabelView.Rounded.TOP_RIGHT : UTLabelView.Rounded.BOTTOM_RIGHT),
        this._unclaimedRewardsTag.setLabel(e)
    }
    ,
    UTObjectivesHubTileContentView.prototype.setSubtitle = function(e) {
        this.__subtitle.textContent = e
    }
    ,
    UTObjectivesHubTileContentView.prototype.setExpiryLabel = function(e) {
        this.__expiry.textContent = e
    }
    ,
    UTObjectivesHubTileContentView.prototype.setDescription = function(e) {
        this.__description.textContent = e
    }
    ,
    UTObjectivesHubTileContentView
}(EAView));
UTObjectivesHubTileContentView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tile-content-objectives");
        var t = document.createElement("div");
        t.classList.add("ut-tile-view--campaign-content"),
        this.__subtitle = document.createElement("h2"),
        this.__subtitle.classList.add("ut-tile-view--subtitle"),
        t.appendChild(this.__subtitle),
        this.__expiry = document.createElement("div"),
        this.__expiry.classList.add("ut-tile-view--expiry"),
        t.appendChild(this.__expiry),
        e.appendChild(t),
        this._unclaimedRewardsTag = new UTLabelView,
        this._unclaimedRewardsTag.getRootElement().classList.add("highlight"),
        e.appendChild(this._unclaimedRewardsTag.getRootElement());
        var i = document.createElement("div");
        i.classList.add("image"),
        e.appendChild(i),
        this.__description = document.createElement("p"),
        this.__description.classList.add("description"),
        e.appendChild(this.__description),
        this.__root = e,
        this._generated = !0
    }
}
,
UTObjectivesHubTileContentView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__subtitle = null,
    this.__expiry = null,
    this._unclaimedRewardsTag.destroy(),
    this.__description = null
}
,
UTObjectivesHubTileContentView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTObjectivesHubTileView = function(e) {
    function UTObjectivesHubTileView() {
        return e.call(this) || this
    }
    return __extends(UTObjectivesHubTileView, e),
    UTObjectivesHubTileView.prototype._getContentViewInstance = function() {
        return new UTObjectivesHubTileContentView
    }
    ,
    UTObjectivesHubTileView.prototype.setUnclaimedTagText = function(e) {
        this.getContentView().setUnclaimedTagText(e)
    }
    ,
    UTObjectivesHubTileView.prototype.toggleHasRewardsClass = function(e) {
        this.toggleClass(UTObjectivesHubTileView.Style.HAS_UNCLAIMED_REWARDS, e)
    }
    ,
    UTObjectivesHubTileView.prototype.setSubtitle = function(e) {
        this.getContentView().setSubtitle(e)
    }
    ,
    UTObjectivesHubTileView.prototype.setExpiryLabel = function(e) {
        this.getContentView().setExpiryLabel(e)
    }
    ,
    UTObjectivesHubTileView.prototype.setDescriptionFromObjectiveState = function(e, t) {
        var i = this.getContentView()
          , o = services.Localization;
        t ? 1 < e ? i.setDescription(o.localize("dynamicObjective.tile.unclaimedDescription", [e.toString()])) : 1 === e ? i.setDescription(o.localize("dynamicObjective.tile.unclaimedDescription.singular")) : i.setDescription(o.localize("dynamicObjective.tile.description")) : i.setDescription(o.localize("dynamicObjective.tile.disabled"))
    }
    ,
    UTObjectivesHubTileView.Style = Object.freeze({
        LOADING: "loading",
        LOADING_IMAGES: "loading-images",
        HAS_UNCLAIMED_REWARDS: "has-unclaimed-rewards"
    }),
    UTObjectivesHubTileView
}(UTTileView)
  , UTTransfersTileContentView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(e) {
    function UTTransfersTileContentView() {
        return e.call(this) || this
    }
    return __extends(UTTransfersTileContentView, e),
    UTTransfersTileContentView.prototype.setActiveTransferLabel = function(e) {
        this.__activeTransferLabel.textContent = e
    }
    ,
    UTTransfersTileContentView.prototype.setActiveTransferCount = function(e) {
        this.__activeTransferValue.textContent = e.toString()
    }
    ,
    UTTransfersTileContentView.prototype.setTotalTransferLabel = function(e) {
        this.__totalTransferLabel.textContent = e
    }
    ,
    UTTransfersTileContentView.prototype.setTotalTransferCount = function(e) {
        this.__totalTransferValue.textContent = e.toString()
    }
    ,
    UTTransfersTileContentView.prototype.setFinishedTransferLabel = function(e) {
        this.__finishedTransferLabel.textContent = e
    }
    ,
    UTTransfersTileContentView.prototype.setFinishedTransferCount = function(e) {
        this.__finishedTransferValue.textContent = e.toString()
    }
    ,
    UTTransfersTileContentView
}(EAView));
UTTransfersTileContentView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tile-content-transfers");
        var t = document.createElement("div");
        t.classList.add("transfer-row");
        var i = document.createElement("div");
        i.classList.add("total-transfers-data"),
        this.__totalTransferValue = document.createElement("span"),
        this.__totalTransferValue.classList.add("value"),
        i.appendChild(this.__totalTransferValue),
        this.__totalTransferLabel = document.createElement("span"),
        this.__totalTransferLabel.classList.add("label"),
        i.appendChild(this.__totalTransferLabel),
        t.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("transfer-tile-icon"),
        t.appendChild(o),
        e.appendChild(t);
        var n = document.createElement("div");
        n.classList.add("transfer-row");
        var r = document.createElement("div");
        r.classList.add("active-transfers"),
        this.__activeTransferLabel = document.createElement("span"),
        this.__activeTransferLabel.classList.add("label"),
        r.appendChild(this.__activeTransferLabel),
        this.__activeTransferValue = document.createElement("span"),
        this.__activeTransferValue.classList.add("value"),
        r.appendChild(this.__activeTransferValue),
        n.appendChild(r);
        var s = document.createElement("div");
        s.classList.add("finished-transfers"),
        this.__finishedTransferLabel = document.createElement("span"),
        this.__finishedTransferLabel.classList.add("label"),
        s.appendChild(this.__finishedTransferLabel),
        this.__finishedTransferValue = document.createElement("span"),
        this.__finishedTransferValue.classList.add("value"),
        s.appendChild(this.__finishedTransferValue),
        n.appendChild(s),
        e.appendChild(n),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTransfersTileContentView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__totalTransferValue = null,
    this.__totalTransferLabel = null,
    this.__activeTransferLabel = null,
    this.__activeTransferValue = null,
    this.__finishedTransferLabel = null,
    this.__finishedTransferValue = null
}
,
UTTransfersTileContentView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTTransfersTileView = function(e) {
    function UTTransfersTileView() {
        return e.call(this) || this
    }
    return __extends(UTTransfersTileView, e),
    UTTransfersTileView.prototype.init = function() {
        e.prototype.init.call(this),
        this.setDimOverlayType(TileDimOverlayType.LOCKED)
    }
    ,
    UTTransfersTileView.prototype._getContentViewInstance = function() {
        return new UTTransfersTileContentView
    }
    ,
    UTTransfersTileView.prototype.setTotalTransferLabel = function(e) {
        var t = this.getContentView();
        null == t || t.setTotalTransferLabel(e)
    }
    ,
    UTTransfersTileView.prototype.setActiveTransferLabel = function(e) {
        this.getContentView().setActiveTransferLabel(e)
    }
    ,
    UTTransfersTileView.prototype.setFinishedTransferLabel = function(e) {
        this.getContentView().setFinishedTransferLabel(e)
    }
    ,
    UTTransfersTileView.prototype.setTotalTransferCount = function(e) {
        this.getContentView().setTotalTransferCount(e)
    }
    ,
    UTTransfersTileView.prototype.setActiveTransferCount = function(e) {
        this.getContentView().setActiveTransferCount(e)
    }
    ,
    UTTransfersTileView.prototype.setFinishedTransferCount = function(e) {
        this.getContentView().setFinishedTransferCount(e)
    }
    ,
    UTTransfersTileView
}(UTTileView)
  , UTHubMessagesTileView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTHubMessagesTileView() {
        var e = i.call(this) || this;
        return e._data = [],
        e._loadedImages = [],
        e._countdownTimer = null,
        e
    }
    return __extends(UTHubMessagesTileView, i),
    UTHubMessagesTileView.prototype.init = function() {
        i.prototype.init.call(this),
        this.showLoadingState()
    }
    ,
    UTHubMessagesTileView.prototype.dealloc = function() {
        this.reset(),
        i.prototype.dealloc.call(this),
        this._stopCountdownTimer()
    }
    ,
    UTHubMessagesTileView.prototype.reset = function() {
        this._loadedImages.map(function(e) {
            return e.dealloc()
        }),
        this._loadedImages = [],
        this._data = [],
        this._countdownTimer = null,
        this._tnsCarousel.teardown(this.getRootElement())
    }
    ,
    UTHubMessagesTileView.prototype.useDefaultState = function() {
        var e = services.Localization;
        this.title = e.localize("tile.fet.title"),
        this.__content.textContent = e.localize("tile.fet.message"),
        this.setInteractionState(!1),
        this.toggleClass("default", !0),
        this.hideLoadingState()
    }
    ,
    UTHubMessagesTileView.prototype.setData = function(e) {
        var t = this;
        if (this.reset(),
        this._data = e,
        0 < this._data.length) {
            this.toggleClass("default", !1);
            var i = this._data[0];
            this.addClass(UTTileView.Style.LOADING_IMAGES),
            this._data.forEach(function(e) {
                return t._tnsCarousel.appendElem(t._createMessageImg(e))
            }),
            this.setInteractionState(!JSUtils.isEmpty(i.goToLink)),
            i.titleCountdown < 0 && (this.title = i.title),
            i.bodyCountdown < 0 && this._renderContent(i.body),
            i.hasCountdowns() && this._startCountdownTimer(i),
            this.hideLoadingState()
        } else
            this.useDefaultState()
    }
    ,
    UTHubMessagesTileView.prototype.setDisplay = function(e) {
        DOMKit.toggleDisplayStyle(this.getRootElement(), e)
    }
    ,
    UTHubMessagesTileView.prototype.showLoadingState = function() {
        this.addClass(UTTileView.Style.LOADING)
    }
    ,
    UTHubMessagesTileView.prototype.hideLoadingState = function() {
        this.removeClass(UTTileView.Style.LOADING)
    }
    ,
    UTHubMessagesTileView.prototype._onSlideFadeOut = function(e) {
        var t = this
          , i = [{
            opacity: "0%"
        }, {
            opacity: "100%"
        }]
          , o = [{
            opacity: "100%"
        }, {
            opacity: "0%"
        }]
          , n = this._data[e];
        n && (this.setInteractionState(!JSUtils.isEmpty(n.goToLink)),
        this._stopCountdownTimer(),
        this.__header.animate(o, {
            duration: 200
        }).onfinish = function(e) {
            n.titleCountdown < 0 && (t.title = n.title),
            t.__header.animate(i, {
                duration: 200
            })
        }
        ,
        this.__content.animate(o, {
            duration: 200
        }).onfinish = function(e) {
            n.bodyCountdown < 0 && t._renderContent(n.body),
            n.hasCountdowns() && t._startCountdownTimer(n),
            t.__content.animate(i, {
                duration: 200
            })
        }
        )
    }
    ,
    UTHubMessagesTileView.prototype._startCountdownTimer = function(e) {
        var t = this;
        this._countdownTimer || (this._updateCountdownTimer(e),
        this._countdownTimer = new EAIntervalController(1e3,function() {
            return t._updateCountdownTimer(e)
        }
        ),
        this._countdownTimer.start())
    }
    ,
    UTHubMessagesTileView.prototype._stopCountdownTimer = function() {
        this._countdownTimer && (this._countdownTimer.dealloc(),
        this._countdownTimer = null)
    }
    ,
    UTHubMessagesTileView.prototype._updateCountdownTimer = function(e) {
        var t = services.Localization;
        0 <= e.titleCountdown && (this.title = e.title.replace(ArubaPlaceholderEnum.COUNTDOWN, t.localizeTimeRemaining(Math.max(0, e.titleCountdown - Date.now())))),
        0 <= e.bodyCountdown && this._renderContent(e.body.replace(ArubaPlaceholderEnum.COUNTDOWN, t.localizeTimeRemaining(Math.max(0, e.bodyCountdown - Date.now()))))
    }
    ,
    UTHubMessagesTileView.prototype._renderContent = function(e) {
        this.__content.innerHTML = e
    }
    ,
    UTHubMessagesTileView.prototype._createMessageImg = function(e) {
        var t = this
          , i = new EAImageView;
        return i.addClass("FETImage"),
        i.onload = function(e) {
            return t.onImageLoadComplete(i, !0)
        }
        ,
        i.onerror = function(e) {
            return t.onImageLoadComplete(i, !1)
        }
        ,
        i.src = e.bodyImagePath,
        i.getRootElement()
    }
    ,
    UTHubMessagesTileView.prototype.onImageLoadComplete = function(e, t) {
        if (e.onload = null,
        e.onerror = null,
        t || e.setDisplay(!1),
        this._loadedImages.push(e),
        this._loadedImages.length >= this._data.length && (this.removeClass(UTTileView.Style.LOADING_IMAGES),
        !this._tnsCarousel.isOn() && DOMKit.isInDOM(this.getRootElement()))) {
            var i = new TNSPropertiesDTO;
            i.nav = !0,
            i.controls = !1,
            i.loop = !0,
            i.autoplay = !0,
            i.autoplaySpeed = 4e3,
            i.container = this._tnsCarousel.getRootElement(),
            this._tnsCarousel.setup(i),
            1 < this._data.length && this._tnsCarousel.afterChange(this._onSlideFadeOut.bind(this))
        }
    }
    ,
    UTHubMessagesTileView.prototype._handleLink = function(e) {
        this._triggerActions(UTHubMessagesTileView.Event.GOTOLINK, e)
    }
    ,
    UTHubMessagesTileView.prototype._touchStarted = function(e) {
        this._isTouchTargetValid(e.target) && i.prototype._touchStarted.call(this, e)
    }
    ,
    UTHubMessagesTileView.prototype._tapDetected = function(e) {
        if (this._isTouchTargetValid(e.target)) {
            i.prototype._tapDetected.call(this, e);
            var t = this._data[this._tnsCarousel.getCurrentSlide()];
            JSUtils.isEmpty(t.goToLink) || this._handleLink(t)
        }
    }
    ,
    UTHubMessagesTileView.prototype._isTouchTargetValid = function(e) {
        for (; e !== this.__root; ) {
            if (DOMKit.hasClass(e, "tns-nav"))
                return !1;
            e.parentElement && (e = e.parentElement)
        }
        return !0
    }
    ,
    UTHubMessagesTileView.Event = Object.freeze({
        GOTOLINK: "UTHubMessagesTileView.Event.GOTOLINK"
    }),
    UTHubMessagesTileView
}(UTTileView));
UTHubMessagesTileView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-hub-messages-tile-view"),
        e.classList.add("tile"),
        this.__header = document.createElement("header"),
        this.__tileTitle = document.createElement("h1"),
        this.__tileTitle.classList.add("tileHeader"),
        this.__header.appendChild(this.__tileTitle),
        e.appendChild(this.__header),
        this._tnsCarousel = new TNSContainerView,
        this._tnsCarousel.getRootElement().classList.add("carousel"),
        e.appendChild(this._tnsCarousel.getRootElement());
        var t = document.createElement("div");
        t.classList.add("FETContent"),
        this.__content = document.createElement("p"),
        t.appendChild(this.__content),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("loadingSpinner"),
        e.appendChild(i),
        this.__root = e,
        this._generated = !0
    }
}
,
UTHubMessagesTileView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__header = null,
    this.__tileTitle = null,
    this._tnsCarousel.destroy(),
    this.__content = null
}
,
UTHubMessagesTileView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTPlayerPicksTileView = function(t) {
    function UTPlayerPicksTileView() {
        return t.call(this) || this
    }
    return __extends(UTPlayerPicksTileView, t),
    UTPlayerPicksTileView.prototype.init = function() {
        t.prototype.init.call(this);
        var e = services.Localization;
        this.title = e.localize("playerpicks.tile.header"),
        this.__label.innerHTML = e.localize("playerpicks.tile.content")
    }
    ,
    UTPlayerPicksTileView
}(UTTileView);
UTPlayerPicksTileView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-player-picks-tile-view"),
        e.classList.add("tile");
        var t = document.createElement("header");
        this.__tileTitle = document.createElement("h1"),
        this.__tileTitle.classList.add("tileHeader"),
        t.appendChild(this.__tileTitle),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("img"),
        e.appendChild(i),
        this.__label = document.createElement("div"),
        this.__label.classList.add("reward-tile--label"),
        e.appendChild(this.__label),
        this.__root = e,
        this._generated = !0
    }
}
,
UTPlayerPicksTileView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tileTitle = null,
    this.__label = null
}
,
UTPlayerPicksTileView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTUnassignedTileView = function(e) {
    function UTUnassignedTileView() {
        return e.call(this) || this
    }
    return __extends(UTUnassignedTileView, e),
    UTUnassignedTileView.prototype.init = function() {
        e.prototype.init.call(this),
        this.title = services.Localization.localize("navbar.label.newitems")
    }
    ,
    UTUnassignedTileView.prototype.setNumberOfItems = function(e) {
        this.__number.textContent = e.toString(),
        this.__label.innerHTML = services.Localization.localize(1 === e ? "unassigned.tile.itemRemaining" : "unassigned.tile.itemsRemaining")
    }
    ,
    UTUnassignedTileView
}(UTTileView);
UTUnassignedTileView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-unassigned-tile-view"),
        e.classList.add("tile");
        var t = document.createElement("header");
        this.__tileTitle = document.createElement("h1"),
        this.__tileTitle.classList.add("tileHeader"),
        t.appendChild(this.__tileTitle),
        e.appendChild(t);
        var i = document.createElement("div");
        i.classList.add("img"),
        e.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("data-container"),
        this.__number = document.createElement("span"),
        this.__number.classList.add("itemsNumber"),
        o.appendChild(this.__number),
        this.__label = document.createElement("span"),
        this.__label.classList.add("itemsLabel"),
        o.appendChild(this.__label),
        e.appendChild(o),
        this.__root = e,
        this._generated = !0
    }
}
,
UTUnassignedTileView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tileTitle = null,
    this.__number = null,
    this.__label = null
}
,
UTUnassignedTileView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTHomeHubView = function(e) {
    function UTHomeHubView() {
        return e.call(this) || this
    }
    return __extends(UTHomeHubView, e),
    UTHomeHubView.prototype.init = function() {
        var e = services.Localization;
        this._academyTile.init(),
        this._academyTile.title = e.localize("academy.tile.title"),
        this._activeSquadTile.init(),
        this._activeSquadTile.title = e.localize("navbar.label.activesquad"),
        this._objectivesTile.init(),
        this._objectivesTile.title = e.localize("navbar.label.objectivehub"),
        this._hubMessagesTile.init(),
        this._sbcTile.init(),
        this._sbcTile.title = e.localize("navbar.label.sbcHub"),
        this._cgeTile.init(),
        this._cgeTile.title = e.localize("cge.tile.title"),
        this._proClubsTile.init(),
        this._proClubsTile.title = e.localize("proclubs.tile.title"),
        this._gameModesHubTile.init(),
        this._gameModesHubTile.title = e.localize("gamemodes.tile.title"),
        this._transferListTile.init(),
        this._transferListTile.title = e.localize("navbar.label.tradepile"),
        this._transferListTile.setTotalTransferLabel(e.localize("dock.label.items")),
        this._transferListTile.setTotalTransferCount(0),
        this._transferListTile.setActiveTransferLabel(e.localize("dock.label.selling")),
        this._transferListTile.setActiveTransferCount(0),
        this._transferListTile.setFinishedTransferLabel(e.localize("tradepile.dock.categories.sold")),
        this._transferListTile.setFinishedTransferCount(0),
        this._unassignedTile.init(),
        this._unassignedTile.setDisplay(!1),
        this._playerPicksTile.init(),
        this._playerPicksTile.setDisplay(!1)
    }
    ,
    UTHomeHubView.prototype.renderActiveSquadTile = function(e) {
        this._activeSquadTile.setSquad(e)
    }
    ,
    UTHomeHubView.prototype.renderHubMessagesTile = function(e) {
        this._hubMessagesTile.setData(e)
    }
    ,
    UTHomeHubView.prototype.renderAcademytile = function(e) {
        this._academyTile.setUnreadCount(e)
    }
    ,
    UTHomeHubView.prototype.renderUnassignedTile = function(e) {
        this._unassignedTile.setNumberOfItems(e),
        this._unassignedTile.setDisplay(0 < e)
    }
    ,
    UTHomeHubView.prototype.getAcademyTile = function() {
        return this._academyTile
    }
    ,
    UTHomeHubView.prototype.getActiveSquadTile = function() {
        return this._activeSquadTile
    }
    ,
    UTHomeHubView.prototype.getObjectivesTile = function() {
        return this._objectivesTile
    }
    ,
    UTHomeHubView.prototype.getSBCTile = function() {
        return this._sbcTile
    }
    ,
    UTHomeHubView.prototype.getCGETile = function() {
        return this._cgeTile
    }
    ,
    UTHomeHubView.prototype.getProClubsTile = function() {
        return this._proClubsTile
    }
    ,
    UTHomeHubView.prototype.getGameModesHubTile = function() {
        return this._gameModesHubTile
    }
    ,
    UTHomeHubView.prototype.getTransferListTile = function() {
        return this._transferListTile
    }
    ,
    UTHomeHubView.prototype.getUnassignedTile = function() {
        return this._unassignedTile
    }
    ,
    UTHomeHubView.prototype.getHubMessagesTile = function() {
        return this._hubMessagesTile
    }
    ,
    UTHomeHubView.prototype.getPlayerPicksTile = function() {
        return this._playerPicksTile
    }
    ,
    UTHomeHubView
}(EAView);
UTHomeHubView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div")
          , t = document.createElement("div");
        t.classList.add("grid"),
        t.classList.add("layout-hub"),
        this._unassignedTile = new UTUnassignedTileView,
        this._unassignedTile.getRootElement().classList.add("col-1-1"),
        t.appendChild(this._unassignedTile.getRootElement()),
        this._playerPicksTile = new UTPlayerPicksTileView,
        this._playerPicksTile.getRootElement().classList.add("col-1-1"),
        t.appendChild(this._playerPicksTile.getRootElement()),
        this._objectivesTile = new UTObjectivesHubTileView,
        this._objectivesTile.getRootElement().classList.add("col-1-2"),
        this._objectivesTile.getRootElement().classList.add("ut-tile-hub-objective"),
        t.appendChild(this._objectivesTile.getRootElement()),
        this._sbcTile = new UTGraphicalInfoTileView,
        this._sbcTile.getRootElement().classList.add("col-1-2"),
        this._sbcTile.getRootElement().classList.add("ut-tile-hub-sbc"),
        t.appendChild(this._sbcTile.getRootElement()),
        this._hubMessagesTile = new UTHubMessagesTileView,
        this._hubMessagesTile.getRootElement().classList.add("col-2-3-md"),
        this._hubMessagesTile.getRootElement().classList.add("col-1-1"),
        t.appendChild(this._hubMessagesTile.getRootElement()),
        this._academyTile = new UTAcademyHubTileView,
        this._academyTile.getRootElement().classList.add("col-1-3-md"),
        this._academyTile.getRootElement().classList.add("col-1-2"),
        t.appendChild(this._academyTile.getRootElement()),
        this._transferListTile = new UTTransfersTileView,
        this._transferListTile.getRootElement().classList.add("home-hub-transfer-tile"),
        this._transferListTile.getRootElement().classList.add("col-1-3-md"),
        this._transferListTile.getRootElement().classList.add("col-1-2"),
        this._transferListTile.getRootElement().classList.add("ut-tile-transfer-list"),
        this._transferListTile.getRootElement().classList.add("ut-tile-transfers"),
        t.appendChild(this._transferListTile.getRootElement()),
        this._activeSquadTile = new UTSquadTileView,
        this._activeSquadTile.getRootElement().classList.add("col-2-3-md"),
        this._activeSquadTile.getRootElement().classList.add("col-1-1"),
        t.appendChild(this._activeSquadTile.getRootElement()),
        this._gameModesHubTile = new UTGraphicalInfoTileView,
        this._gameModesHubTile.getRootElement().classList.add("ut-tile-hub-gamemodeshub"),
        this._gameModesHubTile.getRootElement().classList.add("col-1-1"),
        t.appendChild(this._gameModesHubTile.getRootElement()),
        this._cgeTile = new UTGraphicalInfoTileView,
        this._cgeTile.getRootElement().classList.add("ut-tile-hub-cge"),
        this._cgeTile.getRootElement().classList.add("col-1-2"),
        t.appendChild(this._cgeTile.getRootElement()),
        this._proClubsTile = new UTGraphicalInfoTileView,
        this._proClubsTile.getRootElement().classList.add("ut-tile-hub-proclubs"),
        this._proClubsTile.getRootElement().classList.add("col-1-2"),
        t.appendChild(this._proClubsTile.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTHomeHubView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._unassignedTile.destroy(),
    this._playerPicksTile.destroy(),
    this._objectivesTile.destroy(),
    this._sbcTile.destroy(),
    this._hubMessagesTile.destroy(),
    this._academyTile.destroy(),
    this._transferListTile.destroy(),
    this._activeSquadTile.destroy(),
    this._gameModesHubTile.destroy(),
    this._cgeTile.destroy(),
    this._proClubsTile.destroy()
}
,
UTHomeHubView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTGameModeTileView = function(e) {
    function UTGameModeTileView() {
        return e.call(this) || this
    }
    return __extends(UTGameModeTileView, e),
    UTGameModeTileView.prototype.init = function() {
        e.prototype.init.call(this),
        this._tag.init()
    }
    ,
    UTGameModeTileView.prototype.setDescription = function(e) {
        var t = this.getContentView();
        e && t && t.setDescription(e)
    }
    ,
    UTGameModeTileView.prototype.setTagText = function(e) {
        this._tag && (this._tag.setRoundedCorner(isPhone() ? UTLabelView.Rounded.TOP_RIGHT : UTLabelView.Rounded.BOTTOM_RIGHT),
        this._tag.setLabel(e))
    }
    ,
    UTGameModeTileView.prototype.toggleRewardsState = function(e) {
        this.toggleClass("has-unclaimed-rewards", e)
    }
    ,
    UTGameModeTileView
}(UTGraphicalInfoTileView);
UTGameModeTileView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-game-mode-tile-view"),
        e.classList.add("tile");
        var t = document.createElement("div");
        t.classList.add("loadingSpinner"),
        e.appendChild(t);
        var i = document.createElement("header");
        this.__tileTitle = document.createElement("h1"),
        this.__tileTitle.classList.add("tileHeader"),
        i.appendChild(this.__tileTitle),
        e.appendChild(i),
        this.__tileContent = document.createElement("div"),
        this.__tileContent.classList.add("tileContent"),
        this._tag = new UTLabelView,
        this.__tileContent.appendChild(this._tag.getRootElement()),
        e.appendChild(this.__tileContent),
        this.__root = e,
        this._generated = !0
    }
}
,
UTGameModeTileView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__tileTitle = null,
    this.__tileContent = null,
    this._tag.destroy()
}
,
UTGameModeTileView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTGameModesHubView = function(i) {
    function UTGameModesHubView(e) {
        var t = i.call(this) || this;
        return t.loc = e.localization,
        t
    }
    return __extends(UTGameModesHubView, i),
    UTGameModesHubView.prototype.init = function() {
        var e = this.loc;
        this._squadBattlesTile.init(),
        this._squadBattlesTile.title = e.localize("gamemodes.squadbattles.tile.title"),
        this._squadBattlesTile.setDescription(e.localize("gamemodes.squadbattles.tile.description")),
        this._squadBattlesTile.setInteractionState(!1),
        this._rivalsTile.init(),
        this._rivalsTile.title = e.localize("gamemodes.rivals.tile.title"),
        this._rivalsTile.setDescription(e.localize("gamemodes.rivals.tile.description")),
        this._rivalsTile.setInteractionState(!1),
        this._championsTile.init(),
        this._championsTile.title = e.localize("gamemodes.champions.tile.title"),
        this._championsTile.setDescription(e.localize("gamemodes.champions.tile.description")),
        this._championsTile.setInteractionState(!1),
        this._socialTile.init(),
        this._socialTile.title = e.localize("gamemodes.social.tile.title"),
        this._socialTile.setDescription(e.localize("gamemodes.social.tile.description")),
        this._socialTile.setInteractionState(!1)
    }
    ,
    UTGameModesHubView.prototype.getSquadBattlesTile = function() {
        return this._squadBattlesTile
    }
    ,
    UTGameModesHubView.prototype.getRivalsTile = function() {
        return this._rivalsTile
    }
    ,
    UTGameModesHubView.prototype.getChampsTile = function() {
        return this._championsTile
    }
    ,
    UTGameModesHubView.prototype.getSocialTile = function() {
        return this._socialTile
    }
    ,
    UTGameModesHubView
}(EAView);
UTGameModesHubView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div")
          , t = document.createElement("div");
        t.classList.add("grid"),
        t.classList.add("layout-hub"),
        this._squadBattlesTile = new UTGameModeTileView,
        this._squadBattlesTile.getRootElement().classList.add("col-1-2"),
        this._squadBattlesTile.getRootElement().classList.add("ut-game-mode-tile-view--squadbattles"),
        t.appendChild(this._squadBattlesTile.getRootElement()),
        this._rivalsTile = new UTGameModeTileView,
        this._rivalsTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._rivalsTile.getRootElement().classList.add("col-1-2"),
        this._rivalsTile.getRootElement().classList.add("ut-game-mode-tile-view--rivals"),
        t.appendChild(this._rivalsTile.getRootElement()),
        this._championsTile = new UTGameModeTileView,
        this._championsTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._championsTile.getRootElement().classList.add("col-1-2"),
        this._championsTile.getRootElement().classList.add("ut-game-mode-tile-view--champions"),
        t.appendChild(this._championsTile.getRootElement()),
        this._socialTile = new UTGameModeTileView,
        this._socialTile.getRootElement().classList.add("ut-tile-view--with-gfx"),
        this._socialTile.getRootElement().classList.add("col-1-2"),
        this._socialTile.getRootElement().classList.add("ut-game-mode-tile-view--social"),
        t.appendChild(this._socialTile.getRootElement()),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTGameModesHubView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._squadBattlesTile.destroy(),
    this._rivalsTile.destroy(),
    this._championsTile.destroy(),
    this._socialTile.destroy()
}
,
UTGameModesHubView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTChampionsViewModel = function(i) {
    function UTChampionsViewModel(e) {
        var t = i.call(this) || this;
        return t.currentEvent = null,
        t.service = e,
        t
    }
    return __extends(UTChampionsViewModel, i),
    UTChampionsViewModel.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.currentEvent && (this.currentEvent = null)
    }
    ,
    UTChampionsViewModel.prototype.requestEvent = function() {
        var t = this
          , e = this.service.requestChampsHub();
        return this._trackRequest(e, !0, function(e) {
            e.success && JSUtils.isObject(e.response) ? t.currentEvent = e.response.event : t.currentEvent = null
        }),
        e
    }
    ,
    UTChampionsViewModel.prototype.claimRewards = function() {
        var e = this.service.claimRewards();
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTChampionsViewModel
}(UTViewModel)
  , UTRivalsViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTRivalsViewModel(e) {
        var t = i.call(this) || this;
        return t.currentEvent = null,
        t.service = e,
        t
    }
    return __extends(UTRivalsViewModel, i),
    UTRivalsViewModel.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.currentEvent && (this.currentEvent = null)
    }
    ,
    UTRivalsViewModel.prototype.requestEvent = function() {
        var i = this
          , e = this.service.getEvent();
        return this._trackRequest(e, !0, function(e) {
            var t;
            i.currentEvent = JSUtils.isObject(e.response) ? null === (t = e.response) || void 0 === t ? void 0 : t.event : null
        }),
        e
    }
    ,
    UTRivalsViewModel.prototype.getWeeklyRewardsInfo = function() {
        var e = this.service.getWeeklyRewardsInfo();
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTRivalsViewModel.prototype.claimWeeklyRivalsRewardsById = function(e) {
        var t = this.service.claimWeeklyRivalsRewardsById(e);
        return this._trackRequest(t, !0),
        t
    }
    ,
    UTRivalsViewModel
}(UTViewModel))
  , UTSquadBattlesViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTSquadBattlesViewModel(e) {
        var t = i.call(this) || this;
        return t.currentEvent = null,
        t.service = e,
        t
    }
    return __extends(UTSquadBattlesViewModel, i),
    UTSquadBattlesViewModel.prototype.dealloc = function() {
        i.prototype.dealloc.call(this),
        this.currentEvent && (this.currentEvent = null)
    }
    ,
    UTSquadBattlesViewModel.prototype.requestEvent = function() {
        var i = this
          , e = this.service.requestCurrentEventFullScope();
        return this._trackRequest(e, !0, function(e) {
            var t;
            i.currentEvent = (null === (t = e.data) || void 0 === t ? void 0 : t.event) ? i.sortedEvent(e.data.event) : null
        }),
        e
    }
    ,
    UTSquadBattlesViewModel.prototype.sortedEvent = function(e) {
        var t = e.prizeTiers.sort(function(e, t) {
            return e.level > t.level ? -1 : e.level < t.level ? 1 : 0
        });
        return e.prizeTiers = t,
        e
    }
    ,
    UTSquadBattlesViewModel.prototype.claimRewards = function() {
        var e = this.service.claimRewards();
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTSquadBattlesViewModel
}(UTViewModel))
  , UTSocialViewModel = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(i) {
    function UTSocialViewModel(e) {
        var t = i.call(this) || this;
        return t.service = e,
        t
    }
    return __extends(UTSocialViewModel, i),
    UTSocialViewModel.prototype.dealloc = function() {
        i.prototype.dealloc.call(this)
    }
    ,
    UTSocialViewModel.prototype.requestEvents = function() {
        var e = this.service.requestSocialHub();
        return this._trackRequest(e, !0),
        e
    }
    ,
    UTSocialViewModel
}(UTViewModel))
  , UTSquadBattlesTierView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadBattlesTierView() {
        var e = t.call(this) || this;
        return e.id = -1,
        e.levelRewards = [],
        e
    }
    return __extends(UTSquadBattlesTierView, t),
    UTSquadBattlesTierView.prototype.init = function() {
        t.prototype.init.call(this),
        this._rewardsInfoBtn.init(),
        this._rewardsInfoBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._rewardsInfoBtn.setInteractionState(!1),
        this.setInteractionState(!0)
    }
    ,
    UTSquadBattlesTierView.prototype.setTierLevelRewardOptions = function(e) {
        this.levelRewards = e
    }
    ,
    UTSquadBattlesTierView.prototype.setState = function(e) {
        e === TierViewState.NONE ? this.removeClass("in-progress surpassed obtained") : (this.toggleClass("in-progress", e === TierViewState.IN_PROGRESS),
        this.toggleClass("surpassed", e === TierViewState.SURPASSED),
        this.toggleClass("obtained", e === TierViewState.OBTAINED))
    }
    ,
    UTSquadBattlesTierView.prototype.setLabel = function(e) {
        this.__label.textContent = e
    }
    ,
    UTSquadBattlesTierView.prototype.setupRewardsCarousel = function(e) {
        0 !== this.levelRewards.length ? (0 < e && this._rewardsCarousel.setDefaultIndex(e),
        this._rewardsCarousel.setupRewards(this.levelRewards)) : DebugUtils.Assert(!1, "Tried to setup rewards for a level that has no reward data.")
    }
    ,
    UTSquadBattlesTierView.prototype.onButtonSelected = function(e, t, i) {
        if (this.isInteractionEnabled()) {
            var o = {
                id: this.id
            };
            e === this._rewardsInfoBtn && this._triggerActions(UTSquadBattlesTierView.Event.REWARDS_INFO, o)
        }
    }
    ,
    UTSquadBattlesTierView.Event = {
        REWARDS_INFO: "UTSquadBattlesTierView.Event.REWARDS_INFO"
    },
    UTSquadBattlesTierView
}(UTTierView));
UTTierView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tier-view"),
        this.__overlay = document.createElement("div"),
        this.__overlay.classList.add("ut-tier-view--overlay"),
        this.__overlayText = document.createElement("span"),
        this.__overlay.appendChild(this.__overlayText),
        e.appendChild(this.__overlay);
        var t = document.createElement("section");
        t.classList.add("ut-tier-view--meta"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-tier-view--title"),
        t.appendChild(this.__title),
        this.__label = document.createElement("div"),
        this.__label.classList.add("ut-tier-view--label"),
        t.appendChild(this.__label),
        this._claimBtn = new UTStandardButtonControl,
        this._claimBtn.getRootElement().classList.add("call-to-action"),
        this._claimBtn.getRootElement().classList.add("mini"),
        this._claimBtn.getRootElement().classList.add("ut-tier-view--button"),
        t.appendChild(this._claimBtn.getRootElement()),
        e.appendChild(t),
        this._rewardsCarousel = new UTGameModesRewardsCarouselView,
        this._rewardsCarousel.getRootElement().classList.add("carousel"),
        e.appendChild(this._rewardsCarousel.getRootElement()),
        this.__choiceNumContainer = document.createElement("div"),
        this.__choiceNumContainer.classList.add("ut-tier-view--choices"),
        this.__choiceNum = document.createElement("span"),
        this.__choiceNumContainer.appendChild(this.__choiceNum),
        e.appendChild(this.__choiceNumContainer),
        this._rewardsInfoBtn = new UTImageButtonControl,
        this._rewardsInfoBtn.getRootElement().classList.add("ut-tier-view--button--info"),
        this._rewardsInfoBtn.getRootElement().classList.add("info-btn"),
        e.appendChild(this._rewardsInfoBtn.getRootElement()),
        this.__root = e,
        this._generated = !0
    }
}
,
UTTierView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__overlay = null,
    this.__overlayText = null,
    this.__title = null,
    this.__label = null,
    this._claimBtn.destroy(),
    this._rewardsCarousel.destroy(),
    this.__choiceNumContainer = null,
    this.__choiceNum = null,
    this._rewardsInfoBtn.destroy()
}
,
UTTierView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTProgressionHeaderView = function(e) {
    function UTProgressionHeaderView() {
        return e.call(this) || this
    }
    return __extends(UTProgressionHeaderView, e),
    UTProgressionHeaderView.prototype.setTitle = function(e) {
        this.__title.textContent = e
    }
    ,
    UTProgressionHeaderView.prototype.setSubtitle = function(e) {
        this.__subtitle.textContent = e
    }
    ,
    UTProgressionHeaderView.prototype.setCountdown = function(e) {
        this.__countdown.textContent = e
    }
    ,
    UTProgressionHeaderView.prototype.toggleCountdown = function(e) {
        DOMKit.toggleDisplayStyle(this.__countdown, e)
    }
    ,
    UTProgressionHeaderView.prototype.setProgress = function(e) {
        this._progressBar.setProgress(e)
    }
    ,
    UTProgressionHeaderView.prototype.setProgressLabel = function(e) {
        this._progressBar.setProgressLabel(e)
    }
    ,
    UTProgressionHeaderView.prototype.toggleProgressBar = function(e) {
        this.__progressBarContainer.style.display = e ? "" : "none",
        this._progressBar.setDisplay(e)
    }
    ,
    UTProgressionHeaderView.prototype.toggleInfo = function(e) {
        e ? (this._infoBtn.init(),
        this._infoBtn.addTarget(this, this.onButtonSelected, EventType.TAP),
        this._infoBtn.setInteractionState(!0)) : (this._infoBtn.setInteractionState(!1),
        this._infoBtn.removeTarget(this, this.onButtonSelected, EventType.TAP)),
        this._infoBtn.setDisplay(e)
    }
    ,
    UTProgressionHeaderView.prototype.onButtonSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTProgressionHeaderView.Event.INFO_TAP)
    }
    ,
    UTProgressionHeaderView.Event = {
        INFO_TAP: "UTProgressionHeaderView.INFO_TAP"
    },
    UTProgressionHeaderView
}(EATargetActionView)
  , UTSquadBattlesProgressionHeaderView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTSquadBattlesProgressionHeaderView() {
        var e = t.call(this) || this;
        return e.toggleCountdown(!1),
        e
    }
    return __extends(UTSquadBattlesProgressionHeaderView, t),
    UTSquadBattlesProgressionHeaderView.prototype.setProgressSecondLabel = function(e) {
        var t = document.createElement("span");
        t.className = "ut-squad-battles-progression-header-view--required",
        t.textContent = e,
        this._progressBar.getRootElement().appendChild(t)
    }
    ,
    UTSquadBattlesProgressionHeaderView.prototype.setTierPoints = function(e, t, i) {
        var o = e < i ? (e - t) / Math.max(i - t, 1) * 100 : 100;
        this.setProgress(o)
    }
    ,
    UTSquadBattlesProgressionHeaderView.prototype.setRankPoints = function(e, t, i) {
        var o = e < i ? (i - e) / Math.max(i - t, 1) * 100 : 100;
        this.setProgress(o)
    }
    ,
    UTSquadBattlesProgressionHeaderView.prototype.setTier = function(e) {
        var t = "";
        switch (e) {
        case 1:
            t = "SquadBattles_0_1.png";
            break;
        case 2:
            t = "SquadBattles_0_2.png";
            break;
        case 3:
            t = "SquadBattles_0_3.png";
            break;
        case 4:
            t = "SquadBattles_1_1.png";
            break;
        case 5:
            t = "SquadBattles_1_2.png";
            break;
        case 6:
            t = "SquadBattles_1_3.png";
            break;
        case 7:
            t = "SquadBattles_2_1.png";
            break;
        case 8:
            t = "SquadBattles_2_2.png";
            break;
        case 9:
            t = "SquadBattles_2_3.png";
            break;
        case 10:
            t = "SquadBattles_3_1.png";
            break;
        case 11:
            t = "SquadBattles_3_2.png";
            break;
        case 12:
            t = "SquadBattles_3_3.png";
            break;
        default:
            t = "SquadBattles_Unranked.png"
        }
        this._tierImage.src = "images/gameModes/squadBattles/" + t
    }
    ,
    UTSquadBattlesProgressionHeaderView.prototype.setRank = function(e) {
        this._tierImage.src = "images/gameModes/squadBattles/SquadBattles_ranked.png",
        this.__tierValue.textContent = e.toString()
    }
    ,
    UTSquadBattlesProgressionHeaderView.prototype.setWeeklyPointsLabel = function(e) {
        this.__currentPointsLabel.textContent = e
    }
    ,
    UTSquadBattlesProgressionHeaderView
}(UTProgressionHeaderView));
UTSquadBattlesProgressionHeaderView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-battles-progression-header-view"),
        e.classList.add("ut-progression-header-view");
        var t = document.createElement("div");
        t.classList.add("ut-progression-header-view--body");
        var i = document.createElement("div");
        i.classList.add("ut-progression-header-view--image"),
        this._tierImage = new EAImageView,
        i.appendChild(this._tierImage.getRootElement()),
        this.__tierValue = document.createElement("div"),
        i.appendChild(this.__tierValue),
        t.appendChild(i);
        var o = document.createElement("div");
        o.classList.add("ut-progression-header-view--meta"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-progression-header-view--title"),
        o.appendChild(this.__title),
        this.__subtitle = document.createElement("p"),
        this.__subtitle.classList.add("ut-progression-header-view--subtitle"),
        o.appendChild(this.__subtitle),
        this.__currentPointsLabel = document.createElement("p"),
        this.__currentPointsLabel.classList.add("ut-squad-battles-progression-header-view--points"),
        o.appendChild(this.__currentPointsLabel),
        this.__countdown = document.createElement("p"),
        this.__countdown.classList.add("ut-progression-header-view--countdown"),
        o.appendChild(this.__countdown),
        t.appendChild(o),
        e.appendChild(t),
        this._infoBtn = new UTImageButtonControl,
        this._infoBtn.getRootElement().classList.add("info-btn"),
        this._infoBtn.getRootElement().classList.add("ut-progression-header-view--button--info"),
        e.appendChild(this._infoBtn.getRootElement()),
        this.__progressBarContainer = document.createElement("div"),
        this.__progressBarContainer.classList.add("ut-squad-battles-progression-header-view--progress-container"),
        this._progressBar = new UTProgressBarView,
        this.__progressBarContainer.appendChild(this._progressBar.getRootElement()),
        e.appendChild(this.__progressBarContainer),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadBattlesProgressionHeaderView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._tierImage.destroy(),
    this.__tierValue = null,
    this.__title = null,
    this.__subtitle = null,
    this.__currentPointsLabel = null,
    this.__countdown = null,
    this._infoBtn.destroy(),
    this.__progressBarContainer = null,
    this._progressBar.destroy()
}
,
UTSquadBattlesProgressionHeaderView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTGameModesTierProgressBarView = function(e) {
    function UTGameModesTierProgressBarView() {
        return null !== e && e.apply(this, arguments) || this
    }
    return __extends(UTGameModesTierProgressBarView, e),
    UTGameModesTierProgressBarView
}(UTTierProgressBarView);
UTGameModesTierProgressBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tier-progress-bar--section"),
        e.classList.add("ut-game-modes-tier-progress-bar-view"),
        this.__fill = document.createElement("div"),
        this.__fill.classList.add("ut-tier-progress-bar--fill"),
        this.__progressLabel = document.createElement("span"),
        this.__fill.appendChild(this.__progressLabel),
        e.appendChild(this.__fill);
        var t = document.createElement("div");
        t.classList.add("ut-tier-progress-bar--label"),
        this.__label = document.createElement("span"),
        t.appendChild(this.__label),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTGameModesTierProgressBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__fill = null,
    this.__progressLabel = null,
    this.__label = null
}
,
UTGameModesTierProgressBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadBattlesTierProgressBarView = function(e) {
    function UTSquadBattlesTierProgressBarView() {
        return e.call(this) || this
    }
    return __extends(UTSquadBattlesTierProgressBarView, e),
    UTSquadBattlesTierProgressBarView.prototype.setTier = function(e) {
        var t = "";
        switch (e) {
        case 1:
            t = "SquadBattles_0_1.png";
            break;
        case 2:
            t = "SquadBattles_0_2.png";
            break;
        case 3:
            t = "SquadBattles_0_3.png";
            break;
        case 4:
            t = "SquadBattles_1_1.png";
            break;
        case 5:
            t = "SquadBattles_1_2.png";
            break;
        case 6:
            t = "SquadBattles_1_3.png";
            break;
        case 7:
            t = "SquadBattles_2_1.png";
            break;
        case 8:
            t = "SquadBattles_2_2.png";
            break;
        case 9:
            t = "SquadBattles_2_3.png";
            break;
        case 10:
            t = "SquadBattles_3_1.png";
            break;
        case 11:
            t = "SquadBattles_3_2.png";
            break;
        case 12:
            t = "SquadBattles_3_3.png";
            break;
        default:
            t = "SquadBattle_Unranked.png"
        }
        this._tierImage.src = "images/gameModes/squadBattles/" + t
    }
    ,
    UTSquadBattlesTierProgressBarView.prototype.setRank = function(e) {
        this.addClass("rank"),
        this._tierImage.src = "images/gameModes/squadBattles/SquadBattles_ranked.png",
        this.setProgressLabel(e.toString())
    }
    ,
    UTSquadBattlesTierProgressBarView.prototype.setProgressLabel = function(e) {
        this.__tierValue.textContent = e
    }
    ,
    UTSquadBattlesTierProgressBarView
}(UTGameModesTierProgressBarView);
UTSquadBattlesTierProgressBarView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-tier-progress-bar--section"),
        e.classList.add("ut-squad-battles-tier-progress-bar-view"),
        this.__fill = document.createElement("div"),
        this.__fill.classList.add("ut-tier-progress-bar--fill"),
        this.__progressLabel = document.createElement("span"),
        this.__fill.appendChild(this.__progressLabel),
        e.appendChild(this.__fill);
        var t = document.createElement("div");
        t.classList.add("ut-squad-battles-tier-progress-bar-view--image"),
        this._tierImage = new EAImageView,
        t.appendChild(this._tierImage.getRootElement()),
        this.__tierValue = document.createElement("div"),
        t.appendChild(this.__tierValue),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadBattlesTierProgressBarView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__fill = null,
    this.__progressLabel = null,
    this._tierImage.destroy(),
    this.__tierValue = null
}
,
UTSquadBattlesTierProgressBarView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadBattlesView = function(i) {
    function UTSquadBattlesView(e) {
        var t = i.call(this) || this;
        return t.activeProgressBar = null,
        t.levels = [],
        t.loc = e.localization,
        t.progressBars = [],
        t
    }
    return __extends(UTSquadBattlesView, i),
    UTSquadBattlesView.prototype.dealloc = function() {
        this.clearViews(),
        i.prototype.dealloc.call(this)
    }
    ,
    UTSquadBattlesView.prototype.clearViews = function() {
        this.levels.forEach(function(e) {
            return e.dealloc()
        }),
        this.progressBars.forEach(function(e) {
            return e.dealloc()
        }),
        this.levels = [],
        this.progressBars = [],
        this.activeProgressBar = null
    }
    ,
    UTSquadBattlesView.prototype.scrollToActiveTier = function() {
        this.activeProgressBar && this._header && (isPhone() ? this.getRootElement().scrollTop = this.activeProgressBar.getRootElement().offsetTop + this._header.getRootElement().clientHeight - 32 : this.__container.scrollLeft = this.activeProgressBar.getRootElement().offsetLeft),
        this.setInteractionState(!0)
    }
    ,
    UTSquadBattlesView.prototype.generateEventTierProgress = function(e, t, i, o) {
        var n = new UTSquadBattlesTierProgressBarView;
        if (n.init(),
        n.direction = isPhone() ? TierProgressBarDirection.VERTICAL : TierProgressBarDirection.HORIZONTAL,
        n.setTier(e.level),
        -1 === i)
            n.setProgress(0);
        else if (o || i < e.level)
            n.setProgress(100),
            n.setTierState("complete");
        else if (t >= e.startPoints || t >= e.previousTierStartPoints) {
            var r = t < e.startPoints ? (t - e.previousTierStartPoints) / (e.startPoints - e.previousTierStartPoints) * 100 : 100;
            n.setProgress(r),
            n.setProgressMarker(t),
            100 <= r ? n.setTierState("complete") : n.setTierState("inprogress")
        }
        return this.addSubview(n, this.__progressView),
        !this.activeProgressBar && i <= e.level && (this.activeProgressBar = n),
        n
    }
    ,
    UTSquadBattlesView.prototype.generateEventTierTile = function(e, t, i) {
        var o = new UTSquadBattlesTierView
          , n = TierViewState.NONE;
        return i ? n = TierViewState.SURPASSED : -1 === t ? n = TierViewState.NONE : t < e.level ? n = TierViewState.SURPASSED : t === e.level ? n = TierViewState.OBTAINED : t - 1 === e.level && (n = TierViewState.IN_PROGRESS),
        o.init(),
        o.setId(e.awardSetId),
        o.setStyle(isPhone() ? "vertical" : "horizontal"),
        o.setTierLevelRewardOptions(e.rewardSet.rewards),
        o.setTitle(this.loc.localize("squadbattles.tier" + e.level + ".title")),
        o.setState(n),
        o.setLabel(this.loc.localize("squadbattles.tier.pointsentry", [this.loc.localizeNumber(e.startPoints)])),
        o.toggleRewardsInfoButton(n !== TierViewState.SURPASSED && 1 < e.rewardSet.rewards.length),
        o.addTarget(this, this.onRewardInfoSelected, UTSquadBattlesTierView.Event.REWARDS_INFO),
        this.addSubview(o, this.__tierView),
        o
    }
    ,
    UTSquadBattlesView.prototype.generateRankProgress = function(e, t) {
        var i = new UTSquadBattlesTierProgressBarView;
        return i.init(),
        i.direction = isPhone() ? TierProgressBarDirection.VERTICAL : TierProgressBarDirection.HORIZONTAL,
        i.setRank(e.start),
        0 < t && (t >= e.start && t <= e.end ? (i.setProgress(100),
        i.setTierState("inprogress"),
        this.activeProgressBar = i) : t < e.start && i.setTierState("complete")),
        this.addSubview(i, this.__progressView),
        i
    }
    ,
    UTSquadBattlesView.prototype.generateRankTile = function(e, t) {
        var i = new UTSquadBattlesTierView
          , o = TierViewState.NONE;
        return 0 < t && (t < e.start ? o = TierViewState.SURPASSED : t >= e.start && t < e.end && (o = TierViewState.OBTAINED,
        i.setLabel(this.loc.localize("squadbattles.tier.requirements-met")))),
        i.init(),
        i.setId(e.awardSetId),
        i.setStyle(isPhone() ? "vertical" : "horizontal"),
        i.setTierLevelRewardOptions(e.rewardSet.rewards),
        i.setTitle(e.start === e.end ? this.loc.localize("squadbattles.rank.title", [e.start.toString()]) : this.loc.localize("squadbattles.rank.title-range", [e.start.toString(), e.end.toString()])),
        i.setState(o),
        i.toggleRewardsInfoButton(o !== TierViewState.SURPASSED && 1 < e.rewardSet.rewards.length),
        i.addTarget(this, this.onRewardInfoSelected, UTSquadBattlesTierView.Event.REWARDS_INFO),
        this.addSubview(i, this.__tierView),
        i
    }
    ,
    UTSquadBattlesView.prototype.setEvent = function(t) {
        var i = this;
        this.clearViews(),
        DOMKit.removeClass(this.__progressView, "horizontal vertical"),
        DOMKit.addClass(this.__progressView, isPhone() ? "vertical" : "horizontal");
        var e = t.isRanked() ? t.prizeTiers.filter(function(e) {
            return e.type === SquadBattlesTierType.RANK_TIERS
        }).find(function(e) {
            return t.rank >= e.start && t.rank <= e.end
        }) : t.prizeTiers.filter(function(e) {
            return e.type === SquadBattlesTierType.POINT_TIERS
        }).find(function(e) {
            return t.userCurrentTierLevel === e.level
        });
        e || (e = t.prizeTiers.filter(function(e) {
            return e.type === SquadBattlesTierType.POINT_TIERS
        })[0],
        this._header.toggleProgressBar(!1));
        var o = Date.now() / MS_PER_SECOND;
        if (0 <= t.endTime - o && (this._header.setCountdown(this.loc.localizeTimeRemaining(t.endTime - o)),
        this._header.toggleCountdown(!0)),
        t.isRanked())
            this._header.setTitle(this.loc.localize("squadbattles.rank.title", [t.rank.toString()])),
            this._header.setRank(t.rank),
            this._header.toggleProgressBar(!0),
            this._header.setRankPoints(t.rank, e.start, e.end),
            this._header.setProgressLabel(this.loc.localize("gamemodes.common.rank", [e.end.toString()])),
            this._header.setProgressSecondLabel(this.loc.localize("gamemodes.common.rank", [e.start.toString()])),
            this._header.toggleInfo(!1);
        else {
            t.hasProgression() ? this._header.setTitle(this.loc.localize("squadbattles.tier" + e.level + ".title")) : this._header.setTitle(this.loc.localize("squadbattles.noprogress.title")),
            this._header.setSubtitle(this.loc.localize("squadbattles.gamesplayed", [t.gamesPlayed.toString()]));
            var n = t.score
              , r = e.startPoints
              , s = e.endPoints;
            this._header.setWeeklyPointsLabel(this.loc.localize("squadbattles.weeklypoints", [this.loc.localizeNumber(t.score)])),
            1 === e.level && -1 === s ? (this._header.setProgress(50),
            this._header.setProgressLabel(this.loc.localize("gamemodes.common.points", [n.toString()]))) : (this._header.setTierPoints(n, r, s),
            this._header.setProgressLabel(this.loc.localize("gamemodes.common.points", [r.toString()])),
            this._header.setProgressSecondLabel(this.loc.localize("gamemodes.common.points", [s.toString()]))),
            this._header.setTier(t.userCurrentTierLevel),
            this._header.toggleInfo(!1)
        }
        t.prizeTiers.filter(function(e) {
            return e.type === SquadBattlesTierType.POINT_TIERS
        }).forEach(function(e) {
            i.progressBars.push(i.generateEventTierProgress(e, t.score, t.userCurrentTierLevel, t.isRanked())),
            i.levels.push(i.generateEventTierTile(e, t.userCurrentTierLevel, t.isRanked()))
        }, this),
        t.prizeTiers.filter(function(e) {
            return e.type === SquadBattlesTierType.RANK_TIERS
        }).forEach(function(e) {
            i.progressBars.push(i.generateRankProgress(e, t.rank)),
            i.levels.push(i.generateRankTile(e, t.rank))
        }, this),
        this.layoutSubviews(),
        this.levels.forEach(function(e, t) {
            e.setupRewardsCarousel(0)
        }, this),
        this.scrollToActiveTier()
    }
    ,
    UTSquadBattlesView.prototype.onRewardInfoSelected = function(e, t, i) {
        this.isInteractionEnabled() && this._triggerActions(UTSquadBattlesTierView.Event.REWARDS_INFO, i)
    }
    ,
    UTSquadBattlesView
}(EATargetActionView);
UTSquadBattlesView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-squad-battles-view"),
        this._header = new UTSquadBattlesProgressionHeaderView,
        this._header.getRootElement().classList.add("ut-squad-battles-view--header"),
        e.appendChild(this._header.getRootElement()),
        this.__container = document.createElement("div"),
        this.__container.classList.add("ut-squad-battles-view--details");
        var t = document.createElement("div");
        t.classList.add("ut-squad-battles-view--event"),
        this.__progressView = document.createElement("div"),
        this.__progressView.classList.add("ut-tier-progress-bar"),
        t.appendChild(this.__progressView),
        this.__tierView = document.createElement("div"),
        this.__tierView.classList.add("ut-squad-battles-view--tiers"),
        t.appendChild(this.__tierView),
        this.__container.appendChild(t),
        e.appendChild(this.__container),
        this.__root = e,
        this._generated = !0
    }
}
,
UTSquadBattlesView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this._header.destroy(),
    this.__container = null,
    this.__progressView = null,
    this.__tierView = null
}
,
UTSquadBattlesView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}();
var UTSquadBattlesViewController = function(t) {
    function UTSquadBattlesViewController() {
        var e = t.call(this) || this;
        return e.vm = new UTSquadBattlesViewModel(services.SquadBattles),
        e
    }
    return __extends(UTSquadBattlesViewController, t),
    UTSquadBattlesViewController.prototype._getViewInstanceFromData = function() {
        return new UTSquadBattlesView({
            localization: services.Localization
        })
    }
    ,
    UTSquadBattlesViewController.prototype._getTelemetryId = function() {
        return "Squad Battles"
    }
    ,
    UTSquadBattlesViewController.prototype.getNavigationTitle = function() {
        return services.Localization.localize("navbar.label.squadbattles")
    }
    ,
    UTSquadBattlesViewController.prototype.viewDidAppear = function() {
        t.prototype.viewDidAppear.call(this),
        this.requestEventData(),
        TelemetryManager.trackPage(TelemetryManager.Sections.SQUADBATTLES, "Squad Battles Main")
    }
    ,
    UTSquadBattlesViewController.prototype.requestEventData = function() {
        var r = this;
        gClickShield.showShield(EAClickShieldView.Shield.LOADING),
        this.vm.requestEvent().observe(this, function(e, t) {
            var i, o;
            e.unobserve(r);
            var n = r.getView();
            t.success && (null === (i = t.data) || void 0 === i ? void 0 : i.event) ? (n.setEvent(t.data.event),
            n.addTarget(r, r.onSelectRewardInfo, UTSquadBattlesTierView.Event.REWARDS_INFO)) : (services.Notification.queue([services.Localization.localize("squadbattles.loaderror"), UINotificationType.NEGATIVE]),
            NetworkErrorManager.checkCriticalStatus(t.status) ? NetworkErrorManager.handleStatus(t.status) : null === (o = r.getNavigationController()) || void 0 === o || o.popViewController()),
            gClickShield.hideShield(EAClickShieldView.Shield.LOADING)
        })
    }
    ,
    UTSquadBattlesViewController.prototype.onSelectRewardInfo = function(e, t, i) {
        if (this.vm) {
            var o = this.vm.currentEvent
              , n = i.id
              , r = o ? JSUtils.find(o.prizeTiers, function(e) {
                return e.awardSetId === n
            }) : null;
            r ? this.triggerConsolidatedRewardsPopup([r.rewardSet], services.Localization.localize("gamemodeshub.sqbt.rewards.title", [n.toString()]), !1) : services.Notification.queue([services.Localization.localize("notification.sqbt.rewardsInfoFailed"), UINotificationType.NEGATIVE])
        }
    }
    ,
    UTSquadBattlesViewController.prototype.triggerConsolidatedRewardsPopup = function(e, t, i) {
        var o = new UTRewardSelectionChoiceViewController(e);
        o.setTitleText(t),
        o.setClaimableState(i),
        gPopupClickShield.setActivePopup(o)
    }
    ,
    UTSquadBattlesViewController
}(EAViewController)
  , UTRivalsNextDivisionTierView = (__extends = this && this.__extends || function() {
    var i = function(e, t) {
        return (i = Object.setPrototypeOf || {
            __proto__: []
        }instanceof Array && function(e, t) {
            e.__proto__ = t
        }
        || function(e, t) {
            for (var i in t)
                Object.prototype.hasOwnProperty.call(t, i) && (e[i] = t[i])
        }
        )(e, t)
    };
    return function(e, t) {
        function __() {
            this.constructor = e
        }
        i(e, t),
        e.prototype = null === t ? Object.create(t) : (__.prototype = t.prototype,
        new __)
    }
}(),
function(t) {
    function UTRivalsNextDivisionTierView() {
        var e = t.call(this) || this;
        return e.id = -1,
        e
    }
    return __extends(UTRivalsNextDivisionTierView, t),
    UTRivalsNextDivisionTierView.prototype.setDivisionCrest = function(e) {
        var t = "";
        t = e <= 0 ? "division_crest_master.png" : "division_crest_" + e + ".png",
        this._divisionCrest.src = "images/gameModes/rivals/division/crests/" + t
    }
    ,
    UTRivalsNextDivisionTierView
}(UTTierView));
UTRivalsNextDivisionTierView.prototype._generate = function _generate() {
    if (!this._generated) {
        var e = document.createElement("div");
        e.classList.add("ut-rivals-next-division-tier-view");
        var t = document.createElement("section");
        t.classList.add("ut-rivals-next-division-tier-view--content"),
        this.__title = document.createElement("h1"),
        this.__title.classList.add("ut-rivals-next-division-tier-view--title"),
        t.appendChild(this.__title);
        var i = document.createElement("div");
        i.classList.add("ut-rivals-next-division-tier-view--crest"),
        this._divisionCrest = new EAImageView,
        i.appendChild(this._divisionCrest.getRootElement()),
        t.appendChild(i),
        e.appendChild(t),
        this.__root = e,
        this._generated = !0
    }
}
,
UTRivalsNextDivisionTierView.prototype.destroyGeneratedElements = function destroyGeneratedElements() {
    DOMKit.remove(this.__root),
    this.__root = null,
    this.__title = null,
    this._divisionCrest.destroy()
}
,
UTRivalsNextDivisionTierView.prototype.getRootElement = function getRootElement() {
    return this.__root
}
;
